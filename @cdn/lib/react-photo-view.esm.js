import e,{createContext as n,useState as t,useRef as r,useReducer as i,useMemo as o,useContext as a,useImperativeHandle as c,useEffect as u,Children as l,cloneElement as s,useLayoutEffect as d,useCallback as v}from"react";import{createPortal as f}from"react-dom";function h(){return h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h.apply(this,arguments)}function m(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n.indexOf(t=o[r])>=0||(i[t]=e[t]);return i}function g(e){var n=r({fn:e,curr:void 0}).current;if(n.fn=e,!n.curr){var t=Object.create(null);Object.keys(e).forEach((function(e){t[e]=function(){var t;return(t=n.fn[e]).call.apply(t,[n.fn].concat([].slice.call(arguments)))}})),n.curr=t}return n.curr}function p(e){return i((function(e,n){return h({},e,"function"==typeof n?n(e):n)}),e)}var w=n(void 0),y="undefined"!=typeof window&&"ontouchstart"in window,x=function(e,n,t){return Math.max(Math.min(e,t),n)},C=function(e,n,t){return void 0===n&&(n=0),void 0===t&&(t=0),x(e,1*(1-t),Math.max(6,n)*(1+t))},b="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?u:d;function E(e,n,t){var i=r(n);i.current=n,u((function(){function n(e){i.current(e)}return e&&window.addEventListener(e,n,t),function(){e&&window.removeEventListener(e,n)}}),[e])}var P=["container"];function k(n){var t=n.container,r=void 0===t?document.body:t,i=m(n,P);return f(e.createElement("div",h({},i)),r)}function _(n){return e.createElement("svg",h({width:"44",height:"44",viewBox:"0 0 768 768"},n),e.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function M(n){return e.createElement("svg",h({width:"44",height:"44",viewBox:"0 0 768 768"},n),e.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Y(n){return e.createElement("svg",h({width:"44",height:"44",viewBox:"0 0 768 768"},n),e.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function X(){return u((function(){var e=document.body.style,n=e.overflow;return e.overflow="hidden",function(){e.overflow=n}}),[]),null}function N(e){var n=e.touches[0],t=n.clientX,r=n.clientY;if(e.touches.length>=2){var i=e.touches[1],o=i.clientX,a=i.clientY;return[(t+o)/2,(r+a)/2,Math.sqrt(Math.pow(o-t,2)+Math.pow(a-r,2))]}return[t,r,0]}var W=function(e,n,t,r){var i=t*n,o=(i-r)/2,a=void 0,c=e;return i<=r?(a=1,c=0):e>0&&o-e<=0?(a=2,c=o):e<0&&o+e<=0&&(a=3,c=-o),[a,c]};function S(e,n,t,r,i,o,a,c,u,l){void 0===a&&(a=innerWidth/2),void 0===c&&(c=innerHeight/2),void 0===u&&(u=0),void 0===l&&(l=0);var s=W(e,o,t,innerWidth)[0],d=W(n,o,r,innerHeight),v=innerWidth/2,f=innerHeight/2;return{x:a-o/i*(a-(v+e))-v+(r/t>=3&&t*o===innerWidth?0:s?u/2:u),y:c-o/i*(c-(f+n))-f+(d[0]?l/2:l),lastCX:a,lastCY:c}}function T(e,n,t){var r=e%180!=0;return r?[t,n,r]:[n,t,r]}function V(e,n,t){var r=T(t,innerWidth,innerHeight),i=r[0],o=r[1],a=0,c=i,u=o,l=e/n*o,s=n/e*i;return e<i&&n<o?(c=e,u=n):e<i&&n>=o?c=l:e>=i&&n<o||e/n>i/o?u=s:n/e>=3&&!r[2]?a=((u=s)-o)/2:c=l,{width:c,height:u,x:0,y:a,pause:!0}}function R(e,n){var t=n.leading,i=void 0!==t&&t,o=n.maxWait,a=n.wait,c=void 0===a?o||0:a,u=r(e);u.current=e;var l=r(0),s=r(),d=function(){return s.current&&clearTimeout(s.current)},f=v((function(){var e=[].slice.call(arguments),n=Date.now();function t(){l.current=n,d(),u.current.apply(null,e)}var r=l.current,a=n-r;if(0===r&&(i&&t(),l.current=n),void 0!==o){if(a>o)return void t()}else a<c&&(l.current=n);d(),s.current=setTimeout((function(){t(),l.current=0}),c)}),[c,o,i]);return f.cancel=d,f}var A=function(e,n,t){return H(e,n,t,100,(function(e){return e}),(function(){return H(n,e,t)}))},I=function(e){return 1-Math.pow(1-e,4)};function H(e,n,t,r,i,o){void 0===r&&(r=400),void 0===i&&(i=I);var a=n-e;if(0!==a){var c=Date.now(),u=0,l=function(){var n=Math.min(1,(Date.now()-c)/r);t(e+i(n)*a)&&n<1?s():(cancelAnimationFrame(u),n>=1&&o&&o())};s()}function s(){u=requestAnimationFrame(l)}}var L={T:0,L:0,W:0,H:0,FIT:void 0},F=function(){var e=r(!1);return u((function(){return e.current=!0,function(){e.current=!1}}),[]),e},D=["className"];function O(n){var t=n.className,r=m(n,D);return e.createElement("div",h({className:"PhotoView__Spinner "+t},r),e.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},e.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),e.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var B=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function z(n){var t=n.src,r=n.loaded,i=n.broken,o=n.className,a=n.onPhotoLoad,c=n.loadingElement,u=n.brokenElement,l=m(n,B),s=F();return t&&!i?e.createElement(e.Fragment,null,e.createElement("img",h({className:"PhotoView__Photo"+(o?" "+o:""),src:t,onLoad:function(e){var n=e.target;s.current&&a({loaded:!0,naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight})},onError:function(){s.current&&a({broken:!0})},alt:""},l)),!r&&(e.createElement("span",{className:"PhotoView__icon"},c)||e.createElement(O,{className:"PhotoView__icon"}))):u?e.createElement("span",{className:"PhotoView__icon"},"function"==typeof u?u({src:t}):u):null}var j={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function q(n){var i=n.item,o=i.src,a=i.render,c=i.width,l=void 0===c?0:c,s=i.height,d=void 0===s?0:s,v=i.originRef,f=n.visible,m=n.speed,w=n.easing,x=n.wrapClassName,P=n.className,k=n.style,_=n.loadingElement,M=n.brokenElement,Y=n.onPhotoTap,X=n.onMaskTap,I=n.onReachMove,D=n.onReachUp,O=n.onPhotoResize,B=n.isActive,q=n.expose,K=p(j),U=K[0],G=K[1],J=r(0),Q=F(),Z=U.naturalWidth,$=void 0===Z?l:Z,ee=U.naturalHeight,ne=void 0===ee?d:ee,te=U.width,re=void 0===te?l:te,ie=U.height,oe=void 0===ie?d:ie,ae=U.loaded,ce=void 0===ae?!o:ae,ue=U.broken,le=U.x,se=U.y,de=U.touched,ve=U.stopRaf,fe=U.maskTouched,he=U.rotate,me=U.scale,ge=U.CX,pe=U.CY,we=U.lastX,ye=U.lastY,xe=U.lastCX,Ce=U.lastCY,be=U.lastScale,Ee=U.touchTime,Pe=U.touchLength,ke=U.pause,_e=U.reach,Me=g({onScale:function(e){return Ye(C(e))},onRotate:function(e){he!==e&&(q({rotate:e}),G(h({rotate:e},V($,ne,e))))}});function Ye(e,n,t){me!==e&&(q({scale:e}),G(h({scale:e},S(le,se,re,oe,me,e,n,t),e<=1&&{x:0,y:0})))}var Xe=R((function(e,n,t){if(void 0===t&&(t=0),(de||fe)&&B){var r=T(he,re,oe),i=r[0],o=r[1];if(0===t&&0===J.current){var a=Math.abs(e-ge)<=20,c=Math.abs(n-pe)<=20;if(a&&c)return void G({lastCX:e,lastCY:n});J.current=a?n>pe?3:2:1}var u=e-xe,l=n-Ce,s=void 0;if(0===t){var d=W(u+we,me,i,innerWidth)[0],v=W(l+ye,me,o,innerHeight);s=function(e,n,t,r){return n&&1===e||"x"===r?"x":t&&e>1||"y"===r?"y":void 0}(J.current,d,v[0],_e),void 0!==s&&I(s,e,n,me)}if("x"===s||fe)return void G({reach:"x"});var f=C(me+(t-Pe)/100/2*me,$/re,.2);q({scale:f}),G(h({touchLength:t,reach:s,scale:f},S(le,se,re,oe,me,f,e,n,u,l)))}}),{maxWait:8});function Ne(e){return!ve&&!de&&(Q.current&&G(h({},e,{pause:f})),Q.current)}var We,Se,Te,Ve,Re,Ae,Ie,He,Le=(Re=function(e){return Ne({x:e})},Ae=function(e){return Ne({y:e})},Ie=function(e){return Q.current&&(q({scale:e}),G({scale:e})),!de&&Q.current},He=g({X:function(e){return Re(e)},Y:function(e){return Ae(e)},S:function(e){return Ie(e)}}),function(e,n,t,r,i,o,a,c,u,l,s){var d=T(l,i,o),v=d[0],f=d[1],h=W(e,c,v,innerWidth),m=h[0],g=h[1],p=W(n,c,f,innerHeight),w=p[0],y=p[1],x=Date.now()-s;if(x>=200||c!=a||Math.abs(u-a)>1){var C=S(e,n,i,o,a,c),b=C.x,E=C.y,P=m?g:b!==e?b:null,k=w?y:E!==n?E:null;return null!==P&&H(e,P,He.X),null!==k&&H(n,k,He.Y),void(c!=a&&H(a,c,He.S))}var _=(e-t)/x,M=(n-r)/x,Y=Math.sqrt(Math.pow(_,2)+Math.pow(M,2)),X=!1,N=!1;!function(e,n){var t=e,r=0,i=void 0,o=0,a=function(o){i||(i=o);var a=o-i,l=Math.sign(e),s=-.001*l,d=Math.sign(-t)*Math.pow(t,2)*2e-4,v=t*a+(s+d)*Math.pow(a,2)/2;r+=v,i=o,l*(t+=(s+d)*a)<=0?u():n(r)?c():u()};function c(){o=requestAnimationFrame(a)}function u(){cancelAnimationFrame(o)}c()}(Y,(function(t){var r=e+t*(_/Y),i=n+t*(M/Y),o=W(r,a,v,innerWidth),c=o[0],u=o[1],l=W(i,a,f,innerHeight),s=l[0],d=l[1];if(c&&!X&&(X=!0,m?H(r,u,He.X):A(u,r+(r-u),He.X)),s&&!N&&(N=!0,w?H(i,d,He.Y):A(d,i+(i-d),He.Y)),X&&N)return!1;var h=X||He.X(u),g=N||He.Y(d);return h&&g}))}),Fe=(We=Y,Se=function(e,n){_e||Ye(1!==me?1:Math.max(2,$/re),e,n)},Te=r(0),Ve=R((function(){Te.current=0,We.apply(void 0,[].slice.call(arguments))}),{wait:300}),function(){var e=[].slice.call(arguments);Te.current+=1,Ve.apply(void 0,e),Te.current>=2&&(Ve.cancel(),Te.current=0,Se.apply(void 0,e))});function De(e,n){if(J.current=0,(de||fe)&&B){G({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var t=C(me,$/re);if(Le(le,se,we,ye,re,oe,me,t,be,he,Ee),D(e,n),ge===e&&pe===n){if(de)return void Fe(e,n);fe&&X(e,n)}}}function Oe(e,n,t){void 0===t&&(t=0),G({touched:!0,CX:e,CY:n,lastCX:e,lastCY:n,lastX:le,lastY:se,lastScale:me,touchLength:t,touchTime:Date.now()})}function Be(e){G({maskTouched:!0,CX:e.clientX,CY:e.clientY,lastX:le,lastY:se})}E(y?void 0:"mousemove",(function(e){e.preventDefault(),Xe(e.clientX,e.clientY)})),E(y?void 0:"mouseup",(function(e){De(e.clientX,e.clientY)})),E(y?"touchmove":void 0,(function(e){e.preventDefault();var n=N(e);Xe.apply(void 0,n)}),{passive:!1}),E(y?"touchend":void 0,(function(e){var n=e.changedTouches[0];De(n.clientX,n.clientY)}),{passive:!1}),E("resize",R((function(){ce&&!de&&(G(V($,ne,he)),O())}),{maxWait:8})),b((function(){B&&q(h({scale:me,rotate:he},Me))}),[B]);var ze=function(e,n,i,o,a,c,l,s,d,v){var f=function(e,n,t,i,o){var a=r(!1),c=p({lead:!0,scale:t}),u=c[0],l=u.lead,s=u.scale,d=c[1],v=R((function(e){try{return o(!0),d({lead:!1,scale:e}),Promise.resolve()}catch(e){return Promise.reject(e)}}),{wait:i});return b((function(){a.current?(o(!1),d({lead:!0}),v(t)):a.current=!0}),[t]),l?[e*s,n*s,t/s]:[e*t,n*t,1]}(c,l,s,d,v),h=f[0],m=f[1],w=f[2],y=function(e,n,i,o,a){var c=t(L),l=c[0],s=c[1],d=t(0),v=d[0],f=d[1],h=r(),m=g({OK:function(){return e&&f(4)}});function p(e){a(!1),f(e)}return u((function(){if(h.current||(h.current=Date.now()),i){if(function(e,n){var t=e&&e.current;if(t&&1===t.nodeType){var r=t.getBoundingClientRect();n({T:r.top,L:r.left,W:r.width,H:r.height,FIT:"IMG"===t.tagName?getComputedStyle(t).objectFit:void 0})}}(n,s),e)return Date.now()-h.current<250?(f(1),requestAnimationFrame((function(){f(2),requestAnimationFrame((function(){return p(3)}))})),void setTimeout(m.OK,o)):void f(4);p(5)}}),[e,i]),[v,l]}(e,n,i,d,v),x=y[0],C=y[1],E=C.W,P=C.FIT,k=innerWidth/2,_=innerHeight/2,M=x<3||x>4;return[M?E?C.L:k:o+(k-c*s/2),M?E?C.T:_:a+(_-l*s/2),h,M&&P?h*(C.H/E):m,0===x?w:M?E/(c*s)||.01:w,M?P?1:0:1,x,P]}(f,v,ce,le,se,re,oe,me,m,(function(e){return G({pause:e})})),je=ze[4],qe=ze[6],Ke="transform "+m+"ms "+w,Ue={className:P,onMouseDown:y?void 0:function(e){e.stopPropagation(),0===e.button&&Oe(e.clientX,e.clientY,0)},onTouchStart:y?function(e){e.stopPropagation(),Oe.apply(void 0,N(e))}:void 0,onWheel:function(e){if(!_e){var n=C(me-e.deltaY/100/2,$/re);G({stopRaf:!0}),Ye(n,e.clientX,e.clientY)}},style:{width:ze[2],height:ze[3],opacity:ze[5],objectFit:4===qe?void 0:ze[7],transform:he?"rotate("+he+"deg)":void 0,transition:qe>2?Ke+", opacity "+m+"ms ease, height "+(qe<4?m/2:qe>4?m:0)+"ms "+w:void 0}};return e.createElement("div",{className:"PhotoView__PhotoWrap"+(x?" "+x:""),style:k,onMouseDown:!y&&B?Be:void 0,onTouchStart:y&&B?function(e){return Be(e.touches[0])}:void 0},e.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+je+", 0, 0, "+je+", "+ze[0]+", "+ze[1]+")",transition:de||ke?void 0:Ke,willChange:B?"transform":void 0}},o?e.createElement(z,h({src:o,loaded:ce,broken:ue},Ue,{onPhotoLoad:function(e){G(h({},e,e.loaded&&V(e.naturalWidth||0,e.naturalHeight||0,he)))},loadingElement:_,brokenElement:M})):a&&a({attrs:Ue,scale:je,rotate:he})))}var K={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function U(n){var a=n.loop,c=void 0===a?3:a,u=n.speed,l=n.easing,s=n.photoClosable,d=n.maskClosable,v=void 0===d||d,f=n.maskOpacity,h=void 0===f?1:f,m=n.pullClosable,w=void 0===m||m,C=n.bannerVisible,P=void 0===C||C,N=n.overlayRender,W=n.toolbarRender,S=n.className,T=n.maskClassName,V=n.photoClassName,R=n.photoWrapClassName,A=n.loadingElement,I=n.brokenElement,H=n.images,L=n.index,F=void 0===L?0:L,D=n.onIndexChange,O=n.visible,B=n.onClose,z=n.afterClose,j=n.portalContainer,U=p(K),G=U[0],J=U[1],Q=t(0),Z=Q[0],$=Q[1],ee=G.x,ne=G.touched,te=G.pause,re=G.lastCX,ie=G.lastCY,oe=G.bg,ae=void 0===oe?h:oe,ce=G.lastBg,ue=G.overlay,le=G.minimal,se=G.scale,de=G.rotate,ve=G.onScale,fe=G.onRotate,he=n.hasOwnProperty("index"),me=he?F:Z,ge=he?D:$,pe=r(me),we=H.length,ye=H[me],xe="boolean"==typeof c?c:we>c,Ce=function(e,n){var t=i((function(e){return!e}),!1)[1],a=r(0),c=function(n,t){var i=r(n);function c(e){i.current=e}return o((function(){var n;n=c,e?(n(e),a.current=1):a.current=2}),[n]),[i.current,c]}(e),u=c[1];return[c[0],a.current,function(){t(),2===a.current&&(u(!1),n&&n()),a.current=0}]}(O,z),be=Ce[0],Ee=Ce[1],Pe=Ce[2];b((function(){if(be)return J({pause:!0,x:me*-(innerWidth+20)}),void(pe.current=me);J(K)}),[be]);var ke=g({close:function(e){fe&&fe(0),J({overlay:!0,lastBg:ae}),B(e)},changeIndex:function(e,n){void 0===n&&(n=!1);var t=xe?pe.current+(e-me):e,r=we-1,i=x(t,0,r),o=xe?t:i,a=innerWidth+20;J({touched:!1,lastCX:void 0,lastCY:void 0,x:-a*o,pause:n}),pe.current=o,ge&&ge(xe?e<0?r:e>r?0:e:i)}}),_e=ke.close,Me=ke.changeIndex;function Ye(e){return e?_e():J({overlay:!ue})}function Xe(){J({x:-(innerWidth+20)*me,lastCX:void 0,lastCY:void 0,pause:!0}),pe.current=me}function Ne(e,n,t,r){"x"===e?function(e){if(void 0!==re){var n=e-re,t=n;!xe&&(0===me&&n>0||me===we-1&&n<0)&&(t=n/2),J({touched:!0,lastCX:re,x:-(innerWidth+20)*pe.current+t,pause:!1})}else J({touched:!0,lastCX:e,x:ee,pause:!1})}(n):"y"===e&&function(e,n){if(void 0!==ie){var t=null===h?null:x(h,.01,h-Math.abs(e-ie)/100/4);J({touched:!0,lastCY:ie,bg:1===n?t:h,minimal:1===n})}else J({touched:!0,lastCY:e,bg:ae,minimal:!0})}(t,r)}function We(e,n){var t=e-(null!=re?re:e),r=n-(null!=ie?ie:n),i=!1;if(t<-40)Me(me+1);else if(t>40)Me(me-1);else{var o=-(innerWidth+20)*pe.current;Math.abs(r)>100&&le&&w&&(i=!0,_e()),J({touched:!1,x:o,lastCX:void 0,lastCY:void 0,bg:h,overlay:!!i||ue})}}E("keydown",(function(e){if(O)switch(e.key){case"ArrowLeft":Me(me-1,!0);break;case"ArrowRight":Me(me+1,!0);break;case"Escape":_e()}}));var Se=function(e,n,t){return o((function(){var r=e.length;return t?e.concat(e).concat(e).slice(r+n-1,r+n+2):e.slice(Math.max(n-1,0),Math.min(n+2,r+1))}),[e,n,t])}(H,me,xe);if(!be)return null;var Te=ue&&!Ee,Ve=O?ae:ce,Re=ve&&fe&&{images:H,index:me,visible:O,onClose:_e,onIndexChange:Me,overlayVisible:Te,overlay:ye&&ye.overlay,scale:se,rotate:de,onScale:ve,onRotate:fe},Ae=u?u(Ee):400,Ie=l?l(Ee):"cubic-bezier(0.25, 0.8, 0.25, 1)",He=u?u(3):600,Le=l?l(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return e.createElement(k,{className:"PhotoView-Portal"+(Te?"":" PhotoView-Slider__clean")+(O?"":" PhotoView-Slider__willClose")+(S?" "+S:""),role:"dialog",onClick:function(e){return e.stopPropagation()},container:j},O&&e.createElement(X,null),e.createElement("div",{className:"PhotoView-Slider__Backdrop"+(T?" "+T:"")+(1===Ee?" PhotoView-Slider__fadeIn":2===Ee?" PhotoView-Slider__fadeOut":""),style:{background:Ve?"rgba(0, 0, 0, "+Ve+")":void 0,transitionTimingFunction:Ie,transitionDuration:(ne?0:Ae)+"ms",animationDuration:Ae+"ms"},onAnimationEnd:Pe}),P&&e.createElement("div",{className:"PhotoView-Slider__BannerWrap"},e.createElement("div",{className:"PhotoView-Slider__Counter"},me+1," / ",we),e.createElement("div",{className:"PhotoView-Slider__BannerRight"},W&&Re&&W(Re),e.createElement(_,{className:"PhotoView-Slider__toolbarIcon",onClick:_e}))),Se.map((function(n,t){var r=xe||0!==me?pe.current-1+t:me+t;return e.createElement(q,{key:xe?n.key+"/"+n.src+"/"+r:n.key,item:n,speed:Ae,easing:Ie,visible:O,onReachMove:Ne,onReachUp:We,onPhotoTap:function(){return Ye(s)},onMaskTap:function(){return Ye(v)},wrapClassName:R,className:V,style:{left:(innerWidth+20)*r+"px",transform:"translate3d("+ee+"px, 0px, 0)",transition:ne||te?void 0:"transform "+He+"ms "+Le},loadingElement:A,brokenElement:I,onPhotoResize:Xe,isActive:pe.current===r,expose:J})})),!y&&P&&e.createElement(e.Fragment,null,(xe||0!==me)&&e.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return Me(me-1,!0)}},e.createElement(M,null)),(xe||me+1<we)&&e.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return Me(me+1,!0)}},e.createElement(Y,null))),N&&Re&&e.createElement("div",{className:"PhotoView-Slider__Overlay"},N(Re)))}var G=["children","onIndexChange","onVisibleChange"],J={images:[],visible:!1,index:0};function Q(n){var t=n.children,i=n.onIndexChange,a=n.onVisibleChange,c=m(n,G),u=p(J),l=u[0],s=u[1],d=r(0),v=l.images,f=l.visible,y=l.index,x=g({nextId:function(){return d.current+=1},update:function(e){var n=v.findIndex((function(n){return n.key===e.key}));if(n>-1){var t=v.slice();return t.splice(n,1,e),void s({images:t})}s((function(n){return{images:n.images.concat(e)}}))},remove:function(e){s((function(n){var t=n.images.filter((function(n){return n.key!==e}));return{images:t,index:Math.min(t.length-1,y)}}))},show:function(e){var n=v.findIndex((function(n){return n.key===e}));s({visible:!0,index:n}),a&&a(!0,n,l)}}),C=g({close:function(){s({visible:!1}),a&&a(!1,y,l)},changeIndex:function(e){s({index:e}),i&&i(e,l)}}),b=o((function(){return h({},l,x)}),[l,x]);return e.createElement(w.Provider,{value:b},t,e.createElement(U,h({images:v,visible:f,index:y,onIndexChange:C.changeIndex,onClose:C.close},c)))}var Z=function(e){var n,t,i=e.src,d=e.render,v=e.overlay,f=e.width,m=e.height,p=e.triggers,y=void 0===p?["onClick"]:p,x=e.children,C=a(w),b=(n=function(){return C.nextId()},(t=r({sign:!1,fn:void 0}).current).sign||(t.sign=!0,t.fn=n()),t.fn),E=r(null);c(null==x?void 0:x.ref,(function(){return E.current})),u((function(){return function(){C.remove(b)}}),[]);var P=g({render:function(e){return d&&d(e)},show:function(e,n){C.show(b),function(e,n){if(x){var t=x.props[e];t&&t(n)}}(e,n)}}),k=o((function(){var e={};return y.forEach((function(n){e[n]=P.show.bind(null,n)})),e}),[]);return u((function(){C.update({key:b,src:i,originRef:E,render:P.render,overlay:v,width:f,height:m})}),[i]),x?l.only(s(x,h({},k,{ref:E}))):null};export{Q as PhotoProvider,U as PhotoSlider,Z as PhotoView};
