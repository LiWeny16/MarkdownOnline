import{d as Fe,a as vf,b as Af,c as Lf}from"./dayjs-52a2a022.js";import{d as Mr}from"./@braintree-f19cff0e.js";import"./d3-transition-dcb2c4ce.js";import"./d3-zoom-a2c53521.js";import{p as ss}from"./dompurify-68816782.js";import{d as yt,e as Ph}from"./d3-selection-de98f9a2.js";import{w as Zi,G as Ni,l as nn,a as Mh,r as Bf,b as If,i as nr,c as Vh}from"./dagre-d3-es-57771b5d.js";import{a as an,b as Df,d as Ff,e as Rf,f as Nf,g as Of,h as Pf,i as Mf,j as Vf,k as zf,m as qf,n as Wf,c as ii,o as Yf,p as Uf,q as Hf,r as Gf,s as jf,t as Xf,u as $f,l as xr,v as ns,w as Kf}from"./d3-shape-c15df95d.js";import{l as Ct,a as et,i as kt,r as Jr,d as At,b as Vr,c as zh}from"./khroma-dc7cc5cc.js";import{v as Qf}from"./uuid-55471c42.js";import{t as Zf,l as Vs,o as Ko,b as hc}from"./d3-scale-20fecb82.js";import{m as Jf,e as t2}from"./d3-array-58f6faf7.js";import{g as e2}from"./d3-interpolate-23596b47.js";import{a as i2,b as r2}from"./d3-axis-8d489beb.js";import{t as uc}from"./d3-time-format-0d1ca8ac.js";import{d as dc,b as fc,a as pc,t as gc,s as yc,n as mc,i as s2,o as n2,p as a2,j as o2,q as l2,r as c2,c as h2}from"./d3-time-ff8162d9.js";import{E as u2}from"./elkjs-af0ec365.js";import{c as qh}from"./cytoscape-b0e0a780.js";import{c as d2}from"./cytoscape-cose-bilkent-bcaac8aa.js";import{S as f2,s as p2,l as g2,r as y2,c as m2,j as x2}from"./d3-sankey-15198533.js";import{s as Wh}from"./d3-scale-chromatic-1b767f5e.js";import{d as Yh}from"./ts-dedent-356e4a49.js";import{H as Qo,A as b2,d as Ha,G as k2}from"./lodash-es-82f45aac.js";import{f as Uh}from"./mdast-util-from-markdown-32388d6f.js";const _2="modulepreload",T2=function(t,e){return new URL(t,e).href},xc={},ne=function(e,i,r){if(!i||i.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(i.map(n=>{if(n=T2(n,r),n in xc)return;xc[n]=!0;const a=n.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const p=s[u];if(p.href===n&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":_2,a||(h.as="script",h.crossOrigin=""),h.href=n,document.head.appendChild(h),a)return new Promise((u,p)=>{h.addEventListener("load",u),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n})};var Hh="comm",Gh="rule",jh="decl",C2="@import",E2="@namespace",S2="@keyframes",w2="@layer",Xh=Math.abs,Zo=String.fromCharCode;function $h(t){return t.trim()}function vn(t,e,i){return t.replace(e,i)}function v2(t,e,i){return t.indexOf(e,i)}function ts(t,e){return t.charCodeAt(e)|0}function as(t,e,i){return t.slice(e,i)}function vi(t){return t.length}function A2(t){return t.length}function bn(t,e){return e.push(t),t}var ma=1,os=1,Kh=0,pi=0,ge=0,ks="";function Jo(t,e,i,r,s,n,a,o){return{value:t,root:e,parent:i,type:r,props:s,children:n,line:ma,column:os,length:a,return:"",siblings:o}}function L2(){return ge}function B2(){return ge=pi>0?ts(ks,--pi):0,os--,ge===10&&(os=1,ma--),ge}function _i(){return ge=pi<Kh?ts(ks,pi++):0,os++,ge===10&&(os=1,ma++),ge}function pr(){return ts(ks,pi)}function An(){return pi}function xa(t,e){return as(ks,t,e)}function zs(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I2(t){return ma=os=1,Kh=vi(ks=t),pi=0,[]}function D2(t){return ks="",t}function Ga(t){return $h(xa(pi-1,io(t===91?t+2:t===40?t+1:t)))}function F2(t){for(;(ge=pr())&&ge<33;)_i();return zs(t)>2||zs(ge)>3?"":" "}function R2(t,e){for(;--e&&_i()&&!(ge<48||ge>102||ge>57&&ge<65||ge>70&&ge<97););return xa(t,An()+(e<6&&pr()==32&&_i()==32))}function io(t){for(;_i();)switch(ge){case t:return pi;case 34:case 39:t!==34&&t!==39&&io(ge);break;case 40:t===41&&io(t);break;case 92:_i();break}return pi}function N2(t,e){for(;_i()&&t+ge!==47+10;)if(t+ge===42+42&&pr()===47)break;return"/*"+xa(e,pi-1)+"*"+Zo(t===47?t:_i())}function O2(t){for(;!zs(pr());)_i();return xa(t,pi)}function P2(t){return D2(Ln("",null,null,null,[""],t=I2(t),0,[0],t))}function Ln(t,e,i,r,s,n,a,o,l){for(var h=0,u=0,p=a,d=0,g=0,y=0,x=1,_=1,v=1,C=0,R="",A=s,T=n,k=r,w=R;_;)switch(y=C,C=_i()){case 40:if(y!=108&&ts(w,p-1)==58){v2(w+=vn(Ga(C),"&","&\f"),"&\f",Xh(h?o[h-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:w+=Ga(C);break;case 9:case 10:case 13:case 32:w+=F2(y);break;case 92:w+=R2(An()-1,7);continue;case 47:switch(pr()){case 42:case 47:bn(M2(N2(_i(),An()),e,i,l),l),(zs(y||1)==5||zs(pr()||1)==5)&&vi(w)&&as(w,-1,void 0)!==" "&&(w+=" ");break;default:w+="/"}break;case 123*x:o[h++]=vi(w)*v;case 125*x:case 59:case 0:switch(C){case 0:case 125:_=0;case 59+u:v==-1&&(w=vn(w,/\f/g,"")),g>0&&(vi(w)-p||x===0&&y===47)&&bn(g>32?kc(w+";",r,i,p-1,l):kc(vn(w," ","")+";",r,i,p-2,l),l);break;case 59:w+=";";default:if(bn(k=bc(w,e,i,h,u,s,o,R,A=[],T=[],p,n),n),C===123)if(u===0)Ln(w,e,k,k,A,n,p,o,T);else{switch(d){case 99:if(ts(w,3)===110)break;case 108:if(ts(w,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Ln(t,k,k,r&&bn(bc(t,k,k,0,0,s,o,R,s,A=[],p,T),T),s,T,p,o,r?A:T):Ln(w,k,k,k,[""],T,0,o,T)}}h=u=g=0,x=v=1,R=w="",p=a;break;case 58:p=1+vi(w),g=y;default:if(x<1){if(C==123)--x;else if(C==125&&x++==0&&B2()==125)continue}switch(w+=Zo(C),C*x){case 38:v=u>0?1:(w+="\f",-1);break;case 44:o[h++]=(vi(w)-1)*v,v=1;break;case 64:pr()===45&&(w+=Ga(_i())),d=pr(),u=p=vi(R=w+=O2(An())),C++;break;case 45:y===45&&vi(w)==2&&(x=0)}}return n}function bc(t,e,i,r,s,n,a,o,l,h,u,p){for(var d=s-1,g=s===0?n:[""],y=A2(g),x=0,_=0,v=0;x<r;++x)for(var C=0,R=as(t,d+1,d=Xh(_=a[x])),A=t;C<y;++C)(A=$h(_>0?g[C]+" "+R:vn(R,/&\f/g,g[C])))&&(l[v++]=A);return Jo(t,e,i,s===0?Gh:o,l,h,u,p)}function M2(t,e,i,r){return Jo(t,e,i,Hh,Zo(L2()),as(t,2,-2),0,r)}function kc(t,e,i,r,s){return Jo(t,e,i,jh,as(t,0,r),as(t,r+1,-1),r,s)}function ro(t,e){for(var i="",r=0;r<t.length;r++)i+=e(t[r],r,t,e)||"";return i}function V2(t,e,i,r){switch(t.type){case w2:if(t.children.length)break;case C2:case E2:case jh:return t.return=t.return||t.value;case Hh:return"";case S2:return t.return=t.value+"{"+ro(t.children,r)+"}";case Gh:if(!vi(t.value=t.props.join(",")))return""}return vi(i=ro(t.children,r))?t.return=t.value+"{"+i+"}":""}const ji={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},B={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},tl=function(t="fatal"){let e=ji.fatal;typeof t=="string"?(t=t.toLowerCase(),t in ji&&(e=ji[t])):typeof t=="number"&&(e=t),B.trace=()=>{},B.debug=()=>{},B.info=()=>{},B.warn=()=>{},B.error=()=>{},B.fatal=()=>{},e<=ji.fatal&&(B.fatal=console.error?console.error.bind(console,li("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",li("FATAL"))),e<=ji.error&&(B.error=console.error?console.error.bind(console,li("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",li("ERROR"))),e<=ji.warn&&(B.warn=console.warn?console.warn.bind(console,li("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",li("WARN"))),e<=ji.info&&(B.info=console.info?console.info.bind(console,li("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",li("INFO"))),e<=ji.debug&&(B.debug=console.debug?console.debug.bind(console,li("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",li("DEBUG"))),e<=ji.trace&&(B.trace=console.debug?console.debug.bind(console,li("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",li("TRACE")))},li=t=>`%c${Fe().format("ss.SSS")} : ${t} : `,_s=/<br\s*\/?>/gi,z2=t=>t?Zh(t).replace(/\\n/g,"#br#").split("#br#"):[""],q2=(()=>{let t=!1;return()=>{t||(W2(),t=!0)}})();function W2(){const t="data-temp-href-target";ss.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")||"")}),ss.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)||""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}const Qh=t=>(q2(),ss.sanitize(t)),_c=(t,e)=>{var i;if(((i=e.flowchart)==null?void 0:i.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=Qh(t):r!=="loose"&&(t=Zh(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=G2(t))}return t},ue=(t,e)=>t&&(e.dompurifyConfig?t=ss.sanitize(_c(t,e),e.dompurifyConfig).toString():t=ss.sanitize(_c(t,e),{FORBID_TAGS:["style"]}).toString(),t),Y2=(t,e)=>typeof t=="string"?ue(t,e):t.flat().map(i=>ue(i,e)),U2=t=>_s.test(t),H2=t=>t.split(_s),G2=t=>t.replace(/#br#/g,"<br/>"),Zh=t=>t.replace(_s,"#br#"),j2=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},Ce=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),X2=function(...t){const e=t.filter(i=>!isNaN(i));return Math.max(...e)},$2=function(...t){const e=t.filter(i=>!isNaN(i));return Math.min(...e)},Bs=function(t){const e=t.split(/(,)/),i=[];for(let r=0;r<e.length;r++){let s=e[r];if(s===","&&r>0&&r+1<e.length){const n=e[r-1],a=e[r+1];K2(n,a)&&(s=n+","+a,r++,i.pop())}i.push(Q2(s))}return i.join("")},so=(t,e)=>Math.max(0,t.split(e).length-1),K2=(t,e)=>{const i=so(t,"~"),r=so(e,"~");return i===1&&r===1},Q2=t=>{const e=so(t,"~");let i=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),i=!0);const r=[...t];let s=r.indexOf("~"),n=r.lastIndexOf("~");for(;s!==-1&&n!==-1&&s!==n;)r[s]="<",r[n]=">",s=r.indexOf("~"),n=r.lastIndexOf("~");return i&&r.unshift("~"),r.join("")},Tc=()=>window.MathMLElement!==void 0,no=/\$\$(.*)\$\$/g,gi=t=>{var e;return(((e=t.match(no))==null?void 0:e.length)??0)>0},on=async(t,e)=>{t=await zr(t,e);const i=document.createElement("div");i.innerHTML=t,i.id="katex-temp",i.style.visibility="hidden",i.style.position="absolute",i.style.top="0";const r=document.querySelector("body");r?.insertAdjacentElement("beforeend",i);const s={width:i.clientWidth,height:i.clientHeight};return i.remove(),s},zr=async(t,e)=>{if(!gi(t))return t;if(!Tc()&&!e.legacyMathML)return t.replace(no,"MathML is unsupported in this environment.");const{default:i}=await ne(()=>import("./katex-f1cbb8ad.js"),[],import.meta.url);return t.split(_s).map(r=>gi(r)?`
            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">
              ${r}
            </div>
          `:`<div>${r}</div>`).join("").replace(no,(r,s)=>i.renderToString(s,{throwOnError:!0,displayMode:!0,output:Tc()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},mt={getRows:z2,sanitizeText:ue,sanitizeTextOrArray:Y2,hasBreaks:U2,splitBreaks:H2,lineBreakRegex:_s,removeScript:Qh,getUrl:j2,evaluate:Ce,getMax:X2,getMin:$2},qe=(t,e)=>e?et(t,{s:-40,l:10}):et(t,{s:-40,l:-10}),ba="#ffffff",ka="#f2f2f2";let Z2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||et(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||et(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||qe(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||qe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||qe(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||qe(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||kt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||kt(this.tertiaryColor),this.lineColor=this.lineColor||kt(this.background),this.arrowheadColor=this.arrowheadColor||kt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||At(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||kt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ct(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.darkMode)for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=At(this["cScale"+g],75);else for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=At(this["cScale"+g],25);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleInv"+g]=this["cScaleInv"+g]||kt(this["cScale"+g]);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this.darkMode?this["cScalePeer"+g]=this["cScalePeer"+g]||Ct(this["cScale"+g],10):this["cScalePeer"+g]=this["cScalePeer"+g]||At(this["cScale"+g],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleLabel"+g]=this["cScaleLabel"+g]||this.scaleLabelColor;const d=this.darkMode?-4:-1;for(let g=0;g<5;g++)this["surface"+g]=this["surface"+g]||et(this.mainBkg,{h:180,s:-15,l:d*(5+g*3)}),this["surfacePeer"+g]=this["surfacePeer"+g]||et(this.mainBkg,{h:180,s:-15,l:d*(8+g*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||et(this.primaryColor,{h:64}),this.fillType3=this.fillType3||et(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||et(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||et(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||et(this.primaryColor,{h:128}),this.fillType7=this.fillType7||et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-10}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Vr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ba,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ka}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const J2=t=>{const e=new Z2;return e.calculate(t),e};let tp=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ct(this.primaryColor,16),this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=kt(this.background),this.secondaryBorderColor=qe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qe(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ct(kt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Jr(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=At("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=At(this.sectionBkgColor,10),this.taskBorderColor=Jr(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Jr(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.secondBkg=Ct(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ct(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ct(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Vr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ct(this.secondaryColor,20),this.git1=Ct(this.pie2||this.secondaryColor,20),this.git2=Ct(this.pie3||this.tertiaryColor,20),this.git3=Ct(this.pie4||et(this.primaryColor,{h:-30}),20),this.git4=Ct(this.pie5||et(this.primaryColor,{h:-60}),20),this.git5=Ct(this.pie6||et(this.primaryColor,{h:-90}),10),this.git6=Ct(this.pie7||et(this.primaryColor,{h:60}),10),this.git7=Ct(this.pie8||et(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ct(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ct(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const ep=t=>{const e=new tp;return e.calculate(t),e};let ip=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=et(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=qe(this.primaryColor,this.darkMode),this.secondaryBorderColor=qe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qe(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Jr(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||et(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||kt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||kt(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||et(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||et(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Vr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||At(kt(this.git0),25),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ba,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ka}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const el=t=>{const e=new ip;return e.calculate(t),e};let rp=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ct("#cde498",10),this.primaryBorderColor=qe(this.primaryColor,this.darkMode),this.secondaryBorderColor=qe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qe(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.primaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.actorBorder=At(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||et(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-30}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Vr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ba,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ka}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const sp=t=>{const e=new rp;return e.calculate(t),e};class np{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ct(this.contrast,55),this.background="#ffffff",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=qe(this.primaryColor,this.darkMode),this.secondaryBorderColor=qe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qe(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.secondBkg=Ct(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ct(this.contrast,30),this.sectionBkgColor2=Ct(this.contrast,30),this.taskBorderColor=At(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ct(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=At(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Vr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=At(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||et(this.primaryColor,{h:-30}),this.git4=this.pie5||et(this.primaryColor,{h:-60}),this.git5=this.pie6||et(this.primaryColor,{h:-90}),this.git6=this.pie7||et(this.primaryColor,{h:60}),this.git7=this.pie8||et(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ba,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ka}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}}const ap=t=>{const e=new np;return e.calculate(t),e},ir={base:{getThemeVariables:J2},dark:{getThemeVariables:ep},default:{getThemeVariables:el},forest:{getThemeVariables:sp},neutral:{getThemeVariables:ap}},Xi={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},Jh={...Xi,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:ir.default.getThemeVariables(),sequence:{...Xi.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Xi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Xi.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Xi.pie,useWidth:984},xyChart:{...Xi.xyChart,useWidth:void 0},requirement:{...Xi.requirement,useWidth:void 0},gitGraph:{...Xi.gitGraph,useMaxWidth:!1},sankey:{...Xi.sankey,useMaxWidth:!1}},t1=(t,e="")=>Object.keys(t).reduce((i,r)=>Array.isArray(t[r])?i:typeof t[r]=="object"&&t[r]!==null?[...i,e+r,...t1(t[r],"")]:[...i,e+r],[]),op=new Set(t1(Jh,"")),$t=Jh,Vn=t=>{if(B.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Vn(e));return}for(const e of Object.keys(t)){if(B.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!op.has(e)||t[e]==null){B.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){B.debug("sanitizing object",e),Vn(t[e]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const r of i)e.includes(r)&&(B.debug("sanitizing css option",e),t[e]=lp(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const i=t.themeVariables[e];i?.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}B.debug("After sanitization",t)}},lp=t=>{let e=0,i=0;for(const r of t){if(e<i)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&i++}return e!==i?"{ /* ERROR: Unbalanced CSS */ }":t},e1=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Is=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,cp=/\s*%%.*\n/gm;class i1 extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}}const ls={},_a=function(t,e){t=t.replace(e1,"").replace(Is,"").replace(cp,`
`);for(const[i,{detector:r}]of Object.entries(ls))if(r(t,e))return i;throw new i1(`No diagram type detected matching given configuration for text: ${t}`)},r1=(...t)=>{for(const{id:e,detector:i,loader:r}of t)s1(e,i,r)},s1=(t,e,i)=>{ls[t]?B.error(`Detector with key ${t} already exists`):ls[t]={detector:e,loader:i},B.debug(`Detector with key ${t} added${i?" with loader":""}`)},hp=t=>ls[t].loader,ao=(t,e,{depth:i=2,clobber:r=!1}={})=>{const s={depth:i,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(n=>ao(t,n,s)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(n=>{t.includes(n)||t.push(n)}),t):t===void 0||i<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(n=>{typeof e[n]=="object"&&(t[n]===void 0||typeof t[n]=="object")?(t[n]===void 0&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=ao(t[n],e[n],{depth:i-1,clobber:r})):(r||typeof t[n]!="object"&&typeof e[n]!="object")&&(t[n]=e[n])}),t)},Le=ao,n1="",up={curveBasis:an,curveBasisClosed:Df,curveBasisOpen:Ff,curveBumpX:Rf,curveBumpY:Nf,curveBundle:Of,curveCardinalClosed:Pf,curveCardinalOpen:Mf,curveCardinal:Vf,curveCatmullRomClosed:zf,curveCatmullRomOpen:qf,curveCatmullRom:Wf,curveLinear:ii,curveLinearClosed:Yf,curveMonotoneX:Uf,curveMonotoneY:Hf,curveNatural:Gf,curveStep:jf,curveStepAfter:Xf,curveStepBefore:$f},dp=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,fp=function(t,e){const i=a1(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(i)){const a=i.map(o=>o.args);Vn(a),r=Le(r,[...a])}else r=i.args;if(!r)return;let s=_a(t,e);const n="config";return r[n]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),r[s]=r[n],delete r[n]),r},a1=function(t,e=null){try{const i=new RegExp(`[%]{2}(?![{]${dp.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),B.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const s=[];for(;(r=Is.exec(t))!==null;)if(r.index===Is.lastIndex&&Is.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const n=r[1]?r[1]:r[2],a=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;s.push({type:n,args:a})}return s.length===0?{type:t,args:null}:s.length===1?s[0]:s}catch(i){return B.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},pp=function(t){return t.replace(Is,"")},gp=function(t,e){for(const[i,r]of e.entries())if(r.match(t))return i;return-1};function fi(t,e){if(!t)return e;const i=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return up[i]??e}function yp(t,e){const i=t.trim();if(i)return e.securityLevel!=="loose"?Mr.sanitizeUrl(i):i}const mp=(t,...e)=>{const i=t.split("."),r=i.length-1,s=i[r];let n=window;for(let a=0;a<r;a++)if(n=n[i[a]],!n){B.error(`Function name: ${t} not found in window`);return}n[s](...e)};function o1(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xp(t){let e,i=0;t.forEach(s=>{i+=o1(s,e),e=s});const r=i/2;return il(t,r)}function bp(t){return t.length===1?t[0]:xp(t)}const Cc=(t,e=2)=>{const i=Math.pow(10,e);return Math.round(t*i)/i},il=(t,e)=>{let i,r=e;for(const s of t){if(i){const n=o1(s,i);if(n<r)r-=n;else{const a=r/n;if(a<=0)return i;if(a>=1)return{x:s.x,y:s.y};if(a>0&&a<1)return{x:Cc((1-a)*i.x+a*s.x,5),y:Cc((1-a)*i.y+a*s.y,5)}}}i=s}throw new Error("Could not find a suitable point for the given distance")},kp=(t,e,i)=>{B.info(`our points ${JSON.stringify(e)}`),e[0]!==i&&(e=e.reverse());const s=il(e,25),n=t?10:5,a=Math.atan2(e[0].y-s.y,e[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(a)*n+(e[0].x+s.x)/2,o.y=-Math.cos(a)*n+(e[0].y+s.y)/2,o};function _p(t,e,i){const r=structuredClone(i);B.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const s=25+t,n=il(r,s),a=10+t*.5,o=Math.atan2(r[0].y-n.y,r[0].x-n.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+n.y)/2):e==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+n.y)/2-5):e==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2),l}function ri(t){let e="",i="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":e=e+r+";");return{style:e,labelStyle:i}}let Ec=0;const l1=()=>(Ec++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Ec);function Tp(t){let e="";const i="0123456789abcdef",r=i.length;for(let s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*r));return e}const c1=t=>Tp(t.length),Cp=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},Ep=function(t,e){const i=e.text.replace(mt.lineBreakRegex," "),[,r]=qr(e.fontSize),s=t.append("text");s.attr("x",e.x),s.attr("y",e.y),s.style("text-anchor",e.anchor),s.style("font-family",e.fontFamily),s.style("font-size",r),s.style("font-weight",e.fontWeight),s.attr("fill",e.fill),e.class!==void 0&&s.attr("class",e.class);const n=s.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.attr("fill",e.fill),n.text(i),s},h1=Qo((t,e,i)=>{if(!t||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),mt.lineBreakRegex.test(t)))return t;const r=t.split(" "),s=[];let n="";return r.forEach((a,o)=>{const l=Ii(`${a} `,i),h=Ii(n,i);if(l>e){const{hyphenatedStrings:d,remainingWord:g}=Sp(a,e,"-",i);s.push(n,...d),n=g}else h+l>=e?(s.push(n),n=a):n=[n,a].filter(Boolean).join(" ");o+1===r.length&&s.push(n)}),s.filter(a=>a!=="").join(i.joinWith)},(t,e,i)=>`${t}${e}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),Sp=Qo((t,e,i="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const s=[...t],n=[];let a="";return s.forEach((o,l)=>{const h=`${a}${o}`;if(Ii(h,r)>=e){const p=l+1,d=s.length===p,g=`${h}${i}`;n.push(d?h:g),a=""}else a=h}),{hyphenatedStrings:n,remainingWord:a}},(t,e,i="-",r)=>`${t}${e}${i}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function oo(t,e){return rl(t,e).height}function Ii(t,e){return rl(t,e).width}const rl=Qo((t,e)=>{const{fontSize:i=12,fontFamily:r="Arial",fontWeight:s=400}=e;if(!t)return{width:0,height:0};const[,n]=qr(i),a=["sans-serif",r],o=t.split(mt.lineBreakRegex),l=[],h=yt("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const d of a){let g=0;const y={width:0,height:0,lineHeight:0};for(const x of o){const _=Cp();_.text=x||n1;const v=Ep(u,_).style("font-size",n).style("font-weight",s).style("font-family",d),C=(v._groups||v)[0][0].getBBox();if(C.width===0&&C.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,C.width)),g=Math.round(C.height),y.height+=g,y.lineHeight=Math.round(Math.max(y.lineHeight,g))}l.push(y)}u.remove();const p=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[p]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`);class wp{constructor(e=!1,i){this.count=0,this.count=i?i.length:0,this.next=e?()=>this.count++:()=>Date.now()}}let kn;const vp=function(t){return kn=kn||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),kn.innerHTML=t,unescape(kn.textContent)};function u1(t){return"str"in t}const Ap=(t,e,i,r)=>{var s;if(!r)return;const n=(s=t.node())==null?void 0:s.getBBox();n&&t.append("text").text(r).attr("x",n.x+n.width/2).attr("y",-i).attr("class",e)},qr=t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]};function ln(t,e){return b2({},t,e)}const Rt={assignWithDepth:Le,wrapLabel:h1,calculateTextHeight:oo,calculateTextWidth:Ii,calculateTextDimensions:rl,cleanAndMerge:ln,detectInit:fp,detectDirective:a1,isSubstringInArray:gp,interpolateToCurve:fi,calcLabelPosition:bp,calcCardinalityPosition:kp,calcTerminalLabelPosition:_p,formatUrl:yp,getStylesFromArray:ri,generateId:l1,random:c1,runFunc:mp,entityDecode:vp,insertTitle:Ap,parseFontSize:qr,InitIDGenerator:wp},Lp=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/#\w+;/g,function(i){const r=i.substring(1,i.length-1);return/^\+?\d+$/.test(r)?""+r+"":""+r+""}),e},qs=function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},Sc="10.9.3",cs=Object.freeze($t);let Ke=Le({},cs),d1,hs=[],Ds=Le({},cs);const Ta=(t,e)=>{let i=Le({},t),r={};for(const s of e)g1(s),r=Le(r,s);if(i=Le(i,r),r.theme&&r.theme in ir){const s=Le({},d1),n=Le(s.themeVariables||{},r.themeVariables);i.theme&&i.theme in ir&&(i.themeVariables=ir[i.theme].getThemeVariables(n))}return Ds=i,y1(Ds),Ds},Bp=t=>(Ke=Le({},cs),Ke=Le(Ke,t),t.theme&&ir[t.theme]&&(Ke.themeVariables=ir[t.theme].getThemeVariables(t.themeVariables)),Ta(Ke,hs),Ke),Ip=t=>{d1=Le({},t)},Dp=t=>(Ke=Le(Ke,t),Ta(Ke,hs),Ke),f1=()=>Le({},Ke),p1=t=>(y1(t),Le(Ds,t),se()),se=()=>Le({},Ds),g1=t=>{t&&(["secure",...Ke.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(B.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&g1(t[e])}))},Fp=t=>{Vn(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),hs.push(t),Ta(Ke,hs)},zn=(t=Ke)=>{hs=[],Ta(t,hs)},Rp={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},wc={},Np=t=>{wc[t]||(B.warn(Rp[t]),wc[t]=!0)},y1=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&Np("LAZY_LOAD_DEPRECATED")},m1="c4",Op=t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),Pp=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>i4),void 0,import.meta.url);return{id:m1,diagram:t}},Mp={id:m1,detector:Op,loader:Pp},Vp=Mp,x1="flowchart",zp=(t,e)=>{var i,r;return((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"||((r=e?.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},qp=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>Wb),void 0,import.meta.url);return{id:x1,diagram:t}},Wp={id:x1,detector:zp,loader:qp},Yp=Wp,b1="flowchart-v2",Up=(t,e)=>{var i,r,s;return((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="dagre-d3"||((r=e?.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)&&((s=e?.flowchart)==null?void 0:s.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)},Hp=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>Ub),void 0,import.meta.url);return{id:b1,diagram:t}},Gp={id:b1,detector:Up,loader:Hp},jp=Gp,k1="er",Xp=t=>/^\s*erDiagram/.test(t),$p=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>g5),void 0,import.meta.url);return{id:k1,diagram:t}},Kp={id:k1,detector:Xp,loader:$p},Qp=Kp,_1="gitGraph",Zp=t=>/^\s*gitGraph/.test(t),Jp=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>G5),void 0,import.meta.url);return{id:_1,diagram:t}},tg={id:_1,detector:Zp,loader:Jp},eg=tg,T1="gantt",ig=t=>/^\s*gantt/.test(t),rg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>Ok),void 0,import.meta.url);return{id:T1,diagram:t}},sg={id:T1,detector:ig,loader:rg},ng=sg,C1="info",ag=t=>/^\s*info/.test(t),og=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>Hk),void 0,import.meta.url);return{id:C1,diagram:t}},lg={id:C1,detector:ag,loader:og},E1="pie",cg=t=>/^\s*pie/.test(t),hg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>l6),void 0,import.meta.url);return{id:E1,diagram:t}},ug={id:E1,detector:cg,loader:hg},S1="quadrantChart",dg=t=>/^\s*quadrantChart/.test(t),fg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>L6),void 0,import.meta.url);return{id:S1,diagram:t}},pg={id:S1,detector:dg,loader:fg},gg=pg,w1="xychart",yg=t=>/^\s*xychart-beta/.test(t),mg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>s_),void 0,import.meta.url);return{id:w1,diagram:t}},xg={id:w1,detector:yg,loader:mg},bg=xg,v1="requirement",kg=t=>/^\s*requirement(Diagram)?/.test(t),_g=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>O_),void 0,import.meta.url);return{id:v1,diagram:t}},Tg={id:v1,detector:kg,loader:_g},Cg=Tg,A1="sequence",Eg=t=>/^\s*sequenceDiagram/.test(t),Sg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>W7),void 0,import.meta.url);return{id:A1,diagram:t}},wg={id:A1,detector:Eg,loader:Sg},vg=wg,L1="class",Ag=(t,e)=>{var i;return((i=e?.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},Lg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>CT),void 0,import.meta.url);return{id:L1,diagram:t}},Bg={id:L1,detector:Ag,loader:Lg},Ig=Bg,B1="classDiagram",Dg=(t,e)=>{var i;return/^\s*classDiagram/.test(t)&&((i=e?.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},Fg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>IT),void 0,import.meta.url);return{id:B1,diagram:t}},Rg={id:B1,detector:Dg,loader:Fg},Ng=Rg,I1="state",Og=(t,e)=>{var i;return((i=e?.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},Pg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>_8),void 0,import.meta.url);return{id:I1,diagram:t}},Mg={id:I1,detector:Og,loader:Pg},Vg=Mg,D1="stateDiagram",zg=(t,e)=>{var i;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((i=e?.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper")},qg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>j8),void 0,import.meta.url);return{id:D1,diagram:t}},Wg={id:D1,detector:zg,loader:qg},Yg=Wg,F1="journey",Ug=t=>/^\s*journey/.test(t),Hg=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>yC),void 0,import.meta.url);return{id:F1,diagram:t}},Gg={id:F1,detector:Ug,loader:Hg},jg=Gg,Xg=function(t,e){for(let i of e)t.attr(i[0],i[1])},$g=function(t,e,i){let r=new Map;return i?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},Oe=function(t,e,i,r){const s=$g(e,i,r);Xg(t,s)},_r=function(t,e,i,r){const s=e.node().getBBox(),n=s.width,a=s.height;B.info(`SVG bounds: ${n}x${a}`,s);let o=0,l=0;B.info(`Graph bounds: ${o}x${l}`,t),o=n+i*2,l=a+i*2,B.info(`Calculated bounds: ${o}x${l}`),Oe(e,l,o,r);const h=`${s.x-i} ${s.y-i} ${s.width+2*i} ${s.height+2*i}`;e.attr("viewBox",h)},Bn={},Kg=(t,e,i)=>{let r="";return t in Bn&&Bn[t]?r=Bn[t](i):B.warn(`No theme found for ${t}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${e}
`},Qg=(t,e)=>{e!==void 0&&(Bn[t]=e)},Zg=Kg;let sl="",nl="",al="";const ol=t=>ue(t,se()),Pe=()=>{sl="",al="",nl=""},Me=t=>{sl=ol(t).replace(/^\s+/g,"")},Ue=()=>sl,He=t=>{al=ol(t).replace(/\n\s+/g,`
`)},Ge=()=>al,si=t=>{nl=ol(t)},je=()=>nl,R1=Object.freeze(Object.defineProperty({__proto__:null,clear:Pe,getAccDescription:Ge,getAccTitle:Ue,getDiagramTitle:je,setAccDescription:He,setAccTitle:Me,setDiagramTitle:si},Symbol.toStringTag,{value:"Module"})),Jg=B,ty=tl,Y=se,ey=p1,N1=cs,iy=t=>ue(t,Y()),O1=_r,ry=()=>R1,qn={},Wn=(t,e,i)=>{var r;if(qn[t])throw new Error(`Diagram ${t} already registered.`);qn[t]=e,i&&s1(t,i),Qg(t,e.styles),(r=e.injectUtils)==null||r.call(e,Jg,ty,Y,iy,O1,ry(),()=>{})},ll=t=>{if(t in qn)return qn[t];throw new sy(t)};class sy extends Error{constructor(e){super(`Diagram ${e} not found.`)}}const cn=t=>{var e;const{securityLevel:i}=Y();let r=yt("body");if(i==="sandbox"){const a=((e=yt(`#i${t}`).node())==null?void 0:e.contentDocument)??document;r=yt(a.body)}return r.select(`#${t}`)},ny=(t,e,i)=>{B.debug(`rendering svg for syntax error
`);const r=cn(e),s=r.append("g");r.attr("viewBox","0 0 2412 512"),Oe(r,100,512,!0),s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},P1={draw:ny},ay=P1,oy={db:{},renderer:P1,parser:{parser:{yy:{}},parse:()=>{}}},ly=oy,M1="flowchart-elk",cy=(t,e)=>{var i;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="elk")},hy=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>FC),void 0,import.meta.url);return{id:M1,diagram:t}},uy={id:M1,detector:cy,loader:hy},dy=uy,V1="timeline",fy=t=>/^\s*timeline/.test(t),py=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>iE),void 0,import.meta.url);return{id:V1,diagram:t}},gy={id:V1,detector:fy,loader:py},yy=gy,z1="mindmap",my=t=>/^\s*mindmap/.test(t),xy=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>OE),void 0,import.meta.url);return{id:z1,diagram:t}},by={id:z1,detector:my,loader:xy},ky=by,q1="sankey",_y=t=>/^\s*sankey-beta/.test(t),Ty=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>ZE),void 0,import.meta.url);return{id:q1,diagram:t}},Cy={id:q1,detector:_y,loader:Ty},Ey=Cy,W1="block",Sy=t=>/^\s*block-beta/.test(t),wy=async()=>{const{diagram:t}=await ne(()=>Promise.resolve().then(()=>OS),void 0,import.meta.url);return{id:W1,diagram:t}},vy={id:W1,detector:Sy,loader:wy},Ay=vy;let vc=!1;const cl=()=>{vc||(vc=!0,Wn("error",ly,t=>t.toLowerCase().trim()==="error"),Wn("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),r1(Vp,Ng,Ig,Qp,ng,lg,ug,Cg,vg,dy,jp,Yp,ky,yy,eg,Yg,Vg,jg,gg,Ey,bg,Ay))};class Y1{constructor(e,i={}){this.text=e,this.metadata=i,this.type="graph",this.text=Lp(e),this.text+=`
`;const r=se();try{this.type=_a(e,r)}catch(n){this.type="error",this.detectError=n}const s=ll(this.type);B.debug("Type "+this.type),this.db=s.db,this.renderer=s.renderer,this.parser=s.parser,this.parser.parser.yy=this.db,this.init=s.init,this.parse()}parse(){var e,i,r,s,n;if(this.detectError)throw this.detectError;(i=(e=this.db).clear)==null||i.call(e);const a=se();(r=this.init)==null||r.call(this,a),this.metadata.title&&((n=(s=this.db).setDiagramTitle)==null||n.call(s,this.metadata.title)),this.parser.parse(this.text)}async render(e,i){await this.renderer.draw(this.text,e,i,this)}getParser(){return this.parser}getType(){return this.type}}const Ly=async(t,e={})=>{const i=_a(t,se());try{ll(i)}catch{const s=hp(i);if(!s)throw new i1(`Diagram ${i} not found.`);const{id:n,diagram:a}=await s();Wn(n,a)}return new Y1(t,e)};let Ac=[];const By=()=>{Ac.forEach(t=>{t()}),Ac=[]},Iy="graphics-document document";function Dy(t,e){t.attr("role",Iy),e!==""&&t.attr("aria-roledescription",e)}function Fy(t,e,i,r){if(t.insert!==void 0){if(i){const s=`chart-desc-${r}`;t.attr("aria-describedby",s),t.insert("desc",":first-child").attr("id",s).text(i)}if(e){const s=`chart-title-${r}`;t.attr("aria-labelledby",s),t.insert("title",":first-child").attr("id",s).text(e)}}}const Ry=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function U1(t){return typeof t>"u"||t===null}function Ny(t){return typeof t=="object"&&t!==null}function Oy(t){return Array.isArray(t)?t:U1(t)?[]:[t]}function Py(t,e){var i,r,s,n;if(e)for(n=Object.keys(e),i=0,r=n.length;i<r;i+=1)s=n[i],t[s]=e[s];return t}function My(t,e){var i="",r;for(r=0;r<e;r+=1)i+=t;return i}function Vy(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var zy=U1,qy=Ny,Wy=Oy,Yy=My,Uy=Vy,Hy=Py,ze={isNothing:zy,isObject:qy,toArray:Wy,repeat:Yy,isNegativeZero:Uy,extend:Hy};function H1(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function Ws(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=H1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ws.prototype=Object.create(Error.prototype);Ws.prototype.constructor=Ws;Ws.prototype.toString=function(e){return this.name+": "+H1(this,e)};var Ki=Ws;function ja(t,e,i,r,s){var n="",a="",o=Math.floor(s/2)-1;return r-e>o&&(n=" ... ",e=r-o+n.length),i-r>o&&(a=" ...",i=r+o-a.length),{str:n+t.slice(e,i).replace(/\t/g,"")+a,pos:r-e+n.length}}function Xa(t,e){return ze.repeat(" ",e-t.length)+t}function Gy(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],s=[],n,a=-1;n=i.exec(t.buffer);)s.push(n.index),r.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,h,u=Math.min(t.line+e.linesAfter,s.length).toString().length,p=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)h=ja(t.buffer,r[a-l],s[a-l],t.position-(r[a]-r[a-l]),p),o=ze.repeat(" ",e.indent)+Xa((t.line-l+1).toString(),u)+" | "+h.str+`
`+o;for(h=ja(t.buffer,r[a],s[a],t.position,p),o+=ze.repeat(" ",e.indent)+Xa((t.line+1).toString(),u)+" | "+h.str+`
`,o+=ze.repeat("-",e.indent+u+3+h.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=s.length);l++)h=ja(t.buffer,r[a+l],s[a+l],t.position-(r[a]-r[a+l]),p),o+=ze.repeat(" ",e.indent)+Xa((t.line+l+1).toString(),u)+" | "+h.str+`
`;return o.replace(/\n$/,"")}var jy=Gy,Xy=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$y=["scalar","sequence","mapping"];function Ky(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){e[String(r)]=i})}),e}function Qy(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(Xy.indexOf(i)===-1)throw new Ki('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Ky(e.styleAliases||null),$y.indexOf(this.kind)===-1)throw new Ki('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ne=Qy;function Lc(t,e){var i=[];return t[e].forEach(function(r){var s=i.length;i.forEach(function(n,a){n.tag===r.tag&&n.kind===r.kind&&n.multi===r.multi&&(s=a)}),i[s]=r}),i}function Zy(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function r(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(r);return t}function lo(t){return this.extend(t)}lo.prototype.extend=function(e){var i=[],r=[];if(e instanceof Ne)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ki("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(n){if(!(n instanceof Ne))throw new Ki("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Ki("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Ki("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(n){if(!(n instanceof Ne))throw new Ki("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(lo.prototype);return s.implicit=(this.implicit||[]).concat(i),s.explicit=(this.explicit||[]).concat(r),s.compiledImplicit=Lc(s,"implicit"),s.compiledExplicit=Lc(s,"explicit"),s.compiledTypeMap=Zy(s.compiledImplicit,s.compiledExplicit),s};var Jy=lo,t3=new Ne("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),e3=new Ne("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),i3=new Ne("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),r3=new Jy({explicit:[t3,e3,i3]});function s3(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function n3(){return null}function a3(t){return t===null}var o3=new Ne("tag:yaml.org,2002:null",{kind:"scalar",resolve:s3,construct:n3,predicate:a3,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function l3(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function c3(t){return t==="true"||t==="True"||t==="TRUE"}function h3(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var u3=new Ne("tag:yaml.org,2002:bool",{kind:"scalar",resolve:l3,construct:c3,predicate:h3,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function d3(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function f3(t){return 48<=t&&t<=55}function p3(t){return 48<=t&&t<=57}function g3(t){if(t===null)return!1;var e=t.length,i=0,r=!1,s;if(!e)return!1;if(s=t[i],(s==="-"||s==="+")&&(s=t[++i]),s==="0"){if(i+1===e)return!0;if(s=t[++i],s==="b"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(s!=="0"&&s!=="1")return!1;r=!0}return r&&s!=="_"}if(s==="x"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!d3(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}if(s==="o"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!f3(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}}if(s==="_")return!1;for(;i<e;i++)if(s=t[i],s!=="_"){if(!p3(t.charCodeAt(i)))return!1;r=!0}return!(!r||s==="_")}function y3(t){var e=t,i=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function m3(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ze.isNegativeZero(t)}var x3=new Ne("tag:yaml.org,2002:int",{kind:"scalar",resolve:g3,construct:y3,predicate:m3,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),b3=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function k3(t){return!(t===null||!b3.test(t)||t[t.length-1]==="_")}function _3(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var T3=/^[-+]?[0-9]+e/;function C3(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ze.isNegativeZero(t))return"-0.0";return i=t.toString(10),T3.test(i)?i.replace("e",".e"):i}function E3(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ze.isNegativeZero(t))}var S3=new Ne("tag:yaml.org,2002:float",{kind:"scalar",resolve:k3,construct:_3,predicate:E3,represent:C3,defaultStyle:"lowercase"}),G1=r3.extend({implicit:[o3,u3,x3,S3]}),w3=G1,j1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),X1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function v3(t){return t===null?!1:j1.exec(t)!==null||X1.exec(t)!==null}function A3(t){var e,i,r,s,n,a,o,l=0,h=null,u,p,d;if(e=j1.exec(t),e===null&&(e=X1.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(i,r,s));if(n=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],p=+(e[11]||0),h=(u*60+p)*6e4,e[9]==="-"&&(h=-h)),d=new Date(Date.UTC(i,r,s,n,a,o,l)),h&&d.setTime(d.getTime()-h),d}function L3(t){return t.toISOString()}var B3=new Ne("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:v3,construct:A3,instanceOf:Date,represent:L3});function I3(t){return t==="<<"||t===null}var D3=new Ne("tag:yaml.org,2002:merge",{kind:"scalar",resolve:I3}),hl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function F3(t){if(t===null)return!1;var e,i,r=0,s=t.length,n=hl;for(i=0;i<s;i++)if(e=n.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function R3(t){var e,i,r=t.replace(/[\r\n=]/g,""),s=r.length,n=hl,a=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|n.indexOf(r.charAt(e));return i=s%4*6,i===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):i===18?(o.push(a>>10&255),o.push(a>>2&255)):i===12&&o.push(a>>4&255),new Uint8Array(o)}function N3(t){var e="",i=0,r,s,n=t.length,a=hl;for(r=0;r<n;r++)r%3===0&&r&&(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]),i=(i<<8)+t[r];return s=n%3,s===0?(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]):s===2?(e+=a[i>>10&63],e+=a[i>>4&63],e+=a[i<<2&63],e+=a[64]):s===1&&(e+=a[i>>2&63],e+=a[i<<4&63],e+=a[64],e+=a[64]),e}function O3(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var P3=new Ne("tag:yaml.org,2002:binary",{kind:"scalar",resolve:F3,construct:R3,predicate:O3,represent:N3}),M3=Object.prototype.hasOwnProperty,V3=Object.prototype.toString;function z3(t){if(t===null)return!0;var e=[],i,r,s,n,a,o=t;for(i=0,r=o.length;i<r;i+=1){if(s=o[i],a=!1,V3.call(s)!=="[object Object]")return!1;for(n in s)if(M3.call(s,n))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(n)===-1)e.push(n);else return!1}return!0}function q3(t){return t!==null?t:[]}var W3=new Ne("tag:yaml.org,2002:omap",{kind:"sequence",resolve:z3,construct:q3}),Y3=Object.prototype.toString;function U3(t){if(t===null)return!0;var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1){if(r=a[e],Y3.call(r)!=="[object Object]"||(s=Object.keys(r),s.length!==1))return!1;n[e]=[s[0],r[s[0]]]}return!0}function H3(t){if(t===null)return[];var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1)r=a[e],s=Object.keys(r),n[e]=[s[0],r[s[0]]];return n}var G3=new Ne("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:U3,construct:H3}),j3=Object.prototype.hasOwnProperty;function X3(t){if(t===null)return!0;var e,i=t;for(e in i)if(j3.call(i,e)&&i[e]!==null)return!1;return!0}function $3(t){return t!==null?t:{}}var K3=new Ne("tag:yaml.org,2002:set",{kind:"mapping",resolve:X3,construct:$3}),Q3=w3.extend({implicit:[B3,D3],explicit:[P3,W3,G3,K3]}),br=Object.prototype.hasOwnProperty,Yn=1,$1=2,K1=3,Un=4,$a=1,Z3=2,Bc=3,J3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tm=/[\x85\u2028\u2029]/,em=/[,\[\]\{\}]/,Q1=/^(?:!|!!|![a-z\-]+!)$/i,Z1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ic(t){return Object.prototype.toString.call(t)}function Di(t){return t===10||t===13}function Lr(t){return t===9||t===32}function ti(t){return t===9||t===32||t===10||t===13}function $r(t){return t===44||t===91||t===93||t===123||t===125}function im(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function rm(t){return t===120?2:t===117?4:t===85?8:0}function sm(t){return 48<=t&&t<=57?t-48:-1}function Dc(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function nm(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var J1=new Array(256),tu=new Array(256);for(var jr=0;jr<256;jr++)J1[jr]=Dc(jr)?1:0,tu[jr]=Dc(jr);function am(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Q3,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function eu(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=jy(i),new Ki(e,i)}function wt(t,e){throw eu(t,e)}function Hn(t,e){t.onWarning&&t.onWarning.call(null,eu(t,e))}var Fc={YAML:function(e,i,r){var s,n,a;e.version!==null&&wt(e,"duplication of %YAML directive"),r.length!==1&&wt(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),s===null&&wt(e,"ill-formed argument of the YAML directive"),n=parseInt(s[1],10),a=parseInt(s[2],10),n!==1&&wt(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Hn(e,"unsupported YAML version of the document")},TAG:function(e,i,r){var s,n;r.length!==2&&wt(e,"TAG directive accepts exactly two arguments"),s=r[0],n=r[1],Q1.test(s)||wt(e,"ill-formed tag handle (first argument) of the TAG directive"),br.call(e.tagMap,s)&&wt(e,'there is a previously declared suffix for "'+s+'" tag handle'),Z1.test(n)||wt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{wt(e,"tag prefix is malformed: "+n)}e.tagMap[s]=n}};function gr(t,e,i,r){var s,n,a,o;if(e<i){if(o=t.input.slice(e,i),r)for(s=0,n=o.length;s<n;s+=1)a=o.charCodeAt(s),a===9||32<=a&&a<=1114111||wt(t,"expected valid JSON character");else J3.test(o)&&wt(t,"the stream contains non-printable characters");t.result+=o}}function Rc(t,e,i,r){var s,n,a,o;for(ze.isObject(i)||wt(t,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(i),a=0,o=s.length;a<o;a+=1)n=s[a],br.call(e,n)||(e[n]=i[n],r[n]=!0)}function Kr(t,e,i,r,s,n,a,o,l){var h,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,u=s.length;h<u;h+=1)Array.isArray(s[h])&&wt(t,"nested arrays are not supported inside keys"),typeof s=="object"&&Ic(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&Ic(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(h=0,u=n.length;h<u;h+=1)Rc(t,e,n[h],i);else Rc(t,e,n,i);else!t.json&&!br.call(i,s)&&br.call(e,s)&&(t.line=a||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,wt(t,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[s]=n,delete i[s];return e}function ul(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):wt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function me(t,e,i){for(var r=0,s=t.input.charCodeAt(t.position);s!==0;){for(;Lr(s);)s===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(e&&s===35)do s=t.input.charCodeAt(++t.position);while(s!==10&&s!==13&&s!==0);if(Di(s))for(ul(t),s=t.input.charCodeAt(t.position),r++,t.lineIndent=0;s===32;)t.lineIndent++,s=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&Hn(t,"deficient indentation"),r}function Ca(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||ti(i)))}function dl(t,e){e===1?t.result+=" ":e>1&&(t.result+=ze.repeat(`
`,e-1))}function om(t,e,i){var r,s,n,a,o,l,h,u,p=t.kind,d=t.result,g;if(g=t.input.charCodeAt(t.position),ti(g)||$r(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(s=t.input.charCodeAt(t.position+1),ti(s)||i&&$r(s)))return!1;for(t.kind="scalar",t.result="",n=a=t.position,o=!1;g!==0;){if(g===58){if(s=t.input.charCodeAt(t.position+1),ti(s)||i&&$r(s))break}else if(g===35){if(r=t.input.charCodeAt(t.position-1),ti(r))break}else{if(t.position===t.lineStart&&Ca(t)||i&&$r(g))break;if(Di(g))if(l=t.line,h=t.lineStart,u=t.lineIndent,me(t,!1,-1),t.lineIndent>=e){o=!0,g=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=h,t.lineIndent=u;break}}o&&(gr(t,n,a,!1),dl(t,t.line-l),n=a=t.position,o=!1),Lr(g)||(a=t.position+1),g=t.input.charCodeAt(++t.position)}return gr(t,n,a,!1),t.result?!0:(t.kind=p,t.result=d,!1)}function lm(t,e){var i,r,s;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=s=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(gr(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,s=t.position;else return!0;else Di(i)?(gr(t,r,s,!0),dl(t,me(t,!1,e)),r=s=t.position):t.position===t.lineStart&&Ca(t)?wt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);wt(t,"unexpected end of the stream within a single quoted scalar")}function cm(t,e){var i,r,s,n,a,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return gr(t,i,t.position,!0),t.position++,!0;if(o===92){if(gr(t,i,t.position,!0),o=t.input.charCodeAt(++t.position),Di(o))me(t,!1,e);else if(o<256&&J1[o])t.result+=tu[o],t.position++;else if((a=rm(o))>0){for(s=a,n=0;s>0;s--)o=t.input.charCodeAt(++t.position),(a=im(o))>=0?n=(n<<4)+a:wt(t,"expected hexadecimal character");t.result+=nm(n),t.position++}else wt(t,"unknown escape sequence");i=r=t.position}else Di(o)?(gr(t,i,r,!0),dl(t,me(t,!1,e)),i=r=t.position):t.position===t.lineStart&&Ca(t)?wt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}wt(t,"unexpected end of the stream within a double quoted scalar")}function hm(t,e){var i=!0,r,s,n,a=t.tag,o,l=t.anchor,h,u,p,d,g,y=Object.create(null),x,_,v,C;if(C=t.input.charCodeAt(t.position),C===91)u=93,g=!1,o=[];else if(C===123)u=125,g=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),C=t.input.charCodeAt(++t.position);C!==0;){if(me(t,!0,e),C=t.input.charCodeAt(t.position),C===u)return t.position++,t.tag=a,t.anchor=l,t.kind=g?"mapping":"sequence",t.result=o,!0;i?C===44&&wt(t,"expected the node content, but found ','"):wt(t,"missed comma between flow collection entries"),_=x=v=null,p=d=!1,C===63&&(h=t.input.charCodeAt(t.position+1),ti(h)&&(p=d=!0,t.position++,me(t,!0,e))),r=t.line,s=t.lineStart,n=t.position,us(t,e,Yn,!1,!0),_=t.tag,x=t.result,me(t,!0,e),C=t.input.charCodeAt(t.position),(d||t.line===r)&&C===58&&(p=!0,C=t.input.charCodeAt(++t.position),me(t,!0,e),us(t,e,Yn,!1,!0),v=t.result),g?Kr(t,o,y,_,x,v,r,s,n):p?o.push(Kr(t,null,y,_,x,v,r,s,n)):o.push(x),me(t,!0,e),C=t.input.charCodeAt(t.position),C===44?(i=!0,C=t.input.charCodeAt(++t.position)):i=!1}wt(t,"unexpected end of the stream within a flow collection")}function um(t,e){var i,r,s=$a,n=!1,a=!1,o=e,l=0,h=!1,u,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)$a===s?s=p===43?Bc:Z3:wt(t,"repeat of a chomping mode identifier");else if((u=sm(p))>=0)u===0?wt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?wt(t,"repeat of an indentation width identifier"):(o=e+u-1,a=!0);else break;if(Lr(p)){do p=t.input.charCodeAt(++t.position);while(Lr(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!Di(p)&&p!==0)}for(;p!==0;){for(ul(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<o)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>o&&(o=t.lineIndent),Di(p)){l++;continue}if(t.lineIndent<o){s===Bc?t.result+=ze.repeat(`
`,n?1+l:l):s===$a&&n&&(t.result+=`
`);break}for(r?Lr(p)?(h=!0,t.result+=ze.repeat(`
`,n?1+l:l)):h?(h=!1,t.result+=ze.repeat(`
`,l+1)):l===0?n&&(t.result+=" "):t.result+=ze.repeat(`
`,l):t.result+=ze.repeat(`
`,n?1+l:l),n=!0,a=!0,l=0,i=t.position;!Di(p)&&p!==0;)p=t.input.charCodeAt(++t.position);gr(t,i,t.position,!1)}return!0}function Nc(t,e){var i,r=t.tag,s=t.anchor,n=[],a,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=n),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,wt(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!ti(a))));){if(o=!0,t.position++,me(t,!0,-1)&&t.lineIndent<=e){n.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,us(t,e,K1,!1,!0),n.push(t.result),me(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)wt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=r,t.anchor=s,t.kind="sequence",t.result=n,!0):!1}function dm(t,e,i){var r,s,n,a,o,l,h=t.tag,u=t.anchor,p={},d=Object.create(null),g=null,y=null,x=null,_=!1,v=!1,C;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),C=t.input.charCodeAt(t.position);C!==0;){if(!_&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,wt(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),n=t.line,(C===63||C===58)&&ti(r))C===63?(_&&(Kr(t,p,d,g,y,null,a,o,l),g=y=x=null),v=!0,_=!0,s=!0):_?(_=!1,s=!0):wt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,C=r;else{if(a=t.line,o=t.lineStart,l=t.position,!us(t,i,$1,!1,!0))break;if(t.line===n){for(C=t.input.charCodeAt(t.position);Lr(C);)C=t.input.charCodeAt(++t.position);if(C===58)C=t.input.charCodeAt(++t.position),ti(C)||wt(t,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Kr(t,p,d,g,y,null,a,o,l),g=y=x=null),v=!0,_=!1,s=!1,g=t.tag,y=t.result;else if(v)wt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(v)wt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===n||t.lineIndent>e)&&(_&&(a=t.line,o=t.lineStart,l=t.position),us(t,e,Un,!0,s)&&(_?y=t.result:x=t.result),_||(Kr(t,p,d,g,y,x,a,o,l),g=y=x=null),me(t,!0,-1),C=t.input.charCodeAt(t.position)),(t.line===n||t.lineIndent>e)&&C!==0)wt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return _&&Kr(t,p,d,g,y,null,a,o,l),v&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=p),v}function fm(t){var e,i=!1,r=!1,s,n,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&wt(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(i=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,s="!!",a=t.input.charCodeAt(++t.position)):s="!",e=t.position,i){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(n=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):wt(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!ti(a);)a===33&&(r?wt(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(e-1,t.position+1),Q1.test(s)||wt(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),em.test(n)&&wt(t,"tag suffix cannot contain flow indicator characters")}n&&!Z1.test(n)&&wt(t,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{wt(t,"tag name is malformed: "+n)}return i?t.tag=n:br.call(t.tagMap,s)?t.tag=t.tagMap[s]+n:s==="!"?t.tag="!"+n:s==="!!"?t.tag="tag:yaml.org,2002:"+n:wt(t,'undeclared tag handle "'+s+'"'),!0}function pm(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&wt(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!ti(i)&&!$r(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&wt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function gm(t){var e,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!ti(r)&&!$r(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&wt(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),br.call(t.anchorMap,i)||wt(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],me(t,!0,-1),!0}function us(t,e,i,r,s){var n,a,o,l=1,h=!1,u=!1,p,d,g,y,x,_;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,n=a=o=Un===i||K1===i,r&&me(t,!0,-1)&&(h=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;fm(t)||pm(t);)me(t,!0,-1)?(h=!0,o=n,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=h||s),(l===1||Un===i)&&(Yn===i||$1===i?x=e:x=e+1,_=t.position-t.lineStart,l===1?o&&(Nc(t,_)||dm(t,_,x))||hm(t,x)?u=!0:(a&&um(t,x)||lm(t,x)||cm(t,x)?u=!0:gm(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&wt(t,"alias node should not have any properties")):om(t,x,Yn===i)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&Nc(t,_))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&wt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,d=t.implicitTypes.length;p<d;p+=1)if(y=t.implicitTypes[p],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(br.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,g=t.typeMap.multi[t.kind||"fallback"],p=0,d=g.length;p<d;p+=1)if(t.tag.slice(0,g[p].tag.length)===g[p].tag){y=g[p];break}y||wt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&wt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):wt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function ym(t){var e=t.position,i,r,s,n=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(me(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(n=!0,a=t.input.charCodeAt(++t.position),i=t.position;a!==0&&!ti(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),s=[],r.length<1&&wt(t,"directive name must not be less than one character in length");a!==0;){for(;Lr(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Di(a));break}if(Di(a))break;for(i=t.position;a!==0&&!ti(a);)a=t.input.charCodeAt(++t.position);s.push(t.input.slice(i,t.position))}a!==0&&ul(t),br.call(Fc,r)?Fc[r](t,r,s):Hn(t,'unknown document directive "'+r+'"')}if(me(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,me(t,!0,-1)):n&&wt(t,"directives end mark is expected"),us(t,t.lineIndent-1,Un,!1,!0),me(t,!0,-1),t.checkLineBreaks&&tm.test(t.input.slice(e,t.position))&&Hn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Ca(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,me(t,!0,-1));return}if(t.position<t.length-1)wt(t,"end of the stream or a document separator is expected");else return}function iu(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new am(t,e),r=t.indexOf("\0");for(r!==-1&&(i.position=r,wt(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)ym(i);return i.documents}function mm(t,e,i){e!==null&&typeof e=="object"&&typeof i>"u"&&(i=e,e=null);var r=iu(t,i);if(typeof e!="function")return r;for(var s=0,n=r.length;s<n;s+=1)e(r[s])}function xm(t,e){var i=iu(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new Ki("expected a single document in the stream, but found more")}}var bm=mm,km=xm,_m={loadAll:bm,load:km},Tm=G1,Cm=_m.load;function Em(t){const e=t.match(e1);if(!e)return{text:t,metadata:{}};let i=Cm(e[1],{schema:Tm})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const r={};return i.displayMode&&(r.displayMode=i.displayMode.toString()),i.title&&(r.title=i.title.toString()),i.config&&(r.config=i.config),{text:t.slice(e[0].length),metadata:r}}const Sm=t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,i,r)=>"<"+i+r.replace(/="([^"]*)"/g,"='$1'")+">"),wm=t=>{const{text:e,metadata:i}=Em(t),{displayMode:r,title:s,config:n={}}=i;return r&&(n.gantt||(n.gantt={}),n.gantt.displayMode=r),{title:s,config:n,text:e}},vm=t=>{const e=Rt.detectInit(t)??{},i=Rt.detectDirective(t,"wrap");return Array.isArray(i)?e.wrap=i.some(({type:r})=>{}):i?.type==="wrap"&&(e.wrap=!0),{text:pp(t),directive:e}};function ru(t){const e=Sm(t),i=wm(e),r=vm(i.text),s=ln(i.config,r.directive);return t=Ry(r.text),{code:t,title:i.title,config:s}}const Am=5e4,Lm="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Bm="sandbox",Im="loose",Dm="http://www.w3.org/2000/svg",Fm="http://www.w3.org/1999/xlink",Rm="http://www.w3.org/1999/xhtml",Nm="100%",Om="100%",Pm="border:0;margin:0;",Mm="margin:0",Vm="allow-top-navigation-by-user-activation allow-popups",zm='The "iframe" tag is not supported by your browser.',qm=["foreignobject"],Wm=["dominant-baseline"];function su(t){const e=ru(t);return zn(),Fp(e.config??{}),e}async function Ym(t,e){cl(),t=su(t).code;try{await fl(t)}catch(i){if(e?.suppressErrors)return!1;throw i}return!0}const Oc=(t,e,i=[])=>`
.${t} ${e} { ${i.join(" !important; ")} !important; }`,Um=(t,e={})=>{var i;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!Ha(e)){const o=t.htmlLabels||((i=t.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in e){const h=e[l];Ha(h.styles)||o.forEach(u=>{r+=Oc(h.id,u,h.styles)}),Ha(h.textStyles)||(r+=Oc(h.id,"tspan",h.textStyles))}}return r},Hm=(t,e,i,r)=>{const s=Um(t,i),n=Zg(e,s,t.themeVariables);return ro(P2(`${r}{${n}}`),V2)},Gm=(t="",e,i)=>{let r=t;return!i&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=qs(r),r=r.replace(/<br>/g,"<br/>"),r},jm=(t="",e)=>{var i,r;const s=(r=(i=e?.viewBox)==null?void 0:i.baseVal)!=null&&r.height?e.viewBox.baseVal.height+"px":Om,n=btoa('<body style="'+Mm+'">'+t+"</body>");return`<iframe style="width:${Nm};height:${s};${Pm}" src="data:text/html;base64,${n}" sandbox="${Vm}">
  ${zm}
</iframe>`},Pc=(t,e,i,r,s)=>{const n=t.append("div");n.attr("id",i),r&&n.attr("style",r);const a=n.append("svg").attr("id",e).attr("width","100%").attr("xmlns",Dm);return s&&a.attr("xmlns:xlink",s),a.append("g"),t};function Mc(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const Xm=(t,e,i,r)=>{var s,n,a;(s=t.getElementById(e))==null||s.remove(),(n=t.getElementById(i))==null||n.remove(),(a=t.getElementById(r))==null||a.remove()},$m=async function(t,e,i){var r,s,n,a,o,l;cl();const h=su(e);e=h.code;const u=se();B.debug(u),e.length>(u?.maxTextSize??Am)&&(e=Lm);const p="#"+t,d="i"+t,g="#"+d,y="d"+t,x="#"+y;let _=yt("body");const v=u.securityLevel===Bm,C=u.securityLevel===Im,R=u.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),v){const I=Mc(yt(i),d);_=yt(I.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt(i);Pc(_,t,y,`font-family: ${R}`,Fm)}else{if(Xm(document,t,y,d),v){const I=Mc(yt("body"),d);_=yt(I.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt("body");Pc(_,t,y)}let A,T;try{A=await fl(e,{title:h.title})}catch(I){A=new Y1("error"),T=I}const k=_.select(x).node(),w=A.type,S=k.firstChild,m=S.firstChild,E=(s=(r=A.renderer).getClasses)==null?void 0:s.call(r,e,A),f=Hm(u,w,E,p),L=document.createElement("style");L.innerHTML=f,S.insertBefore(L,m);try{await A.renderer.draw(e,t,Sc,A)}catch(I){throw ay.draw(e,t,Sc),I}const b=_.select(`${x} svg`),P=(a=(n=A.db).getAccTitle)==null?void 0:a.call(n),U=(l=(o=A.db).getAccDescription)==null?void 0:l.call(o);Qm(w,b,P,U),_.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",Rm);let N=_.select(x).node().innerHTML;if(B.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),N=Gm(N,v,Ce(u.arrowMarkerAbsolute)),v){const I=_.select(x+" svg").node();N=jm(N,I)}else C||(N=ss.sanitize(N,{ADD_TAGS:qm,ADD_ATTR:Wm}));if(By(),T)throw T;const F=yt(v?g:x).node();return F&&"remove"in F&&F.remove(),{svg:N,bindFunctions:A.db.bindFunctions}};function Km(t={}){var e;t?.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),Ip(t),t?.theme&&t.theme in ir?t.themeVariables=ir[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=ir.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?Bp(t):f1();tl(i.logLevel),cl()}const fl=(t,e={})=>{const{code:i}=ru(t);return Ly(i,e)};function Qm(t,e,i,r){Dy(e,t),Fy(e,i,r,e.attr("id"))}const Ir=Object.freeze({render:$m,parse:Ym,getDiagramFromText:fl,initialize:Km,getConfig:se,setConfig:p1,getSiteConfig:f1,updateSiteConfig:Dp,reset:()=>{zn()},globalReset:()=>{zn(cs)},defaultConfig:cs});tl(se().logLevel);zn(se());const Zm=async()=>{B.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(ls).map(async([i,{detector:r,loader:s}])=>{if(s)try{ll(i)}catch{try{const{diagram:a,id:o}=await s();Wn(o,a,r)}catch(a){throw B.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete ls[i],a}}}))).filter(i=>i.status==="rejected");if(e.length>0){B.error(`Failed to load ${e.length} external diagrams`);for(const i of e)B.error(i);throw new Error(`Failed to load ${e.length} external diagrams`)}},Jm=(t,e,i)=>{B.warn(t),u1(t)?(i&&i(t.str,t.hash),e.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},nu=async function(t={querySelector:".mermaid"}){try{await tx(t)}catch(e){if(u1(e)&&B.error(e.str),Fi.parseError&&Fi.parseError(e),!t.suppressErrors)throw B.error("Use the suppressErrors option to suppress these errors"),e}},tx=async function({postRenderCallback:t,querySelector:e,nodes:i}={querySelector:".mermaid"}){const r=Ir.getConfig();B.debug(`${t?"":"No "}Callback function found`);let s;if(i)s=i;else if(e)s=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");B.debug(`Found ${s.length} diagrams`),r?.startOnLoad!==void 0&&(B.debug("Start On Load: "+r?.startOnLoad),Ir.updateSiteConfig({startOnLoad:r?.startOnLoad}));const n=new Rt.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(s)){B.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const h=`mermaid-${n.next()}`;a=l.innerHTML,a=Yh(Rt.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Rt.detectInit(a);u&&B.debug("Detected early reinit: ",u);try{const{svg:p,bindFunctions:d}=await cu(h,a,l);l.innerHTML=p,t&&await t(h),d&&d(l)}catch(p){Jm(p,o,Fi.parseError)}}if(o.length>0)throw o[0]},au=function(t){Ir.initialize(t)},ex=async function(t,e,i){B.warn("mermaid.init is deprecated. Please use run instead."),t&&au(t);const r={postRenderCallback:i,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await nu(r)},ix=async(t,{lazyLoad:e=!0}={})=>{r1(...t),e===!1&&await Zm()},ou=function(){if(Fi.startOnLoad){const{startOnLoad:t}=Ir.getConfig();t&&Fi.run().catch(e=>B.error("Mermaid failed to initialize",e))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",ou,!1)}const rx=function(t){Fi.parseError=t},Gn=[];let Ka=!1;const lu=async()=>{if(!Ka){for(Ka=!0;Gn.length>0;){const t=Gn.shift();if(t)try{await t()}catch(e){B.error("Error executing queue",e)}}Ka=!1}},sx=async(t,e)=>new Promise((i,r)=>{const s=()=>new Promise((n,a)=>{Ir.parse(t,e).then(o=>{n(o),i(o)},o=>{var l;B.error("Error parsing",o),(l=Fi.parseError)==null||l.call(Fi,o),a(o),r(o)})});Gn.push(s),lu().catch(r)}),cu=(t,e,i)=>new Promise((r,s)=>{const n=()=>new Promise((a,o)=>{Ir.render(t,e,i).then(l=>{a(l),r(l)},l=>{var h;B.error("Error parsing",l),(h=Fi.parseError)==null||h.call(Fi,l),o(l),s(l)})});Gn.push(n),lu().catch(s)}),Fi={startOnLoad:!0,mermaidAPI:Ir,parse:sx,render:cu,init:ex,run:nu,registerExternalDiagrams:ix,initialize:au,parseError:void 0,contentLoaded:ou,setParseErrorHandler:rx,detectType:_a},Ea=(t,e)=>{const i=t.append("rect");if(i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),e.name&&i.attr("name",e.name),e.rx!==void 0&&i.attr("rx",e.rx),e.ry!==void 0&&i.attr("ry",e.ry),e.attrs!==void 0)for(const r in e.attrs)i.attr(r,e.attrs[r]);return e.class!==void 0&&i.attr("class",e.class),i},hu=(t,e)=>{const i={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};Ea(t,i).lower()},nx=(t,e)=>{const i=e.text.replace(_s," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},ax=(t,e,i,r)=>{const s=t.append("image");s.attr("x",e),s.attr("y",i);const n=Mr.sanitizeUrl(r);s.attr("xlink:href",n)},ox=(t,e,i,r)=>{const s=t.append("use");s.attr("x",e),s.attr("y",i);const n=Mr.sanitizeUrl(r);s.attr("xlink:href",`#${n}`)},Wr=()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),pl=()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0});var jn=function(){var t=function(pt,ut,ot,lt){for(ot=ot||{},lt=pt.length;lt--;ot[pt[lt]]=ut);return ot},e=[1,24],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,63],o=[1,64],l=[1,65],h=[1,66],u=[1,67],p=[1,68],d=[1,69],g=[1,29],y=[1,30],x=[1,31],_=[1,32],v=[1,33],C=[1,34],R=[1,35],A=[1,36],T=[1,37],k=[1,38],w=[1,39],S=[1,40],m=[1,41],E=[1,42],f=[1,43],L=[1,44],b=[1,45],P=[1,46],U=[1,47],N=[1,48],D=[1,50],F=[1,51],I=[1,52],M=[1,53],z=[1,54],st=[1,55],j=[1,56],dt=[1,57],K=[1,58],G=[1,59],tt=[1,60],nt=[14,42],Q=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],J=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],O=[1,82],at=[1,83],W=[1,84],ft=[1,85],V=[12,14,42],vt=[12,14,33,42],X=[12,14,33,42,76,77,79,80],St=[12,33],bt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Vt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:function(ut,ot,lt,ht,$,rt,it){var ct=rt.length-1;switch($){case 3:ht.setDirection("TB");break;case 4:ht.setDirection("BT");break;case 5:ht.setDirection("RL");break;case 6:ht.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:ht.setC4Type(rt[ct-3]);break;case 19:ht.setTitle(rt[ct].substring(6)),this.$=rt[ct].substring(6);break;case 20:ht.setAccDescription(rt[ct].substring(15)),this.$=rt[ct].substring(15);break;case 21:this.$=rt[ct].trim(),ht.setTitle(this.$);break;case 22:case 23:this.$=rt[ct].trim(),ht.setAccDescription(this.$);break;case 28:case 29:rt[ct].splice(2,0,"ENTERPRISE"),ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 30:ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 31:rt[ct].splice(2,0,"CONTAINER"),ht.addContainerBoundary(...rt[ct]),this.$=rt[ct];break;case 32:ht.addDeploymentNode("node",...rt[ct]),this.$=rt[ct];break;case 33:ht.addDeploymentNode("nodeL",...rt[ct]),this.$=rt[ct];break;case 34:ht.addDeploymentNode("nodeR",...rt[ct]),this.$=rt[ct];break;case 35:ht.popBoundaryParseStack();break;case 39:ht.addPersonOrSystem("person",...rt[ct]),this.$=rt[ct];break;case 40:ht.addPersonOrSystem("external_person",...rt[ct]),this.$=rt[ct];break;case 41:ht.addPersonOrSystem("system",...rt[ct]),this.$=rt[ct];break;case 42:ht.addPersonOrSystem("system_db",...rt[ct]),this.$=rt[ct];break;case 43:ht.addPersonOrSystem("system_queue",...rt[ct]),this.$=rt[ct];break;case 44:ht.addPersonOrSystem("external_system",...rt[ct]),this.$=rt[ct];break;case 45:ht.addPersonOrSystem("external_system_db",...rt[ct]),this.$=rt[ct];break;case 46:ht.addPersonOrSystem("external_system_queue",...rt[ct]),this.$=rt[ct];break;case 47:ht.addContainer("container",...rt[ct]),this.$=rt[ct];break;case 48:ht.addContainer("container_db",...rt[ct]),this.$=rt[ct];break;case 49:ht.addContainer("container_queue",...rt[ct]),this.$=rt[ct];break;case 50:ht.addContainer("external_container",...rt[ct]),this.$=rt[ct];break;case 51:ht.addContainer("external_container_db",...rt[ct]),this.$=rt[ct];break;case 52:ht.addContainer("external_container_queue",...rt[ct]),this.$=rt[ct];break;case 53:ht.addComponent("component",...rt[ct]),this.$=rt[ct];break;case 54:ht.addComponent("component_db",...rt[ct]),this.$=rt[ct];break;case 55:ht.addComponent("component_queue",...rt[ct]),this.$=rt[ct];break;case 56:ht.addComponent("external_component",...rt[ct]),this.$=rt[ct];break;case 57:ht.addComponent("external_component_db",...rt[ct]),this.$=rt[ct];break;case 58:ht.addComponent("external_component_queue",...rt[ct]),this.$=rt[ct];break;case 60:ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 61:ht.addRel("birel",...rt[ct]),this.$=rt[ct];break;case 62:ht.addRel("rel_u",...rt[ct]),this.$=rt[ct];break;case 63:ht.addRel("rel_d",...rt[ct]),this.$=rt[ct];break;case 64:ht.addRel("rel_l",...rt[ct]),this.$=rt[ct];break;case 65:ht.addRel("rel_r",...rt[ct]),this.$=rt[ct];break;case 66:ht.addRel("rel_b",...rt[ct]),this.$=rt[ct];break;case 67:rt[ct].splice(0,1),ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 68:ht.updateElStyle("update_el_style",...rt[ct]),this.$=rt[ct];break;case 69:ht.updateRelStyle("update_rel_style",...rt[ct]),this.$=rt[ct];break;case 70:ht.updateLayoutConfig("update_layout_config",...rt[ct]),this.$=rt[ct];break;case 71:this.$=[rt[ct]];break;case 72:rt[ct].unshift(rt[ct-1]),this.$=rt[ct];break;case 73:case 75:this.$=rt[ct].trim();break;case 74:let ee={};ee[rt[ct-1].trim()]=rt[ct].trim(),this.$=ee;break;case 76:this.$="";break}},table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:70,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:71,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:72,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:73,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{14:[1,74]},t(nt,[2,13],{43:23,29:49,30:61,32:62,20:75,34:a,36:o,37:l,38:h,39:u,40:p,41:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt}),t(nt,[2,14]),t(Q,[2,16],{12:[1,76]}),t(nt,[2,36],{12:[1,77]}),t(J,[2,19]),t(J,[2,20]),{25:[1,78]},{27:[1,79]},t(J,[2,23]),{35:80,75:81,76:O,77:at,79:W,80:ft},{35:86,75:81,76:O,77:at,79:W,80:ft},{35:87,75:81,76:O,77:at,79:W,80:ft},{35:88,75:81,76:O,77:at,79:W,80:ft},{35:89,75:81,76:O,77:at,79:W,80:ft},{35:90,75:81,76:O,77:at,79:W,80:ft},{35:91,75:81,76:O,77:at,79:W,80:ft},{35:92,75:81,76:O,77:at,79:W,80:ft},{35:93,75:81,76:O,77:at,79:W,80:ft},{35:94,75:81,76:O,77:at,79:W,80:ft},{35:95,75:81,76:O,77:at,79:W,80:ft},{35:96,75:81,76:O,77:at,79:W,80:ft},{35:97,75:81,76:O,77:at,79:W,80:ft},{35:98,75:81,76:O,77:at,79:W,80:ft},{35:99,75:81,76:O,77:at,79:W,80:ft},{35:100,75:81,76:O,77:at,79:W,80:ft},{35:101,75:81,76:O,77:at,79:W,80:ft},{35:102,75:81,76:O,77:at,79:W,80:ft},{35:103,75:81,76:O,77:at,79:W,80:ft},{35:104,75:81,76:O,77:at,79:W,80:ft},t(V,[2,59]),{35:105,75:81,76:O,77:at,79:W,80:ft},{35:106,75:81,76:O,77:at,79:W,80:ft},{35:107,75:81,76:O,77:at,79:W,80:ft},{35:108,75:81,76:O,77:at,79:W,80:ft},{35:109,75:81,76:O,77:at,79:W,80:ft},{35:110,75:81,76:O,77:at,79:W,80:ft},{35:111,75:81,76:O,77:at,79:W,80:ft},{35:112,75:81,76:O,77:at,79:W,80:ft},{35:113,75:81,76:O,77:at,79:W,80:ft},{35:114,75:81,76:O,77:at,79:W,80:ft},{35:115,75:81,76:O,77:at,79:W,80:ft},{20:116,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{12:[1,118],33:[1,117]},{35:119,75:81,76:O,77:at,79:W,80:ft},{35:120,75:81,76:O,77:at,79:W,80:ft},{35:121,75:81,76:O,77:at,79:W,80:ft},{35:122,75:81,76:O,77:at,79:W,80:ft},{35:123,75:81,76:O,77:at,79:W,80:ft},{35:124,75:81,76:O,77:at,79:W,80:ft},{35:125,75:81,76:O,77:at,79:W,80:ft},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(nt,[2,15]),t(Q,[2,17],{21:22,19:130,22:e,23:i,24:r,26:s,28:n}),t(nt,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:i,24:r,26:s,28:n,34:a,36:o,37:l,38:h,39:u,40:p,41:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R,51:A,52:T,53:k,54:w,55:S,56:m,57:E,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt}),t(J,[2,21]),t(J,[2,22]),t(V,[2,39]),t(vt,[2,71],{75:81,35:132,76:O,77:at,79:W,80:ft}),t(X,[2,73]),{78:[1,133]},t(X,[2,75]),t(X,[2,76]),t(V,[2,40]),t(V,[2,41]),t(V,[2,42]),t(V,[2,43]),t(V,[2,44]),t(V,[2,45]),t(V,[2,46]),t(V,[2,47]),t(V,[2,48]),t(V,[2,49]),t(V,[2,50]),t(V,[2,51]),t(V,[2,52]),t(V,[2,53]),t(V,[2,54]),t(V,[2,55]),t(V,[2,56]),t(V,[2,57]),t(V,[2,58]),t(V,[2,60]),t(V,[2,61]),t(V,[2,62]),t(V,[2,63]),t(V,[2,64]),t(V,[2,65]),t(V,[2,66]),t(V,[2,67]),t(V,[2,68]),t(V,[2,69]),t(V,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(St,[2,28]),t(St,[2,29]),t(St,[2,30]),t(St,[2,31]),t(St,[2,32]),t(St,[2,33]),t(St,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(Q,[2,18]),t(nt,[2,38]),t(vt,[2,72]),t(X,[2,74]),t(V,[2,24]),t(V,[2,35]),t(bt,[2,25]),t(bt,[2,26],{12:[1,138]}),t(bt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:function(ut,ot){if(ot.recoverable)this.trace(ut);else{var lt=new Error(ut);throw lt.hash=ot,lt}},parse:function(ut){var ot=this,lt=[0],ht=[],$=[null],rt=[],it=this.table,ct="",ee=0,Qt=0,de=2,zt=1,Gt=rt.slice.call(arguments,1),qt=Object.create(this.lexer),Se={yy:{}};for(var fe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,fe)&&(Se.yy[fe]=this.yy[fe]);qt.setInput(ut,Se.yy),Se.yy.lexer=qt,Se.yy.parser=this,typeof qt.yylloc>"u"&&(qt.yylloc={});var lr=qt.yylloc;rt.push(lr);var Ur=qt.options&&qt.options.ranges;typeof Se.yy.parseError=="function"?this.parseError=Se.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function xe(){var Ie;return Ie=ht.pop()||qt.lex()||zt,typeof Ie!="number"&&(Ie instanceof Array&&(ht=Ie,Ie=ht.pop()),Ie=ot.symbols_[Ie]||Ie),Ie}for(var jt,ie,Ot,Zt,Dt={},Yt,Ut,Pt,Nt;;){if(ie=lt[lt.length-1],this.defaultActions[ie]?Ot=this.defaultActions[ie]:((jt===null||typeof jt>"u")&&(jt=xe()),Ot=it[ie]&&it[ie][jt]),typeof Ot>"u"||!Ot.length||!Ot[0]){var It="";Nt=[];for(Yt in it[ie])this.terminals_[Yt]&&Yt>de&&Nt.push("'"+this.terminals_[Yt]+"'");qt.showPosition?It="Parse error on line "+(ee+1)+`:
`+qt.showPosition()+`
Expecting `+Nt.join(", ")+", got '"+(this.terminals_[jt]||jt)+"'":It="Parse error on line "+(ee+1)+": Unexpected "+(jt==zt?"end of input":"'"+(this.terminals_[jt]||jt)+"'"),this.parseError(It,{text:qt.match,token:this.terminals_[jt]||jt,line:qt.yylineno,loc:lr,expected:Nt})}if(Ot[0]instanceof Array&&Ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ie+", token: "+jt);switch(Ot[0]){case 1:lt.push(jt),$.push(qt.yytext),rt.push(qt.yylloc),lt.push(Ot[1]),jt=null,Qt=qt.yyleng,ct=qt.yytext,ee=qt.yylineno,lr=qt.yylloc;break;case 2:if(Ut=this.productions_[Ot[1]][1],Dt.$=$[$.length-Ut],Dt._$={first_line:rt[rt.length-(Ut||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(Ut||1)].first_column,last_column:rt[rt.length-1].last_column},Ur&&(Dt._$.range=[rt[rt.length-(Ut||1)].range[0],rt[rt.length-1].range[1]]),Zt=this.performAction.apply(Dt,[ct,Qt,ee,Se.yy,Ot[1],$,rt].concat(Gt)),typeof Zt<"u")return Zt;Ut&&(lt=lt.slice(0,-1*Ut*2),$=$.slice(0,-1*Ut),rt=rt.slice(0,-1*Ut)),lt.push(this.productions_[Ot[1]][0]),$.push(Dt.$),rt.push(Dt._$),Pt=it[lt[lt.length-2]][lt[lt.length-1]],lt.push(Pt);break;case 3:return!0}}return!0}},Bt=function(){var pt={EOF:1,parseError:function(ot,lt){if(this.yy.parser)this.yy.parser.parseError(ot,lt);else throw new Error(ot)},setInput:function(ut,ot){return this.yy=ot||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var ot=ut.match(/(?:\r\n?|\n).*/g);return ot?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},unput:function(ut){var ot=ut.length,lt=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ot),this.offset-=ot;var ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lt.length-1&&(this.yylineno-=lt.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lt?(lt.length===ht.length?this.yylloc.first_column:0)+ht[ht.length-lt.length].length-lt[0].length:this.yylloc.first_column-ot},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-ot]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ut){this.unput(this.match.slice(ut))},pastInput:function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ut=this.pastInput(),ot=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+ot+"^"},test_match:function(ut,ot){var lt,ht,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),ht=ut[0].match(/(?:\r\n?|\n).*/g),ht&&(this.yylineno+=ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ht?ht[ht.length-1].length-ht[ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],lt=this.performAction.call(this,this.yy,this,ot,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),lt)return lt;if(this._backtrack){for(var rt in $)this[rt]=$[rt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,ot,lt,ht;this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),rt=0;rt<$.length;rt++)if(lt=this._input.match(this.rules[$[rt]]),lt&&(!ot||lt[0].length>ot[0].length)){if(ot=lt,ht=rt,this.options.backtrack_lexer){if(ut=this.test_match(lt,$[rt]),ut!==!1)return ut;if(this._backtrack){ot=!1;continue}else return!1}else if(!this.options.flex)break}return ot?(ut=this.test_match(ot,$[ht]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ot=this.next();return ot||this.lex()},begin:function(ot){this.conditionStack.push(ot)},popState:function(){var ot=this.conditionStack.length-1;return ot>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ot){return ot=this.conditionStack.length-1-Math.abs(ot||0),ot>=0?this.conditionStack[ot]:"INITIAL"},pushState:function(ot){this.begin(ot)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ot,lt,ht,$){switch(ht){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return pt}();Vt.lexer=Bt;function Wt(){this.yy={}}return Wt.prototype=Vt,Vt.Parser=Wt,new Wt}();jn.parser=jn;const lx=jn;let Ei=[],yr=[""],We="global",Ti="",Ri=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ys=[],gl="",yl=!1,Xn=4,$n=2;var uu;const cx=function(){return uu},hx=function(t){uu=ue(t,Y())},ux=function(t,e,i,r,s,n,a,o,l){if(t==null||e===void 0||e===null||i===void 0||i===null||r===void 0||r===null)return;let h={};const u=Ys.find(p=>p.from===e&&p.to===i);if(u?h=u:Ys.push(h),h.type=t,h.from=e,h.to=i,h.label={text:r},s==null)h.techn={text:""};else if(typeof s=="object"){let[p,d]=Object.entries(s)[0];h[p]={text:d}}else h.techn={text:s};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[p,d]=Object.entries(n)[0];h[p]={text:d}}else h.descr={text:n};if(typeof a=="object"){let[p,d]=Object.entries(a)[0];h[p]=d}else h.sprite=a;if(typeof o=="object"){let[p,d]=Object.entries(o)[0];h[p]=d}else h.tags=o;if(typeof l=="object"){let[p,d]=Object.entries(l)[0];h[p]=d}else h.link=l;h.wrap=Tr()},dx=function(t,e,i,r,s,n,a){if(e===null||i===null)return;let o={};const l=Ei.find(h=>h.alias===e);if(l&&e===l.alias?o=l:(o.alias=e,Ei.push(o)),i==null?o.label={text:""}:o.label={text:i},r==null)o.descr={text:""};else if(typeof r=="object"){let[h,u]=Object.entries(r)[0];o[h]={text:u}}else o.descr={text:r};if(typeof s=="object"){let[h,u]=Object.entries(s)[0];o[h]=u}else o.sprite=s;if(typeof n=="object"){let[h,u]=Object.entries(n)[0];o[h]=u}else o.tags=n;if(typeof a=="object"){let[h,u]=Object.entries(a)[0];o[h]=u}else o.link=a;o.typeC4Shape={text:t},o.parentBoundary=We,o.wrap=Tr()},fx=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Ei.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ei.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof n=="object"){let[u,p]=Object.entries(n)[0];l[u]=p}else l.sprite=n;if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.wrap=Tr(),l.typeC4Shape={text:t},l.parentBoundary=We},px=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Ei.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ei.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof n=="object"){let[u,p]=Object.entries(n)[0];l[u]=p}else l.sprite=n;if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.wrap=Tr(),l.typeC4Shape={text:t},l.parentBoundary=We},gx=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Ri.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Ri.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"system"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=We,n.wrap=Tr(),Ti=We,We=t,yr.push(Ti)},yx=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Ri.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Ri.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"container"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=We,n.wrap=Tr(),Ti=We,We=t,yr.push(Ti)},mx=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Ri.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ri.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.type={text:"node"};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.type={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.nodeType=t,l.parentBoundary=We,l.wrap=Tr(),Ti=We,We=e,yr.push(Ti)},xx=function(){We=Ti,yr.pop(),Ti=yr.pop(),yr.push(Ti)},bx=function(t,e,i,r,s,n,a,o,l,h,u){let p=Ei.find(d=>d.alias===e);if(!(p===void 0&&(p=Ri.find(d=>d.alias===e),p===void 0))){if(i!=null)if(typeof i=="object"){let[d,g]=Object.entries(i)[0];p[d]=g}else p.bgColor=i;if(r!=null)if(typeof r=="object"){let[d,g]=Object.entries(r)[0];p[d]=g}else p.fontColor=r;if(s!=null)if(typeof s=="object"){let[d,g]=Object.entries(s)[0];p[d]=g}else p.borderColor=s;if(n!=null)if(typeof n=="object"){let[d,g]=Object.entries(n)[0];p[d]=g}else p.shadowing=n;if(a!=null)if(typeof a=="object"){let[d,g]=Object.entries(a)[0];p[d]=g}else p.shape=a;if(o!=null)if(typeof o=="object"){let[d,g]=Object.entries(o)[0];p[d]=g}else p.sprite=o;if(l!=null)if(typeof l=="object"){let[d,g]=Object.entries(l)[0];p[d]=g}else p.techn=l;if(h!=null)if(typeof h=="object"){let[d,g]=Object.entries(h)[0];p[d]=g}else p.legendText=h;if(u!=null)if(typeof u=="object"){let[d,g]=Object.entries(u)[0];p[d]=g}else p.legendSprite=u}},kx=function(t,e,i,r,s,n,a){const o=Ys.find(l=>l.from===e&&l.to===i);if(o!==void 0){if(r!=null)if(typeof r=="object"){let[l,h]=Object.entries(r)[0];o[l]=h}else o.textColor=r;if(s!=null)if(typeof s=="object"){let[l,h]=Object.entries(s)[0];o[l]=h}else o.lineColor=s;if(n!=null)if(typeof n=="object"){let[l,h]=Object.entries(n)[0];o[l]=parseInt(h)}else o.offsetX=parseInt(n);if(a!=null)if(typeof a=="object"){let[l,h]=Object.entries(a)[0];o[l]=parseInt(h)}else o.offsetY=parseInt(a)}},_x=function(t,e,i){let r=Xn,s=$n;if(typeof e=="object"){const n=Object.values(e)[0];r=parseInt(n)}else r=parseInt(e);if(typeof i=="object"){const n=Object.values(i)[0];s=parseInt(n)}else s=parseInt(i);r>=1&&(Xn=r),s>=1&&($n=s)},Tx=function(){return Xn},Cx=function(){return $n},Ex=function(){return We},Sx=function(){return Ti},du=function(t){return t==null?Ei:Ei.filter(e=>e.parentBoundary===t)},wx=function(t){return Ei.find(e=>e.alias===t)},vx=function(t){return Object.keys(du(t))},fu=function(t){return t==null?Ri:Ri.filter(e=>e.parentBoundary===t)},Ax=fu,Lx=function(){return Ys},Bx=function(){return gl},Ix=function(t){yl=t},Tr=function(){return yl},Dx=function(){Ei=[],Ri=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ti="",We="global",yr=[""],Ys=[],yr=[""],gl="",yl=!1,Xn=4,$n=2},Fx={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Rx={FILLED:0,OPEN:1},Nx={LEFTOF:0,RIGHTOF:1,OVER:2},Ox=function(t){gl=ue(t,Y())},co={addPersonOrSystem:dx,addPersonOrSystemBoundary:gx,addContainer:fx,addContainerBoundary:yx,addComponent:px,addDeploymentNode:mx,popBoundaryParseStack:xx,addRel:ux,updateElStyle:bx,updateRelStyle:kx,updateLayoutConfig:_x,autoWrap:Tr,setWrap:Ix,getC4ShapeArray:du,getC4Shape:wx,getC4ShapeKeys:vx,getBoundaries:fu,getBoundarys:Ax,getCurrentBoundaryParse:Ex,getParentBoundaryParse:Sx,getRels:Lx,getTitle:Bx,getC4Type:cx,getC4ShapeInRow:Tx,getC4BoundaryInRow:Cx,setAccTitle:Me,getAccTitle:Ue,getAccDescription:Ge,setAccDescription:He,getConfig:()=>Y().c4,clear:Dx,LINETYPE:Fx,ARROWTYPE:Rx,PLACEMENT:Nx,setTitle:Ox,setC4Type:hx},ml=function(t,e){return Ea(t,e)},pu=function(t,e,i,r,s,n){const a=t.append("image");a.attr("width",e),a.attr("height",i),a.attr("x",r),a.attr("y",s);let o=n.startsWith("data:image/png;base64")?n:Mr.sanitizeUrl(n);a.attr("xlink:href",o)},Px=(t,e,i)=>{const r=t.append("g");let s=0;for(let n of e){let a=n.textColor?n.textColor:"#444444",o=n.lineColor?n.lineColor:"#444444",l=n.offsetX?parseInt(n.offsetX):0,h=n.offsetY?parseInt(n.offsetY):0,u="";if(s===0){let d=r.append("line");d.attr("x1",n.startPoint.x),d.attr("y1",n.startPoint.y),d.attr("x2",n.endPoint.x),d.attr("y2",n.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",o),d.style("fill","none"),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)"),s=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)")}let p=i.messageFont();Ji(i)(n.label.text,r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+h,n.label.width,n.label.height,{fill:a},p),n.techn&&n.techn.text!==""&&(p=i.messageFont(),Ji(i)("["+n.techn.text+"]",r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+i.messageFontSize+5+h,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:a,"font-style":"italic"},p))}},Mx=function(t,e,i){const r=t.append("g");let s=e.bgColor?e.bgColor:"none",n=e.borderColor?e.borderColor:"#444444",a=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:s,stroke:n,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};ml(r,l);let h=i.boundaryFont();h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,Ji(i)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},h),e.type&&e.type.text!==""&&(h=i.boundaryFont(),h.fontColor=a,Ji(i)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},h)),e.descr&&e.descr.text!==""&&(h=i.boundaryFont(),h.fontSize=h.fontSize-2,h.fontColor=a,Ji(i)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},h))},Vx=function(t,e,i){var r;let s=e.bgColor?e.bgColor:i[e.typeC4Shape.text+"_bg_color"],n=e.borderColor?e.borderColor:i[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const l=t.append("g");l.attr("class","person-man");const h=Wr();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=e.x,h.y=e.y,h.fill=s,h.width=e.width,h.height=e.height,h.stroke=n,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},ml(l,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=Xx(i,e.typeC4Shape.text);switch(l.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":pu(l,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let p=i[e.typeC4Shape.text+"Font"]();return p.fontWeight="bold",p.fontSize=p.fontSize+2,p.fontColor=a,Ji(i)(e.label.text,l,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},p),p=i[e.typeC4Shape.text+"Font"](),p.fontColor=a,e.techn&&((r=e.techn)==null?void 0:r.text)!==""?Ji(i)(e.techn.text,l,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},p):e.type&&e.type.text!==""&&Ji(i)(e.type.text,l,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},p),e.descr&&e.descr.text!==""&&(p=i.personFont(),p.fontColor=a,Ji(i)(e.descr.text,l,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},p)),e.height},zx=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},qx=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},Wx=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},Yx=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},Ux=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},Hx=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Gx=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},jx=function(t){const i=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);i.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),i.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},Xx=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Ji=function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{fontSize:d,fontFamily:g,fontWeight:y}=p,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const v=_*d-d*(x.length-1)/2,C=n.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",y).style("font-family",g);C.append("tspan").attr("dy",v).text(x[_]).attr("alignment-baseline","mathematical"),r(C,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),Ai={drawRect:ml,drawBoundary:Mx,drawC4Shape:Vx,drawRels:Px,drawImage:pu,insertArrowHead:Yx,insertArrowEnd:Ux,insertArrowFilledHead:Hx,insertDynamicNumber:Gx,insertArrowCrossHead:jx,insertDatabaseIcon:zx,insertComputerIcon:qx,insertClockIcon:Wx};let Kn=0,Qn=0,gu=4,ho=2;jn.yy=co;let Tt={};class yu{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,uo(e.db.getConfig())}setData(e,i,r,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=i,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=s}updateVal(e,i,r,s){e[i]===void 0?e[i]=r:e[i]=s(r,e[i])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let i=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=i+e.width,s=this.nextData.starty+e.margin*2,n=s+e.height;(i>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>gu)&&(i=this.nextData.startx+e.margin+Tt.nextLinePaddingX,s=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=i+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=s+e.height,this.nextData.cnt=1),e.x=i,e.y=s,this.updateVal(this.data,"startx",i,Math.min),this.updateVal(this.data,"starty",s,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",i,Math.min),this.updateVal(this.nextData,"starty",s,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},uo(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const uo=function(t){Le(Tt,t),t.fontFamily&&(Tt.personFontFamily=Tt.systemFontFamily=Tt.messageFontFamily=t.fontFamily),t.fontSize&&(Tt.personFontSize=Tt.systemFontSize=Tt.messageFontSize=t.fontSize),t.fontWeight&&(Tt.personFontWeight=Tt.systemFontWeight=Tt.messageFontWeight=t.fontWeight)},Cs=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),In=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),$x=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function xi(t,e,i,r,s){if(!e[t].width)if(i)e[t].text=h1(e[t].text,s,r),e[t].textLines=e[t].text.split(mt.lineBreakRegex).length,e[t].width=s,e[t].height=oo(e[t].text,r);else{let n=e[t].text.split(mt.lineBreakRegex);e[t].textLines=n.length;let a=0;e[t].height=0,e[t].width=0;for(const o of n)e[t].width=Math.max(Ii(o,r),e[t].width),a=oo(o,r),e[t].height=e[t].height+a}}const mu=function(t,e,i){e.x=i.data.startx,e.y=i.data.starty,e.width=i.data.stopx-i.data.startx,e.height=i.data.stopy-i.data.starty,e.label.y=Tt.c4ShapeMargin-35;let r=e.wrap&&Tt.wrap,s=In(Tt);s.fontSize=s.fontSize+2,s.fontWeight="bold";let n=Ii(e.label.text,s);xi("label",e,r,s,n),Ai.drawBoundary(t,e,Tt)},xu=function(t,e,i,r){let s=0;for(const n of r){s=0;const a=i[n];let o=Cs(Tt,a.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,a.typeC4Shape.width=Ii(""+a.typeC4Shape.text+"",o),a.typeC4Shape.height=o.fontSize+2,a.typeC4Shape.Y=Tt.c4ShapePadding,s=a.typeC4Shape.Y+a.typeC4Shape.height-4,a.image={width:0,height:0,Y:0},a.typeC4Shape.text){case"person":case"external_person":a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height;break}a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height);let l=a.wrap&&Tt.wrap,h=Tt.width-Tt.c4ShapePadding*2,u=Cs(Tt,a.typeC4Shape.text);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",xi("label",a,l,u,h),a.label.Y=s+8,s=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let g=Cs(Tt,a.typeC4Shape.text);xi("type",a,l,g,h),a.type.Y=s+5,s=a.type.Y+a.type.height}else if(a.techn&&a.techn.text!==""){a.techn.text="["+a.techn.text+"]";let g=Cs(Tt,a.techn.text);xi("techn",a,l,g,h),a.techn.Y=s+5,s=a.techn.Y+a.techn.height}let p=s,d=a.label.width;if(a.descr&&a.descr.text!==""){let g=Cs(Tt,a.typeC4Shape.text);xi("descr",a,l,g,h),a.descr.Y=s+20,s=a.descr.Y+a.descr.height,d=Math.max(a.label.width,a.descr.width),p=s-a.descr.textLines*5}d=d+Tt.c4ShapePadding,a.width=Math.max(a.width||Tt.width,d,Tt.width),a.height=Math.max(a.height||Tt.height,p,Tt.height),a.margin=a.margin||Tt.c4ShapeMargin,t.insert(a),Ai.drawC4Shape(e,a,Tt)}t.bumpLastMargin(Tt.c4ShapeMargin)};class ci{constructor(e,i){this.x=e,this.y=i}}let Vc=function(t,e){let i=t.x,r=t.y,s=e.x,n=e.y,a=i+t.width/2,o=r+t.height/2,l=Math.abs(i-s),h=Math.abs(r-n),u=h/l,p=t.height/t.width,d=null;return r==n&&i<s?d=new ci(i+t.width,o):r==n&&i>s?d=new ci(i,o):i==s&&r<n?d=new ci(a,r+t.height):i==s&&r>n&&(d=new ci(a,r)),i>s&&r<n?p>=u?d=new ci(i,o+u*t.width/2):d=new ci(a-l/h*t.height/2,r+t.height):i<s&&r<n?p>=u?d=new ci(i+t.width,o+u*t.width/2):d=new ci(a+l/h*t.height/2,r+t.height):i<s&&r>n?p>=u?d=new ci(i+t.width,o-u*t.width/2):d=new ci(a+t.height/2*l/h,r):i>s&&r>n&&(p>=u?d=new ci(i,o-t.width/2*u):d=new ci(a-t.height/2*l/h,r)),d},Kx=function(t,e){let i={x:0,y:0};i.x=e.x+e.width/2,i.y=e.y+e.height/2;let r=Vc(t,i);i.x=t.x+t.width/2,i.y=t.y+t.height/2;let s=Vc(e,i);return{startPoint:r,endPoint:s}};const Qx=function(t,e,i,r){let s=0;for(let n of e){s=s+1;let a=n.wrap&&Tt.wrap,o=$x(Tt);r.db.getC4Type()==="C4Dynamic"&&(n.label.text=s+": "+n.label.text);let h=Ii(n.label.text,o);xi("label",n,a,o,h),n.techn&&n.techn.text!==""&&(h=Ii(n.techn.text,o),xi("techn",n,a,o,h)),n.descr&&n.descr.text!==""&&(h=Ii(n.descr.text,o),xi("descr",n,a,o,h));let u=i(n.from),p=i(n.to),d=Kx(u,p);n.startPoint=d.startPoint,n.endPoint=d.endPoint}Ai.drawRels(t,e,Tt)};function bu(t,e,i,r,s){let n=new yu(s);n.data.widthLimit=i.data.widthLimit/Math.min(ho,r.length);for(let[a,o]of r.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let h=o.wrap&&Tt.wrap,u=In(Tt);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",xi("label",o,h,u,n.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=In(Tt);xi("type",o,h,y,n.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=In(Tt);y.fontSize=y.fontSize-2,xi("descr",o,h,y,n.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(a==0||a%ho===0){let y=i.data.startx+Tt.diagramMarginX,x=i.data.stopy+Tt.diagramMarginY+l;n.setData(y,y,x,x)}else{let y=n.data.stopx!==n.data.startx?n.data.stopx+Tt.diagramMarginX:n.data.startx,x=n.data.starty;n.setData(y,y,x,x)}n.name=o.alias;let p=s.db.getC4ShapeArray(o.alias),d=s.db.getC4ShapeKeys(o.alias);d.length>0&&xu(n,t,p,d),e=o.alias;let g=s.db.getBoundarys(e);g.length>0&&bu(t,e,n,g,s),o.alias!=="global"&&mu(t,o,n),i.data.stopy=Math.max(n.data.stopy+Tt.c4ShapeMargin,i.data.stopy),i.data.stopx=Math.max(n.data.stopx+Tt.c4ShapeMargin,i.data.stopx),Kn=Math.max(Kn,i.data.stopx),Qn=Math.max(Qn,i.data.stopy)}}const Zx=function(t,e,i,r){Tt=Y().c4;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body");let o=r.db;r.db.setWrap(Tt.wrap),gu=o.getC4ShapeInRow(),ho=o.getC4BoundaryInRow(),B.debug(`C:${JSON.stringify(Tt,null,2)}`);const l=s==="sandbox"?a.select(`[id="${e}"]`):yt(`[id="${e}"]`);Ai.insertComputerIcon(l),Ai.insertDatabaseIcon(l),Ai.insertClockIcon(l);let h=new yu(r);h.setData(Tt.diagramMarginX,Tt.diagramMarginX,Tt.diagramMarginY,Tt.diagramMarginY),h.data.widthLimit=screen.availWidth,Kn=Tt.diagramMarginX,Qn=Tt.diagramMarginY;const u=r.db.getTitle();let p=r.db.getBoundarys("");bu(l,"",h,p,r),Ai.insertArrowHead(l),Ai.insertArrowEnd(l),Ai.insertArrowCrossHead(l),Ai.insertArrowFilledHead(l),Qx(l,r.db.getRels(),r.db.getC4Shape,r),h.data.stopx=Kn,h.data.stopy=Qn;const d=h.data;let y=d.stopy-d.starty+2*Tt.diagramMarginY;const _=d.stopx-d.startx+2*Tt.diagramMarginX;u&&l.append("text").text(u).attr("x",(d.stopx-d.startx)/2-4*Tt.diagramMarginX).attr("y",d.starty+Tt.diagramMarginY),Oe(l,y,_,Tt.useMaxWidth);const v=u?60:0;l.attr("viewBox",d.startx-Tt.diagramMarginX+" -"+(Tt.diagramMarginY+v)+" "+_+" "+(y+v)),B.debug("models:",d)},zc={drawPersonOrSystemArray:xu,drawBoundary:mu,setConf:uo,draw:Zx},Jx=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,t4=Jx,e4={parser:lx,db:co,renderer:zc,styles:t4,init:({c4:t,wrap:e})=>{zc.setConf(t),co.setWrap(e)}},i4=Object.freeze(Object.defineProperty({__proto__:null,diagram:e4},Symbol.toStringTag,{value:"Module"}));var fo=function(){var t=function(hr,Et,Lt,Mt){for(Lt=Lt||{},Mt=hr.length;Mt--;Lt[hr[Mt]]=Et);return Lt},e=[1,4],i=[1,3],r=[1,5],s=[1,8,9,10,11,27,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],n=[2,2],a=[1,13],o=[1,14],l=[1,15],h=[1,16],u=[1,23],p=[1,25],d=[1,26],g=[1,27],y=[1,49],x=[1,48],_=[1,29],v=[1,30],C=[1,31],R=[1,32],A=[1,33],T=[1,44],k=[1,46],w=[1,42],S=[1,47],m=[1,43],E=[1,50],f=[1,45],L=[1,51],b=[1,52],P=[1,34],U=[1,35],N=[1,36],D=[1,37],F=[1,57],I=[1,8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],M=[1,61],z=[1,60],st=[1,62],j=[8,9,11,73,75],dt=[1,88],K=[1,93],G=[1,92],tt=[1,89],nt=[1,85],Q=[1,91],J=[1,87],O=[1,94],at=[1,90],W=[1,95],ft=[1,86],V=[8,9,10,11,73,75],vt=[8,9,10,11,44,73,75],X=[8,9,10,11,29,42,44,46,48,50,52,54,56,58,61,63,65,66,68,73,75,86,99,102,103,106,108,111,112,113],St=[8,9,11,42,58,73,75,86,99,102,103,106,108,111,112,113],bt=[42,58,86,99,102,103,106,108,111,112,113],Vt=[1,121],Bt=[1,120],Wt=[1,128],pt=[1,142],ut=[1,143],ot=[1,144],lt=[1,145],ht=[1,130],$=[1,132],rt=[1,136],it=[1,137],ct=[1,138],ee=[1,139],Qt=[1,140],de=[1,141],zt=[1,146],Gt=[1,147],qt=[1,126],Se=[1,127],fe=[1,134],lr=[1,129],Ur=[1,133],xe=[1,131],jt=[8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],ie=[1,149],Ot=[8,9,11],Zt=[8,9,10,11,14,42,58,86,102,103,106,108,111,112,113],Dt=[1,169],Yt=[1,165],Ut=[1,166],Pt=[1,170],Nt=[1,167],It=[1,168],Ie=[75,113,116],Xt=[8,9,10,11,12,14,27,29,32,42,58,73,81,82,83,84,85,86,87,102,106,108,111,112,113],nc=[10,103],cr=[31,47,49,51,53,55,60,62,64,65,67,69,113,114,115],Pi=[1,235],Mi=[1,233],Vi=[1,237],zi=[1,231],qi=[1,232],Wi=[1,234],Yi=[1,236],Ui=[1,238],Hr=[1,255],ac=[8,9,11,103],Si=[8,9,10,11,58,81,102,103,106,107,108,109],Va={trace:function(){},yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,link:39,node:40,styledVertex:41,AMP:42,vertex:43,STYLE_SEPARATOR:44,idString:45,DOUBLECIRCLESTART:46,DOUBLECIRCLEEND:47,PS:48,PE:49,"(-":50,"-)":51,STADIUMSTART:52,STADIUMEND:53,SUBROUTINESTART:54,SUBROUTINEEND:55,VERTEX_WITH_PROPS_START:56,"NODE_STRING[field]":57,COLON:58,"NODE_STRING[value]":59,PIPE:60,CYLINDERSTART:61,CYLINDEREND:62,DIAMOND_START:63,DIAMOND_STOP:64,TAGEND:65,TRAPSTART:66,TRAPEND:67,INVTRAPSTART:68,INVTRAPEND:69,linkStatement:70,arrowText:71,TESTSTR:72,START_LINK:73,edgeText:74,LINK:75,edgeTextToken:76,STR:77,MD_STR:78,textToken:79,keywords:80,STYLE:81,LINKSTYLE:82,CLASSDEF:83,CLASS:84,CLICK:85,DOWN:86,UP:87,textNoTagsToken:88,stylesOpt:89,"idString[vertex]":90,"idString[class]":91,CALLBACKNAME:92,CALLBACKARGS:93,HREF:94,LINK_TARGET:95,"STR[link]":96,"STR[tooltip]":97,alphaNum:98,DEFAULT:99,numList:100,INTERPOLATE:101,NUM:102,COMMA:103,style:104,styleComponent:105,NODE_STRING:106,UNIT:107,BRKT:108,PCT:109,idStringToken:110,MINUS:111,MULT:112,UNICODE_TEXT:113,TEXT:114,TAGSTART:115,EDGE_TEXT:116,alphaNumToken:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",42:"AMP",44:"STYLE_SEPARATOR",46:"DOUBLECIRCLESTART",47:"DOUBLECIRCLEEND",48:"PS",49:"PE",50:"(-",51:"-)",52:"STADIUMSTART",53:"STADIUMEND",54:"SUBROUTINESTART",55:"SUBROUTINEEND",56:"VERTEX_WITH_PROPS_START",57:"NODE_STRING[field]",58:"COLON",59:"NODE_STRING[value]",60:"PIPE",61:"CYLINDERSTART",62:"CYLINDEREND",63:"DIAMOND_START",64:"DIAMOND_STOP",65:"TAGEND",66:"TRAPSTART",67:"TRAPEND",68:"INVTRAPSTART",69:"INVTRAPEND",72:"TESTSTR",73:"START_LINK",75:"LINK",77:"STR",78:"MD_STR",81:"STYLE",82:"LINKSTYLE",83:"CLASSDEF",84:"CLASS",85:"CLICK",86:"DOWN",87:"UP",90:"idString[vertex]",91:"idString[class]",92:"CALLBACKNAME",93:"CALLBACKARGS",94:"HREF",95:"LINK_TARGET",96:"STR[link]",97:"STR[tooltip]",99:"DEFAULT",101:"INTERPOLATE",102:"NUM",103:"COMMA",106:"NODE_STRING",107:"UNIT",108:"BRKT",109:"PCT",111:"MINUS",112:"MULT",113:"UNICODE_TEXT",114:"TEXT",115:"TAGSTART",116:"EDGE_TEXT",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[20,3],[20,4],[20,2],[20,1],[40,1],[40,5],[41,1],[41,3],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,8],[43,4],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,4],[43,4],[43,1],[39,2],[39,3],[39,3],[39,1],[39,3],[74,1],[74,2],[74,1],[74,1],[70,1],[71,3],[30,1],[30,2],[30,1],[30,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[100,1],[100,3],[89,1],[89,3],[104,1],[104,2],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[79,1],[79,1],[79,1],[79,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[76,1],[76,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[45,1],[45,2],[98,1],[98,2],[33,1],[33,1],[33,1],[33,1]],performAction:function(Et,Lt,Mt,xt,re,q,Ts){var H=q.length-1;switch(re){case 2:this.$=[];break;case 3:(!Array.isArray(q[H])||q[H].length>0)&&q[H-1].push(q[H]),this.$=q[H-1];break;case 4:case 176:this.$=q[H];break;case 11:xt.setDirection("TB"),this.$="TB";break;case 12:xt.setDirection(q[H-1]),this.$=q[H-1];break;case 27:this.$=q[H-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=xt.addSubGraph(q[H-6],q[H-1],q[H-4]);break;case 34:this.$=xt.addSubGraph(q[H-3],q[H-1],q[H-3]);break;case 35:this.$=xt.addSubGraph(void 0,q[H-1],void 0);break;case 37:this.$=q[H].trim(),xt.setAccTitle(this.$);break;case 38:case 39:this.$=q[H].trim(),xt.setAccDescription(this.$);break;case 43:xt.addLink(q[H-2].stmt,q[H],q[H-1]),this.$={stmt:q[H],nodes:q[H].concat(q[H-2].nodes)};break;case 44:xt.addLink(q[H-3].stmt,q[H-1],q[H-2]),this.$={stmt:q[H-1],nodes:q[H-1].concat(q[H-3].nodes)};break;case 45:this.$={stmt:q[H-1],nodes:q[H-1]};break;case 46:this.$={stmt:q[H],nodes:q[H]};break;case 47:this.$=[q[H]];break;case 48:this.$=q[H-4].concat(q[H]);break;case 49:this.$=q[H];break;case 50:this.$=q[H-2],xt.setClass(q[H-2],q[H]);break;case 51:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"square");break;case 52:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"doublecircle");break;case 53:this.$=q[H-5],xt.addVertex(q[H-5],q[H-2],"circle");break;case 54:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"ellipse");break;case 55:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"stadium");break;case 56:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"subroutine");break;case 57:this.$=q[H-7],xt.addVertex(q[H-7],q[H-1],"rect",void 0,void 0,void 0,Object.fromEntries([[q[H-5],q[H-3]]]));break;case 58:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"cylinder");break;case 59:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"round");break;case 60:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"diamond");break;case 61:this.$=q[H-5],xt.addVertex(q[H-5],q[H-2],"hexagon");break;case 62:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"odd");break;case 63:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"trapezoid");break;case 64:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"inv_trapezoid");break;case 65:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"lean_right");break;case 66:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"lean_left");break;case 67:this.$=q[H],xt.addVertex(q[H]);break;case 68:q[H-1].text=q[H],this.$=q[H-1];break;case 69:case 70:q[H-2].text=q[H-1],this.$=q[H-2];break;case 71:this.$=q[H];break;case 72:var ai=xt.destructLink(q[H],q[H-2]);this.$={type:ai.type,stroke:ai.stroke,length:ai.length,text:q[H-1]};break;case 73:this.$={text:q[H],type:"text"};break;case 74:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 75:this.$={text:q[H],type:"string"};break;case 76:this.$={text:q[H],type:"markdown"};break;case 77:var ai=xt.destructLink(q[H]);this.$={type:ai.type,stroke:ai.stroke,length:ai.length};break;case 78:this.$=q[H-1];break;case 79:this.$={text:q[H],type:"text"};break;case 80:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 81:this.$={text:q[H],type:"string"};break;case 82:case 97:this.$={text:q[H],type:"markdown"};break;case 94:this.$={text:q[H],type:"text"};break;case 95:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 96:this.$={text:q[H],type:"text"};break;case 98:this.$=q[H-4],xt.addClass(q[H-2],q[H]);break;case 99:this.$=q[H-4],xt.setClass(q[H-2],q[H]);break;case 100:case 108:this.$=q[H-1],xt.setClickEvent(q[H-1],q[H]);break;case 101:case 109:this.$=q[H-3],xt.setClickEvent(q[H-3],q[H-2]),xt.setTooltip(q[H-3],q[H]);break;case 102:this.$=q[H-2],xt.setClickEvent(q[H-2],q[H-1],q[H]);break;case 103:this.$=q[H-4],xt.setClickEvent(q[H-4],q[H-3],q[H-2]),xt.setTooltip(q[H-4],q[H]);break;case 104:this.$=q[H-2],xt.setLink(q[H-2],q[H]);break;case 105:this.$=q[H-4],xt.setLink(q[H-4],q[H-2]),xt.setTooltip(q[H-4],q[H]);break;case 106:this.$=q[H-4],xt.setLink(q[H-4],q[H-2],q[H]);break;case 107:this.$=q[H-6],xt.setLink(q[H-6],q[H-4],q[H]),xt.setTooltip(q[H-6],q[H-2]);break;case 110:this.$=q[H-1],xt.setLink(q[H-1],q[H]);break;case 111:this.$=q[H-3],xt.setLink(q[H-3],q[H-2]),xt.setTooltip(q[H-3],q[H]);break;case 112:this.$=q[H-3],xt.setLink(q[H-3],q[H-2],q[H]);break;case 113:this.$=q[H-5],xt.setLink(q[H-5],q[H-4],q[H]),xt.setTooltip(q[H-5],q[H-2]);break;case 114:this.$=q[H-4],xt.addVertex(q[H-2],void 0,void 0,q[H]);break;case 115:this.$=q[H-4],xt.updateLink([q[H-2]],q[H]);break;case 116:this.$=q[H-4],xt.updateLink(q[H-2],q[H]);break;case 117:this.$=q[H-8],xt.updateLinkInterpolate([q[H-6]],q[H-2]),xt.updateLink([q[H-6]],q[H]);break;case 118:this.$=q[H-8],xt.updateLinkInterpolate(q[H-6],q[H-2]),xt.updateLink(q[H-6],q[H]);break;case 119:this.$=q[H-6],xt.updateLinkInterpolate([q[H-4]],q[H]);break;case 120:this.$=q[H-6],xt.updateLinkInterpolate(q[H-4],q[H]);break;case 121:case 123:this.$=[q[H]];break;case 122:case 124:q[H-2].push(q[H]),this.$=q[H-2];break;case 126:this.$=q[H-1]+q[H];break;case 174:this.$=q[H];break;case 175:this.$=q[H-1]+""+q[H];break;case 177:this.$=q[H-1]+""+q[H];break;case 178:this.$={stmt:"dir",value:"TB"};break;case 179:this.$={stmt:"dir",value:"BT"};break;case 180:this.$={stmt:"dir",value:"RL"};break;case 181:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,9:e,10:i,12:r},{1:[3]},t(s,n,{5:6}),{4:7,9:e,10:i,12:r},{4:8,9:e,10:i,12:r},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:C,84:R,85:A,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},t(s,[2,9]),t(s,[2,10]),t(s,[2,11]),{8:[1,54],9:[1,55],10:F,15:53,18:56},t(I,[2,3]),t(I,[2,4]),t(I,[2,5]),t(I,[2,6]),t(I,[2,7]),t(I,[2,8]),{8:M,9:z,11:st,21:58,39:59,70:63,73:[1,64],75:[1,65]},{8:M,9:z,11:st,21:66},{8:M,9:z,11:st,21:67},{8:M,9:z,11:st,21:68},{8:M,9:z,11:st,21:69},{8:M,9:z,11:st,21:70},{8:M,9:z,10:[1,71],11:st,21:72},t(I,[2,36]),{35:[1,73]},{37:[1,74]},t(I,[2,39]),t(j,[2,46],{18:75,10:F}),{10:[1,76]},{10:[1,77]},{10:[1,78]},{10:[1,79]},{14:dt,42:K,58:G,77:[1,83],86:tt,92:[1,80],94:[1,81],98:82,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},t(I,[2,178]),t(I,[2,179]),t(I,[2,180]),t(I,[2,181]),t(V,[2,47]),t(V,[2,49],{44:[1,96]}),t(vt,[2,67],{110:109,29:[1,97],42:y,46:[1,98],48:[1,99],50:[1,100],52:[1,101],54:[1,102],56:[1,103],58:x,61:[1,104],63:[1,105],65:[1,106],66:[1,107],68:[1,108],86:T,99:k,102:w,103:S,106:m,108:E,111:f,112:L,113:b}),t(X,[2,174]),t(X,[2,135]),t(X,[2,136]),t(X,[2,137]),t(X,[2,138]),t(X,[2,139]),t(X,[2,140]),t(X,[2,141]),t(X,[2,142]),t(X,[2,143]),t(X,[2,144]),t(X,[2,145]),t(s,[2,12]),t(s,[2,18]),t(s,[2,19]),{9:[1,110]},t(St,[2,26],{18:111,10:F}),t(I,[2,27]),{40:112,41:38,42:y,43:39,45:40,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},t(I,[2,40]),t(I,[2,41]),t(I,[2,42]),t(bt,[2,71],{71:113,60:[1,115],72:[1,114]}),{74:116,76:117,77:[1,118],78:[1,119],113:Vt,116:Bt},t([42,58,60,72,86,99,102,103,106,108,111,112,113],[2,77]),t(I,[2,28]),t(I,[2,29]),t(I,[2,30]),t(I,[2,31]),t(I,[2,32]),{10:Wt,12:pt,14:ut,27:ot,28:122,32:lt,42:ht,58:$,73:rt,77:[1,124],78:[1,125],80:135,81:it,82:ct,83:ee,84:Qt,85:de,86:zt,87:Gt,88:123,102:qt,106:Se,108:fe,111:lr,112:Ur,113:xe},t(jt,n,{5:148}),t(I,[2,37]),t(I,[2,38]),t(j,[2,45],{42:ie}),{42:y,45:150,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},{99:[1,151],100:152,102:[1,153]},{42:y,45:154,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},{42:y,45:155,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},t(Ot,[2,100],{10:[1,156],93:[1,157]}),{77:[1,158]},t(Ot,[2,108],{117:160,10:[1,159],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,110],{10:[1,161]}),t(Zt,[2,176]),t(Zt,[2,163]),t(Zt,[2,164]),t(Zt,[2,165]),t(Zt,[2,166]),t(Zt,[2,167]),t(Zt,[2,168]),t(Zt,[2,169]),t(Zt,[2,170]),t(Zt,[2,171]),t(Zt,[2,172]),t(Zt,[2,173]),{42:y,45:162,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},{30:163,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:171,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:173,48:[1,172],65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:174,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:175,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:176,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{106:[1,177]},{30:178,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:179,63:[1,180],65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:181,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:182,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:183,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(X,[2,175]),t(s,[2,20]),t(St,[2,25]),t(j,[2,43],{18:184,10:F}),t(bt,[2,68],{10:[1,185]}),{10:[1,186]},{30:187,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{75:[1,188],76:189,113:Vt,116:Bt},t(Ie,[2,73]),t(Ie,[2,75]),t(Ie,[2,76]),t(Ie,[2,161]),t(Ie,[2,162]),{8:M,9:z,10:Wt,11:st,12:pt,14:ut,21:191,27:ot,29:[1,190],32:lt,42:ht,58:$,73:rt,80:135,81:it,82:ct,83:ee,84:Qt,85:de,86:zt,87:Gt,88:192,102:qt,106:Se,108:fe,111:lr,112:Ur,113:xe},t(Xt,[2,94]),t(Xt,[2,96]),t(Xt,[2,97]),t(Xt,[2,150]),t(Xt,[2,151]),t(Xt,[2,152]),t(Xt,[2,153]),t(Xt,[2,154]),t(Xt,[2,155]),t(Xt,[2,156]),t(Xt,[2,157]),t(Xt,[2,158]),t(Xt,[2,159]),t(Xt,[2,160]),t(Xt,[2,83]),t(Xt,[2,84]),t(Xt,[2,85]),t(Xt,[2,86]),t(Xt,[2,87]),t(Xt,[2,88]),t(Xt,[2,89]),t(Xt,[2,90]),t(Xt,[2,91]),t(Xt,[2,92]),t(Xt,[2,93]),{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,193],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:C,84:R,85:A,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},{10:F,18:194},{10:[1,195],42:y,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:109,111:f,112:L,113:b},{10:[1,196]},{10:[1,197],103:[1,198]},t(nc,[2,121]),{10:[1,199],42:y,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:109,111:f,112:L,113:b},{10:[1,200],42:y,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:109,111:f,112:L,113:b},{77:[1,201]},t(Ot,[2,102],{10:[1,202]}),t(Ot,[2,104],{10:[1,203]}),{77:[1,204]},t(Zt,[2,177]),{77:[1,205],95:[1,206]},t(V,[2,50],{110:109,42:y,58:x,86:T,99:k,102:w,103:S,106:m,108:E,111:f,112:L,113:b}),{31:[1,207],65:Dt,79:208,113:Pt,114:Nt,115:It},t(cr,[2,79]),t(cr,[2,81]),t(cr,[2,82]),t(cr,[2,146]),t(cr,[2,147]),t(cr,[2,148]),t(cr,[2,149]),{47:[1,209],65:Dt,79:208,113:Pt,114:Nt,115:It},{30:210,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{49:[1,211],65:Dt,79:208,113:Pt,114:Nt,115:It},{51:[1,212],65:Dt,79:208,113:Pt,114:Nt,115:It},{53:[1,213],65:Dt,79:208,113:Pt,114:Nt,115:It},{55:[1,214],65:Dt,79:208,113:Pt,114:Nt,115:It},{58:[1,215]},{62:[1,216],65:Dt,79:208,113:Pt,114:Nt,115:It},{64:[1,217],65:Dt,79:208,113:Pt,114:Nt,115:It},{30:218,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{31:[1,219],65:Dt,79:208,113:Pt,114:Nt,115:It},{65:Dt,67:[1,220],69:[1,221],79:208,113:Pt,114:Nt,115:It},{65:Dt,67:[1,223],69:[1,222],79:208,113:Pt,114:Nt,115:It},t(j,[2,44],{42:ie}),t(bt,[2,70]),t(bt,[2,69]),{60:[1,224],65:Dt,79:208,113:Pt,114:Nt,115:It},t(bt,[2,72]),t(Ie,[2,74]),{30:225,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(jt,n,{5:226}),t(Xt,[2,95]),t(I,[2,35]),{41:227,42:y,43:39,45:40,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},{10:Pi,58:Mi,81:Vi,89:228,102:zi,104:229,105:230,106:qi,107:Wi,108:Yi,109:Ui},{10:Pi,58:Mi,81:Vi,89:239,101:[1,240],102:zi,104:229,105:230,106:qi,107:Wi,108:Yi,109:Ui},{10:Pi,58:Mi,81:Vi,89:241,101:[1,242],102:zi,104:229,105:230,106:qi,107:Wi,108:Yi,109:Ui},{102:[1,243]},{10:Pi,58:Mi,81:Vi,89:244,102:zi,104:229,105:230,106:qi,107:Wi,108:Yi,109:Ui},{42:y,45:245,58:x,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b},t(Ot,[2,101]),{77:[1,246]},{77:[1,247],95:[1,248]},t(Ot,[2,109]),t(Ot,[2,111],{10:[1,249]}),t(Ot,[2,112]),t(vt,[2,51]),t(cr,[2,80]),t(vt,[2,52]),{49:[1,250],65:Dt,79:208,113:Pt,114:Nt,115:It},t(vt,[2,59]),t(vt,[2,54]),t(vt,[2,55]),t(vt,[2,56]),{106:[1,251]},t(vt,[2,58]),t(vt,[2,60]),{64:[1,252],65:Dt,79:208,113:Pt,114:Nt,115:It},t(vt,[2,62]),t(vt,[2,63]),t(vt,[2,65]),t(vt,[2,64]),t(vt,[2,66]),t([10,42,58,86,99,102,103,106,108,111,112,113],[2,78]),{31:[1,253],65:Dt,79:208,113:Pt,114:Nt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,254],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:C,84:R,85:A,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},t(V,[2,48]),t(Ot,[2,114],{103:Hr}),t(ac,[2,123],{105:256,10:Pi,58:Mi,81:Vi,102:zi,106:qi,107:Wi,108:Yi,109:Ui}),t(Si,[2,125]),t(Si,[2,127]),t(Si,[2,128]),t(Si,[2,129]),t(Si,[2,130]),t(Si,[2,131]),t(Si,[2,132]),t(Si,[2,133]),t(Si,[2,134]),t(Ot,[2,115],{103:Hr}),{10:[1,257]},t(Ot,[2,116],{103:Hr}),{10:[1,258]},t(nc,[2,122]),t(Ot,[2,98],{103:Hr}),t(Ot,[2,99],{110:109,42:y,58:x,86:T,99:k,102:w,103:S,106:m,108:E,111:f,112:L,113:b}),t(Ot,[2,103]),t(Ot,[2,105],{10:[1,259]}),t(Ot,[2,106]),{95:[1,260]},{49:[1,261]},{60:[1,262]},{64:[1,263]},{8:M,9:z,11:st,21:264},t(I,[2,34]),{10:Pi,58:Mi,81:Vi,102:zi,104:265,105:230,106:qi,107:Wi,108:Yi,109:Ui},t(Si,[2,126]),{14:dt,42:K,58:G,86:tt,98:266,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},{14:dt,42:K,58:G,86:tt,98:267,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},{95:[1,268]},t(Ot,[2,113]),t(vt,[2,53]),{30:269,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(vt,[2,61]),t(jt,n,{5:270}),t(ac,[2,124],{105:256,10:Pi,58:Mi,81:Vi,102:zi,106:qi,107:Wi,108:Yi,109:Ui}),t(Ot,[2,119],{117:160,10:[1,271],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,120],{117:160,10:[1,272],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,107]),{31:[1,273],65:Dt,79:208,113:Pt,114:Nt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,274],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:C,84:R,85:A,86:T,99:k,102:w,103:S,106:m,108:E,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},{10:Pi,58:Mi,81:Vi,89:275,102:zi,104:229,105:230,106:qi,107:Wi,108:Yi,109:Ui},{10:Pi,58:Mi,81:Vi,89:276,102:zi,104:229,105:230,106:qi,107:Wi,108:Yi,109:Ui},t(vt,[2,57]),t(I,[2,33]),t(Ot,[2,117],{103:Hr}),t(Ot,[2,118],{103:Hr})],defaultActions:{},parseError:function(Et,Lt){if(Lt.recoverable)this.trace(Et);else{var Mt=new Error(Et);throw Mt.hash=Lt,Mt}},parse:function(Et){var Lt=this,Mt=[0],xt=[],re=[null],q=[],Ts=this.table,H="",ai=0,oc=0,Cf=2,lc=1,Ef=q.slice.call(arguments,1),we=Object.create(this.lexer),Cr={yy:{}};for(var qa in this.yy)Object.prototype.hasOwnProperty.call(this.yy,qa)&&(Cr.yy[qa]=this.yy[qa]);we.setInput(Et,Cr.yy),Cr.yy.lexer=we,Cr.yy.parser=this,typeof we.yylloc>"u"&&(we.yylloc={});var Wa=we.yylloc;q.push(Wa);var Sf=we.options&&we.options.ranges;typeof Cr.yy.parseError=="function"?this.parseError=Cr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function wf(){var Gi;return Gi=xt.pop()||we.lex()||lc,typeof Gi!="number"&&(Gi instanceof Array&&(xt=Gi,Gi=xt.pop()),Gi=Lt.symbols_[Gi]||Gi),Gi}for(var Xe,Er,oi,Ya,Gr={},mn,Hi,cc,xn;;){if(Er=Mt[Mt.length-1],this.defaultActions[Er]?oi=this.defaultActions[Er]:((Xe===null||typeof Xe>"u")&&(Xe=wf()),oi=Ts[Er]&&Ts[Er][Xe]),typeof oi>"u"||!oi.length||!oi[0]){var Ua="";xn=[];for(mn in Ts[Er])this.terminals_[mn]&&mn>Cf&&xn.push("'"+this.terminals_[mn]+"'");we.showPosition?Ua="Parse error on line "+(ai+1)+`:
`+we.showPosition()+`
Expecting `+xn.join(", ")+", got '"+(this.terminals_[Xe]||Xe)+"'":Ua="Parse error on line "+(ai+1)+": Unexpected "+(Xe==lc?"end of input":"'"+(this.terminals_[Xe]||Xe)+"'"),this.parseError(Ua,{text:we.match,token:this.terminals_[Xe]||Xe,line:we.yylineno,loc:Wa,expected:xn})}if(oi[0]instanceof Array&&oi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Er+", token: "+Xe);switch(oi[0]){case 1:Mt.push(Xe),re.push(we.yytext),q.push(we.yylloc),Mt.push(oi[1]),Xe=null,oc=we.yyleng,H=we.yytext,ai=we.yylineno,Wa=we.yylloc;break;case 2:if(Hi=this.productions_[oi[1]][1],Gr.$=re[re.length-Hi],Gr._$={first_line:q[q.length-(Hi||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(Hi||1)].first_column,last_column:q[q.length-1].last_column},Sf&&(Gr._$.range=[q[q.length-(Hi||1)].range[0],q[q.length-1].range[1]]),Ya=this.performAction.apply(Gr,[H,oc,ai,Cr.yy,oi[1],re,q].concat(Ef)),typeof Ya<"u")return Ya;Hi&&(Mt=Mt.slice(0,-1*Hi*2),re=re.slice(0,-1*Hi),q=q.slice(0,-1*Hi)),Mt.push(this.productions_[oi[1]][0]),re.push(Gr.$),q.push(Gr._$),cc=Ts[Mt[Mt.length-2]][Mt[Mt.length-1]],Mt.push(cc);break;case 3:return!0}}return!0}},Tf=function(){var hr={EOF:1,parseError:function(Lt,Mt){if(this.yy.parser)this.yy.parser.parseError(Lt,Mt);else throw new Error(Lt)},setInput:function(Et,Lt){return this.yy=Lt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var Lt=Et.match(/(?:\r\n?|\n).*/g);return Lt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var Lt=Et.length,Mt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Lt),this.offset-=Lt;var xt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Mt.length-1&&(this.yylineno-=Mt.length-1);var re=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Mt?(Mt.length===xt.length?this.yylloc.first_column:0)+xt[xt.length-Mt.length].length-Mt[0].length:this.yylloc.first_column-Lt},this.options.ranges&&(this.yylloc.range=[re[0],re[0]+this.yyleng-Lt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),Lt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+Lt+"^"},test_match:function(Et,Lt){var Mt,xt,re;if(this.options.backtrack_lexer&&(re={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(re.yylloc.range=this.yylloc.range.slice(0))),xt=Et[0].match(/(?:\r\n?|\n).*/g),xt&&(this.yylineno+=xt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xt?xt[xt.length-1].length-xt[xt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Mt=this.performAction.call(this,this.yy,this,Lt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Mt)return Mt;if(this._backtrack){for(var q in re)this[q]=re[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,Lt,Mt,xt;this._more||(this.yytext="",this.match="");for(var re=this._currentRules(),q=0;q<re.length;q++)if(Mt=this._input.match(this.rules[re[q]]),Mt&&(!Lt||Mt[0].length>Lt[0].length)){if(Lt=Mt,xt=q,this.options.backtrack_lexer){if(Et=this.test_match(Mt,re[q]),Et!==!1)return Et;if(this._backtrack){Lt=!1;continue}else return!1}else if(!this.options.flex)break}return Lt?(Et=this.test_match(Lt,re[xt]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Lt=this.next();return Lt||this.lex()},begin:function(Lt){this.conditionStack.push(Lt)},popState:function(){var Lt=this.conditionStack.length-1;return Lt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Lt){return Lt=this.conditionStack.length-1-Math.abs(Lt||0),Lt>=0?this.conditionStack[Lt]:"INITIAL"},pushState:function(Lt){this.begin(Lt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Lt,Mt,xt,re){switch(xt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:this.begin("callbackname");break;case 8:this.popState();break;case 9:this.popState(),this.begin("callbackargs");break;case 10:return 92;case 11:this.popState();break;case 12:return 93;case 13:return"MD_STR";case 14:this.popState();break;case 15:this.begin("md_string");break;case 16:return"STR";case 17:this.popState();break;case 18:this.pushState("string");break;case 19:return 81;case 20:return 99;case 21:return 82;case 22:return 101;case 23:return 83;case 24:return 84;case 25:return 94;case 26:this.begin("click");break;case 27:this.popState();break;case 28:return 85;case 29:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 30:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 31:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 32:return 27;case 33:return 32;case 34:return 95;case 35:return 95;case 36:return 95;case 37:return 95;case 38:return this.popState(),13;case 39:return this.popState(),14;case 40:return this.popState(),14;case 41:return this.popState(),14;case 42:return this.popState(),14;case 43:return this.popState(),14;case 44:return this.popState(),14;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return 118;case 50:return 119;case 51:return 120;case 52:return 121;case 53:return 102;case 54:return 108;case 55:return 44;case 56:return 58;case 57:return 42;case 58:return 8;case 59:return 103;case 60:return 112;case 61:return this.popState(),75;case 62:return this.pushState("edgeText"),73;case 63:return 116;case 64:return this.popState(),75;case 65:return this.pushState("thickEdgeText"),73;case 66:return 116;case 67:return this.popState(),75;case 68:return this.pushState("dottedEdgeText"),73;case 69:return 116;case 70:return 75;case 71:return this.popState(),51;case 72:return"TEXT";case 73:return this.pushState("ellipseText"),50;case 74:return this.popState(),53;case 75:return this.pushState("text"),52;case 76:return this.popState(),55;case 77:return this.pushState("text"),54;case 78:return 56;case 79:return this.pushState("text"),65;case 80:return this.popState(),62;case 81:return this.pushState("text"),61;case 82:return this.popState(),47;case 83:return this.pushState("text"),46;case 84:return this.popState(),67;case 85:return this.popState(),69;case 86:return 114;case 87:return this.pushState("trapText"),66;case 88:return this.pushState("trapText"),68;case 89:return 115;case 90:return 65;case 91:return 87;case 92:return"SEP";case 93:return 86;case 94:return 112;case 95:return 108;case 96:return 42;case 97:return 106;case 98:return 111;case 99:return 113;case 100:return this.popState(),60;case 101:return this.pushState("text"),60;case 102:return this.popState(),49;case 103:return this.pushState("text"),48;case 104:return this.popState(),31;case 105:return this.pushState("text"),29;case 106:return this.popState(),64;case 107:return this.pushState("text"),63;case 108:return"TEXT";case 109:return"QUOTE";case 110:return 9;case 111:return 10;case 112:return 11}},rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{callbackargs:{rules:[11,12,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},callbackname:{rules:[8,9,10,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},href:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},click:{rules:[15,18,27,28,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dottedEdgeText:{rules:[15,18,67,69,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},thickEdgeText:{rules:[15,18,64,66,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},edgeText:{rules:[15,18,61,63,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},trapText:{rules:[15,18,70,73,75,77,81,83,84,85,86,87,88,101,103,105,107],inclusive:!1},ellipseText:{rules:[15,18,70,71,72,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},text:{rules:[15,18,70,73,74,75,76,77,80,81,82,83,87,88,100,101,102,103,104,105,106,107,108],inclusive:!1},vertex:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dir:{rules:[15,18,38,39,40,41,42,43,44,45,46,47,48,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr_multiline:{rules:[5,6,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr:{rules:[3,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_title:{rules:[1,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},md_string:{rules:[13,14,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},string:{rules:[15,16,17,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},INITIAL:{rules:[0,2,4,7,15,18,19,20,21,22,23,24,25,26,29,30,31,32,33,34,35,36,37,49,50,51,52,53,54,55,56,57,58,59,60,61,62,64,65,67,68,70,73,75,77,78,79,81,83,87,88,89,90,91,92,93,94,95,96,97,98,99,101,103,105,107,109,110,111,112],inclusive:!0}}};return hr}();Va.lexer=Tf;function za(){this.yy={}}return za.prototype=Va,Va.Parser=za,new za}();fo.parser=fo;const xl=fo,r4="flowchart-";let qc=0,ds=Y(),Kt={},bi=[],Qr={},sr=[],Zn={},Jn={},Dn=0,po=!0,hi,Sa,wa=[];const va=t=>mt.sanitizeText(t,ds),hn=function(t){const e=Object.keys(Kt);for(const i of e)if(Kt[i].id===t)return Kt[i].domId;return t},ku=function(t,e,i,r,s,n,a={}){let o,l=t;l!==void 0&&l.trim().length!==0&&(Kt[l]===void 0&&(Kt[l]={id:l,labelType:"text",domId:r4+l+"-"+qc,styles:[],classes:[]}),qc++,e!==void 0?(ds=Y(),o=va(e.text.trim()),Kt[l].labelType=e.type,o[0]==='"'&&o[o.length-1]==='"'&&(o=o.substring(1,o.length-1)),Kt[l].text=o):Kt[l].text===void 0&&(Kt[l].text=t),i!==void 0&&(Kt[l].type=i),r?.forEach(function(h){Kt[l].styles.push(h)}),s?.forEach(function(h){Kt[l].classes.push(h)}),n!==void 0&&(Kt[l].dir=n),Kt[l].props===void 0?Kt[l].props=a:a!==void 0&&Object.assign(Kt[l].props,a))},_u=function(t,e,i){const n={start:t,end:e,type:void 0,text:"",labelType:"text"};B.info("abc78 Got edge...",n);const a=i.text;if(a!==void 0&&(n.text=va(a.text.trim()),n.text[0]==='"'&&n.text[n.text.length-1]==='"'&&(n.text=n.text.substring(1,n.text.length-1)),n.labelType=a.type),i!==void 0&&(n.type=i.type,n.stroke=i.stroke,n.length=i.length),n?.length>10&&(n.length=10),bi.length<(ds.maxEdges??500))B.info("abc78 pushing edge..."),bi.push(n);else throw new Error(`Edge limit exceeded. ${bi.length} edges found, but the limit is ${ds.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)},Tu=function(t,e,i){B.info("addLink (abc78)",t,e,i);let r,s;for(r=0;r<t.length;r++)for(s=0;s<e.length;s++)_u(t[r],e[s],i)},Cu=function(t,e){t.forEach(function(i){i==="default"?bi.defaultInterpolate=e:bi[i].interpolate=e})},Eu=function(t,e){t.forEach(function(i){if(i>=bi.length)throw new Error(`The index ${i} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${bi.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);i==="default"?bi.defaultStyle=e:(Rt.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),bi[i].style=e)})},Su=function(t,e){t.split(",").forEach(function(i){Qr[i]===void 0&&(Qr[i]={id:i,styles:[],textStyles:[]}),e?.forEach(function(r){if(r.match("color")){const s=r.replace("fill","bgFill").replace("color","fill");Qr[i].textStyles.push(s)}Qr[i].styles.push(r)})})},wu=function(t){hi=t,hi.match(/.*</)&&(hi="RL"),hi.match(/.*\^/)&&(hi="BT"),hi.match(/.*>/)&&(hi="LR"),hi.match(/.*v/)&&(hi="TB"),hi==="TD"&&(hi="TB")},Aa=function(t,e){t.split(",").forEach(function(i){let r=i;Kt[r]!==void 0&&Kt[r].classes.push(e),Zn[r]!==void 0&&Zn[r].classes.push(e)})},s4=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Jn[Sa==="gen-1"?hn(i):i]=va(e))})},n4=function(t,e,i){let r=hn(t);if(Y().securityLevel!=="loose"||e===void 0)return;let s=[];if(typeof i=="string"){s=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<s.length;n++){let a=s[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),s[n]=a}}s.length===0&&s.push(t),Kt[t]!==void 0&&(Kt[t].haveCallback=!0,wa.push(function(){const n=document.querySelector(`[id="${r}"]`);n!==null&&n.addEventListener("click",function(){Rt.runFunc(e,...s)},!1)}))},vu=function(t,e,i){t.split(",").forEach(function(r){Kt[r]!==void 0&&(Kt[r].link=Rt.formatUrl(e,ds),Kt[r].linkTarget=i)}),Aa(t,"clickable")},Au=function(t){if(Jn.hasOwnProperty(t))return Jn[t]},Lu=function(t,e,i){t.split(",").forEach(function(r){n4(r,e,i)}),Aa(t,"clickable")},Bu=function(t){wa.forEach(function(e){e(t)})},Iu=function(){return hi.trim()},Du=function(){return Kt},Fu=function(){return bi},Ru=function(){return Qr},Nu=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.bottom+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};wa.push(Nu);const Ou=function(t="gen-1"){Kt={},Qr={},bi=[],wa=[Nu],sr=[],Zn={},Dn=0,Jn={},po=!0,Sa=t,ds=Y(),Pe()},Pu=t=>{Sa=t||"gen-2"},Mu=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},Vu=function(t,e,i){let r=t.text.trim(),s=i.text;t===i&&i.text.match(/\s/)&&(r=void 0);function n(u){const p={boolean:{},number:{},string:{}},d=[];let g;return{nodeList:u.filter(function(x){const _=typeof x;return x.stmt&&x.stmt==="dir"?(g=x.value,!1):x.trim()===""?!1:_ in p?p[_].hasOwnProperty(x)?!1:p[_][x]=!0:d.includes(x)?!1:d.push(x)}),dir:g}}let a=[];const{nodeList:o,dir:l}=n(a.concat.apply(a,e));if(a=o,Sa==="gen-1")for(let u=0;u<a.length;u++)a[u]=hn(a[u]);r=r||"subGraph"+Dn,s=s||"",s=va(s),Dn=Dn+1;const h={id:r,nodes:a,title:s.trim(),classes:[],dir:l,labelType:i.type};return B.info("Adding",h.id,h.nodes,h.dir),h.nodes=Xu(h,sr).nodes,sr.push(h),Zn[r]=h,r},a4=function(t){for(const[e,i]of sr.entries())if(i.id===t)return e;return-1};let Ss=-1;const zu=[],qu=function(t,e){const i=sr[e].nodes;if(Ss=Ss+1,Ss>2e3)return;if(zu[Ss]=e,sr[e].id===t)return{result:!0,count:0};let r=0,s=1;for(;r<i.length;){const n=a4(i[r]);if(n>=0){const a=qu(t,n);if(a.result)return{result:!0,count:s+a.count};s=s+a.count}r=r+1}return{result:!1,count:s}},Wu=function(t){return zu[t]},Yu=function(){Ss=-1,sr.length>0&&qu("none",sr.length-1)},Uu=function(){return sr},Hu=()=>po?(po=!1,!0):!1,o4=t=>{let e=t.trim(),i="arrow_open";switch(e[0]){case"<":i="arrow_point",e=e.slice(1);break;case"x":i="arrow_cross",e=e.slice(1);break;case"o":i="arrow_circle",e=e.slice(1);break}let r="normal";return e.includes("=")&&(r="thick"),e.includes(".")&&(r="dotted"),{type:i,stroke:r}},l4=(t,e)=>{const i=e.length;let r=0;for(let s=0;s<i;++s)e[s]===t&&++r;return r},c4=t=>{const e=t.trim();let i=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,i=i.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,i=i.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,i=i.slice(1));break}let s="normal",n=i.length-1;i[0]==="="&&(s="thick"),i[0]==="~"&&(s="invisible");let a=l4(".",i);return a&&(s="dotted",n=a),{type:r,stroke:s,length:n}},Gu=(t,e)=>{const i=c4(t);let r;if(e){if(r=o4(e),r.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=i.type;else{if(r.type!==i.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=i.length,r}return i},ju=(t,e)=>{let i=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(i=!0)}),i},Xu=(t,e)=>{const i=[];return t.nodes.forEach((r,s)=>{ju(e,r)||i.push(t.nodes[s])}),{nodes:i}},$u={firstGraph:Hu},Br={defaultConfig:()=>N1.flowchart,setAccTitle:Me,getAccTitle:Ue,getAccDescription:Ge,setAccDescription:He,addVertex:ku,lookUpDomId:hn,addLink:Tu,updateLinkInterpolate:Cu,updateLink:Eu,addClass:Su,setDirection:wu,setClass:Aa,setTooltip:s4,getTooltip:Au,setClickEvent:Lu,setLink:vu,bindFunctions:Bu,getDirection:Iu,getVertices:Du,getEdges:Fu,getClasses:Ru,clear:Ou,setGen:Pu,defaultStyle:Mu,addSubGraph:Vu,getDepthFirstPos:Wu,indexNodes:Yu,getSubGraphs:Uu,destructLink:Gu,lex:$u,exists:ju,makeUniq:Xu,setDiagramTitle:si,getDiagramTitle:je},h4=Object.freeze(Object.defineProperty({__proto__:null,addClass:Su,addLink:Tu,addSingleLink:_u,addSubGraph:Vu,addVertex:ku,bindFunctions:Bu,clear:Ou,default:Br,defaultStyle:Mu,destructLink:Gu,firstGraph:Hu,getClasses:Ru,getDepthFirstPos:Wu,getDirection:Iu,getEdges:Fu,getSubGraphs:Uu,getTooltip:Au,getVertices:Du,indexNodes:Yu,lex:$u,lookUpDomId:hn,setClass:Aa,setClickEvent:Lu,setDirection:wu,setGen:Pu,setLink:vu,updateLink:Eu,updateLinkInterpolate:Cu},Symbol.toStringTag,{value:"Module"}));function u4(t){const e=t.replace(/\n{2,}/g,`
`);return Yh(e)}function d4(t){const e=u4(t),{children:i}=Uh(e),r=[[]];let s=0;function n(a,o="normal"){a.type==="text"?a.value.split(`
`).forEach((h,u)=>{u!==0&&(s++,r.push([])),h.split(" ").forEach(p=>{p&&r[s].push({content:p,type:o})})}):(a.type==="strong"||a.type==="emphasis")&&a.children.forEach(l=>{n(l,a.type)})}return i.forEach(a=>{a.type==="paragraph"&&a.children.forEach(o=>{n(o)})}),r}function f4(t){const{children:e}=Uh(t);function i(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(i).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(i).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(i).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(i).join("")}function p4(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}function g4(t,e){const i=p4(e.content);return Ku(t,[],i,e.type)}function Ku(t,e,i,r){if(i.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[s,...n]=i,a=[...e,s];return t([{content:a.join(""),type:r}])?Ku(t,a,n,r):(e.length===0&&s&&(e.push(s),i.shift()),[{content:e.join(""),type:r},{content:i.join(""),type:r}])}function y4(t,e){if(t.some(({content:i})=>i.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return go(t,e)}function go(t,e,i=[],r=[]){if(t.length===0)return r.length>0&&i.push(r),i.length>0?i:[];let s="";t[0].content===" "&&(s=" ",t.shift());const n=t.shift()??{content:" ",type:"normal"},a=[...r];if(s!==""&&a.push({content:s,type:"normal"}),a.push(n),e(a))return go(t,e,i,a);if(r.length>0)i.push(r),t.unshift(n);else if(n.content){const[o,l]=g4(e,n);i.push([o]),l.content&&t.unshift(l)}return go(t,e,i)}function m4(t,e){e&&t.attr("style",e)}function x4(t,e,i,r,s=!1){const n=t.append("foreignObject"),a=n.append("xhtml:div"),o=e.label,l=e.isNode?"nodeLabel":"edgeLabel";a.html(`
    <span class="${l} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>"),m4(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",i+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&a.attr("class","labelBkg");let h=a.node().getBoundingClientRect();return h.width===i&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",i+"px"),h=a.node().getBoundingClientRect()),n.style("width",h.width),n.style("height",h.height),n.node()}function bl(t,e,i){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*i-.1+"em").attr("dy",i+"em")}function b4(t,e,i){const r=t.append("text"),s=bl(r,1,e);kl(s,i);const n=s.node().getComputedTextLength();return r.remove(),n}function k4(t,e,i){var r;const s=t.append("text"),n=bl(s,1,e);kl(n,[{content:i,type:"normal"}]);const a=(r=n.node())==null?void 0:r.getBoundingClientRect();return a&&s.remove(),a}function _4(t,e,i,r=!1){const n=e.append("g"),a=n.insert("rect").attr("class","background"),o=n.append("text").attr("y","-10.1");let l=0;for(const h of i){const u=d=>b4(n,1.1,d)<=t,p=u(h)?[h]:y4(h,u);for(const d of p){const g=bl(o,l,1.1);kl(g,d),l++}}if(r){const h=o.node().getBBox(),u=2;return a.attr("x",-u).attr("y",-u).attr("width",h.width+2*u).attr("height",h.height+2*u),n.node()}else return o.node()}function kl(t,e){t.text(""),e.forEach((i,r)=>{const s=t.append("tspan").attr("font-style",i.type==="emphasis"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",i.type==="strong"?"bold":"normal");r===0?s.text(i.content):s.text(" "+i.content)})}const La=(t,e="",{style:i="",isTitle:r=!1,classes:s="",useHtmlLabels:n=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={})=>{if(B.info("createText",e,i,r,s,n,a,l),n){const h=f4(e),u={isNode:a,label:qs(h).replace(/fa[blrs]?:fa-[\w-]+/g,d=>`<i class='${d.replace(":"," ")}'></i>`),labelStyle:i.replace("fill:","color:")};return x4(t,u,o,s,l)}else{const h=d4(e);return _4(o,t,h,l)}},T4=(t,e,i,r)=>{e.forEach(s=>{D4[s](t,i,r)})},C4=(t,e,i)=>{B.trace("Making markers for ",i),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},E4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},S4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},w4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},v4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},A4=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},L4=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},B4=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},I4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},D4={extension:C4,composition:E4,aggregation:S4,dependency:w4,lollipop:v4,point:A4,circle:L4,cross:B4,barb:I4},_l=T4;function F4(t,e){e&&t.attr("style",e)}function R4(t){const e=yt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=e.append("xhtml:div"),r=t.label,s=t.isNode?"nodeLabel":"edgeLabel";return i.html('<span class="'+s+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),F4(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const N4=(t,e,i,r)=>{let s=t||"";if(typeof s=="object"&&(s=s[0]),Ce(Y().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),B.debug("vertexText"+s);const n={isNode:r,label:qs(s).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return R4(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",e.replace("color:","fill:"));let a=[];typeof s=="string"?a=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?a=s:a=[];for(const o of a){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),i?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),n.appendChild(l)}return n}},Qe=N4,Ee=async(t,e,i,r)=>{let s;const n=e.useHtmlLabels||Ce(Y().flowchart.htmlLabels);i?s=i:s="node default";const a=t.insert("g").attr("class",s).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let l;e.labelText===void 0?l="":l=typeof e.labelText=="string"?e.labelText:e.labelText[0];const h=o.node();let u;e.labelType==="markdown"?u=La(o,ue(qs(l),Y()),{useHtmlLabels:n,width:e.width||Y().flowchart.wrappingWidth,classes:"markdown-node-label"}):u=h.appendChild(Qe(ue(qs(l),Y()),e.labelStyle,!1,r));let p=u.getBBox();const d=e.padding/2;if(Ce(Y().flowchart.htmlLabels)){const g=u.children[0],y=yt(u),x=g.getElementsByTagName("img");if(x){const _=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...x].map(v=>new Promise(C=>{function R(){if(v.style.display="flex",v.style.flexDirection="column",_){const A=Y().fontSize?Y().fontSize:window.getComputedStyle(document.body).fontSize,T=5,k=parseInt(A,10)*T+"px";v.style.minWidth=k,v.style.maxWidth=k}else v.style.width="100%";C(v)}setTimeout(()=>{v.complete&&R()}),v.addEventListener("error",R),v.addEventListener("load",R)})))}p=g.getBoundingClientRect(),y.attr("width",p.width),y.attr("height",p.height)}return n?o.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):o.attr("transform","translate(0, "+-p.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:a,bbox:p,halfPadding:d,label:o}},ae=(t,e)=>{const i=e.node().getBBox();t.width=i.width,t.height=i.height};function Oi(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+i/2+")")}function O4(t,e){return t.intersect(e)}function Qu(t,e,i,r){var s=t.x,n=t.y,a=s-r.x,o=n-r.y,l=Math.sqrt(e*e*o*o+i*i*a*a),h=Math.abs(e*i*a/l);r.x<s&&(h=-h);var u=Math.abs(e*i*o/l);return r.y<n&&(u=-u),{x:s+h,y:n+u}}function P4(t,e,i){return Qu(t,e,e,i)}function M4(t,e,i,r){var s,n,a,o,l,h,u,p,d,g,y,x,_,v,C;if(s=e.y-t.y,a=t.x-e.x,l=e.x*t.y-t.x*e.y,d=s*i.x+a*i.y+l,g=s*r.x+a*r.y+l,!(d!==0&&g!==0&&Wc(d,g))&&(n=r.y-i.y,o=i.x-r.x,h=r.x*i.y-i.x*r.y,u=n*t.x+o*t.y+h,p=n*e.x+o*e.y+h,!(u!==0&&p!==0&&Wc(u,p))&&(y=s*o-n*a,y!==0)))return x=Math.abs(y/2),_=a*h-o*l,v=_<0?(_-x)/y:(_+x)/y,_=n*l-s*h,C=_<0?(_-x)/y:(_+x)/y,{x:v,y:C}}function Wc(t,e){return t*e>0}function V4(t,e,i){var r=t.x,s=t.y,n=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(y){a=Math.min(a,y.x),o=Math.min(o,y.y)}):(a=Math.min(a,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-a,h=s-t.height/2-o,u=0;u<e.length;u++){var p=e[u],d=e[u<e.length-1?u+1:0],g=M4(t,i,{x:l+p.x,y:h+p.y},{x:l+d.x,y:h+d.y});g&&n.push(g)}return n.length?(n.length>1&&n.sort(function(y,x){var _=y.x-i.x,v=y.y-i.y,C=Math.sqrt(_*_+v*v),R=x.x-i.x,A=x.y-i.y,T=Math.sqrt(R*R+A*A);return C<T?-1:C===T?0:1}),n[0]):t}const z4=(t,e)=>{var i=t.x,r=t.y,s=e.x-i,n=e.y-r,a=t.width/2,o=t.height/2,l,h;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),l=n===0?0:o*s/n,h=o):(s<0&&(a=-a),l=a,h=s===0?0:a*n/s),{x:i+l,y:r+h}},un=z4,te={node:O4,circle:P4,ellipse:Qu,polygon:V4,rect:un},q4=async(t,e)=>{e.useHtmlLabels||Y().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:s,halfPadding:n}=await Ee(t,e,"node "+e.classes,!0);B.info("Classes = ",e.classes);const a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-s.width/2-n).attr("y",-s.height/2-n).attr("width",s.width+e.padding).attr("height",s.height+e.padding),ae(e,a),e.intersect=function(o){return te.rect(e,o)},r},W4=q4,Y4=t=>{const e=new Set;for(const i of t)switch(i){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(i);break}return e},U4=(t,e,i)=>{const r=Y4(t),s=2,n=e.height+2*i.padding,a=n/s,o=e.width+2*a+i.padding,l=i.padding/2;return r.has("right")&&r.has("left")&&r.has("up")&&r.has("down")?[{x:0,y:0},{x:a,y:0},{x:o/2,y:2*l},{x:o-a,y:0},{x:o,y:0},{x:o,y:-n/3},{x:o+2*l,y:-n/2},{x:o,y:-2*n/3},{x:o,y:-n},{x:o-a,y:-n},{x:o/2,y:-n-2*l},{x:a,y:-n},{x:0,y:-n},{x:0,y:-2*n/3},{x:-2*l,y:-n/2},{x:0,y:-n/3}]:r.has("right")&&r.has("left")&&r.has("up")?[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}]:r.has("right")&&r.has("left")&&r.has("down")?[{x:0,y:0},{x:a,y:-n},{x:o-a,y:-n},{x:o,y:0}]:r.has("right")&&r.has("up")&&r.has("down")?[{x:0,y:0},{x:o,y:-a},{x:o,y:-n+a},{x:0,y:-n}]:r.has("left")&&r.has("up")&&r.has("down")?[{x:o,y:0},{x:0,y:-a},{x:0,y:-n+a},{x:o,y:-n}]:r.has("right")&&r.has("left")?[{x:a,y:0},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n},{x:0,y:-n/2}]:r.has("up")&&r.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:a,y:-l},{x:a,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l},{x:o,y:-l}]:r.has("right")&&r.has("up")?[{x:0,y:0},{x:o,y:-a},{x:0,y:-n}]:r.has("right")&&r.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-n}]:r.has("left")&&r.has("up")?[{x:o,y:0},{x:0,y:-a},{x:o,y:-n}]:r.has("left")&&r.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-n}]:r.has("right")?[{x:a,y:-l},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n+l}]:r.has("left")?[{x:a,y:0},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n},{x:0,y:-n/2}]:r.has("up")?[{x:a,y:-l},{x:a,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l}]:r.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:a,y:-l},{x:a,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l},{x:o,y:-l}]:[{x:0,y:0}]},Yc=t=>t?" "+t:"",ni=(t,e)=>`${e||"node default"}${Yc(t.classes)} ${Yc(t.class)}`,Uc=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=s+n,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];B.info("Question main (Circle)");const l=Oi(i,a,a,o);return l.attr("style",e.style),ae(e,l),e.intersect=function(h){return B.warn("Intersect called"),te.polygon(e,o,h)},i},H4=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,s=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return i.insert("polygon",":first-child").attr("points",s.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return te.circle(e,14,a)},i},G4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=4,n=r.height+e.padding,a=n/s,o=r.width+2*a+e.padding,l=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],h=Oi(i,o,n,l);return h.attr("style",e.style),ae(e,h),e.intersect=function(u){return te.polygon(e,l,u)},i},j4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,void 0,!0),s=2,n=r.height+2*e.padding,a=n/s,o=r.width+2*a+e.padding,l=U4(e.directions,r,e),h=Oi(i,o,n,l);return h.attr("style",e.style),ae(e,h),e.intersect=function(u){return te.polygon(e,l,u)},i},X4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return Oi(i,s,n,a).attr("style",e.style),e.width=s+n,e.height=n,e.intersect=function(l){return te.polygon(e,a,l)},i},$4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],o=Oi(i,s,n,a);return o.attr("style",e.style),ae(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},K4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],o=Oi(i,s,n,a);return o.attr("style",e.style),ae(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},Q4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],o=Oi(i,s,n,a);return o.attr("style",e.style),ae(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},Z4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],o=Oi(i,s,n,a);return o.attr("style",e.style),ae(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},J4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],o=Oi(i,s,n,a);return o.attr("style",e.style),ae(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},tb=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=s/2,a=n/(2.5+s/50),o=r.height+a+e.padding,l="M 0,"+a+" a "+n+","+a+" 0,0,0 "+s+" 0 a "+n+","+a+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+a+" 0,0,0 "+s+" 0 l 0,"+-o,h=i.attr("label-offset-y",a).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-s/2+","+-(o/2+a)+")");return ae(e,h),e.intersect=function(u){const p=te.rect(e,u),d=p.x-e.x;if(n!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(p.y-e.y)>e.height/2-a)){let g=a*a*(1-d*d/(n*n));g!=0&&(g=Math.sqrt(g)),g=a-g,u.y-e.y>0&&(g=-g),p.y+=g}return p},i},eb=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,"node "+e.classes+" "+e.class,!0),n=i.insert("rect",":first-child"),a=e.positioned?e.width:r.width+e.padding,o=e.positioned?e.height:r.height+e.padding,l=e.positioned?-a/2:-r.width/2-s,h=e.positioned?-o/2:-r.height/2-s;if(n.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",h).attr("width",a).attr("height",o),e.props){const u=new Set(Object.keys(e.props));e.props.borders&&(Tl(n,e.props.borders,a,o),u.delete("borders")),u.forEach(p=>{B.warn(`Unknown node property ${p}`)})}return ae(e,n),e.intersect=function(u){return te.rect(e,u)},i},ib=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,"node "+e.classes,!0),n=i.insert("rect",":first-child"),a=e.positioned?e.width:r.width+e.padding,o=e.positioned?e.height:r.height+e.padding,l=e.positioned?-a/2:-r.width/2-s,h=e.positioned?-o/2:-r.height/2-s;if(n.attr("class","basic cluster composite label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",h).attr("width",a).attr("height",o),e.props){const u=new Set(Object.keys(e.props));e.props.borders&&(Tl(n,e.props.borders,a,o),u.delete("borders")),u.forEach(p=>{B.warn(`Unknown node property ${p}`)})}return ae(e,n),e.intersect=function(u){return te.rect(e,u)},i},rb=async(t,e)=>{const{shapeSvg:i}=await Ee(t,e,"label",!0);B.trace("Classes = ",e.class);const r=i.insert("rect",":first-child"),s=0,n=0;if(r.attr("width",s).attr("height",n),i.attr("class","label edgeLabel"),e.props){const a=new Set(Object.keys(e.props));e.props.borders&&(Tl(r,e.props.borders,s,n),a.delete("borders")),a.forEach(o=>{B.warn(`Unknown node property ${o}`)})}return ae(e,r),e.intersect=function(a){return te.rect(e,a)},i};function Tl(t,e,i,r){const s=[],n=o=>{s.push(o,0)},a=o=>{s.push(0,o)};e.includes("t")?(B.debug("add top border"),n(i)):a(i),e.includes("r")?(B.debug("add right border"),n(r)):a(r),e.includes("b")?(B.debug("add bottom border"),n(i)):a(i),e.includes("l")?(B.debug("add left border"),n(r)):a(r),t.attr("stroke-dasharray",s.join(" "))}const sb=(t,e)=>{let i;e.classes?i="node "+e.classes:i="node default";const r=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=r.insert("rect",":first-child"),n=r.insert("line"),a=r.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof o=="object"?l=o[0]:l=o,B.info("Label text abc79",l,o,typeof o=="object");const h=a.node().appendChild(Qe(l,e.labelStyle,!0,!0));let u={width:0,height:0};if(Ce(Y().flowchart.htmlLabels)){const x=h.children[0],_=yt(h);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}B.info("Text 2",o);const p=o.slice(1,o.length);let d=h.getBBox();const g=a.node().appendChild(Qe(p.join?p.join("<br/>"):p,e.labelStyle,!0,!0));if(Ce(Y().flowchart.htmlLabels)){const x=g.children[0],_=yt(g);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}const y=e.padding/2;return yt(g).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),yt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")"),s.attr("class","outer title-state").attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+e.padding).attr("height",u.height+e.padding),n.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y),ae(e,s),e.intersect=function(x){return te.rect(e,x)},r},nb=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.height+e.padding,n=r.width+s/4+e.padding,a=i.insert("rect",":first-child").attr("style",e.style).attr("rx",s/2).attr("ry",s/2).attr("x",-n/2).attr("y",-s/2).attr("width",n).attr("height",s);return ae(e,a),e.intersect=function(o){return te.rect(e,o)},i},ab=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,ni(e,void 0),!0),n=i.insert("circle",":first-child");return n.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),B.info("Circle main"),ae(e,n),e.intersect=function(a){return B.info("Circle intersect",e,r.width/2+s,a),te.circle(e,r.width/2+s,a)},i},ob=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,ni(e,void 0),!0),n=5,a=i.insert("g",":first-child"),o=a.insert("circle"),l=a.insert("circle");return a.attr("class",e.class),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s+n).attr("width",r.width+e.padding+n*2).attr("height",r.height+e.padding+n*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),B.info("DoubleCircle main"),ae(e,o),e.intersect=function(h){return B.info("DoubleCircle intersect",e,r.width/2+s+n,h),te.circle(e,r.width/2+s+n,h)},i},lb=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,ni(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s,y:0},{x:s,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],o=Oi(i,s,n,a);return o.attr("style",e.style),ae(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},cb=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),ae(e,r),e.intersect=function(s){return te.circle(e,7,s)},i},Hc=(t,e,i)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s=70,n=10;i==="LR"&&(s=10,n=70);const a=r.append("rect").attr("x",-1*s/2).attr("y",-1*n/2).attr("width",s).attr("height",n).attr("class","fork-join");return ae(e,a),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return te.rect(e,o)},r},hb=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child"),s=i.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),ae(e,s),e.intersect=function(n){return te.circle(e,7,n)},i},ub=(t,e)=>{const i=e.padding/2,r=4,s=8;let n;e.classes?n="node "+e.classes:n="node default";const a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=a.insert("rect",":first-child"),l=a.insert("line"),h=a.insert("line");let u=0,p=r;const d=a.insert("g").attr("class","label");let g=0;const y=e.classData.annotations&&e.classData.annotations[0],x=e.classData.annotations[0]?""+e.classData.annotations[0]+"":"",_=d.node().appendChild(Qe(x,e.labelStyle,!0,!0));let v=_.getBBox();if(Ce(Y().flowchart.htmlLabels)){const S=_.children[0],m=yt(_);v=S.getBoundingClientRect(),m.attr("width",v.width),m.attr("height",v.height)}e.classData.annotations[0]&&(p+=v.height+r,u+=v.width);let C=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(Y().flowchart.htmlLabels?C+="&lt;"+e.classData.type+"&gt;":C+="<"+e.classData.type+">");const R=d.node().appendChild(Qe(C,e.labelStyle,!0,!0));yt(R).attr("class","classTitle");let A=R.getBBox();if(Ce(Y().flowchart.htmlLabels)){const S=R.children[0],m=yt(R);A=S.getBoundingClientRect(),m.attr("width",A.width),m.attr("height",A.height)}p+=A.height+r,A.width>u&&(u=A.width);const T=[];e.classData.members.forEach(S=>{const m=S.getDisplayDetails();let E=m.displayText;Y().flowchart.htmlLabels&&(E=E.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const f=d.node().appendChild(Qe(E,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let L=f.getBBox();if(Ce(Y().flowchart.htmlLabels)){const b=f.children[0],P=yt(f);L=b.getBoundingClientRect(),P.attr("width",L.width),P.attr("height",L.height)}L.width>u&&(u=L.width),p+=L.height+r,T.push(f)}),p+=s;const k=[];if(e.classData.methods.forEach(S=>{const m=S.getDisplayDetails();let E=m.displayText;Y().flowchart.htmlLabels&&(E=E.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const f=d.node().appendChild(Qe(E,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let L=f.getBBox();if(Ce(Y().flowchart.htmlLabels)){const b=f.children[0],P=yt(f);L=b.getBoundingClientRect(),P.attr("width",L.width),P.attr("height",L.height)}L.width>u&&(u=L.width),p+=L.height+r,k.push(f)}),p+=s,y){let S=(u-v.width)/2;yt(_).attr("transform","translate( "+(-1*u/2+S)+", "+-1*p/2+")"),g=v.height+r}let w=(u-A.width)/2;return yt(R).attr("transform","translate( "+(-1*u/2+w)+", "+(-1*p/2+g)+")"),g+=A.height+r,l.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-p/2-i+s+g).attr("y2",-p/2-i+s+g),g+=s,T.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*p/2+g+s/2)+")");const m=S?.getBBox();g+=(m?.height??0)+r}),g+=s,h.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-p/2-i+s+g).attr("y2",-p/2-i+s+g),g+=s,k.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*p/2+g)+")");const m=S?.getBBox();g+=(m?.height??0)+r}),o.attr("style",e.style).attr("class","outer title-state").attr("x",-u/2-i).attr("y",-(p/2)-i).attr("width",u+e.padding).attr("height",p+e.padding),ae(e,o),e.intersect=function(S){return te.rect(e,S)},a},Gc={rhombus:Uc,composite:ib,question:Uc,rect:eb,labelRect:rb,rectWithTitle:sb,choice:H4,circle:ab,doublecircle:ob,stadium:nb,hexagon:G4,block_arrow:j4,rect_left_inv_arrow:X4,lean_right:$4,lean_left:K4,trapezoid:Q4,inv_trapezoid:Z4,rect_right_inv_arrow:J4,cylinder:tb,start:cb,end:hb,note:W4,subroutine:lb,fork:Hc,join:Hc,class_box:ub};let es={};const Ba=async(t,e,i)=>{let r,s;if(e.link){let n;Y().securityLevel==="sandbox"?n="_top":e.linkTarget&&(n=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",n),s=await Gc[e.shape](r,e,i)}else s=await Gc[e.shape](t,e,i),r=s;return e.tooltip&&s.attr("title",e.tooltip),e.class&&s.attr("class","node default "+e.class),r.attr("data-node","true"),r.attr("data-id",e.id),es[e.id]=r,e.haveCallback&&es[e.id].attr("class",es[e.id].attr("class")+" clickable"),r},db=(t,e)=>{es[e.id]=t},fb=()=>{es={}},yo=t=>{const e=es[t.id];B.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const i=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-i)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},Ia=({flowchart:t})=>{var e,i;const r=((e=t?.subGraphTitleMargin)==null?void 0:e.top)??0,s=((i=t?.subGraphTitleMargin)==null?void 0:i.bottom)??0,n=r+s;return{subGraphTitleTopMargin:r,subGraphTitleBottomMargin:s,subGraphTitleTotalMargin:n}},ur={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function _n(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=ta(t),e=ta(e);const[i,r]=[t.x,t.y],[s,n]=[e.x,e.y],a=s-i,o=n-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}const ta=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,Zu=t=>({x:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(ur,t.arrowTypeStart)){const{angle:n,deltaX:a}=_n(r[0],r[1]);s=ur[t.arrowTypeStart]*Math.cos(n)*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(ur,t.arrowTypeEnd)){const{angle:n,deltaX:a}=_n(r[r.length-1],r[r.length-2]);s=ur[t.arrowTypeEnd]*Math.cos(n)*(a>=0?1:-1)}return ta(e).x+s},y:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(ur,t.arrowTypeStart)){const{angle:n,deltaY:a}=_n(r[0],r[1]);s=ur[t.arrowTypeStart]*Math.abs(Math.sin(n))*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(ur,t.arrowTypeEnd)){const{angle:n,deltaY:a}=_n(r[r.length-1],r[r.length-2]);s=ur[t.arrowTypeEnd]*Math.abs(Math.sin(n))*(a>=0?1:-1)}return ta(e).y+s}}),Ju=(t,e,i,r,s)=>{e.arrowTypeStart&&jc(t,"start",e.arrowTypeStart,i,r,s),e.arrowTypeEnd&&jc(t,"end",e.arrowTypeEnd,i,r,s)},pb={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},jc=(t,e,i,r,s,n)=>{const a=pb[i];if(!a){B.warn(`Unknown arrow type: ${i}`);return}const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${r}#${s}_${n}-${a}${o})`)};let ea={},Be={};const gb=()=>{ea={},Be={}},Cl=(t,e)=>{const i=Ce(Y().flowchart.htmlLabels),r=e.labelType==="markdown"?La(t,e.label,{style:e.labelStyle,useHtmlLabels:i,addSvgBackground:!0}):Qe(e.label,e.labelStyle),s=t.insert("g").attr("class","edgeLabel"),n=s.insert("g").attr("class","label");n.node().appendChild(r);let a=r.getBBox();if(i){const l=r.children[0],h=yt(r);a=l.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),ea[e.id]=s,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const l=Qe(e.startLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),Be[e.id]||(Be[e.id]={}),Be[e.id].startLeft=h,Tn(o,e.startLabelLeft)}if(e.startLabelRight){const l=Qe(e.startLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=h.node().appendChild(l),u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),Be[e.id]||(Be[e.id]={}),Be[e.id].startRight=h,Tn(o,e.startLabelRight)}if(e.endLabelLeft){const l=Qe(e.endLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(l),Be[e.id]||(Be[e.id]={}),Be[e.id].endLeft=h,Tn(o,e.endLabelLeft)}if(e.endLabelRight){const l=Qe(e.endLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(l),Be[e.id]||(Be[e.id]={}),Be[e.id].endRight=h,Tn(o,e.endLabelRight)}return r};function Tn(t,e){Y().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const t0=(t,e)=>{B.debug("Moving label abc88 ",t.id,t.label,ea[t.id],e);let i=e.updatedPath?e.updatedPath:e.originalPath;const r=Y(),{subGraphTitleTotalMargin:s}=Ia(r);if(t.label){const n=ea[t.id];let a=t.x,o=t.y;if(i){const l=Rt.calcLabelPosition(i);B.debug("Moving label "+t.label+" from (",a,",",o,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(a=l.x,o=l.y)}n.attr("transform",`translate(${a}, ${o+s/2})`)}if(t.startLabelLeft){const n=Be[t.id].startLeft;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.startLabelRight){const n=Be[t.id].startRight;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.endLabelLeft){const n=Be[t.id].endLeft;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.endLabelRight){const n=Be[t.id].endRight;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}},yb=(t,e)=>{const i=t.x,r=t.y,s=Math.abs(e.x-i),n=Math.abs(e.y-r),a=t.width/2,o=t.height/2;return s>=a||n>=o},mb=(t,e,i)=>{B.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,s=t.y,n=Math.abs(r-i.x),a=t.width/2;let o=i.x<e.x?a-n:a+n;const l=t.height/2,h=Math.abs(e.y-i.y),u=Math.abs(e.x-i.x);if(Math.abs(s-e.y)*a>Math.abs(r-e.x)*l){let p=i.y<e.y?e.y-l-s:s-l-e.y;o=u*p/h;const d={x:i.x<e.x?i.x+o:i.x-u+o,y:i.y<e.y?i.y+h-p:i.y-h+p};return o===0&&(d.x=e.x,d.y=e.y),u===0&&(d.x=e.x),h===0&&(d.y=e.y),B.debug(`abc89 topp/bott calc, Q ${h}, q ${p}, R ${u}, r ${o}`,d),d}else{i.x<e.x?o=e.x-a-r:o=r-a-e.x;let p=h*o/u,d=i.x<e.x?i.x+u-o:i.x-u+o,g=i.y<e.y?i.y+p:i.y-p;return B.debug(`sides calc abc89, Q ${h}, q ${p}, R ${u}, r ${o}`,{_x:d,_y:g}),o===0&&(d=e.x,g=e.y),u===0&&(d=e.x),h===0&&(g=e.y),{x:d,y:g}}},Xc=(t,e)=>{B.debug("abc88 cutPathAtIntersect",t,e);let i=[],r=t[0],s=!1;return t.forEach(n=>{if(!yb(e,n)&&!s){const a=mb(e,r,n);let o=!1;i.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),i.some(l=>l.x===a.x&&l.y===a.y)||i.push(a),s=!0}else r=n,s||i.push(n)}),i},e0=function(t,e,i,r,s,n,a){let o=i.points;B.debug("abc88 InsertEdge: edge=",i,"e=",e);let l=!1;const h=n.node(e.v);var u=n.node(e.w);u?.intersect&&h?.intersect&&(o=o.slice(1,i.points.length-1),o.unshift(h.intersect(o[0])),o.push(u.intersect(o[o.length-1]))),i.toCluster&&(B.debug("to cluster abc88",r[i.toCluster]),o=Xc(i.points,r[i.toCluster].node),l=!0),i.fromCluster&&(B.debug("from cluster abc88",r[i.fromCluster]),o=Xc(o.reverse(),r[i.fromCluster].node).reverse(),l=!0);const p=o.filter(A=>!Number.isNaN(A.y));let d=an;i.curve&&(s==="graph"||s==="flowchart")&&(d=i.curve);const{x:g,y}=Zu(i),x=xr().x(g).y(y).curve(d);let _;switch(i.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-thick";break;default:_=""}switch(i.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break}const v=t.append("path").attr("d",x(p)).attr("id",i.id).attr("class"," "+_+(i.classes?" "+i.classes:"")).attr("style",i.style);let C="";(Y().flowchart.arrowMarkerAbsolute||Y().state.arrowMarkerAbsolute)&&(C=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,C=C.replace(/\(/g,"\\("),C=C.replace(/\)/g,"\\)")),Ju(v,i,C,a,s);let R={};return l&&(R.updatedPath=o),R.originalPath=i.points,R};let Ft={},ki={},i0={};const xb=()=>{ki={},i0={},Ft={}},ia=(t,e)=>(B.trace("In isDescendant",e," ",t," = ",ki[e].includes(t)),!!ki[e].includes(t)),bb=(t,e)=>(B.info("Descendants of ",e," is ",ki[e]),B.info("Edge is ",t),t.v===e||t.w===e?!1:ki[e]?ki[e].includes(t.v)||ia(t.v,e)||ia(t.w,e)||ki[e].includes(t.w):(B.debug("Tilt, ",e,",not in descendants"),!1)),r0=(t,e,i,r)=>{B.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const s=e.children(t)||[];t!==r&&s.push(t),B.warn("Copying (nodes) clusterId",t,"nodes",s),s.forEach(n=>{if(e.children(n).length>0)r0(n,e,i,r);else{const a=e.node(n);B.info("cp ",n," to ",r," with parent ",t),i.setNode(n,a),r!==e.parent(n)&&(B.warn("Setting parent",n,e.parent(n)),i.setParent(n,e.parent(n))),t!==r&&n!==t?(B.debug("Setting parent",n,t),i.setParent(n,t)):(B.info("In copy ",t,"root",r,"data",e.node(t),r),B.debug("Not Setting parent for node=",n,"cluster!==rootId",t!==r,"node!==clusterId",n!==t));const o=e.edges(n);B.debug("Copying Edges",o),o.forEach(l=>{B.info("Edge",l);const h=e.edge(l.v,l.w,l.name);B.info("Edge data",h,r);try{bb(l,r)?(B.info("Copying as ",l.v,l.w,h,l.name),i.setEdge(l.v,l.w,h,l.name),B.info("newGraph edges ",i.edges(),i.edge(i.edges()[0]))):B.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(u){B.error(u)}})}B.debug("Removing node",n),e.removeNode(n)})},s0=(t,e)=>{const i=e.children(t);let r=[...i];for(const s of i)i0[s]=t,r=[...r,...s0(s,e)];return r},Us=(t,e)=>{B.trace("Searching",t);const i=e.children(t);if(B.trace("Searching children of id ",t,i),i.length<1)return B.trace("This is a valid node",t),t;for(const r of i){const s=Us(r,e);if(s)return B.trace("Found replacement for",t," => ",s),s}},Cn=t=>!Ft[t]||!Ft[t].externalConnections?t:Ft[t]?Ft[t].id:t,kb=(t,e)=>{if(!t||e>10){B.debug("Opting out, no graph ");return}else B.debug("Opting in, graph ");t.nodes().forEach(function(i){t.children(i).length>0&&(B.warn("Cluster identified",i," Replacement id in edges: ",Us(i,t)),ki[i]=s0(i,t),Ft[i]={id:Us(i,t),clusterData:t.node(i)})}),t.nodes().forEach(function(i){const r=t.children(i),s=t.edges();r.length>0?(B.debug("Cluster identified",i,ki),s.forEach(n=>{if(n.v!==i&&n.w!==i){const a=ia(n.v,i),o=ia(n.w,i);a^o&&(B.warn("Edge: ",n," leaves cluster ",i),B.warn("Descendants of XXX ",i,": ",ki[i]),Ft[i].externalConnections=!0)}})):B.debug("Not a cluster ",i,ki)});for(let i of Object.keys(Ft)){const r=Ft[i].id,s=t.parent(r);s!==i&&Ft[s]&&!Ft[s].externalConnections&&(Ft[i].id=s)}t.edges().forEach(function(i){const r=t.edge(i);B.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(i)),B.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(t.edge(i)));let s=i.v,n=i.w;if(B.warn("Fix XXX",Ft,"ids:",i.v,i.w,"Translating: ",Ft[i.v]," --- ",Ft[i.w]),Ft[i.v]&&Ft[i.w]&&Ft[i.v]===Ft[i.w]){B.warn("Fixing and trixing link to self - removing XXX",i.v,i.w,i.name),B.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=Cn(i.v),n=Cn(i.w),t.removeEdge(i.v,i.w,i.name);const a=i.w+"---"+i.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const o=structuredClone(r),l=structuredClone(r);o.label="",o.arrowTypeEnd="none",l.label="",o.fromCluster=i.v,l.toCluster=i.v,t.setEdge(s,a,o,i.name+"-cyclic-special"),t.setEdge(a,n,l,i.name+"-cyclic-special")}else if(Ft[i.v]||Ft[i.w]){if(B.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=Cn(i.v),n=Cn(i.w),t.removeEdge(i.v,i.w,i.name),s!==i.v){const a=t.parent(s);Ft[a].externalConnections=!0,r.fromCluster=i.v}if(n!==i.w){const a=t.parent(n);Ft[a].externalConnections=!0,r.toCluster=i.w}B.warn("Fix Replacing with XXX",s,n,i.name),t.setEdge(s,n,r,i.name)}}),B.warn("Adjusted Graph",Zi(t)),n0(t,0),B.trace(Ft)},n0=(t,e)=>{if(B.warn("extractor - ",e,Zi(t),t.children("D")),e>10){B.error("Bailing out");return}let i=t.nodes(),r=!1;for(const s of i){const n=t.children(s);r=r||n.length>0}if(!r){B.debug("Done, no node has children",t.nodes());return}B.debug("Nodes = ",i,e);for(const s of i)if(B.debug("Extracting node",s,Ft,Ft[s]&&!Ft[s].externalConnections,!t.parent(s),t.node(s),t.children("D")," Depth ",e),!Ft[s])B.debug("Not a cluster",s,e);else if(!Ft[s].externalConnections&&t.children(s)&&t.children(s).length>0){B.warn("Cluster without external connections, without a parent and with children",s,e);let a=t.graph().rankdir==="TB"?"LR":"TB";Ft[s]&&Ft[s].clusterData&&Ft[s].clusterData.dir&&(a=Ft[s].clusterData.dir,B.warn("Fixing dir",Ft[s].clusterData.dir,a));const o=new Ni({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});B.warn("Old graph before copy",Zi(t)),r0(s,t,o,s),t.setNode(s,{clusterNode:!0,id:s,clusterData:Ft[s].clusterData,labelText:Ft[s].labelText,graph:o}),B.warn("New graph after copy node: (",s,")",Zi(o)),B.debug("Old graph after copy",Zi(t))}else B.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!Ft[s].externalConnections," no parent: ",!t.parent(s)," children ",t.children(s)&&t.children(s).length>0,t.children("D"),e),B.debug(Ft);i=t.nodes(),B.warn("New list of nodes",i);for(const s of i){const n=t.node(s);B.warn(" Now next level",s,n),n.clusterNode&&n0(n.graph,e+1)}},a0=(t,e)=>{if(e.length===0)return[];let i=Object.assign(e);return e.forEach(r=>{const s=t.children(r),n=a0(t,s);i=[...i,...n]}),i},_b=t=>a0(t,t.children()),Tb=(t,e)=>{B.info("Creating subgraph rect for ",e.id,e);const i=Y(),r=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),s=r.insert("rect",":first-child"),n=Ce(i.flowchart.htmlLabels),a=r.insert("g").attr("class","cluster-label"),o=e.labelType==="markdown"?La(a,e.labelText,{style:e.labelStyle,useHtmlLabels:n}):a.node().appendChild(Qe(e.labelText,e.labelStyle,void 0,!0));let l=o.getBBox();if(Ce(i.flowchart.htmlLabels)){const y=o.children[0],x=yt(o);l=y.getBoundingClientRect(),x.attr("width",l.width),x.attr("height",l.height)}const h=0*e.padding,u=h/2,p=e.width<=l.width+h?l.width+h:e.width;e.width<=l.width+h?e.diff=(l.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,B.trace("Data ",e,JSON.stringify(e)),s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-p/2).attr("y",e.y-e.height/2-u).attr("width",p).attr("height",e.height+h);const{subGraphTitleTopMargin:d}=Ia(i);n?a.attr("transform",`translate(${e.x-l.width/2}, ${e.y-e.height/2+d})`):a.attr("transform",`translate(${e.x}, ${e.y-e.height/2+d})`);const g=s.node().getBBox();return e.width=g.width,e.height=g.height,e.intersect=function(y){return un(e,y)},r},Cb=(t,e)=>{const i=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+s).attr("height",e.height+s).attr("fill","none");const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.intersect=function(o){return un(e,o)},i},Eb=(t,e)=>{const i=Y(),r=t.insert("g").attr("class",e.classes).attr("id",e.id),s=r.insert("rect",":first-child"),n=r.insert("g").attr("class","cluster-label"),a=r.append("rect"),o=n.node().appendChild(Qe(e.labelText,e.labelStyle,void 0,!0));let l=o.getBBox();if(Ce(i.flowchart.htmlLabels)){const y=o.children[0],x=yt(o);l=y.getBoundingClientRect(),x.attr("width",l.width),x.attr("height",l.height)}l=o.getBBox();const h=0*e.padding,u=h/2,p=e.width<=l.width+e.padding?l.width+e.padding:e.width;e.width<=l.width+e.padding?e.diff=(l.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,s.attr("class","outer").attr("x",e.x-p/2-u).attr("y",e.y-e.height/2-u).attr("width",p+h).attr("height",e.height+h),a.attr("class","inner").attr("x",e.x-p/2-u).attr("y",e.y-e.height/2-u+l.height-1).attr("width",p+h).attr("height",e.height+h-l.height-3);const{subGraphTitleTopMargin:d}=Ia(i);n.attr("transform",`translate(${e.x-l.width/2}, ${e.y-e.height/2-e.padding/3+(Ce(i.flowchart.htmlLabels)?5:3)+d})`);const g=s.node().getBBox();return e.height=g.height,e.intersect=function(y){return un(e,y)},r},Sb=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("class","divider").attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2).attr("width",e.width+s).attr("height",e.height+s);const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.diff=-e.padding/2,e.intersect=function(o){return un(e,o)},i},wb={rect:Tb,roundedWithTitle:Eb,noteGroup:Cb,divider:Sb};let o0={};const vb=(t,e)=>{B.trace("Inserting cluster");const i=e.shape||"rect";o0[e.id]=wb[i](t,e)},Ab=()=>{o0={}},l0=async(t,e,i,r,s,n)=>{B.info("Graph in recursive render: XXX",Zi(e),s);const a=e.graph().rankdir;B.trace("Dir in recursive render - dir:",a);const o=t.insert("g").attr("class","root");e.nodes()?B.info("Recursive render XXX",e.nodes()):B.info("No nodes found for",e),e.edges().length>0&&B.trace("Recursive edges",e.edge(e.edges()[0]));const l=o.insert("g").attr("class","clusters"),h=o.insert("g").attr("class","edgePaths"),u=o.insert("g").attr("class","edgeLabels"),p=o.insert("g").attr("class","nodes");await Promise.all(e.nodes().map(async function(y){const x=e.node(y);if(s!==void 0){const _=JSON.parse(JSON.stringify(s.clusterData));B.info("Setting data for cluster XXX (",y,") ",_,s),e.setNode(s.id,_),e.parent(y)||(B.trace("Setting parent",y,s.id),e.setParent(y,s.id,_))}if(B.info("(Insert) Node XXX"+y+": "+JSON.stringify(e.node(y))),x&&x.clusterNode){B.info("Cluster identified",y,x.width,e.node(y));const _=await l0(p,x.graph,i,r,e.node(y),n),v=_.elem;ae(x,v),x.diff=_.diff||0,B.info("Node bounds (abc123)",y,x,x.width,x.x,x.y),db(v,x),B.warn("Recursive render complete ",v,x)}else e.children(y).length>0?(B.info("Cluster - the non recursive path XXX",y,x.id,x,e),B.info(Us(x.id,e)),Ft[x.id]={id:Us(x.id,e),node:x}):(B.info("Node - the non recursive path",y,x.id,x),await Ba(p,e.node(y),a))})),e.edges().forEach(function(y){const x=e.edge(y.v,y.w,y.name);B.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(y)),B.info("Edge "+y.v+" -> "+y.w+": ",y," ",JSON.stringify(e.edge(y))),B.info("Fix",Ft,"ids:",y.v,y.w,"Translating: ",Ft[y.v],Ft[y.w]),Cl(u,x)}),e.edges().forEach(function(y){B.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(y))}),B.info("#############################################"),B.info("###                Layout                 ###"),B.info("#############################################"),B.info(e),nn(e),B.info("Graph after layout:",Zi(e));let d=0;const{subGraphTitleTotalMargin:g}=Ia(n);return _b(e).forEach(function(y){const x=e.node(y);B.info("Position "+y+": "+JSON.stringify(e.node(y))),B.info("Position "+y+": ("+x.x,","+x.y,") width: ",x.width," height: ",x.height),x&&x.clusterNode?(x.y+=g,yo(x)):e.children(y).length>0?(x.height+=g,vb(l,x),Ft[x.id].node=x):(x.y+=g/2,yo(x))}),e.edges().forEach(function(y){const x=e.edge(y);B.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(x),x),x.points.forEach(v=>v.y+=g/2);const _=e0(h,y,x,Ft,i,e,r);t0(x,_)}),e.nodes().forEach(function(y){const x=e.node(y);B.info(y,x.type,x.diff),x.type==="group"&&(d=x.diff)}),{elem:o,diff:d}},El=async(t,e,i,r,s)=>{_l(t,i,r,s),fb(),gb(),Ab(),xb(),B.warn("Graph at first:",JSON.stringify(Zi(e))),kb(e),B.warn("Graph after:",JSON.stringify(Zi(e)));const n=Y();await l0(t,e,r,s,void 0,n)},c0={},Lb=function(t){const e=Object.keys(t);for(const i of e)c0[i]=t[i]},h0=async function(t,e,i,r,s,n){const a=r.select(`[id="${i}"]`),o=Object.keys(t);for(const l of o){const h=t[l];let u="default";h.classes.length>0&&(u=h.classes.join(" ")),u=u+" flowchart-label";const p=ri(h.styles);let d=h.text!==void 0?h.text:h.id,g;if(B.info("vertex",h,h.labelType),h.labelType==="markdown")B.info("vertex",h,h.labelType);else if(Ce(Y().flowchart.htmlLabels))g=Mh(a,{label:d}).node(),g.parentNode.removeChild(g);else{const v=s.createElementNS("http://www.w3.org/2000/svg","text");v.setAttribute("style",p.labelStyle.replace("color:","fill:"));const C=d.split(mt.lineBreakRegex);for(const R of C){const A=s.createElementNS("http://www.w3.org/2000/svg","tspan");A.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),A.setAttribute("dy","1em"),A.setAttribute("x","1"),A.textContent=R,v.appendChild(A)}g=v}let y=0,x="";switch(h.type){case"round":y=5,x="rect";break;case"square":x="rect";break;case"diamond":x="question";break;case"hexagon":x="hexagon";break;case"odd":x="rect_left_inv_arrow";break;case"lean_right":x="lean_right";break;case"lean_left":x="lean_left";break;case"trapezoid":x="trapezoid";break;case"inv_trapezoid":x="inv_trapezoid";break;case"odd_right":x="rect_left_inv_arrow";break;case"circle":x="circle";break;case"ellipse":x="ellipse";break;case"stadium":x="stadium";break;case"subroutine":x="subroutine";break;case"cylinder":x="cylinder";break;case"group":x="rect";break;case"doublecircle":x="doublecircle";break;default:x="rect"}const _=await zr(d,Y());e.setNode(h.id,{labelStyle:p.labelStyle,shape:x,labelText:_,labelType:h.labelType,rx:y,ry:y,class:u,style:p.style,id:h.id,link:h.link,linkTarget:h.linkTarget,tooltip:n.db.getTooltip(h.id)||"",domId:n.db.lookUpDomId(h.id),haveCallback:h.haveCallback,width:h.type==="group"?500:void 0,dir:h.dir,type:h.type,props:h.props,padding:Y().flowchart.padding}),B.info("setNode",{labelStyle:p.labelStyle,labelType:h.labelType,shape:x,labelText:_,rx:y,ry:y,class:u,style:p.style,id:h.id,domId:n.db.lookUpDomId(h.id),width:h.type==="group"?500:void 0,type:h.type,dir:h.dir,props:h.props,padding:Y().flowchart.padding})}},u0=async function(t,e,i){B.info("abc78 edges = ",t);let r=0,s={},n,a;if(t.defaultStyle!==void 0){const o=ri(t.defaultStyle);n=o.style,a=o.labelStyle}for(const o of t){r++;const l="L-"+o.start+"-"+o.end;s[l]===void 0?(s[l]=0,B.info("abc78 new entry",l,s[l])):(s[l]++,B.info("abc78 new entry",l,s[l]));let h=l+"-"+s[l];B.info("abc78 new link id to be used is",l,h,s[l]);const u="LS-"+o.start,p="LE-"+o.end,d={style:"",labelStyle:""};switch(d.minlen=o.length||1,o.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",o.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let g="",y="";switch(o.stroke){case"normal":g="fill:none;",n!==void 0&&(g=n),a!==void 0&&(y=a),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(o.style!==void 0){const x=ri(o.style);g=x.style,y=x.labelStyle}d.style=d.style+=g,d.labelStyle=d.labelStyle+=y,o.interpolate!==void 0?d.curve=fi(o.interpolate,ii):t.defaultInterpolate!==void 0?d.curve=fi(t.defaultInterpolate,ii):d.curve=fi(c0.curve,ii),o.text===void 0?o.style!==void 0&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType=o.labelType,d.label=await zr(o.text.replace(mt.lineBreakRegex,`
`),Y()),o.style===void 0&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=h,d.classes="flowchart-link "+u+" "+p,e.setEdge(o.start,o.end,d,r)}},Bb=function(t,e){return e.db.getClasses()},Ib=async function(t,e,i,r){B.info("Drawing flowchart");let s=r.db.getDirection();s===void 0&&(s="TD");const{securityLevel:n,flowchart:a}=Y(),o=a.nodeSpacing||50,l=a.rankSpacing||50;let h;n==="sandbox"&&(h=yt("#i"+e));const u=n==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body"),p=n==="sandbox"?h.nodes()[0].contentDocument:document,d=new Ni({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:o,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let g;const y=r.db.getSubGraphs();B.info("Subgraphs - ",y);for(let T=y.length-1;T>=0;T--)g=y[T],B.info("Subgraph - ",g),r.db.addVertex(g.id,{text:g.title,type:g.labelType},"group",void 0,g.classes,g.dir);const x=r.db.getVertices(),_=r.db.getEdges();B.info("Edges",_);let v=0;for(v=y.length-1;v>=0;v--){g=y[v],Ph("cluster").append("text");for(let T=0;T<g.nodes.length;T++)B.info("Setting up subgraphs",g.nodes[T],g.id),d.setParent(g.nodes[T],g.id)}await h0(x,d,e,u,p,r),await u0(_,d);const C=u.select(`[id="${e}"]`),R=u.select("#"+e+" g");if(await El(R,d,["point","circle","cross"],"flowchart",e),Rt.insertTitle(C,"flowchartTitleText",a.titleTopMargin,r.db.getDiagramTitle()),_r(d,C,a.diagramPadding,a.useMaxWidth),r.db.indexNodes("subGraph"+v),!a.htmlLabels){const T=p.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const k of T){const w=k.getBBox(),S=p.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",w.width),S.setAttribute("height",w.height),k.insertBefore(S,k.firstChild)}}Object.keys(x).forEach(function(T){const k=x[T];if(k.link){const w=yt("#"+e+' [id="'+T+'"]');if(w){const S=p.createElementNS("http://www.w3.org/2000/svg","a");S.setAttributeNS("http://www.w3.org/2000/svg","class",k.classes.join(" ")),S.setAttributeNS("http://www.w3.org/2000/svg","href",k.link),S.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),n==="sandbox"?S.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):k.linkTarget&&S.setAttributeNS("http://www.w3.org/2000/svg","target",k.linkTarget);const m=w.insert(function(){return S},":first-child"),E=w.select(".label-container");E&&m.append(function(){return E.node()});const f=w.select(".label");f&&m.append(function(){return f.node()})}}})},mo={setConf:Lb,addVertices:h0,addEdges:u0,getClasses:Bb,draw:Ib},Db=(t,e)=>{const i=zh,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return Jr(r,s,n,e)},Fb=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }

  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${Db(t.edgeLabelBackground,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,d0=Fb;function f0(t,e,i){const r=e.width,s=e.height,n=(r+s)*.9,a=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],o=ar(t,n,n,a);return i.intersect=function(l){return nr(i,a,l)},o}function p0(t,e,i){const s=e.height,n=s/4,a=e.width+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-s/2},{x:a-n,y:-s},{x:n,y:-s},{x:0,y:-s/2}],l=ar(t,a,s,o);return i.intersect=function(h){return nr(i,o,h)},l}function g0(t,e,i){const r=e.width,s=e.height,n=[{x:-s/2,y:0},{x:r,y:0},{x:r,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function y0(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:s/6,y:-s}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function m0(t,e,i){const r=e.width,s=e.height,n=[{x:2*s/6,y:0},{x:r+s/6,y:0},{x:r-2*s/6,y:-s},{x:-s/6,y:-s}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function x0(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r+2*s/6,y:0},{x:r-s/6,y:-s},{x:s/6,y:-s}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function b0(t,e,i){const r=e.width,s=e.height,n=[{x:s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:-2*s/6,y:-s}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function k0(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r+s/2,y:0},{x:r,y:-s/2},{x:r+s/2,y:-s},{x:0,y:-s}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function _0(t,e,i){const r=e.height,s=e.width+r/4,n=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-s/2).attr("y",-r/2).attr("width",s).attr("height",r);return i.intersect=function(a){return Vh(i,a)},n}function T0(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r,y:0},{x:r,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],a=ar(t,r,s,n);return i.intersect=function(o){return nr(i,n,o)},a}function C0(t,e,i){const r=e.width,s=r/2,n=s/(2.5+r/50),a=e.height+n,o="M 0,"+n+" a "+s+","+n+" 0,0,0 "+r+" 0 a "+s+","+n+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+s+","+n+" 0,0,0 "+r+" 0 l 0,"+-a,l=t.attr("label-offset-y",n).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(a/2+n)+")");return i.intersect=function(h){const u=Vh(i,h),p=u.x-i.x;if(s!=0&&(Math.abs(p)<i.width/2||Math.abs(p)==i.width/2&&Math.abs(u.y-i.y)>i.height/2-n)){let d=n*n*(1-p*p/(s*s));d!=0&&(d=Math.sqrt(d)),d=n-d,h.y-i.y>0&&(d=-d),u.y+=d}return u},l}function Rb(t){t.shapes().question=f0,t.shapes().hexagon=p0,t.shapes().stadium=_0,t.shapes().subroutine=T0,t.shapes().cylinder=C0,t.shapes().rect_left_inv_arrow=g0,t.shapes().lean_right=y0,t.shapes().lean_left=m0,t.shapes().trapezoid=x0,t.shapes().inv_trapezoid=b0,t.shapes().rect_right_inv_arrow=k0}function Nb(t){t({question:f0}),t({hexagon:p0}),t({stadium:_0}),t({subroutine:T0}),t({cylinder:C0}),t({rect_left_inv_arrow:g0}),t({lean_right:y0}),t({lean_left:m0}),t({trapezoid:x0}),t({inv_trapezoid:b0}),t({rect_right_inv_arrow:k0})}function ar(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("transform","translate("+-e/2+","+i/2+")")}const Ob={addToRender:Rb,addToRenderV2:Nb},E0={},Pb=function(t){const e=Object.keys(t);for(const i of e)E0[i]=t[i]},S0=async function(t,e,i,r,s,n){const a=r?r.select(`[id="${i}"]`):yt(`[id="${i}"]`),o=s||document,l=Object.keys(t);for(const h of l){const u=t[h];let p="default";u.classes.length>0&&(p=u.classes.join(" "));const d=ri(u.styles);let g=u.text!==void 0?u.text:u.id,y;if(Ce(Y().flowchart.htmlLabels)){const v={label:await zr(g.replace(/fa[blrs]?:fa-[\w-]+/g,C=>`<i class='${C.replace(":"," ")}'></i>`),Y())};y=Mh(a,v).node(),y.parentNode.removeChild(y)}else{const v=o.createElementNS("http://www.w3.org/2000/svg","text");v.setAttribute("style",d.labelStyle.replace("color:","fill:"));const C=g.split(mt.lineBreakRegex);for(const R of C){const A=o.createElementNS("http://www.w3.org/2000/svg","tspan");A.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),A.setAttribute("dy","1em"),A.setAttribute("x","1"),A.textContent=R,v.appendChild(A)}y=v}let x=0,_="";switch(u.type){case"round":x=5,_="rect";break;case"square":_="rect";break;case"diamond":_="question";break;case"hexagon":_="hexagon";break;case"odd":_="rect_left_inv_arrow";break;case"lean_right":_="lean_right";break;case"lean_left":_="lean_left";break;case"trapezoid":_="trapezoid";break;case"inv_trapezoid":_="inv_trapezoid";break;case"odd_right":_="rect_left_inv_arrow";break;case"circle":_="circle";break;case"ellipse":_="ellipse";break;case"stadium":_="stadium";break;case"subroutine":_="subroutine";break;case"cylinder":_="cylinder";break;case"group":_="rect";break;default:_="rect"}B.warn("Adding node",u.id,u.domId),e.setNode(n.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:d.labelStyle,shape:_,label:y,rx:x,ry:x,class:p,style:d.style,id:n.db.lookUpDomId(u.id)})}},w0=async function(t,e,i){let r=0,s,n;if(t.defaultStyle!==void 0){const a=ri(t.defaultStyle);s=a.style,n=a.labelStyle}for(const a of t){r++;const o="L-"+a.start+"-"+a.end,l="LS-"+a.start,h="LE-"+a.end,u={};a.type==="arrow_open"?u.arrowhead="none":u.arrowhead="normal";let p="",d="";if(a.style!==void 0){const g=ri(a.style);p=g.style,d=g.labelStyle}else switch(a.stroke){case"normal":p="fill:none",s!==void 0&&(p=s),n!==void 0&&(d=n);break;case"dotted":p="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":p=" stroke-width: 3.5px;fill:none";break}u.style=p,u.labelStyle=d,a.interpolate!==void 0?u.curve=fi(a.interpolate,ii):t.defaultInterpolate!==void 0?u.curve=fi(t.defaultInterpolate,ii):u.curve=fi(E0.curve,ii),a.text===void 0?a.style!==void 0&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",Ce(Y().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${o}" class="edgeLabel L-${l}' L-${h}" style="${u.labelStyle}">${await zr(a.text.replace(/fa[blrs]?:fa-[\w-]+/g,g=>`<i class='${g.replace(":"," ")}'></i>`),Y())}</span>`):(u.labelType="text",u.label=a.text.replace(mt.lineBreakRegex,`
`),a.style===void 0&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=o,u.class=l+" "+h,u.minlen=a.length||1,e.setEdge(i.db.lookUpDomId(a.start),i.db.lookUpDomId(a.end),u,r)}},Mb=function(t,e){return B.info("Extracting classes"),e.db.getClasses()},Vb=async function(t,e,i,r){B.info("Drawing flowchart");const{securityLevel:s,flowchart:n}=Y();let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;let h=r.db.getDirection();h===void 0&&(h="TD");const u=n.nodeSpacing||50,p=n.rankSpacing||50,d=new Ni({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:u,ranksep:p,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let g;const y=r.db.getSubGraphs();for(let k=y.length-1;k>=0;k--)g=y[k],r.db.addVertex(g.id,g.title,"group",void 0,g.classes);const x=r.db.getVertices();B.warn("Get vertices",x);const _=r.db.getEdges();let v=0;for(v=y.length-1;v>=0;v--){g=y[v],Ph("cluster").append("text");for(let k=0;k<g.nodes.length;k++)B.warn("Setting subgraph",g.nodes[k],r.db.lookUpDomId(g.nodes[k]),r.db.lookUpDomId(g.id)),d.setParent(r.db.lookUpDomId(g.nodes[k]),r.db.lookUpDomId(g.id))}await S0(x,d,e,o,l,r),await w0(_,d,r);const C=new Bf;Ob.addToRender(C),C.arrows().none=function(w,S,m,E){const L=w.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");If(L,m[E+"Style"])},C.arrows().normal=function(w,S){w.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const R=o.select(`[id="${e}"]`),A=o.select("#"+e+" g");for(C(A,d),A.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+v),v=0;v<y.length;v++)if(g=y[v],g.title!=="undefined"){const k=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(g.id)+'"] rect'),w=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(g.id)+'"]'),S=k[0].x.baseVal.value,m=k[0].y.baseVal.value,E=k[0].width.baseVal.value,L=yt(w[0]).select(".label");L.attr("transform",`translate(${S+E/2}, ${m+14})`),L.attr("id",e+"Text");for(let b=0;b<g.classes.length;b++)w[0].classList.add(g.classes[b])}if(!n.htmlLabels){const k=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const w of k){const S=w.getBBox(),m=l.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("rx",0),m.setAttribute("ry",0),m.setAttribute("width",S.width),m.setAttribute("height",S.height),w.insertBefore(m,w.firstChild)}}_r(d,R,n.diagramPadding,n.useMaxWidth),Object.keys(x).forEach(function(k){const w=x[k];if(w.link){const S=o.select("#"+e+' [id="'+r.db.lookUpDomId(k)+'"]');if(S){const m=l.createElementNS("http://www.w3.org/2000/svg","a");m.setAttributeNS("http://www.w3.org/2000/svg","class",w.classes.join(" ")),m.setAttributeNS("http://www.w3.org/2000/svg","href",w.link),m.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),s==="sandbox"?m.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):w.linkTarget&&m.setAttributeNS("http://www.w3.org/2000/svg","target",w.linkTarget);const E=S.insert(function(){return m},":first-child"),f=S.select(".label-container");f&&E.append(function(){return f.node()});const L=S.select(".label");L&&E.append(function(){return L.node()})}}})},zb={setConf:Pb,addVertices:S0,addEdges:w0,getClasses:Mb,draw:Vb},qb={parser:xl,db:Br,renderer:mo,styles:d0,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,zb.setConf(t.flowchart),Br.clear(),Br.setGen("gen-1")}},Wb=Object.freeze(Object.defineProperty({__proto__:null,diagram:qb},Symbol.toStringTag,{value:"Module"})),Yb={parser:xl,db:Br,renderer:mo,styles:d0,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ey({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),mo.setConf(t.flowchart),Br.clear(),Br.setGen("gen-2")}},Ub=Object.freeze(Object.defineProperty({__proto__:null,diagram:Yb},Symbol.toStringTag,{value:"Module"}));var xo=function(){var t=function(S,m,E,f){for(E=E||{},f=S.length;f--;E[S[f]]=m);return E},e=[6,8,10,20,22,24,26,27,28],i=[1,10],r=[1,11],s=[1,12],n=[1,13],a=[1,14],o=[1,15],l=[1,21],h=[1,22],u=[1,23],p=[1,24],d=[1,25],g=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],y=[1,34],x=[27,28,46,47],_=[41,42,43,44,45],v=[17,34],C=[1,54],R=[1,53],A=[17,34,36,38],T={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:function(m,E,f,L,b,P,U){var N=P.length-1;switch(b){case 1:break;case 2:this.$=[];break;case 3:P[N-1].push(P[N]),this.$=P[N-1];break;case 4:case 5:this.$=P[N];break;case 6:case 7:this.$=[];break;case 8:L.addEntity(P[N-4]),L.addEntity(P[N-2]),L.addRelationship(P[N-4],P[N],P[N-2],P[N-3]);break;case 9:L.addEntity(P[N-3]),L.addAttributes(P[N-3],P[N-1]);break;case 10:L.addEntity(P[N-2]);break;case 11:L.addEntity(P[N]);break;case 12:L.addEntity(P[N-6],P[N-4]),L.addAttributes(P[N-6],P[N-1]);break;case 13:L.addEntity(P[N-5],P[N-3]);break;case 14:L.addEntity(P[N-3],P[N-1]);break;case 15:case 16:this.$=P[N].trim(),L.setAccTitle(this.$);break;case 17:case 18:this.$=P[N].trim(),L.setAccDescription(this.$);break;case 19:case 43:this.$=P[N];break;case 20:case 41:case 42:this.$=P[N].replace(/"/g,"");break;case 21:case 29:this.$=[P[N]];break;case 22:P[N].push(P[N-1]),this.$=P[N];break;case 23:this.$={attributeType:P[N-1],attributeName:P[N]};break;case 24:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeKeyTypeList:P[N]};break;case 25:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeComment:P[N]};break;case 26:this.$={attributeType:P[N-3],attributeName:P[N-2],attributeKeyTypeList:P[N-1],attributeComment:P[N]};break;case 27:case 28:case 31:this.$=P[N];break;case 30:P[N-2].push(P[N]),this.$=P[N-2];break;case 32:this.$=P[N].replace(/"/g,"");break;case 33:this.$={cardA:P[N],relType:P[N-1],cardB:P[N-2]};break;case 34:this.$=L.Cardinality.ZERO_OR_ONE;break;case 35:this.$=L.Cardinality.ZERO_OR_MORE;break;case 36:this.$=L.Cardinality.ONE_OR_MORE;break;case 37:this.$=L.Cardinality.ONLY_ONE;break;case 38:this.$=L.Cardinality.MD_PARENT;break;case 39:this.$=L.Identification.NON_IDENTIFYING;break;case 40:this.$=L.Identification.IDENTIFYING;break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:16,11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:l,42:h,43:u,44:p,45:d}),{21:[1,26]},{23:[1,27]},{25:[1,28]},t(e,[2,18]),t(g,[2,19]),t(g,[2,20]),t(e,[2,4]),{11:29,27:a,28:o},{16:30,17:[1,31],29:32,30:33,34:y},{11:35,27:a,28:o},{40:36,46:[1,37],47:[1,38]},t(x,[2,34]),t(x,[2,35]),t(x,[2,36]),t(x,[2,37]),t(x,[2,38]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),{13:[1,39]},{17:[1,40]},t(e,[2,10]),{16:41,17:[2,21],29:32,30:33,34:y},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:l,42:h,43:u,44:p,45:d},t(_,[2,39]),t(_,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},t(e,[2,9]),{17:[2,22]},t(v,[2,23],{32:50,33:51,35:52,37:C,38:R}),t([17,34,37,38],[2,28]),t(e,[2,14],{15:[1,55]}),t([27,28],[2,33]),t(e,[2,8]),t(e,[2,41]),t(e,[2,42]),t(e,[2,43]),t(v,[2,24],{33:56,36:[1,57],38:R}),t(v,[2,25]),t(A,[2,29]),t(v,[2,32]),t(A,[2,31]),{16:58,17:[1,59],29:32,30:33,34:y},t(v,[2,26]),{35:60,37:C},{17:[1,61]},t(e,[2,13]),t(A,[2,30]),t(e,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:function(m,E){if(E.recoverable)this.trace(m);else{var f=new Error(m);throw f.hash=E,f}},parse:function(m){var E=this,f=[0],L=[],b=[null],P=[],U=this.table,N="",D=0,F=0,I=2,M=1,z=P.slice.call(arguments,1),st=Object.create(this.lexer),j={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(j.yy[dt]=this.yy[dt]);st.setInput(m,j.yy),j.yy.lexer=st,j.yy.parser=this,typeof st.yylloc>"u"&&(st.yylloc={});var K=st.yylloc;P.push(K);var G=st.options&&st.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function tt(){var St;return St=L.pop()||st.lex()||M,typeof St!="number"&&(St instanceof Array&&(L=St,St=L.pop()),St=E.symbols_[St]||St),St}for(var nt,Q,J,O,at={},W,ft,V,vt;;){if(Q=f[f.length-1],this.defaultActions[Q]?J=this.defaultActions[Q]:((nt===null||typeof nt>"u")&&(nt=tt()),J=U[Q]&&U[Q][nt]),typeof J>"u"||!J.length||!J[0]){var X="";vt=[];for(W in U[Q])this.terminals_[W]&&W>I&&vt.push("'"+this.terminals_[W]+"'");st.showPosition?X="Parse error on line "+(D+1)+`:
`+st.showPosition()+`
Expecting `+vt.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":X="Parse error on line "+(D+1)+": Unexpected "+(nt==M?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(X,{text:st.match,token:this.terminals_[nt]||nt,line:st.yylineno,loc:K,expected:vt})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+nt);switch(J[0]){case 1:f.push(nt),b.push(st.yytext),P.push(st.yylloc),f.push(J[1]),nt=null,F=st.yyleng,N=st.yytext,D=st.yylineno,K=st.yylloc;break;case 2:if(ft=this.productions_[J[1]][1],at.$=b[b.length-ft],at._$={first_line:P[P.length-(ft||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(ft||1)].first_column,last_column:P[P.length-1].last_column},G&&(at._$.range=[P[P.length-(ft||1)].range[0],P[P.length-1].range[1]]),O=this.performAction.apply(at,[N,F,D,j.yy,J[1],b,P].concat(z)),typeof O<"u")return O;ft&&(f=f.slice(0,-1*ft*2),b=b.slice(0,-1*ft),P=P.slice(0,-1*ft)),f.push(this.productions_[J[1]][0]),b.push(at.$),P.push(at._$),V=U[f[f.length-2]][f[f.length-1]],f.push(V);break;case 3:return!0}}return!0}},k=function(){var S={EOF:1,parseError:function(E,f){if(this.yy.parser)this.yy.parser.parseError(E,f);else throw new Error(E)},setInput:function(m,E){return this.yy=E||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var E=m.match(/(?:\r\n?|\n).*/g);return E?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},unput:function(m){var E=m.length,f=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-E),this.offset-=E;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===L.length?this.yylloc.first_column:0)+L[L.length-f.length].length-f[0].length:this.yylloc.first_column-E},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-E]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(m){this.unput(this.match.slice(m))},pastInput:function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var m=this.pastInput(),E=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+E+"^"},test_match:function(m,E){var f,L,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),L=m[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],f=this.performAction.call(this,this.yy,this,E,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)return f;if(this._backtrack){for(var P in b)this[P]=b[P];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,E,f,L;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),P=0;P<b.length;P++)if(f=this._input.match(this.rules[b[P]]),f&&(!E||f[0].length>E[0].length)){if(E=f,L=P,this.options.backtrack_lexer){if(m=this.test_match(f,b[P]),m!==!1)return m;if(this._backtrack){E=!1;continue}else return!1}else if(!this.options.flex)break}return E?(m=this.test_match(E,b[L]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var E=this.next();return E||this.lex()},begin:function(E){this.conditionStack.push(E)},popState:function(){var E=this.conditionStack.length-1;return E>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(E){return E=this.conditionStack.length-1-Math.abs(E||0),E>=0?this.conditionStack[E]:"INITIAL"},pushState:function(E){this.begin(E)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(E,f,L,b){switch(L){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return f.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return f.yytext[0];case 55:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return S}();T.lexer=k;function w(){this.yy={}}return w.prototype=T,T.Parser=w,new w}();xo.parser=xo;const Hb=xo;let dr={},Sl=[];const Gb={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},jb={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},v0=function(t,e=void 0){return dr[t]===void 0?(dr[t]={attributes:[],alias:e},B.info("Added new entity :",t)):dr[t]&&!dr[t].alias&&e&&(dr[t].alias=e,B.info(`Add alias '${e}' to entity '${t}'`)),dr[t]},Xb=()=>dr,$b=function(t,e){let i=v0(t),r;for(r=e.length-1;r>=0;r--)i.attributes.push(e[r]),B.debug("Added attribute ",e[r].attributeName)},Kb=function(t,e,i,r){let s={entityA:t,roleA:e,entityB:i,relSpec:r};Sl.push(s),B.debug("Added new relationship :",s)},Qb=()=>Sl,Zb=function(){dr={},Sl=[],Pe()},Jb={Cardinality:Gb,Identification:jb,getConfig:()=>Y().er,addEntity:v0,addAttributes:$b,getEntities:Xb,addRelationship:Kb,getRelationships:Qb,clear:Zb,setAccTitle:Me,getAccTitle:Ue,setAccDescription:He,getAccDescription:Ge,setDiagramTitle:si,getDiagramTitle:je},yi={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},t5=function(t,e){let i;t.append("defs").append("marker").attr("id",yi.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",yi.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",yi.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",yi.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",yi.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",yi.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},mi={ERMarkers:yi,insertMarkers:t5},e5=/[^\dA-Za-z](\W)*/g;let ke={},Hs=new Map;const i5=function(t){const e=Object.keys(t);for(const i of e)ke[i]=t[i]},r5=(t,e,i)=>{const r=ke.entityPadding/3,s=ke.entityPadding/3,n=ke.fontSize*.85,a=e.node().getBBox(),o=[];let l=!1,h=!1,u=0,p=0,d=0,g=0,y=a.height+r*2,x=1;i.forEach(R=>{R.attributeKeyTypeList!==void 0&&R.attributeKeyTypeList.length>0&&(l=!0),R.attributeComment!==void 0&&(h=!0)}),i.forEach(R=>{const A=`${e.node().id}-attr-${x}`;let T=0;const k=Bs(R.attributeType),w=t.append("text").classed("er entityLabel",!0).attr("id",`${A}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(k),S=t.append("text").classed("er entityLabel",!0).attr("id",`${A}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(R.attributeName),m={};m.tn=w,m.nn=S;const E=w.node().getBBox(),f=S.node().getBBox();if(u=Math.max(u,E.width),p=Math.max(p,f.width),T=Math.max(E.height,f.height),l){const L=R.attributeKeyTypeList!==void 0?R.attributeKeyTypeList.join(","):"",b=t.append("text").classed("er entityLabel",!0).attr("id",`${A}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(L);m.kn=b;const P=b.node().getBBox();d=Math.max(d,P.width),T=Math.max(T,P.height)}if(h){const L=t.append("text").classed("er entityLabel",!0).attr("id",`${A}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(R.attributeComment||"");m.cn=L;const b=L.node().getBBox();g=Math.max(g,b.width),T=Math.max(T,b.height)}m.height=T,o.push(m),y+=T+r*2,x+=1});let _=4;l&&(_+=2),h&&(_+=2);const v=u+p+d+g,C={width:Math.max(ke.minEntityWidth,Math.max(a.width+ke.entityPadding*2,v+s*_)),height:i.length>0?y:Math.max(ke.minEntityHeight,a.height+ke.entityPadding*2)};if(i.length>0){const R=Math.max(0,(C.width-v-s*_)/(_/2));e.attr("transform","translate("+C.width/2+","+(r+a.height/2)+")");let A=a.height+r*2,T="attributeBoxOdd";o.forEach(k=>{const w=A+r+k.height/2;k.tn.attr("transform","translate("+s+","+w+")");const S=t.insert("rect","#"+k.tn.node().id).classed(`er ${T}`,!0).attr("x",0).attr("y",A).attr("width",u+s*2+R).attr("height",k.height+r*2),m=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));k.nn.attr("transform","translate("+(m+s)+","+w+")");const E=t.insert("rect","#"+k.nn.node().id).classed(`er ${T}`,!0).attr("x",m).attr("y",A).attr("width",p+s*2+R).attr("height",k.height+r*2);let f=parseFloat(E.attr("x"))+parseFloat(E.attr("width"));if(l){k.kn.attr("transform","translate("+(f+s)+","+w+")");const L=t.insert("rect","#"+k.kn.node().id).classed(`er ${T}`,!0).attr("x",f).attr("y",A).attr("width",d+s*2+R).attr("height",k.height+r*2);f=parseFloat(L.attr("x"))+parseFloat(L.attr("width"))}h&&(k.cn.attr("transform","translate("+(f+s)+","+w+")"),t.insert("rect","#"+k.cn.node().id).classed(`er ${T}`,"true").attr("x",f).attr("y",A).attr("width",g+s*2+R).attr("height",k.height+r*2)),A+=k.height+r*2,T=T==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else C.height=Math.max(ke.minEntityHeight,y),e.attr("transform","translate("+C.width/2+","+C.height/2+")");return C},s5=function(t,e,i){const r=Object.keys(e);let s;return r.forEach(function(n){const a=h5(n,"entity");Hs.set(n,a);const o=t.append("g").attr("id",a);s=s===void 0?a:s;const l="text-"+a,h=o.append("text").classed("er entityLabel",!0).attr("id",l).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",Y().fontFamily).style("font-size",ke.fontSize+"px").text(e[n].alias??n),{width:u,height:p}=r5(o,h,e[n].attributes),g=o.insert("rect","#"+l).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",p).node().getBBox();i.setNode(a,{width:g.width,height:g.height,shape:"rect",id:a})}),s},n5=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )")})},A0=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},a5=function(t,e){return t.forEach(function(i){e.setEdge(Hs.get(i.entityA),Hs.get(i.entityB),{relationship:i},A0(i))}),t};let $c=0;const o5=function(t,e,i,r,s){$c++;const n=i.edge(Hs.get(e.entityA),Hs.get(e.entityB),A0(e)),a=xr().x(function(y){return y.x}).y(function(y){return y.y}).curve(an),o=t.insert("path","#"+r).classed("er relationshipLine",!0).attr("d",a(n.points)).style("stroke",ke.stroke).style("fill","none");e.relSpec.relType===s.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let l="";switch(ke.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ZERO_OR_ONE_END+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ZERO_OR_MORE_END+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ONE_OR_MORE_END+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ONLY_ONE_END+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.MD_PARENT_END+")");break}switch(e.relSpec.cardB){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ZERO_OR_ONE_START+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ZERO_OR_MORE_START+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ONE_OR_MORE_START+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ONLY_ONE_START+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.MD_PARENT_START+")");break}const h=o.node().getTotalLength(),u=o.node().getPointAtLength(h*.5),p="rel"+$c,g=t.append("text").classed("er relationshipLabel",!0).attr("id",p).attr("x",u.x).attr("y",u.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",Y().fontFamily).style("font-size",ke.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+p).classed("er relationshipLabelBox",!0).attr("x",u.x-g.width/2).attr("y",u.y-g.height/2).attr("width",g.width).attr("height",g.height)},l5=function(t,e,i,r){ke=Y().er,B.info("Drawing ER diagram");const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);mi.insertMarkers(o,ke);let l;l=new Ni({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:ke.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const h=s5(o,r.db.getEntities(),l),u=a5(r.db.getRelationships(),l);nn(l),n5(o,l),u.forEach(function(x){o5(o,x,l,h,r)});const p=ke.diagramPadding;Rt.insertTitle(o,"entityTitleText",ke.titleTopMargin,r.db.getDiagramTitle());const d=o.node().getBBox(),g=d.width+p*2,y=d.height+p*2;Oe(o,y,g,ke.useMaxWidth),o.attr("viewBox",`${d.x-p} ${d.y-p} ${g} ${y}`)},c5="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function h5(t="",e=""){const i=t.replace(e5,"");return`${Kc(e)}${Kc(i)}${Qf(t,c5)}`}function Kc(t=""){return t.length>0?`${t}-`:""}const u5={setConf:i5,draw:l5},d5=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  
`,f5=d5,p5={parser:Hb,db:Jb,renderer:u5,styles:f5},g5=Object.freeze(Object.defineProperty({__proto__:null,diagram:p5},Symbol.toStringTag,{value:"Module"}));var bo=function(){var t=function(T,k,w,S){for(w=w||{},S=T.length;S--;w[T[S]]=k);return w},e=[1,3],i=[1,6],r=[1,4],s=[1,5],n=[2,5],a=[1,12],o=[5,7,13,19,21,23,24,26,28,31,37,40,47],l=[7,13,19,21,23,24,26,28,31,37,40],h=[7,12,13,19,21,23,24,26,28,31,37,40],u=[7,13,47],p=[1,42],d=[1,41],g=[7,13,29,32,35,38,47],y=[1,55],x=[1,56],_=[1,57],v=[7,13,32,35,42,47],C={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,GG:5,document:6,EOF:7,":":8,DIR:9,options:10,body:11,OPT:12,NL:13,line:14,statement:15,commitStatement:16,mergeStatement:17,cherryPickStatement:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,section:24,branchStatement:25,CHECKOUT:26,ref:27,BRANCH:28,ORDER:29,NUM:30,CHERRY_PICK:31,COMMIT_ID:32,STR:33,PARENT_COMMIT:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,ID:46,";":47,$accept:0,$end:1},terminals_:{2:"error",5:"GG",7:"EOF",8:":",9:"DIR",12:"OPT",13:"NL",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"section",26:"CHECKOUT",28:"BRANCH",29:"ORDER",30:"NUM",31:"CHERRY_PICK",32:"COMMIT_ID",33:"STR",34:"PARENT_COMMIT",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",46:"ID",47:";"},productions_:[0,[3,2],[3,3],[3,4],[3,5],[6,0],[6,2],[10,2],[10,1],[11,0],[11,2],[14,2],[14,1],[15,1],[15,1],[15,1],[15,2],[15,2],[15,1],[15,1],[15,1],[15,2],[25,2],[25,4],[18,3],[18,5],[18,5],[18,7],[18,7],[18,5],[18,5],[18,5],[18,7],[18,7],[18,7],[18,7],[17,2],[17,4],[17,4],[17,4],[17,6],[17,6],[17,6],[17,6],[17,6],[17,6],[17,8],[17,8],[17,8],[17,8],[17,8],[17,8],[16,2],[16,3],[16,3],[16,5],[16,5],[16,3],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,3],[16,5],[16,5],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[41,0],[41,1],[39,1],[39,1],[39,1],[27,1],[27,1],[4,1],[4,1],[4,1]],performAction:function(k,w,S,m,E,f,L){var b=f.length-1;switch(E){case 2:return f[b];case 3:return f[b-1];case 4:return m.setDirection(f[b-3]),f[b-1];case 6:m.setOptions(f[b-1]),this.$=f[b];break;case 7:f[b-1]+=f[b],this.$=f[b-1];break;case 9:this.$=[];break;case 10:f[b-1].push(f[b]),this.$=f[b-1];break;case 11:this.$=f[b-1];break;case 16:this.$=f[b].trim(),m.setAccTitle(this.$);break;case 17:case 18:this.$=f[b].trim(),m.setAccDescription(this.$);break;case 19:m.addSection(f[b].substr(8)),this.$=f[b].substr(8);break;case 21:m.checkout(f[b]);break;case 22:m.branch(f[b]);break;case 23:m.branch(f[b-2],f[b]);break;case 24:m.cherryPick(f[b],"",void 0);break;case 25:m.cherryPick(f[b-2],"",void 0,f[b]);break;case 26:m.cherryPick(f[b-2],"",f[b]);break;case 27:m.cherryPick(f[b-4],"",f[b],f[b-2]);break;case 28:m.cherryPick(f[b-4],"",f[b-2],f[b]);break;case 29:m.cherryPick(f[b],"",f[b-2]);break;case 30:m.cherryPick(f[b],"","");break;case 31:m.cherryPick(f[b-2],"","");break;case 32:m.cherryPick(f[b-4],"","",f[b-2]);break;case 33:m.cherryPick(f[b-4],"","",f[b]);break;case 34:m.cherryPick(f[b-2],"",f[b-4],f[b]);break;case 35:m.cherryPick(f[b-2],"","",f[b]);break;case 36:m.merge(f[b],"","","");break;case 37:m.merge(f[b-2],f[b],"","");break;case 38:m.merge(f[b-2],"",f[b],"");break;case 39:m.merge(f[b-2],"","",f[b]);break;case 40:m.merge(f[b-4],f[b],"",f[b-2]);break;case 41:m.merge(f[b-4],"",f[b],f[b-2]);break;case 42:m.merge(f[b-4],"",f[b-2],f[b]);break;case 43:m.merge(f[b-4],f[b-2],f[b],"");break;case 44:m.merge(f[b-4],f[b-2],"",f[b]);break;case 45:m.merge(f[b-4],f[b],f[b-2],"");break;case 46:m.merge(f[b-6],f[b-4],f[b-2],f[b]);break;case 47:m.merge(f[b-6],f[b],f[b-4],f[b-2]);break;case 48:m.merge(f[b-6],f[b-4],f[b],f[b-2]);break;case 49:m.merge(f[b-6],f[b-2],f[b-4],f[b]);break;case 50:m.merge(f[b-6],f[b],f[b-2],f[b-4]);break;case 51:m.merge(f[b-6],f[b-2],f[b],f[b-4]);break;case 52:m.commit(f[b]);break;case 53:m.commit("","",m.commitType.NORMAL,f[b]);break;case 54:m.commit("","",f[b],"");break;case 55:m.commit("","",f[b],f[b-2]);break;case 56:m.commit("","",f[b-2],f[b]);break;case 57:m.commit("",f[b],m.commitType.NORMAL,"");break;case 58:m.commit("",f[b-2],m.commitType.NORMAL,f[b]);break;case 59:m.commit("",f[b],m.commitType.NORMAL,f[b-2]);break;case 60:m.commit("",f[b-2],f[b],"");break;case 61:m.commit("",f[b],f[b-2],"");break;case 62:m.commit("",f[b-4],f[b-2],f[b]);break;case 63:m.commit("",f[b-4],f[b],f[b-2]);break;case 64:m.commit("",f[b-2],f[b-4],f[b]);break;case 65:m.commit("",f[b],f[b-4],f[b-2]);break;case 66:m.commit("",f[b],f[b-2],f[b-4]);break;case 67:m.commit("",f[b-2],f[b],f[b-4]);break;case 68:m.commit(f[b],"",m.commitType.NORMAL,"");break;case 69:m.commit(f[b],"",m.commitType.NORMAL,f[b-2]);break;case 70:m.commit(f[b-2],"",m.commitType.NORMAL,f[b]);break;case 71:m.commit(f[b-2],"",f[b],"");break;case 72:m.commit(f[b],"",f[b-2],"");break;case 73:m.commit(f[b],f[b-2],m.commitType.NORMAL,"");break;case 74:m.commit(f[b-2],f[b],m.commitType.NORMAL,"");break;case 75:m.commit(f[b-4],"",f[b-2],f[b]);break;case 76:m.commit(f[b-4],"",f[b],f[b-2]);break;case 77:m.commit(f[b-2],"",f[b-4],f[b]);break;case 78:m.commit(f[b],"",f[b-4],f[b-2]);break;case 79:m.commit(f[b],"",f[b-2],f[b-4]);break;case 80:m.commit(f[b-2],"",f[b],f[b-4]);break;case 81:m.commit(f[b-4],f[b],f[b-2],"");break;case 82:m.commit(f[b-4],f[b-2],f[b],"");break;case 83:m.commit(f[b-2],f[b],f[b-4],"");break;case 84:m.commit(f[b],f[b-2],f[b-4],"");break;case 85:m.commit(f[b],f[b-4],f[b-2],"");break;case 86:m.commit(f[b-2],f[b-4],f[b],"");break;case 87:m.commit(f[b-4],f[b],m.commitType.NORMAL,f[b-2]);break;case 88:m.commit(f[b-4],f[b-2],m.commitType.NORMAL,f[b]);break;case 89:m.commit(f[b-2],f[b],m.commitType.NORMAL,f[b-4]);break;case 90:m.commit(f[b],f[b-2],m.commitType.NORMAL,f[b-4]);break;case 91:m.commit(f[b],f[b-4],m.commitType.NORMAL,f[b-2]);break;case 92:m.commit(f[b-2],f[b-4],m.commitType.NORMAL,f[b]);break;case 93:m.commit(f[b-6],f[b-4],f[b-2],f[b]);break;case 94:m.commit(f[b-6],f[b-4],f[b],f[b-2]);break;case 95:m.commit(f[b-6],f[b-2],f[b-4],f[b]);break;case 96:m.commit(f[b-6],f[b],f[b-4],f[b-2]);break;case 97:m.commit(f[b-6],f[b-2],f[b],f[b-4]);break;case 98:m.commit(f[b-6],f[b],f[b-2],f[b-4]);break;case 99:m.commit(f[b-4],f[b-6],f[b-2],f[b]);break;case 100:m.commit(f[b-4],f[b-6],f[b],f[b-2]);break;case 101:m.commit(f[b-2],f[b-6],f[b-4],f[b]);break;case 102:m.commit(f[b],f[b-6],f[b-4],f[b-2]);break;case 103:m.commit(f[b-2],f[b-6],f[b],f[b-4]);break;case 104:m.commit(f[b],f[b-6],f[b-2],f[b-4]);break;case 105:m.commit(f[b],f[b-4],f[b-2],f[b-6]);break;case 106:m.commit(f[b-2],f[b-4],f[b],f[b-6]);break;case 107:m.commit(f[b],f[b-2],f[b-4],f[b-6]);break;case 108:m.commit(f[b-2],f[b],f[b-4],f[b-6]);break;case 109:m.commit(f[b-4],f[b-2],f[b],f[b-6]);break;case 110:m.commit(f[b-4],f[b],f[b-2],f[b-6]);break;case 111:m.commit(f[b-2],f[b-4],f[b-6],f[b]);break;case 112:m.commit(f[b],f[b-4],f[b-6],f[b-2]);break;case 113:m.commit(f[b-2],f[b],f[b-6],f[b-4]);break;case 114:m.commit(f[b],f[b-2],f[b-6],f[b-4]);break;case 115:m.commit(f[b-4],f[b-2],f[b-6],f[b]);break;case 116:m.commit(f[b-4],f[b],f[b-6],f[b-2]);break;case 117:this.$="";break;case 118:this.$=f[b];break;case 119:this.$=m.commitType.NORMAL;break;case 120:this.$=m.commitType.REVERSE;break;case 121:this.$=m.commitType.HIGHLIGHT;break}},table:[{3:1,4:2,5:e,7:i,13:r,47:s},{1:[3]},{3:7,4:2,5:e,7:i,13:r,47:s},{6:8,7:n,8:[1,9],9:[1,10],10:11,13:a},t(o,[2,124]),t(o,[2,125]),t(o,[2,126]),{1:[2,1]},{7:[1,13]},{6:14,7:n,10:11,13:a},{8:[1,15]},t(l,[2,9],{11:16,12:[1,17]}),t(h,[2,8]),{1:[2,2]},{7:[1,18]},{6:19,7:n,10:11,13:a},{7:[2,6],13:[1,22],14:20,15:21,16:23,17:24,18:25,19:[1,26],21:[1,27],23:[1,28],24:[1,29],25:30,26:[1,31],28:[1,35],31:[1,34],37:[1,33],40:[1,32]},t(h,[2,7]),{1:[2,3]},{7:[1,36]},t(l,[2,10]),{4:37,7:i,13:r,47:s},t(l,[2,12]),t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),{20:[1,38]},{22:[1,39]},t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),{27:40,33:p,46:d},t(u,[2,117],{41:43,32:[1,46],33:[1,48],35:[1,44],38:[1,45],42:[1,47]}),{27:49,33:p,46:d},{32:[1,50],35:[1,51]},{27:52,33:p,46:d},{1:[2,4]},t(l,[2,11]),t(u,[2,16]),t(u,[2,17]),t(u,[2,21]),t(g,[2,122]),t(g,[2,123]),t(u,[2,52]),{33:[1,53]},{39:54,43:y,44:x,45:_},{33:[1,58]},{33:[1,59]},t(u,[2,118]),t(u,[2,36],{32:[1,60],35:[1,62],38:[1,61]}),{33:[1,63]},{33:[1,64],36:[1,65]},t(u,[2,22],{29:[1,66]}),t(u,[2,53],{32:[1,68],38:[1,67],42:[1,69]}),t(u,[2,54],{32:[1,71],35:[1,70],42:[1,72]}),t(v,[2,119]),t(v,[2,120]),t(v,[2,121]),t(u,[2,57],{35:[1,73],38:[1,74],42:[1,75]}),t(u,[2,68],{32:[1,78],35:[1,76],38:[1,77]}),{33:[1,79]},{39:80,43:y,44:x,45:_},{33:[1,81]},t(u,[2,24],{34:[1,82],35:[1,83]}),{32:[1,84]},{32:[1,85]},{30:[1,86]},{39:87,43:y,44:x,45:_},{33:[1,88]},{33:[1,89]},{33:[1,90]},{33:[1,91]},{33:[1,92]},{33:[1,93]},{39:94,43:y,44:x,45:_},{33:[1,95]},{33:[1,96]},{39:97,43:y,44:x,45:_},{33:[1,98]},t(u,[2,37],{35:[1,100],38:[1,99]}),t(u,[2,38],{32:[1,102],35:[1,101]}),t(u,[2,39],{32:[1,103],38:[1,104]}),{33:[1,105]},{33:[1,106],36:[1,107]},{33:[1,108]},{33:[1,109]},t(u,[2,23]),t(u,[2,55],{32:[1,110],42:[1,111]}),t(u,[2,59],{38:[1,112],42:[1,113]}),t(u,[2,69],{32:[1,115],38:[1,114]}),t(u,[2,56],{32:[1,116],42:[1,117]}),t(u,[2,61],{35:[1,118],42:[1,119]}),t(u,[2,72],{32:[1,121],35:[1,120]}),t(u,[2,58],{38:[1,122],42:[1,123]}),t(u,[2,60],{35:[1,124],42:[1,125]}),t(u,[2,73],{35:[1,127],38:[1,126]}),t(u,[2,70],{32:[1,129],38:[1,128]}),t(u,[2,71],{32:[1,131],35:[1,130]}),t(u,[2,74],{35:[1,133],38:[1,132]}),{39:134,43:y,44:x,45:_},{33:[1,135]},{33:[1,136]},{33:[1,137]},{33:[1,138]},{39:139,43:y,44:x,45:_},t(u,[2,25],{35:[1,140]}),t(u,[2,26],{34:[1,141]}),t(u,[2,31],{34:[1,142]}),t(u,[2,29],{34:[1,143]}),t(u,[2,30],{34:[1,144]}),{33:[1,145]},{33:[1,146]},{39:147,43:y,44:x,45:_},{33:[1,148]},{39:149,43:y,44:x,45:_},{33:[1,150]},{33:[1,151]},{33:[1,152]},{33:[1,153]},{33:[1,154]},{33:[1,155]},{33:[1,156]},{39:157,43:y,44:x,45:_},{33:[1,158]},{33:[1,159]},{33:[1,160]},{39:161,43:y,44:x,45:_},{33:[1,162]},{39:163,43:y,44:x,45:_},{33:[1,164]},{33:[1,165]},{33:[1,166]},{39:167,43:y,44:x,45:_},{33:[1,168]},t(u,[2,43],{35:[1,169]}),t(u,[2,44],{38:[1,170]}),t(u,[2,42],{32:[1,171]}),t(u,[2,45],{35:[1,172]}),t(u,[2,40],{38:[1,173]}),t(u,[2,41],{32:[1,174]}),{33:[1,175],36:[1,176]},{33:[1,177]},{33:[1,178]},{33:[1,179]},{33:[1,180]},t(u,[2,66],{42:[1,181]}),t(u,[2,79],{32:[1,182]}),t(u,[2,67],{42:[1,183]}),t(u,[2,90],{38:[1,184]}),t(u,[2,80],{32:[1,185]}),t(u,[2,89],{38:[1,186]}),t(u,[2,65],{42:[1,187]}),t(u,[2,78],{32:[1,188]}),t(u,[2,64],{42:[1,189]}),t(u,[2,84],{35:[1,190]}),t(u,[2,77],{32:[1,191]}),t(u,[2,83],{35:[1,192]}),t(u,[2,63],{42:[1,193]}),t(u,[2,91],{38:[1,194]}),t(u,[2,62],{42:[1,195]}),t(u,[2,85],{35:[1,196]}),t(u,[2,86],{35:[1,197]}),t(u,[2,92],{38:[1,198]}),t(u,[2,76],{32:[1,199]}),t(u,[2,87],{38:[1,200]}),t(u,[2,75],{32:[1,201]}),t(u,[2,81],{35:[1,202]}),t(u,[2,82],{35:[1,203]}),t(u,[2,88],{38:[1,204]}),{33:[1,205]},{39:206,43:y,44:x,45:_},{33:[1,207]},{33:[1,208]},{39:209,43:y,44:x,45:_},{33:[1,210]},t(u,[2,27]),t(u,[2,32]),t(u,[2,28]),t(u,[2,33]),t(u,[2,34]),t(u,[2,35]),{33:[1,211]},{33:[1,212]},{33:[1,213]},{39:214,43:y,44:x,45:_},{33:[1,215]},{39:216,43:y,44:x,45:_},{33:[1,217]},{33:[1,218]},{33:[1,219]},{33:[1,220]},{33:[1,221]},{33:[1,222]},{33:[1,223]},{39:224,43:y,44:x,45:_},{33:[1,225]},{33:[1,226]},{33:[1,227]},{39:228,43:y,44:x,45:_},{33:[1,229]},{39:230,43:y,44:x,45:_},{33:[1,231]},{33:[1,232]},{33:[1,233]},{39:234,43:y,44:x,45:_},t(u,[2,46]),t(u,[2,48]),t(u,[2,47]),t(u,[2,49]),t(u,[2,51]),t(u,[2,50]),t(u,[2,107]),t(u,[2,108]),t(u,[2,105]),t(u,[2,106]),t(u,[2,110]),t(u,[2,109]),t(u,[2,114]),t(u,[2,113]),t(u,[2,112]),t(u,[2,111]),t(u,[2,116]),t(u,[2,115]),t(u,[2,104]),t(u,[2,103]),t(u,[2,102]),t(u,[2,101]),t(u,[2,99]),t(u,[2,100]),t(u,[2,98]),t(u,[2,97]),t(u,[2,96]),t(u,[2,95]),t(u,[2,93]),t(u,[2,94])],defaultActions:{7:[2,1],13:[2,2],18:[2,3],36:[2,4]},parseError:function(k,w){if(w.recoverable)this.trace(k);else{var S=new Error(k);throw S.hash=w,S}},parse:function(k){var w=this,S=[0],m=[],E=[null],f=[],L=this.table,b="",P=0,U=0,N=2,D=1,F=f.slice.call(arguments,1),I=Object.create(this.lexer),M={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(M.yy[z]=this.yy[z]);I.setInput(k,M.yy),M.yy.lexer=I,M.yy.parser=this,typeof I.yylloc>"u"&&(I.yylloc={});var st=I.yylloc;f.push(st);var j=I.options&&I.options.ranges;typeof M.yy.parseError=="function"?this.parseError=M.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function dt(){var V;return V=m.pop()||I.lex()||D,typeof V!="number"&&(V instanceof Array&&(m=V,V=m.pop()),V=w.symbols_[V]||V),V}for(var K,G,tt,nt,Q={},J,O,at,W;;){if(G=S[S.length-1],this.defaultActions[G]?tt=this.defaultActions[G]:((K===null||typeof K>"u")&&(K=dt()),tt=L[G]&&L[G][K]),typeof tt>"u"||!tt.length||!tt[0]){var ft="";W=[];for(J in L[G])this.terminals_[J]&&J>N&&W.push("'"+this.terminals_[J]+"'");I.showPosition?ft="Parse error on line "+(P+1)+`:
`+I.showPosition()+`
Expecting `+W.join(", ")+", got '"+(this.terminals_[K]||K)+"'":ft="Parse error on line "+(P+1)+": Unexpected "+(K==D?"end of input":"'"+(this.terminals_[K]||K)+"'"),this.parseError(ft,{text:I.match,token:this.terminals_[K]||K,line:I.yylineno,loc:st,expected:W})}if(tt[0]instanceof Array&&tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+G+", token: "+K);switch(tt[0]){case 1:S.push(K),E.push(I.yytext),f.push(I.yylloc),S.push(tt[1]),K=null,U=I.yyleng,b=I.yytext,P=I.yylineno,st=I.yylloc;break;case 2:if(O=this.productions_[tt[1]][1],Q.$=E[E.length-O],Q._$={first_line:f[f.length-(O||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(O||1)].first_column,last_column:f[f.length-1].last_column},j&&(Q._$.range=[f[f.length-(O||1)].range[0],f[f.length-1].range[1]]),nt=this.performAction.apply(Q,[b,U,P,M.yy,tt[1],E,f].concat(F)),typeof nt<"u")return nt;O&&(S=S.slice(0,-1*O*2),E=E.slice(0,-1*O),f=f.slice(0,-1*O)),S.push(this.productions_[tt[1]][0]),E.push(Q.$),f.push(Q._$),at=L[S[S.length-2]][S[S.length-1]],S.push(at);break;case 3:return!0}}return!0}},R=function(){var T={EOF:1,parseError:function(w,S){if(this.yy.parser)this.yy.parser.parseError(w,S);else throw new Error(w)},setInput:function(k,w){return this.yy=w||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var w=k.match(/(?:\r\n?|\n).*/g);return w?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},unput:function(k){var w=k.length,S=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-w),this.offset-=w;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===m.length?this.yylloc.first_column:0)+m[m.length-S.length].length-S[0].length:this.yylloc.first_column-w},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-w]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(k){this.unput(this.match.slice(k))},pastInput:function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var k=this.pastInput(),w=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+w+"^"},test_match:function(k,w){var S,m,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),m=k[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],S=this.performAction.call(this,this.yy,this,w,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var f in E)this[f]=E[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,w,S,m;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),f=0;f<E.length;f++)if(S=this._input.match(this.rules[E[f]]),S&&(!w||S[0].length>w[0].length)){if(w=S,m=f,this.options.backtrack_lexer){if(k=this.test_match(S,E[f]),k!==!1)return k;if(this._backtrack){w=!1;continue}else return!1}else if(!this.options.flex)break}return w?(k=this.test_match(w,E[m]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var w=this.next();return w||this.lex()},begin:function(w){this.conditionStack.push(w)},popState:function(){var w=this.conditionStack.length-1;return w>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(w){return w=this.conditionStack.length-1-Math.abs(w||0),w>=0?this.conditionStack[w]:"INITIAL"},pushState:function(w){this.begin(w)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(w,S,m,E){switch(m){case 0:return this.begin("acc_title"),19;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),21;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 13;case 8:break;case 9:break;case 10:return 5;case 11:return 40;case 12:return 32;case 13:return 38;case 14:return 42;case 15:return 43;case 16:return 44;case 17:return 45;case 18:return 35;case 19:return 28;case 20:return 29;case 21:return 37;case 22:return 31;case 23:return 34;case 24:return 26;case 25:return 9;case 26:return 9;case 27:return 8;case 28:return"CARET";case 29:this.begin("options");break;case 30:this.popState();break;case 31:return 12;case 32:return 36;case 33:this.begin("string");break;case 34:this.popState();break;case 35:return 33;case 36:return 30;case 37:return 46;case 38:return 7}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:parent:)/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:TB\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},options:{rules:[30,31],inclusive:!1},string:{rules:[34,35],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32,33,36,37,38,39],inclusive:!0}}};return T}();C.lexer=R;function A(){this.yy={}}return A.prototype=C,C.Parser=A,new A}();bo.parser=bo;const y5=bo;let ra=Y().gitGraph.mainBranchName,m5=Y().gitGraph.mainBranchOrder,Te={},Ye=null,Gs={};Gs[ra]={name:ra,order:m5};let ye={};ye[ra]=Ye;let Ae=ra,L0="LR",Dr=0;function wl(){return c1({length:7})}function x5(t,e){const i=Object.create(null);return t.reduce((r,s)=>{const n=e(s);return i[n]||(i[n]=!0,r.push(s)),r},[])}const b5=function(t){L0=t};let B0={};const k5=function(t){B.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{B0=JSON.parse(t)}catch(e){B.error("error while parsing gitGraph options",e.message)}},_5=function(){return B0},T5=function(t,e,i,r){B.debug("Entering commit:",t,e,i,r),e=mt.sanitizeText(e,Y()),t=mt.sanitizeText(t,Y()),r=mt.sanitizeText(r,Y());const s={id:e||Dr+"-"+wl(),message:t,seq:Dr++,type:i||is.NORMAL,tag:r||"",parents:Ye==null?[]:[Ye.id],branch:Ae};Ye=s,Te[s.id]=s,ye[Ae]=s.id,B.debug("in pushCommit "+s.id)},C5=function(t,e){if(t=mt.sanitizeText(t,Y()),ye[t]===void 0)ye[t]=Ye!=null?Ye.id:null,Gs[t]={name:t,order:e?parseInt(e,10):null},I0(t),B.debug("in createBranch");else{let i=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw i.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},i}},E5=function(t,e,i,r){t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y());const s=Te[ye[Ae]],n=Te[ye[t]];if(Ae===t){let o=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(s===void 0||!s){let o=new Error('Incorrect usage of "merge". Current branch ('+Ae+")has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},o}else if(ye[t]===void 0){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},o}else if(n===void 0||!n){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},o}else if(s===n){let o=new Error('Incorrect usage of "merge". Both branches have same head');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(e&&Te[e]!==void 0){let o=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw o.hash={text:"merge "+t+e+i+r,token:"merge "+t+e+i+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+i+" "+r]},o}const a={id:e||Dr+"-"+wl(),message:"merged branch "+t+" into "+Ae,seq:Dr++,parents:[Ye==null?null:Ye.id,ye[t]],branch:Ae,type:is.MERGE,customType:i,customId:!!e,tag:r||""};Ye=a,Te[a.id]=a,ye[Ae]=a.id,B.debug(ye),B.debug("in mergeBranch")},S5=function(t,e,i,r){if(B.debug("Entering cherryPick:",t,e,i),t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y()),i=mt.sanitizeText(i,Y()),r=mt.sanitizeText(r,Y()),!t||Te[t]===void 0){let a=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}let s=Te[t],n=s.branch;if(r&&!(Array.isArray(s.parents)&&s.parents.includes(r)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");if(s.type===is.MERGE&&!r)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!e||Te[e]===void 0){if(n===Ae){let l=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const a=Te[ye[Ae]];if(a===void 0||!a){let l=new Error('Incorrect usage of "cherry-pick". Current branch ('+Ae+")has no commits");throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const o={id:Dr+"-"+wl(),message:"cherry-picked "+s+" into "+Ae,seq:Dr++,parents:[Ye==null?null:Ye.id,s.id],branch:Ae,type:is.CHERRY_PICK,tag:i??`cherry-pick:${s.id}${s.type===is.MERGE?`|parent:${r}`:""}`};Ye=o,Te[o.id]=o,ye[Ae]=o.id,B.debug(ye),B.debug("in cherryPick")}},I0=function(t){if(t=mt.sanitizeText(t,Y()),ye[t]===void 0){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{Ae=t;const e=ye[Ae];Ye=Te[e]}};function Qc(t,e,i){const r=t.indexOf(e);r===-1?t.push(i):t.splice(r,1,i)}function D0(t){const e=t.reduce((s,n)=>s.seq>n.seq?s:n,t[0]);let i="";t.forEach(function(s){s===e?i+="	*":i+="	|"});const r=[i,e.id,e.seq];for(let s in ye)ye[s]===e.id&&r.push(s);if(B.debug(r.join(" ")),e.parents&&e.parents.length==2){const s=Te[e.parents[0]];Qc(t,e,s),t.push(Te[e.parents[1]])}else{if(e.parents.length==0)return;{const s=Te[e.parents];Qc(t,e,s)}}t=x5(t,s=>s.id),D0(t)}const w5=function(){B.debug(Te);const t=F0()[0];D0([t])},v5=function(){Te={},Ye=null;let t=Y().gitGraph.mainBranchName,e=Y().gitGraph.mainBranchOrder;ye={},ye[t]=null,Gs={},Gs[t]={name:t,order:e},Ae=t,Dr=0,Pe()},A5=function(){return Object.values(Gs).map((e,i)=>e.order!==null?e:{...e,order:parseFloat(`0.${i}`,10)}).sort((e,i)=>e.order-i.order).map(({name:e})=>({name:e}))},L5=function(){return ye},B5=function(){return Te},F0=function(){const t=Object.keys(Te).map(function(e){return Te[e]});return t.forEach(function(e){B.debug(e.id)}),t.sort((e,i)=>e.seq-i.seq),t},I5=function(){return Ae},D5=function(){return L0},F5=function(){return Ye},is={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},R5={getConfig:()=>Y().gitGraph,setDirection:b5,setOptions:k5,getOptions:_5,commit:T5,branch:C5,merge:E5,cherryPick:S5,checkout:I0,prettyPrint:w5,clear:v5,getBranchesAsObjArray:A5,getBranches:L5,getCommits:B5,getCommitsArray:F0,getCurrentBranch:I5,getDirection:D5,getHead:F5,setAccTitle:Me,getAccTitle:Ue,getAccDescription:Ge,setAccDescription:He,setDiagramTitle:si,getDiagramTitle:je,commitType:is};let ws={};const ve={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Sr=8;let $e={},tr={},sa=[],js=0,pe="LR";const N5=()=>{$e={},tr={},ws={},js=0,sa=[],pe="LR"},R0=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let i=[];typeof t=="string"?i=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?i=t:i=[];for(const r of i){const s=document.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","0"),s.setAttribute("class","row"),s.textContent=r.trim(),e.appendChild(s)}return e},O5=t=>{let e="",i=0;return t.forEach(r=>{const s=pe==="TB"?tr[r].y:tr[r].x;s>=i&&(e=r,i=s)}),e||void 0},Zc=(t,e,i)=>{const r=Y().gitGraph,s=t.append("g").attr("class","commit-bullets"),n=t.append("g").attr("class","commit-labels");let a=0;pe==="TB"&&(a=30);const l=Object.keys(e).sort((d,g)=>e[d].seq-e[g].seq),h=r.parallelCommits,u=10,p=40;l.forEach(d=>{const g=e[d];if(h)if(g.parents.length){const v=O5(g.parents);a=pe==="TB"?tr[v].y+p:tr[v].x+p}else a=0,pe==="TB"&&(a=30);const y=a+u,x=pe==="TB"?y:$e[g.branch].pos,_=pe==="TB"?$e[g.branch].pos:y;if(i){let v,C=g.customType!==void 0&&g.customType!==""?g.customType:g.type;switch(C){case ve.NORMAL:v="commit-normal";break;case ve.REVERSE:v="commit-reverse";break;case ve.HIGHLIGHT:v="commit-highlight";break;case ve.MERGE:v="commit-merge";break;case ve.CHERRY_PICK:v="commit-cherry-pick";break;default:v="commit-normal"}if(C===ve.HIGHLIGHT){const R=s.append("rect");R.attr("x",_-10),R.attr("y",x-10),R.attr("height",20),R.attr("width",20),R.attr("class",`commit ${g.id} commit-highlight${$e[g.branch].index%Sr} ${v}-outer`),s.append("rect").attr("x",_-6).attr("y",x-6).attr("height",12).attr("width",12).attr("class",`commit ${g.id} commit${$e[g.branch].index%Sr} ${v}-inner`)}else if(C===ve.CHERRY_PICK)s.append("circle").attr("cx",_).attr("cy",x).attr("r",10).attr("class",`commit ${g.id} ${v}`),s.append("circle").attr("cx",_-3).attr("cy",x+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${g.id} ${v}`),s.append("circle").attr("cx",_+3).attr("cy",x+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${g.id} ${v}`),s.append("line").attr("x1",_+3).attr("y1",x+1).attr("x2",_).attr("y2",x-5).attr("stroke","#fff").attr("class",`commit ${g.id} ${v}`),s.append("line").attr("x1",_-3).attr("y1",x+1).attr("x2",_).attr("y2",x-5).attr("stroke","#fff").attr("class",`commit ${g.id} ${v}`);else{const R=s.append("circle");if(R.attr("cx",_),R.attr("cy",x),R.attr("r",g.type===ve.MERGE?9:10),R.attr("class",`commit ${g.id} commit${$e[g.branch].index%Sr}`),C===ve.MERGE){const A=s.append("circle");A.attr("cx",_),A.attr("cy",x),A.attr("r",6),A.attr("class",`commit ${v} ${g.id} commit${$e[g.branch].index%Sr}`)}C===ve.REVERSE&&s.append("path").attr("d",`M ${_-5},${x-5}L${_+5},${x+5}M${_-5},${x+5}L${_+5},${x-5}`).attr("class",`commit ${v} ${g.id} commit${$e[g.branch].index%Sr}`)}}if(pe==="TB"?tr[g.id]={x:_,y}:tr[g.id]={x:y,y:x},i){if(g.type!==ve.CHERRY_PICK&&(g.customId&&g.type===ve.MERGE||g.type!==ve.MERGE)&&r.showCommitLabel){const R=n.append("g"),A=R.insert("rect").attr("class","commit-label-bkg"),T=R.append("text").attr("x",a).attr("y",x+25).attr("class","commit-label").text(g.id);let k=T.node().getBBox();if(A.attr("x",y-k.width/2-2).attr("y",x+13.5).attr("width",k.width+2*2).attr("height",k.height+2*2),pe==="TB"&&(A.attr("x",_-(k.width+4*4+5)).attr("y",x-12),T.attr("x",_-(k.width+4*4)).attr("y",x+k.height-12)),pe!=="TB"&&T.attr("x",y-k.width/2),r.rotateCommitLabel)if(pe==="TB")T.attr("transform","rotate(-45, "+_+", "+x+")"),A.attr("transform","rotate(-45, "+_+", "+x+")");else{let w=-7.5-(k.width+10)/25*9.5,S=10+k.width/25*8.5;R.attr("transform","translate("+w+", "+S+") rotate(-45, "+a+", "+x+")")}}if(g.tag){const R=n.insert("polygon"),A=n.append("circle"),T=n.append("text").attr("y",x-16).attr("class","tag-label").text(g.tag);let k=T.node().getBBox();T.attr("x",y-k.width/2);const w=k.height/2,S=x-19.2;R.attr("class","tag-label-bkg").attr("points",`
          ${a-k.width/2-4/2},${S+2}
          ${a-k.width/2-4/2},${S-2}
          ${y-k.width/2-4},${S-w-2}
          ${y+k.width/2+4},${S-w-2}
          ${y+k.width/2+4},${S+w+2}
          ${y-k.width/2-4},${S+w+2}`),A.attr("cx",a-k.width/2+4/2).attr("cy",S).attr("r",1.5).attr("class","tag-hole"),pe==="TB"&&(R.attr("class","tag-label-bkg").attr("points",`
            ${_},${a+2}
            ${_},${a-2}
            ${_+u},${a-w-2}
            ${_+u+k.width+4},${a-w-2}
            ${_+u+k.width+4},${a+w+2}
            ${_+u},${a+w+2}`).attr("transform","translate(12,12) rotate(45, "+_+","+a+")"),A.attr("cx",_+4/2).attr("cy",a).attr("transform","translate(12,12) rotate(45, "+_+","+a+")"),T.attr("x",_+5).attr("y",a+3).attr("transform","translate(14,14) rotate(45, "+_+","+a+")"))}}a+=p+u,a>js&&(js=a)})},P5=(t,e,i,r,s)=>{const a=(pe==="TB"?i.x<r.x:i.y<r.y)?e.branch:t.branch,o=h=>h.branch===a,l=h=>h.seq>t.seq&&h.seq<e.seq;return Object.values(s).some(h=>l(h)&&o(h))},vs=(t,e,i=0)=>{const r=t+Math.abs(t-e)/2;if(i>5)return r;if(sa.every(a=>Math.abs(a-r)>=10))return sa.push(r),r;const n=Math.abs(t-e);return vs(t,e-n/5,i+1)},M5=(t,e,i,r)=>{const s=tr[e.id],n=tr[i.id],a=P5(e,i,s,n,r);let o="",l="",h=0,u=0,p=$e[i.branch].index;i.type===ve.MERGE&&e.id!==i.parents[0]&&(p=$e[e.branch].index);let d;if(a){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",h=10,u=10;const g=s.y<n.y?vs(s.y,n.y):vs(n.y,s.y),y=s.x<n.x?vs(s.x,n.x):vs(n.x,s.x);pe==="TB"?s.x<n.x?d=`M ${s.x} ${s.y} L ${y-h} ${s.y} ${l} ${y} ${s.y+u} L ${y} ${n.y-h} ${o} ${y+u} ${n.y} L ${n.x} ${n.y}`:(p=$e[e.branch].index,d=`M ${s.x} ${s.y} L ${y+h} ${s.y} ${o} ${y} ${s.y+u} L ${y} ${n.y-h} ${l} ${y-u} ${n.y} L ${n.x} ${n.y}`):s.y<n.y?d=`M ${s.x} ${s.y} L ${s.x} ${g-h} ${o} ${s.x+u} ${g} L ${n.x-h} ${g} ${l} ${n.x} ${g+u} L ${n.x} ${n.y}`:(p=$e[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${g+h} ${l} ${s.x+u} ${g} L ${n.x-h} ${g} ${o} ${n.x} ${g-u} L ${n.x} ${n.y}`)}else o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,pe==="TB"?(s.x<n.x&&(i.type===ve.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${l} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x>n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,i.type===ve.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${l} ${s.x-u} ${n.y} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${n.x+h} ${s.y} ${o} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x===n.x&&(d=`M ${s.x} ${s.y} L ${n.x} ${n.y}`)):(s.y<n.y&&(i.type===ve.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${l} ${n.x} ${s.y+u} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y>n.y&&(i.type===ve.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${s.x} ${n.y+h} ${l} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y===n.y&&(d=`M ${s.x} ${s.y} L ${n.x} ${n.y}`));t.append("path").attr("d",d).attr("class","arrow arrow"+p%Sr)},V5=(t,e)=>{const i=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const s=e[r];s.parents&&s.parents.length>0&&s.parents.forEach(n=>{M5(i,e[n],s,e)})})},z5=(t,e)=>{const i=Y().gitGraph,r=t.append("g");e.forEach((s,n)=>{const a=n%Sr,o=$e[s.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",o),l.attr("x2",js),l.attr("y2",o),l.attr("class","branch branch"+a),pe==="TB"&&(l.attr("y1",30),l.attr("x1",o),l.attr("y2",js),l.attr("x2",o)),sa.push(o);let h=s.name;const u=R0(h),p=r.insert("rect"),g=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);g.node().appendChild(u);let y=u.getBBox();p.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-y.width-4-(i.rotateCommitLabel===!0?30:0)).attr("y",-y.height/2+8).attr("width",y.width+18).attr("height",y.height+4),g.attr("transform","translate("+(-y.width-14-(i.rotateCommitLabel===!0?30:0))+", "+(o-y.height/2-1)+")"),pe==="TB"&&(p.attr("x",o-y.width/2-10).attr("y",0),g.attr("transform","translate("+(o-y.width/2-5)+", 0)")),pe!=="TB"&&p.attr("transform","translate(-19, "+(o-y.height/2)+")")})},q5=function(t,e,i,r){N5();const s=Y(),n=s.gitGraph;B.debug("in gitgraph renderer",t+`
`,"id:",e,i),ws=r.db.getCommits();const a=r.db.getBranchesAsObjArray();pe=r.db.getDirection();const o=yt(`[id="${e}"]`);let l=0;a.forEach((h,u)=>{const p=R0(h.name),d=o.append("g"),g=d.insert("g").attr("class","branchLabel"),y=g.insert("g").attr("class","label branch-label");y.node().appendChild(p);let x=p.getBBox();$e[h.name]={pos:l,index:u},l+=50+(n.rotateCommitLabel?40:0)+(pe==="TB"?x.width/2:0),y.remove(),g.remove(),d.remove()}),Zc(o,ws,!1),n.showBranches&&z5(o,a),V5(o,ws),Zc(o,ws,!0),Rt.insertTitle(o,"gitTitleText",n.titleTopMargin,r.db.getDiagramTitle()),O1(void 0,o,n.diagramPadding,n.useMaxWidth??s.useMaxWidth)},W5={draw:q5},Y5=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,U5=Y5,H5={parser:y5,db:R5,renderer:W5,styles:U5},G5=Object.freeze(Object.defineProperty({__proto__:null,diagram:H5},Symbol.toStringTag,{value:"Module"}));var ko=function(){var t=function(f,L,b,P){for(b=b||{},P=f.length;P--;b[f[P]]=L);return b},e=[6,8,10,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,30,32,33,35,37],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,29],o=[1,30],l=[1,31],h=[1,9],u=[1,10],p=[1,11],d=[1,12],g=[1,13],y=[1,14],x=[1,15],_=[1,16],v=[1,18],C=[1,19],R=[1,20],A=[1,21],T=[1,22],k=[1,24],w=[1,32],S={trace:function(){},yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,dateFormat:19,inclusiveEndDates:20,topAxis:21,axisFormat:22,tickInterval:23,excludes:24,includes:25,todayMarker:26,title:27,acc_title:28,acc_title_value:29,acc_descr:30,acc_descr_value:31,acc_descr_multiline_value:32,section:33,clickStatement:34,taskTxt:35,taskData:36,click:37,callbackname:38,callbackargs:39,href:40,clickStatementDebug:41,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",19:"dateFormat",20:"inclusiveEndDates",21:"topAxis",22:"axisFormat",23:"tickInterval",24:"excludes",25:"includes",26:"todayMarker",27:"title",28:"acc_title",29:"acc_title_value",30:"acc_descr",31:"acc_descr_value",32:"acc_descr_multiline_value",33:"section",35:"taskTxt",36:"taskData",37:"click",38:"callbackname",39:"callbackargs",40:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[34,2],[34,3],[34,3],[34,4],[34,3],[34,4],[34,2],[41,2],[41,3],[41,3],[41,4],[41,3],[41,4],[41,2]],performAction:function(L,b,P,U,N,D,F){var I=D.length-1;switch(N){case 1:return D[I-1];case 2:this.$=[];break;case 3:D[I-1].push(D[I]),this.$=D[I-1];break;case 4:case 5:this.$=D[I];break;case 6:case 7:this.$=[];break;case 8:U.setWeekday("monday");break;case 9:U.setWeekday("tuesday");break;case 10:U.setWeekday("wednesday");break;case 11:U.setWeekday("thursday");break;case 12:U.setWeekday("friday");break;case 13:U.setWeekday("saturday");break;case 14:U.setWeekday("sunday");break;case 15:U.setDateFormat(D[I].substr(11)),this.$=D[I].substr(11);break;case 16:U.enableInclusiveEndDates(),this.$=D[I].substr(18);break;case 17:U.TopAxis(),this.$=D[I].substr(8);break;case 18:U.setAxisFormat(D[I].substr(11)),this.$=D[I].substr(11);break;case 19:U.setTickInterval(D[I].substr(13)),this.$=D[I].substr(13);break;case 20:U.setExcludes(D[I].substr(9)),this.$=D[I].substr(9);break;case 21:U.setIncludes(D[I].substr(9)),this.$=D[I].substr(9);break;case 22:U.setTodayMarker(D[I].substr(12)),this.$=D[I].substr(12);break;case 24:U.setDiagramTitle(D[I].substr(6)),this.$=D[I].substr(6);break;case 25:this.$=D[I].trim(),U.setAccTitle(this.$);break;case 26:case 27:this.$=D[I].trim(),U.setAccDescription(this.$);break;case 28:U.addSection(D[I].substr(8)),this.$=D[I].substr(8);break;case 30:U.addTask(D[I-1],D[I]),this.$="task";break;case 31:this.$=D[I-1],U.setClickEvent(D[I-1],D[I],null);break;case 32:this.$=D[I-2],U.setClickEvent(D[I-2],D[I-1],D[I]);break;case 33:this.$=D[I-2],U.setClickEvent(D[I-2],D[I-1],null),U.setLink(D[I-2],D[I]);break;case 34:this.$=D[I-3],U.setClickEvent(D[I-3],D[I-2],D[I-1]),U.setLink(D[I-3],D[I]);break;case 35:this.$=D[I-2],U.setClickEvent(D[I-2],D[I],null),U.setLink(D[I-2],D[I-1]);break;case 36:this.$=D[I-3],U.setClickEvent(D[I-3],D[I-1],D[I]),U.setLink(D[I-3],D[I-2]);break;case 37:this.$=D[I-1],U.setLink(D[I-1],D[I]);break;case 38:case 44:this.$=D[I-1]+" "+D[I];break;case 39:case 40:case 42:this.$=D[I-2]+" "+D[I-1]+" "+D[I];break;case 41:case 43:this.$=D[I-3]+" "+D[I-2]+" "+D[I-1]+" "+D[I];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:p,22:d,23:g,24:y,25:x,26:_,27:v,28:C,30:R,32:A,33:T,34:23,35:k,37:w},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:33,11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:p,22:d,23:g,24:y,25:x,26:_,27:v,28:C,30:R,32:A,33:T,34:23,35:k,37:w},t(e,[2,5]),t(e,[2,6]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),{29:[1,34]},{31:[1,35]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),{36:[1,36]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),{38:[1,37],40:[1,38]},t(e,[2,4]),t(e,[2,25]),t(e,[2,26]),t(e,[2,30]),t(e,[2,31],{39:[1,39],40:[1,40]}),t(e,[2,37],{38:[1,41]}),t(e,[2,32],{40:[1,42]}),t(e,[2,33]),t(e,[2,35],{39:[1,43]}),t(e,[2,34]),t(e,[2,36])],defaultActions:{},parseError:function(L,b){if(b.recoverable)this.trace(L);else{var P=new Error(L);throw P.hash=b,P}},parse:function(L){var b=this,P=[0],U=[],N=[null],D=[],F=this.table,I="",M=0,z=0,st=2,j=1,dt=D.slice.call(arguments,1),K=Object.create(this.lexer),G={yy:{}};for(var tt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,tt)&&(G.yy[tt]=this.yy[tt]);K.setInput(L,G.yy),G.yy.lexer=K,G.yy.parser=this,typeof K.yylloc>"u"&&(K.yylloc={});var nt=K.yylloc;D.push(nt);var Q=K.options&&K.options.ranges;typeof G.yy.parseError=="function"?this.parseError=G.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(){var Bt;return Bt=U.pop()||K.lex()||j,typeof Bt!="number"&&(Bt instanceof Array&&(U=Bt,Bt=U.pop()),Bt=b.symbols_[Bt]||Bt),Bt}for(var O,at,W,ft,V={},vt,X,St,bt;;){if(at=P[P.length-1],this.defaultActions[at]?W=this.defaultActions[at]:((O===null||typeof O>"u")&&(O=J()),W=F[at]&&F[at][O]),typeof W>"u"||!W.length||!W[0]){var Vt="";bt=[];for(vt in F[at])this.terminals_[vt]&&vt>st&&bt.push("'"+this.terminals_[vt]+"'");K.showPosition?Vt="Parse error on line "+(M+1)+`:
`+K.showPosition()+`
Expecting `+bt.join(", ")+", got '"+(this.terminals_[O]||O)+"'":Vt="Parse error on line "+(M+1)+": Unexpected "+(O==j?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError(Vt,{text:K.match,token:this.terminals_[O]||O,line:K.yylineno,loc:nt,expected:bt})}if(W[0]instanceof Array&&W.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+O);switch(W[0]){case 1:P.push(O),N.push(K.yytext),D.push(K.yylloc),P.push(W[1]),O=null,z=K.yyleng,I=K.yytext,M=K.yylineno,nt=K.yylloc;break;case 2:if(X=this.productions_[W[1]][1],V.$=N[N.length-X],V._$={first_line:D[D.length-(X||1)].first_line,last_line:D[D.length-1].last_line,first_column:D[D.length-(X||1)].first_column,last_column:D[D.length-1].last_column},Q&&(V._$.range=[D[D.length-(X||1)].range[0],D[D.length-1].range[1]]),ft=this.performAction.apply(V,[I,z,M,G.yy,W[1],N,D].concat(dt)),typeof ft<"u")return ft;X&&(P=P.slice(0,-1*X*2),N=N.slice(0,-1*X),D=D.slice(0,-1*X)),P.push(this.productions_[W[1]][0]),N.push(V.$),D.push(V._$),St=F[P[P.length-2]][P[P.length-1]],P.push(St);break;case 3:return!0}}return!0}},m=function(){var f={EOF:1,parseError:function(b,P){if(this.yy.parser)this.yy.parser.parseError(b,P);else throw new Error(b)},setInput:function(L,b){return this.yy=b||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var b=L.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var b=L.length,P=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var U=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var N=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===U.length?this.yylloc.first_column:0)+U[U.length-P.length].length-P[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[N[0],N[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),b=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+b+"^"},test_match:function(L,b){var P,U,N;if(this.options.backtrack_lexer&&(N={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(N.yylloc.range=this.yylloc.range.slice(0))),U=L[0].match(/(?:\r\n?|\n).*/g),U&&(this.yylineno+=U.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:U?U[U.length-1].length-U[U.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],P=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var D in N)this[D]=N[D];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,b,P,U;this._more||(this.yytext="",this.match="");for(var N=this._currentRules(),D=0;D<N.length;D++)if(P=this._input.match(this.rules[N[D]]),P&&(!b||P[0].length>b[0].length)){if(b=P,U=D,this.options.backtrack_lexer){if(L=this.test_match(P,N[D]),L!==!1)return L;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(L=this.test_match(b,N[U]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return b||this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){var b=this.conditionStack.length-1;return b>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},pushState:function(b){this.begin(b)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(b,P,U,N){switch(U){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),28;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),30;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 40;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 38;case 21:this.popState();break;case 22:return 39;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 37;case 26:return 4;case 27:return 19;case 28:return 20;case 29:return 21;case 30:return 22;case 31:return 23;case 32:return 25;case 33:return 24;case 34:return 26;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return"date";case 43:return 27;case 44:return"accDescription";case 45:return 33;case 46:return 35;case 47:return 36;case 48:return":";case 49:return 6;case 50:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],inclusive:!0}}};return f}();S.lexer=m;function E(){this.yy={}}return E.prototype=S,S.Parser=E,new E}();ko.parser=ko;const j5=ko;Fe.extend(vf);Fe.extend(Af);Fe.extend(Lf);let Bi="",vl="",Al,Ll="",dn=[],fn=[],Bl={},Il=[],na=[],fs="",Dl="";const N0=["active","done","crit","milestone"];let Fl=[],pn=!1,Rl=!1,Nl="sunday",_o=0;const X5=function(){Il=[],na=[],fs="",Fl=[],Fn=0,Co=void 0,Rn=void 0,be=[],Bi="",vl="",Dl="",Al=void 0,Ll="",dn=[],fn=[],pn=!1,Rl=!1,_o=0,Bl={},Pe(),Nl="sunday"},$5=function(t){vl=t},K5=function(){return vl},Q5=function(t){Al=t},Z5=function(){return Al},J5=function(t){Ll=t},tk=function(){return Ll},ek=function(t){Bi=t},ik=function(){pn=!0},rk=function(){return pn},sk=function(){Rl=!0},nk=function(){return Rl},ak=function(t){Dl=t},ok=function(){return Dl},lk=function(){return Bi},ck=function(t){dn=t.toLowerCase().split(/[\s,]+/)},hk=function(){return dn},uk=function(t){fn=t.toLowerCase().split(/[\s,]+/)},dk=function(){return fn},fk=function(){return Bl},pk=function(t){fs=t,Il.push(t)},gk=function(){return Il},yk=function(){let t=Jc();const e=10;let i=0;for(;!t&&i<e;)t=Jc(),i++;return na=be,na},O0=function(t,e,i,r){return r.includes(t.format(e.trim()))?!1:t.isoWeekday()>=6&&i.includes("weekends")||i.includes(t.format("dddd").toLowerCase())?!0:i.includes(t.format(e.trim()))},mk=function(t){Nl=t},xk=function(){return Nl},P0=function(t,e,i,r){if(!i.length||t.manualEndTime)return;let s;t.startTime instanceof Date?s=Fe(t.startTime):s=Fe(t.startTime,e,!0),s=s.add(1,"d");let n;t.endTime instanceof Date?n=Fe(t.endTime):n=Fe(t.endTime,e,!0);const[a,o]=bk(s,n,e,i,r);t.endTime=a.toDate(),t.renderEndTime=o},bk=function(t,e,i,r,s){let n=!1,a=null;for(;t<=e;)n||(a=e.toDate()),n=O0(t,i,r,s),n&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,a]},To=function(t,e,i){i=i.trim();const s=/^after\s+(?<ids>[\d\w- ]+)/.exec(i);if(s!==null){let a=null;for(const l of s.groups.ids.split(" ")){let h=Yr(l);h!==void 0&&(!a||h.endTime>a.endTime)&&(a=h)}if(a)return a.endTime;const o=new Date;return o.setHours(0,0,0,0),o}let n=Fe(i,e.trim(),!0);if(n.isValid())return n.toDate();{B.debug("Invalid date:"+i),B.debug("With date format:"+e.trim());const a=new Date(i);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+i);return a}},M0=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},V0=function(t,e,i,r=!1){i=i.trim();const n=/^until\s+(?<ids>[\d\w- ]+)/.exec(i);if(n!==null){let u=null;for(const d of n.groups.ids.split(" ")){let g=Yr(d);g!==void 0&&(!u||g.startTime<u.startTime)&&(u=g)}if(u)return u.startTime;const p=new Date;return p.setHours(0,0,0,0),p}let a=Fe(i,e.trim(),!0);if(a.isValid())return r&&(a=a.add(1,"d")),a.toDate();let o=Fe(t);const[l,h]=M0(i);if(!Number.isNaN(l)){const u=o.add(l,h);u.isValid()&&(o=u)}return o.toDate()};let Fn=0;const rs=function(t){return t===void 0?(Fn=Fn+1,"task"+Fn):t},kk=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};Y0(r,s,N0);for(let a=0;a<r.length;a++)r[a]=r[a].trim();let n="";switch(r.length){case 1:s.id=rs(),s.startTime=t.endTime,n=r[0];break;case 2:s.id=rs(),s.startTime=To(void 0,Bi,r[0]),n=r[1];break;case 3:s.id=rs(r[0]),s.startTime=To(void 0,Bi,r[1]),n=r[2];break}return n&&(s.endTime=V0(s.startTime,Bi,n,pn),s.manualEndTime=Fe(n,"YYYY-MM-DD",!0).isValid(),P0(s,Bi,fn,dn)),s},_k=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};Y0(r,s,N0);for(let n=0;n<r.length;n++)r[n]=r[n].trim();switch(r.length){case 1:s.id=rs(),s.startTime={type:"prevTaskEnd",id:t},s.endTime={data:r[0]};break;case 2:s.id=rs(),s.startTime={type:"getStartDate",startData:r[0]},s.endTime={data:r[1]};break;case 3:s.id=rs(r[0]),s.startTime={type:"getStartDate",startData:r[1]},s.endTime={data:r[2]};break}return s};let Co,Rn,be=[];const z0={},Tk=function(t,e){const i={section:fs,type:fs,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=_k(Rn,e);i.raw.startTime=r.startTime,i.raw.endTime=r.endTime,i.id=r.id,i.prevTaskId=Rn,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,i.order=_o,_o++;const s=be.push(i);Rn=i.id,z0[i.id]=s-1},Yr=function(t){const e=z0[t];return be[e]},Ck=function(t,e){const i={section:fs,type:fs,description:t,task:t,classes:[]},r=kk(Co,e);i.startTime=r.startTime,i.endTime=r.endTime,i.id=r.id,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,Co=i,na.push(i)},Jc=function(){const t=function(i){const r=be[i];let s="";switch(be[i].raw.startTime.type){case"prevTaskEnd":{const n=Yr(r.prevTaskId);r.startTime=n.endTime;break}case"getStartDate":s=To(void 0,Bi,be[i].raw.startTime.startData),s&&(be[i].startTime=s);break}return be[i].startTime&&(be[i].endTime=V0(be[i].startTime,Bi,be[i].raw.endTime.data,pn),be[i].endTime&&(be[i].processed=!0,be[i].manualEndTime=Fe(be[i].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),P0(be[i],Bi,fn,dn))),be[i].processed};let e=!0;for(const[i,r]of be.entries())t(i),e=e&&r.processed;return e},Ek=function(t,e){let i=e;Y().securityLevel!=="loose"&&(i=Mr.sanitizeUrl(e)),t.split(",").forEach(function(r){Yr(r)!==void 0&&(W0(r,()=>{window.open(i,"_self")}),Bl[r]=i)}),q0(t,"clickable")},q0=function(t,e){t.split(",").forEach(function(i){let r=Yr(i);r!==void 0&&r.classes.push(e)})},Sk=function(t,e,i){if(Y().securityLevel!=="loose"||e===void 0)return;let r=[];if(typeof i=="string"){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<r.length;n++){let a=r[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[n]=a}}r.length===0&&r.push(t),Yr(t)!==void 0&&W0(t,()=>{Rt.runFunc(e,...r)})},W0=function(t,e){Fl.push(function(){const i=document.querySelector(`[id="${t}"]`);i!==null&&i.addEventListener("click",function(){e()})},function(){const i=document.querySelector(`[id="${t}-text"]`);i!==null&&i.addEventListener("click",function(){e()})})},wk=function(t,e,i){t.split(",").forEach(function(r){Sk(r,e,i)}),q0(t,"clickable")},vk=function(t){Fl.forEach(function(e){e(t)})},Ak={getConfig:()=>Y().gantt,clear:X5,setDateFormat:ek,getDateFormat:lk,enableInclusiveEndDates:ik,endDatesAreInclusive:rk,enableTopAxis:sk,topAxisEnabled:nk,setAxisFormat:$5,getAxisFormat:K5,setTickInterval:Q5,getTickInterval:Z5,setTodayMarker:J5,getTodayMarker:tk,setAccTitle:Me,getAccTitle:Ue,setDiagramTitle:si,getDiagramTitle:je,setDisplayMode:ak,getDisplayMode:ok,setAccDescription:He,getAccDescription:Ge,addSection:pk,getSections:gk,getTasks:yk,addTask:Tk,findTaskById:Yr,addTaskOrg:Ck,setIncludes:ck,getIncludes:hk,setExcludes:uk,getExcludes:dk,setClickEvent:wk,setLink:Ek,getLinks:fk,bindFunctions:vk,parseDuration:M0,isInvalidDate:O0,setWeekday:mk,getWeekday:xk};function Y0(t,e,i){let r=!0;for(;r;)r=!1,i.forEach(function(s){const n="^\\s*"+s+"\\s*$",a=new RegExp(n);t[0].match(a)&&(e[s]=!0,t.shift(1),r=!0)})}const Lk=function(){B.debug("Something is calling, setConf, remove the call")},th={monday:s2,tuesday:n2,wednesday:a2,thursday:o2,friday:l2,saturday:c2,sunday:h2},Bk=(t,e)=>{let i=[...t].map(()=>-1/0),r=[...t].sort((n,a)=>n.startTime-a.startTime||n.order-a.order),s=0;for(const n of r)for(let a=0;a<i.length;a++)if(n.startTime>=i[a]){i[a]=n.endTime,n.order=a+e,a>s&&(s=a);break}return s};let $i;const Ik=function(t,e,i,r){const s=Y().gantt,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=n==="sandbox"?a.nodes()[0].contentDocument:document,h=l.getElementById(e);$i=h.parentElement.offsetWidth,$i===void 0&&($i=1200),s.useWidth!==void 0&&($i=s.useWidth);const u=r.db.getTasks();let p=[];for(const S of u)p.push(S.type);p=w(p);const d={};let g=2*s.topPadding;if(r.db.getDisplayMode()==="compact"||s.displayMode==="compact"){const S={};for(const E of u)S[E.section]===void 0?S[E.section]=[E]:S[E.section].push(E);let m=0;for(const E of Object.keys(S)){const f=Bk(S[E],m)+1;m+=f,g+=f*(s.barHeight+s.barGap),d[E]=f}}else{g+=u.length*(s.barHeight+s.barGap);for(const S of p)d[S]=u.filter(m=>m.type===S).length}h.setAttribute("viewBox","0 0 "+$i+" "+g);const y=o.select(`[id="${e}"]`),x=Zf().domain([Jf(u,function(S){return S.startTime}),t2(u,function(S){return S.endTime})]).rangeRound([0,$i-s.leftPadding-s.rightPadding]);function _(S,m){const E=S.startTime,f=m.startTime;let L=0;return E>f?L=1:E<f&&(L=-1),L}u.sort(_),v(u,$i,g),Oe(y,g,$i,s.useMaxWidth),y.append("text").text(r.db.getDiagramTitle()).attr("x",$i/2).attr("y",s.titleTopMargin).attr("class","titleText");function v(S,m,E){const f=s.barHeight,L=f+s.barGap,b=s.topPadding,P=s.leftPadding,U=Vs().domain([0,p.length]).range(["#00B9FA","#F95002"]).interpolate(e2);R(L,b,P,m,E,S,r.db.getExcludes(),r.db.getIncludes()),A(P,b,m,E),C(S,L,b,P,f,U,m),T(L,b),k(P,b,m,E)}function C(S,m,E,f,L,b,P){const N=[...new Set(S.map(M=>M.order))].map(M=>S.find(z=>z.order===M));y.append("g").selectAll("rect").data(N).enter().append("rect").attr("x",0).attr("y",function(M,z){return z=M.order,z*m+E-2}).attr("width",function(){return P-s.rightPadding/2}).attr("height",m).attr("class",function(M){for(const[z,st]of p.entries())if(M.type===st)return"section section"+z%s.numberSectionStyles;return"section section0"});const D=y.append("g").selectAll("rect").data(S).enter(),F=r.db.getLinks();if(D.append("rect").attr("id",function(M){return M.id}).attr("rx",3).attr("ry",3).attr("x",function(M){return M.milestone?x(M.startTime)+f+.5*(x(M.endTime)-x(M.startTime))-.5*L:x(M.startTime)+f}).attr("y",function(M,z){return z=M.order,z*m+E}).attr("width",function(M){return M.milestone?L:x(M.renderEndTime||M.endTime)-x(M.startTime)}).attr("height",L).attr("transform-origin",function(M,z){return z=M.order,(x(M.startTime)+f+.5*(x(M.endTime)-x(M.startTime))).toString()+"px "+(z*m+E+.5*L).toString()+"px"}).attr("class",function(M){const z="task";let st="";M.classes.length>0&&(st=M.classes.join(" "));let j=0;for(const[K,G]of p.entries())M.type===G&&(j=K%s.numberSectionStyles);let dt="";return M.active?M.crit?dt+=" activeCrit":dt=" active":M.done?M.crit?dt=" doneCrit":dt=" done":M.crit&&(dt+=" crit"),dt.length===0&&(dt=" task"),M.milestone&&(dt=" milestone "+dt),dt+=j,dt+=" "+st,z+dt}),D.append("text").attr("id",function(M){return M.id+"-text"}).text(function(M){return M.task}).attr("font-size",s.fontSize).attr("x",function(M){let z=x(M.startTime),st=x(M.renderEndTime||M.endTime);M.milestone&&(z+=.5*(x(M.endTime)-x(M.startTime))-.5*L),M.milestone&&(st=z+L);const j=this.getBBox().width;return j>st-z?st+j+1.5*s.leftPadding>P?z+f-5:st+f+5:(st-z)/2+z+f}).attr("y",function(M,z){return z=M.order,z*m+s.barHeight/2+(s.fontSize/2-2)+E}).attr("text-height",L).attr("class",function(M){const z=x(M.startTime);let st=x(M.endTime);M.milestone&&(st=z+L);const j=this.getBBox().width;let dt="";M.classes.length>0&&(dt=M.classes.join(" "));let K=0;for(const[tt,nt]of p.entries())M.type===nt&&(K=tt%s.numberSectionStyles);let G="";return M.active&&(M.crit?G="activeCritText"+K:G="activeText"+K),M.done?M.crit?G=G+" doneCritText"+K:G=G+" doneText"+K:M.crit&&(G=G+" critText"+K),M.milestone&&(G+=" milestoneText"),j>st-z?st+j+1.5*s.leftPadding>P?dt+" taskTextOutsideLeft taskTextOutside"+K+" "+G:dt+" taskTextOutsideRight taskTextOutside"+K+" "+G+" width-"+j:dt+" taskText taskText"+K+" "+G+" width-"+j}),Y().securityLevel==="sandbox"){let M;M=yt("#i"+e);const z=M.nodes()[0].contentDocument;D.filter(function(st){return F[st.id]!==void 0}).each(function(st){var j=z.querySelector("#"+st.id),dt=z.querySelector("#"+st.id+"-text");const K=j.parentNode;var G=z.createElement("a");G.setAttribute("xlink:href",F[st.id]),G.setAttribute("target","_top"),K.appendChild(G),G.appendChild(j),G.appendChild(dt)})}}function R(S,m,E,f,L,b,P,U){if(P.length===0&&U.length===0)return;let N,D;for(const{startTime:j,endTime:dt}of b)(N===void 0||j<N)&&(N=j),(D===void 0||dt>D)&&(D=dt);if(!N||!D)return;if(Fe(D).diff(Fe(N),"year")>5){B.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const F=r.db.getDateFormat(),I=[];let M=null,z=Fe(N);for(;z.valueOf()<=D;)r.db.isInvalidDate(z,F,P,U)?M?M.end=z:M={start:z,end:z}:M&&(I.push(M),M=null),z=z.add(1,"d");y.append("g").selectAll("rect").data(I).enter().append("rect").attr("id",function(j){return"exclude-"+j.start.format("YYYY-MM-DD")}).attr("x",function(j){return x(j.start)+E}).attr("y",s.gridLineStartPadding).attr("width",function(j){const dt=j.end.add(1,"day");return x(dt)-x(j.start)}).attr("height",L-m-s.gridLineStartPadding).attr("transform-origin",function(j,dt){return(x(j.start)+E+.5*(x(j.end)-x(j.start))).toString()+"px "+(dt*S+.5*L).toString()+"px"}).attr("class","exclude-range")}function A(S,m,E,f){let L=i2(x).tickSize(-f+m+s.gridLineStartPadding).tickFormat(uc(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));const P=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||s.tickInterval);if(P!==null){const U=P[1],N=P[2],D=r.db.getWeekday()||s.weekday;switch(N){case"millisecond":L.ticks(mc.every(U));break;case"second":L.ticks(yc.every(U));break;case"minute":L.ticks(gc.every(U));break;case"hour":L.ticks(pc.every(U));break;case"day":L.ticks(fc.every(U));break;case"week":L.ticks(th[D].every(U));break;case"month":L.ticks(dc.every(U));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+S+", "+(f-50)+")").call(L).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||s.topAxis){let U=r2(x).tickSize(-f+m+s.gridLineStartPadding).tickFormat(uc(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));if(P!==null){const N=P[1],D=P[2],F=r.db.getWeekday()||s.weekday;switch(D){case"millisecond":U.ticks(mc.every(N));break;case"second":U.ticks(yc.every(N));break;case"minute":U.ticks(gc.every(N));break;case"hour":U.ticks(pc.every(N));break;case"day":U.ticks(fc.every(N));break;case"week":U.ticks(th[F].every(N));break;case"month":U.ticks(dc.every(N));break}}y.append("g").attr("class","grid").attr("transform","translate("+S+", "+m+")").call(U).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function T(S,m){let E=0;const f=Object.keys(d).map(L=>[L,d[L]]);y.append("g").selectAll("text").data(f).enter().append(function(L){const b=L[0].split(mt.lineBreakRegex),P=-(b.length-1)/2,U=l.createElementNS("http://www.w3.org/2000/svg","text");U.setAttribute("dy",P+"em");for(const[N,D]of b.entries()){const F=l.createElementNS("http://www.w3.org/2000/svg","tspan");F.setAttribute("alignment-baseline","central"),F.setAttribute("x","10"),N>0&&F.setAttribute("dy","1em"),F.textContent=D,U.appendChild(F)}return U}).attr("x",10).attr("y",function(L,b){if(b>0)for(let P=0;P<b;P++)return E+=f[b-1][1],L[1]*S/2+E*S+m;else return L[1]*S/2+m}).attr("font-size",s.sectionFontSize).attr("class",function(L){for(const[b,P]of p.entries())if(L[0]===P)return"sectionTitle sectionTitle"+b%s.numberSectionStyles;return"sectionTitle"})}function k(S,m,E,f){const L=r.db.getTodayMarker();if(L==="off")return;const b=y.append("g").attr("class","today"),P=new Date,U=b.append("line");U.attr("x1",x(P)+S).attr("x2",x(P)+S).attr("y1",s.titleTopMargin).attr("y2",f-s.titleTopMargin).attr("class","today"),L!==""&&U.attr("style",L.replace(/,/g,";"))}function w(S){const m={},E=[];for(let f=0,L=S.length;f<L;++f)Object.prototype.hasOwnProperty.call(m,S[f])||(m[S[f]]=!0,E.push(S[f]));return E}},Dk={setConf:Lk,draw:Ik},Fk=t=>`
  .mermaid-main-font {
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${t.fontFamily};
    fill: ${t.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.titleColor||t.textColor};
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }
`,Rk=Fk,Nk={parser:j5,db:Ak,renderer:Dk,styles:Rk},Ok=Object.freeze(Object.defineProperty({__proto__:null,diagram:Nk},Symbol.toStringTag,{value:"Module"}));var Eo=function(){var t=function(n,a,o,l){for(o=o||{},l=n.length;l--;o[n[l]]=a);return o},e=[6,9,10],i={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,l,h,u,p,d){switch(p.length-1,u){case 1:return h;case 4:break;case 6:h.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var l=new Error(a);throw l.hash=o,l}},parse:function(a){var o=this,l=[0],h=[],u=[null],p=[],d=this.table,g="",y=0,x=0,_=2,v=1,C=p.slice.call(arguments,1),R=Object.create(this.lexer),A={yy:{}};for(var T in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T)&&(A.yy[T]=this.yy[T]);R.setInput(a,A.yy),A.yy.lexer=R,A.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var k=R.yylloc;p.push(k);var w=R.options&&R.options.ranges;typeof A.yy.parseError=="function"?this.parseError=A.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function S(){var I;return I=h.pop()||R.lex()||v,typeof I!="number"&&(I instanceof Array&&(h=I,I=h.pop()),I=o.symbols_[I]||I),I}for(var m,E,f,L,b={},P,U,N,D;;){if(E=l[l.length-1],this.defaultActions[E]?f=this.defaultActions[E]:((m===null||typeof m>"u")&&(m=S()),f=d[E]&&d[E][m]),typeof f>"u"||!f.length||!f[0]){var F="";D=[];for(P in d[E])this.terminals_[P]&&P>_&&D.push("'"+this.terminals_[P]+"'");R.showPosition?F="Parse error on line "+(y+1)+`:
`+R.showPosition()+`
Expecting `+D.join(", ")+", got '"+(this.terminals_[m]||m)+"'":F="Parse error on line "+(y+1)+": Unexpected "+(m==v?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(F,{text:R.match,token:this.terminals_[m]||m,line:R.yylineno,loc:k,expected:D})}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+E+", token: "+m);switch(f[0]){case 1:l.push(m),u.push(R.yytext),p.push(R.yylloc),l.push(f[1]),m=null,x=R.yyleng,g=R.yytext,y=R.yylineno,k=R.yylloc;break;case 2:if(U=this.productions_[f[1]][1],b.$=u[u.length-U],b._$={first_line:p[p.length-(U||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(U||1)].first_column,last_column:p[p.length-1].last_column},w&&(b._$.range=[p[p.length-(U||1)].range[0],p[p.length-1].range[1]]),L=this.performAction.apply(b,[g,x,y,A.yy,f[1],u,p].concat(C)),typeof L<"u")return L;U&&(l=l.slice(0,-1*U*2),u=u.slice(0,-1*U),p=p.slice(0,-1*U)),l.push(this.productions_[f[1]][0]),u.push(b.$),p.push(b._$),N=d[l[l.length-2]][l[l.length-1]],l.push(N);break;case 3:return!0}}return!0}},r=function(){var n={EOF:1,parseError:function(o,l){if(this.yy.parser)this.yy.parser.parseError(o,l);else throw new Error(o)},setInput:function(a,o){return this.yy=o||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var o=a.match(/(?:\r\n?|\n).*/g);return o?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var o=a.length,l=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-o),this.offset-=o;var h=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var u=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===h.length?this.yylloc.first_column:0)+h[h.length-l.length].length-l[0].length:this.yylloc.first_column-o},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-o]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),o=new Array(a.length+1).join("-");return a+this.upcomingInput()+`
`+o+"^"},test_match:function(a,o){var l,h,u;if(this.options.backtrack_lexer&&(u={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(u.yylloc.range=this.yylloc.range.slice(0))),h=a[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],l=this.performAction.call(this,this.yy,this,o,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var p in u)this[p]=u[p];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,o,l,h;this._more||(this.yytext="",this.match="");for(var u=this._currentRules(),p=0;p<u.length;p++)if(l=this._input.match(this.rules[u[p]]),l&&(!o||l[0].length>o[0].length)){if(o=l,h=p,this.options.backtrack_lexer){if(a=this.test_match(l,u[p]),a!==!1)return a;if(this._backtrack){o=!1;continue}else return!1}else if(!this.options.flex)break}return o?(a=this.test_match(o,u[h]),a!==!1?a:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,l,h,u){switch(h){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return n}();i.lexer=r;function s(){this.yy={}}return s.prototype=i,i.Parser=s,new s}();Eo.parser=Eo;const Pk=Eo,U0={info:!1};let Ol=U0.info;const Mk=t=>{Ol=t},Vk=()=>Ol,zk=()=>{Ol=U0.info},qk={clear:zk,setInfo:Mk,getInfo:Vk},Wk=(t,e,i)=>{B.debug(`rendering info diagram
`+t);const r=cn(e);Oe(r,100,400,!0),r.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${i}`)},Yk={draw:Wk},Uk={parser:Pk,db:qk,renderer:Yk},Hk=Object.freeze(Object.defineProperty({__proto__:null,diagram:Uk},Symbol.toStringTag,{value:"Module"}));var So=function(){var t=function(R,A,T,k){for(T=T||{},k=R.length;k--;T[R[k]]=A);return T},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,10,12,14,16,18,19,20,21,22],a=[2,4],o=[1,5,10,12,14,16,18,19,20,21,22],l=[20,21,22],h=[2,7],u=[1,12],p=[1,13],d=[1,14],g=[1,15],y=[1,16],x=[1,17],_={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,PIE:5,document:6,showData:7,line:8,statement:9,txt:10,value:11,title:12,title_value:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,section:19,NEWLINE:20,";":21,EOF:22,$accept:0,$end:1},terminals_:{2:"error",5:"PIE",7:"showData",10:"txt",11:"value",12:"title",13:"title_value",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"section",20:"NEWLINE",21:";",22:"EOF"},productions_:[0,[3,2],[3,2],[3,3],[6,0],[6,2],[8,2],[9,0],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[4,1],[4,1],[4,1]],performAction:function(A,T,k,w,S,m,E){var f=m.length-1;switch(S){case 3:w.setShowData(!0);break;case 6:this.$=m[f-1];break;case 8:w.addSection(m[f-1],w.cleanupValue(m[f]));break;case 9:this.$=m[f].trim(),w.setDiagramTitle(this.$);break;case 10:this.$=m[f].trim(),w.setAccTitle(this.$);break;case 11:case 12:this.$=m[f].trim(),w.setAccDescription(this.$);break;case 13:w.addSection(m[f].substr(8)),this.$=m[f].substr(8);break}},table:[{3:1,4:2,5:e,20:i,21:r,22:s},{1:[3]},{3:7,4:2,5:e,20:i,21:r,22:s},t(n,a,{6:8,7:[1,9]}),t(o,[2,14]),t(o,[2,15]),t(o,[2,16]),{1:[2,1]},t(l,h,{8:10,9:11,1:[2,2],10:u,12:p,14:d,16:g,18:y,19:x}),t(n,a,{6:18}),t(n,[2,5]),{4:19,20:i,21:r,22:s},{11:[1,20]},{13:[1,21]},{15:[1,22]},{17:[1,23]},t(l,[2,12]),t(l,[2,13]),t(l,h,{8:10,9:11,1:[2,3],10:u,12:p,14:d,16:g,18:y,19:x}),t(n,[2,6]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11])],defaultActions:{7:[2,1]},parseError:function(A,T){if(T.recoverable)this.trace(A);else{var k=new Error(A);throw k.hash=T,k}},parse:function(A){var T=this,k=[0],w=[],S=[null],m=[],E=this.table,f="",L=0,b=0,P=2,U=1,N=m.slice.call(arguments,1),D=Object.create(this.lexer),F={yy:{}};for(var I in this.yy)Object.prototype.hasOwnProperty.call(this.yy,I)&&(F.yy[I]=this.yy[I]);D.setInput(A,F.yy),F.yy.lexer=D,F.yy.parser=this,typeof D.yylloc>"u"&&(D.yylloc={});var M=D.yylloc;m.push(M);var z=D.options&&D.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=w.pop()||D.lex()||U,typeof W!="number"&&(W instanceof Array&&(w=W,W=w.pop()),W=T.symbols_[W]||W),W}for(var j,dt,K,G,tt={},nt,Q,J,O;;){if(dt=k[k.length-1],this.defaultActions[dt]?K=this.defaultActions[dt]:((j===null||typeof j>"u")&&(j=st()),K=E[dt]&&E[dt][j]),typeof K>"u"||!K.length||!K[0]){var at="";O=[];for(nt in E[dt])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");D.showPosition?at="Parse error on line "+(L+1)+`:
`+D.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[j]||j)+"'":at="Parse error on line "+(L+1)+": Unexpected "+(j==U?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(at,{text:D.match,token:this.terminals_[j]||j,line:D.yylineno,loc:M,expected:O})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+j);switch(K[0]){case 1:k.push(j),S.push(D.yytext),m.push(D.yylloc),k.push(K[1]),j=null,b=D.yyleng,f=D.yytext,L=D.yylineno,M=D.yylloc;break;case 2:if(Q=this.productions_[K[1]][1],tt.$=S[S.length-Q],tt._$={first_line:m[m.length-(Q||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(Q||1)].first_column,last_column:m[m.length-1].last_column},z&&(tt._$.range=[m[m.length-(Q||1)].range[0],m[m.length-1].range[1]]),G=this.performAction.apply(tt,[f,b,L,F.yy,K[1],S,m].concat(N)),typeof G<"u")return G;Q&&(k=k.slice(0,-1*Q*2),S=S.slice(0,-1*Q),m=m.slice(0,-1*Q)),k.push(this.productions_[K[1]][0]),S.push(tt.$),m.push(tt._$),J=E[k[k.length-2]][k[k.length-1]],k.push(J);break;case 3:return!0}}return!0}},v=function(){var R={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(A,T){return this.yy=T||this.yy||{},this._input=A,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var A=this._input[0];this.yytext+=A,this.yyleng++,this.offset++,this.match+=A,this.matched+=A;var T=A.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),A},unput:function(A){var T=A.length,k=A.split(/(?:\r\n?|\n)/g);this._input=A+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var w=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===w.length?this.yylloc.first_column:0)+w[w.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(A){this.unput(this.match.slice(A))},pastInput:function(){var A=this.matched.substr(0,this.matched.length-this.match.length);return(A.length>20?"...":"")+A.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var A=this.match;return A.length<20&&(A+=this._input.substr(0,20-A.length)),(A.substr(0,20)+(A.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var A=this.pastInput(),T=new Array(A.length+1).join("-");return A+this.upcomingInput()+`
`+T+"^"},test_match:function(A,T){var k,w,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),w=A[0].match(/(?:\r\n?|\n).*/g),w&&(this.yylineno+=w.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:w?w[w.length-1].length-w[w.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+A[0].length},this.yytext+=A[0],this.match+=A[0],this.matches=A,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(A[0].length),this.matched+=A[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var m in S)this[m]=S[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var A,T,k,w;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),m=0;m<S.length;m++)if(k=this._input.match(this.rules[S[m]]),k&&(!T||k[0].length>T[0].length)){if(T=k,w=m,this.options.backtrack_lexer){if(A=this.test_match(k,S[m]),A!==!1)return A;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(A=this.test_match(T,S[w]),A!==!1?A:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(T,k,w,S){switch(w){case 0:break;case 1:break;case 2:return 20;case 3:break;case 4:break;case 5:return this.begin("title"),12;case 6:return this.popState(),"title_value";case 7:return this.begin("acc_title"),14;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),16;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"txt";case 17:return 5;case 18:return 7;case 19:return"value";case 20:return 22}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[6],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,7,9,11,14,17,18,19,20],inclusive:!0}}};return R}();_.lexer=v;function C(){this.yy={}}return C.prototype=_,_.Parser=C,new C}();So.parser=So;const Gk=So,H0=$t.pie,aa={sections:{},showData:!1,config:H0};let oa=aa.sections,Pl=aa.showData;const jk=structuredClone(H0),Xk=()=>structuredClone(jk),$k=()=>{oa=structuredClone(aa.sections),Pl=aa.showData,Pe()},Kk=(t,e)=>{t=ue(t,Y()),oa[t]===void 0&&(oa[t]=e,B.debug(`added new section: ${t}, with value: ${e}`))},Qk=()=>oa,Zk=t=>(t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())),Jk=t=>{Pl=t},t6=()=>Pl,e6={getConfig:Xk,clear:$k,setDiagramTitle:si,getDiagramTitle:je,setAccTitle:Me,getAccTitle:Ue,setAccDescription:He,getAccDescription:Ge,addSection:Kk,getSections:Qk,cleanupValue:Zk,setShowData:Jk,getShowData:t6},i6=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,r6=i6,s6=t=>{const e=Object.entries(t).map(r=>({label:r[0],value:r[1]})).sort((r,s)=>s.value-r.value);return Kf().value(r=>r.value)(e)},n6=(t,e,i,r)=>{B.debug(`rendering pie chart
`+t);const s=r.db,n=Y(),a=ln(s.getConfig(),n.pie),o=40,l=18,h=4,u=450,p=u,d=cn(e),g=d.append("g"),y=s.getSections();g.attr("transform","translate("+p/2+","+u/2+")");const{themeVariables:x}=n;let[_]=qr(x.pieOuterStrokeWidth);_??(_=2);const v=a.textPosition,C=Math.min(p,u)/2-o,R=ns().innerRadius(0).outerRadius(C),A=ns().innerRadius(C*v).outerRadius(C*v);g.append("circle").attr("cx",0).attr("cy",0).attr("r",C+_/2).attr("class","pieOuterCircle");const T=s6(y),k=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],w=Ko(k);g.selectAll("mySlices").data(T).enter().append("path").attr("d",R).attr("fill",L=>w(L.data.label)).attr("class","pieCircle");let S=0;Object.keys(y).forEach(L=>{S+=y[L]}),g.selectAll("mySlices").data(T).enter().append("text").text(L=>(L.data.value/S*100).toFixed(0)+"%").attr("transform",L=>"translate("+A.centroid(L)+")").style("text-anchor","middle").attr("class","slice"),g.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-(u-50)/2).attr("class","pieTitleText");const m=g.selectAll(".legend").data(w.domain()).enter().append("g").attr("class","legend").attr("transform",(L,b)=>{const P=l+h,U=P*w.domain().length/2,N=12*l,D=b*P-U;return"translate("+N+","+D+")"});m.append("rect").attr("width",l).attr("height",l).style("fill",w).style("stroke",w),m.data(T).append("text").attr("x",l+h).attr("y",l-h).text(L=>{const{label:b,value:P}=L.data;return s.getShowData()?`${b} [${P}]`:b});const E=Math.max(...m.selectAll("text").nodes().map(L=>L?.getBoundingClientRect().width??0)),f=p+o+l+h+E;d.attr("viewBox",`0 0 ${f} ${u}`),Oe(d,u,f,a.useMaxWidth)},a6={draw:n6},o6={parser:Gk,db:e6,renderer:a6,styles:r6},l6=Object.freeze(Object.defineProperty({__proto__:null,diagram:o6},Symbol.toStringTag,{value:"Module"}));var wo=function(){var t=function(K,G,tt,nt){for(tt=tt||{},nt=K.length;nt--;tt[K[nt]]=G);return tt},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,7],a=[1,5,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],o=[1,5,6,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],l=[32,33,34],h=[2,7],u=[1,13],p=[1,17],d=[1,18],g=[1,19],y=[1,20],x=[1,21],_=[1,22],v=[1,23],C=[1,24],R=[1,25],A=[1,26],T=[1,27],k=[1,30],w=[1,31],S=[1,32],m=[1,33],E=[1,34],f=[1,35],L=[1,36],b=[1,37],P=[1,38],U=[1,39],N=[1,40],D=[1,41],F=[1,42],I=[1,57],M=[1,58],z=[5,22,26,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51],st={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,SPACE:5,QUADRANT:6,document:7,line:8,statement:9,axisDetails:10,quadrantDetails:11,points:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,text:21,point_start:22,point_x:23,point_y:24,"X-AXIS":25,"AXIS-TEXT-DELIMITER":26,"Y-AXIS":27,QUADRANT_1:28,QUADRANT_2:29,QUADRANT_3:30,QUADRANT_4:31,NEWLINE:32,SEMI:33,EOF:34,alphaNumToken:35,textNoTagsToken:36,STR:37,MD_STR:38,alphaNum:39,PUNCTUATION:40,AMP:41,NUM:42,ALPHA:43,COMMA:44,PLUS:45,EQUALS:46,MULT:47,DOT:48,BRKT:49,UNDERSCORE:50,MINUS:51,$accept:0,$end:1},terminals_:{2:"error",5:"SPACE",6:"QUADRANT",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",22:"point_start",23:"point_x",24:"point_y",25:"X-AXIS",26:"AXIS-TEXT-DELIMITER",27:"Y-AXIS",28:"QUADRANT_1",29:"QUADRANT_2",30:"QUADRANT_3",31:"QUADRANT_4",32:"NEWLINE",33:"SEMI",34:"EOF",37:"STR",38:"MD_STR",40:"PUNCTUATION",41:"AMP",42:"NUM",43:"ALPHA",44:"COMMA",45:"PLUS",46:"EQUALS",47:"MULT",48:"DOT",49:"BRKT",50:"UNDERSCORE",51:"MINUS"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[9,0],[9,2],[9,1],[9,1],[9,1],[9,2],[9,2],[9,2],[9,1],[9,1],[12,4],[10,4],[10,3],[10,2],[10,4],[10,3],[10,2],[11,2],[11,2],[11,2],[11,2],[4,1],[4,1],[4,1],[21,1],[21,2],[21,1],[21,1],[39,1],[39,2],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[36,1],[36,1]],performAction:function(G,tt,nt,Q,J,O,at){var W=O.length-1;switch(J){case 12:this.$=O[W].trim(),Q.setDiagramTitle(this.$);break;case 13:this.$=O[W].trim(),Q.setAccTitle(this.$);break;case 14:case 15:this.$=O[W].trim(),Q.setAccDescription(this.$);break;case 16:Q.addSection(O[W].substr(8)),this.$=O[W].substr(8);break;case 17:Q.addPoint(O[W-3],O[W-1],O[W]);break;case 18:Q.setXAxisLeftText(O[W-2]),Q.setXAxisRightText(O[W]);break;case 19:O[W-1].text+="  ",Q.setXAxisLeftText(O[W-1]);break;case 20:Q.setXAxisLeftText(O[W]);break;case 21:Q.setYAxisBottomText(O[W-2]),Q.setYAxisTopText(O[W]);break;case 22:O[W-1].text+="  ",Q.setYAxisBottomText(O[W-1]);break;case 23:Q.setYAxisBottomText(O[W]);break;case 24:Q.setQuadrant1Text(O[W]);break;case 25:Q.setQuadrant2Text(O[W]);break;case 26:Q.setQuadrant3Text(O[W]);break;case 27:Q.setQuadrant4Text(O[W]);break;case 31:this.$={text:O[W],type:"text"};break;case 32:this.$={text:O[W-1].text+""+O[W],type:O[W-1].type};break;case 33:this.$={text:O[W],type:"text"};break;case 34:this.$={text:O[W],type:"markdown"};break;case 35:this.$=O[W];break;case 36:this.$=O[W-1]+""+O[W];break}},table:[{3:1,4:2,5:e,6:i,32:r,33:s,34:n},{1:[3]},{3:8,4:2,5:e,6:i,32:r,33:s,34:n},{3:9,4:2,5:e,6:i,32:r,33:s,34:n},t(a,[2,4],{7:10}),t(o,[2,28]),t(o,[2,29]),t(o,[2,30]),{1:[2,1]},{1:[2,2]},t(l,h,{8:11,9:12,10:14,11:15,12:16,21:28,35:29,1:[2,3],5:u,13:p,15:d,17:g,19:y,20:x,25:_,27:v,28:C,29:R,30:A,31:T,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),t(a,[2,5]),{4:43,32:r,33:s,34:n},t(l,h,{10:14,11:15,12:16,21:28,35:29,9:44,5:u,13:p,15:d,17:g,19:y,20:x,25:_,27:v,28:C,29:R,30:A,31:T,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),{14:[1,45]},{16:[1,46]},{18:[1,47]},t(l,[2,15]),t(l,[2,16]),{21:48,35:29,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:49,35:29,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:50,35:29,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:51,35:29,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:52,35:29,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:53,35:29,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{5:I,22:[1,54],35:56,36:55,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M},t(z,[2,31]),t(z,[2,33]),t(z,[2,34]),t(z,[2,37]),t(z,[2,38]),t(z,[2,39]),t(z,[2,40]),t(z,[2,41]),t(z,[2,42]),t(z,[2,43]),t(z,[2,44]),t(z,[2,45]),t(z,[2,46]),t(z,[2,47]),t(a,[2,6]),t(l,[2,8]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,20],{36:55,35:56,5:I,26:[1,59],40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,23],{36:55,35:56,5:I,26:[1,60],40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,24],{36:55,35:56,5:I,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,25],{36:55,35:56,5:I,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,26],{36:55,35:56,5:I,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,27],{36:55,35:56,5:I,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),{23:[1,61]},t(z,[2,32]),t(z,[2,48]),t(z,[2,49]),t(z,[2,50]),t(l,[2,19],{35:29,21:62,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),t(l,[2,22],{35:29,21:63,37:k,38:w,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),{24:[1,64]},t(l,[2,18],{36:55,35:56,5:I,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,21],{36:55,35:56,5:I,40:S,41:m,42:E,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,17])],defaultActions:{8:[2,1],9:[2,2]},parseError:function(G,tt){if(tt.recoverable)this.trace(G);else{var nt=new Error(G);throw nt.hash=tt,nt}},parse:function(G){var tt=this,nt=[0],Q=[],J=[null],O=[],at=this.table,W="",ft=0,V=0,vt=2,X=1,St=O.slice.call(arguments,1),bt=Object.create(this.lexer),Vt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Vt.yy[Bt]=this.yy[Bt]);bt.setInput(G,Vt.yy),Vt.yy.lexer=bt,Vt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var zt;return zt=Q.pop()||bt.lex()||X,typeof zt!="number"&&(zt instanceof Array&&(Q=zt,zt=Q.pop()),zt=tt.symbols_[zt]||zt),zt}for(var ot,lt,ht,$,rt={},it,ct,ee,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var de="";Qt=[];for(it in at[lt])this.terminals_[it]&&it>vt&&Qt.push("'"+this.terminals_[it]+"'");bt.showPosition?de="Parse error on line "+(ft+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":de="Parse error on line "+(ft+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(de,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),J.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,V=bt.yyleng,W=bt.yytext,ft=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=J[J.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),$=this.performAction.apply(rt,[W,V,ft,Vt.yy,ht[1],J,O].concat(St)),typeof $<"u")return $;ct&&(nt=nt.slice(0,-1*ct*2),J=J.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),J.push(rt.$),O.push(rt._$),ee=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(ee);break;case 3:return!0}}return!0}},j=function(){var K={EOF:1,parseError:function(tt,nt){if(this.yy.parser)this.yy.parser.parseError(tt,nt);else throw new Error(tt)},setInput:function(G,tt){return this.yy=tt||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var tt=G.match(/(?:\r\n?|\n).*/g);return tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var tt=G.length,nt=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-tt),this.offset-=tt;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-nt.length].length-nt[0].length:this.yylloc.first_column-tt},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-tt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),tt=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+tt+"^"},test_match:function(G,tt){var nt,Q,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),Q=G[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],nt=this.performAction.call(this,this.yy,this,tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in J)this[O]=J[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,tt,nt,Q;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),O=0;O<J.length;O++)if(nt=this._input.match(this.rules[J[O]]),nt&&(!tt||nt[0].length>tt[0].length)){if(tt=nt,Q=O,this.options.backtrack_lexer){if(G=this.test_match(nt,J[O]),G!==!1)return G;if(this._backtrack){tt=!1;continue}else return!1}else if(!this.options.flex)break}return tt?(G=this.test_match(tt,J[Q]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var tt=this.next();return tt||this.lex()},begin:function(tt){this.conditionStack.push(tt)},popState:function(){var tt=this.conditionStack.length-1;return tt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(tt){return tt=this.conditionStack.length-1-Math.abs(tt||0),tt>=0?this.conditionStack[tt]:"INITIAL"},pushState:function(tt){this.begin(tt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(tt,nt,Q,J){switch(Q){case 0:break;case 1:break;case 2:return 32;case 3:break;case 4:return this.begin("title"),13;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),15;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),17;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 25;case 14:return 27;case 15:return 26;case 16:return 28;case 17:return 29;case 18:return 30;case 19:return 31;case 20:this.begin("md_string");break;case 21:return"MD_STR";case 22:this.popState();break;case 23:this.begin("string");break;case 24:this.popState();break;case 25:return"STR";case 26:return this.begin("point_start"),22;case 27:return this.begin("point_x"),23;case 28:this.popState();break;case 29:this.popState(),this.begin("point_y");break;case 30:return this.popState(),24;case 31:return 6;case 32:return 43;case 33:return"COLON";case 34:return 45;case 35:return 44;case 36:return 46;case 37:return 46;case 38:return 47;case 39:return 49;case 40:return 50;case 41:return 48;case 42:return 41;case 43:return 51;case 44:return 42;case 45:return 5;case 46:return 33;case 47:return 40;case 48:return 34}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{point_y:{rules:[30],inclusive:!1},point_x:{rules:[29],inclusive:!1},point_start:{rules:[27,28],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[21,22],inclusive:!1},string:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,23,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return K}();st.lexer=j;function dt(){this.yy={}}return dt.prototype=st,st.Parser=dt,new dt}();wo.parser=wo;const c6=wo,Ve=el();class h6{constructor(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var e,i,r,s,n,a,o,l,h,u,p,d,g,y,x,_,v,C;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((e=$t.quadrantChart)==null?void 0:e.chartWidth)||500,chartWidth:((i=$t.quadrantChart)==null?void 0:i.chartHeight)||500,titlePadding:((r=$t.quadrantChart)==null?void 0:r.titlePadding)||10,titleFontSize:((s=$t.quadrantChart)==null?void 0:s.titleFontSize)||20,quadrantPadding:((n=$t.quadrantChart)==null?void 0:n.quadrantPadding)||5,xAxisLabelPadding:((a=$t.quadrantChart)==null?void 0:a.xAxisLabelPadding)||5,yAxisLabelPadding:((o=$t.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=$t.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((h=$t.quadrantChart)==null?void 0:h.yAxisLabelFontSize)||16,quadrantLabelFontSize:((u=$t.quadrantChart)==null?void 0:u.quadrantLabelFontSize)||16,quadrantTextTopPadding:((p=$t.quadrantChart)==null?void 0:p.quadrantTextTopPadding)||5,pointTextPadding:((d=$t.quadrantChart)==null?void 0:d.pointTextPadding)||5,pointLabelFontSize:((g=$t.quadrantChart)==null?void 0:g.pointLabelFontSize)||12,pointRadius:((y=$t.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((x=$t.quadrantChart)==null?void 0:x.xAxisPosition)||"top",yAxisPosition:((_=$t.quadrantChart)==null?void 0:_.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((v=$t.quadrantChart)==null?void 0:v.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((C=$t.quadrantChart)==null?void 0:C.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:Ve.quadrant1Fill,quadrant2Fill:Ve.quadrant2Fill,quadrant3Fill:Ve.quadrant3Fill,quadrant4Fill:Ve.quadrant4Fill,quadrant1TextFill:Ve.quadrant1TextFill,quadrant2TextFill:Ve.quadrant2TextFill,quadrant3TextFill:Ve.quadrant3TextFill,quadrant4TextFill:Ve.quadrant4TextFill,quadrantPointFill:Ve.quadrantPointFill,quadrantPointTextFill:Ve.quadrantPointTextFill,quadrantXAxisTextFill:Ve.quadrantXAxisTextFill,quadrantYAxisTextFill:Ve.quadrantYAxisTextFill,quadrantTitleFill:Ve.quadrantTitleFill,quadrantInternalBorderStrokeFill:Ve.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Ve.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),B.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}setConfig(e){B.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){B.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,i,r,s){const n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:e==="top"&&i?n:0,bottom:e==="bottom"&&i?n:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&r?o:0,right:this.config.yAxisPosition==="right"&&r?o:0},h=this.config.titleFontSize+this.config.titlePadding*2,u={top:s?h:0},p=this.config.quadrantPadding+l.left,d=this.config.quadrantPadding+a.top+u.top,g=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,y=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-u.top,x=g/2,_=y/2;return{xAxisSpace:a,yAxisSpace:l,titleSpace:u,quadrantSpace:{quadrantLeft:p,quadrantTop:d,quadrantWidth:g,quadrantHalfWidth:x,quadrantHeight:y,quadrantHalfHeight:_}}}getAxisLabels(e,i,r,s){const{quadrantSpace:n,titleSpace:a}=s,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:h,quadrantHalfWidth:u,quadrantTop:p,quadrantWidth:d}=n,g=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,x=[];return this.data.xAxisLeftText&&i&&x.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(g?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&i&&x.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+u+(g?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&x.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:p+l-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&x.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:p+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),x}getQuadrants(e){const{quadrantSpace:i}=e,{quadrantHalfHeight:r,quadrantLeft:s,quadrantHalfWidth:n,quadrantTop:a}=i,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a,width:n,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a,width:n,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:i}=e,{quadrantHeight:r,quadrantLeft:s,quadrantTop:n,quadrantWidth:a}=i,o=Vs().domain([0,1]).range([s,a+s]),l=Vs().domain([0,1]).range([r+n,n]);return this.data.points.map(u=>({x:o(u.x),y:l(u.y),fill:this.themeConfig.quadrantPointFill,radius:this.config.pointRadius,text:{text:u.text,fill:this.themeConfig.quadrantPointTextFill,x:o(u.x),y:l(u.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0}}))}getBorders(e){const i=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=e,{quadrantHalfHeight:s,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:h}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l,x2:a+h+i,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+h,y1:l+i,x2:a+h,y2:l+n-i},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l+n,x2:a+h+i,y2:l+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:l+i,x2:a,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+o,y1:l+i,x2:a+o,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+i,y1:l+s,x2:a+h-i,y2:l+s}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),i=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,s=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(s,e,i,r);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(s,e,i,n),borderLines:this.getBorders(n),title:this.getTitle(r)}}}const u6=Y();function or(t){return ue(t.trim(),u6)}const Re=new h6;function d6(t){Re.setData({quadrant1Text:or(t.text)})}function f6(t){Re.setData({quadrant2Text:or(t.text)})}function p6(t){Re.setData({quadrant3Text:or(t.text)})}function g6(t){Re.setData({quadrant4Text:or(t.text)})}function y6(t){Re.setData({xAxisLeftText:or(t.text)})}function m6(t){Re.setData({xAxisRightText:or(t.text)})}function x6(t){Re.setData({yAxisTopText:or(t.text)})}function b6(t){Re.setData({yAxisBottomText:or(t.text)})}function k6(t,e,i){Re.addPoints([{x:e,y:i,text:or(t.text)}])}function _6(t){Re.setConfig({chartWidth:t})}function T6(t){Re.setConfig({chartHeight:t})}function C6(){const t=Y(),{themeVariables:e,quadrantChart:i}=t;return i&&Re.setConfig(i),Re.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),Re.setData({titleText:je()}),Re.build()}const E6=function(){Re.clear(),Pe()},S6={setWidth:_6,setHeight:T6,setQuadrant1Text:d6,setQuadrant2Text:f6,setQuadrant3Text:p6,setQuadrant4Text:g6,setXAxisLeftText:y6,setXAxisRightText:m6,setYAxisTopText:x6,setYAxisBottomText:b6,addPoint:k6,getQuadrantData:C6,clear:E6,setAccTitle:Me,getAccTitle:Ue,setDiagramTitle:si,getDiagramTitle:je,getAccDescription:Ge,setAccDescription:He},w6=(t,e,i,r)=>{var s,n,a;function o(f){return f==="top"?"hanging":"middle"}function l(f){return f==="left"?"start":"middle"}function h(f){return`translate(${f.x}, ${f.y}) rotate(${f.rotation||0})`}const u=Y();B.debug(`Rendering quadrant chart
`+t);const p=u.securityLevel;let d;p==="sandbox"&&(d=yt("#i"+e));const y=(p==="sandbox"?yt(d.nodes()[0].contentDocument.body):yt("body")).select(`[id="${e}"]`),x=y.append("g").attr("class","main"),_=((s=u.quadrantChart)==null?void 0:s.chartWidth)||500,v=((n=u.quadrantChart)==null?void 0:n.chartHeight)||500;Oe(y,v,_,((a=u.quadrantChart)==null?void 0:a.useMaxWidth)||!0),y.attr("viewBox","0 0 "+_+" "+v),r.db.setHeight(v),r.db.setWidth(_);const C=r.db.getQuadrantData(),R=x.append("g").attr("class","quadrants"),A=x.append("g").attr("class","border"),T=x.append("g").attr("class","data-points"),k=x.append("g").attr("class","labels"),w=x.append("g").attr("class","title");C.title&&w.append("text").attr("x",0).attr("y",0).attr("fill",C.title.fill).attr("font-size",C.title.fontSize).attr("dominant-baseline",o(C.title.horizontalPos)).attr("text-anchor",l(C.title.verticalPos)).attr("transform",h(C.title)).text(C.title.text),C.borderLines&&A.selectAll("line").data(C.borderLines).enter().append("line").attr("x1",f=>f.x1).attr("y1",f=>f.y1).attr("x2",f=>f.x2).attr("y2",f=>f.y2).style("stroke",f=>f.strokeFill).style("stroke-width",f=>f.strokeWidth);const S=R.selectAll("g.quadrant").data(C.quadrants).enter().append("g").attr("class","quadrant");S.append("rect").attr("x",f=>f.x).attr("y",f=>f.y).attr("width",f=>f.width).attr("height",f=>f.height).attr("fill",f=>f.fill),S.append("text").attr("x",0).attr("y",0).attr("fill",f=>f.text.fill).attr("font-size",f=>f.text.fontSize).attr("dominant-baseline",f=>o(f.text.horizontalPos)).attr("text-anchor",f=>l(f.text.verticalPos)).attr("transform",f=>h(f.text)).text(f=>f.text.text),k.selectAll("g.label").data(C.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(f=>f.text).attr("fill",f=>f.fill).attr("font-size",f=>f.fontSize).attr("dominant-baseline",f=>o(f.horizontalPos)).attr("text-anchor",f=>l(f.verticalPos)).attr("transform",f=>h(f));const E=T.selectAll("g.data-point").data(C.points).enter().append("g").attr("class","data-point");E.append("circle").attr("cx",f=>f.x).attr("cy",f=>f.y).attr("r",f=>f.radius).attr("fill",f=>f.fill),E.append("text").attr("x",0).attr("y",0).text(f=>f.text.text).attr("fill",f=>f.text.fill).attr("font-size",f=>f.text.fontSize).attr("dominant-baseline",f=>o(f.text.horizontalPos)).attr("text-anchor",f=>l(f.text.verticalPos)).attr("transform",f=>h(f.text))},v6={draw:w6},A6={parser:c6,db:S6,renderer:v6,styles:()=>""},L6=Object.freeze(Object.defineProperty({__proto__:null,diagram:A6},Symbol.toStringTag,{value:"Module"}));var vo=function(){var t=function(U,N,D,F){for(D=D||{},F=U.length;F--;D[U[F]]=N);return D},e=[1,10,12,14,16,18,19,21,23],i=[2,6],r=[1,3],s=[1,5],n=[1,6],a=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],h=[1,26],u=[1,28],p=[1,29],d=[1,30],g=[1,31],y=[1,32],x=[1,33],_=[1,34],v=[1,35],C=[1,36],R=[1,37],A=[1,43],T=[1,42],k=[1,47],w=[1,50],S=[1,10,12,14,16,18,19,21,23,34,35,36],m=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],E=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],f=[1,64],L={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:function(N,D,F,I,M,z,st){var j=z.length-1;switch(M){case 5:I.setOrientation(z[j]);break;case 9:I.setDiagramTitle(z[j].text.trim());break;case 12:I.setLineData({text:"",type:"text"},z[j]);break;case 13:I.setLineData(z[j-1],z[j]);break;case 14:I.setBarData({text:"",type:"text"},z[j]);break;case 15:I.setBarData(z[j-1],z[j]);break;case 16:this.$=z[j].trim(),I.setAccTitle(this.$);break;case 17:case 18:this.$=z[j].trim(),I.setAccDescription(this.$);break;case 19:this.$=z[j-1];break;case 20:this.$=[Number(z[j-2]),...z[j]];break;case 21:this.$=[Number(z[j])];break;case 22:I.setXAxisTitle(z[j]);break;case 23:I.setXAxisTitle(z[j-1]);break;case 24:I.setXAxisTitle({type:"text",text:""});break;case 25:I.setXAxisBand(z[j]);break;case 26:I.setXAxisRangeData(Number(z[j-2]),Number(z[j]));break;case 27:this.$=z[j-1];break;case 28:this.$=[z[j-2],...z[j]];break;case 29:this.$=[z[j]];break;case 30:I.setYAxisTitle(z[j]);break;case 31:I.setYAxisTitle(z[j-1]);break;case 32:I.setYAxisTitle({type:"text",text:""});break;case 33:I.setYAxisRangeData(Number(z[j-2]),Number(z[j]));break;case 37:this.$={text:z[j],type:"text"};break;case 38:this.$={text:z[j],type:"text"};break;case 39:this.$={text:z[j],type:"markdown"};break;case 40:this.$=z[j];break;case 41:this.$=z[j-1]+""+z[j];break}},table:[t(e,i,{3:1,4:2,7:4,5:r,34:s,35:n,36:a}),{1:[3]},t(e,i,{4:2,7:4,3:8,5:r,34:s,35:n,36:a}),t(e,i,{4:2,7:4,6:9,3:10,5:r,8:[1,11],34:s,35:n,36:a}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,i,{4:2,7:4,3:21,5:r,34:s,35:n,36:a}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:s,35:n,36:a}),{11:23,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},{11:39,13:38,24:A,27:T,29:40,30:41,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},{11:45,15:44,27:k,33:46,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},{11:49,17:48,24:w,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},{11:52,17:51,24:w,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},{20:[1,53]},{22:[1,54]},t(S,[2,18]),{1:[2,2]},t(S,[2,8]),t(S,[2,9]),t(m,[2,37],{40:55,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R}),t(m,[2,38]),t(m,[2,39]),t(E,[2,40]),t(E,[2,42]),t(E,[2,43]),t(E,[2,44]),t(E,[2,45]),t(E,[2,46]),t(E,[2,47]),t(E,[2,48]),t(E,[2,49]),t(E,[2,50]),t(E,[2,51]),t(S,[2,10]),t(S,[2,22],{30:41,29:56,24:A,27:T}),t(S,[2,24]),t(S,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},t(S,[2,11]),t(S,[2,30],{33:60,27:k}),t(S,[2,32]),{31:[1,61]},t(S,[2,12]),{17:62,24:w},{25:63,27:f},t(S,[2,14]),{17:65,24:w},t(S,[2,16]),t(S,[2,17]),t(E,[2,41]),t(S,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(S,[2,31]),{27:[1,69]},t(S,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(S,[2,15]),t(S,[2,26]),t(S,[2,27]),{11:59,32:72,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:C,50:R},t(S,[2,33]),t(S,[2,19]),{25:73,27:f},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:function(N,D){if(D.recoverable)this.trace(N);else{var F=new Error(N);throw F.hash=D,F}},parse:function(N){var D=this,F=[0],I=[],M=[null],z=[],st=this.table,j="",dt=0,K=0,G=2,tt=1,nt=z.slice.call(arguments,1),Q=Object.create(this.lexer),J={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(J.yy[O]=this.yy[O]);Q.setInput(N,J.yy),J.yy.lexer=Q,J.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var at=Q.yylloc;z.push(at);var W=Q.options&&Q.options.ranges;typeof J.yy.parseError=="function"?this.parseError=J.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ft(){var ot;return ot=I.pop()||Q.lex()||tt,typeof ot!="number"&&(ot instanceof Array&&(I=ot,ot=I.pop()),ot=D.symbols_[ot]||ot),ot}for(var V,vt,X,St,bt={},Vt,Bt,Wt,pt;;){if(vt=F[F.length-1],this.defaultActions[vt]?X=this.defaultActions[vt]:((V===null||typeof V>"u")&&(V=ft()),X=st[vt]&&st[vt][V]),typeof X>"u"||!X.length||!X[0]){var ut="";pt=[];for(Vt in st[vt])this.terminals_[Vt]&&Vt>G&&pt.push("'"+this.terminals_[Vt]+"'");Q.showPosition?ut="Parse error on line "+(dt+1)+`:
`+Q.showPosition()+`
Expecting `+pt.join(", ")+", got '"+(this.terminals_[V]||V)+"'":ut="Parse error on line "+(dt+1)+": Unexpected "+(V==tt?"end of input":"'"+(this.terminals_[V]||V)+"'"),this.parseError(ut,{text:Q.match,token:this.terminals_[V]||V,line:Q.yylineno,loc:at,expected:pt})}if(X[0]instanceof Array&&X.length>1)throw new Error("Parse Error: multiple actions possible at state: "+vt+", token: "+V);switch(X[0]){case 1:F.push(V),M.push(Q.yytext),z.push(Q.yylloc),F.push(X[1]),V=null,K=Q.yyleng,j=Q.yytext,dt=Q.yylineno,at=Q.yylloc;break;case 2:if(Bt=this.productions_[X[1]][1],bt.$=M[M.length-Bt],bt._$={first_line:z[z.length-(Bt||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-(Bt||1)].first_column,last_column:z[z.length-1].last_column},W&&(bt._$.range=[z[z.length-(Bt||1)].range[0],z[z.length-1].range[1]]),St=this.performAction.apply(bt,[j,K,dt,J.yy,X[1],M,z].concat(nt)),typeof St<"u")return St;Bt&&(F=F.slice(0,-1*Bt*2),M=M.slice(0,-1*Bt),z=z.slice(0,-1*Bt)),F.push(this.productions_[X[1]][0]),M.push(bt.$),z.push(bt._$),Wt=st[F[F.length-2]][F[F.length-1]],F.push(Wt);break;case 3:return!0}}return!0}},b=function(){var U={EOF:1,parseError:function(D,F){if(this.yy.parser)this.yy.parser.parseError(D,F);else throw new Error(D)},setInput:function(N,D){return this.yy=D||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var D=N.match(/(?:\r\n?|\n).*/g);return D?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var D=N.length,F=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-D),this.offset-=D;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),F.length-1&&(this.yylineno-=F.length-1);var M=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===I.length?this.yylloc.first_column:0)+I[I.length-F.length].length-F[0].length:this.yylloc.first_column-D},this.options.ranges&&(this.yylloc.range=[M[0],M[0]+this.yyleng-D]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),D=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+D+"^"},test_match:function(N,D){var F,I,M;if(this.options.backtrack_lexer&&(M={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(M.yylloc.range=this.yylloc.range.slice(0))),I=N[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],F=this.performAction.call(this,this.yy,this,D,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),F)return F;if(this._backtrack){for(var z in M)this[z]=M[z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,D,F,I;this._more||(this.yytext="",this.match="");for(var M=this._currentRules(),z=0;z<M.length;z++)if(F=this._input.match(this.rules[M[z]]),F&&(!D||F[0].length>D[0].length)){if(D=F,I=z,this.options.backtrack_lexer){if(N=this.test_match(F,M[z]),N!==!1)return N;if(this._backtrack){D=!1;continue}else return!1}else if(!this.options.flex)break}return D?(N=this.test_match(D,M[I]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var D=this.next();return D||this.lex()},begin:function(D){this.conditionStack.push(D)},popState:function(){var D=this.conditionStack.length-1;return D>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(D){return D=this.conditionStack.length-1-Math.abs(D||0),D>=0?this.conditionStack[D]:"INITIAL"},pushState:function(D){this.begin(D)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(D,F,I,M){switch(I){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return U}();L.lexer=b;function P(){this.yy={}}return P.prototype=L,L.Parser=P,new P}();vo.parser=vo;const B6=vo;function eh(t){return t.type==="bar"}function G0(t){return t.type==="band"}function Fs(t){return t.type==="linear"}class j0{constructor(e){this.parentGroup=e}getMaxDimension(e,i){if(!this.parentGroup)return{width:e.reduce((n,a)=>Math.max(a.length,n),0)*i,height:i};const r={width:0,height:0},s=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",i);for(const n of e){const a=k4(s,1,n),o=a?a.width:n.length*i,l=a?a.height:i;r.width=Math.max(r.width,o),r.height=Math.max(r.height,l)}return s.remove(),r}}const ih=.7,rh=.2;class X0{constructor(e,i,r,s){this.axisConfig=e,this.title=i,this.textDimensionCalculator=r,this.axisThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){ih*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(ih*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let i=e.height;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=rh*e.width;this.outerPadding=Math.min(r.width/2,s);const n=r.height+this.axisConfig.labelPadding*2;this.labelTextHeight=r.height,n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-i}calculateSpaceIfDrawnVertical(e){let i=e.width;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=rh*e.height;this.outerPadding=Math.min(r.height/2,s);const n=r.width+this.axisConfig.labelPadding*2;n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width-i,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${i},${this.boundingRect.y} L ${i},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(i),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const i=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${i},${this.getScaleValue(r)} L ${i-this.axisConfig.tickLength},${this.getScaleValue(r)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i} L ${this.getScaleValue(r)},${i+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(r)},${i+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}}class I6 extends X0{constructor(e,i,r,s,n){super(e,s,n,i),this.categories=r,this.scale=hc().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=hc().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),B.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)||this.getRange()[0]}}class D6 extends X0{constructor(e,i,r,s,n){super(e,s,n,i),this.domain=r,this.scale=Vs().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=Vs().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}}function sh(t,e,i,r){const s=new j0(r);return G0(t)?new I6(e,i,t.categories,t.title,s):new D6(e,i,[t.min,t.max],t.title,s)}class F6{constructor(e,i,r,s){this.textDimensionCalculator=e,this.chartConfig=i,this.chartData=r,this.chartThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const i=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(i.width,e.width),s=i.height+2*this.chartConfig.titlePadding;return i.width<=r&&i.height<=s&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=s,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}}function R6(t,e,i,r){const s=new j0(r);return new F6(s,t,e,i)}class N6{constructor(e,i,r,s,n){this.plotData=e,this.xAxis=i,this.yAxis=r,this.orientation=s,this.plotIndex=n}getDrawableElement(){const e=this.plotData.data.map(r=>[this.xAxis.getScaleValue(r[0]),this.yAxis.getScaleValue(r[1])]);let i;return this.orientation==="horizontal"?i=xr().y(r=>r[0]).x(r=>r[1])(e):i=xr().x(r=>r[0]).y(r=>r[1])(e),i?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:i,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}class O6{constructor(e,i,r,s,n,a){this.barData=e,this.boundingRect=i,this.xAxis=r,this.yAxis=s,this.orientation=n,this.plotIndex=a}getDrawableElement(){const e=this.barData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]),i=.05,r=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-i),s=r/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:this.boundingRect.x,y:n[0]-s,height:r,width:n[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:n[0]-s,y:n[1],width:r,height:this.boundingRect.y+this.boundingRect.height-n[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}}class P6{constructor(e,i,r){this.chartConfig=e,this.chartData=i,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,i){this.xAxis=e,this.yAxis=i}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const e=[];for(const[i,r]of this.chartData.plots.entries())switch(r.type){case"line":{const s=new N6(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break;case"bar":{const s=new O6(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break}return e}}function M6(t,e,i){return new P6(t,e,i)}class V6{constructor(e,i,r,s){this.chartConfig=e,this.chartData=i,this.componentStore={title:R6(e,i,r,s),plot:M6(e,i,r),xAxis:sh(i.xAxis,e.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},s),yAxis:sh(i.yAxis,e.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},s)}}calculateVerticalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:n,height:a});e-=o.width,i-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),s=o.height,i-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:i}),i-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:i}),r=o.width,e-=o.width,e>0&&(n+=e,e=0),i>0&&(a+=i,i=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:s}),this.componentStore.xAxis.setRange([r,r+n]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:s+a}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(l=>eh(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:a,height:o});e-=l.width,i-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),r=l.height,i-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:e,height:i}),e-=l.width,s=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:e,height:i}),i-=l.height,n=r+l.height,e>0&&(a+=e,e=0),i>0&&(o+=i,i=0),this.componentStore.plot.calculateSpace({width:a,height:o}),this.componentStore.plot.setBoundingBoxXY({x:s,y:n}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:s,y:r}),this.componentStore.xAxis.setRange([n,n+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(h=>eh(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const i of Object.values(this.componentStore))e.push(...i.getDrawableElements());return e}}class z6{static build(e,i,r,s){return new V6(e,i,r,s).getDrawableElement()}}let Xs=0,$0,$s=Q0(),Ks=K0(),Ht=Z0(),Ao=Ks.plotColorPalette.split(",").map(t=>t.trim()),Da=!1,Ml=!1;function K0(){const t=el(),e=se();return ln(t.xyChart,e.themeVariables.xyChart)}function Q0(){const t=se();return ln($t.xyChart,t.xyChart)}function Z0(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function Vl(t){const e=se();return ue(t.trim(),e)}function q6(t){$0=t}function W6(t){t==="horizontal"?$s.chartOrientation="horizontal":$s.chartOrientation="vertical"}function Y6(t){Ht.xAxis.title=Vl(t.text)}function J0(t,e){Ht.xAxis={type:"linear",title:Ht.xAxis.title,min:t,max:e},Da=!0}function U6(t){Ht.xAxis={type:"band",title:Ht.xAxis.title,categories:t.map(e=>Vl(e.text))},Da=!0}function H6(t){Ht.yAxis.title=Vl(t.text)}function G6(t,e){Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:t,max:e},Ml=!0}function j6(t){const e=Math.min(...t),i=Math.max(...t),r=Fs(Ht.yAxis)?Ht.yAxis.min:1/0,s=Fs(Ht.yAxis)?Ht.yAxis.max:-1/0;Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:Math.min(r,e),max:Math.max(s,i)}}function td(t){let e=[];if(t.length===0)return e;if(!Da){const i=Fs(Ht.xAxis)?Ht.xAxis.min:1/0,r=Fs(Ht.xAxis)?Ht.xAxis.max:-1/0;J0(Math.min(i,1),Math.max(r,t.length))}if(Ml||j6(t),G0(Ht.xAxis)&&(e=Ht.xAxis.categories.map((i,r)=>[i,t[r]])),Fs(Ht.xAxis)){const i=Ht.xAxis.min,r=Ht.xAxis.max,s=(r-i+1)/t.length,n=[];for(let a=i;a<=r;a+=s)n.push(`${a}`);e=n.map((a,o)=>[a,t[o]])}return e}function ed(t){return Ao[t===0?0:t%Ao.length]}function X6(t,e){const i=td(e);Ht.plots.push({type:"line",strokeFill:ed(Xs),strokeWidth:2,data:i}),Xs++}function $6(t,e){const i=td(e);Ht.plots.push({type:"bar",fill:ed(Xs),data:i}),Xs++}function K6(){if(Ht.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Ht.title=je(),z6.build($s,Ht,Ks,$0)}function Q6(){return Ks}function Z6(){return $s}const J6=function(){Pe(),Xs=0,$s=Q0(),Ht=Z0(),Ks=K0(),Ao=Ks.plotColorPalette.split(",").map(t=>t.trim()),Da=!1,Ml=!1},t_={getDrawableElem:K6,clear:J6,setAccTitle:Me,getAccTitle:Ue,setDiagramTitle:si,getDiagramTitle:je,getAccDescription:Ge,setAccDescription:He,setOrientation:W6,setXAxisTitle:Y6,setXAxisRangeData:J0,setXAxisBand:U6,setYAxisTitle:H6,setYAxisRangeData:G6,setLineData:X6,setBarData:$6,setTmpSVGG:q6,getChartThemeConfig:Q6,getChartConfig:Z6},e_=(t,e,i,r)=>{const s=r.db,n=s.getChartThemeConfig(),a=s.getChartConfig();function o(_){return _==="top"?"text-before-edge":"middle"}function l(_){return _==="left"?"start":_==="right"?"end":"middle"}function h(_){return`translate(${_.x}, ${_.y}) rotate(${_.rotation||0})`}B.debug(`Rendering xychart chart
`+t);const u=cn(e),p=u.append("g").attr("class","main"),d=p.append("rect").attr("width",a.width).attr("height",a.height).attr("class","background");Oe(u,a.height,a.width,!0),u.attr("viewBox",`0 0 ${a.width} ${a.height}`),d.attr("fill",n.backgroundColor),s.setTmpSVGG(u.append("g").attr("class","mermaid-tmp-group"));const g=s.getDrawableElem(),y={};function x(_){let v=p,C="";for(const[R]of _.entries()){let A=p;R>0&&y[C]&&(A=y[C]),C+=_[R],v=y[C],v||(v=y[C]=A.append("g").attr("class",_[R]))}return v}for(const _ of g){if(_.data.length===0)continue;const v=x(_.groupTexts);switch(_.type){case"rect":v.selectAll("rect").data(_.data).enter().append("rect").attr("x",C=>C.x).attr("y",C=>C.y).attr("width",C=>C.width).attr("height",C=>C.height).attr("fill",C=>C.fill).attr("stroke",C=>C.strokeFill).attr("stroke-width",C=>C.strokeWidth);break;case"text":v.selectAll("text").data(_.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",C=>C.fill).attr("font-size",C=>C.fontSize).attr("dominant-baseline",C=>o(C.verticalPos)).attr("text-anchor",C=>l(C.horizontalPos)).attr("transform",C=>h(C)).text(C=>C.text);break;case"path":v.selectAll("path").data(_.data).enter().append("path").attr("d",C=>C.path).attr("fill",C=>C.fill?C.fill:"none").attr("stroke",C=>C.strokeFill).attr("stroke-width",C=>C.strokeWidth);break}}},i_={draw:e_},r_={parser:B6,db:t_,renderer:i_},s_=Object.freeze(Object.defineProperty({__proto__:null,diagram:r_},Symbol.toStringTag,{value:"Module"}));var Lo=function(){var t=function(K,G,tt,nt){for(tt=tt||{},nt=K.length;nt--;tt[K[nt]]=G);return tt},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],a=[1,18],o=[2,7],l=[1,22],h=[1,23],u=[1,24],p=[1,25],d=[1,26],g=[1,27],y=[1,20],x=[1,28],_=[1,29],v=[62,63],C=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],R=[1,47],A=[1,48],T=[1,49],k=[1,50],w=[1,51],S=[1,52],m=[1,53],E=[53,54],f=[1,64],L=[1,60],b=[1,61],P=[1,62],U=[1,63],N=[1,65],D=[1,69],F=[1,70],I=[1,67],M=[1,68],z=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],st={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:function(G,tt,nt,Q,J,O,at){var W=O.length-1;switch(J){case 4:this.$=O[W].trim(),Q.setAccTitle(this.$);break;case 5:case 6:this.$=O[W].trim(),Q.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:Q.addRequirement(O[W-3],O[W-4]);break;case 14:Q.setNewReqId(O[W-2]);break;case 15:Q.setNewReqText(O[W-2]);break;case 16:Q.setNewReqRisk(O[W-2]);break;case 17:Q.setNewReqVerifyMethod(O[W-2]);break;case 20:this.$=Q.RequirementType.REQUIREMENT;break;case 21:this.$=Q.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=Q.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=Q.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=Q.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=Q.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=Q.RiskLevel.LOW_RISK;break;case 27:this.$=Q.RiskLevel.MED_RISK;break;case 28:this.$=Q.RiskLevel.HIGH_RISK;break;case 29:this.$=Q.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=Q.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=Q.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=Q.VerifyType.VERIFY_TEST;break;case 33:Q.addElement(O[W-3]);break;case 34:Q.setNewElementType(O[W-2]);break;case 35:Q.setNewElementDocRef(O[W-2]);break;case 38:Q.addRelationship(O[W-2],O[W],O[W-4]);break;case 39:Q.addRelationship(O[W-2],O[W-4],O[W]);break;case 40:this.$=Q.Relationships.CONTAINS;break;case 41:this.$=Q.Relationships.COPIES;break;case 42:this.$=Q.Relationships.DERIVES;break;case 43:this.$=Q.Relationships.SATISFIES;break;case 44:this.$=Q.Relationships.VERIFIES;break;case 45:this.$=Q.Relationships.REFINES;break;case 46:this.$=Q.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:i,11:r,13:s},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:i,11:r,13:s},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(n,[2,6]),{3:12,4:2,6:e,9:i,11:r,13:s},{1:[2,2]},{4:17,5:a,7:13,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},t(n,[2,4]),t(n,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:a,7:31,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:32,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:33,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:34,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:35,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},t(v,[2,20]),t(v,[2,21]),t(v,[2,22]),t(v,[2,23]),t(v,[2,24]),t(v,[2,25]),t(C,[2,49]),t(C,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:R,56:A,57:T,58:k,59:w,60:S,61:m},{52:54,55:R,56:A,57:T,58:k,59:w,60:S,61:m},{5:[1,55]},{5:[1,56]},{53:[1,57]},t(E,[2,40]),t(E,[2,41]),t(E,[2,42]),t(E,[2,43]),t(E,[2,44]),t(E,[2,45]),t(E,[2,46]),{54:[1,58]},{5:f,20:59,21:L,24:b,26:P,28:U,30:N},{5:D,30:F,46:66,47:I,49:M},{23:71,62:x,63:_},{23:72,62:x,63:_},t(z,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:f,20:77,21:L,24:b,26:P,28:U,30:N},t(z,[2,19]),t(z,[2,33]),{22:[1,78]},{22:[1,79]},{5:D,30:F,46:80,47:I,49:M},t(z,[2,37]),t(z,[2,38]),t(z,[2,39]),{23:81,62:x,63:_},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},t(z,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},t(z,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:f,20:106,21:L,24:b,26:P,28:U,30:N},{5:f,20:107,21:L,24:b,26:P,28:U,30:N},{5:f,20:108,21:L,24:b,26:P,28:U,30:N},{5:f,20:109,21:L,24:b,26:P,28:U,30:N},{5:D,30:F,46:110,47:I,49:M},{5:D,30:F,46:111,47:I,49:M},t(z,[2,14]),t(z,[2,15]),t(z,[2,16]),t(z,[2,17]),t(z,[2,34]),t(z,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:function(G,tt){if(tt.recoverable)this.trace(G);else{var nt=new Error(G);throw nt.hash=tt,nt}},parse:function(G){var tt=this,nt=[0],Q=[],J=[null],O=[],at=this.table,W="",ft=0,V=0,vt=2,X=1,St=O.slice.call(arguments,1),bt=Object.create(this.lexer),Vt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Vt.yy[Bt]=this.yy[Bt]);bt.setInput(G,Vt.yy),Vt.yy.lexer=bt,Vt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var zt;return zt=Q.pop()||bt.lex()||X,typeof zt!="number"&&(zt instanceof Array&&(Q=zt,zt=Q.pop()),zt=tt.symbols_[zt]||zt),zt}for(var ot,lt,ht,$,rt={},it,ct,ee,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var de="";Qt=[];for(it in at[lt])this.terminals_[it]&&it>vt&&Qt.push("'"+this.terminals_[it]+"'");bt.showPosition?de="Parse error on line "+(ft+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":de="Parse error on line "+(ft+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(de,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),J.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,V=bt.yyleng,W=bt.yytext,ft=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=J[J.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),$=this.performAction.apply(rt,[W,V,ft,Vt.yy,ht[1],J,O].concat(St)),typeof $<"u")return $;ct&&(nt=nt.slice(0,-1*ct*2),J=J.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),J.push(rt.$),O.push(rt._$),ee=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(ee);break;case 3:return!0}}return!0}},j=function(){var K={EOF:1,parseError:function(tt,nt){if(this.yy.parser)this.yy.parser.parseError(tt,nt);else throw new Error(tt)},setInput:function(G,tt){return this.yy=tt||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var tt=G.match(/(?:\r\n?|\n).*/g);return tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var tt=G.length,nt=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-tt),this.offset-=tt;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-nt.length].length-nt[0].length:this.yylloc.first_column-tt},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-tt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),tt=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+tt+"^"},test_match:function(G,tt){var nt,Q,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),Q=G[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],nt=this.performAction.call(this,this.yy,this,tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in J)this[O]=J[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,tt,nt,Q;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),O=0;O<J.length;O++)if(nt=this._input.match(this.rules[J[O]]),nt&&(!tt||nt[0].length>tt[0].length)){if(tt=nt,Q=O,this.options.backtrack_lexer){if(G=this.test_match(nt,J[O]),G!==!1)return G;if(this._backtrack){tt=!1;continue}else return!1}else if(!this.options.flex)break}return tt?(G=this.test_match(tt,J[Q]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var tt=this.next();return tt||this.lex()},begin:function(tt){this.conditionStack.push(tt)},popState:function(){var tt=this.conditionStack.length-1;return tt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(tt){return tt=this.conditionStack.length-1-Math.abs(tt||0),tt>=0?this.conditionStack[tt]:"INITIAL"},pushState:function(tt){this.begin(tt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(tt,nt,Q,J){switch(Q){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return nt.yytext=nt.yytext.trim(),62}},rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return K}();st.lexer=j;function dt(){this.yy={}}return dt.prototype=st,st.Parser=dt,new dt}();Lo.parser=Lo;const n_=Lo;let zl=[],Ze={},Rs={},mr={},Ns={};const a_={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},o_={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},l_={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},c_={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},h_=(t,e)=>(Rs[t]===void 0&&(Rs[t]={name:t,type:e,id:Ze.id,text:Ze.text,risk:Ze.risk,verifyMethod:Ze.verifyMethod}),Ze={},Rs[t]),u_=()=>Rs,d_=t=>{Ze!==void 0&&(Ze.id=t)},f_=t=>{Ze!==void 0&&(Ze.text=t)},p_=t=>{Ze!==void 0&&(Ze.risk=t)},g_=t=>{Ze!==void 0&&(Ze.verifyMethod=t)},y_=t=>(Ns[t]===void 0&&(Ns[t]={name:t,type:mr.type,docRef:mr.docRef},B.info("Added new requirement: ",t)),mr={},Ns[t]),m_=()=>Ns,x_=t=>{mr!==void 0&&(mr.type=t)},b_=t=>{mr!==void 0&&(mr.docRef=t)},k_=(t,e,i)=>{zl.push({type:t,src:e,dst:i})},__=()=>zl,T_=()=>{zl=[],Ze={},Rs={},mr={},Ns={},Pe()},C_={RequirementType:a_,RiskLevel:o_,VerifyType:l_,Relationships:c_,getConfig:()=>Y().req,addRequirement:h_,getRequirements:u_,setNewReqId:d_,setNewReqText:f_,setNewReqRisk:p_,setNewReqVerifyMethod:g_,setAccTitle:Me,getAccTitle:Ue,setAccDescription:He,getAccDescription:Ge,addElement:y_,getElements:m_,setNewElementType:x_,setNewElementDocRef:b_,addRelationship:k_,getRelationships:__,clear:T_},E_=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,S_=E_,Bo={CONTAINS:"contains",ARROW:"arrow"},w_=(t,e)=>{let i=t.append("defs").append("marker").attr("id",Bo.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");i.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),i.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),i.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",Bo.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},id={ReqMarkers:Bo,insertLineEndings:w_};let oe={},nh=0;const rd=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",oe.rect_min_width+"px").attr("height",oe.rect_min_height+"px"),sd=(t,e,i)=>{let r=oe.rect_min_width/2,s=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",oe.rect_padding).attr("dominant-baseline","hanging"),n=0;i.forEach(h=>{n==0?s.append("tspan").attr("text-anchor","middle").attr("x",oe.rect_min_width/2).attr("dy",0).text(h):s.append("tspan").attr("text-anchor","middle").attr("x",oe.rect_min_width/2).attr("dy",oe.line_height*.75).text(h),n++});let a=1.5*oe.rect_padding,o=n*oe.line_height*.75,l=a+o;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",oe.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:s,y:l}},nd=(t,e,i,r)=>{let s=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",oe.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),n=0;const a=30;let o=[];return i.forEach(l=>{let h=l.length;for(;h>a&&n<3;){let u=l.substring(0,a);l=l.substring(a,l.length),h=l.length,o[o.length]=u,n++}if(n==3){let u=o[o.length-1];o[o.length-1]=u.substring(0,u.length-4)+"..."}else o[o.length]=l;n=0}),o.forEach(l=>{s.append("tspan").attr("x",oe.rect_padding).attr("dy",oe.line_height).text(l)}),s},v_=(t,e,i,r)=>{const s=e.node().getTotalLength(),n=e.node().getPointAtLength(s*.5),a="rel"+nh;nh++;const l=t.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",n.x).attr("y",n.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",n.x-l.width/2).attr("y",n.y-l.height/2).attr("width",l.width).attr("height",l.height).attr("fill","white").attr("fill-opacity","85%")},A_=function(t,e,i,r,s){const n=i.edge(ps(e.src),ps(e.dst)),a=xr().x(function(l){return l.x}).y(function(l){return l.y}),o=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",a(n.points)).attr("fill","none");e.type==s.db.Relationships.CONTAINS?o.attr("marker-start","url("+mt.getUrl(oe.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+mt.getUrl(oe.arrowMarkerAbsolute)+"#"+id.ReqMarkers.ARROW+"_line_ending)")),v_(t,o,oe,`<<${e.type}>>`)},L_=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];r=ps(r),B.info("Added new requirement: ",r);const n=i.append("g").attr("id",r),a="req-"+r,o=rd(n,a);let l=sd(n,r+"_title",[`<<${s.type}>>`,`${s.name}`]);nd(n,r+"_body",[`Id: ${s.id}`,`Text: ${s.text}`,`Risk: ${s.risk}`,`Verification: ${s.verifyMethod}`],l.y);const h=o.node().getBBox();e.setNode(r,{width:h.width,height:h.height,shape:"rect",id:r})})},B_=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];const n=ps(r),a=i.append("g").attr("id",n),o="element-"+n,l=rd(a,o);let h=sd(a,o+"_title",["<<Element>>",`${r}`]);nd(a,o+"_body",[`Type: ${s.type||"Not Specified"}`,`Doc Ref: ${s.docRef||"None"}`],h.y);const u=l.node().getBBox();e.setNode(n,{width:u.width,height:u.height,shape:"rect",id:n})})},I_=(t,e)=>(t.forEach(function(i){let r=ps(i.src),s=ps(i.dst);e.setEdge(r,s,{relationship:i})}),t),D_=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&(t.select("#"+i),t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )"))})},ps=t=>t.replace(/\s/g,"").replace(/\./g,"_"),F_=(t,e,i,r)=>{oe=Y().requirement;const s=oe.securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);id.insertLineEndings(o,oe);const l=new Ni({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:oe.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=r.db.getRequirements(),u=r.db.getElements(),p=r.db.getRelationships();L_(h,l,o),B_(u,l,o),I_(p,l),nn(l),D_(o,l),p.forEach(function(_){A_(o,_,l,e,r)});const d=oe.rect_padding,g=o.node().getBBox(),y=g.width+d*2,x=g.height+d*2;Oe(o,x,y,oe.useMaxWidth),o.attr("viewBox",`${g.x-d} ${g.y-d} ${y} ${x}`)},R_={draw:F_},N_={parser:n_,db:C_,renderer:R_,styles:S_},O_=Object.freeze(Object.defineProperty({__proto__:null,diagram:N_},Symbol.toStringTag,{value:"Module"}));var Io=function(){var t=function(Q,J,O,at){for(O=O||{},at=Q.length;at--;O[Q[at]]=J);return O},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,13],l=[1,14],h=[1,16],u=[1,17],p=[1,18],d=[1,24],g=[1,25],y=[1,26],x=[1,27],_=[1,28],v=[1,29],C=[1,30],R=[1,31],A=[1,32],T=[1,33],k=[1,34],w=[1,35],S=[1,36],m=[1,37],E=[1,38],f=[1,39],L=[1,41],b=[1,42],P=[1,43],U=[1,44],N=[1,45],D=[1,46],F=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],I=[4,5,16,50,52,53],M=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],st=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],j=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],dt=[68,69,70],K=[1,120],G={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,DOTTED_ARROW:74,SOLID_CROSS:75,DOTTED_CROSS:76,SOLID_POINT:77,DOTTED_POINT:78,TXT:79,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"DOTTED_ARROW",75:"SOLID_CROSS",76:"DOTTED_CROSS",77:"SOLID_POINT",78:"DOTTED_POINT",79:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:function(J,O,at,W,ft,V,vt){var X=V.length-1;switch(ft){case 3:return W.apply(V[X]),V[X];case 4:case 9:this.$=[];break;case 5:case 10:V[X-1].push(V[X]),this.$=V[X-1];break;case 6:case 7:case 11:case 12:this.$=V[X];break;case 8:case 13:this.$=[];break;case 15:V[X].type="createParticipant",this.$=V[X];break;case 16:V[X-1].unshift({type:"boxStart",boxData:W.parseBoxData(V[X-2])}),V[X-1].push({type:"boxEnd",boxText:V[X-2]}),this.$=V[X-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(V[X-2]),sequenceIndexStep:Number(V[X-1]),sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(V[X-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:W.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:V[X-1]};break;case 23:this.$={type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:V[X-1]};break;case 29:W.setDiagramTitle(V[X].substring(6)),this.$=V[X].substring(6);break;case 30:W.setDiagramTitle(V[X].substring(7)),this.$=V[X].substring(7);break;case 31:this.$=V[X].trim(),W.setAccTitle(this.$);break;case 32:case 33:this.$=V[X].trim(),W.setAccDescription(this.$);break;case 34:V[X-1].unshift({type:"loopStart",loopText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.LOOP_START}),V[X-1].push({type:"loopEnd",loopText:V[X-2],signalType:W.LINETYPE.LOOP_END}),this.$=V[X-1];break;case 35:V[X-1].unshift({type:"rectStart",color:W.parseMessage(V[X-2]),signalType:W.LINETYPE.RECT_START}),V[X-1].push({type:"rectEnd",color:W.parseMessage(V[X-2]),signalType:W.LINETYPE.RECT_END}),this.$=V[X-1];break;case 36:V[X-1].unshift({type:"optStart",optText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.OPT_START}),V[X-1].push({type:"optEnd",optText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.OPT_END}),this.$=V[X-1];break;case 37:V[X-1].unshift({type:"altStart",altText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.ALT_START}),V[X-1].push({type:"altEnd",signalType:W.LINETYPE.ALT_END}),this.$=V[X-1];break;case 38:V[X-1].unshift({type:"parStart",parText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.PAR_START}),V[X-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=V[X-1];break;case 39:V[X-1].unshift({type:"parStart",parText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.PAR_OVER_START}),V[X-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=V[X-1];break;case 40:V[X-1].unshift({type:"criticalStart",criticalText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.CRITICAL_START}),V[X-1].push({type:"criticalEnd",signalType:W.LINETYPE.CRITICAL_END}),this.$=V[X-1];break;case 41:V[X-1].unshift({type:"breakStart",breakText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.BREAK_START}),V[X-1].push({type:"breakEnd",optText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.BREAK_END}),this.$=V[X-1];break;case 43:this.$=V[X-3].concat([{type:"option",optionText:W.parseMessage(V[X-1]),signalType:W.LINETYPE.CRITICAL_OPTION},V[X]]);break;case 45:this.$=V[X-3].concat([{type:"and",parText:W.parseMessage(V[X-1]),signalType:W.LINETYPE.PAR_AND},V[X]]);break;case 47:this.$=V[X-3].concat([{type:"else",altText:W.parseMessage(V[X-1]),signalType:W.LINETYPE.ALT_ELSE},V[X]]);break;case 48:V[X-3].draw="participant",V[X-3].type="addParticipant",V[X-3].description=W.parseMessage(V[X-1]),this.$=V[X-3];break;case 49:V[X-1].draw="participant",V[X-1].type="addParticipant",this.$=V[X-1];break;case 50:V[X-3].draw="actor",V[X-3].type="addParticipant",V[X-3].description=W.parseMessage(V[X-1]),this.$=V[X-3];break;case 51:V[X-1].draw="actor",V[X-1].type="addParticipant",this.$=V[X-1];break;case 52:V[X-1].type="destroyParticipant",this.$=V[X-1];break;case 53:this.$=[V[X-1],{type:"addNote",placement:V[X-2],actor:V[X-1].actor,text:V[X]}];break;case 54:V[X-2]=[].concat(V[X-1],V[X-1]).slice(0,2),V[X-2][0]=V[X-2][0].actor,V[X-2][1]=V[X-2][1].actor,this.$=[V[X-1],{type:"addNote",placement:W.PLACEMENT.OVER,actor:V[X-2].slice(0,2),text:V[X]}];break;case 55:this.$=[V[X-1],{type:"addLinks",actor:V[X-1].actor,text:V[X]}];break;case 56:this.$=[V[X-1],{type:"addALink",actor:V[X-1].actor,text:V[X]}];break;case 57:this.$=[V[X-1],{type:"addProperties",actor:V[X-1].actor,text:V[X]}];break;case 58:this.$=[V[X-1],{type:"addDetails",actor:V[X-1].actor,text:V[X]}];break;case 61:this.$=[V[X-2],V[X]];break;case 62:this.$=V[X];break;case 63:this.$=W.PLACEMENT.LEFTOF;break;case 64:this.$=W.PLACEMENT.RIGHTOF;break;case 65:this.$=[V[X-4],V[X-1],{type:"addMessage",from:V[X-4].actor,to:V[X-1].actor,signalType:V[X-3],msg:V[X],activate:!0},{type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:V[X-1]}];break;case 66:this.$=[V[X-4],V[X-1],{type:"addMessage",from:V[X-4].actor,to:V[X-1].actor,signalType:V[X-3],msg:V[X]},{type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:V[X-4]}];break;case 67:this.$=[V[X-3],V[X-1],{type:"addMessage",from:V[X-3].actor,to:V[X-1].actor,signalType:V[X-2],msg:V[X]}];break;case 68:this.$={type:"addParticipant",actor:V[X]};break;case 69:this.$=W.LINETYPE.SOLID_OPEN;break;case 70:this.$=W.LINETYPE.DOTTED_OPEN;break;case 71:this.$=W.LINETYPE.SOLID;break;case 72:this.$=W.LINETYPE.DOTTED;break;case 73:this.$=W.LINETYPE.SOLID_CROSS;break;case 74:this.$=W.LINETYPE.DOTTED_CROSS;break;case 75:this.$=W.LINETYPE.SOLID_POINT;break;case 76:this.$=W.LINETYPE.DOTTED_POINT;break;case 77:this.$=W.parseMessage(V[X].trim().substring(1));break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},t(F,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},t(F,[2,7]),t(F,[2,8]),t(F,[2,14]),{12:48,50:m,52:E,53:f},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:D},{22:55,70:D},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(F,[2,29]),t(F,[2,30]),{32:[1,61]},{34:[1,62]},t(F,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:D},{22:72,70:D},{22:73,70:D},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82]},{55:83,57:[1,84],65:[1,85],66:[1,86]},{22:87,70:D},{22:88,70:D},{22:89,70:D},{22:90,70:D},t([5,51,64,71,72,73,74,75,76,77,78,79],[2,68]),t(F,[2,6]),t(F,[2,15]),t(I,[2,9],{10:91}),t(F,[2,17]),{5:[1,93],19:[1,92]},{5:[1,94]},t(F,[2,21]),{5:[1,95]},{5:[1,96]},t(F,[2,24]),t(F,[2,25]),t(F,[2,26]),t(F,[2,27]),t(F,[2,28]),t(F,[2,31]),t(F,[2,32]),t(M,s,{7:97}),t(M,s,{7:98}),t(M,s,{7:99}),t(z,s,{40:100,7:101}),t(st,s,{42:102,7:103}),t(st,s,{7:103,42:104}),t(j,s,{45:105,7:106}),t(M,s,{7:107}),{5:[1,109],51:[1,108]},{5:[1,111],51:[1,110]},{5:[1,112]},{22:115,68:[1,113],69:[1,114],70:D},t(dt,[2,69]),t(dt,[2,70]),t(dt,[2,71]),t(dt,[2,72]),t(dt,[2,73]),t(dt,[2,74]),t(dt,[2,75]),t(dt,[2,76]),{22:116,70:D},{22:118,58:117,70:D},{70:[2,63]},{70:[2,64]},{56:119,79:K},{56:121,79:K},{56:122,79:K},{56:123,79:K},{4:[1,126],5:[1,128],11:125,12:127,16:[1,124],50:m,52:E,53:f},{5:[1,129]},t(F,[2,19]),t(F,[2,20]),t(F,[2,22]),t(F,[2,23]),{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,130],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,131],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{16:[1,133]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,49:[1,134],50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{16:[1,135]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,48:[1,136],50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{16:[1,137]},{16:[1,138]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,47:[1,139],50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,140],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:C,38:R,39:A,41:T,43:k,44:w,46:S,50:m,52:E,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{15:[1,141]},t(F,[2,49]),{15:[1,142]},t(F,[2,51]),t(F,[2,52]),{22:143,70:D},{22:144,70:D},{56:145,79:K},{56:146,79:K},{56:147,79:K},{64:[1,148],79:[2,62]},{5:[2,55]},{5:[2,77]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(F,[2,16]),t(I,[2,10]),{12:149,50:m,52:E,53:f},t(I,[2,12]),t(I,[2,13]),t(F,[2,18]),t(F,[2,34]),t(F,[2,35]),t(F,[2,36]),t(F,[2,37]),{15:[1,150]},t(F,[2,38]),{15:[1,151]},t(F,[2,39]),t(F,[2,40]),{15:[1,152]},t(F,[2,41]),{5:[1,153]},{5:[1,154]},{56:155,79:K},{56:156,79:K},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:157,70:D},t(I,[2,11]),t(z,s,{7:101,40:158}),t(st,s,{7:103,42:159}),t(j,s,{7:106,45:160}),t(F,[2,48]),t(F,[2,50]),{5:[2,65]},{5:[2,66]},{79:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],85:[2,63],86:[2,64],119:[2,55],120:[2,77],121:[2,56],122:[2,57],123:[2,58],145:[2,67],146:[2,53],147:[2,54],155:[2,65],156:[2,66],157:[2,61],158:[2,47],159:[2,45],160:[2,43]},parseError:function(J,O){if(O.recoverable)this.trace(J);else{var at=new Error(J);throw at.hash=O,at}},parse:function(J){var O=this,at=[0],W=[],ft=[null],V=[],vt=this.table,X="",St=0,bt=0,Vt=2,Bt=1,Wt=V.slice.call(arguments,1),pt=Object.create(this.lexer),ut={yy:{}};for(var ot in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ot)&&(ut.yy[ot]=this.yy[ot]);pt.setInput(J,ut.yy),ut.yy.lexer=pt,ut.yy.parser=this,typeof pt.yylloc>"u"&&(pt.yylloc={});var lt=pt.yylloc;V.push(lt);var ht=pt.options&&pt.options.ranges;typeof ut.yy.parseError=="function"?this.parseError=ut.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function $(){var fe;return fe=W.pop()||pt.lex()||Bt,typeof fe!="number"&&(fe instanceof Array&&(W=fe,fe=W.pop()),fe=O.symbols_[fe]||fe),fe}for(var rt,it,ct,ee,Qt={},de,zt,Gt,qt;;){if(it=at[at.length-1],this.defaultActions[it]?ct=this.defaultActions[it]:((rt===null||typeof rt>"u")&&(rt=$()),ct=vt[it]&&vt[it][rt]),typeof ct>"u"||!ct.length||!ct[0]){var Se="";qt=[];for(de in vt[it])this.terminals_[de]&&de>Vt&&qt.push("'"+this.terminals_[de]+"'");pt.showPosition?Se="Parse error on line "+(St+1)+`:
`+pt.showPosition()+`
Expecting `+qt.join(", ")+", got '"+(this.terminals_[rt]||rt)+"'":Se="Parse error on line "+(St+1)+": Unexpected "+(rt==Bt?"end of input":"'"+(this.terminals_[rt]||rt)+"'"),this.parseError(Se,{text:pt.match,token:this.terminals_[rt]||rt,line:pt.yylineno,loc:lt,expected:qt})}if(ct[0]instanceof Array&&ct.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+rt);switch(ct[0]){case 1:at.push(rt),ft.push(pt.yytext),V.push(pt.yylloc),at.push(ct[1]),rt=null,bt=pt.yyleng,X=pt.yytext,St=pt.yylineno,lt=pt.yylloc;break;case 2:if(zt=this.productions_[ct[1]][1],Qt.$=ft[ft.length-zt],Qt._$={first_line:V[V.length-(zt||1)].first_line,last_line:V[V.length-1].last_line,first_column:V[V.length-(zt||1)].first_column,last_column:V[V.length-1].last_column},ht&&(Qt._$.range=[V[V.length-(zt||1)].range[0],V[V.length-1].range[1]]),ee=this.performAction.apply(Qt,[X,bt,St,ut.yy,ct[1],ft,V].concat(Wt)),typeof ee<"u")return ee;zt&&(at=at.slice(0,-1*zt*2),ft=ft.slice(0,-1*zt),V=V.slice(0,-1*zt)),at.push(this.productions_[ct[1]][0]),ft.push(Qt.$),V.push(Qt._$),Gt=vt[at[at.length-2]][at[at.length-1]],at.push(Gt);break;case 3:return!0}}return!0}},tt=function(){var Q={EOF:1,parseError:function(O,at){if(this.yy.parser)this.yy.parser.parseError(O,at);else throw new Error(O)},setInput:function(J,O){return this.yy=O||this.yy||{},this._input=J,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var J=this._input[0];this.yytext+=J,this.yyleng++,this.offset++,this.match+=J,this.matched+=J;var O=J.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),J},unput:function(J){var O=J.length,at=J.split(/(?:\r\n?|\n)/g);this._input=J+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var W=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),at.length-1&&(this.yylineno-=at.length-1);var ft=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:at?(at.length===W.length?this.yylloc.first_column:0)+W[W.length-at.length].length-at[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[ft[0],ft[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(J){this.unput(this.match.slice(J))},pastInput:function(){var J=this.matched.substr(0,this.matched.length-this.match.length);return(J.length>20?"...":"")+J.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var J=this.match;return J.length<20&&(J+=this._input.substr(0,20-J.length)),(J.substr(0,20)+(J.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var J=this.pastInput(),O=new Array(J.length+1).join("-");return J+this.upcomingInput()+`
`+O+"^"},test_match:function(J,O){var at,W,ft;if(this.options.backtrack_lexer&&(ft={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ft.yylloc.range=this.yylloc.range.slice(0))),W=J[0].match(/(?:\r\n?|\n).*/g),W&&(this.yylineno+=W.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-W[W.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+J[0].length},this.yytext+=J[0],this.match+=J[0],this.matches=J,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(J[0].length),this.matched+=J[0],at=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),at)return at;if(this._backtrack){for(var V in ft)this[V]=ft[V];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var J,O,at,W;this._more||(this.yytext="",this.match="");for(var ft=this._currentRules(),V=0;V<ft.length;V++)if(at=this._input.match(this.rules[ft[V]]),at&&(!O||at[0].length>O[0].length)){if(O=at,W=V,this.options.backtrack_lexer){if(J=this.test_match(at,ft[V]),J!==!1)return J;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(J=this.test_match(O,ft[W]),J!==!1?J:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var O=this.next();return O||this.lex()},begin:function(O){this.conditionStack.push(O)},popState:function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},pushState:function(O){this.begin(O)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(O,at,W,ft){switch(W){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return at.yytext=at.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return at.yytext=at.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 71;case 56:return 72;case 57:return 75;case 58:return 76;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 68;case 63:return 69;case 64:return 5;case 65:return"INVALID"}},rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],inclusive:!0}}};return Q}();G.lexer=tt;function nt(){this.yy={}}return nt.prototype=G,G.Parser=nt,new nt}();Io.parser=Io;const P_=Io;class M_{constructor(e){this.init=e,this.records=this.init()}reset(){this.records=this.init()}}const _t=new M_(()=>({prevActor:void 0,actors:{},createdActors:{},destroyedActors:{},boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),V_=function(t){_t.records.boxes.push({name:t.text,wrap:t.wrap===void 0&&Fr()||!!t.wrap,fill:t.color,actorKeys:[]}),_t.records.currentBox=_t.records.boxes.slice(-1)[0]},Do=function(t,e,i,r){let s=_t.records.currentBox;const n=_t.records.actors[t];if(n){if(_t.records.currentBox&&n.box&&_t.records.currentBox!==n.box)throw new Error("A same participant should only be defined in one Box: "+n.name+" can't be in '"+n.box.name+"' and in '"+_t.records.currentBox.name+"' at the same time.");if(s=n.box?n.box:_t.records.currentBox,n.box=s,n&&e===n.name&&i==null)return}(i==null||i.text==null)&&(i={text:e,wrap:null,type:r}),(r==null||i.text==null)&&(i={text:e,wrap:null,type:r}),_t.records.actors[t]={box:s,name:e,description:i.text,wrap:i.wrap===void 0&&Fr()||!!i.wrap,prevActor:_t.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},_t.records.prevActor&&_t.records.actors[_t.records.prevActor]&&(_t.records.actors[_t.records.prevActor].nextActor=t),_t.records.currentBox&&_t.records.currentBox.actorKeys.push(t),_t.records.prevActor=t},z_=t=>{let e,i=0;for(e=0;e<_t.records.messages.length;e++)_t.records.messages[e].type===Qs.ACTIVE_START&&_t.records.messages[e].from.actor===t&&i++,_t.records.messages[e].type===Qs.ACTIVE_END&&_t.records.messages[e].from.actor===t&&i--;return i},q_=function(t,e,i,r){_t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Fr()||!!i.wrap,answer:r})},le=function(t,e,i={text:void 0,wrap:void 0},r,s=!1){if(r===Qs.ACTIVE_END&&z_(t.actor)<1){let a=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw a.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return _t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Fr()||!!i.wrap,type:r,activate:s}),!0},W_=function(){return _t.records.boxes.length>0},Y_=function(){return _t.records.boxes.some(t=>t.name)},U_=function(){return _t.records.messages},H_=function(){return _t.records.boxes},G_=function(){return _t.records.actors},j_=function(){return _t.records.createdActors},X_=function(){return _t.records.destroyedActors},gn=function(t){return _t.records.actors[t]},$_=function(){return Object.keys(_t.records.actors)},K_=function(){_t.records.sequenceNumbersEnabled=!0},Q_=function(){_t.records.sequenceNumbersEnabled=!1},Z_=()=>_t.records.sequenceNumbersEnabled,J_=function(t){_t.records.wrapEnabled=t},Fr=()=>_t.records.wrapEnabled!==void 0?_t.records.wrapEnabled:Y().sequence.wrap,t7=function(){_t.reset(),Pe()},e7=function(t){const e=t.trim(),i={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:e.match(/^:?wrap:/)!==null?!0:e.match(/^:?nowrap:/)!==null?!1:void 0};return B.debug("parseMessage:",i),i},i7=function(t){const e=t.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let i=e!=null&&e[1]?e[1].trim():"transparent",r=e!=null&&e[2]?e[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",i)||(i="transparent",r=t.trim());else{const s=new Option().style;s.color=i,s.color!==i&&(i="transparent",r=t.trim())}return{color:i,text:r!==void 0?ue(r.replace(/^:?(?:no)?wrap:/,""),Y()):void 0,wrap:r!==void 0?r.match(/^:?wrap:/)!==null?!0:r.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},Qs={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32},r7={FILLED:0,OPEN:1},s7={LEFTOF:0,RIGHTOF:1,OVER:2},ad=function(t,e,i){const r={actor:t,placement:e,message:i.text,wrap:i.wrap===void 0&&Fr()||!!i.wrap},s=[].concat(t,t);_t.records.notes.push(r),_t.records.messages.push({from:s[0],to:s[1],message:i.text,wrap:i.wrap===void 0&&Fr()||!!i.wrap,type:Qs.NOTE,placement:e})},od=function(t,e){const i=gn(t);try{let r=ue(e.text,Y());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const s=JSON.parse(r);ql(i,s)}catch(r){B.error("error while parsing actor link text",r)}},n7=function(t,e){const i=gn(t);try{const a={};let o=ue(e.text,Y());var r=o.indexOf("@");o=o.replace(/&amp;/g,"&"),o=o.replace(/&equals;/g,"=");var s=o.slice(0,r-1).trim(),n=o.slice(r+1).trim();a[s]=n,ql(i,a)}catch(a){B.error("error while parsing actor link text",a)}};function ql(t,e){if(t.links==null)t.links=e;else for(let i in e)t.links[i]=e[i]}const ld=function(t,e){const i=gn(t);try{let r=ue(e.text,Y());const s=JSON.parse(r);cd(i,s)}catch(r){B.error("error while parsing actor properties text",r)}};function cd(t,e){if(t.properties==null)t.properties=e;else for(let i in e)t.properties[i]=e[i]}function a7(){_t.records.currentBox=void 0}const hd=function(t,e){const i=gn(t),r=document.getElementById(e.text);try{const s=r.innerHTML,n=JSON.parse(s);n.properties&&cd(i,n.properties),n.links&&ql(i,n.links)}catch(s){B.error("error while parsing actor details text",s)}},o7=function(t,e){if(t!==void 0&&t.properties!==void 0)return t.properties[e]},ud=function(t){if(Array.isArray(t))t.forEach(function(e){ud(e)});else switch(t.type){case"sequenceIndex":_t.records.messages.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":Do(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(_t.records.actors[t.actor])throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");_t.records.lastCreated=t.actor,Do(t.actor,t.actor,t.description,t.draw),_t.records.createdActors[t.actor]=_t.records.messages.length;break;case"destroyParticipant":_t.records.lastDestroyed=t.actor,_t.records.destroyedActors[t.actor]=_t.records.messages.length;break;case"activeStart":le(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":le(t.actor,void 0,void 0,t.signalType);break;case"addNote":ad(t.actor,t.placement,t.text);break;case"addLinks":od(t.actor,t.text);break;case"addALink":n7(t.actor,t.text);break;case"addProperties":ld(t.actor,t.text);break;case"addDetails":hd(t.actor,t.text);break;case"addMessage":if(_t.records.lastCreated){if(t.to!==_t.records.lastCreated)throw new Error("The created participant "+_t.records.lastCreated+" does not have an associated creating message after its declaration. Please check the sequence diagram.");_t.records.lastCreated=void 0}else if(_t.records.lastDestroyed){if(t.to!==_t.records.lastDestroyed&&t.from!==_t.records.lastDestroyed)throw new Error("The destroyed participant "+_t.records.lastDestroyed+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");_t.records.lastDestroyed=void 0}le(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":V_(t.boxData);break;case"boxEnd":a7();break;case"loopStart":le(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":le(void 0,void 0,void 0,t.signalType);break;case"rectStart":le(void 0,void 0,t.color,t.signalType);break;case"rectEnd":le(void 0,void 0,void 0,t.signalType);break;case"optStart":le(void 0,void 0,t.optText,t.signalType);break;case"optEnd":le(void 0,void 0,void 0,t.signalType);break;case"altStart":le(void 0,void 0,t.altText,t.signalType);break;case"else":le(void 0,void 0,t.altText,t.signalType);break;case"altEnd":le(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Me(t.text);break;case"parStart":le(void 0,void 0,t.parText,t.signalType);break;case"and":le(void 0,void 0,t.parText,t.signalType);break;case"parEnd":le(void 0,void 0,void 0,t.signalType);break;case"criticalStart":le(void 0,void 0,t.criticalText,t.signalType);break;case"option":le(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":le(void 0,void 0,void 0,t.signalType);break;case"breakStart":le(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":le(void 0,void 0,void 0,t.signalType);break}},ah={addActor:Do,addMessage:q_,addSignal:le,addLinks:od,addDetails:hd,addProperties:ld,autoWrap:Fr,setWrap:J_,enableSequenceNumbers:K_,disableSequenceNumbers:Q_,showSequenceNumbers:Z_,getMessages:U_,getActors:G_,getCreatedActors:j_,getDestroyedActors:X_,getActor:gn,getActorKeys:$_,getActorProperty:o7,getAccTitle:Ue,getBoxes:H_,getDiagramTitle:je,setDiagramTitle:si,getConfig:()=>Y().sequence,clear:t7,parseMessage:e7,parseBoxData:i7,LINETYPE:Qs,ARROWTYPE:r7,PLACEMENT:s7,addNote:ad,setAccTitle:Me,apply:ud,setAccDescription:He,getAccDescription:Ge,hasAtLeastOneBox:W_,hasAtLeastOneBoxWithTitle:Y_},l7=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,c7=l7,Ar=18*2,dd="actor-top",fd="actor-bottom",Wl=function(t,e){return Ea(t,e)},h7=function(t,e,i,r,s){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const n=e.links,a=e.actorCnt,o=e.rectData;var l="none";s&&(l="block !important");const h=t.append("g");h.attr("id","actor"+a+"_popup"),h.attr("class","actorPopupMenu"),h.attr("display",l);var u="";o.class!==void 0&&(u=" "+o.class);let p=o.width>i?o.width:i;const d=h.append("rect");if(d.attr("class","actorPopupMenuPanel"+u),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",p),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),n!=null){var g=20;for(let _ in n){var y=h.append("a"),x=Mr.sanitizeUrl(n[_]);y.attr("xlink:href",x),y.attr("target","_blank"),v7(r)(_,y,o.x+10,o.height+g,p,20,{class:"actor"},r),g+=30}}return d.attr("height",g),{height:o.height+g,width:p}},u7=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},la=async function(t,e,i=null){let r=t.append("foreignObject");const s=await zr(e.text,se()),a=r.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(s).node().getBoundingClientRect();if(r.attr("height",Math.round(a.height)).attr("width",Math.round(a.width)),e.class==="noteText"){const o=t.node().firstChild;o.setAttribute("height",a.height+2*e.textMargin);const l=o.getBBox();r.attr("x",Math.round(l.x+l.width/2-a.width/2)).attr("y",Math.round(l.y+l.height/2-a.height/2))}else if(i){let{startx:o,stopx:l,starty:h}=i;if(o>l){const u=o;o=l,l=u}r.attr("x",Math.round(o+Math.abs(o-l)/2-a.width/2)),e.class==="loopText"?r.attr("y",Math.round(h)):r.attr("y",Math.round(h-a.height))}return[r]},gs=function(t,e){let i=0,r=0;const s=e.text.split(mt.lineBreakRegex),[n,a]=qr(e.fontSize);let o=[],l=0,h=()=>e.y;if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":h=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":h=()=>Math.round(e.y+(i+r+e.textMargin)/2);break;case"bottom":case"end":h=()=>Math.round(e.y+(i+r+2*e.textMargin)-e.textMargin);break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[u,p]of s.entries()){e.textMargin!==void 0&&e.textMargin===0&&n!==void 0&&(l=u*n);const d=t.append("text");d.attr("x",e.x),d.attr("y",h()),e.anchor!==void 0&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&d.style("font-family",e.fontFamily),a!==void 0&&d.style("font-size",a),e.fontWeight!==void 0&&d.style("font-weight",e.fontWeight),e.fill!==void 0&&d.attr("fill",e.fill),e.class!==void 0&&d.attr("class",e.class),e.dy!==void 0?d.attr("dy",e.dy):l!==0&&d.attr("dy",l);const g=p||n1;if(e.tspan){const y=d.append("tspan");y.attr("x",e.x),e.fill!==void 0&&y.attr("fill",e.fill),y.text(g)}else d.text(g);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,i=r),o.push(d)}return o},pd=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");return r.attr("points",i(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,gs(t,e),r};let Li=-1;const gd=(t,e,i,r)=>{t.select&&i.forEach(s=>{const n=e[s],a=t.select("#actor"+n.actorCnt);!r.mirrorActors&&n.stopy?a.attr("y2",n.stopy+n.height/2):r.mirrorActors&&a.attr("y2",n.stopy)})},d7=async function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+5,o=t.append("g").lower();var l=o;r||(Li++,Object.keys(e.links||{}).length&&!i.forceMenus&&l.attr("onclick",u7(`actor${Li}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Li).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),l=o.append("g"),e.actorCnt=Li,e.links!=null&&l.attr("id","root-"+Li));const h=Wr();var u="actor";e.properties!=null&&e.properties.class?u=e.properties.class:h.fill="#eaeaea",r?u+=` ${fd}`:u+=` ${dd}`,h.x=e.x,h.y=s,h.width=e.width,h.height=e.height,h.class=u,h.rx=3,h.ry=3,h.name=e.name;const p=Wl(l,h);if(e.rectData=h,e.properties!=null&&e.properties.icon){const g=e.properties.icon.trim();g.charAt(0)==="@"?ox(l,h.x+h.width-20,h.y+10,g.substr(1)):ax(l,h.x+h.width-20,h.y+10,g)}await Yl(i,gi(e.description))(e.description,l,h.x,h.y,h.width,h.height,{class:"actor"},i);let d=e.height;if(p.node){const g=p.node().getBBox();e.height=g.height,d=g.height}return d},f7=async function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+80;t.lower(),r||(Li++,t.append("line").attr("id","actor"+Li).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),e.actorCnt=Li);const o=t.append("g");let l="actor-man";r?l+=` ${fd}`:l+=` ${dd}`,o.attr("class",l),o.attr("name",e.name);const h=Wr();h.x=e.x,h.y=s,h.fill="#eaeaea",h.width=e.width,h.height=e.height,h.class="actor",h.rx=3,h.ry=3,o.append("line").attr("id","actor-man-torso"+Li).attr("x1",n).attr("y1",s+25).attr("x2",n).attr("y2",s+45),o.append("line").attr("id","actor-man-arms"+Li).attr("x1",n-Ar/2).attr("y1",s+33).attr("x2",n+Ar/2).attr("y2",s+33),o.append("line").attr("x1",n-Ar/2).attr("y1",s+60).attr("x2",n).attr("y2",s+45),o.append("line").attr("x1",n).attr("y1",s+45).attr("x2",n+Ar/2-2).attr("y2",s+60);const u=o.append("circle");u.attr("cx",e.x+e.width/2),u.attr("cy",s+10),u.attr("r",15),u.attr("width",e.width),u.attr("height",e.height);const p=o.node().getBBox();return e.height=p.height,await Yl(i,gi(e.description))(e.description,o,h.x,h.y+35,h.width,h.height,{class:"actor"},i),e.height},p7=async function(t,e,i,r){switch(e.type){case"actor":return await f7(t,e,i,r);case"participant":return await d7(t,e,i,r)}},g7=async function(t,e,i){const s=t.append("g");yd(s,e),e.name&&await Yl(i)(e.name,s,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},i),s.lower()},y7=function(t){return t.append("g")},m7=function(t,e,i,r,s){const n=Wr(),a=e.anchored;n.x=e.startx,n.y=e.starty,n.class="activation"+s%3,n.width=e.stopx-e.startx,n.height=i-e.starty,Wl(a,n)},x7=async function(t,e,i,r){const{boxMargin:s,boxTextMargin:n,labelBoxHeight:a,labelBoxWidth:o,messageFontFamily:l,messageFontSize:h,messageFontWeight:u}=r,p=t.append("g"),d=function(x,_,v,C){return p.append("line").attr("x1",x).attr("y1",_).attr("x2",v).attr("y2",C).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach(function(x){d(e.startx,x.y,e.stopx,x.y).style("stroke-dasharray","3, 3")});let g=pl();g.text=i,g.x=e.startx,g.y=e.starty,g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=a||20,g.textMargin=n,g.class="labelText",pd(p,g),g=md(),g.text=e.title,g.x=e.startx+o/2+(e.stopx-e.startx)/2,g.y=e.starty+s+n,g.anchor="middle",g.valign="middle",g.textMargin=n,g.class="loopText",g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.wrap=!0;let y=gi(g.text)?await la(p,g,e):gs(p,g);if(e.sectionTitles!==void 0){for(const[x,_]of Object.entries(e.sectionTitles))if(_.message){g.text=_.message,g.x=e.startx+(e.stopx-e.startx)/2,g.y=e.sections[x].y+s+n,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.wrap=e.wrap,gi(g.text)?(e.starty=e.sections[x].y,await la(p,g,e)):gs(p,g);let v=Math.round(y.map(C=>(C._groups||C)[0][0].getBBox().height).reduce((C,R)=>C+R));e.sections[x].height+=v-(s+n)}}return e.height=Math.round(e.stopy-e.starty),p},yd=function(t,e){hu(t,e)},b7=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},k7=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},_7=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},T7=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},C7=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},E7=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},S7=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},md=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},w7=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},Yl=function(){function t(n,a,o,l,h,u,p){const d=a.append("text").attr("x",o+h/2).attr("y",l+u/2+5).style("text-anchor","middle").text(n);s(d,p)}function e(n,a,o,l,h,u,p,d){const{actorFontSize:g,actorFontFamily:y,actorFontWeight:x}=d,[_,v]=qr(g),C=n.split(mt.lineBreakRegex);for(let R=0;R<C.length;R++){const A=R*_-_*(C.length-1)/2,T=a.append("text").attr("x",o+h/2).attr("y",l).style("text-anchor","middle").style("font-size",v).style("font-weight",x).style("font-family",y);T.append("tspan").attr("x",o+h/2).attr("dy",A).text(C[R]),T.attr("y",l+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),s(T,p)}}function i(n,a,o,l,h,u,p,d){const g=a.append("switch"),x=g.append("foreignObject").attr("x",o).attr("y",l).attr("width",h).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");x.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,g,o,l,h,u,p,d),s(x,p)}async function r(n,a,o,l,h,u,p,d){const g=await on(n,se()),y=a.append("switch"),_=y.append("foreignObject").attr("x",o+h/2-g.width/2).attr("y",l+u/2-g.height/2).attr("width",g.width).attr("height",g.height).append("xhtml:div").style("height","100%").style("width","100%");_.append("div").style("text-align","center").style("vertical-align","middle").html(await zr(n,se())),e(n,y,o,l,h,u,p,d),s(_,p)}function s(n,a){for(const o in a)a.hasOwnProperty(o)&&n.attr(o,a[o])}return function(n,a=!1){return a?r:n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}}(),v7=function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{actorFontSize:d,actorFontFamily:g,actorFontWeight:y}=p,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const v=_*d-d*(x.length-1)/2,C=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").style("font-size",d).style("font-weight",y).style("font-family",g);C.append("tspan").attr("x",a).attr("dy",v).text(x[_]),C.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(C,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),ce={drawRect:Wl,drawText:gs,drawLabel:pd,drawActor:p7,drawBox:g7,drawPopup:h7,anchorElement:y7,drawActivation:m7,drawLoop:x7,drawBackgroundRect:yd,insertArrowHead:T7,insertArrowFilledHead:C7,insertSequenceNumber:E7,insertArrowCrossHead:S7,insertDatabaseIcon:b7,insertComputerIcon:k7,insertClockIcon:_7,getTextObj:md,getNoteRect:w7,fixLifeLineHeights:gd,sanitizeUrl:Mr.sanitizeUrl};let Z={};const gt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(t){this.boxes.push(t)},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,bd(Y())},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=this;let n=0;function a(o){return function(h){n++;const u=s.sequenceItems.length-n+1;s.updateVal(h,"starty",e-u*Z.boxMargin,Math.min),s.updateVal(h,"stopy",r+u*Z.boxMargin,Math.max),s.updateVal(gt.data,"startx",t-u*Z.boxMargin,Math.min),s.updateVal(gt.data,"stopx",i+u*Z.boxMargin,Math.max),o!=="activation"&&(s.updateVal(h,"startx",t-u*Z.boxMargin,Math.min),s.updateVal(h,"stopx",i+u*Z.boxMargin,Math.max),s.updateVal(gt.data,"starty",e-u*Z.boxMargin,Math.min),s.updateVal(gt.data,"stopy",r+u*Z.boxMargin,Math.max))}}this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},insert:function(t,e,i,r){const s=mt.getMin(t,i),n=mt.getMax(t,i),a=mt.getMin(e,r),o=mt.getMax(e,r);this.updateVal(gt.data,"startx",s,Math.min),this.updateVal(gt.data,"starty",a,Math.min),this.updateVal(gt.data,"stopx",n,Math.max),this.updateVal(gt.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},newActivation:function(t,e,i){const r=i[t.from.actor],s=Fa(t.from.actor).length||0,n=r.x+r.width/2+(s-1)*Z.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+Z.activationWidth,stopy:void 0,actor:t.from.actor,anchored:ce.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(i){return i.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},isLoopOverlap:function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:gt.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},saveVerticalPos:function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},resetVerticalPos:function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=mt.getMax(this.data.stopy,this.verticalPos)},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},A7=async function(t,e){gt.bumpVerticalPos(Z.boxMargin),e.height=Z.boxMargin,e.starty=gt.getVerticalPos();const i=Wr();i.x=e.startx,i.y=e.starty,i.width=e.width||Z.width,i.class="note";const r=t.append("g"),s=ce.drawRect(r,i),n=pl();n.x=e.startx,n.y=e.starty,n.width=i.width,n.dy="1em",n.text=e.message,n.class="noteText",n.fontFamily=Z.noteFontFamily,n.fontSize=Z.noteFontSize,n.fontWeight=Z.noteFontWeight,n.anchor=Z.noteAlign,n.textMargin=Z.noteMargin,n.valign="center";const a=gi(n.text)?await la(r,n):gs(r,n),o=Math.round(a.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,h)=>l+h));s.attr("height",o+2*Z.noteMargin),e.height+=o+2*Z.noteMargin,gt.bumpVerticalPos(o+2*Z.noteMargin),e.stopy=e.starty+o+2*Z.noteMargin,e.stopx=e.startx+i.width,gt.insert(e.startx,e.starty,e.stopx,e.stopy),gt.models.addNote(e)},Rr=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),Xr=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),Fo=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});async function L7(t,e){gt.bumpVerticalPos(10);const{startx:i,stopx:r,message:s}=e,n=mt.splitBreaks(s).length,a=gi(s),o=a?await on(s,Y()):Rt.calculateTextDimensions(s,Rr(Z));if(!a){const p=o.height/n;e.height+=p,gt.bumpVerticalPos(p)}let l,h=o.height-10;const u=o.width;if(i===r){l=gt.getVerticalPos()+h,Z.rightAngles||(h+=Z.boxMargin,l=gt.getVerticalPos()+h),h+=30;const p=mt.getMax(u/2,Z.width/2);gt.insert(i-p,gt.getVerticalPos()-10+h,r+p,gt.getVerticalPos()+30+h)}else h+=Z.boxMargin,l=gt.getVerticalPos()+h,gt.insert(i,l-10,r,l);return gt.bumpVerticalPos(h),e.height+=h,e.stopy=e.starty+e.height,gt.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}const B7=async function(t,e,i,r){const{startx:s,stopx:n,starty:a,message:o,type:l,sequenceIndex:h,sequenceVisible:u}=e,p=Rt.calculateTextDimensions(o,Rr(Z)),d=pl();d.x=s,d.y=a+10,d.width=n-s,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=Z.messageFontFamily,d.fontSize=Z.messageFontSize,d.fontWeight=Z.messageFontWeight,d.anchor=Z.messageAlign,d.valign="center",d.textMargin=Z.wrapPadding,d.tspan=!1,gi(d.text)?await la(t,d,{startx:s,stopx:n,starty:i}):gs(t,d);const g=p.width;let y;s===n?Z.rightAngles?y=t.append("path").attr("d",`M  ${s},${i} H ${s+mt.getMax(Z.width/2,g/2)} V ${i+25} H ${s}`):y=t.append("path").attr("d","M "+s+","+i+" C "+(s+60)+","+(i-10)+" "+(s+60)+","+(i+30)+" "+s+","+(i+20)):(y=t.append("line"),y.attr("x1",s),y.attr("y1",i),y.attr("x2",n),y.attr("y2",i)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let x="";Z.arrowMarkerAbsolute&&(x=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,x=x.replace(/\(/g,"\\("),x=x.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+x+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+x+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+x+"#crosshead)"),(u||Z.showSequenceNumbers)&&(y.attr("marker-start","url("+x+"#sequencenumber)"),t.append("text").attr("x",s).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))},I7=async function(t,e,i,r,s,n,a){let o=0,l=0,h,u=0;for(const p of r){const d=e[p],g=d.box;h&&h!=g&&(a||gt.models.addBox(h),l+=Z.boxMargin+h.margin),g&&g!=h&&(a||(g.x=o+l,g.y=s),l+=g.margin),d.width=d.width||Z.width,d.height=mt.getMax(d.height||Z.height,Z.height),d.margin=d.margin||Z.actorMargin,u=mt.getMax(u,d.height),i[d.name]&&(l+=d.width/2),d.x=o+l,d.starty=gt.getVerticalPos(),gt.insert(d.x,s,d.x+d.width,d.height),o+=d.width+l,d.box&&(d.box.width=o+g.margin-d.box.x),l=d.margin,h=d.box,gt.models.addActor(d)}h&&!a&&gt.models.addBox(h),gt.bumpVerticalPos(u)},Ro=async function(t,e,i,r){if(r){let s=0;gt.bumpVerticalPos(Z.boxMargin*2);for(const n of i){const a=e[n];a.stopy||(a.stopy=gt.getVerticalPos());const o=await ce.drawActor(t,a,Z,!0);s=mt.getMax(s,o)}gt.bumpVerticalPos(s+Z.boxMargin)}else for(const s of i){const n=e[s];await ce.drawActor(t,n,Z,!1)}},xd=function(t,e,i,r){let s=0,n=0;for(const a of i){const o=e[a],l=N7(o),h=ce.drawPopup(t,o,l,Z,Z.forceMenus,r);h.height>s&&(s=h.height),h.width+o.x>n&&(n=h.width+o.x)}return{maxHeight:s,maxWidth:n}},bd=function(t){Le(Z,t),t.fontFamily&&(Z.actorFontFamily=Z.noteFontFamily=Z.messageFontFamily=t.fontFamily),t.fontSize&&(Z.actorFontSize=Z.noteFontSize=Z.messageFontSize=t.fontSize),t.fontWeight&&(Z.actorFontWeight=Z.noteFontWeight=Z.messageFontWeight=t.fontWeight)},Fa=function(t){return gt.activations.filter(function(e){return e.actor===t})},oh=function(t,e){const i=e[t],r=Fa(t),s=r.reduce(function(a,o){return mt.getMin(a,o.startx)},i.x+i.width/2-1),n=r.reduce(function(a,o){return mt.getMax(a,o.stopx)},i.x+i.width/2+1);return[s,n]};function wi(t,e,i,r,s){gt.bumpVerticalPos(i);let n=r;if(e.id&&e.message&&t[e.id]){const a=t[e.id].width,o=Rr(Z);e.message=Rt.wrapLabel(`[${e.message}]`,a-2*Z.wrapPadding,o),e.width=a,e.wrap=!0;const l=Rt.calculateTextDimensions(e.message,o),h=mt.getMax(l.height,Z.labelBoxHeight);n=r+h,B.debug(`${h} - ${e.message}`)}s(e),gt.bumpVerticalPos(n)}function D7(t,e,i,r,s,n,a){function o(h,u){h.x<s[t.from].x?(gt.insert(e.stopx-u,e.starty,e.startx,e.stopy+h.height/2+Z.noteMargin),e.stopx=e.stopx+u):(gt.insert(e.startx,e.starty,e.stopx+u,e.stopy+h.height/2+Z.noteMargin),e.stopx=e.stopx-u)}function l(h,u){h.x<s[t.to].x?(gt.insert(e.startx-u,e.starty,e.stopx,e.stopy+h.height/2+Z.noteMargin),e.startx=e.startx+u):(gt.insert(e.stopx,e.starty,e.startx+u,e.stopy+h.height/2+Z.noteMargin),e.startx=e.startx-u)}if(n[t.to]==r){const h=s[t.to],u=h.type=="actor"?Ar/2+3:h.width/2+3;o(h,u),h.starty=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.from]==r){const h=s[t.from];if(Z.mirrorActors){const u=h.type=="actor"?Ar/2:h.width/2;l(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.to]==r){const h=s[t.to];if(Z.mirrorActors){const u=h.type=="actor"?Ar/2+3:h.width/2+3;o(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}}const F7=async function(t,e,i,r){const{securityLevel:s,sequence:n}=Y();Z=n;let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;gt.init(),B.debug(r.db);const h=s==="sandbox"?o.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=r.db.getActors(),p=r.db.getCreatedActors(),d=r.db.getDestroyedActors(),g=r.db.getBoxes();let y=r.db.getActorKeys();const x=r.db.getMessages(),_=r.db.getDiagramTitle(),v=r.db.hasAtLeastOneBox(),C=r.db.hasAtLeastOneBoxWithTitle(),R=await R7(u,x,r);if(Z.height=await O7(u,R,g),ce.insertComputerIcon(h),ce.insertDatabaseIcon(h),ce.insertClockIcon(h),v&&(gt.bumpVerticalPos(Z.boxMargin),C&&gt.bumpVerticalPos(g[0].textMaxHeight)),Z.hideUnusedParticipants===!0){const F=new Set;x.forEach(I=>{F.add(I.from),F.add(I.to)}),y=y.filter(I=>F.has(I))}await I7(h,u,p,y,0,x,!1);const A=await V7(x,u,R,r);ce.insertArrowHead(h),ce.insertArrowCrossHead(h),ce.insertArrowFilledHead(h),ce.insertSequenceNumber(h);function T(F,I){const M=gt.endActivation(F);M.starty+18>I&&(M.starty=I-6,I+=12),ce.drawActivation(h,M,I,Z,Fa(F.from.actor).length),gt.insert(M.startx,I-10,M.stopx,I)}let k=1,w=1;const S=[],m=[];let E=0;for(const F of x){let I,M,z;switch(F.type){case r.db.LINETYPE.NOTE:gt.resetVerticalPos(),M=F.noteModel,await A7(h,M);break;case r.db.LINETYPE.ACTIVE_START:gt.newActivation(F,h,u);break;case r.db.LINETYPE.ACTIVE_END:T(F,gt.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:wi(A,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.LOOP_END:I=gt.endLoop(),await ce.drawLoop(h,I,"loop",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.RECT_START:wi(A,F,Z.boxMargin,Z.boxMargin,st=>gt.newLoop(void 0,st.message));break;case r.db.LINETYPE.RECT_END:I=gt.endLoop(),m.push(I),gt.models.addLoop(I),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos());break;case r.db.LINETYPE.OPT_START:wi(A,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.OPT_END:I=gt.endLoop(),await ce.drawLoop(h,I,"opt",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.ALT_START:wi(A,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.ALT_ELSE:wi(A,F,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.ALT_END:I=gt.endLoop(),await ce.drawLoop(h,I,"alt",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:wi(A,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st)),gt.saveVerticalPos();break;case r.db.LINETYPE.PAR_AND:wi(A,F,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.PAR_END:I=gt.endLoop(),await ce.drawLoop(h,I,"par",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.AUTONUMBER:k=F.message.start||k,w=F.message.step||w,F.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:wi(A,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.CRITICAL_OPTION:wi(A,F,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.CRITICAL_END:I=gt.endLoop(),await ce.drawLoop(h,I,"critical",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.BREAK_START:wi(A,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.BREAK_END:I=gt.endLoop(),await ce.drawLoop(h,I,"break",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;default:try{z=F.msgModel,z.starty=gt.getVerticalPos(),z.sequenceIndex=k,z.sequenceVisible=r.db.showSequenceNumbers();const st=await L7(h,z);D7(F,z,st,E,u,p,d),S.push({messageModel:z,lineStartY:st}),gt.models.addMessage(z)}catch(st){B.error("error while drawing message",st)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(F.type)&&(k=k+w),E++}B.debug("createdActors",p),B.debug("destroyedActors",d),await Ro(h,u,y,!1);for(const F of S)await B7(h,F.messageModel,F.lineStartY,r);Z.mirrorActors&&await Ro(h,u,y,!0),m.forEach(F=>ce.drawBackgroundRect(h,F)),gd(h,u,y,Z);for(const F of gt.models.boxes)F.height=gt.getVerticalPos()-F.y,gt.insert(F.x,F.y,F.x+F.width,F.height),F.startx=F.x,F.starty=F.y,F.stopx=F.startx+F.width,F.stopy=F.starty+F.height,F.stroke="rgb(0,0,0, 0.5)",await ce.drawBox(h,F,Z);v&&gt.bumpVerticalPos(Z.boxMargin);const f=xd(h,u,y,l),{bounds:L}=gt.getBounds();let b=L.stopy-L.starty;b<f.maxHeight&&(b=f.maxHeight);let P=b+2*Z.diagramMarginY;Z.mirrorActors&&(P=P-Z.boxMargin+Z.bottomMarginAdj);let U=L.stopx-L.startx;U<f.maxWidth&&(U=f.maxWidth);const N=U+2*Z.diagramMarginX;_&&h.append("text").text(_).attr("x",(L.stopx-L.startx)/2-2*Z.diagramMarginX).attr("y",-25),Oe(h,P,N,Z.useMaxWidth);const D=_?40:0;h.attr("viewBox",L.startx-Z.diagramMarginX+" -"+(Z.diagramMarginY+D)+" "+N+" "+(P+D)),B.debug("models:",gt.models)};async function R7(t,e,i){const r={};for(const s of e)if(t[s.to]&&t[s.from]){const n=t[s.to];if(s.placement===i.db.PLACEMENT.LEFTOF&&!n.prevActor||s.placement===i.db.PLACEMENT.RIGHTOF&&!n.nextActor)continue;const a=s.placement!==void 0,o=!a,l=a?Xr(Z):Rr(Z),h=s.wrap?Rt.wrapLabel(s.message,Z.width-2*Z.wrapPadding,l):s.message,p=(gi(h)?await on(s.message,Y()):Rt.calculateTextDimensions(h,l)).width+2*Z.wrapPadding;o&&s.from===n.nextActor?r[s.to]=mt.getMax(r[s.to]||0,p):o&&s.from===n.prevActor?r[s.from]=mt.getMax(r[s.from]||0,p):o&&s.from===s.to?(r[s.from]=mt.getMax(r[s.from]||0,p/2),r[s.to]=mt.getMax(r[s.to]||0,p/2)):s.placement===i.db.PLACEMENT.RIGHTOF?r[s.from]=mt.getMax(r[s.from]||0,p):s.placement===i.db.PLACEMENT.LEFTOF?r[n.prevActor]=mt.getMax(r[n.prevActor]||0,p):s.placement===i.db.PLACEMENT.OVER&&(n.prevActor&&(r[n.prevActor]=mt.getMax(r[n.prevActor]||0,p/2)),n.nextActor&&(r[s.from]=mt.getMax(r[s.from]||0,p/2)))}return B.debug("maxMessageWidthPerActor:",r),r}const N7=function(t){let e=0;const i=Fo(Z);for(const r in t.links){const n=Rt.calculateTextDimensions(r,i).width+2*Z.wrapPadding+2*Z.boxMargin;e<n&&(e=n)}return e};async function O7(t,e,i){let r=0;for(const n of Object.keys(t)){const a=t[n];a.wrap&&(a.description=Rt.wrapLabel(a.description,Z.width-2*Z.wrapPadding,Fo(Z)));const o=gi(a.description)?await on(a.description,Y()):Rt.calculateTextDimensions(a.description,Fo(Z));a.width=a.wrap?Z.width:mt.getMax(Z.width,o.width+2*Z.wrapPadding),a.height=a.wrap?mt.getMax(o.height,Z.height):Z.height,r=mt.getMax(r,a.height)}for(const n in e){const a=t[n];if(!a)continue;const o=t[a.nextActor];if(!o){const p=e[n]+Z.actorMargin-a.width/2;a.margin=mt.getMax(p,Z.actorMargin);continue}const h=e[n]+Z.actorMargin-a.width/2-o.width/2;a.margin=mt.getMax(h,Z.actorMargin)}let s=0;return i.forEach(n=>{const a=Rr(Z);let o=n.actorKeys.reduce((u,p)=>u+=t[p].width+(t[p].margin||0),0);o-=2*Z.boxTextMargin,n.wrap&&(n.name=Rt.wrapLabel(n.name,o-2*Z.wrapPadding,a));const l=Rt.calculateTextDimensions(n.name,a);s=mt.getMax(l.height,s);const h=mt.getMax(o,l.width+2*Z.wrapPadding);if(n.margin=Z.boxTextMargin,o<h){const u=(h-o)/2;n.margin+=u}}),i.forEach(n=>n.textMaxHeight=s),mt.getMax(r,Z.height)}const P7=async function(t,e,i){const r=e[t.from].x,s=e[t.to].x,n=t.wrap&&t.message;let a=gi(t.message)?await on(t.message,Y()):Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,Z.width,Xr(Z)):t.message,Xr(Z));const o={width:n?Z.width:mt.getMax(Z.width,a.width+2*Z.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===i.db.PLACEMENT.RIGHTOF?(o.width=n?mt.getMax(Z.width,a.width):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*Z.noteMargin),o.startx=r+(e[t.from].width+Z.actorMargin)/2):t.placement===i.db.PLACEMENT.LEFTOF?(o.width=n?mt.getMax(Z.width,a.width+2*Z.noteMargin):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*Z.noteMargin),o.startx=r-o.width+(e[t.from].width-Z.actorMargin)/2):t.to===t.from?(a=Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,mt.getMax(Z.width,e[t.from].width),Xr(Z)):t.message,Xr(Z)),o.width=n?mt.getMax(Z.width,e[t.from].width):mt.getMax(e[t.from].width,Z.width,a.width+2*Z.noteMargin),o.startx=r+(e[t.from].width-o.width)/2):(o.width=Math.abs(r+e[t.from].width/2-(s+e[t.to].width/2))+Z.actorMargin,o.startx=r<s?r+e[t.from].width/2-Z.actorMargin/2:s+e[t.to].width/2-Z.actorMargin/2),n&&(o.message=Rt.wrapLabel(t.message,o.width-2*Z.wrapPadding,Xr(Z))),B.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},M7=function(t,e,i){if(![i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT].includes(t.type))return{};const[r,s]=oh(t.from,e),[n,a]=oh(t.to,e),o=r<=n,l=o?s:r;let h=o?n:a;const u=Math.abs(n-a)>2,p=x=>o?-x:x;t.from===t.to?h=l:(t.activate&&!u&&(h+=p(Z.activationWidth/2-1)),[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(h+=p(3)));const d=[r,s,n,a],g=Math.abs(l-h);t.wrap&&t.message&&(t.message=Rt.wrapLabel(t.message,mt.getMax(g+2*Z.wrapPadding,Z.width),Rr(Z)));const y=Rt.calculateTextDimensions(t.message,Rr(Z));return{width:mt.getMax(t.wrap?0:y.width+2*Z.wrapPadding,g+2*Z.wrapPadding,Z.width),height:0,startx:l,stopx:h,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}},V7=async function(t,e,i,r){const s={},n=[];let a,o,l;for(const h of t){switch(h.id=Rt.random({length:10}),h.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:n.push({id:h.id,msg:h.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:h.message&&(a=n.pop(),s[a.id]=a,s[h.id]=a,n.push(a));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:a=n.pop(),s[a.id]=a;break;case r.db.LINETYPE.ACTIVE_START:{const p=e[h.from?h.from.actor:h.to.actor],d=Fa(h.from?h.from.actor:h.to.actor).length,g=p.x+p.width/2+(d-1)*Z.activationWidth/2,y={startx:g,stopx:g+Z.activationWidth,actor:h.from.actor,enabled:!0};gt.activations.push(y)}break;case r.db.LINETYPE.ACTIVE_END:{const p=gt.activations.map(d=>d.actor).lastIndexOf(h.from.actor);delete gt.activations.splice(p,1)[0]}break}h.placement!==void 0?(o=await P7(h,e,r),h.noteModel=o,n.forEach(p=>{a=p,a.from=mt.getMin(a.from,o.startx),a.to=mt.getMax(a.to,o.startx+o.width),a.width=mt.getMax(a.width,Math.abs(a.from-a.to))-Z.labelBoxWidth})):(l=M7(h,e,r),h.msgModel=l,l.startx&&l.stopx&&n.length>0&&n.forEach(p=>{if(a=p,l.startx===l.stopx){const d=e[h.from],g=e[h.to];a.from=mt.getMin(d.x-l.width/2,d.x-d.width/2,a.from),a.to=mt.getMax(g.x+l.width/2,g.x+d.width/2,a.to),a.width=mt.getMax(a.width,Math.abs(a.to-a.from))-Z.labelBoxWidth}else a.from=mt.getMin(l.startx,a.from),a.to=mt.getMax(l.stopx,a.to),a.width=mt.getMax(a.width,l.width)-Z.labelBoxWidth}))}return gt.activations=[],B.debug("Loop type widths:",s),s},z7={bounds:gt,drawActors:Ro,drawActorsPopup:xd,setConf:bd,draw:F7},q7={parser:P_,db:ah,renderer:z7,styles:c7,init:({wrap:t})=>{ah.setWrap(t)}},W7=Object.freeze(Object.defineProperty({__proto__:null,diagram:q7},Symbol.toStringTag,{value:"Module"}));var No=function(){var t=function(Wt,pt,ut,ot){for(ut=ut||{},ot=Wt.length;ot--;ut[Wt[ot]]=pt);return ut},e=[1,17],i=[1,18],r=[1,19],s=[1,39],n=[1,40],a=[1,25],o=[1,23],l=[1,24],h=[1,31],u=[1,32],p=[1,33],d=[1,34],g=[1,35],y=[1,36],x=[1,26],_=[1,27],v=[1,28],C=[1,29],R=[1,43],A=[1,30],T=[1,42],k=[1,44],w=[1,41],S=[1,45],m=[1,9],E=[1,8,9],f=[1,56],L=[1,57],b=[1,58],P=[1,59],U=[1,60],N=[1,61],D=[1,62],F=[1,8,9,39],I=[1,74],M=[1,8,9,12,13,21,37,39,42,59,60,61,62,63,64,65,70,72],z=[1,8,9,12,13,19,21,37,39,42,46,59,60,61,62,63,64,65,70,72,74,80,95,97,98],st=[13,74,80,95,97,98],j=[13,64,65,74,80,95,97,98],dt=[13,59,60,61,62,63,74,80,95,97,98],K=[1,93],G=[1,110],tt=[1,108],nt=[1,102],Q=[1,103],J=[1,104],O=[1,105],at=[1,106],W=[1,107],ft=[1,109],V=[1,8,9,37,39,42],vt=[1,8,9,21],X=[1,8,9,78],St=[1,8,9,21,73,74,78,80,81,82,83,84,85],bt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,className:17,classLiteralName:18,GENERICTYPE:19,relationStatement:20,LABEL:21,namespaceStatement:22,classStatement:23,memberStatement:24,annotationStatement:25,clickStatement:26,styleStatement:27,cssClassStatement:28,noteStatement:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,namespaceIdentifier:36,STRUCT_START:37,classStatements:38,STRUCT_STOP:39,NAMESPACE:40,classIdentifier:41,STYLE_SEPARATOR:42,members:43,CLASS:44,ANNOTATION_START:45,ANNOTATION_END:46,MEMBER:47,SEPARATOR:48,relation:49,NOTE_FOR:50,noteText:51,NOTE:52,direction_tb:53,direction_bt:54,direction_rl:55,direction_lr:56,relationType:57,lineType:58,AGGREGATION:59,EXTENSION:60,COMPOSITION:61,DEPENDENCY:62,LOLLIPOP:63,LINE:64,DOTTED_LINE:65,CALLBACK:66,LINK:67,LINK_TARGET:68,CLICK:69,CALLBACK_NAME:70,CALLBACK_ARGS:71,HREF:72,STYLE:73,ALPHA:74,stylesOpt:75,CSSCLASS:76,style:77,COMMA:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,commentToken:86,textToken:87,graphCodeTokens:88,textNoTagsToken:89,TAGSTART:90,TAGEND:91,"==":92,"--":93,DEFAULT:94,MINUS:95,keywords:96,UNICODE_TEXT:97,BQUOTE_STR:98,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",19:"GENERICTYPE",21:"LABEL",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",37:"STRUCT_START",39:"STRUCT_STOP",40:"NAMESPACE",42:"STYLE_SEPARATOR",44:"CLASS",45:"ANNOTATION_START",46:"ANNOTATION_END",47:"MEMBER",48:"SEPARATOR",50:"NOTE_FOR",52:"NOTE",53:"direction_tb",54:"direction_bt",55:"direction_rl",56:"direction_lr",59:"AGGREGATION",60:"EXTENSION",61:"COMPOSITION",62:"DEPENDENCY",63:"LOLLIPOP",64:"LINE",65:"DOTTED_LINE",66:"CALLBACK",67:"LINK",68:"LINK_TARGET",69:"CLICK",70:"CALLBACK_NAME",71:"CALLBACK_ARGS",72:"HREF",73:"STYLE",74:"ALPHA",76:"CSSCLASS",78:"COMMA",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",88:"graphCodeTokens",90:"TAGSTART",91:"TAGEND",92:"==",93:"--",94:"DEFAULT",95:"MINUS",96:"keywords",97:"UNICODE_TEXT",98:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,2],[17,1],[17,1],[17,2],[17,2],[17,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[22,4],[22,5],[36,2],[38,1],[38,2],[38,3],[23,1],[23,3],[23,4],[23,6],[41,2],[41,3],[25,4],[43,1],[43,2],[24,1],[24,2],[24,1],[24,1],[20,3],[20,4],[20,4],[20,5],[29,3],[29,2],[30,1],[30,1],[30,1],[30,1],[49,3],[49,2],[49,2],[49,1],[57,1],[57,1],[57,1],[57,1],[57,1],[58,1],[58,1],[26,3],[26,4],[26,3],[26,4],[26,4],[26,5],[26,3],[26,4],[26,4],[26,5],[26,4],[26,5],[26,5],[26,6],[27,3],[28,3],[75,1],[75,3],[77,1],[77,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[86,1],[86,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[89,1],[89,1],[89,1],[89,1],[16,1],[16,1],[16,1],[16,1],[18,1],[51,1]],performAction:function(pt,ut,ot,lt,ht,$,rt){var it=$.length-1;switch(ht){case 8:this.$=$[it-1];break;case 9:case 11:case 12:this.$=$[it];break;case 10:case 13:this.$=$[it-1]+$[it];break;case 14:case 15:this.$=$[it-1]+"~"+$[it]+"~";break;case 16:lt.addRelation($[it]);break;case 17:$[it-1].title=lt.cleanupLabel($[it]),lt.addRelation($[it-1]);break;case 27:this.$=$[it].trim(),lt.setAccTitle(this.$);break;case 28:case 29:this.$=$[it].trim(),lt.setAccDescription(this.$);break;case 30:lt.addClassesToNamespace($[it-3],$[it-1]);break;case 31:lt.addClassesToNamespace($[it-4],$[it-1]);break;case 32:this.$=$[it],lt.addNamespace($[it]);break;case 33:this.$=[$[it]];break;case 34:this.$=[$[it-1]];break;case 35:$[it].unshift($[it-2]),this.$=$[it];break;case 37:lt.setCssClass($[it-2],$[it]);break;case 38:lt.addMembers($[it-3],$[it-1]);break;case 39:lt.setCssClass($[it-5],$[it-3]),lt.addMembers($[it-5],$[it-1]);break;case 40:this.$=$[it],lt.addClass($[it]);break;case 41:this.$=$[it-1],lt.addClass($[it-1]),lt.setClassLabel($[it-1],$[it]);break;case 42:lt.addAnnotation($[it],$[it-2]);break;case 43:this.$=[$[it]];break;case 44:$[it].push($[it-1]),this.$=$[it];break;case 45:break;case 46:lt.addMember($[it-1],lt.cleanupLabel($[it]));break;case 47:break;case 48:break;case 49:this.$={id1:$[it-2],id2:$[it],relation:$[it-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:$[it-3],id2:$[it],relation:$[it-1],relationTitle1:$[it-2],relationTitle2:"none"};break;case 51:this.$={id1:$[it-3],id2:$[it],relation:$[it-2],relationTitle1:"none",relationTitle2:$[it-1]};break;case 52:this.$={id1:$[it-4],id2:$[it],relation:$[it-2],relationTitle1:$[it-3],relationTitle2:$[it-1]};break;case 53:lt.addNote($[it],$[it-1]);break;case 54:lt.addNote($[it]);break;case 55:lt.setDirection("TB");break;case 56:lt.setDirection("BT");break;case 57:lt.setDirection("RL");break;case 58:lt.setDirection("LR");break;case 59:this.$={type1:$[it-2],type2:$[it],lineType:$[it-1]};break;case 60:this.$={type1:"none",type2:$[it],lineType:$[it-1]};break;case 61:this.$={type1:$[it-1],type2:"none",lineType:$[it]};break;case 62:this.$={type1:"none",type2:"none",lineType:$[it]};break;case 63:this.$=lt.relationType.AGGREGATION;break;case 64:this.$=lt.relationType.EXTENSION;break;case 65:this.$=lt.relationType.COMPOSITION;break;case 66:this.$=lt.relationType.DEPENDENCY;break;case 67:this.$=lt.relationType.LOLLIPOP;break;case 68:this.$=lt.lineType.LINE;break;case 69:this.$=lt.lineType.DOTTED_LINE;break;case 70:case 76:this.$=$[it-2],lt.setClickEvent($[it-1],$[it]);break;case 71:case 77:this.$=$[it-3],lt.setClickEvent($[it-2],$[it-1]),lt.setTooltip($[it-2],$[it]);break;case 72:this.$=$[it-2],lt.setLink($[it-1],$[it]);break;case 73:this.$=$[it-3],lt.setLink($[it-2],$[it-1],$[it]);break;case 74:this.$=$[it-3],lt.setLink($[it-2],$[it-1]),lt.setTooltip($[it-2],$[it]);break;case 75:this.$=$[it-4],lt.setLink($[it-3],$[it-2],$[it]),lt.setTooltip($[it-3],$[it-1]);break;case 78:this.$=$[it-3],lt.setClickEvent($[it-2],$[it-1],$[it]);break;case 79:this.$=$[it-4],lt.setClickEvent($[it-3],$[it-2],$[it-1]),lt.setTooltip($[it-3],$[it]);break;case 80:this.$=$[it-3],lt.setLink($[it-2],$[it]);break;case 81:this.$=$[it-4],lt.setLink($[it-3],$[it-1],$[it]);break;case 82:this.$=$[it-4],lt.setLink($[it-3],$[it-1]),lt.setTooltip($[it-3],$[it]);break;case 83:this.$=$[it-5],lt.setLink($[it-4],$[it-2],$[it]),lt.setTooltip($[it-4],$[it-1]);break;case 84:this.$=$[it-2],lt.setCssStyle($[it-1],$[it]);break;case 85:lt.setCssClass($[it-1],$[it]);break;case 86:this.$=[$[it]];break;case 87:$[it-2].push($[it]),this.$=$[it-2];break;case 89:this.$=$[it-1]+$[it];break}},table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:v,73:C,74:R,76:A,80:T,95:k,97:w,98:S},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(m,[2,5],{8:[1,46]}),{8:[1,47]},t(E,[2,16],{21:[1,48]}),t(E,[2,18]),t(E,[2,19]),t(E,[2,20]),t(E,[2,21]),t(E,[2,22]),t(E,[2,23]),t(E,[2,24]),t(E,[2,25]),t(E,[2,26]),{32:[1,49]},{34:[1,50]},t(E,[2,29]),t(E,[2,45],{49:51,57:54,58:55,13:[1,52],21:[1,53],59:f,60:L,61:b,62:P,63:U,64:N,65:D}),{37:[1,63]},t(F,[2,36],{37:[1,65],42:[1,64]}),t(E,[2,47]),t(E,[2,48]),{16:66,74:R,80:T,95:k,97:w},{16:37,17:67,18:38,74:R,80:T,95:k,97:w,98:S},{16:37,17:68,18:38,74:R,80:T,95:k,97:w,98:S},{16:37,17:69,18:38,74:R,80:T,95:k,97:w,98:S},{74:[1,70]},{13:[1,71]},{16:37,17:72,18:38,74:R,80:T,95:k,97:w,98:S},{13:I,51:73},t(E,[2,55]),t(E,[2,56]),t(E,[2,57]),t(E,[2,58]),t(M,[2,11],{16:37,18:38,17:75,19:[1,76],74:R,80:T,95:k,97:w,98:S}),t(M,[2,12],{19:[1,77]}),{15:78,16:79,74:R,80:T,95:k,97:w},{16:37,17:80,18:38,74:R,80:T,95:k,97:w,98:S},t(z,[2,112]),t(z,[2,113]),t(z,[2,114]),t(z,[2,115]),t([1,8,9,12,13,19,21,37,39,42,59,60,61,62,63,64,65,70,72],[2,116]),t(m,[2,6],{10:5,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,17:20,36:21,41:22,16:37,18:38,5:81,31:e,33:i,35:r,40:s,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:v,73:C,74:R,76:A,80:T,95:k,97:w,98:S}),{5:82,10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:v,73:C,74:R,76:A,80:T,95:k,97:w,98:S},t(E,[2,17]),t(E,[2,27]),t(E,[2,28]),{13:[1,84],16:37,17:83,18:38,74:R,80:T,95:k,97:w,98:S},{49:85,57:54,58:55,59:f,60:L,61:b,62:P,63:U,64:N,65:D},t(E,[2,46]),{58:86,64:N,65:D},t(st,[2,62],{57:87,59:f,60:L,61:b,62:P,63:U}),t(j,[2,63]),t(j,[2,64]),t(j,[2,65]),t(j,[2,66]),t(j,[2,67]),t(dt,[2,68]),t(dt,[2,69]),{8:[1,89],23:90,38:88,41:22,44:n},{16:91,74:R,80:T,95:k,97:w},{43:92,47:K},{46:[1,94]},{13:[1,95]},{13:[1,96]},{70:[1,97],72:[1,98]},{21:G,73:tt,74:nt,75:99,77:100,79:101,80:Q,81:J,82:O,83:at,84:W,85:ft},{74:[1,111]},{13:I,51:112},t(E,[2,54]),t(E,[2,117]),t(M,[2,13]),t(M,[2,14]),t(M,[2,15]),{37:[2,32]},{15:113,16:79,37:[2,9],74:R,80:T,95:k,97:w},t(V,[2,40],{11:114,12:[1,115]}),t(m,[2,7]),{9:[1,116]},t(vt,[2,49]),{16:37,17:117,18:38,74:R,80:T,95:k,97:w,98:S},{13:[1,119],16:37,17:118,18:38,74:R,80:T,95:k,97:w,98:S},t(st,[2,61],{57:120,59:f,60:L,61:b,62:P,63:U}),t(st,[2,60]),{39:[1,121]},{23:90,38:122,41:22,44:n},{8:[1,123],39:[2,33]},t(F,[2,37],{37:[1,124]}),{39:[1,125]},{39:[2,43],43:126,47:K},{16:37,17:127,18:38,74:R,80:T,95:k,97:w,98:S},t(E,[2,70],{13:[1,128]}),t(E,[2,72],{13:[1,130],68:[1,129]}),t(E,[2,76],{13:[1,131],71:[1,132]}),{13:[1,133]},t(E,[2,84],{78:[1,134]}),t(X,[2,86],{79:135,21:G,73:tt,74:nt,80:Q,81:J,82:O,83:at,84:W,85:ft}),t(St,[2,88]),t(St,[2,90]),t(St,[2,91]),t(St,[2,92]),t(St,[2,93]),t(St,[2,94]),t(St,[2,95]),t(St,[2,96]),t(St,[2,97]),t(St,[2,98]),t(E,[2,85]),t(E,[2,53]),{37:[2,10]},t(V,[2,41]),{13:[1,136]},{1:[2,4]},t(vt,[2,51]),t(vt,[2,50]),{16:37,17:137,18:38,74:R,80:T,95:k,97:w,98:S},t(st,[2,59]),t(E,[2,30]),{39:[1,138]},{23:90,38:139,39:[2,34],41:22,44:n},{43:140,47:K},t(F,[2,38]),{39:[2,44]},t(E,[2,42]),t(E,[2,71]),t(E,[2,73]),t(E,[2,74],{68:[1,141]}),t(E,[2,77]),t(E,[2,78],{13:[1,142]}),t(E,[2,80],{13:[1,144],68:[1,143]}),{21:G,73:tt,74:nt,77:145,79:101,80:Q,81:J,82:O,83:at,84:W,85:ft},t(St,[2,89]),{14:[1,146]},t(vt,[2,52]),t(E,[2,31]),{39:[2,35]},{39:[1,147]},t(E,[2,75]),t(E,[2,79]),t(E,[2,81]),t(E,[2,82],{68:[1,148]}),t(X,[2,87],{79:135,21:G,73:tt,74:nt,80:Q,81:J,82:O,83:at,84:W,85:ft}),t(V,[2,8]),t(F,[2,39]),t(E,[2,83])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],78:[2,32],113:[2,10],116:[2,4],126:[2,44],139:[2,35]},parseError:function(pt,ut){if(ut.recoverable)this.trace(pt);else{var ot=new Error(pt);throw ot.hash=ut,ot}},parse:function(pt){var ut=this,ot=[0],lt=[],ht=[null],$=[],rt=this.table,it="",ct=0,ee=0,Qt=2,de=1,zt=$.slice.call(arguments,1),Gt=Object.create(this.lexer),qt={yy:{}};for(var Se in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Se)&&(qt.yy[Se]=this.yy[Se]);Gt.setInput(pt,qt.yy),qt.yy.lexer=Gt,qt.yy.parser=this,typeof Gt.yylloc>"u"&&(Gt.yylloc={});var fe=Gt.yylloc;$.push(fe);var lr=Gt.options&&Gt.options.ranges;typeof qt.yy.parseError=="function"?this.parseError=qt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ur(){var It;return It=lt.pop()||Gt.lex()||de,typeof It!="number"&&(It instanceof Array&&(lt=It,It=lt.pop()),It=ut.symbols_[It]||It),It}for(var xe,jt,ie,Ot,Zt={},Dt,Yt,Ut,Pt;;){if(jt=ot[ot.length-1],this.defaultActions[jt]?ie=this.defaultActions[jt]:((xe===null||typeof xe>"u")&&(xe=Ur()),ie=rt[jt]&&rt[jt][xe]),typeof ie>"u"||!ie.length||!ie[0]){var Nt="";Pt=[];for(Dt in rt[jt])this.terminals_[Dt]&&Dt>Qt&&Pt.push("'"+this.terminals_[Dt]+"'");Gt.showPosition?Nt="Parse error on line "+(ct+1)+`:
`+Gt.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[xe]||xe)+"'":Nt="Parse error on line "+(ct+1)+": Unexpected "+(xe==de?"end of input":"'"+(this.terminals_[xe]||xe)+"'"),this.parseError(Nt,{text:Gt.match,token:this.terminals_[xe]||xe,line:Gt.yylineno,loc:fe,expected:Pt})}if(ie[0]instanceof Array&&ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+jt+", token: "+xe);switch(ie[0]){case 1:ot.push(xe),ht.push(Gt.yytext),$.push(Gt.yylloc),ot.push(ie[1]),xe=null,ee=Gt.yyleng,it=Gt.yytext,ct=Gt.yylineno,fe=Gt.yylloc;break;case 2:if(Yt=this.productions_[ie[1]][1],Zt.$=ht[ht.length-Yt],Zt._$={first_line:$[$.length-(Yt||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(Yt||1)].first_column,last_column:$[$.length-1].last_column},lr&&(Zt._$.range=[$[$.length-(Yt||1)].range[0],$[$.length-1].range[1]]),Ot=this.performAction.apply(Zt,[it,ee,ct,qt.yy,ie[1],ht,$].concat(zt)),typeof Ot<"u")return Ot;Yt&&(ot=ot.slice(0,-1*Yt*2),ht=ht.slice(0,-1*Yt),$=$.slice(0,-1*Yt)),ot.push(this.productions_[ie[1]][0]),ht.push(Zt.$),$.push(Zt._$),Ut=rt[ot[ot.length-2]][ot[ot.length-1]],ot.push(Ut);break;case 3:return!0}}return!0}},Vt=function(){var Wt={EOF:1,parseError:function(ut,ot){if(this.yy.parser)this.yy.parser.parseError(ut,ot);else throw new Error(ut)},setInput:function(pt,ut){return this.yy=ut||this.yy||{},this._input=pt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var pt=this._input[0];this.yytext+=pt,this.yyleng++,this.offset++,this.match+=pt,this.matched+=pt;var ut=pt.match(/(?:\r\n?|\n).*/g);return ut?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),pt},unput:function(pt){var ut=pt.length,ot=pt.split(/(?:\r\n?|\n)/g);this._input=pt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ut),this.offset-=ut;var lt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ot.length-1&&(this.yylineno-=ot.length-1);var ht=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ot?(ot.length===lt.length?this.yylloc.first_column:0)+lt[lt.length-ot.length].length-ot[0].length:this.yylloc.first_column-ut},this.options.ranges&&(this.yylloc.range=[ht[0],ht[0]+this.yyleng-ut]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(pt){this.unput(this.match.slice(pt))},pastInput:function(){var pt=this.matched.substr(0,this.matched.length-this.match.length);return(pt.length>20?"...":"")+pt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var pt=this.match;return pt.length<20&&(pt+=this._input.substr(0,20-pt.length)),(pt.substr(0,20)+(pt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pt=this.pastInput(),ut=new Array(pt.length+1).join("-");return pt+this.upcomingInput()+`
`+ut+"^"},test_match:function(pt,ut){var ot,lt,ht;if(this.options.backtrack_lexer&&(ht={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ht.yylloc.range=this.yylloc.range.slice(0))),lt=pt[0].match(/(?:\r\n?|\n).*/g),lt&&(this.yylineno+=lt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lt?lt[lt.length-1].length-lt[lt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+pt[0].length},this.yytext+=pt[0],this.match+=pt[0],this.matches=pt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(pt[0].length),this.matched+=pt[0],ot=this.performAction.call(this,this.yy,this,ut,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ot)return ot;if(this._backtrack){for(var $ in ht)this[$]=ht[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var pt,ut,ot,lt;this._more||(this.yytext="",this.match="");for(var ht=this._currentRules(),$=0;$<ht.length;$++)if(ot=this._input.match(this.rules[ht[$]]),ot&&(!ut||ot[0].length>ut[0].length)){if(ut=ot,lt=$,this.options.backtrack_lexer){if(pt=this.test_match(ot,ht[$]),pt!==!1)return pt;if(this._backtrack){ut=!1;continue}else return!1}else if(!this.options.flex)break}return ut?(pt=this.test_match(ut,ht[lt]),pt!==!1?pt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ut=this.next();return ut||this.lex()},begin:function(ut){this.conditionStack.push(ut)},popState:function(){var ut=this.conditionStack.length-1;return ut>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ut){return ut=this.conditionStack.length-1-Math.abs(ut||0),ut>=0?this.conditionStack[ut]:"INITIAL"},pushState:function(ut){this.begin(ut)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ut,ot,lt,ht){switch(lt){case 0:return 53;case 1:return 54;case 2:return 55;case 3:return 56;case 4:break;case 5:break;case 6:return this.begin("acc_title"),31;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),33;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 70;case 22:this.popState();break;case 23:return 71;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 73;case 28:return this.begin("namespace"),40;case 29:return this.popState(),8;case 30:break;case 31:return this.begin("namespace-body"),37;case 32:return this.popState(),39;case 33:return"EOF_IN_STRUCT";case 34:return 8;case 35:break;case 36:return"EDGE_STATE";case 37:return this.begin("class"),44;case 38:return this.popState(),8;case 39:break;case 40:return this.popState(),this.popState(),39;case 41:return this.begin("class-body"),37;case 42:return this.popState(),39;case 43:return"EOF_IN_STRUCT";case 44:return"EDGE_STATE";case 45:return"OPEN_IN_STRUCT";case 46:break;case 47:return"MEMBER";case 48:return 76;case 49:return 66;case 50:return 67;case 51:return 69;case 52:return 50;case 53:return 52;case 54:return 45;case 55:return 46;case 56:return 72;case 57:this.popState();break;case 58:return"GENERICTYPE";case 59:this.begin("generic");break;case 60:this.popState();break;case 61:return"BQUOTE_STR";case 62:this.begin("bqstring");break;case 63:return 68;case 64:return 68;case 65:return 68;case 66:return 68;case 67:return 60;case 68:return 60;case 69:return 62;case 70:return 62;case 71:return 61;case 72:return 59;case 73:return 63;case 74:return 64;case 75:return 65;case 76:return 21;case 77:return 42;case 78:return 95;case 79:return"DOT";case 80:return"PLUS";case 81:return 81;case 82:return 78;case 83:return 84;case 84:return 84;case 85:return 85;case 86:return"EQUALS";case 87:return"EQUALS";case 88:return 74;case 89:return 12;case 90:return 14;case 91:return"PUNCTUATION";case 92:return 80;case 93:return 97;case 94:return 83;case 95:return 83;case 96:return 9}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,32,33,34,35,36,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},namespace:{rules:[26,28,29,30,31,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},"class-body":{rules:[26,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},class:{rules:[26,38,39,40,41,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr:{rules:[9,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_title:{rules:[7,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_args:{rules:[22,23,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_name:{rules:[19,20,21,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},href:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},struct:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},generic:{rules:[26,48,49,50,51,52,53,54,55,56,57,58,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},bqstring:{rules:[26,48,49,50,51,52,53,54,55,56,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},string:{rules:[24,25,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],inclusive:!0}}};return Wt}();bt.lexer=Vt;function Bt(){this.yy={}}return Bt.prototype=bt,bt.Parser=Bt,new Bt}();No.parser=No;const kd=No,lh=["#","+","~","-",""];class ch{constructor(e,i){this.memberType=i,this.visibility="",this.classifier="";const r=ue(e,Y());this.parseMember(r)}getDisplayDetails(){let e=this.visibility+Bs(this.id);this.memberType==="method"&&(e+=`(${Bs(this.parameters.trim())})`,this.returnType&&(e+=" : "+Bs(this.returnType))),e=e.trim();const i=this.parseClassifier();return{displayText:e,cssStyle:i}}parseMember(e){let i="";if(this.memberType==="method"){const r=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/,s=e.match(r);if(s){const n=s[1]?s[1].trim():"";if(lh.includes(n)&&(this.visibility=n),this.id=s[2].trim(),this.parameters=s[3]?s[3].trim():"",i=s[4]?s[4].trim():"",this.returnType=s[5]?s[5].trim():"",i===""){const a=this.returnType.substring(this.returnType.length-1);a.match(/[$*]/)&&(i=a,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const r=e.length,s=e.substring(0,1),n=e.substring(r-1);lh.includes(s)&&(this.visibility=s),n.match(/[$*]/)&&(i=n),this.id=e.substring(this.visibility===""?0:1,i===""?r:r-1)}this.classifier=i}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}const Ra="classId-";let Ul=[],Jt={},ca=[],hh=0,kr={},Oo=0,Zs=[];const Nr=t=>mt.sanitizeText(t,Y()),Or=function(t){const e=mt.sanitizeText(t,Y());let i="",r=e;if(e.indexOf("~")>0){const s=e.split("~");r=Nr(s[0]),i=Nr(s[1])}return{className:r,type:i}},Y7=function(t,e){const i=mt.sanitizeText(t,Y());e&&(e=Nr(e));const{className:r}=Or(i);Jt[r].label=e},ha=function(t){const e=mt.sanitizeText(t,Y()),{className:i,type:r}=Or(e);if(Object.hasOwn(Jt,i))return;const s=mt.sanitizeText(i,Y());Jt[s]={id:s,type:r,label:s,cssClasses:[],methods:[],members:[],annotations:[],styles:[],domId:Ra+s+"-"+hh},hh++},_d=function(t){const e=mt.sanitizeText(t,Y());if(e in Jt)return Jt[e].domId;throw new Error("Class not found: "+e)},U7=function(){Ul=[],Jt={},ca=[],Zs=[],Zs.push(Cd),kr={},Oo=0,Pe()},H7=function(t){return Jt[t]},G7=function(){return Jt},j7=function(){return Ul},X7=function(){return ca},$7=function(t){B.debug("Adding relation: "+JSON.stringify(t)),ha(t.id1),ha(t.id2),t.id1=Or(t.id1).className,t.id2=Or(t.id2).className,t.relationTitle1=mt.sanitizeText(t.relationTitle1.trim(),Y()),t.relationTitle2=mt.sanitizeText(t.relationTitle2.trim(),Y()),Ul.push(t)},K7=function(t,e){const i=Or(t).className;Jt[i].annotations.push(e)},Td=function(t,e){ha(t);const i=Or(t).className,r=Jt[i];if(typeof e=="string"){const s=e.trim();s.startsWith("<<")&&s.endsWith(">>")?r.annotations.push(Nr(s.substring(2,s.length-2))):s.indexOf(")")>0?r.methods.push(new ch(s,"method")):s&&r.members.push(new ch(s,"attribute"))}},Q7=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(i=>Td(t,i)))},Z7=function(t,e){const i={id:`note${ca.length}`,class:e,text:t};ca.push(i)},J7=function(t){return t.startsWith(":")&&(t=t.substring(1)),Nr(t.trim())},Hl=function(t,e){t.split(",").forEach(function(i){let r=i;i[0].match(/\d/)&&(r=Ra+r),Jt[r]!==void 0&&Jt[r].cssClasses.push(e)})},tT=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Jt[i].tooltip=Nr(e))})},eT=function(t,e){return e?kr[e].classes[t].tooltip:Jt[t].tooltip},iT=function(t,e,i){const r=Y();t.split(",").forEach(function(s){let n=s;s[0].match(/\d/)&&(n=Ra+n),Jt[n]!==void 0&&(Jt[n].link=Rt.formatUrl(e,r),r.securityLevel==="sandbox"?Jt[n].linkTarget="_top":typeof i=="string"?Jt[n].linkTarget=Nr(i):Jt[n].linkTarget="_blank")}),Hl(t,"clickable")},rT=function(t,e,i){t.split(",").forEach(function(r){sT(r,e,i),Jt[r].haveCallback=!0}),Hl(t,"clickable")},sT=function(t,e,i){const r=mt.sanitizeText(t,Y());if(Y().securityLevel!=="loose"||e===void 0)return;const n=r;if(Jt[n]!==void 0){const a=_d(n);let o=[];if(typeof i=="string"){o=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let l=0;l<o.length;l++){let h=o[l].trim();h.charAt(0)==='"'&&h.charAt(h.length-1)==='"'&&(h=h.substr(1,h.length-2)),o[l]=h}}o.length===0&&o.push(a),Zs.push(function(){const l=document.querySelector(`[id="${a}"]`);l!==null&&l.addEventListener("click",function(){Rt.runFunc(e,...o)},!1)})}},nT=function(t){Zs.forEach(function(e){e(t)})},aT={LINE:0,DOTTED_LINE:1},oT={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},Cd=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};Zs.push(Cd);let Ed="TB";const lT=()=>Ed,cT=t=>{Ed=t},hT=function(t){kr[t]===void 0&&(kr[t]={id:t,classes:{},children:{},domId:Ra+t+"-"+Oo},Oo++)},uT=function(t){return kr[t]},dT=function(){return kr},fT=function(t,e){if(kr[t]!==void 0)for(const i of e){const{className:r}=Or(i);Jt[r].parent=t,kr[t].classes[r]=Jt[r]}},pT=function(t,e){const i=Jt[t];if(!(!e||!i))for(const r of e)r.includes(",")?i.styles.push(...r.split(",")):i.styles.push(r)},ua={setAccTitle:Me,getAccTitle:Ue,getAccDescription:Ge,setAccDescription:He,getConfig:()=>Y().class,addClass:ha,bindFunctions:nT,clear:U7,getClass:H7,getClasses:G7,getNotes:X7,addAnnotation:K7,addNote:Z7,getRelations:j7,addRelation:$7,getDirection:lT,setDirection:cT,addMember:Td,addMembers:Q7,cleanupLabel:J7,lineType:aT,relationType:oT,setClickEvent:rT,setCssClass:Hl,setLink:iT,getTooltip:eT,setTooltip:tT,lookUpDomId:_d,setDiagramTitle:si,getDiagramTitle:je,setClassLabel:Y7,addNamespace:hT,addClassesToNamespace:fT,getNamespace:uT,getNamespaces:dT,setCssStyle:pT},gT=t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,Sd=gT;let uh=0;const yT=function(t,e,i,r,s){const n=function(C){switch(C){case s.db.relationType.AGGREGATION:return"aggregation";case s.db.relationType.EXTENSION:return"extension";case s.db.relationType.COMPOSITION:return"composition";case s.db.relationType.DEPENDENCY:return"dependency";case s.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(C=>!Number.isNaN(C.y));const a=e.points,o=xr().x(function(C){return C.x}).y(function(C){return C.y}).curve(an),l=t.append("path").attr("d",o(a)).attr("id","edge"+uh).attr("class","relation");let h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),i.relation.lineType==1&&l.attr("class","relation dashed-line"),i.relation.lineType==10&&l.attr("class","relation dotted-line"),i.relation.type1!=="none"&&l.attr("marker-start","url("+h+"#"+n(i.relation.type1)+"Start)"),i.relation.type2!=="none"&&l.attr("marker-end","url("+h+"#"+n(i.relation.type2)+"End)");let u,p;const d=e.points.length;let g=Rt.calcLabelPosition(e.points);u=g.x,p=g.y;let y,x,_,v;if(d%2!==0&&d>1){let C=Rt.calcCardinalityPosition(i.relation.type1!=="none",e.points,e.points[0]),R=Rt.calcCardinalityPosition(i.relation.type2!=="none",e.points,e.points[d-1]);B.debug("cardinality_1_point "+JSON.stringify(C)),B.debug("cardinality_2_point "+JSON.stringify(R)),y=C.x,x=C.y,_=R.x,v=R.y}if(i.title!==void 0){const C=t.append("g").attr("class","classLabel"),R=C.append("text").attr("class","label").attr("x",u).attr("y",p).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=R;const A=R.node().getBBox();C.insert("rect",":first-child").attr("class","box").attr("x",A.x-r.padding/2).attr("y",A.y-r.padding/2).attr("width",A.width+r.padding).attr("height",A.height+r.padding)}B.info("Rendering relation "+JSON.stringify(i)),i.relationTitle1!==void 0&&i.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",y).attr("y",x).attr("fill","black").attr("font-size","6").text(i.relationTitle1),i.relationTitle2!==void 0&&i.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",_).attr("y",v).attr("fill","black").attr("font-size","6").text(i.relationTitle2),uh++},mT=function(t,e,i,r){B.debug("Rendering class ",e,i);const s=e.id,n={id:s,label:e.id,width:0,height:0},a=t.append("g").attr("id",r.db.lookUpDomId(s)).attr("class","classGroup");let o;e.link?o=a.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let l=!0;e.annotations.forEach(function(R){const A=o.append("tspan").text(""+R+"");l||A.attr("dy",i.textHeight),l=!1});let h=wd(e);const u=o.append("tspan").text(h).attr("class","title");l||u.attr("dy",i.textHeight);const p=o.node().getBBox().height;let d,g,y;if(e.members.length>0){d=a.append("line").attr("x1",0).attr("y1",i.padding+p+i.dividerMargin/2).attr("y2",i.padding+p+i.dividerMargin/2);const R=a.append("text").attr("x",i.padding).attr("y",p+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(A){dh(R,A,l,i),l=!1}),g=R.node().getBBox()}if(e.methods.length>0){y=a.append("line").attr("x1",0).attr("y1",i.padding+p+i.dividerMargin+g.height).attr("y2",i.padding+p+i.dividerMargin+g.height);const R=a.append("text").attr("x",i.padding).attr("y",p+2*i.dividerMargin+g.height+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(A){dh(R,A,l,i),l=!1})}const x=a.node().getBBox();var _=" ";e.cssClasses.length>0&&(_=_+e.cssClasses.join(" "));const C=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",x.width+2*i.padding).attr("height",x.height+i.padding+.5*i.dividerMargin).attr("class",_).node().getBBox().width;return o.node().childNodes.forEach(function(R){R.setAttribute("x",(C-R.getBBox().width)/2)}),e.tooltip&&o.insert("title").text(e.tooltip),d&&d.attr("x2",C),y&&y.attr("x2",C),n.width=C,n.height=x.height+i.padding+.5*i.dividerMargin,n},wd=function(t){let e=t.id;return t.type&&(e+="<"+Bs(t.type)+">"),e},xT=function(t,e,i,r){B.debug("Rendering note ",e,i);const s=e.id,n={id:s,text:e.text,width:0,height:0},a=t.append("g").attr("id",s).attr("class","classGroup");let o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split(`
`);l.forEach(function(d){B.debug(`Adding line: ${d}`),o.append("tspan").text(d).attr("class","title").attr("dy",i.textHeight)});const h=a.node().getBBox(),p=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",h.width+2*i.padding).attr("height",h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return o.node().childNodes.forEach(function(d){d.setAttribute("x",(p-d.getBBox().width)/2)}),n.width=p,n.height=h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin,n},dh=function(t,e,i,r){const{displayText:s,cssStyle:n}=e.getDisplayDetails(),a=t.append("tspan").attr("x",r.padding).text(s);n!==""&&a.attr("style",e.cssStyle),i||a.attr("dy",r.textHeight)},Qa={getClassTitleString:wd,drawClass:mT,drawEdge:yT,drawNote:xT};let Nn={};const En=20,Es=function(t){const e=Object.entries(Nn).find(i=>i[1].label===t);if(e)return e[0]},bT=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},kT=function(t,e,i,r){const s=Y().class;Nn={},B.info("Rendering diagram "+t);const n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=o.select(`[id='${e}']`);bT(l);const h=new Ni({multigraph:!0});h.setGraph({isMultiGraph:!0}),h.setDefaultEdgeLabel(function(){return{}});const u=r.db.getClasses(),p=Object.keys(u);for(const C of p){const R=u[C],A=Qa.drawClass(l,R,s,r);Nn[A.id]=A,h.setNode(A.id,A),B.info("Org height: "+A.height)}r.db.getRelations().forEach(function(C){B.info("tjoho"+Es(C.id1)+Es(C.id2)+JSON.stringify(C)),h.setEdge(Es(C.id1),Es(C.id2),{relation:C},C.title||"DEFAULT")}),r.db.getNotes().forEach(function(C){B.debug(`Adding note: ${JSON.stringify(C)}`);const R=Qa.drawNote(l,C,s,r);Nn[R.id]=R,h.setNode(R.id,R),C.class&&C.class in u&&h.setEdge(C.id,Es(C.class),{relation:{id1:C.id,id2:C.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),nn(h),h.nodes().forEach(function(C){C!==void 0&&h.node(C)!==void 0&&(B.debug("Node "+C+": "+JSON.stringify(h.node(C))),o.select("#"+(r.db.lookUpDomId(C)||C)).attr("transform","translate("+(h.node(C).x-h.node(C).width/2)+","+(h.node(C).y-h.node(C).height/2)+" )"))}),h.edges().forEach(function(C){C!==void 0&&h.edge(C)!==void 0&&(B.debug("Edge "+C.v+" -> "+C.w+": "+JSON.stringify(h.edge(C))),Qa.drawEdge(l,h.edge(C),h.edge(C).relation,s,r))});const y=l.node().getBBox(),x=y.width+En*2,_=y.height+En*2;Oe(l,_,x,s.useMaxWidth);const v=`${y.x-En} ${y.y-En} ${x} ${_}`;B.debug(`viewBox ${v}`),l.attr("viewBox",v)},_T={draw:kT},TT={parser:kd,db:ua,renderer:_T,styles:Sd,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ua.clear()}},CT=Object.freeze(Object.defineProperty({__proto__:null,diagram:TT},Symbol.toStringTag,{value:"Module"})),Gl=t=>mt.sanitizeText(t,Y());let Po={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const ET=function(t,e,i,r){const s=Object.keys(t);B.info("keys:",s),B.info(t),s.forEach(function(n){var a,o;const l=t[n],u={shape:"rect",id:l.id,domId:l.domId,labelText:Gl(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};e.setNode(l.id,u),vd(l.classes,e,i,r,l.id),B.info("setNode",u)})},vd=function(t,e,i,r,s){const n=Object.keys(t);B.info("keys:",n),B.info(t),n.filter(a=>t[a].parent==s).forEach(function(a){var o,l;const h=t[a],u=h.cssClasses.join(" "),p=ri(h.styles),d=h.label??h.id,g=0,y="class_box",x={labelStyle:p.labelStyle,shape:y,labelText:Gl(d),classData:h,rx:g,ry:g,class:u,style:p.style,id:h.id,domId:h.domId,tooltip:r.db.getTooltip(h.id,s)||"",haveCallback:h.haveCallback,link:h.link,width:h.type==="group"?500:void 0,type:h.type,padding:((o=Y().flowchart)==null?void 0:o.padding)??((l=Y().class)==null?void 0:l.padding)};e.setNode(h.id,x),s&&e.setParent(h.id,s),B.info("setNode",x)})},ST=function(t,e,i,r){B.info(t),t.forEach(function(s,n){var a,o;const l=s,h="",u={labelStyle:"",style:""},p=l.text,d=0,g="note",y={labelStyle:u.labelStyle,shape:g,labelText:Gl(p),noteData:l,rx:d,ry:d,class:h,style:u.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};if(e.setNode(l.id,y),B.info("setNode",y),!l.class||!(l.class in r))return;const x=i+n,_={id:`edgeNote${x}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:fi(Po.curve,ii)};e.setEdge(l.id,l.class,_,x)})},wT=function(t,e){const i=Y().flowchart;let r=0;t.forEach(function(s){var n;r++;const a={classes:"relation",pattern:s.relation.lineType==1?"dashed":"solid",id:`id_${s.id1}_${s.id2}_${r}`,arrowhead:s.type==="arrow_open"?"none":"normal",startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowTypeStart:fh(s.relation.type1),arrowTypeEnd:fh(s.relation.type2),style:"fill:none",labelStyle:"",curve:fi(i?.curve,ii)};if(B.info(a,s),s.style!==void 0){const o=ri(s.style);a.style=o.style,a.labelStyle=o.labelStyle}s.text=s.title,s.text===void 0?s.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",((n=Y().flowchart)==null?void 0:n.htmlLabels)??Y().htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+s.text+"</span>"):(a.labelType="text",a.label=s.text.replace(mt.lineBreakRegex,`
`),s.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(s.id1,s.id2,a,r)})},vT=function(t){Po={...Po,...t}},AT=async function(t,e,i,r){B.info("Drawing class - ",e);const s=Y().flowchart??Y().class,n=Y().securityLevel;B.info("config:",s);const a=s?.nodeSpacing??50,o=s?.rankSpacing??50,l=new Ni({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=r.db.getNamespaces(),u=r.db.getClasses(),p=r.db.getRelations(),d=r.db.getNotes();B.info(p),ET(h,l,e,r),vd(u,l,e,r),wT(p,l),ST(d,l,p.length+1,u);let g;n==="sandbox"&&(g=yt("#i"+e));const y=n==="sandbox"?yt(g.nodes()[0].contentDocument.body):yt("body"),x=y.select(`[id="${e}"]`),_=y.select("#"+e+" g");if(await El(_,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Rt.insertTitle(x,"classTitleText",s?.titleTopMargin??5,r.db.getDiagramTitle()),_r(l,x,s?.diagramPadding,s?.useMaxWidth),!s?.htmlLabels){const v=n==="sandbox"?g.nodes()[0].contentDocument:document,C=v.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const R of C){const A=R.getBBox(),T=v.createElementNS("http://www.w3.org/2000/svg","rect");T.setAttribute("rx",0),T.setAttribute("ry",0),T.setAttribute("width",A.width),T.setAttribute("height",A.height),R.insertBefore(T,R.firstChild)}}};function fh(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const LT={setConf:vT,draw:AT},BT={parser:kd,db:ua,renderer:LT,styles:Sd,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ua.clear()}},IT=Object.freeze(Object.defineProperty({__proto__:null,diagram:BT},Symbol.toStringTag,{value:"Module"}));var Mo=function(){var t=function(D,F,I,M){for(I=I||{},M=D.length;M--;I[D[M]]=F);return I},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,15],l=[1,16],h=[1,17],u=[1,18],p=[1,30],d=[1,19],g=[1,20],y=[1,21],x=[1,22],_=[1,23],v=[1,25],C=[1,26],R=[1,27],A=[1,28],T=[1,29],k=[1,32],w=[1,33],S=[1,34],m=[1,35],E=[1,31],f=[1,4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],L=[1,4,5,13,14,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],b=[4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],P={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,cssClassStatement:11,idStatement:12,DESCR:13,"-->":14,HIDE_EMPTY:15,scale:16,WIDTH:17,COMPOSIT_STATE:18,STRUCT_START:19,STRUCT_STOP:20,STATE_DESCR:21,AS:22,ID:23,FORK:24,JOIN:25,CHOICE:26,CONCURRENT:27,note:28,notePosition:29,NOTE_TEXT:30,direction:31,acc_title:32,acc_title_value:33,acc_descr:34,acc_descr_value:35,acc_descr_multiline_value:36,classDef:37,CLASSDEF_ID:38,CLASSDEF_STYLEOPTS:39,DEFAULT:40,class:41,CLASSENTITY_IDS:42,STYLECLASS:43,direction_tb:44,direction_bt:45,direction_rl:46,direction_lr:47,eol:48,";":49,EDGE_STATE:50,STYLE_SEPARATOR:51,left_of:52,right_of:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",13:"DESCR",14:"-->",15:"HIDE_EMPTY",16:"scale",17:"WIDTH",18:"COMPOSIT_STATE",19:"STRUCT_START",20:"STRUCT_STOP",21:"STATE_DESCR",22:"AS",23:"ID",24:"FORK",25:"JOIN",26:"CHOICE",27:"CONCURRENT",28:"note",30:"NOTE_TEXT",32:"acc_title",33:"acc_title_value",34:"acc_descr",35:"acc_descr_value",36:"acc_descr_multiline_value",37:"classDef",38:"CLASSDEF_ID",39:"CLASSDEF_STYLEOPTS",40:"DEFAULT",41:"class",42:"CLASSENTITY_IDS",43:"STYLECLASS",44:"direction_tb",45:"direction_bt",46:"direction_rl",47:"direction_lr",49:";",50:"EDGE_STATE",51:"STYLE_SEPARATOR",52:"left_of",53:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[31,1],[31,1],[31,1],[31,1],[48,1],[48,1],[12,1],[12,1],[12,3],[12,3],[29,1],[29,1]],performAction:function(F,I,M,z,st,j,dt){var K=j.length-1;switch(st){case 3:return z.setRootDoc(j[K]),j[K];case 4:this.$=[];break;case 5:j[K]!="nl"&&(j[K-1].push(j[K]),this.$=j[K-1]);break;case 6:case 7:this.$=j[K];break;case 8:this.$="nl";break;case 11:this.$=j[K];break;case 12:const Q=j[K-1];Q.description=z.trimColon(j[K]),this.$=Q;break;case 13:this.$={stmt:"relation",state1:j[K-2],state2:j[K]};break;case 14:const J=z.trimColon(j[K]);this.$={stmt:"relation",state1:j[K-3],state2:j[K-1],description:J};break;case 18:this.$={stmt:"state",id:j[K-3],type:"default",description:"",doc:j[K-1]};break;case 19:var G=j[K],tt=j[K-2].trim();if(j[K].match(":")){var nt=j[K].split(":");G=nt[0],tt=[tt,nt[1]]}this.$={stmt:"state",id:G,type:"default",description:tt};break;case 20:this.$={stmt:"state",id:j[K-3],type:"default",description:j[K-5],doc:j[K-1]};break;case 21:this.$={stmt:"state",id:j[K],type:"fork"};break;case 22:this.$={stmt:"state",id:j[K],type:"join"};break;case 23:this.$={stmt:"state",id:j[K],type:"choice"};break;case 24:this.$={stmt:"state",id:z.getDividerId(),type:"divider"};break;case 25:this.$={stmt:"state",id:j[K-1].trim(),note:{position:j[K-2].trim(),text:j[K].trim()}};break;case 28:this.$=j[K].trim(),z.setAccTitle(this.$);break;case 29:case 30:this.$=j[K].trim(),z.setAccDescription(this.$);break;case 31:case 32:this.$={stmt:"classDef",id:j[K-1].trim(),classes:j[K].trim()};break;case 33:this.$={stmt:"applyClass",id:j[K-1].trim(),styleClass:j[K].trim()};break;case 34:z.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 35:z.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 36:z.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 37:z.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 40:case 41:this.$={stmt:"state",id:j[K].trim(),type:"default",description:""};break;case 42:this.$={stmt:"state",id:j[K-2].trim(),classes:[j[K].trim()],type:"default",description:""};break;case 43:this.$={stmt:"state",id:j[K-2].trim(),classes:[j[K].trim()],type:"default",description:""};break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,15,16,18,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:C,36:R,37:A,41:T,44:k,45:w,46:S,47:m,50:E},t(f,[2,5]),{9:36,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:C,36:R,37:A,41:T,44:k,45:w,46:S,47:m,50:E},t(f,[2,7]),t(f,[2,8]),t(f,[2,9]),t(f,[2,10]),t(f,[2,11],{13:[1,37],14:[1,38]}),t(f,[2,15]),{17:[1,39]},t(f,[2,17],{19:[1,40]}),{22:[1,41]},t(f,[2,21]),t(f,[2,22]),t(f,[2,23]),t(f,[2,24]),{29:42,30:[1,43],52:[1,44],53:[1,45]},t(f,[2,27]),{33:[1,46]},{35:[1,47]},t(f,[2,30]),{38:[1,48],40:[1,49]},{42:[1,50]},t(L,[2,40],{51:[1,51]}),t(L,[2,41],{51:[1,52]}),t(f,[2,34]),t(f,[2,35]),t(f,[2,36]),t(f,[2,37]),t(f,[2,6]),t(f,[2,12]),{12:53,23:p,50:E},t(f,[2,16]),t(b,s,{7:54}),{23:[1,55]},{23:[1,56]},{22:[1,57]},{23:[2,44]},{23:[2,45]},t(f,[2,28]),t(f,[2,29]),{39:[1,58]},{39:[1,59]},{43:[1,60]},{23:[1,61]},{23:[1,62]},t(f,[2,13],{13:[1,63]}),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,64],21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:C,36:R,37:A,41:T,44:k,45:w,46:S,47:m,50:E},t(f,[2,19],{19:[1,65]}),{30:[1,66]},{23:[1,67]},t(f,[2,31]),t(f,[2,32]),t(f,[2,33]),t(L,[2,42]),t(L,[2,43]),t(f,[2,14]),t(f,[2,18]),t(b,s,{7:68}),t(f,[2,25]),t(f,[2,26]),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,69],21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:C,36:R,37:A,41:T,44:k,45:w,46:S,47:m,50:E},t(f,[2,20])],defaultActions:{5:[2,1],6:[2,2],44:[2,44],45:[2,45]},parseError:function(F,I){if(I.recoverable)this.trace(F);else{var M=new Error(F);throw M.hash=I,M}},parse:function(F){var I=this,M=[0],z=[],st=[null],j=[],dt=this.table,K="",G=0,tt=0,nt=2,Q=1,J=j.slice.call(arguments,1),O=Object.create(this.lexer),at={yy:{}};for(var W in this.yy)Object.prototype.hasOwnProperty.call(this.yy,W)&&(at.yy[W]=this.yy[W]);O.setInput(F,at.yy),at.yy.lexer=O,at.yy.parser=this,typeof O.yylloc>"u"&&(O.yylloc={});var ft=O.yylloc;j.push(ft);var V=O.options&&O.options.ranges;typeof at.yy.parseError=="function"?this.parseError=at.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function vt(){var ht;return ht=z.pop()||O.lex()||Q,typeof ht!="number"&&(ht instanceof Array&&(z=ht,ht=z.pop()),ht=I.symbols_[ht]||ht),ht}for(var X,St,bt,Vt,Bt={},Wt,pt,ut,ot;;){if(St=M[M.length-1],this.defaultActions[St]?bt=this.defaultActions[St]:((X===null||typeof X>"u")&&(X=vt()),bt=dt[St]&&dt[St][X]),typeof bt>"u"||!bt.length||!bt[0]){var lt="";ot=[];for(Wt in dt[St])this.terminals_[Wt]&&Wt>nt&&ot.push("'"+this.terminals_[Wt]+"'");O.showPosition?lt="Parse error on line "+(G+1)+`:
`+O.showPosition()+`
Expecting `+ot.join(", ")+", got '"+(this.terminals_[X]||X)+"'":lt="Parse error on line "+(G+1)+": Unexpected "+(X==Q?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(lt,{text:O.match,token:this.terminals_[X]||X,line:O.yylineno,loc:ft,expected:ot})}if(bt[0]instanceof Array&&bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+St+", token: "+X);switch(bt[0]){case 1:M.push(X),st.push(O.yytext),j.push(O.yylloc),M.push(bt[1]),X=null,tt=O.yyleng,K=O.yytext,G=O.yylineno,ft=O.yylloc;break;case 2:if(pt=this.productions_[bt[1]][1],Bt.$=st[st.length-pt],Bt._$={first_line:j[j.length-(pt||1)].first_line,last_line:j[j.length-1].last_line,first_column:j[j.length-(pt||1)].first_column,last_column:j[j.length-1].last_column},V&&(Bt._$.range=[j[j.length-(pt||1)].range[0],j[j.length-1].range[1]]),Vt=this.performAction.apply(Bt,[K,tt,G,at.yy,bt[1],st,j].concat(J)),typeof Vt<"u")return Vt;pt&&(M=M.slice(0,-1*pt*2),st=st.slice(0,-1*pt),j=j.slice(0,-1*pt)),M.push(this.productions_[bt[1]][0]),st.push(Bt.$),j.push(Bt._$),ut=dt[M[M.length-2]][M[M.length-1]],M.push(ut);break;case 3:return!0}}return!0}},U=function(){var D={EOF:1,parseError:function(I,M){if(this.yy.parser)this.yy.parser.parseError(I,M);else throw new Error(I)},setInput:function(F,I){return this.yy=I||this.yy||{},this._input=F,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var F=this._input[0];this.yytext+=F,this.yyleng++,this.offset++,this.match+=F,this.matched+=F;var I=F.match(/(?:\r\n?|\n).*/g);return I?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),F},unput:function(F){var I=F.length,M=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-I),this.offset-=I;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var st=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===z.length?this.yylloc.first_column:0)+z[z.length-M.length].length-M[0].length:this.yylloc.first_column-I},this.options.ranges&&(this.yylloc.range=[st[0],st[0]+this.yyleng-I]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(F){this.unput(this.match.slice(F))},pastInput:function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var F=this.match;return F.length<20&&(F+=this._input.substr(0,20-F.length)),(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var F=this.pastInput(),I=new Array(F.length+1).join("-");return F+this.upcomingInput()+`
`+I+"^"},test_match:function(F,I){var M,z,st;if(this.options.backtrack_lexer&&(st={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(st.yylloc.range=this.yylloc.range.slice(0))),z=F[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+F[0].length},this.yytext+=F[0],this.match+=F[0],this.matches=F,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(F[0].length),this.matched+=F[0],M=this.performAction.call(this,this.yy,this,I,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var j in st)this[j]=st[j];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var F,I,M,z;this._more||(this.yytext="",this.match="");for(var st=this._currentRules(),j=0;j<st.length;j++)if(M=this._input.match(this.rules[st[j]]),M&&(!I||M[0].length>I[0].length)){if(I=M,z=j,this.options.backtrack_lexer){if(F=this.test_match(M,st[j]),F!==!1)return F;if(this._backtrack){I=!1;continue}else return!1}else if(!this.options.flex)break}return I?(F=this.test_match(I,st[z]),F!==!1?F:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var I=this.next();return I||this.lex()},begin:function(I){this.conditionStack.push(I)},popState:function(){var I=this.conditionStack.length-1;return I>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(I){return I=this.conditionStack.length-1-Math.abs(I||0),I>=0?this.conditionStack[I]:"INITIAL"},pushState:function(I){this.begin(I)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(I,M,z,st){switch(z){case 0:return 40;case 1:return 44;case 2:return 45;case 3:return 46;case 4:return 47;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),16;case 13:return 17;case 14:this.popState();break;case 15:return this.begin("acc_title"),32;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),34;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),37;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),38;case 25:return this.popState(),39;case 26:return this.pushState("CLASS"),41;case 27:return this.popState(),this.pushState("CLASS_STYLE"),42;case 28:return this.popState(),43;case 29:return this.pushState("SCALE"),16;case 30:return 17;case 31:this.popState();break;case 32:this.pushState("STATE");break;case 33:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),24;case 34:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),25;case 35:return this.popState(),M.yytext=M.yytext.slice(0,-10).trim(),26;case 36:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),24;case 37:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),25;case 38:return this.popState(),M.yytext=M.yytext.slice(0,-10).trim(),26;case 39:return 44;case 40:return 45;case 41:return 46;case 42:return 47;case 43:this.pushState("STATE_STRING");break;case 44:return this.pushState("STATE_ID"),"AS";case 45:return this.popState(),"ID";case 46:this.popState();break;case 47:return"STATE_DESCR";case 48:return 18;case 49:this.popState();break;case 50:return this.popState(),this.pushState("struct"),19;case 51:break;case 52:return this.popState(),20;case 53:break;case 54:return this.begin("NOTE"),28;case 55:return this.popState(),this.pushState("NOTE_ID"),52;case 56:return this.popState(),this.pushState("NOTE_ID"),53;case 57:this.popState(),this.pushState("FLOATING_NOTE");break;case 58:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 59:break;case 60:return"NOTE_TEXT";case 61:return this.popState(),"ID";case 62:return this.popState(),this.pushState("NOTE_TEXT"),23;case 63:return this.popState(),M.yytext=M.yytext.substr(2).trim(),30;case 64:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),30;case 65:return 6;case 66:return 6;case 67:return 15;case 68:return 50;case 69:return 23;case 70:return M.yytext=M.yytext.trim(),13;case 71:return 14;case 72:return 27;case 73:return 51;case 74:return 5;case 75:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,32,39,40,41,42,51,52,53,54,68,69,70,71,72],inclusive:!1},FLOATING_NOTE_ID:{rules:[61],inclusive:!1},FLOATING_NOTE:{rules:[58,59,60],inclusive:!1},NOTE_TEXT:{rules:[63,64],inclusive:!1},NOTE_ID:{rules:[62],inclusive:!1},NOTE:{rules:[55,56,57],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,30,31],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[45],inclusive:!1},STATE_STRING:{rules:[46,47],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,33,34,35,36,37,38,43,44,48,49,50],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,50,54,65,66,67,68,69,70,71,73,74,75],inclusive:!0}}};return D}();P.lexer=U;function N(){this.yy={}}return N.prototype=P,P.Parser=N,new N}();Mo.parser=Mo;const Ad=Mo,DT="LR",FT="TB",da="state",jl="relation",RT="classDef",NT="applyClass",yn="default",Ld="divider",Xl="[*]",Bd="start",Id=Xl,Dd="end",ph="color",gh="fill",OT="bgFill",PT=",";function Fd(){return{}}let Rd=DT,fa=[],Os=Fd();const Nd=()=>({relations:[],states:{},documents:{}});let pa={root:Nd()},De=pa.root,Js=0,yh=0;const MT={LINE:0,DOTTED_LINE:1},VT={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Sn=t=>JSON.parse(JSON.stringify(t)),zT=t=>{B.info("Setting root doc",t),fa=t},qT=()=>fa,On=(t,e,i)=>{if(e.stmt===jl)On(t,e.state1,!0),On(t,e.state2,!1);else if(e.stmt===da&&(e.id==="[*]"?(e.id=i?t.id+"_start":t.id+"_end",e.start=i):e.id=e.id.trim()),e.doc){const r=[];let s=[],n;for(n=0;n<e.doc.length;n++)if(e.doc[n].type===Ld){const a=Sn(e.doc[n]);a.doc=Sn(s),r.push(a),s=[]}else s.push(e.doc[n]);if(r.length>0&&s.length>0){const a={stmt:da,id:l1(),type:"divider",doc:Sn(s)};r.push(Sn(a)),e.doc=r}e.doc.forEach(a=>On(e,a,!0))}},WT=()=>(On({id:"root"},{id:"root",doc:fa},!0),{id:"root",doc:fa}),YT=t=>{let e;t.doc?e=t.doc:e=t,B.info(e),Od(!0),B.info("Extract",e),e.forEach(i=>{switch(i.stmt){case da:Pr(i.id.trim(),i.type,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles);break;case jl:Pd(i.state1,i.state2,i.description);break;case RT:Md(i.id.trim(),i.classes);break;case NT:$l(i.id.trim(),i.styleClass);break}})},Pr=function(t,e=yn,i=null,r=null,s=null,n=null,a=null,o=null){const l=t?.trim();De.states[l]===void 0?(B.info("Adding state ",l,r),De.states[l]={id:l,descriptions:[],type:e,doc:i,note:s,classes:[],styles:[],textStyles:[]}):(De.states[l].doc||(De.states[l].doc=i),De.states[l].type||(De.states[l].type=e)),r&&(B.info("Setting state description",l,r),typeof r=="string"&&qo(l,r.trim()),typeof r=="object"&&r.forEach(h=>qo(l,h.trim()))),s&&(De.states[l].note=s,De.states[l].note.text=mt.sanitizeText(De.states[l].note.text,Y())),n&&(B.info("Setting state classes",l,n),(typeof n=="string"?[n]:n).forEach(u=>$l(l,u.trim()))),a&&(B.info("Setting state styles",l,a),(typeof a=="string"?[a]:a).forEach(u=>JT(l,u.trim()))),o&&(B.info("Setting state styles",l,a),(typeof o=="string"?[o]:o).forEach(u=>t8(l,u.trim())))},Od=function(t){pa={root:Nd()},De=pa.root,Js=0,Os=Fd(),t||Pe()},tn=function(t){return De.states[t]},UT=function(){return De.states},HT=function(){B.info("Documents = ",pa)},GT=function(){return De.relations};function Vo(t=""){let e=t;return t===Xl&&(Js++,e=`${Bd}${Js}`),e}function zo(t="",e=yn){return t===Xl?Bd:e}function jT(t=""){let e=t;return t===Id&&(Js++,e=`${Dd}${Js}`),e}function XT(t="",e=yn){return t===Id?Dd:e}function $T(t,e,i){let r=Vo(t.id.trim()),s=zo(t.id.trim(),t.type),n=Vo(e.id.trim()),a=zo(e.id.trim(),e.type);Pr(r,s,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),Pr(n,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),De.relations.push({id1:r,id2:n,relationTitle:mt.sanitizeText(i,Y())})}const Pd=function(t,e,i){if(typeof t=="object")$T(t,e,i);else{const r=Vo(t.trim()),s=zo(t),n=jT(e.trim()),a=XT(e);Pr(r,s),Pr(n,a),De.relations.push({id1:r,id2:n,title:mt.sanitizeText(i,Y())})}},qo=function(t,e){const i=De.states[t],r=e.startsWith(":")?e.replace(":","").trim():e;i.descriptions.push(mt.sanitizeText(r,Y()))},KT=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},QT=()=>(yh++,"divider-id-"+yh),Md=function(t,e=""){Os[t]===void 0&&(Os[t]={id:t,styles:[],textStyles:[]});const i=Os[t];e?.split(PT).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(ph)){const a=s.replace(gh,OT).replace(ph,gh);i.textStyles.push(a)}i.styles.push(s)})},ZT=function(){return Os},$l=function(t,e){t.split(",").forEach(function(i){let r=tn(i);if(r===void 0){const s=i.trim();Pr(s),r=tn(s)}r.classes.push(e)})},JT=function(t,e){const i=tn(t);i!==void 0&&i.textStyles.push(e)},t8=function(t,e){const i=tn(t);i!==void 0&&i.textStyles.push(e)},e8=()=>Rd,i8=t=>{Rd=t},r8=t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),Qi={getConfig:()=>Y().state,addState:Pr,clear:Od,getState:tn,getStates:UT,getRelations:GT,getClasses:ZT,getDirection:e8,addRelation:Pd,getDividerId:QT,setDirection:i8,cleanupLabel:KT,lineType:MT,relationType:VT,logDocuments:HT,getRootDoc:qT,setRootDoc:zT,getRootDocV2:WT,extract:YT,trimColon:r8,getAccTitle:Ue,setAccTitle:Me,getAccDescription:Ge,setAccDescription:He,addStyleClass:Md,setCssClass:$l,addDescription:qo,setDiagramTitle:si,getDiagramTitle:je},s8=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,Vd=s8,n8=t=>t.append("circle").attr("class","start-state").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit).attr("cy",Y().state.padding+Y().state.sizeUnit),a8=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",Y().state.textHeight).attr("class","divider").attr("x2",Y().state.textHeight*2).attr("y1",0).attr("y2",0),o8=(t,e)=>{const i=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+2*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),r=i.node().getBBox();return t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",r.width+2*Y().state.padding).attr("height",r.height+2*Y().state.padding).attr("rx",Y().state.radius),i},l8=(t,e)=>{const i=function(d,g,y){const x=d.append("tspan").attr("x",2*Y().state.padding).text(g);y||x.attr("dy",Y().state.textHeight)},s=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+1.3*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),n=s.height,a=t.append("text").attr("x",Y().state.padding).attr("y",n+Y().state.padding*.4+Y().state.dividerMargin+Y().state.textHeight).attr("class","state-description");let o=!0,l=!0;e.descriptions.forEach(function(d){o||(i(a,d,l),l=!1),o=!1});const h=t.append("line").attr("x1",Y().state.padding).attr("y1",Y().state.padding+n+Y().state.dividerMargin/2).attr("y2",Y().state.padding+n+Y().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),p=Math.max(u.width,s.width);return h.attr("x2",p+3*Y().state.padding),t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",p+2*Y().state.padding).attr("height",u.height+n+2*Y().state.padding).attr("rx",Y().state.radius),t},c8=(t,e,i)=>{const r=Y().state.padding,s=2*Y().state.padding,n=t.node().getBBox(),a=n.width,o=n.x,l=t.append("text").attr("x",0).attr("y",Y().state.titleShift).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+s;let p=Math.max(u,a);p===a&&(p=p+s);let d;const g=t.node().getBBox();e.doc,d=o-r,u>a&&(d=(a-p)/2+r),Math.abs(o-g.x)<r&&u>a&&(d=o-(u-a)/2);const y=1-Y().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",y).attr("class",i?"alt-composit":"composit").attr("width",p).attr("height",g.height+Y().state.textHeight+Y().state.titleShift+1).attr("rx","0"),l.attr("x",d+r),u<=a&&l.attr("x",o+(p-s)/2-u/2+r),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",p).attr("height",Y().state.textHeight*3).attr("rx",Y().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",p).attr("height",g.height+3+2*Y().state.textHeight).attr("rx",Y().state.radius),t},h8=t=>(t.append("circle").attr("class","end-state-outer").attr("r",Y().state.sizeUnit+Y().state.miniPadding).attr("cx",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding).attr("cy",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit+2).attr("cy",Y().state.padding+Y().state.sizeUnit+2)),u8=(t,e)=>{let i=Y().state.forkWidth,r=Y().state.forkHeight;if(e.parentId){let s=i;i=r,r=s}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",r).attr("x",Y().state.padding).attr("y",Y().state.padding)},d8=(t,e,i,r)=>{let s=0;const n=r.append("text");n.style("text-anchor","start"),n.attr("class","noteText");let a=t.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");const o=a.split(mt.lineBreakRegex);let l=1.25*Y().state.noteMargin;for(const h of o){const u=h.trim();if(u.length>0){const p=n.append("tspan");if(p.text(u),l===0){const d=p.node().getBBox();l+=d.height}s+=l,p.attr("x",e+Y().state.noteMargin),p.attr("y",i+s+1.25*Y().state.noteMargin)}}return{textWidth:n.node().getBBox().width,textHeight:s}},f8=(t,e)=>{e.attr("class","state-note");const i=e.append("rect").attr("x",0).attr("y",Y().state.padding),r=e.append("g"),{textWidth:s,textHeight:n}=d8(t,0,0,r);return i.attr("height",n+2*Y().state.noteMargin),i.attr("width",s+Y().state.noteMargin*2),i},mh=function(t,e){const i=e.id,r={id:i,label:e.id,width:0,height:0},s=t.append("g").attr("id",i).attr("class","stateGroup");e.type==="start"&&n8(s),e.type==="end"&&h8(s),(e.type==="fork"||e.type==="join")&&u8(s,e),e.type==="note"&&f8(e.note.text,s),e.type==="divider"&&a8(s),e.type==="default"&&e.descriptions.length===0&&o8(s,e),e.type==="default"&&e.descriptions.length>0&&l8(s,e);const n=s.node().getBBox();return r.width=n.width+2*Y().state.padding,r.height=n.height+2*Y().state.padding,r};let xh=0;const p8=function(t,e,i){const r=function(l){switch(l){case Qi.relationType.AGGREGATION:return"aggregation";case Qi.relationType.EXTENSION:return"extension";case Qi.relationType.COMPOSITION:return"composition";case Qi.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const s=e.points,n=xr().x(function(l){return l.x}).y(function(l){return l.y}).curve(an),a=t.append("path").attr("d",n(s)).attr("id","edge"+xh).attr("class","transition");let o="";if(Y().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),a.attr("marker-end","url("+o+"#"+r(Qi.relationType.DEPENDENCY)+"End)"),i.title!==void 0){const l=t.append("g").attr("class","stateLabel"),{x:h,y:u}=Rt.calcLabelPosition(e.points),p=mt.getRows(i.title);let d=0;const g=[];let y=0,x=0;for(let C=0;C<=p.length;C++){const R=l.append("text").attr("text-anchor","middle").text(p[C]).attr("x",h).attr("y",u+d),A=R.node().getBBox();y=Math.max(y,A.width),x=Math.min(x,A.x),B.info(A.x,h,u+d),d===0&&(d=R.node().getBBox().height,B.info("Title height",d,u)),g.push(R)}let _=d*p.length;if(p.length>1){const C=(p.length-1)*d*.5;g.forEach((R,A)=>R.attr("y",u+A*d-C)),_=d*p.length}const v=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",h-y/2-Y().state.padding/2).attr("y",u-_/2-Y().state.padding/2-3.5).attr("width",y+Y().state.padding).attr("height",_+Y().state.padding),B.info(v)}xh++};let ei;const Za={},g8=function(){},y8=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},m8=function(t,e,i,r){ei=Y().state;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body"),o=s==="sandbox"?n.nodes()[0].contentDocument:document;B.debug("Rendering diagram "+t);const l=a.select(`[id='${e}']`);y8(l);const h=r.db.getRootDoc();zd(h,l,void 0,!1,a,o,r);const u=ei.padding,p=l.node().getBBox(),d=p.width+u*2,g=p.height+u*2,y=d*1.75;Oe(l,g,y,ei.useMaxWidth),l.attr("viewBox",`${p.x-ei.padding}  ${p.y-ei.padding} `+d+" "+g)},x8=t=>t?t.length*ei.fontSizeFactor:1,zd=(t,e,i,r,s,n,a)=>{const o=new Ni({compound:!0,multigraph:!0});let l,h=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){h=!1;break}i?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:h?1:ei.edgeLengthFactor,nodeSep:h?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:h?1:ei.edgeLengthFactor,nodeSep:h?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),a.db.extract(t);const u=a.db.getStates(),p=a.db.getRelations(),d=Object.keys(u);for(const v of d){const C=u[v];i&&(C.parentId=i);let R;if(C.doc){let A=e.append("g").attr("id",C.id).attr("class","stateGroup");R=zd(C.doc,A,C.id,!r,s,n,a);{A=c8(A,C,r);let T=A.node().getBBox();R.width=T.width,R.height=T.height+ei.padding/2,Za[C.id]={y:ei.compositTitleSize}}}else R=mh(e,C);if(C.note){const A={descriptions:[],id:C.id+"-note",note:C.note,type:"note"},T=mh(e,A);C.note.position==="left of"?(o.setNode(R.id+"-note",T),o.setNode(R.id,R)):(o.setNode(R.id,R),o.setNode(R.id+"-note",T)),o.setParent(R.id,R.id+"-group"),o.setParent(R.id+"-note",R.id+"-group")}else o.setNode(R.id,R)}B.debug("Count=",o.nodeCount(),o);let g=0;p.forEach(function(v){g++,B.debug("Setting edge",v),o.setEdge(v.id1,v.id2,{relation:v,width:x8(v.title),height:ei.labelHeight*mt.getRows(v.title).length,labelpos:"c"},"id"+g)}),nn(o),B.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(v){v!==void 0&&o.node(v)!==void 0?(B.warn("Node "+v+": "+JSON.stringify(o.node(v))),s.select("#"+y.id+" #"+v).attr("transform","translate("+(o.node(v).x-o.node(v).width/2)+","+(o.node(v).y+(Za[v]?Za[v].y:0)-o.node(v).height/2)+" )"),s.select("#"+y.id+" #"+v).attr("data-x-shift",o.node(v).x-o.node(v).width/2),n.querySelectorAll("#"+y.id+" #"+v+" .divider").forEach(R=>{const A=R.parentElement;let T=0,k=0;A&&(A.parentElement&&(T=A.parentElement.getBBox().width),k=parseInt(A.getAttribute("data-x-shift"),10),Number.isNaN(k)&&(k=0)),R.setAttribute("x1",0-k+8),R.setAttribute("x2",T-k-8)})):B.debug("No Node "+v+": "+JSON.stringify(o.node(v)))});let x=y.getBBox();o.edges().forEach(function(v){v!==void 0&&o.edge(v)!==void 0&&(B.debug("Edge "+v.v+" -> "+v.w+": "+JSON.stringify(o.edge(v))),p8(e,o.edge(v),o.edge(v).relation))}),x=y.getBBox();const _={id:i||"root",label:i||"root",width:0,height:0};return _.width=x.width+2*ei.padding,_.height=x.height+2*ei.padding,B.debug("Doc rendered",_,o),_},b8={setConf:g8,draw:m8},k8={parser:Ad,db:Qi,renderer:b8,styles:Vd,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qi.clear()}},_8=Object.freeze(Object.defineProperty({__proto__:null,diagram:k8},Symbol.toStringTag,{value:"Module"})),Pn="rect",Ja="rectWithTitle",T8="start",C8="end",E8="divider",S8="roundedWithTitle",w8="note",v8="noteGroup",ys="statediagram",A8="state",L8=`${ys}-${A8}`,qd="transition",B8="note",I8="note-edge",D8=`${qd} ${I8}`,F8=`${ys}-${B8}`,R8="cluster",N8=`${ys}-${R8}`,O8="cluster-alt",P8=`${ys}-${O8}`,Wd="parent",Yd="note",M8="state",Kl="----",V8=`${Kl}${Yd}`,bh=`${Kl}${Wd}`,Ud="fill:none",Hd="fill: #333",Gd="c",jd="text",Xd="normal";let Mn={},fr=0;const z8=function(t){const e=Object.keys(t);for(const i of e)t[i]},q8=function(t,e){return e.db.extract(e.db.getRootDocV2()),e.db.getClasses()};function W8(t){return t==null?"":t.classes?t.classes.join(" "):""}function to(t="",e=0,i="",r=Kl){const s=i!==null&&i.length>0?`${r}${i}`:"";return`${M8}-${t}${s}-${e}`}const As=(t,e,i,r,s,n)=>{const a=i.id,o=W8(r[a]);if(a!=="root"){let l=Pn;i.start===!0&&(l=T8),i.start===!1&&(l=C8),i.type!==yn&&(l=i.type),Mn[a]||(Mn[a]={id:a,shape:l,description:mt.sanitizeText(a,Y()),classes:`${o} ${L8}`});const h=Mn[a];i.description&&(Array.isArray(h.description)?(h.shape=Ja,h.description.push(i.description)):h.description.length>0?(h.shape=Ja,h.description===a?h.description=[i.description]:h.description=[h.description,i.description]):(h.shape=Pn,h.description=i.description),h.description=mt.sanitizeTextOrArray(h.description,Y())),h.description.length===1&&h.shape===Ja&&(h.shape=Pn),!h.type&&i.doc&&(B.info("Setting cluster for ",a,Wo(i)),h.type="group",h.dir=Wo(i),h.shape=i.type===Ld?E8:S8,h.classes=h.classes+" "+N8+" "+(n?P8:""));const u={labelStyle:"",shape:h.shape,labelText:h.description,classes:h.classes,style:"",id:a,dir:h.dir,domId:to(a,fr),type:h.type,padding:15};if(u.centerLabel=!0,i.note){const p={labelStyle:"",shape:w8,labelText:i.note.text,classes:F8,style:"",id:a+V8+"-"+fr,domId:to(a,fr,Yd),type:h.type,padding:15},d={labelStyle:"",shape:v8,labelText:i.note.text,classes:h.classes,style:"",id:a+bh,domId:to(a,fr,Wd),type:"group",padding:0};fr++;const g=a+bh;t.setNode(g,d),t.setNode(p.id,p),t.setNode(a,u),t.setParent(a,g),t.setParent(p.id,g);let y=a,x=p.id;i.note.position==="left of"&&(y=p.id,x=a),t.setEdge(y,x,{arrowhead:"none",arrowType:"",style:Ud,labelStyle:"",classes:D8,arrowheadStyle:Hd,labelpos:Gd,labelType:jd,thickness:Xd})}else t.setNode(a,u)}e&&e.id!=="root"&&(B.trace("Setting node ",a," to be child of its parent ",e.id),t.setParent(a,e.id)),i.doc&&(B.trace("Adding nodes children "),Y8(t,i,i.doc,r,s,!n))},Y8=(t,e,i,r,s,n)=>{B.trace("items",i),i.forEach(a=>{switch(a.stmt){case da:As(t,e,a,r,s,n);break;case yn:As(t,e,a,r,s,n);break;case jl:{As(t,e,a.state1,r,s,n),As(t,e,a.state2,r,s,n);const o={id:"edge"+fr,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Ud,labelStyle:"",label:mt.sanitizeText(a.description,Y()),arrowheadStyle:Hd,labelpos:Gd,labelType:jd,thickness:Xd,classes:qd};t.setEdge(a.state1.id,a.state2.id,o,fr),fr++}break}})},Wo=(t,e=FT)=>{let i=e;if(t.doc)for(let r=0;r<t.doc.length;r++){const s=t.doc[r];s.stmt==="dir"&&(i=s.value)}return i},U8=async function(t,e,i,r){B.info("Drawing state diagram (v2)",e),Mn={},r.db.getDirection();const{securityLevel:s,state:n}=Y(),a=n.nodeSpacing||50,o=n.rankSpacing||50;B.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),B.info(r.db.getRootDocV2());const l=r.db.getStates(),h=new Ni({multigraph:!0,compound:!0}).setGraph({rankdir:Wo(r.db.getRootDocV2()),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});As(h,void 0,r.db.getRootDocV2(),l,r.db,!0);let u;s==="sandbox"&&(u=yt("#i"+e));const p=s==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=p.select(`[id="${e}"]`),g=p.select("#"+e+" g");await El(g,h,["barb"],ys,e);const y=8;Rt.insertTitle(d,"statediagramTitleText",n.titleTopMargin,r.db.getDiagramTitle());const x=d.node().getBBox(),_=x.width+y*2,v=x.height+y*2;d.attr("class",ys);const C=d.node().getBBox();Oe(d,v,_,n.useMaxWidth);const R=`${C.x-y} ${C.y-y} ${_} ${v}`;B.debug(`viewBox ${R}`),d.attr("viewBox",R);const A=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const T of A){const k=T.getBBox(),w=document.createElementNS("http://www.w3.org/2000/svg",Pn);w.setAttribute("rx",0),w.setAttribute("ry",0),w.setAttribute("width",k.width),w.setAttribute("height",k.height),T.insertBefore(w,T.firstChild)}},H8={setConf:z8,getClasses:q8,draw:U8},G8={parser:Ad,db:Qi,renderer:H8,styles:Vd,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qi.clear()}},j8=Object.freeze(Object.defineProperty({__proto__:null,diagram:G8},Symbol.toStringTag,{value:"Module"}));var Yo=function(){var t=function(p,d,g,y){for(g=g||{},y=p.length;y--;g[p[y]]=d);return g},e=[6,8,10,11,12,14,16,17,18],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,14],l={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:function(d,g,y,x,_,v,C){var R=v.length-1;switch(_){case 1:return v[R-1];case 2:this.$=[];break;case 3:v[R-1].push(v[R]),this.$=v[R-1];break;case 4:case 5:this.$=v[R];break;case 6:case 7:this.$=[];break;case 8:x.setDiagramTitle(v[R].substr(6)),this.$=v[R].substr(6);break;case 9:this.$=v[R].trim(),x.setAccTitle(this.$);break;case 10:case 11:this.$=v[R].trim(),x.setAccDescription(this.$);break;case 12:x.addSection(v[R].substr(8)),this.$=v[R].substr(8);break;case 13:x.addTask(v[R-1],v[R]),this.$="task";break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:function(d,g){if(g.recoverable)this.trace(d);else{var y=new Error(d);throw y.hash=g,y}},parse:function(d){var g=this,y=[0],x=[],_=[null],v=[],C=this.table,R="",A=0,T=0,k=2,w=1,S=v.slice.call(arguments,1),m=Object.create(this.lexer),E={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(E.yy[f]=this.yy[f]);m.setInput(d,E.yy),E.yy.lexer=m,E.yy.parser=this,typeof m.yylloc>"u"&&(m.yylloc={});var L=m.yylloc;v.push(L);var b=m.options&&m.options.ranges;typeof E.yy.parseError=="function"?this.parseError=E.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function P(){var K;return K=x.pop()||m.lex()||w,typeof K!="number"&&(K instanceof Array&&(x=K,K=x.pop()),K=g.symbols_[K]||K),K}for(var U,N,D,F,I={},M,z,st,j;;){if(N=y[y.length-1],this.defaultActions[N]?D=this.defaultActions[N]:((U===null||typeof U>"u")&&(U=P()),D=C[N]&&C[N][U]),typeof D>"u"||!D.length||!D[0]){var dt="";j=[];for(M in C[N])this.terminals_[M]&&M>k&&j.push("'"+this.terminals_[M]+"'");m.showPosition?dt="Parse error on line "+(A+1)+`:
`+m.showPosition()+`
Expecting `+j.join(", ")+", got '"+(this.terminals_[U]||U)+"'":dt="Parse error on line "+(A+1)+": Unexpected "+(U==w?"end of input":"'"+(this.terminals_[U]||U)+"'"),this.parseError(dt,{text:m.match,token:this.terminals_[U]||U,line:m.yylineno,loc:L,expected:j})}if(D[0]instanceof Array&&D.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+U);switch(D[0]){case 1:y.push(U),_.push(m.yytext),v.push(m.yylloc),y.push(D[1]),U=null,T=m.yyleng,R=m.yytext,A=m.yylineno,L=m.yylloc;break;case 2:if(z=this.productions_[D[1]][1],I.$=_[_.length-z],I._$={first_line:v[v.length-(z||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(z||1)].first_column,last_column:v[v.length-1].last_column},b&&(I._$.range=[v[v.length-(z||1)].range[0],v[v.length-1].range[1]]),F=this.performAction.apply(I,[R,T,A,E.yy,D[1],_,v].concat(S)),typeof F<"u")return F;z&&(y=y.slice(0,-1*z*2),_=_.slice(0,-1*z),v=v.slice(0,-1*z)),y.push(this.productions_[D[1]][0]),_.push(I.$),v.push(I._$),st=C[y[y.length-2]][y[y.length-1]],y.push(st);break;case 3:return!0}}return!0}},h=function(){var p={EOF:1,parseError:function(g,y){if(this.yy.parser)this.yy.parser.parseError(g,y);else throw new Error(g)},setInput:function(d,g){return this.yy=g||this.yy||{},this._input=d,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var d=this._input[0];this.yytext+=d,this.yyleng++,this.offset++,this.match+=d,this.matched+=d;var g=d.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),d},unput:function(d){var g=d.length,y=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var x=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var _=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===x.length?this.yylloc.first_column:0)+x[x.length-y.length].length-y[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[_[0],_[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(d){this.unput(this.match.slice(d))},pastInput:function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(d.length>20?"...":"")+d.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var d=this.match;return d.length<20&&(d+=this._input.substr(0,20-d.length)),(d.substr(0,20)+(d.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var d=this.pastInput(),g=new Array(d.length+1).join("-");return d+this.upcomingInput()+`
`+g+"^"},test_match:function(d,g){var y,x,_;if(this.options.backtrack_lexer&&(_={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_.yylloc.range=this.yylloc.range.slice(0))),x=d[0].match(/(?:\r\n?|\n).*/g),x&&(this.yylineno+=x.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:x?x[x.length-1].length-x[x.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],y=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var v in _)this[v]=_[v];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var d,g,y,x;this._more||(this.yytext="",this.match="");for(var _=this._currentRules(),v=0;v<_.length;v++)if(y=this._input.match(this.rules[_[v]]),y&&(!g||y[0].length>g[0].length)){if(g=y,x=v,this.options.backtrack_lexer){if(d=this.test_match(y,_[v]),d!==!1)return d;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(d=this.test_match(g,_[x]),d!==!1?d:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var g=this.next();return g||this.lex()},begin:function(g){this.conditionStack.push(g)},popState:function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},pushState:function(g){this.begin(g)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(g,y,x,_){switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return p}();l.lexer=h;function u(){this.yy={}}return u.prototype=l,l.Parser=u,new u}();Yo.parser=Yo;const X8=Yo;let ms="";const Ql=[],en=[],rn=[],$8=function(){Ql.length=0,en.length=0,ms="",rn.length=0,Pe()},K8=function(t){ms=t,Ql.push(t)},Q8=function(){return Ql},Z8=function(){let t=kh();const e=100;let i=0;for(;!t&&i<e;)t=kh(),i++;return en.push(...rn),en},J8=function(){const t=[];return en.forEach(i=>{i.people&&t.push(...i.people)}),[...new Set(t)].sort()},tC=function(t,e){const i=e.substr(1).split(":");let r=0,s=[];i.length===1?(r=Number(i[0]),s=[]):(r=Number(i[0]),s=i[1].split(","));const n=s.map(o=>o.trim()),a={section:ms,type:ms,people:n,task:t,score:r};rn.push(a)},eC=function(t){const e={section:ms,type:ms,description:t,task:t,classes:[]};en.push(e)},kh=function(){const t=function(i){return rn[i].processed};let e=!0;for(const[i,r]of rn.entries())t(i),e=e&&r.processed;return e},iC=function(){return J8()},_h={getConfig:()=>Y().journey,clear:$8,setDiagramTitle:si,getDiagramTitle:je,setAccTitle:Me,getAccTitle:Ue,setAccDescription:He,getAccDescription:Ge,addSection:K8,getSections:Q8,getTasks:Z8,addTask:tC,addTaskOrg:eC,getActors:iC},rC=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,sC=rC,Zl=function(t,e){return Ea(t,e)},nC=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=ns().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=ns().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},$d=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},Kd=function(t,e){return nx(t,e)},aC=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Kd(t,e)},oC=function(t,e,i){const r=t.append("g"),s=Wr();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width*e.taskCount+i.diagramMarginX*(e.taskCount-1),s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,Zl(r,s),Qd(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let Th=-1;const lC=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");Th++;const n=300+5*30;s.append("line").attr("id","task"+Th).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),nC(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Wr();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,Zl(s,a);let o=e.x+14;e.people.forEach(l=>{const h=e.actors[l].color,u={cx:o,cy:e.y,r:7,fill:h,stroke:"#000",title:l,pos:e.actors[l].position};$d(s,u),o+=10}),Qd(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},cC=function(t,e){hu(t,e)},Qd=function(){function t(s,n,a,o,l,h,u,p){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,p,d){const{taskFontSize:g,taskFontFamily:y}=p,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const v=_*g-g*(x.length-1)/2,C=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",y);C.append("tspan").attr("x",a+l/2).attr("dy",v).text(x[_]),C.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(C,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),hC=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},sn={drawRect:Zl,drawCircle:$d,drawSection:oC,drawText:Kd,drawLabel:aC,drawTask:lC,drawBackgroundRect:cC,initGraphics:hC},uC=function(t){Object.keys(t).forEach(function(i){Na[i]=t[i]})},er={};function dC(t){const e=Y().journey;let i=60;Object.keys(er).forEach(r=>{const s=er[r].color,n={cx:20,cy:i,r:7,fill:s,stroke:"#000",pos:er[r].position};sn.drawCircle(t,n);const a={x:40,y:i+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};sn.drawText(t,a),i+=20})}const Na=Y().journey,wr=Na.leftMargin,fC=function(t,e,i,r){const s=Y().journey,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body");di.init();const l=o.select("#"+e);sn.initGraphics(l);const h=r.db.getTasks(),u=r.db.getDiagramTitle(),p=r.db.getActors();for(const v in er)delete er[v];let d=0;p.forEach(v=>{er[v]={color:s.actorColours[d%s.actorColours.length],position:d},d++}),dC(l),di.insert(0,0,wr,Object.keys(er).length*50),pC(l,h,0);const g=di.getBounds();u&&l.append("text").text(u).attr("x",wr).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=g.stopy-g.starty+2*s.diagramMarginY,x=wr+g.stopx+2*s.diagramMarginX;Oe(l,y,x,s.useMaxWidth),l.append("line").attr("x1",wr).attr("y1",s.height*4).attr("x2",x-wr-4).attr("y2",s.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const _=u?70:0;l.attr("viewBox",`${g.startx} -25 ${x} ${y+_}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",y+_+25)},di={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=Y().journey,n=this;let a=0;function o(l){return function(u){a++;const p=n.sequenceItems.length-a+1;n.updateVal(u,"starty",e-p*s.boxMargin,Math.min),n.updateVal(u,"stopy",r+p*s.boxMargin,Math.max),n.updateVal(di.data,"startx",t-p*s.boxMargin,Math.min),n.updateVal(di.data,"stopx",i+p*s.boxMargin,Math.max),l!=="activation"&&(n.updateVal(u,"startx",t-p*s.boxMargin,Math.min),n.updateVal(u,"stopx",i+p*s.boxMargin,Math.max),n.updateVal(di.data,"starty",e-p*s.boxMargin,Math.min),n.updateVal(di.data,"stopy",r+p*s.boxMargin,Math.max))}}this.sequenceItems.forEach(o())},insert:function(t,e,i,r){const s=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,r),o=Math.max(e,r);this.updateVal(di.data,"startx",s,Math.min),this.updateVal(di.data,"starty",a,Math.min),this.updateVal(di.data,"stopx",n,Math.max),this.updateVal(di.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},eo=Na.sectionFills,Ch=Na.sectionColours,pC=function(t,e,i){const r=Y().journey;let s="";const n=r.height*2+r.diagramMarginY,a=i+n;let o=0,l="#CCC",h="black",u=0;for(const[p,d]of e.entries()){if(s!==d.section){l=eo[o%eo.length],u=o%eo.length,h=Ch[o%Ch.length];let y=0;const x=d.section;for(let v=p;v<e.length&&e[v].section==x;v++)y=y+1;const _={x:p*r.taskMargin+p*r.width+wr,y:50,text:d.section,fill:l,num:u,colour:h,taskCount:y};sn.drawSection(t,_,r),s=d.section,o++}const g=d.people.reduce((y,x)=>(er[x]&&(y[x]=er[x]),y),{});d.x=p*r.taskMargin+p*r.width+wr,d.y=a,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=h,d.fill=l,d.num=u,d.actors=g,sn.drawTask(t,d,r),di.insert(d.x,d.y,d.x+d.width+r.taskMargin,300+5*30)}},Eh={setConf:uC,draw:fC},gC={parser:X8,db:_h,renderer:Eh,styles:sC,init:t=>{Eh.setConf(t.journey),_h.clear()}},yC=Object.freeze(Object.defineProperty({__proto__:null,diagram:gC},Symbol.toStringTag,{value:"Module"})),mC=(t,e,i)=>{const{parentById:r}=i,s=new Set;let n=t;for(;n;){if(s.add(n),n===e)return n;n=r[n]}for(n=e;n;){if(s.has(n))return n;n=r[n]}return"root"},Sh=new u2;let ui={};const xC={};let rr={};const bC=async function(t,e,i,r,s,n,a){const l=i.select(`[id="${e}"]`).insert("g").attr("class","nodes"),h=Object.keys(t);return await Promise.all(h.map(async function(u){const p=t[u];let d="default";p.classes.length>0&&(d=p.classes.join(" ")),d=d+" flowchart-label";const g=ri(p.styles);let y=p.text!==void 0?p.text:p.id;const x={width:0,height:0},_=[{id:p.id+"-west",layoutOptions:{"port.side":"WEST"}},{id:p.id+"-east",layoutOptions:{"port.side":"EAST"}},{id:p.id+"-south",layoutOptions:{"port.side":"SOUTH"}},{id:p.id+"-north",layoutOptions:{"port.side":"NORTH"}}];let v=0,C="",R={};switch(p.type){case"round":v=5,C="rect";break;case"square":C="rect";break;case"diamond":C="question",R={portConstraints:"FIXED_SIDE"};break;case"hexagon":C="hexagon";break;case"odd":C="rect_left_inv_arrow";break;case"lean_right":C="lean_right";break;case"lean_left":C="lean_left";break;case"trapezoid":C="trapezoid";break;case"inv_trapezoid":C="inv_trapezoid";break;case"odd_right":C="rect_left_inv_arrow";break;case"circle":C="circle";break;case"ellipse":C="ellipse";break;case"stadium":C="stadium";break;case"subroutine":C="subroutine";break;case"cylinder":C="cylinder";break;case"group":C="rect";break;case"doublecircle":C="doublecircle";break;default:C="rect"}const A={labelStyle:g.labelStyle,shape:C,labelText:y,labelType:p.labelType,rx:v,ry:v,class:d,style:g.style,id:p.id,link:p.link,linkTarget:p.linkTarget,tooltip:s.db.getTooltip(p.id)||"",domId:s.db.lookUpDomId(p.id),haveCallback:p.haveCallback,width:p.type==="group"?500:void 0,dir:p.dir,type:p.type,props:p.props,padding:se().flowchart.padding};let T,k;if(A.type!=="group")k=await Ba(l,A,p.dir),T=k.node().getBBox();else{r.createElementNS("http://www.w3.org/2000/svg","text");const{shapeSvg:S,bbox:m}=await Ee(l,A,void 0,!0);x.width=m.width,x.wrappingWidth=se().flowchart.wrappingWidth,x.height=m.height,x.labelNode=S.node(),A.labelData=x}const w={id:p.id,ports:p.type==="diamond"?_:[],layoutOptions:R,labelText:y,labelData:x,domId:s.db.lookUpDomId(p.id),width:T?.width,height:T?.height,type:p.type,el:k,parent:n.parentById[p.id]};rr[A.id]=w})),a},wh=(t,e,i)=>{const r={TB:{in:{north:"north"},out:{south:"west",west:"east",east:"south"}},LR:{in:{west:"west"},out:{east:"south",south:"north",north:"east"}},RL:{in:{east:"east"},out:{west:"north",north:"south",south:"west"}},BT:{in:{south:"south"},out:{north:"east",east:"west",west:"north"}}};return r.TD=r.TB,r[i][e][t]},vh=(t,e,i)=>{if(B.info("getNextPort",{node:t,edgeDirection:e,graphDirection:i}),!ui[t])switch(i){case"TB":case"TD":ui[t]={inPosition:"north",outPosition:"south"};break;case"BT":ui[t]={inPosition:"south",outPosition:"north"};break;case"RL":ui[t]={inPosition:"east",outPosition:"west"};break;case"LR":ui[t]={inPosition:"west",outPosition:"east"};break}const r=e==="in"?ui[t].inPosition:ui[t].outPosition;return e==="in"?ui[t].inPosition=wh(ui[t].inPosition,e,i):ui[t].outPosition=wh(ui[t].outPosition,e,i),r},kC=(t,e)=>{let i=t.start,r=t.end;const s=i,n=r,a=rr[i],o=rr[r];return!a||!o?{source:i,target:r}:(a.type==="diamond"&&(i=`${i}-${vh(i,"out",e)}`),o.type==="diamond"&&(r=`${r}-${vh(r,"in",e)}`),{source:i,target:r,sourceId:s,targetId:n})},_C=function(t,e,i,r){B.info("abc78 edges = ",t);const s=r.insert("g").attr("class","edgeLabels");let n={},a=e.db.getDirection(),o,l;if(t.defaultStyle!==void 0){const h=ri(t.defaultStyle);o=h.style,l=h.labelStyle}return t.forEach(function(h){const u="L-"+h.start+"-"+h.end;n[u]===void 0?(n[u]=0,B.info("abc78 new entry",u,n[u])):(n[u]++,B.info("abc78 new entry",u,n[u]));let p=u+"-"+n[u];B.info("abc78 new link id to be used is",u,p,n[u]);const d="LS-"+h.start,g="LE-"+h.end,y={style:"",labelStyle:""};switch(y.minlen=h.length||1,h.type==="arrow_open"?y.arrowhead="none":y.arrowhead="normal",y.arrowTypeStart="arrow_open",y.arrowTypeEnd="arrow_open",h.type){case"double_arrow_cross":y.arrowTypeStart="arrow_cross";case"arrow_cross":y.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":y.arrowTypeStart="arrow_point";case"arrow_point":y.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":y.arrowTypeStart="arrow_circle";case"arrow_circle":y.arrowTypeEnd="arrow_circle";break}let x="",_="";switch(h.stroke){case"normal":x="fill:none;",o!==void 0&&(x=o),l!==void 0&&(_=l),y.thickness="normal",y.pattern="solid";break;case"dotted":y.thickness="normal",y.pattern="dotted",y.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":y.thickness="thick",y.pattern="solid",y.style="stroke-width: 3.5px;fill:none;";break}if(h.style!==void 0){const k=ri(h.style);x=k.style,_=k.labelStyle}y.style=y.style+=x,y.labelStyle=y.labelStyle+=_,h.interpolate!==void 0?y.curve=fi(h.interpolate,ii):t.defaultInterpolate!==void 0?y.curve=fi(t.defaultInterpolate,ii):y.curve=fi(xC.curve,ii),h.text===void 0?h.style!==void 0&&(y.arrowheadStyle="fill: #333"):(y.arrowheadStyle="fill: #333",y.labelpos="c"),y.labelType=h.labelType,y.label=h.text.replace(mt.lineBreakRegex,`
`),h.style===void 0&&(y.style=y.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),y.labelStyle=y.labelStyle.replace("color:","fill:"),y.id=p,y.classes="flowchart-link "+d+" "+g;const v=Cl(s,y),{source:C,target:R,sourceId:A,targetId:T}=kC(h,a);B.debug("abc78 source and target",C,R),i.edges.push({id:"e"+h.start+h.end,sources:[C],targets:[R],sourceId:A,targetId:T,labelEl:v,labels:[{width:y.width,height:y.height,orgWidth:y.width,orgHeight:y.height,text:y.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:y})}),i},TC=function(t,e,i,r,s){let n="";r&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)")),Ju(t,e,n,s,i)},CC=function(t,e){return B.info("Extracting classes"),e.db.getClasses()},EC=function(t){const e={parentById:{},childrenById:{}},i=t.getSubGraphs();return B.info("Subgraphs - ",i),i.forEach(function(r){r.nodes.forEach(function(s){e.parentById[s]=r.id,e.childrenById[r.id]===void 0&&(e.childrenById[r.id]=[]),e.childrenById[r.id].push(s)})}),i.forEach(function(r){r.id,e.parentById[r.id]!==void 0&&e.parentById[r.id]}),e},SC=function(t,e,i){const r=mC(t,e,i);if(r===void 0||r==="root")return{x:0,y:0};const s=rr[r].offset;return{x:s.posX,y:s.posY}},wC=function(t,e,i,r,s,n){const a=SC(e.sourceId,e.targetId,s),o=e.sections[0].startPoint,l=e.sections[0].endPoint,u=(e.sections[0].bendPoints?e.sections[0].bendPoints:[]).map(R=>[R.x+a.x,R.y+a.y]),p=[[o.x+a.x,o.y+a.y],...u,[l.x+a.x,l.y+a.y]],{x:d,y:g}=Zu(e.edgeData),y=xr().x(d).y(g).curve(ii),x=t.insert("path").attr("d",y(p)).attr("class","path "+i.classes).attr("fill","none"),_=t.insert("g").attr("class","edgeLabel"),v=yt(_.node().appendChild(e.labelEl)),C=v.node().firstChild.getBoundingClientRect();v.attr("width",C.width),v.attr("height",C.height),_.attr("transform",`translate(${e.labels[0].x+a.x}, ${e.labels[0].y+a.y})`),TC(x,i,r.type,r.arrowMarkerAbsolute,n)},Zd=(t,e)=>{t.forEach(i=>{i.children||(i.children=[]);const r=e.childrenById[i.id];r&&r.forEach(s=>{i.children.push(rr[s])}),Zd(i.children,e)})},vC=async function(t,e,i,r){var s;r.db.clear(),rr={},ui={},r.db.setGen("gen-2"),r.parser.parse(t);const n=yt("body").append("div").attr("style","height:400px").attr("id","cy");let a={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","org.eclipse.elk.padding":"[top=100, left=100, bottom=110, right=110]","elk.layered.spacing.edgeNodeBetweenLayers":"30","elk.direction":"DOWN"},children:[],edges:[]};switch(B.info("Drawing flowchart using v3 renderer",Sh),r.db.getDirection()){case"BT":a.layoutOptions["elk.direction"]="UP";break;case"TB":a.layoutOptions["elk.direction"]="DOWN";break;case"LR":a.layoutOptions["elk.direction"]="RIGHT";break;case"RL":a.layoutOptions["elk.direction"]="LEFT";break}const{securityLevel:l,flowchart:h}=se();let u;l==="sandbox"&&(u=yt("#i"+e));const p=l==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=l==="sandbox"?u.nodes()[0].contentDocument:document,g=p.select(`[id="${e}"]`);_l(g,["point","circle","cross"],r.type,e);const x=r.db.getVertices();let _;const v=r.db.getSubGraphs();B.info("Subgraphs - ",v);for(let S=v.length-1;S>=0;S--)_=v[S],r.db.addVertex(_.id,{text:_.title,type:_.labelType},"group",void 0,_.classes,_.dir);const C=g.insert("g").attr("class","subgraphs"),R=EC(r.db);a=await bC(x,e,p,d,r,R,a);const A=g.insert("g").attr("class","edges edgePath"),T=r.db.getEdges();a=_C(T,r,a,g),Object.keys(rr).forEach(S=>{const m=rr[S];m.parent||a.children.push(m),R.childrenById[S]!==void 0&&(m.labels=[{text:m.labelText,layoutOptions:{"nodeLabels.placement":"[H_CENTER, V_TOP, INSIDE]"},width:m.labelData.width,height:m.labelData.height}],delete m.x,delete m.y,delete m.width,delete m.height)}),Zd(a.children,R),B.info("after layout",JSON.stringify(a,null,2));const w=await Sh.layout(a);Jd(0,0,w.children,g,C,r,0),B.info("after layout",w),(s=w.edges)==null||s.map(S=>{wC(A,S,S.edgeData,r,R,e)}),_r({},g,h.diagramPadding,h.useMaxWidth),n.remove()},Jd=(t,e,i,r,s,n,a)=>{i.forEach(function(o){if(o)if(rr[o.id].offset={posX:o.x+t,posY:o.y+e,x:t,y:e,depth:a,width:o.width,height:o.height},o.type==="group"){const l=s.insert("g").attr("class","subgraph");l.insert("rect").attr("class","subgraph subgraph-lvl-"+a%5+" node").attr("x",o.x+t).attr("y",o.y+e).attr("width",o.width).attr("height",o.height);const h=l.insert("g").attr("class","label"),u=se().flowchart.htmlLabels?o.labelData.width/2:0;h.attr("transform",`translate(${o.labels[0].x+t+o.x+u}, ${o.labels[0].y+e+o.y+3})`),h.node().appendChild(o.labelData.labelNode),B.info("Id (UGH)= ",o.type,o.labels)}else B.info("Id (UGH)= ",o.id),o.el.attr("transform",`translate(${o.x+t+o.width/2}, ${o.y+e+o.height/2})`)}),i.forEach(function(o){o&&o.type==="group"&&Jd(t+o.x,e+o.y,o.children,r,s,n,a+1)})},AC={getClasses:CC,draw:vC},LC=t=>{let e="";for(let i=0;i<5;i++)e+=`
      .subgraph-lvl-${i} {
        fill: ${t[`surface${i}`]};
        stroke: ${t[`surfacePeer${i}`]};
      }
    `;return e},BC=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.85;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
  .subgraph {
    stroke-width:2;
    rx:3;
  }
  // .subgraph-lvl-1 {
  //   fill:#ccc;
  //   // stroke:black;
  // }

  .flowchart-label text {
    text-anchor: middle;
  }

  ${LC(t)}
`,IC=BC,DC={db:h4,renderer:AC,parser:xl,styles:IC},FC=Object.freeze(Object.defineProperty({__proto__:null,diagram:DC},Symbol.toStringTag,{value:"Module"}));var Uo=function(){var t=function(d,g,y,x){for(y=y||{},x=d.length;x--;y[d[x]]=g);return y},e=[6,8,10,11,12,14,16,17,20,21],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,16],l=[1,17],h={trace:function(){},yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:function(g,y,x,_,v,C,R){var A=C.length-1;switch(v){case 1:return C[A-1];case 2:this.$=[];break;case 3:C[A-1].push(C[A]),this.$=C[A-1];break;case 4:case 5:this.$=C[A];break;case 6:case 7:this.$=[];break;case 8:_.getCommonDb().setDiagramTitle(C[A].substr(6)),this.$=C[A].substr(6);break;case 9:this.$=C[A].trim(),_.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=C[A].trim(),_.getCommonDb().setAccDescription(this.$);break;case 12:_.addSection(C[A].substr(8)),this.$=C[A].substr(8);break;case 15:_.addTask(C[A],0,""),this.$=C[A];break;case 16:_.addEvent(C[A].substr(2)),this.$=C[A];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:function(g,y){if(y.recoverable)this.trace(g);else{var x=new Error(g);throw x.hash=y,x}},parse:function(g){var y=this,x=[0],_=[],v=[null],C=[],R=this.table,A="",T=0,k=0,w=2,S=1,m=C.slice.call(arguments,1),E=Object.create(this.lexer),f={yy:{}};for(var L in this.yy)Object.prototype.hasOwnProperty.call(this.yy,L)&&(f.yy[L]=this.yy[L]);E.setInput(g,f.yy),f.yy.lexer=E,f.yy.parser=this,typeof E.yylloc>"u"&&(E.yylloc={});var b=E.yylloc;C.push(b);var P=E.options&&E.options.ranges;typeof f.yy.parseError=="function"?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function U(){var G;return G=_.pop()||E.lex()||S,typeof G!="number"&&(G instanceof Array&&(_=G,G=_.pop()),G=y.symbols_[G]||G),G}for(var N,D,F,I,M={},z,st,j,dt;;){if(D=x[x.length-1],this.defaultActions[D]?F=this.defaultActions[D]:((N===null||typeof N>"u")&&(N=U()),F=R[D]&&R[D][N]),typeof F>"u"||!F.length||!F[0]){var K="";dt=[];for(z in R[D])this.terminals_[z]&&z>w&&dt.push("'"+this.terminals_[z]+"'");E.showPosition?K="Parse error on line "+(T+1)+`:
`+E.showPosition()+`
Expecting `+dt.join(", ")+", got '"+(this.terminals_[N]||N)+"'":K="Parse error on line "+(T+1)+": Unexpected "+(N==S?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(K,{text:E.match,token:this.terminals_[N]||N,line:E.yylineno,loc:b,expected:dt})}if(F[0]instanceof Array&&F.length>1)throw new Error("Parse Error: multiple actions possible at state: "+D+", token: "+N);switch(F[0]){case 1:x.push(N),v.push(E.yytext),C.push(E.yylloc),x.push(F[1]),N=null,k=E.yyleng,A=E.yytext,T=E.yylineno,b=E.yylloc;break;case 2:if(st=this.productions_[F[1]][1],M.$=v[v.length-st],M._$={first_line:C[C.length-(st||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(st||1)].first_column,last_column:C[C.length-1].last_column},P&&(M._$.range=[C[C.length-(st||1)].range[0],C[C.length-1].range[1]]),I=this.performAction.apply(M,[A,k,T,f.yy,F[1],v,C].concat(m)),typeof I<"u")return I;st&&(x=x.slice(0,-1*st*2),v=v.slice(0,-1*st),C=C.slice(0,-1*st)),x.push(this.productions_[F[1]][0]),v.push(M.$),C.push(M._$),j=R[x[x.length-2]][x[x.length-1]],x.push(j);break;case 3:return!0}}return!0}},u=function(){var d={EOF:1,parseError:function(y,x){if(this.yy.parser)this.yy.parser.parseError(y,x);else throw new Error(y)},setInput:function(g,y){return this.yy=y||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var y=g.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},unput:function(g){var y=g.length,x=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var _=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===_.length?this.yylloc.first_column:0)+_[_.length-x.length].length-x[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(g){this.unput(this.match.slice(g))},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),y=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+y+"^"},test_match:function(g,y){var x,_,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),_=g[0].match(/(?:\r\n?|\n).*/g),_&&(this.yylineno+=_.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_?_[_.length-1].length-_[_.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],x=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var C in v)this[C]=v[C];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,y,x,_;this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),C=0;C<v.length;C++)if(x=this._input.match(this.rules[v[C]]),x&&(!y||x[0].length>y[0].length)){if(y=x,_=C,this.options.backtrack_lexer){if(g=this.test_match(x,v[C]),g!==!1)return g;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(g=this.test_match(y,v[_]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,x,_,v){switch(_){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?::\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return d}();h.lexer=u;function p(){this.yy={}}return p.prototype=h,h.Parser=p,new p}();Uo.parser=Uo;const RC=Uo;let xs="",tf=0;const Jl=[],ga=[],bs=[],ef=()=>R1,rf=function(){Jl.length=0,ga.length=0,xs="",bs.length=0,Pe()},sf=function(t){xs=t,Jl.push(t)},nf=function(){return Jl},af=function(){let t=Ah();const e=100;let i=0;for(;!t&&i<e;)t=Ah(),i++;return ga.push(...bs),ga},of=function(t,e,i){const r={id:tf++,section:xs,type:xs,task:t,score:e||0,events:i?[i]:[]};bs.push(r)},lf=function(t){bs.find(i=>i.id===tf-1).events.push(t)},cf=function(t){const e={section:xs,type:xs,description:t,task:t,classes:[]};ga.push(e)},Ah=function(){const t=function(i){return bs[i].processed};let e=!0;for(const[i,r]of bs.entries())t(i),e=e&&r.processed;return e},NC={clear:rf,getCommonDb:ef,addSection:sf,getSections:nf,getTasks:af,addTask:of,addTaskOrg:cf,addEvent:lf},OC=Object.freeze(Object.defineProperty({__proto__:null,addEvent:lf,addSection:sf,addTask:of,addTaskOrg:cf,clear:rf,default:NC,getCommonDb:ef,getSections:nf,getTasks:af},Symbol.toStringTag,{value:"Module"})),PC=12,Oa=function(t,e){const i=t.append("rect");return i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),i.attr("rx",e.rx),i.attr("ry",e.ry),e.class!==void 0&&i.attr("class",e.class),i},MC=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=ns().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=ns().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},VC=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},hf=function(t,e){const i=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},zC=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,hf(t,e)},qC=function(t,e,i){const r=t.append("g"),s=tc();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width,s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,Oa(r,s),uf(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let Lh=-1;const WC=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");Lh++;const n=300+5*30;s.append("line").attr("id","task"+Lh).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),MC(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=tc();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,Oa(s,a),e.x+14,uf(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},YC=function(t,e){Oa(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},UC=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},tc=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},uf=function(){function t(s,n,a,o,l,h,u,p){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,p,d){const{taskFontSize:g,taskFontFamily:y}=p,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const v=_*g-g*(x.length-1)/2,C=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",y);C.append("tspan").attr("x",a+l/2).attr("dy",v).text(x[_]),C.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(C,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),HC=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")};function df(t,e){t.each(function(){var i=yt(this),r=i.text().split(/(\s+|<br>)/).reverse(),s,n=[],a=1.1,o=i.attr("y"),l=parseFloat(i.attr("dy")),h=i.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let u=0;u<r.length;u++)s=r[r.length-1-u],n.push(s),h.text(n.join(" ").trim()),(h.node().getComputedTextLength()>e||s==="<br>")&&(n.pop(),h.text(n.join(" ").trim()),s==="<br>"?n=[""]:n=[s],h=i.append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em").text(s))})}const GC=function(t,e,i,r){const s=i%PC-1,n=t.append("g");e.section=s,n.attr("class",(e.class?e.class+" ":"")+"timeline-node "+("section-"+s));const a=n.append("g"),o=n.append("g"),h=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(df,e.width).node().getBBox(),u=r.fontSize&&r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;return e.height=h.height+u*1.1*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),XC(a,e,s),e},jC=function(t,e,i){const r=t.append("g"),n=r.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(df,e.width).node().getBBox(),a=i.fontSize&&i.fontSize.replace?i.fontSize.replace("px",""):i.fontSize;return r.remove(),n.height+a*1.1*.5+e.padding},XC=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},vr={drawRect:Oa,drawCircle:VC,drawSection:qC,drawText:hf,drawLabel:zC,drawTask:WC,drawBackgroundRect:YC,getTextObj:UC,getNoteRect:tc,initGraphics:HC,drawNode:GC,getVirtualNodeHeight:jC},$C=function(t,e,i,r){var s,n;const a=Y(),o=a.leftMargin??50;B.debug("timeline",r.db);const l=a.securityLevel;let h;l==="sandbox"&&(h=yt("#i"+e));const p=(l==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body")).select("#"+e);p.append("g");const d=r.db.getTasks(),g=r.db.getCommonDb().getDiagramTitle();B.debug("task",d),vr.initGraphics(p);const y=r.db.getSections();B.debug("sections",y);let x=0,_=0,v=0,C=0,R=50+o,A=50;C=50;let T=0,k=!0;y.forEach(function(f){const L={number:T,descr:f,section:T,width:150,padding:20,maxHeight:x},b=vr.getVirtualNodeHeight(p,L,a);B.debug("sectionHeight before draw",b),x=Math.max(x,b+20)});let w=0,S=0;B.debug("tasks.length",d.length);for(const[f,L]of d.entries()){const b={number:f,descr:L,section:L.section,width:150,padding:20,maxHeight:_},P=vr.getVirtualNodeHeight(p,b,a);B.debug("taskHeight before draw",P),_=Math.max(_,P+20),w=Math.max(w,L.events.length);let U=0;for(let N=0;N<L.events.length;N++){const F={descr:L.events[N],section:L.section,number:L.section,width:150,padding:20,maxHeight:50};U+=vr.getVirtualNodeHeight(p,F,a)}S=Math.max(S,U)}B.debug("maxSectionHeight before draw",x),B.debug("maxTaskHeight before draw",_),y&&y.length>0?y.forEach(f=>{const L=d.filter(N=>N.section===f),b={number:T,descr:f,section:T,width:200*Math.max(L.length,1)-50,padding:20,maxHeight:x};B.debug("sectionNode",b);const P=p.append("g"),U=vr.drawNode(P,b,T,a);B.debug("sectionNode output",U),P.attr("transform",`translate(${R}, ${C})`),A+=x+50,L.length>0&&Bh(p,L,T,R,A,_,a,w,S,x,!1),R+=200*Math.max(L.length,1),A=C,T++}):(k=!1,Bh(p,d,T,R,A,_,a,w,S,x,!0));const m=p.node().getBBox();B.debug("bounds",m),g&&p.append("text").text(g).attr("x",m.width/2-o).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),v=k?x+_+150:_+100,p.append("g").attr("class","lineWrapper").append("line").attr("x1",o).attr("y1",v).attr("x2",m.width+3*o).attr("y2",v).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),_r(void 0,p,((s=a.timeline)==null?void 0:s.padding)??50,((n=a.timeline)==null?void 0:n.useMaxWidth)??!1)},Bh=function(t,e,i,r,s,n,a,o,l,h,u){var p;for(const d of e){const g={descr:d.task,section:i,number:i,width:150,padding:20,maxHeight:n};B.debug("taskNode",g);const y=t.append("g").attr("class","taskWrapper"),_=vr.drawNode(y,g,i,a).height;if(B.debug("taskHeight after draw",_),y.attr("transform",`translate(${r}, ${s})`),n=Math.max(n,_),d.events){const v=t.append("g").attr("class","lineWrapper");let C=n;s+=100,C=C+KC(t,d.events,i,r,s,a),s-=100,v.append("line").attr("x1",r+190/2).attr("y1",s+n).attr("x2",r+190/2).attr("y2",s+n+(u?n:h)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}r=r+200,u&&!((p=a.timeline)!=null&&p.disableMulticolor)&&i++}s=s-10},KC=function(t,e,i,r,s,n){let a=0;const o=s;s=s+100;for(const l of e){const h={descr:l,section:i,number:i,width:150,padding:20,maxHeight:50};B.debug("eventNode",h);const u=t.append("g").attr("class","eventWrapper"),d=vr.drawNode(u,h,i,n).height;a=a+d,u.attr("transform",`translate(${r}, ${s})`),s=s+10+d}return s=o,a},QC={setConf:()=>{},draw:$C},ZC=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Vr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+i]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},JC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${ZC(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,tE=JC,eE={db:OC,renderer:QC,parser:RC,styles:tE},iE=Object.freeze(Object.defineProperty({__proto__:null,diagram:eE},Symbol.toStringTag,{value:"Module"}));var Ho=function(){var t=function(A,T,k,w){for(k=k||{},w=A.length;w--;k[A[w]]=T);return k},e=[1,4],i=[1,13],r=[1,12],s=[1,15],n=[1,16],a=[1,20],o=[1,19],l=[6,7,8],h=[1,26],u=[1,24],p=[1,25],d=[6,7,11],g=[1,6,13,15,16,19,22],y=[1,33],x=[1,34],_=[1,6,7,11,13,15,16,19,22],v={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(T,k,w,S,m,E,f){var L=E.length-1;switch(m){case 6:case 7:return S;case 8:S.getLogger().trace("Stop NL ");break;case 9:S.getLogger().trace("Stop EOF ");break;case 11:S.getLogger().trace("Stop NL2 ");break;case 12:S.getLogger().trace("Stop EOF2 ");break;case 15:S.getLogger().info("Node: ",E[L].id),S.addNode(E[L-1].length,E[L].id,E[L].descr,E[L].type);break;case 16:S.getLogger().trace("Icon: ",E[L]),S.decorateNode({icon:E[L]});break;case 17:case 21:S.decorateNode({class:E[L]});break;case 18:S.getLogger().trace("SPACELIST");break;case 19:S.getLogger().trace("Node: ",E[L].id),S.addNode(0,E[L].id,E[L].descr,E[L].type);break;case 20:S.decorateNode({icon:E[L]});break;case 25:S.getLogger().trace("node found ..",E[L-2]),this.$={id:E[L-1],descr:E[L-1],type:S.getType(E[L-2],E[L])};break;case 26:this.$={id:E[L],descr:E[L],type:S.nodeType.DEFAULT};break;case 27:S.getLogger().trace("node found ..",E[L-3]),this.$={id:E[L-3],descr:E[L-1],type:S.getType(E[L-2],E[L])};break}},table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:i,7:[1,10],9:9,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:i,9:22,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:h,7:u,10:23,11:p},t(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:o}),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,23]),t(d,[2,24]),t(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:u,10:32,11:p},{1:[2,7],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(g,[2,14],{7:y,11:x}),t(_,[2,8]),t(_,[2,9]),t(_,[2,10]),t(d,[2,15]),t(d,[2,16]),t(d,[2,17]),{20:[1,35]},{21:[1,36]},t(g,[2,13],{7:y,11:x}),t(_,[2,11]),t(_,[2,12]),{21:[1,37]},t(d,[2,25]),t(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(T,k){if(k.recoverable)this.trace(T);else{var w=new Error(T);throw w.hash=k,w}},parse:function(T){var k=this,w=[0],S=[],m=[null],E=[],f=this.table,L="",b=0,P=0,U=2,N=1,D=E.slice.call(arguments,1),F=Object.create(this.lexer),I={yy:{}};for(var M in this.yy)Object.prototype.hasOwnProperty.call(this.yy,M)&&(I.yy[M]=this.yy[M]);F.setInput(T,I.yy),I.yy.lexer=F,I.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var z=F.yylloc;E.push(z);var st=F.options&&F.options.ranges;typeof I.yy.parseError=="function"?this.parseError=I.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(){var ft;return ft=S.pop()||F.lex()||N,typeof ft!="number"&&(ft instanceof Array&&(S=ft,ft=S.pop()),ft=k.symbols_[ft]||ft),ft}for(var dt,K,G,tt,nt={},Q,J,O,at;;){if(K=w[w.length-1],this.defaultActions[K]?G=this.defaultActions[K]:((dt===null||typeof dt>"u")&&(dt=j()),G=f[K]&&f[K][dt]),typeof G>"u"||!G.length||!G[0]){var W="";at=[];for(Q in f[K])this.terminals_[Q]&&Q>U&&at.push("'"+this.terminals_[Q]+"'");F.showPosition?W="Parse error on line "+(b+1)+`:
`+F.showPosition()+`
Expecting `+at.join(", ")+", got '"+(this.terminals_[dt]||dt)+"'":W="Parse error on line "+(b+1)+": Unexpected "+(dt==N?"end of input":"'"+(this.terminals_[dt]||dt)+"'"),this.parseError(W,{text:F.match,token:this.terminals_[dt]||dt,line:F.yylineno,loc:z,expected:at})}if(G[0]instanceof Array&&G.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+dt);switch(G[0]){case 1:w.push(dt),m.push(F.yytext),E.push(F.yylloc),w.push(G[1]),dt=null,P=F.yyleng,L=F.yytext,b=F.yylineno,z=F.yylloc;break;case 2:if(J=this.productions_[G[1]][1],nt.$=m[m.length-J],nt._$={first_line:E[E.length-(J||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-(J||1)].first_column,last_column:E[E.length-1].last_column},st&&(nt._$.range=[E[E.length-(J||1)].range[0],E[E.length-1].range[1]]),tt=this.performAction.apply(nt,[L,P,b,I.yy,G[1],m,E].concat(D)),typeof tt<"u")return tt;J&&(w=w.slice(0,-1*J*2),m=m.slice(0,-1*J),E=E.slice(0,-1*J)),w.push(this.productions_[G[1]][0]),m.push(nt.$),E.push(nt._$),O=f[w[w.length-2]][w[w.length-1]],w.push(O);break;case 3:return!0}}return!0}},C=function(){var A={EOF:1,parseError:function(k,w){if(this.yy.parser)this.yy.parser.parseError(k,w);else throw new Error(k)},setInput:function(T,k){return this.yy=k||this.yy||{},this._input=T,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var T=this._input[0];this.yytext+=T,this.yyleng++,this.offset++,this.match+=T,this.matched+=T;var k=T.match(/(?:\r\n?|\n).*/g);return k?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),T},unput:function(T){var k=T.length,w=T.split(/(?:\r\n?|\n)/g);this._input=T+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),w.length-1&&(this.yylineno-=w.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:w?(w.length===S.length?this.yylloc.first_column:0)+S[S.length-w.length].length-w[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(T){this.unput(this.match.slice(T))},pastInput:function(){var T=this.matched.substr(0,this.matched.length-this.match.length);return(T.length>20?"...":"")+T.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var T=this.match;return T.length<20&&(T+=this._input.substr(0,20-T.length)),(T.substr(0,20)+(T.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var T=this.pastInput(),k=new Array(T.length+1).join("-");return T+this.upcomingInput()+`
`+k+"^"},test_match:function(T,k){var w,S,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),S=T[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+T[0].length},this.yytext+=T[0],this.match+=T[0],this.matches=T,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(T[0].length),this.matched+=T[0],w=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),w)return w;if(this._backtrack){for(var E in m)this[E]=m[E];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var T,k,w,S;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),E=0;E<m.length;E++)if(w=this._input.match(this.rules[m[E]]),w&&(!k||w[0].length>k[0].length)){if(k=w,S=E,this.options.backtrack_lexer){if(T=this.test_match(w,m[E]),T!==!1)return T;if(this._backtrack){k=!1;continue}else return!1}else if(!this.options.flex)break}return k?(T=this.test_match(k,m[S]),T!==!1?T:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var k=this.next();return k||this.lex()},begin:function(k){this.conditionStack.push(k)},popState:function(){var k=this.conditionStack.length-1;return k>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},pushState:function(k){this.begin(k)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(k,w,S,m){switch(S){case 0:return k.getLogger().trace("Found comment",w.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:k.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return k.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:k.getLogger().trace("end icon"),this.popState();break;case 10:return k.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return k.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return k.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return k.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:k.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return k.getLogger().trace("description:",w.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),k.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),k.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),k.getLogger().trace("node end ...",w.yytext),"NODE_DEND";case 30:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 35:return k.getLogger().trace("Long description:",w.yytext),20;case 36:return k.getLogger().trace("Long description:",w.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return A}();v.lexer=C;function R(){this.yy={}}return R.prototype=v,v.Parser=R,new R}();Ho.parser=Ho;const rE=Ho;let Ci=[],ff=0,ec={};const sE=()=>{Ci=[],ff=0,ec={}},nE=function(t){for(let e=Ci.length-1;e>=0;e--)if(Ci[e].level<t)return Ci[e];return null},aE=()=>Ci.length>0?Ci[0]:null,oE=(t,e,i,r)=>{var s,n;B.info("addNode",t,e,i,r);const a=Y();let o=((s=a.mindmap)==null?void 0:s.padding)??$t.mindmap.padding;switch(r){case _e.ROUNDED_RECT:case _e.RECT:case _e.HEXAGON:o*=2}const l={id:ff++,nodeId:ue(e,a),level:t,descr:ue(i,a),type:r,children:[],width:((n=a.mindmap)==null?void 0:n.maxNodeWidth)??$t.mindmap.maxNodeWidth,padding:o},h=nE(t);if(h)h.children.push(l),Ci.push(l);else if(Ci.length===0)Ci.push(l);else throw new Error('There can be only one root. No parent could be found for ("'+l.descr+'")')},_e={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},lE=(t,e)=>{switch(B.debug("In get type",t,e),t){case"[":return _e.RECT;case"(":return e===")"?_e.ROUNDED_RECT:_e.CLOUD;case"((":return _e.CIRCLE;case")":return _e.CLOUD;case"))":return _e.BANG;case"{{":return _e.HEXAGON;default:return _e.DEFAULT}},cE=(t,e)=>{ec[t]=e},hE=t=>{if(!t)return;const e=Y(),i=Ci[Ci.length-1];t.icon&&(i.icon=ue(t.icon,e)),t.class&&(i.class=ue(t.class,e))},uE=t=>{switch(t){case _e.DEFAULT:return"no-border";case _e.RECT:return"rect";case _e.ROUNDED_RECT:return"rounded-rect";case _e.CIRCLE:return"circle";case _e.CLOUD:return"cloud";case _e.BANG:return"bang";case _e.HEXAGON:return"hexgon";default:return"no-border"}},dE=()=>B,fE=t=>ec[t],pE={clear:sE,addNode:oE,getMindmap:aE,nodeType:_e,getType:lE,setElementForId:cE,decorateNode:hE,type2Str:uE,getLogger:dE,getElementById:fE},gE=pE,yE=12,mE=function(t,e,i,r){e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 ${i.height-5} v${-i.height+2*5} q0,-5 5,-5 h${i.width-2*5} q5,0 5,5 v${i.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",i.height).attr("x2",i.width).attr("y2",i.height)},xE=function(t,e,i){e.append("rect").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("height",i.height).attr("width",i.width)},bE=function(t,e,i){const r=i.width,s=i.height,n=.15*r,a=.25*r,o=.35*r,l=.2*r;e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 0 a${n},${n} 0 0,1 ${r*.25},${-1*r*.1}
      a${o},${o} 1 0,1 ${r*.4},${-1*r*.1}
      a${a},${a} 1 0,1 ${r*.35},${1*r*.2}

      a${n},${n} 1 0,1 ${r*.15},${1*s*.35}
      a${l},${l} 1 0,1 ${-1*r*.15},${1*s*.65}

      a${a},${n} 1 0,1 ${-1*r*.25},${r*.15}
      a${o},${o} 1 0,1 ${-1*r*.5},0
      a${n},${n} 1 0,1 ${-1*r*.25},${-1*r*.15}

      a${n},${n} 1 0,1 ${-1*r*.1},${-1*s*.35}
      a${l},${l} 1 0,1 ${r*.1},${-1*s*.65}

    H0 V0 Z`)},kE=function(t,e,i){const r=i.width,s=i.height,n=.15*r;e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 0 a${n},${n} 1 0,0 ${r*.25},${-1*s*.1}
      a${n},${n} 1 0,0 ${r*.25},0
      a${n},${n} 1 0,0 ${r*.25},0
      a${n},${n} 1 0,0 ${r*.25},${1*s*.1}

      a${n},${n} 1 0,0 ${r*.15},${1*s*.33}
      a${n*.8},${n*.8} 1 0,0 0,${1*s*.34}
      a${n},${n} 1 0,0 ${-1*r*.15},${1*s*.33}

      a${n},${n} 1 0,0 ${-1*r*.25},${s*.15}
      a${n},${n} 1 0,0 ${-1*r*.25},0
      a${n},${n} 1 0,0 ${-1*r*.25},0
      a${n},${n} 1 0,0 ${-1*r*.25},${-1*s*.15}

      a${n},${n} 1 0,0 ${-1*r*.1},${-1*s*.33}
      a${n*.8},${n*.8} 1 0,0 0,${-1*s*.34}
      a${n},${n} 1 0,0 ${r*.1},${-1*s*.33}

    H0 V0 Z`)},_E=function(t,e,i){e.append("circle").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("r",i.width/2)};function TE(t,e,i,r,s){return t.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("transform","translate("+(s.width-e)/2+", "+i+")")}const CE=function(t,e,i){const r=i.height,n=r/4,a=i.width-i.padding+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-r/2},{x:a-n,y:-r},{x:n,y:-r},{x:0,y:-r/2}];TE(e,a,r,o,i)},EE=function(t,e,i){e.append("rect").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("height",i.height).attr("rx",i.padding).attr("ry",i.padding).attr("width",i.width)},SE=function(t,e,i,r,s){const n=s.htmlLabels,a=r%(yE-1),o=e.append("g");i.section=a;let l="section-"+a;a<0&&(l+=" section-root"),o.attr("class",(i.class?i.class+" ":"")+"mindmap-node "+l);const h=o.append("g"),u=o.append("g"),p=i.descr.replace(/(<br\/*>)/g,`
`);La(u,p,{useHtmlLabels:n,width:i.width,classes:"mindmap-node-label"}),n||u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const d=u.node().getBBox(),[g]=qr(s.fontSize);if(i.height=d.height+g*1.1*.5+i.padding,i.width=d.width+2*i.padding,i.icon)if(i.type===t.nodeType.CIRCLE)i.height+=50,i.width+=50,o.append("foreignObject").attr("height","50px").attr("width",i.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+i.icon),u.attr("transform","translate("+i.width/2+", "+(i.height/2-1.5*i.padding)+")");else{i.width+=50;const y=i.height;i.height=Math.max(y,60);const x=Math.abs(i.height-y);o.append("foreignObject").attr("width","60px").attr("height",i.height).attr("style","text-align: center;margin-top:"+x/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+i.icon),u.attr("transform","translate("+(25+i.width/2)+", "+(x/2+i.padding/2)+")")}else if(n){const y=(i.width-d.width)/2,x=(i.height-d.height)/2;u.attr("transform","translate("+y+", "+x+")")}else{const y=i.width/2,x=i.padding/2;u.attr("transform","translate("+y+", "+x+")")}switch(i.type){case t.nodeType.DEFAULT:mE(t,h,i,a);break;case t.nodeType.ROUNDED_RECT:EE(t,h,i);break;case t.nodeType.RECT:xE(t,h,i);break;case t.nodeType.CIRCLE:h.attr("transform","translate("+i.width/2+", "+ +i.height/2+")"),_E(t,h,i);break;case t.nodeType.CLOUD:bE(t,h,i);break;case t.nodeType.BANG:kE(t,h,i);break;case t.nodeType.HEXAGON:CE(t,h,i);break}return t.setElementForId(i.id,o),i.height},wE=function(t,e){const i=t.getElementById(e.id),r=e.x||0,s=e.y||0;i.attr("transform","translate("+r+","+s+")")};qh.use(d2);function pf(t,e,i,r,s){SE(t,e,i,r,s),i.children&&i.children.forEach((n,a)=>{pf(t,e,n,r<0?a:r,s)})}function vE(t,e){e.edges().map((i,r)=>{const s=i.data();if(i[0]._private.bodyBounds){const n=i[0]._private.rscratch;B.trace("Edge: ",r,s),t.insert("path").attr("d",`M ${n.startX},${n.startY} L ${n.midX},${n.midY} L${n.endX},${n.endY} `).attr("class","edge section-edge-"+s.section+" edge-depth-"+s.depth)}})}function gf(t,e,i,r){e.add({group:"nodes",data:{id:t.id.toString(),labelText:t.descr,height:t.height,width:t.width,level:r,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(s=>{gf(s,e,i,r+1),e.add({group:"edges",data:{id:`${t.id}_${s.id}`,source:t.id,target:s.id,depth:r,section:s.section}})})}function AE(t,e){return new Promise(i=>{const r=yt("body").append("div").attr("id","cy").attr("style","display:none"),s=qh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),gf(t,s,e,0),s.nodes().forEach(function(n){n.layoutDimensions=()=>{const a=n.data();return{w:a.width,h:a.height}}}),s.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),s.ready(n=>{B.info("Ready",n),i(s)})})}function LE(t,e){e.nodes().map((i,r)=>{const s=i.data();s.x=i.position().x,s.y=i.position().y,wE(t,s);const n=t.getElementById(s.nodeId);B.info("Id:",r,"Position: (",i.position().x,", ",i.position().y,")",s),n.attr("transform",`translate(${i.position().x-s.width/2}, ${i.position().y-s.height/2})`),n.attr("attr",`apa-${r})`)})}const BE=async(t,e,i,r)=>{var s,n;B.debug(`Rendering mindmap diagram
`+t);const a=r.db,o=a.getMindmap();if(!o)return;const l=Y();l.htmlLabels=!1;const h=cn(e),u=h.append("g");u.attr("class","mindmap-edges");const p=h.append("g");p.attr("class","mindmap-nodes"),pf(a,p,o,-1,l);const d=await AE(o,l);vE(u,d),LE(a,d),_r(void 0,h,((s=l.mindmap)==null?void 0:s.padding)??$t.mindmap.padding,((n=l.mindmap)==null?void 0:n.useMaxWidth)??$t.mindmap.useMaxWidth)},IE={draw:BE},DE=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Vr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},FE=t=>`
  .edge {
    stroke-width: 3;
  }
  ${DE(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,RE=FE,NE={db:gE,renderer:IE,parser:rE,styles:RE},OE=Object.freeze(Object.defineProperty({__proto__:null,diagram:NE},Symbol.toStringTag,{value:"Module"}));var Go=function(){var t=function(o,l,h,u){for(h=h||{},u=o.length;u--;h[o[u]]=l);return h},e=[1,9],i=[1,10],r=[1,5,10,12],s={trace:function(){},yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:function(l,h,u,p,d,g,y){var x=g.length-1;switch(d){case 7:const _=p.findOrCreateNode(g[x-4].trim().replaceAll('""','"')),v=p.findOrCreateNode(g[x-2].trim().replaceAll('""','"')),C=parseFloat(g[x].trim());p.addLink(_,v,C);break;case 8:case 9:case 11:this.$=g[x];break;case 10:this.$=g[x-1];break}},table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:i},{1:[2,6],7:11,10:[1,12]},t(i,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(r,[2,8]),t(r,[2,9]),{19:[1,16]},t(r,[2,11]),{1:[2,1]},{1:[2,5]},t(i,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:i},{15:18,16:7,17:8,18:e,20:i},{18:[1,19]},t(i,[2,3]),{12:[1,20]},t(r,[2,10]),{15:21,16:7,17:8,18:e,20:i},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:function(l,h){if(h.recoverable)this.trace(l);else{var u=new Error(l);throw u.hash=h,u}},parse:function(l){var h=this,u=[0],p=[],d=[null],g=[],y=this.table,x="",_=0,v=0,C=2,R=1,A=g.slice.call(arguments,1),T=Object.create(this.lexer),k={yy:{}};for(var w in this.yy)Object.prototype.hasOwnProperty.call(this.yy,w)&&(k.yy[w]=this.yy[w]);T.setInput(l,k.yy),k.yy.lexer=T,k.yy.parser=this,typeof T.yylloc>"u"&&(T.yylloc={});var S=T.yylloc;g.push(S);var m=T.options&&T.options.ranges;typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(){var z;return z=p.pop()||T.lex()||R,typeof z!="number"&&(z instanceof Array&&(p=z,z=p.pop()),z=h.symbols_[z]||z),z}for(var f,L,b,P,U={},N,D,F,I;;){if(L=u[u.length-1],this.defaultActions[L]?b=this.defaultActions[L]:((f===null||typeof f>"u")&&(f=E()),b=y[L]&&y[L][f]),typeof b>"u"||!b.length||!b[0]){var M="";I=[];for(N in y[L])this.terminals_[N]&&N>C&&I.push("'"+this.terminals_[N]+"'");T.showPosition?M="Parse error on line "+(_+1)+`:
`+T.showPosition()+`
Expecting `+I.join(", ")+", got '"+(this.terminals_[f]||f)+"'":M="Parse error on line "+(_+1)+": Unexpected "+(f==R?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(M,{text:T.match,token:this.terminals_[f]||f,line:T.yylineno,loc:S,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+L+", token: "+f);switch(b[0]){case 1:u.push(f),d.push(T.yytext),g.push(T.yylloc),u.push(b[1]),f=null,v=T.yyleng,x=T.yytext,_=T.yylineno,S=T.yylloc;break;case 2:if(D=this.productions_[b[1]][1],U.$=d[d.length-D],U._$={first_line:g[g.length-(D||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(D||1)].first_column,last_column:g[g.length-1].last_column},m&&(U._$.range=[g[g.length-(D||1)].range[0],g[g.length-1].range[1]]),P=this.performAction.apply(U,[x,v,_,k.yy,b[1],d,g].concat(A)),typeof P<"u")return P;D&&(u=u.slice(0,-1*D*2),d=d.slice(0,-1*D),g=g.slice(0,-1*D)),u.push(this.productions_[b[1]][0]),d.push(U.$),g.push(U._$),F=y[u[u.length-2]][u[u.length-1]],u.push(F);break;case 3:return!0}}return!0}},n=function(){var o={EOF:1,parseError:function(h,u){if(this.yy.parser)this.yy.parser.parseError(h,u);else throw new Error(h)},setInput:function(l,h){return this.yy=h||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var h=l.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var h=l.length,u=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h),this.offset-=h;var p=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===p.length?this.yylloc.first_column:0)+p[p.length-u.length].length-u[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-h]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),h=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+h+"^"},test_match:function(l,h){var u,p,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))),p=l[0].match(/(?:\r\n?|\n).*/g),p&&(this.yylineno+=p.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:p?p[p.length-1].length-p[p.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],u=this.performAction.call(this,this.yy,this,h,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),u)return u;if(this._backtrack){for(var g in d)this[g]=d[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,h,u,p;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),g=0;g<d.length;g++)if(u=this._input.match(this.rules[d[g]]),u&&(!h||u[0].length>h[0].length)){if(h=u,p=g,this.options.backtrack_lexer){if(l=this.test_match(u,d[g]),l!==!1)return l;if(this._backtrack){h=!1;continue}else return!1}else if(!this.options.flex)break}return h?(l=this.test_match(h,d[p]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var h=this.next();return h||this.lex()},begin:function(h){this.conditionStack.push(h)},popState:function(){var h=this.conditionStack.length-1;return h>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(h){return h=this.conditionStack.length-1-Math.abs(h||0),h>=0?this.conditionStack[h]:"INITIAL"},pushState:function(h){this.begin(h)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(h,u,p,d){switch(p){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();s.lexer=n;function a(){this.yy={}}return a.prototype=s,s.Parser=a,new a}();Go.parser=Go;const ya=Go;let Pa=[],Ma=[],Zr={};const PE=()=>{Pa=[],Ma=[],Zr={},Pe()};class ME{constructor(e,i,r=0){this.source=e,this.target=i,this.value=r}}const VE=(t,e,i)=>{Pa.push(new ME(t,e,i))};class zE{constructor(e){this.ID=e}}const qE=t=>(t=mt.sanitizeText(t,Y()),Zr[t]||(Zr[t]=new zE(t),Ma.push(Zr[t])),Zr[t]),WE=()=>Ma,YE=()=>Pa,UE=()=>({nodes:Ma.map(t=>({id:t.ID})),links:Pa.map(t=>({source:t.source.ID,target:t.target.ID,value:t.value}))}),HE={nodesMap:Zr,getConfig:()=>Y().sankey,getNodes:WE,getLinks:YE,getGraph:UE,addLink:VE,findOrCreateNode:qE,getAccTitle:Ue,setAccTitle:Me,getAccDescription:Ge,setAccDescription:He,getDiagramTitle:je,setDiagramTitle:si,clear:PE},yf=class jo{static next(e){return new jo(e+ ++jo.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}};yf.count=0;let Ih=yf;const GE={left:g2,right:y2,center:m2,justify:x2},jE=function(t,e,i,r){const{securityLevel:s,sankey:n}=Y(),a=N1.sankey;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=n?.width??a.width,p=n?.height??a.width,d=n?.useMaxWidth??a.useMaxWidth,g=n?.nodeAlignment??a.nodeAlignment,y=n?.prefix??a.prefix,x=n?.suffix??a.suffix,_=n?.showValues??a.showValues,v=r.db.getGraph(),C=GE[g],R=10;f2().nodeId(E=>E.id).nodeWidth(R).nodePadding(10+(_?15:0)).nodeAlign(C).extent([[0,0],[u,p]])(v);const T=Ko(Wh);h.append("g").attr("class","nodes").selectAll(".node").data(v.nodes).join("g").attr("class","node").attr("id",E=>(E.uid=Ih.next("node-")).id).attr("transform",function(E){return"translate("+E.x0+","+E.y0+")"}).attr("x",E=>E.x0).attr("y",E=>E.y0).append("rect").attr("height",E=>E.y1-E.y0).attr("width",E=>E.x1-E.x0).attr("fill",E=>T(E.id));const k=({id:E,value:f})=>_?`${E}
${y}${Math.round(f*100)/100}${x}`:E;h.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(v.nodes).join("text").attr("x",E=>E.x0<u/2?E.x1+6:E.x0-6).attr("y",E=>(E.y1+E.y0)/2).attr("dy",`${_?"0":"0.35"}em`).attr("text-anchor",E=>E.x0<u/2?"start":"end").text(k);const w=h.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(v.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),S=n?.linkColor||"gradient";if(S==="gradient"){const E=w.append("linearGradient").attr("id",f=>(f.uid=Ih.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",f=>f.source.x1).attr("x2",f=>f.target.x0);E.append("stop").attr("offset","0%").attr("stop-color",f=>T(f.source.id)),E.append("stop").attr("offset","100%").attr("stop-color",f=>T(f.target.id))}let m;switch(S){case"gradient":m=E=>E.uid;break;case"source":m=E=>T(E.source.id);break;case"target":m=E=>T(E.target.id);break;default:m=S}w.append("path").attr("d",p2()).attr("stroke",m).attr("stroke-width",E=>Math.max(1,E.width)),_r(void 0,h,0,d)},XE={draw:jE},$E=t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),KE=ya.parse.bind(ya);ya.parse=t=>KE($E(t));const QE={parser:ya,db:HE,renderer:XE},ZE=Object.freeze(Object.defineProperty({__proto__:null,diagram:QE},Symbol.toStringTag,{value:"Module"}));var Dh,Fh,Xo=function(){var t=function(R,A,T,k){for(T=T||{},k=R.length;k--;T[R[k]]=A);return T},e=[1,7],i=[1,13],r=[1,14],s=[1,15],n=[1,19],a=[1,16],o=[1,17],l=[1,18],h=[8,30],u=[8,21,28,29,30,31,32,40,44,47],p=[1,23],d=[1,24],g=[8,15,16,21,28,29,30,31,32,40,44,47],y=[8,15,16,21,27,28,29,30,31,32,40,44,47],x=[1,49],_={trace:function(){},yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:function(A,T,k,w,S,m,E){var f=m.length-1;switch(S){case 4:w.getLogger().debug("Rule: separator (NL) ");break;case 5:w.getLogger().debug("Rule: separator (Space) ");break;case 6:w.getLogger().debug("Rule: separator (EOF) ");break;case 7:w.getLogger().debug("Rule: hierarchy: ",m[f-1]),w.setHierarchy(m[f-1]);break;case 8:w.getLogger().debug("Stop NL ");break;case 9:w.getLogger().debug("Stop EOF ");break;case 10:w.getLogger().debug("Stop NL2 ");break;case 11:w.getLogger().debug("Stop EOF2 ");break;case 12:w.getLogger().debug("Rule: statement: ",m[f]),typeof m[f].length=="number"?this.$=m[f]:this.$=[m[f]];break;case 13:w.getLogger().debug("Rule: statement #2: ",m[f-1]),this.$=[m[f-1]].concat(m[f]);break;case 14:w.getLogger().debug("Rule: link: ",m[f],A),this.$={edgeTypeStr:m[f],label:""};break;case 15:w.getLogger().debug("Rule: LABEL link: ",m[f-3],m[f-1],m[f]),this.$={edgeTypeStr:m[f],label:m[f-1]};break;case 18:const L=parseInt(m[f]),b=w.generateId();this.$={id:b,type:"space",label:"",width:L,children:[]};break;case 23:w.getLogger().debug("Rule: (nodeStatement link node) ",m[f-2],m[f-1],m[f]," typestr: ",m[f-1].edgeTypeStr);const P=w.edgeStrToEdgeData(m[f-1].edgeTypeStr);this.$=[{id:m[f-2].id,label:m[f-2].label,type:m[f-2].type,directions:m[f-2].directions},{id:m[f-2].id+"-"+m[f].id,start:m[f-2].id,end:m[f].id,label:m[f-1].label,type:"edge",directions:m[f].directions,arrowTypeEnd:P,arrowTypeStart:"arrow_open"},{id:m[f].id,label:m[f].label,type:w.typeStr2Type(m[f].typeStr),directions:m[f].directions}];break;case 24:w.getLogger().debug("Rule: nodeStatement (abc88 node size) ",m[f-1],m[f]),this.$={id:m[f-1].id,label:m[f-1].label,type:w.typeStr2Type(m[f-1].typeStr),directions:m[f-1].directions,widthInColumns:parseInt(m[f],10)};break;case 25:w.getLogger().debug("Rule: nodeStatement (node) ",m[f]),this.$={id:m[f].id,label:m[f].label,type:w.typeStr2Type(m[f].typeStr),directions:m[f].directions,widthInColumns:1};break;case 26:w.getLogger().debug("APA123",this?this:"na"),w.getLogger().debug("COLUMNS: ",m[f]),this.$={type:"column-setting",columns:m[f]==="auto"?-1:parseInt(m[f])};break;case 27:w.getLogger().debug("Rule: id-block statement : ",m[f-2],m[f-1]),w.generateId(),this.$={...m[f-2],type:"composite",children:m[f-1]};break;case 28:w.getLogger().debug("Rule: blockStatement : ",m[f-2],m[f-1],m[f]);const U=w.generateId();this.$={id:U,type:"composite",label:"",children:m[f-1]};break;case 29:w.getLogger().debug("Rule: node (NODE_ID separator): ",m[f]),this.$={id:m[f]};break;case 30:w.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",m[f-1],m[f]),this.$={id:m[f-1],label:m[f].label,typeStr:m[f].typeStr,directions:m[f].directions};break;case 31:w.getLogger().debug("Rule: dirList: ",m[f]),this.$=[m[f]];break;case 32:w.getLogger().debug("Rule: dirList: ",m[f-1],m[f]),this.$=[m[f-1]].concat(m[f]);break;case 33:w.getLogger().debug("Rule: nodeShapeNLabel: ",m[f-2],m[f-1],m[f]),this.$={typeStr:m[f-2]+m[f],label:m[f-1]};break;case 34:w.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",m[f-3],m[f-2]," #3:",m[f-1],m[f]),this.$={typeStr:m[f-3]+m[f],label:m[f-2],directions:m[f-1]};break;case 35:case 36:this.$={type:"classDef",id:m[f-1].trim(),css:m[f].trim()};break;case 37:this.$={type:"applyClass",id:m[f-1].trim(),styleClass:m[f].trim()};break;case 38:this.$={type:"applyStyles",id:m[f-1].trim(),stylesStr:m[f].trim()};break}},table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{8:[1,20]},t(h,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:e,28:i,29:r,31:s,32:n,40:a,44:o,47:l}),t(u,[2,16],{14:22,15:p,16:d}),t(u,[2,17]),t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),t(u,[2,21]),t(u,[2,22]),t(g,[2,25],{27:[1,25]}),t(u,[2,26]),{19:26,26:12,32:n},{11:27,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},t(y,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},t(h,[2,13]),{26:35,32:n},{32:[2,14]},{17:[1,36]},t(g,[2,24]),{11:37,13:4,14:22,15:p,16:d,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},t(y,[2,30]),{18:[1,43]},{18:[1,44]},t(g,[2,23]),{18:[1,45]},{30:[1,46]},t(u,[2,28]),t(u,[2,35]),t(u,[2,36]),t(u,[2,37]),t(u,[2,38]),{37:[1,47]},{34:48,35:x},{15:[1,50]},t(u,[2,27]),t(y,[2,33]),{39:[1,51]},{34:52,35:x,39:[2,31]},{32:[2,15]},t(y,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:function(A,T){if(T.recoverable)this.trace(A);else{var k=new Error(A);throw k.hash=T,k}},parse:function(A){var T=this,k=[0],w=[],S=[null],m=[],E=this.table,f="",L=0,b=0,P=2,U=1,N=m.slice.call(arguments,1),D=Object.create(this.lexer),F={yy:{}};for(var I in this.yy)Object.prototype.hasOwnProperty.call(this.yy,I)&&(F.yy[I]=this.yy[I]);D.setInput(A,F.yy),F.yy.lexer=D,F.yy.parser=this,typeof D.yylloc>"u"&&(D.yylloc={});var M=D.yylloc;m.push(M);var z=D.options&&D.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=w.pop()||D.lex()||U,typeof W!="number"&&(W instanceof Array&&(w=W,W=w.pop()),W=T.symbols_[W]||W),W}for(var j,dt,K,G,tt={},nt,Q,J,O;;){if(dt=k[k.length-1],this.defaultActions[dt]?K=this.defaultActions[dt]:((j===null||typeof j>"u")&&(j=st()),K=E[dt]&&E[dt][j]),typeof K>"u"||!K.length||!K[0]){var at="";O=[];for(nt in E[dt])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");D.showPosition?at="Parse error on line "+(L+1)+`:
`+D.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[j]||j)+"'":at="Parse error on line "+(L+1)+": Unexpected "+(j==U?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(at,{text:D.match,token:this.terminals_[j]||j,line:D.yylineno,loc:M,expected:O})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+j);switch(K[0]){case 1:k.push(j),S.push(D.yytext),m.push(D.yylloc),k.push(K[1]),j=null,b=D.yyleng,f=D.yytext,L=D.yylineno,M=D.yylloc;break;case 2:if(Q=this.productions_[K[1]][1],tt.$=S[S.length-Q],tt._$={first_line:m[m.length-(Q||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(Q||1)].first_column,last_column:m[m.length-1].last_column},z&&(tt._$.range=[m[m.length-(Q||1)].range[0],m[m.length-1].range[1]]),G=this.performAction.apply(tt,[f,b,L,F.yy,K[1],S,m].concat(N)),typeof G<"u")return G;Q&&(k=k.slice(0,-1*Q*2),S=S.slice(0,-1*Q),m=m.slice(0,-1*Q)),k.push(this.productions_[K[1]][0]),S.push(tt.$),m.push(tt._$),J=E[k[k.length-2]][k[k.length-1]],k.push(J);break;case 3:return!0}}return!0}},v=function(){var R={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(A,T){return this.yy=T||this.yy||{},this._input=A,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var A=this._input[0];this.yytext+=A,this.yyleng++,this.offset++,this.match+=A,this.matched+=A;var T=A.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),A},unput:function(A){var T=A.length,k=A.split(/(?:\r\n?|\n)/g);this._input=A+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var w=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===w.length?this.yylloc.first_column:0)+w[w.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(A){this.unput(this.match.slice(A))},pastInput:function(){var A=this.matched.substr(0,this.matched.length-this.match.length);return(A.length>20?"...":"")+A.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var A=this.match;return A.length<20&&(A+=this._input.substr(0,20-A.length)),(A.substr(0,20)+(A.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var A=this.pastInput(),T=new Array(A.length+1).join("-");return A+this.upcomingInput()+`
`+T+"^"},test_match:function(A,T){var k,w,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),w=A[0].match(/(?:\r\n?|\n).*/g),w&&(this.yylineno+=w.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:w?w[w.length-1].length-w[w.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+A[0].length},this.yytext+=A[0],this.match+=A[0],this.matches=A,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(A[0].length),this.matched+=A[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var m in S)this[m]=S[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var A,T,k,w;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),m=0;m<S.length;m++)if(k=this._input.match(this.rules[S[m]]),k&&(!T||k[0].length>T[0].length)){if(T=k,w=m,this.options.backtrack_lexer){if(A=this.test_match(k,S[m]),A!==!1)return A;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(A=this.test_match(T,S[w]),A!==!1?A:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(T,k,w,S){switch(w){case 0:return 10;case 1:return T.getLogger().debug("Found space-block"),31;case 2:return T.getLogger().debug("Found nl-block"),31;case 3:return T.getLogger().debug("Found space-block"),29;case 4:T.getLogger().debug(".",k.yytext);break;case 5:T.getLogger().debug("_",k.yytext);break;case 6:return 5;case 7:return k.yytext=-1,28;case 8:return k.yytext=k.yytext.replace(/columns\s+/,""),T.getLogger().debug("COLUMNS (LEX)",k.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:T.getLogger().debug("LEX: POPPING STR:",k.yytext),this.popState();break;case 14:return T.getLogger().debug("LEX: STR end:",k.yytext),"STR";case 15:return k.yytext=k.yytext.replace(/space\:/,""),T.getLogger().debug("SPACE NUM (LEX)",k.yytext),21;case 16:return k.yytext="1",T.getLogger().debug("COLUMNS (LEX)",k.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),T.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),T.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),T.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),T.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),T.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),T.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),T.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),T.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),T.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),T.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return T.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return T.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return T.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return T.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return T.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return T.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return T.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),T.getLogger().debug("LEX ARR START"),38;case 75:return T.getLogger().debug("Lex: NODE_ID",k.yytext),32;case 76:return T.getLogger().debug("Lex: EOF",k.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:T.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:T.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return T.getLogger().debug("LEX: NODE_DESCR:",k.yytext),"NODE_DESCR";case 84:T.getLogger().debug("LEX POPPING"),this.popState();break;case 85:T.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (right): dir:",k.yytext),"DIR";case 87:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (left):",k.yytext),"DIR";case 88:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (x):",k.yytext),"DIR";case 89:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (y):",k.yytext),"DIR";case 90:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (up):",k.yytext),"DIR";case 91:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (down):",k.yytext),"DIR";case 92:return k.yytext="]>",T.getLogger().debug("Lex (ARROW_DIR end):",k.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 94:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 95:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 96:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 97:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 98:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 99:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return T.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 103:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 104:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 105:return T.getLogger().debug("Lex: COLON",k.yytext),k.yytext=k.yytext.slice(1),27}},rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return R}();_.lexer=v;function C(){this.yy={}}return C.prototype=_,_.Parser=C,new C}();Xo.parser=Xo;const JE=Xo;let Je={},ic=[],Ls={};const Rh="color",Nh="fill",tS="bgFill",mf=",",eS=Y();let Ps={};const iS=t=>mt.sanitizeText(t,eS),rS=function(t,e=""){Ps[t]===void 0&&(Ps[t]={id:t,styles:[],textStyles:[]});const i=Ps[t];e?.split(mf).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(Rh)){const a=s.replace(Nh,tS).replace(Rh,Nh);i.textStyles.push(a)}i.styles.push(s)})},sS=function(t,e=""){const i=Je[t];e!=null&&(i.styles=e.split(mf))},nS=function(t,e){t.split(",").forEach(function(i){let r=Je[i];if(r===void 0){const s=i.trim();Je[s]={id:s,type:"na",children:[]},r=Je[s]}r.classes||(r.classes=[]),r.classes.push(e)})},xf=(t,e)=>{const i=t.flat(),r=[];for(const s of i){if(s.label&&(s.label=iS(s.label)),s.type==="classDef"){rS(s.id,s.css);continue}if(s.type==="applyClass"){nS(s.id,s?.styleClass||"");continue}if(s.type==="applyStyles"){s?.stylesStr&&sS(s.id,s?.stylesStr);continue}if(s.type==="column-setting")e.columns=s.columns||-1;else if(s.type==="edge")Ls[s.id]?Ls[s.id]++:Ls[s.id]=1,s.id=Ls[s.id]+"-"+s.id,ic.push(s);else{s.label||(s.type==="composite"?s.label="":s.label=s.id);const n=!Je[s.id];if(n?Je[s.id]=s:(s.type!=="na"&&(Je[s.id].type=s.type),s.label!==s.id&&(Je[s.id].label=s.label)),s.children&&xf(s.children,s),s.type==="space"){const a=s.width||1;for(let o=0;o<a;o++){const l=k2(s);l.id=l.id+"-"+o,Je[l.id]=l,r.push(l)}}else n&&r.push(s)}}e.children=r};let rc=[],Ms={id:"root",type:"composite",children:[],columns:-1};const aS=()=>{B.debug("Clear called"),Pe(),Ms={id:"root",type:"composite",children:[],columns:-1},Je={root:Ms},rc=[],Ps={},ic=[],Ls={}};function oS(t){switch(B.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return B.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function lS(t){switch(B.debug("typeStr2Type",t),t){case"==":return"thick";default:return"normal"}}function cS(t){switch(t.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}let Oh=0;const hS=()=>(Oh++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Oh),uS=t=>{Ms.children=t,xf(t,Ms),rc=Ms.children},dS=t=>{const e=Je[t];return e?e.columns?e.columns:e.children?e.children.length:-1:-1},fS=()=>[...Object.values(Je)],pS=()=>rc||[],gS=()=>ic,yS=t=>Je[t],mS=t=>{Je[t.id]=t},xS=()=>console,bS=function(){return Ps},kS={getConfig:()=>se().block,typeStr2Type:oS,edgeTypeStr2Type:lS,edgeStrToEdgeData:cS,getLogger:xS,getBlocksFlat:fS,getBlocks:pS,getEdges:gS,setHierarchy:uS,getBlock:yS,setBlock:mS,getColumns:dS,getClasses:bS,clear:aS,generateId:hS},_S=kS,wn=(t,e)=>{const i=zh,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return Jr(r,s,n,e)},TS=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }



  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${wn(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${wn(t.mainBkg,.5)};
    fill: ${wn(t.clusterBkg,.5)};
    stroke: ${wn(t.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,CS=TS;function bf(t,e,i=!1){var r,s,n;const a=t;let o="default";(((r=a?.classes)==null?void 0:r.length)||0)>0&&(o=(a?.classes||[]).join(" ")),o=o+" flowchart-label";let l=0,h="",u;switch(a.type){case"round":l=5,h="rect";break;case"composite":l=0,h="composite",u=0;break;case"square":h="rect";break;case"diamond":h="question";break;case"hexagon":h="hexagon";break;case"block_arrow":h="block_arrow";break;case"odd":h="rect_left_inv_arrow";break;case"lean_right":h="lean_right";break;case"lean_left":h="lean_left";break;case"trapezoid":h="trapezoid";break;case"inv_trapezoid":h="inv_trapezoid";break;case"rect_left_inv_arrow":h="rect_left_inv_arrow";break;case"circle":h="circle";break;case"ellipse":h="ellipse";break;case"stadium":h="stadium";break;case"subroutine":h="subroutine";break;case"cylinder":h="cylinder";break;case"group":h="rect";break;case"doublecircle":h="doublecircle";break;default:h="rect"}const p=ri(a?.styles||[]),d=a.label,g=a.size||{width:0,height:0,x:0,y:0};return{labelStyle:p.labelStyle,shape:h,labelText:d,rx:l,ry:l,class:o,style:p.style,id:a.id,directions:a.directions,width:g.width,height:g.height,x:g.x,y:g.y,positioned:i,intersect:void 0,type:a.type,padding:u??(((n=(s=se())==null?void 0:s.block)==null?void 0:n.padding)||0)}}async function ES(t,e,i){const r=bf(e,i,!1);if(r.type==="group")return;const s=await Ba(t,r),n=s.node().getBBox(),a=i.getBlock(r.id);a.size={width:n.width,height:n.height,x:0,y:0,node:s},i.setBlock(a),s.remove()}async function SS(t,e,i){const r=bf(e,i,!0);i.getBlock(r.id).type!=="space"&&(await Ba(t,r),e.intersect=r?.intersect,yo(r))}async function sc(t,e,i,r){for(const s of e)await r(t,s,i),s.children&&await sc(t,s.children,i,r)}async function wS(t,e,i){await sc(t,e,i,ES)}async function vS(t,e,i){await sc(t,e,i,SS)}async function AS(t,e,i,r,s){const n=new Ni({multigraph:!0,compound:!0});n.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const a of i)a.size&&n.setNode(a.id,{width:a.size.width,height:a.size.height,intersect:a.intersect});for(const a of e)if(a.start&&a.end){const o=r.getBlock(a.start),l=r.getBlock(a.end);if(o?.size&&l?.size){const h=o.size,u=l.size,p=[{x:h.x,y:h.y},{x:h.x+(u.x-h.x)/2,y:h.y+(u.y-h.y)/2},{x:u.x,y:u.y}];await e0(t,{v:a.start,w:a.end,name:a.id},{...a,arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",n,s),a.label&&(await Cl(t,{...a,label:a.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),await t0({...a,x:p[1].x,y:p[1].y},{originalPath:p}))}}}const he=((Fh=(Dh=Y())==null?void 0:Dh.block)==null?void 0:Fh.padding)||8;function LS(t,e){if(t===0||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);if(t<0)return{px:e,py:0};if(t===1)return{px:0,py:e};const i=e%t,r=Math.floor(e/t);return{px:i,py:r}}const BS=t=>{let e=0,i=0;for(const r of t.children){const{width:s,height:n,x:a,y:o}=r.size||{width:0,height:0,x:0,y:0};B.debug("getMaxChildSize abc95 child:",r.id,"width:",s,"height:",n,"x:",a,"y:",o,r.type),r.type!=="space"&&(s>e&&(e=s/(t.widthInColumns||1)),n>i&&(i=n))}return{width:e,height:i}};function $o(t,e,i=0,r=0){var s,n,a,o,l,h,u,p,d,g,y;B.debug("setBlockSizes abc95 (start)",t.id,(s=t?.size)==null?void 0:s.x,"block width =",t?.size,"sieblingWidth",i),(n=t?.size)!=null&&n.width||(t.size={width:i,height:r,x:0,y:0});let x=0,_=0;if(((a=t.children)==null?void 0:a.length)>0){for(const S of t.children)$o(S,e);const v=BS(t);x=v.width,_=v.height,B.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",x,_);for(const S of t.children)S.size&&(B.debug(`abc95 Setting size of children of ${t.id} id=${S.id} ${x} ${_} ${S.size}`),S.size.width=x*(S.widthInColumns||1)+he*((S.widthInColumns||1)-1),S.size.height=_,S.size.x=0,S.size.y=0,B.debug(`abc95 updating size of ${t.id} children child:${S.id} maxWidth:${x} maxHeight:${_}`));for(const S of t.children)$o(S,e,x,_);const C=t.columns||-1;let R=0;for(const S of t.children)R+=S.widthInColumns||1;let A=t.children.length;C>0&&C<R&&(A=C),t.widthInColumns;const T=Math.ceil(R/A);let k=A*(x+he)+he,w=T*(_+he)+he;if(k<i){B.debug(`Detected to small siebling: abc95 ${t.id} sieblingWidth ${i} sieblingHeight ${r} width ${k}`),k=i,w=r;const S=(i-A*he-he)/A,m=(r-T*he-he)/T;B.debug("Size indata abc88",t.id,"childWidth",S,"maxWidth",x),B.debug("Size indata abc88",t.id,"childHeight",m,"maxHeight",_),B.debug("Size indata abc88 xSize",A,"padding",he);for(const E of t.children)E.size&&(E.size.width=S,E.size.height=m,E.size.x=0,E.size.y=0)}if(B.debug(`abc95 (finale calc) ${t.id} xSize ${A} ySize ${T} columns ${C}${t.children.length} width=${Math.max(k,((o=t.size)==null?void 0:o.width)||0)}`),k<(((l=t?.size)==null?void 0:l.width)||0)){k=((h=t?.size)==null?void 0:h.width)||0;const S=C>0?Math.min(t.children.length,C):t.children.length;if(S>0){const m=(k-S*he-he)/S;B.debug("abc95 (growing to fit) width",t.id,k,(u=t.size)==null?void 0:u.width,m);for(const E of t.children)E.size&&(E.size.width=m)}}t.size={width:k,height:w,x:0,y:0}}B.debug("setBlockSizes abc94 (done)",t.id,(p=t?.size)==null?void 0:p.x,(d=t?.size)==null?void 0:d.width,(g=t?.size)==null?void 0:g.y,(y=t?.size)==null?void 0:y.height)}function kf(t,e){var i,r,s,n,a,o,l,h,u,p,d,g,y,x,_,v,C;B.debug(`abc85 layout blocks (=>layoutBlocks) ${t.id} x: ${(i=t?.size)==null?void 0:i.x} y: ${(r=t?.size)==null?void 0:r.y} width: ${(s=t?.size)==null?void 0:s.width}`);const R=t.columns||-1;if(B.debug("layoutBlocks columns abc95",t.id,"=>",R,t),t.children&&t.children.length>0){const A=((a=(n=t?.children[0])==null?void 0:n.size)==null?void 0:a.width)||0,T=t.children.length*A+(t.children.length-1)*he;B.debug("widthOfChildren 88",T,"posX");let k=0;B.debug("abc91 block?.size?.x",t.id,(o=t?.size)==null?void 0:o.x);let w=(l=t?.size)!=null&&l.x?((h=t?.size)==null?void 0:h.x)+(-((u=t?.size)==null?void 0:u.width)/2||0):-he,S=0;for(const m of t.children){const E=t;if(!m.size)continue;const{width:f,height:L}=m.size,{px:b,py:P}=LS(R,k);if(P!=S&&(S=P,w=(p=t?.size)!=null&&p.x?((d=t?.size)==null?void 0:d.x)+(-((g=t?.size)==null?void 0:g.width)/2||0):-he,B.debug("New row in layout for block",t.id," and child ",m.id,S)),B.debug(`abc89 layout blocks (child) id: ${m.id} Pos: ${k} (px, py) ${b},${P} (${(y=E?.size)==null?void 0:y.x},${(x=E?.size)==null?void 0:x.y}) parent: ${E.id} width: ${f}${he}`),E.size){const U=f/2;m.size.x=w+he+U,B.debug(`abc91 layout blocks (calc) px, pyid:${m.id} startingPos=X${w} new startingPosX${m.size.x} ${U} padding=${he} width=${f} halfWidth=${U} => x:${m.size.x} y:${m.size.y} ${m.widthInColumns} (width * (child?.w || 1)) / 2 ${f*(m?.widthInColumns||1)/2}`),w=m.size.x+U,m.size.y=E.size.y-E.size.height/2+P*(L+he)+L/2+he,B.debug(`abc88 layout blocks (calc) px, pyid:${m.id}startingPosX${w}${he}${U}=>x:${m.size.x}y:${m.size.y}${m.widthInColumns}(width * (child?.w || 1)) / 2${f*(m?.widthInColumns||1)/2}`)}m.children&&kf(m),k+=m?.widthInColumns||1,B.debug("abc88 columnsPos",m,k)}}B.debug(`layout blocks (<==layoutBlocks) ${t.id} x: ${(_=t?.size)==null?void 0:_.x} y: ${(v=t?.size)==null?void 0:v.y} width: ${(C=t?.size)==null?void 0:C.width}`)}function _f(t,{minX:e,minY:i,maxX:r,maxY:s}={minX:0,minY:0,maxX:0,maxY:0}){if(t.size&&t.id!=="root"){const{x:n,y:a,width:o,height:l}=t.size;n-o/2<e&&(e=n-o/2),a-l/2<i&&(i=a-l/2),n+o/2>r&&(r=n+o/2),a+l/2>s&&(s=a+l/2)}if(t.children)for(const n of t.children)({minX:e,minY:i,maxX:r,maxY:s}=_f(n,{minX:e,minY:i,maxX:r,maxY:s}));return{minX:e,minY:i,maxX:r,maxY:s}}function IS(t){const e=t.getBlock("root");if(!e)return;$o(e,t,0,0),kf(e),B.debug("getBlocks",JSON.stringify(e,null,2));const{minX:i,minY:r,maxX:s,maxY:n}=_f(e),a=n-r,o=s-i;return{x:i,y:r,width:o,height:a}}const DS=function(t,e){return e.db.getClasses()},FS=async function(t,e,i,r){const{securityLevel:s,block:n}=se(),a=r.db;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`);_l(h,["point","circle","cross"],r.type,e);const p=a.getBlocks(),d=a.getBlocksFlat(),g=a.getEdges(),y=h.insert("g").attr("class","block");await wS(y,p,a);const x=IS(a);if(await vS(y,p,a),await AS(y,g,d,a,e),x){const _=x,v=Math.max(1,Math.round(.125*(_.width/_.height))),C=_.height+v+10,R=_.width+10,{useMaxWidth:A}=n;Oe(h,C,R,!!A),B.debug("Here Bounds",x,_),h.attr("viewBox",`${_.x-5} ${_.y-5} ${_.width+10} ${_.height+10}`)}Ko(Wh)},RS={draw:FS,getClasses:DS},NS={parser:JE,db:_S,renderer:RS,styles:CS},OS=Object.freeze(Object.defineProperty({__proto__:null,diagram:NS},Symbol.toStringTag,{value:"Module"}));export{ne as _,Fi as m};
