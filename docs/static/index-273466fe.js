import{R as u,r as i}from"./react-0d9c9f23.js";import{r as ba,a as xa}from"./react-dom-b710246a.js";import{_ as Ue,R as Ca}from"./monaco-editor-5cf1114e.js";import{T as xt,B as T,a as ue,P as ot,b as he,I as se,E as ka,A as Jn,D as Gn,C as Xn,H as va,M as En,c as Ea,d as Sa,e as Ta,f as Sn,g as At,h as Ar,i as Ia,v as Da,j as Ma,Z as Lr,k as zn,l as it,m as tn,n as nn,o as Aa,p as rn,q as le,r as _n,s as Rr,t as Lt,u as an,w as Rt,x as Jt,y as st,z as La,S as Ra,F as $a,G as wt,J as Fa,K as on,L as Pa,N as Yn,O as Qn,Q as Zn,R as $r,U as za,V,W as er,X as Fr,Y as Pr,_ as _a,$ as Ba,a0 as Bn,a1 as Na,a2 as Ha,a3 as Oa,a4 as Nn,a5 as Wa,a6 as ja,a7 as qa,a8 as Ka,a9 as Ua,aa as Va,ab as Ja,ac as Ga,ad as zr,ae as _r,af as tr,ag as Xa,ah as Ya,ai as Br,aj as Qa,ak as Nr,al as Za,am as eo,an as to,ao as no,ap as ro,aq as ao,ar as Hr,as as oo,at as sn,au as et,av as It,aw as Ht,ax as Ge,ay as io,az as tt,aA as so,aB as lo,aC as Or,aD as co,aE as nr,aF as Ut,aG as mn,aH as Dt,aI as mo,aJ as uo,aK as Tn,aL as go,aM as fo,aN as po,aO as ho,aP as yo,aQ as rr,aR as un,aS as ar,aT as gn,aU as Ae,aV as wo,aW as bo,aX as xo,aY as Co,aZ as or,a_ as ko,a$ as vo,b0 as In,b1 as ir}from"./@mui-0903014f.js";import{g as Gt}from"./gsap-cf87e9ff.js";import{i as nt}from"./i18next-2edfafb0.js";import{u as Eo,a as sr,b as So,D as To,c as Io,S as Do,v as Mo,d as Ao,C as Lo,T as Ro,M as $o}from"./@dnd-kit-b0134b90.js";import{m as Fo}from"./markdown-it-multimd-table-766322c9.js";import{m as Po}from"./markdown-it-github-toc-d2e55c92.js";import{m as zo}from"./markdown-it-task-lists-4fbe77b0.js";import{e as _o}from"./markdown-it-emoji-66d1da7f.js";import{b as Hn,o as ie,t as On,r as re}from"./mobx-890d6d9e.js";import{o as Re}from"./mobx-react-49086c1a.js";import{u as we,i as Bo}from"./react-i18next-093df503.js";import{c as Dn}from"./clsx-29d81c80.js";import{l as No,F as Ho}from"./@monaco-editor-41149cb1.js";import{h as Oo}from"./html2canvas-a81bcda4.js";import{R as Wo}from"./react-resizable-44dc0d2e.js";import{B as jo}from"./i18next-browser-languagedetector-953d2d0b.js";import"./@babel-518c05f7.js";import"./scheduler-765c72db.js";/* empty css                      */import"./@emotion-c98c060d.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-transition-group-5217f7e1.js";import"./@popperjs-61ffd834.js";import"./prop-types-c01d55b3.js";import"./react-is-11039b32.js";import"./uslug-b4eaf0e7.js";import"./unorm-1228fe77.js";import"./mobx-react-lite-64872c2a.js";import"./use-sync-external-store-3bf5d15d.js";import"./state-local-dd516420.js";import"./react-draggable-4a1d91b3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const qo=[];async function ve(t){if(!t)throw new Error("A non-empty URL must be provided.");let e=new URL(t);async function n(r){try{const a=await fetch(r);if(!a.ok)throw new Error("Network response was not ok "+a.statusText);const o=a.body.getReader(),s=new TextDecoder;let l=0,c="";for(;;){const{done:d,value:m}=await o.read();if(d)break;c+=s.decode(m,{stream:!0}),l+=m.length}return c}catch(a){throw console.error("Error:",a),a}}if(qo.includes(e.pathname))try{const r=await n(t),a=new Blob([r],{type:"application/javascript"}),o=URL.createObjectURL(a);return await Ue(()=>import(o),[],import.meta.url)}catch(r){console.error("Failed to load module:",r)}else try{return e.host=window._cdn.cdn[0],await Ue(()=>import(e.toString()),[],import.meta.url)}catch{return window._cdn.failed.includes(e.host)||(window._cdn.failed.push(e.host),window._cdn.cdn=window._cdn.cdn.filter(a=>a!==e.host)),ve(t)}}const vt=["cdn.mengze.vip","fastly.jsdelivr.net","cdn.jsdmirror.com","cdn.jsdelivr.net"];async function Ko(){const t=localStorage.getItem("preferred_cdn");if(t&&vt.includes(t)){const e=vt.indexOf(t);e>-1&&(vt.splice(e,1),vt.unshift(t))}window._cdn={failed:[],index:0,cdn:[...vt]}}async function Uo(){return new Promise(async t=>{async function e(r,a=2e3){const o=new AbortController,s=o.signal,l=`https://${r}/npm/lodash@4.17.21/package.json`,c=setTimeout(()=>{o.abort()},a);try{const d=performance.now(),m=await fetch(l,{method:"HEAD",signal:s,cache:"no-store"}).catch(()=>fetch(l,{signal:s,cache:"no-store"})),f=performance.now();if(clearTimeout(c),!m.ok)throw new Error(`HTTP error! Status: ${m.status}`);const w=f-d;return{domain:r,latency:w}}catch{return null}}function n(r){return new Promise((a,o)=>{let s=0,l=!1;r.forEach(c=>{e(c,1500).then(d=>{l||(d?(l=!0,a(d.domain)):(s++,s===r.length&&o(new Error("All CDNs failed"))))})})})}try{const r=n(window._cdn.cdn),a=new Promise((s,l)=>setTimeout(()=>l(new Error("Timeout")),1e3)),o=await Promise.race([r,a]);if(o){console.log(`[CDN] Fastest detected: ${o}`);const s=window._cdn.cdn,l=s.indexOf(o);l>-1&&(s.splice(l,1),s.unshift(o)),localStorage.setItem("preferred_cdn",o)}}catch{}finally{t()}})}async function Vo(){const t=async(o,s,l)=>{if(document.querySelector(`[data-id="${s}"]`))return;const c=await fetch(l);if(!c.ok)throw new Error(`Failed to fetch ${l}`);const d=await c.text();if(o==="script"&&(d.match(/define$/g)||[]).length>1)throw new Error(`Script at ${l} has multiple anonymous define calls`);const m=document.createElement(o);m.textContent=d,m.setAttribute("data-id",s),document.head.appendChild(m)},e=window._cdn.cdn[0],n=[{id:"katex",cdnUrl:`https://${e}/npm/katex@0.16.7/dist/katex.min.js`},{id:"IncrementalDOM",cdnUrl:`https://${e}/npm/incremental-dom@0.7.0/dist/incremental-dom-min.js`},{id:"markdownitIncrementalDOM",cdnUrl:`https://${e}/npm/markdown-it-incremental-dom/dist/markdown-it-incremental-dom.min.js`}],r=[{id:"githubMd",cdnUrl:`https://${e}/npm/clue-parser@1.0.3/src/githubMd.min.css`},{id:"clue-parser",cdnUrl:`https://${e}/npm/clue-parser@1.0.4/index.min.css`}];async function a(o,s,l){try{await s(l,o.id,o.cdnUrl)}catch{let d=new URL(o.cdnUrl);d.host=window._cdn.cdn[1]?window._cdn.cdn[1]:d.host,await s(l,o.id,d.toString())}}for(const o of n)await a(o,t,"script");for(const o of r)await a(o,t,"style")}async function Jo(){const t=[{id:"katex",cdnUrl:"https://cdn.jsdmirror.com/npm/katex@0.16.7/dist/katex.min.js"},{id:"incremental-dom",cdnUrl:"https://cdn.jsdmirror.com/npm/incremental-dom@0.7.0/dist/incremental-dom-min.js"},{id:"markdown-it-incremental-dom",cdnUrl:"https://cdn.jsdmirror.com/npm/markdown-it-incremental-dom/dist/markdown-it-incremental-dom.min.js"}];for(const{id:e,cdnUrl:n}of t){const r=document.createElement("script");r.src=n,r.crossOrigin="anonymous",document.head.appendChild(r)}}function Ye(t,e){const n=window.updateLoadingProgress;if(typeof n=="function")n(t,e);else{const r=document.getElementById("loading-progress");r&&(r.textContent=t)}}const Go=()=>{const t=localStorage.getItem("i18nextLng")||"zh-CN";document.documentElement.lang=t};(async function(){try{Ye("æ­£åœ¨åˆå§‹åŒ–è¯­è¨€è®¾ç½®...","Initializing language settings..."),Go(),Ye("æ­£åœ¨åˆå§‹åŒ–CDNé…ç½®...","Initializing CDN configuration..."),await Ko(),Ye("æ­£åœ¨æµ‹è¯•CDNè¿æ¥...","Testing CDN connections..."),await Uo(),Ye("æ­£åœ¨åŠ è½½æ ¸å¿ƒè„šæœ¬...","Loading core scripts..."),await Vo(),Ye("æ­£åœ¨é¢„åŠ è½½èµ„æº...","Preloading resources..."),await Jo(),Ye("åˆå§‹åŒ–å®Œæˆï¼Œæ­£åœ¨å¯åŠ¨åº”ç”¨...","Initialization complete, starting app...")}catch(e){console.error("[PreInit] åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:",e),Ye("åˆå§‹åŒ–é‡åˆ°é—®é¢˜ï¼Œæ­£åœ¨å°è¯•ç»§ç»­...","Encountered issues during initialization, trying to continue...")}})();function Xo(t=window.editor){const e=t??window.editor;var n=e.getSelection(),r=n.startLineNumber,a=n.startColumn,o=n.endLineNumber,s=n.endColumn,l=e.getModel().getValueInRange({startLineNumber:r,startColumn:a,endLineNumber:o,endColumn:s});return l}function lt(t,e,n=window.editor,r=window.monaco){const a=window.editor,o=t,s=window.editor.getSelections()[0];a.executeEdits("img-insert",[{range:new window.monaco.Range(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn),text:o,forceMoveMarkers:e}])}function Yo(t){navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(t).catch(e=>{console.error("Failed to copy text using Clipboard API: ",e),lr(t)}):lr(t)}function lr(t){try{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="1px",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")?console.log("Text copied to clipboard using execCommand."):console.error("Fallback: Failed to copy text using execCommand."),document.body.removeChild(e)}catch(e){console.error("Fallback: Unable to copy text to clipboard: ",e)}}class Wr{version="0.2";setItem(e,n){localStorage.setItem(e,n)}getItem(e){return localStorage.getItem(e)?localStorage.getItem(e):""}removeItem(e){localStorage.removeItem(e)}}const Qo=`[TOC]\r
\r
## æ–°ä¸€ä»£çš„â€œMarkdownâ€ç¼–è¾‘å™¨ğŸ“£\r
\r
1. å¦‚æœä½ è¿˜ä¸æ¸…æ¥šä»€ä¹ˆæ˜¯markdownçš„è¯è¯·ç§»æ­¥[markdownç®€ä»‹](https://markdown.com.cn/cheat-sheet.html#æ€»è§ˆ), ä¸‹é¢æ˜¯ä¸€äº›ç®€çŸ­çš„ä»‹ç»ï¼š\r
   - å·¦è¾¹æ˜¯æºä»£ç \r
   - å³è¾¹æ˜¯æ¸²æŸ“å‡ºæ¥çš„ç»“æœ\r
   - è¯•ç€åœ¨æ–°çš„ä¸€è¡Œæ‰“å‡ºä¸€ä¸ª# ä½ å¥½, åœ¨å³è¾¹å°±ä¼šå‘ç°å˜æˆæ ‡é¢˜äº†ï¼\r
\r
## ä¸€ã€QQå’©å’©å¥½ç”¨åˆ°çˆ†ç‚¸çš„Markdownç¼–è¾‘å™¨ğŸ˜€\r
\r
1. ç›®å‰å…¨ä¸–ç•Œæœ€å¥½ç”¨çš„onionå†™çš„Webç«¯Markdownå…è´¹ç¼–è¾‘å™¨\r
2. åœ¨æ–°çš„ä¸€è¡Œæ‰“ä¸€ä¸ªæ–œæ å­—ç¬¦ï¼š\`/\`ï¼Œå³å¯çœ‹åˆ°æµç¨‹å›¾ã€ä»£ç å—ç­‰å¿«æ·æç¤ºï¼\r
3. é¼ æ ‡å³é”®ä¹Ÿæœ‰ä¸€å †ç¥å¥‡åŠŸèƒ½ï¼\r
4. å¯¼å‡ºä¸ºPDFåœ¨å³ä¸Šè§’æ›´å¤šé‡Œï¼Œç›´æ¥æŒ‰ä¸‹\`Ctrl + P\`ä¹Ÿå¯ä»¥å“¦\r
5. å…è´¹ã€ä¸é™æ—¶é•¿ã€é«˜å‡†ç¡®ç‡çš„è¯­éŸ³è½¬æ–‡å­—ï¼Œè¿˜ä¸å¿«æ¥è¯•è¯•ï¼\r
6. æœ€æ™ºèƒ½çš„åŒæ­¥æ»šåŠ¨ç®—æ³•ï¼Œæœ€é«˜æ•ˆçš„ä»£ç æ¸²æŸ“æ•ˆç‡ï¼Œæœ€ç°ä»£çš„UIç•Œé¢ï¼Œæœ€é…·ç‚«çš„ç¥å¥‡åŠŸèƒ½ï¼\r
7. åŒå‡»å³ä¾§èƒ½å¿«é€Ÿå®šä½åˆ°å·¦ä¾§å¯¹åº”ä»£ç ï¼Œè¯´çœŸçš„ï¼Œç”¨è¿‡çš„éƒ½è¯´å¤ªæ–¹ä¾¿äº†ï¼\r
8. æœ€å…¨å¿«æ·é”®ï¼Œæ²¡æœ‰ä¹‹ä¸€\r
   - \`Ctrl + V\` ä¸Šä¼ å¤åˆ¶å’Œæˆªå›¾çš„JPGã€PNGæ ¼å¼å›¾ç‰‡\r
   - \`Ctrl + Z\` æ’¤å›ç¼–è¾‘\r
   - \`Ctrl + F\` æŸ¥æ‰¾ä¸æ›¿æ¢\r
   - \`Ctrl + E/R\` æ–‡æœ¬å±…ä¸­/å³\r
   - \`Ctrl + B\` æ–‡æœ¬åŠ ç²—\r
   - \`Ctrl + U\` ä¸‹åˆ’çº¿\r
   - \`Ctrl + I\` æ–‡æœ¬æ–œä½“\r
   - \`Ctrl + 1-4\` 1-4çº§æ ‡é¢˜\r
   - \`\` Ctrl + \` \`\` åˆ é™¤çº¿\r
   - \`Ctrl + Q\` åŒæ­¥æ»šåŠ¨\r
   - \`Ctrl + Shift + F\` æ–‡ä»¶ç®¡ç†å™¨\r
   - \`Ctrl + S\` ä¿å­˜\r
   - \`Ctrl + M\` æ’å…¥ä¸€ä¸ªLaTexä»£ç å—\r
   - \`Shift + Alt + F\` æ ¼å¼åŒ–Markdown\r
   - \`Ctrl + Alt + V\` è¯­éŸ³è½¬æ–‡å­—\r
   - æ›´å¤šå¿«æ·é”®ï¼Œæ•¬è¯·æœŸå¾…...\r
\r
## äºŒã€å¸¸ç”¨çš„Makrdownè¯­æ³•\r
\r
- è¿™å°±ç”¨äº†æ— åºåˆ—è¡¨äº†ï¼Œé‚£ä½ çŒœçŒœï¼Œæœ‰åºåˆ—è¡¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\r
- ä½ å¥½ï¼Œæˆ‘æ˜¯å¸¦è¯­æ³•æç¤ºçš„LaTexï¼è¯­æ³•å‚è§ï¼š[LaTexå…¬ç¤ºè¡¨](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
  $$\r
  \\lambda+1=\\lambda^3-1\r
  $$\r
- ä¸æ•™å­¦äº†ï¼ŒçœŸçš„**å¾ˆç®€å•**ï¼\r
\r
## ä¸‰ã€æµç¨‹å›¾ï¼Ÿæ€ç»´å¯¼å›¾ï¼Ÿé¥¼å›¾ï¼Ÿç»Ÿç»Ÿæ‹¿ä¸‹ï¼âœ¨\r
\r
å¯¹ï¼Œå°±åœ¨ä¸‹é¢ï¼Œæ‰“ä¸€ä¸ªæ–œæ /ï¼Œå†æ‰“flowï¼Œå›è½¦ï¼\r
\r
\`\`\`mermaid\r
flowchart LR\r
Start --> Stop\r
\`\`\`\r
\r
## å››ã€è¶…Newbeeçš„å›¾ç‰‡ç®¡ç†å™¨\r
\r
1. ç‚¹å‡»å³ä¸Šè§’æ›´å¤šæ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹å¹¶æˆæƒ\r
2. æˆªå›¾ ï¼ˆæˆ–è€…æ˜¯å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ï¼‰\r
3. ç²˜è´´ ï¼ˆåˆ°è¿™é‡Œä»»ä½•åœ°æ–¹ï¼‰\r
\r
æ˜¯çš„ï¼Œå°±è¿™ä¹ˆç®€å•ï¼ï¼\r
\r
## äº”ã€æä¸Šæ—¥ç¨‹\r
\r
- ååŒåŠå…¬\r
- åˆ†äº«\r
- åœ¨çº¿è¿è¡ŒPython\r
\r
## å…­ã€å…³äºæˆ‘å’Œè¿™ä¸ªé¡¹ç›®\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: å°±æ˜¯è§£é‡Šä¸€äº›ä¸œè¥¿çš„è„šæ³¨å•¦ï¼\r
[^2]: è¿™æ˜¯ç¬¬äºŒä¸ªè„šæ³¨ï¼\r
`,Zo=`[TOC]\r
\r
## Next-Generation "Markdown" EditorğŸ“£\r
\r
1. If you're not familiar with Markdown, please visit [Markdown Introduction](https://markdown.com.cn/cheat-sheet.html#overview). Here's a brief introduction:\r
   - The left side is the source code\r
   - The right side is the rendered result\r
   - Try typing \`# Hello\` on a new line, and you'll see it becomes a heading on the right!\r
\r
## 1. The Most Amazing Markdown Editor EverğŸ˜€\r
\r
1. Currently the world's best free web-based Markdown editor written by onion\r
2. Type a forward slash character: \`/\` on a new line to see quick suggestions for flowcharts, code blocks, and more!\r
3. Right-click also has a bunch of magical features!\r
4. Export to PDF is in the "More" menu at the top right, or press \`Ctrl + P\` directly\r
5. Free, unlimited duration, high-accuracy speech-to-text conversion - come try it!\r
6. The smartest synchronized scrolling algorithm, most efficient code rendering, most modern UI interface, and coolest magical features!\r
7. Double-click on the right side to quickly locate the corresponding code on the left - seriously, everyone who's used it says it's super convenient!\r
8. The most comprehensive keyboard shortcuts, bar none:\r
   - \`Ctrl + V\` Upload copied and screenshot JPG/PNG images\r
   - \`Ctrl + Z\` Undo edit\r
   - \`Ctrl + F\` Find and replace\r
   - \`Ctrl + E/R\` Center/right align text\r
   - \`Ctrl + B\` Bold text\r
   - \`Ctrl + U\` Underline\r
   - \`Ctrl + I\` Italic text\r
   - \`Ctrl + 1-4\` Level 1-4 headings\r
   - \`\` Ctrl + \` \`\` Strikethrough\r
   - \`Ctrl + Q\` Synchronized scrolling\r
   - \`Ctrl + Shift + F\` File manager\r
   - \`Ctrl + S\` Save\r
   - \`Ctrl + M\` Insert a LaTeX code block\r
   - \`Shift + Alt + F\` Format Markdown\r
   - \`Ctrl + Alt + V\` Speech to text\r
   - More shortcuts coming soon...\r
\r
## 2. Common Markdown Syntax\r
\r
- This uses an unordered list - can you guess what an ordered list looks like?\r
- Hello, I'm LaTeX with syntax highlighting! For syntax reference, see: [LaTeX Formula Table](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
  $$\r
  \\lambda+1=\\lambda^3-1\r
  $$\r
- No more tutorials - it's really **that simple**!\r
\r
## 3. Flowcharts? Mind Maps? Pie Charts? We've Got Them All!âœ¨\r
\r
Yes, right below! Type a forward slash \`/\`, then type "flow", and press Enter!\r
\r
\`\`\`mermaid\r
flowchart LR\r
Start --> Stop\r
\`\`\`\r
\r
## 4. Super User-Friendly Image Manager\r
\r
1. Click "More" in the top right corner to open the file manager, open a folder and grant authorization\r
2. Take a screenshot (or copy an image file)\r
3. Paste (anywhere here)\r
\r
Yes, it's that simple!!\r
\r
## 5. On the Agenda\r
\r
- Collaborative Office\r
- Sharing\r
- Online Python Execution\r
\r
## 6. About Me and This Project\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: These are footnotes for explaining things!\r
[^2]: This is the second footnote!\r
`;function $t(t,e=1,n){return new Promise((r,a)=>{var o=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;let s;const l=o.open(t,e);l.onsuccess=function(c){s=c.target.result,r(s)},l.onerror=function(c){console.log("æ•°æ®åº“æ‰“å¼€æŠ¥é”™"),a(c)},l.onupgradeneeded=function(c){s=c.target.result,n&&n(s,c)}})}async function jr(){return new Promise((t,e)=>{const n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,r=n.open("cache_DB");r.onsuccess=function(a){const o=a.target.result,s=o.version,l=o.objectStoreNames.contains("data");if(o.close(),l){const c=n.open("cache_DB",s);c.onsuccess=d=>t(d.target.result),c.onerror=d=>e(d)}else{const c=n.open("cache_DB",s+1);c.onupgradeneeded=function(d){const m=d.target.result;m.objectStoreNames.contains("data")||m.createObjectStore("data",{keyPath:"id"})},c.onsuccess=d=>t(d.target.result),c.onerror=d=>e(d)}},r.onerror=function(a){e(a)},r.onupgradeneeded=function(a){const o=a.target.result;o.objectStoreNames.contains("data")||o.createObjectStore("data",{keyPath:"id"})}})}function Ft(t,e,n){return new Promise((r,a)=>{var o=t.transaction([e],"readwrite").objectStore(e).put(n);o.onsuccess=function(){r()},o.onerror=function(s){console.error("æ•°æ®æ›´æ–°å¤±è´¥:",s),a(s)}})}function ei(t,e,n){return new Promise((r,a)=>{const s=t.transaction(e,"readonly").objectStore(e).get(n);s.onerror=function(l){a(l)},s.onsuccess=function(l){r(s.result)}})}function Xt(t,e){return new Promise(n=>{let r=[];const a=t.transaction(e,"readwrite").objectStore(e).openCursor();a.onsuccess=function(o){const s=o.target.result;s?(r.push(s.value),s.continue()):n(r)},a.onerror=function(o){console.error("æ¸¸æ ‡æ“ä½œé”™è¯¯",o)}})}function ti(t,e,n,r){return new Promise(a=>{let o=[];const s=t.transaction(e,"readwrite"),d=s.objectStore(e).index(n).openCursor(IDBKeyRange.only(r));d.onsuccess=function(m){const f=m.target.result;f?(o.push(f.value),f.continue()):a(o)},s.onerror=function(){}})}function Vd(t,e,n){var r=t.transaction([e],"readwrite").objectStore(e).delete(n);r.onsuccess=function(){console.log("æ•°æ®åˆ é™¤æˆåŠŸ")},r.onerror=function(){console.log("æ•°æ®åˆ é™¤å¤±è´¥")}}function ni(t,e,n,r){var a=t.transaction(e,"readwrite").objectStore(e),o=a.index(n).openCursor(IDBKeyRange.only(r));o.onsuccess=function(s){var l=s.target.result,c;l&&(c=l.delete(),c.onerror=function(){console.log("æ¸¸æ ‡åˆ é™¤è¯¥è®°å½•å¤±è´¥")},c.onsuccess=function(){console.log("æ¸¸æ ‡åˆ é™¤è¯¥è®°å½•æˆåŠŸ")},l.continue())},o.onerror=function(s){}}function ri(t){let e=window.indexedDB.deleteDatabase(t);e.onerror=function(n){console.log("åˆ é™¤å¤±è´¥")},e.onsuccess=function(n){console.log("åˆ é™¤æˆåŠŸ")}}async function Jd(t,e,n){try{const r=await fetch(t);if(!r.ok)throw new Error(`ç½‘ç»œè¯·æ±‚å¤±è´¥: ${r.status}`);const a=r.headers.get("Content-Length");a||console.warn("æ— æ³•è·å– Content-Lengthï¼Œæ— æ³•è®¡ç®—ä¸‹è½½è¿›åº¦");const o=r.body?.getReader();if(!o)throw new Error("è¯»å–æµå¤±è´¥");let s=0;const l=[],c=a?parseInt(a,10):0;for(;;){const{done:C,value:h}=await o.read();if(C)break;if(l.push(h),s+=h.length,c&&n){const p=Math.round(s/c*100);n(p)}}const d=new Uint8Array(s);let m=0;for(const C of l)d.set(C,m),m+=C.length;const f=JSON.parse(new TextDecoder("utf-8").decode(d)),w=await jr();await Ft(w,"data",{id:e,data:f}),n&&n(100),console.log("JSONæ•°æ®å·²æˆåŠŸå­˜å…¥ IndexedDB")}catch(r){console.error("è·å–æˆ–å­˜å‚¨ JSON æ•°æ®æ—¶å‡ºé”™:",r),n&&n(-1)}}async function ai(t){try{const e=await jr(),n=await ei(e,"data",t);return n?n.data:null}catch{return null}}let Ze=null,oi=0;const ii=()=>(Ze||(Ze=document.createElement("div"),Ze.className="mui-alert-wrapper",Ze.style.cssText=`
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    `,document.body.appendChild(Ze)),Ze),qr=()=>{const t=ge()==="dark",e={light:{backgroundColor:"#ffffff",borderColor:"#d9d9d9",textColor:"#000000d9",shadowColor:"rgba(0,0,0,.12)"},dark:{backgroundColor:"#2f2f2f",borderColor:"#424242",textColor:"#ffffffd9",shadowColor:"rgba(0,0,0,.25)"}},n=t?"dark":"light";return{...e,current:n,currentColors:e[n]}},si=t=>{const e=qr(),n=e.currentColors,r={minWidth:"160px",maxWidth:"400px",width:"fit-content",border:"1px solid",borderRadius:"6px",boxShadow:`0 3px 6px -4px ${n.shadowColor}, 0 6px 16px 0 ${n.shadowColor}, 0 9px 28px 8px ${n.shadowColor}`,fontSize:"14px",fontWeight:400,padding:"10px 16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",pointerEvents:"auto",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',lineHeight:"1.5715",backgroundColor:n.backgroundColor,borderColor:n.borderColor,color:n.textColor},a={success:e.current==="dark"?"#52c41a40":"#ffffff",error:e.current==="dark"?"#ff4d4f40":"#ffffff",warning:e.current==="dark"?"#faad1440":"#ffffff",info:e.current==="dark"?"#1890ff40":"#ffffff"};return{...r,borderColor:a[t]}},li=t=>{const e=document.createElement("span");e.style.cssText=`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    margin-right: 6px;
    flex-shrink: 0;
  `;const n={success:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 6.1L7.1 10.4c-.2.2-.4.3-.7.3s-.5-.1-.7-.3L3.5 8.2c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L6.4 8.3l3.7-3.7c.4-.4 1-.4 1.4 0s.4 1 0 1.5z"/>
      </svg>`,color:"#52c41a"},error:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3s-.5-.1-.7-.3L8 9.4l-2.1 2.1c-.2.2-.4.3-.7.3s-.5-.1-.7-.3c-.4-.4-.4-1 0-1.4L6.6 8 4.5 5.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L8 6.6l2.1-2.1c.4-.4 1-.4 1.4 0s.4 1 0 1.4L9.4 8l2.1 2.1z"/>
      </svg>`,color:"#ff4d4f"},warning:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8.7.1c-.4-.2-.9-.2-1.3 0-.2.1-.4.2-.5.4L.2 13.2c-.2.4-.2.8 0 1.2.1.2.3.3.5.4.2.1.4.1.6.1h13.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.4.2-.4.2-.8 0-1.2L8.2.5c-.1-.2-.3-.3-.5-.4zM9 12H7v-2h2v2zm0-3H7V5h2v4z"/>
      </svg>`,color:"#faad14"},info:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm1 12H7V7h2v5zm0-6H7V4h2v2z"/>
      </svg>`,color:"#1890ff"}},r=n[t]||n.success;return e.innerHTML=r.html,e.style.color=r.color,e},ci=()=>{const e=qr().current==="dark",n=document.createElement("span");return n.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
    <path d="M6.8 6l4.6-4.6c.2-.2.2-.5 0-.7s-.5-.2-.7 0L6 5.3 1.4.7c-.2-.2-.5-.2-.7 0s-.2.5 0 .7L5.3 6 .7 10.6c-.2.2-.2.5 0 .7.1.1.2.1.4.1s.3 0 .4-.1L6 6.8l4.6 4.6c.1.1.2.1.4.1s.3 0 .4-.1c.2-.2.2-.5 0-.7L6.8 6z"/>
  </svg>`,n.style.cssText=`
    margin-left: auto;
    cursor: pointer;
    opacity: 0.45;
    padding: 4px;
    border-radius: 2px;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    color: ${e?"#ffffff73":"#00000073"};
  `,n.addEventListener("mouseenter",()=>{n.style.opacity="0.75"}),n.addEventListener("mouseleave",()=>{n.style.opacity="0.45"}),n},di=(t,e,n)=>{const r=n?.zIndex??9999,a=n?.kind??"success",o=e??2500,l={success:"success",error:"error",warning:"warning",info:"info"}[a]||"success",c=ii();c.style.zIndex=String(r);const d=document.createElement("div");d.className="mui-alert-item",d.setAttribute("data-alert-id",String(++oi));const m=si(l);Object.assign(d.style,m);const f=li(l),w=document.createElement("span");w.textContent=t,w.style.cssText=`
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
    text-align: left;
  `;const C=ci();d.appendChild(f),d.appendChild(w),d.appendChild(C),c.appendChild(d),Gt.fromTo(d,{y:-30,opacity:0,scale:.9},{duration:.3,y:0,opacity:1,scale:1,ease:"back.out(1.2)"});const h=()=>{Gt.to(d,{duration:.25,y:-20,opacity:0,scale:.9,ease:"power2.in",onComplete:()=>{d.parentNode&&(c.removeChild(d),c.children.length===0&&(document.body.removeChild(c),Ze=null))}})};C.addEventListener("click",p=>{p.stopPropagation(),h()}),o>0&&setTimeout(h,o)},R=(t,e,n)=>{di(t,e,n)};function mi(){try{if(!window.indexedDB)return!1;const t=window.indexedDB.open("test-support-check");return t.onerror=()=>!1,!0}catch{return!1}}let cr=!1,fn=!1;function Kr(){if(!cr&&(fn=mi(),cr=!0,!fn)){const t=nt.t,e=t?t("indexeddb-not-supported","æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæˆ–ç¦ç”¨äº†IndexedDBï¼Œæ•°æ®å°†æ— æ³•æœ¬åœ°ä¿å­˜"):"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæˆ–ç¦ç”¨äº†IndexedDBï¼Œæ•°æ®å°†æ— æ³•æœ¬åœ°ä¿å­˜";R(e,5e3,{kind:"error"}),console.error("IndexedDB ä¸è¢«æ”¯æŒï¼Œæ•°æ®æŒä¹…åŒ–åŠŸèƒ½å°†ä¸å¯ç”¨")}return fn}const Oe={name:"md_content",version:2,stores:{users_md:{keyPath:"uuid"},users_img:{keyPath:"uuid",index:{name:"uuid",unique:!1}}}};async function Ur(){try{const t=await $t(Oe.name,Oe.version,(o,s)=>{Mn(o,s)}),e=Array.from(t.objectStoreNames),r=Object.keys(Oe.stores).filter(o=>!e.includes(o));if(r.length===0)return t;console.warn(`æ•°æ®åº“è¡¨ç»“æ„ä¸å®Œæ•´ï¼Œç¼ºå¤±: ${r.join(", ")}`),R("æ£€æµ‹åˆ°æ•°æ®åº“è¡¨ç¼ºå¤±ï¼Œæ­£åœ¨é‡å»ºæ•°æ®åº“...",3e3,{kind:"warning"}),t.close(),await ui();const a=await $t(Oe.name,Oe.version,(o,s)=>{Mn(o,s)});return R("æ•°æ®åº“é‡å»ºæˆåŠŸ",2e3,{kind:"success"}),a}catch(t){throw console.error("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥:",t),R("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Œæ•°æ®å¯èƒ½æ— æ³•ä¿å­˜",4e3,{kind:"error"}),t}}async function ui(){const t=await gi();return new Promise((e,n)=>{console.log("å¼€å§‹åˆ é™¤æŸåçš„æ•°æ®åº“..."),t.hasData?R("æ£€æµ‹åˆ°ç°æœ‰æ•°æ®ï¼Œå°†å°è¯•åœ¨é‡å»ºåæ¢å¤",3e3,{kind:"info"}):R("é‡å»ºæ•°æ®åº“å¯èƒ½ä¼šä¸¢å¤±ç°æœ‰æ•°æ®",3e3,{kind:"warning"});const r=window.indexedDB.deleteDatabase(Oe.name);r.onsuccess=async()=>{if(console.log("âœ“ æ•°æ®åº“åˆ é™¤æˆåŠŸï¼Œç°åœ¨å¯ä»¥é‡æ–°åˆ›å»º"),t.hasData)try{await fi(t),console.log("âœ“ æ•°æ®æ¢å¤æˆåŠŸ")}catch(a){console.warn("æ•°æ®æ¢å¤å¤±è´¥ï¼Œä½†æ•°æ®åº“é‡å»ºæˆåŠŸ:",a)}e()},r.onerror=a=>{console.error("âœ— æ•°æ®åº“åˆ é™¤å¤±è´¥:",a),n(new Error("æ•°æ®åº“åˆ é™¤å¤±è´¥"))},r.onblocked=()=>{console.warn("æ•°æ®åº“åˆ é™¤è¢«é˜»å¡ï¼Œå¯èƒ½æœ‰å…¶ä»–è¿æ¥æœªå…³é—­"),setTimeout(()=>{e()},1e3)}})}async function gi(){try{const t=await $t(Oe.name),e={hasData:!1};if(t.objectStoreNames.contains("users_md"))try{const n=await Xt(t,"users_md");n&&n.length>0&&(e.textData=n,e.hasData=!0)}catch(n){console.warn("æ–‡æœ¬æ•°æ®å¤‡ä»½å¤±è´¥:",n)}if(t.objectStoreNames.contains("users_img"))try{const n=await Xt(t,"users_img");n&&n.length>0&&(e.imageData=n,e.hasData=!0)}catch(n){console.warn("å›¾ç‰‡æ•°æ®å¤‡ä»½å¤±è´¥:",n)}return t.close(),e}catch(t){return console.warn("æ•°æ®å¤‡ä»½è¿‡ç¨‹å¤±è´¥:",t),{hasData:!1}}}async function fi(t){if(!t.hasData)return;const e=await $t(Oe.name,Oe.version,(n,r)=>{Mn(n,r)});try{if(t.textData){for(const n of t.textData)await Ft(e,"users_md",n);console.log(`âœ“ æ¢å¤äº† ${t.textData.length} æ¡æ–‡æœ¬æ•°æ®`)}if(t.imageData){for(const n of t.imageData)await Ft(e,"users_img",n);console.log(`âœ“ æ¢å¤äº† ${t.imageData.length} æ¡å›¾ç‰‡æ•°æ®`)}R("æ•°æ®æ¢å¤æˆåŠŸ",2e3,{kind:"success"})}catch(n){console.error("æ•°æ®æ¢å¤å¤±è´¥:",n),R("æ•°æ®åº“é‡å»ºæˆåŠŸï¼Œä½†æ•°æ®æ¢å¤å¤±è´¥",3e3,{kind:"warning"})}finally{e.close()}}function Mn(t,e){console.log(`æ•°æ®åº“å‡çº§ä¸­... ä» v${e.oldVersion} -> v${e.newVersion}`);for(const[n,r]of Object.entries(Oe.stores))if(t.objectStoreNames.contains(n))console.log(`âœ“ è¡¨ ${n} å·²å­˜åœ¨`);else try{const a=t.createObjectStore(n,{keyPath:r.keyPath});r.index&&a.createIndex(r.index.name,r.index.name,{unique:r.index.unique}),console.log(`âœ“ æˆåŠŸåˆ›å»º/ä¿®å¤è¡¨: ${n}`)}catch(a){console.error(`âœ— åˆ›å»º/ä¿®å¤è¡¨ ${n} å¤±è´¥:`,a)}}async function _t(t,e,n="æ•°æ®åº“æ“ä½œ"){if(!Kr())return e;let r=null;try{return r=await Ur(),await t(r)}catch(a){console.error(`[${n}] å¤±è´¥:`,a);const o=a.message||"";return o.includes("quota")||o.includes("storage")?R("å­˜å‚¨ç©ºé—´ä¸è¶³ï¼Œè¯·æ¸…ç†æµè§ˆå™¨æ•°æ®åé‡è¯•",4e3,{kind:"error"}):o.includes("è¡¨")||o.includes("store")?R(`æ•°æ®åº“è¡¨å¼‚å¸¸ï¼š${n}å¤±è´¥`,3500,{kind:"error"}):R(`${n}å¤±è´¥ï¼Œè¯·åˆ·æ–°æˆ–ç¨åé‡è¯•`,3e3,{kind:"warning"}),e}finally{r&&r.close()}}async function pi(t){await _t(async e=>{await Ft(e,"users_md",{uuid:1,contentText:t}),console.log("æ–‡æœ¬æ•°æ®ä¿å­˜æˆåŠŸ")},void 0,"ä¿å­˜æ–‡æœ¬")}async function Vr(){return _t(async t=>{const e=await Xt(t,"users_md");return Array.isArray(e)?e:[]},[],"è¯»å–æ–‡æœ¬")}async function hi(t,e){await _t(async n=>{const r=t.map((a,o)=>Ft(n,"users_img",{uuid:e+o,imgBase64:a}));await Promise.all(r),console.log("æ‰¹é‡å›¾ç‰‡æ•°æ®ä¿å­˜æˆåŠŸ")},void 0,"æ‰¹é‡ä¿å­˜å›¾ç‰‡")}async function yi(t,e){return _t(async n=>{const r=await ti(n,"users_img",t,e);return Array.isArray(r)?r:[]},[],"è¯»å–å›¾ç‰‡")}async function wi(){return _t(async t=>{const e=await Xt(t,"users_img");return Array.isArray(e)?e:[]},[],"è¯»å–æ‰€æœ‰å›¾ç‰‡")}async function bi(){if(console.log("æ­£åœ¨åˆå§‹åŒ–å’Œæ£€æŸ¥ Memory æ•°æ®åº“..."),!Kr()){console.warn("âš  IndexedDB ä¸æ”¯æŒï¼Œåº”ç”¨å°†åœ¨æ— æ•°æ®åº“æ¨¡å¼ä¸‹è¿è¡Œ");return}let t=null;try{t=await Ur(),console.log(`âœ“ Memory æ•°æ®åº“å·²å°±ç»ª (ç‰ˆæœ¬: ${t.version})`)}catch(e){console.error("âœ— Memory æ•°æ®åº“åˆå§‹åŒ–æœ€ç»ˆå¤±è´¥:",e),R("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Œæ•°æ®å°†æ— æ³•ä¿å­˜",5e3,{kind:"error"})}finally{t&&t.close()}}function xi(){return new Promise(t=>{Vr().then(e=>{if(e.length&&e[0].contentText)window.editor.setValue(e[0].contentText),t();else{const r=(ye().basic.language||"zh")==="en"?Zo:Qo;window.editor.setValue(r),t()}})})}function Pt(){return window.editor?.getValue?window.editor.getValue():"null"}function Ci(t){return t=t.replace(/\|---\|/g,'<div style="page-break-after: always;"></div>'),t}class mt{static instance;counter=0;baseTimestamp;constructor(){this.baseTimestamp=Date.now()}static getInstance(){return mt.instance||(mt.instance=new mt),mt.instance}generateId(e,n=!1){const r=e.replace(/[\/\\]/g,"_").replace(/[^a-zA-Z0-9_-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"root";this.counter++;const a=Math.floor(Math.random()*1e4),o=n?".lazy":"";return`${r}_${this.baseTimestamp}_${this.counter}_${a}${o}`}}const Et=mt.getInstance(),Jr=["md","txt","go","java","kt","py","js","ts","html","css","c","cpp","json","mjs","jsx","tsx","ps1","cmd","xsl","toml","ipynb","makefile","yml"],dr=Jr.map(t=>`.${t}`),ln=["jpg","jpeg","png","gif","bmp","webp","svg","fig"];class Le{static fileState=0;static fileHandle=null;static topDirectoryArray=[]}class Gr extends Le{constructor(e){super()}get fileState(){return Le.fileState}set fileState(e){Le.fileState=e}get fileHandle(){return Le.fileHandle}set fileHandle(e){Le.fileHandle=e}async openSingleFile(){try{return[this.fileHandle]=await window.showOpenFilePicker({multiple:!1,types:[{description:"Text Files",accept:{"text/plain":dr}}]}),this.fileState=0,this.fileHandle}catch(e){return console.error("Error opening file:",e),null}}async readFile(e){return this.fileHandle?await(await this.fileHandle.getFile()).text():void 0}async saveFileSilently(e){if(!this.fileHandle)return;const n=await this.fileHandle.createWritable(),r=e;return await n.write(r),await n.close(),!0}async saveAsFile(e){try{const r=await(await window.showSaveFilePicker({suggestedName:"text",types:[{description:"Text Files",accept:{"text/plain":dr}}]})).createWritable();await r.write(e??"Sth.."),await r.close(),console.log("File saved successfully as new file.")}catch(n){console.error("Save As operation cancelled or failed:",n)}}}class Xe extends Le{static topDirectoryHandle;currentDirectoryHandle;isWatching=!1;watchInterval=null;lastLazyLoadTime=0;constructor(e){super()}get topDirectoryArray(){return Le.topDirectoryArray}set topDirectoryArray(e){Le.topDirectoryArray=e}get fileState(){return Le.fileState}set fileState(e){Le.fileState=e}get fileHandle(){return Le.fileHandle}set fileHandle(e){Le.fileHandle=e}getTopDirectoryHandle(){return Xe.topDirectoryHandle}getCurrentDirectoryHandle(){return this.currentDirectoryHandle}async openDirectory(){try{const e=await window.showDirectoryPicker();return Xe.topDirectoryHandle=e,this.fileState=1,this.currentDirectoryHandle=e,e}catch(e){return console.error("Error opening directory:",e),null}}async readDirectoryAsArray(e,n=!1){async function r(s,l){const c=s.name,d=l?`${l}/${c}`:c,m=Et.generateId(d);if(s.kind==="file")return{id:m,label:c,fileType:"file",path:d};if(s.kind==="directory"){const f=[],w=[];for await(const[h,p]of s.entries())w.push([h,p]);w.sort((h,p)=>h[0].localeCompare(p[0]));for(const[h,p]of w){const x=await r(p,d);f.push(x)}let C={id:m,label:c,children:f,fileType:"folder",path:d};return n&&(Le.topDirectoryArray=[C]),C}}const a=[],o=[];for await(const[s,l]of e.entries())o.push([s,l]);o.sort((s,l)=>s[0].localeCompare(l[0]));for(let s=0;s<o.length;s++){const[l,c]=o[s],d=await r(c,"");a.push(d)}return a}async readDirectoryAsArrayOptimized(e,n=!1,r=0,a=0){async function o(s,l,c){const d=s.name,m=l?`${l}/${d}`:d,f=Et.generateId(m);if(s.kind==="file")return{id:f,label:d,fileType:"file",path:m};if(s.kind==="directory"){let w=[];if(r===0||c<r)try{const h=[],p=s.entries(),x=[],D=50;let v=[];for await(const S of p)if(h.push(S),h.length>=D)break;h.sort((S,P)=>S[0].localeCompare(P[0]));const z=10,A=[];for(let S=0;S<h.length;S++){const[P,W]=h[S];if(A.push(o(W,m,c+1)),A.length>=z){const $=await Promise.all(A);w.push(...$),A.length=0}}if(A.length>0){const S=await Promise.all(A);w.push(...S)}}catch(h){console.error(`Error reading directory ${m}:`,h)}else{const h=Et.generateId(`${m}/[lazy-placeholder]`,!0);w.push({id:h,label:"...",fileType:"lazy-placeholder",path:`${m}/[lazy-placeholder]`})}let C={id:f,label:d,children:w,fileType:"folder",path:m};return n&&(Le.topDirectoryArray=[C]),C}return null}try{const s=[],l=[];for await(const[m,f]of e.entries())l.push([m,f]);l.sort((m,f)=>m[0].localeCompare(f[0]));const c=15,d=[];for(let m=0;m<l.length;m++){const[f,w]=l[m];if(d.push(o(w,"",a)),d.length>=c){const C=await Promise.all(d);s.push(...C),d.length=0}}if(d.length>0){const m=await Promise.all(d);s.push(...m)}return s}catch(s){return console.error("Error in readDirectoryAsArrayOptimized:",s),await this.readDirectoryAsArray(e,n)}}async loadFolderLazily(e,n){try{this.lastLazyLoadTime=Date.now();const r=await this.getDirectoryHandleByPath(e,n);return await this.readDirectoryAsArrayLazilyWithPath(r,n,1)}catch(r){return console.error("Error loading folder lazily:",r),[]}}async readDirectoryAsArrayLazilyWithPath(e,n,r=1){try{async function a(l,c){const d=l.name,m=c?`${c}/${d}`:d,f=n?`${n}/${m}`:m,w=Et.generateId(f);if(l.kind==="file")return{id:w,label:d,fileType:"file",path:f};if(l.kind==="directory"){const C=Et.generateId(`${f}/[lazy-placeholder]`,!0);return{id:w,label:d,fileType:"folder",path:f,children:[{id:C,label:"...",fileType:"lazy-placeholder",path:`${f}/[lazy-placeholder]`}]}}}const o=[],s=[];for await(const[l,c]of e.entries())s.push([l,c]);s.sort((l,c)=>l[0].localeCompare(c[0]));for(const[l,c]of s){const d=await a(c,"");o.push(d)}return o}catch(a){return console.error("Error in readDirectoryAsArrayLazilyWithPath:",a),[]}}async listDirectoryAsObject(e){let n={};for await(const[r,a]of e.entries())a.kind==="file"?n[r]="file":a.kind==="directory"&&(n[r]=await this.listDirectoryAsObject(a));return n}async readFileContent(e,n,r=!1){console.log("readFileContent called with filePath:",n);const a=decodeURIComponent(n);console.log("decodedFilePath:",a);const o=a.split("/");console.log("pathParts:",o);let s=e;for(let f=0;f<o.length-1;f++){const w=o[f];w&&(console.log("Navigating to directory:",w),s=await s.getDirectoryHandle(w))}const l=o[o.length-1];console.log("Getting file:",l),console.log("Current directory contents:");try{for await(const[f,w]of s.entries())console.log("  -",f,w.kind)}catch(f){console.error("Error listing directory contents:",f)}const c=l.split(".").pop()?.toLowerCase();if(!c)throw new Error("æ— æ³•è¯†åˆ«æ–‡ä»¶æ‰©å±•åã€‚");console.log("Attempting to get file handle for:",l);const d=await s.getFileHandle(l);if(r){if(!(ln.includes(c)||c==="pdf"))throw R(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºå¯è¯»æ–‡ä»¶ã€‚`,1e3,{kind:"error"}),new Error(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºå¯è¯»æ–‡ä»¶ã€‚`)}else{if(!Jr.includes(c))throw R(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚`,1e3,{kind:"error"}),new Error(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚`);this.fileHandle=d}const m=await d.getFile();if(r){const f=await m.arrayBuffer();return await this.arrayBufferToBase64(f,m.type)}else return await m.text()}async checkOrCreateNestedDirectory(e,n){try{const r=n.split("/").filter(Boolean);let a=e;for(const o of r)a=await a.getDirectoryHandle(o,{create:!0});return this.currentDirectoryHandle=a,a}catch(r){throw console.error("Error creating nested directory:",r),r}}async renameFolder(e,n,r){try{const a=await e.getDirectoryHandle(n),o=await e.getDirectoryHandle(r,{create:!0});for await(const s of a.values())if(s.kind==="file"){const l=await s.getFile(),d=await(await o.getFileHandle(s.name,{create:!0})).createWritable();await d.write(l),await d.close()}else s.kind==="directory"&&await this.copyDirectory(s,o);await e.removeEntry(n,{recursive:!0}),console.log(`Renamed folder from ${n} to ${r}`)}catch(a){console.error("Error renaming folder:",a)}}async writeFile(e,n,r){try{const o=await(await e.getFileHandle(n,{create:!0})).createWritable();await o.write(r),await o.close()}catch(a){throw console.error(`Error writing file ${n}:`,a),a}}async writeBase64ImageFile(e,n,r,a="/images"){try{const o=await this.checkOrCreateNestedDirectory(e,a);let s=0,l=0;for await(const w of o.values())if(w.kind==="file"){const C=w.name.match(/^(\d+)\.png$/);if(C){const h=parseInt(C[1],10);h>s&&(s=h)}}l=s+1;const c=r.split(",")[1],d=atob(c),m=new Uint8Array(d.length);for(let w=0;w<d.length;w++)m[w]=d.charCodeAt(w);const f=new Blob([m],{type:"image/png"});return await this.writeFile(o,l+n,f),l}catch(o){throw console.error("Error writing Base64 image file:",o),o}}async watchDirectory(e,n=1e3){this.isWatching||(this.isWatching=!0,this.watchInterval=setInterval(e,n))}stopWatching(){this.isWatching&&this.watchInterval&&(clearInterval(this.watchInterval),this.isWatching=!1,this.watchInterval=null)}async arrayBufferToBase64(e,n){return new Promise((r,a)=>{const o=new Blob([e],{type:n}),s=new FileReader;s.onloadend=()=>{const l=s.result;r(l)},s.onerror=l=>{a(l)},s.readAsDataURL(o)})}async copyDirectory(e,n){const r=await n.getDirectoryHandle(e.name,{create:!0});for await(const a of e.values())if(a.kind==="file"){const o=await a.getFile(),l=await(await r.getFileHandle(a.name,{create:!0})).createWritable();await l.write(o),await l.close()}else a.kind==="directory"&&await this.copyDirectory(a,r)}async createNewFile(e,n,r=`# New Document

Start writing here...`){try{const a=n.endsWith(".md")?n:`${n}.md`,s=await(await e.getFileHandle(a,{create:!0})).createWritable();await s.write(r),await s.close(),console.log(`Created new file: ${a}`)}catch(a){throw console.error("Error creating new file:",a),a}}async createNewFileAtPath(e,n,r,a=`# New Document

Start writing here...`){try{const o=await this.getDirectoryHandleByPath(e,n);await this.createNewFile(o,r,a)}catch(o){throw console.error("Error creating new file at path:",o),o}}async createNewFolder(e,n){try{const r=await e.getDirectoryHandle(n,{create:!0});return console.log(`Created new folder: ${n}`),r}catch(r){throw console.error("Error creating new folder:",r),r}}async createNewFolderAtPath(e,n,r){try{const a=await this.getDirectoryHandleByPath(e,n);return await this.createNewFolder(a,r)}catch(a){throw console.error("Error creating new folder at path:",a),a}}async getDirectoryHandleByPath(e,n){if(!n||n===""||n==="/")return e;const r=n.split("/").filter(o=>o!=="");let a=e;for(const o of r)a=await a.getDirectoryHandle(o);return a}async getFileHandleByPath(e,n){const r=n.split("/").filter(s=>s!==""),a=r.pop();if(!a)throw new Error("Invalid file path");let o=e;for(const s of r)o=await o.getDirectoryHandle(s);return await o.getFileHandle(a)}async deleteFile(e,n){try{await e.removeEntry(n),console.log(`Deleted file: ${n}`)}catch(r){throw console.error("Error deleting file:",r),r}}async deleteFileAtPath(e,n){try{const r=n.split("/").filter(s=>s!==""),a=r.pop();if(!a)throw new Error("Invalid file path");const o=await this.getDirectoryHandleByPath(e,r.join("/"));await this.deleteFile(o,a)}catch(r){throw console.error("Error deleting file at path:",r),r}}async deleteFolder(e,n){try{await e.removeEntry(n,{recursive:!0}),console.log(`Deleted folder: ${n}`)}catch(r){throw console.error("Error deleting folder:",r),r}}async deleteFolderAtPath(e,n){try{const r=n.split("/").filter(s=>s!==""),a=r.pop();if(!a)throw new Error("Invalid folder path");const o=await this.getDirectoryHandleByPath(e,r.join("/"));await this.deleteFolder(o,a)}catch(r){throw console.error("Error deleting folder at path:",r),r}}async renameFile(e,n,r){try{const o=await(await e.getFileHandle(n)).getFile(),l=await(await e.getFileHandle(r,{create:!0})).createWritable();await l.write(o),await l.close(),await e.removeEntry(n),console.log(`Renamed file from ${n} to ${r}`)}catch(a){throw console.error("Error renaming file:",a),a}}async renameFileAtPath(e,n,r){try{const a=n.split("/").filter(l=>l!==""),o=a.pop();if(!o)throw new Error("Invalid file path");const s=await this.getDirectoryHandleByPath(e,a.join("/"));await this.renameFile(s,o,r)}catch(a){throw console.error("Error renaming file at path:",a),a}}async renameFolderAtPath(e,n,r){try{const a=n.split("/").filter(l=>l!==""),o=a.pop();if(!o)throw new Error("Invalid folder path");const s=await this.getDirectoryHandleByPath(e,a.join("/"));await this.renameFolder(s,o,r)}catch(a){throw console.error("Error renaming folder at path:",a),a}}async moveFile(e,n,r){try{const o=await(await e.getFileHandle(r)).getFile(),{files:s}=await this.listDirectoryEntries(n),l=this.generateUniqueFileName(s,r),d=await(await n.getFileHandle(l,{create:!0})).createWritable();return await d.write(o),await d.close(),await e.removeEntry(r),console.log(`Moved file ${r} to target directory as ${l}`),l}catch(a){throw console.error("Error moving file:",a),a}}async moveFileByPath(e,n,r){try{const a=n.split("/").filter(d=>d!==""),o=a.pop();if(!o)throw new Error("Invalid source file path");const s=await this.getDirectoryHandleByPath(e,a.join("/")),l=await this.getDirectoryHandleByPath(e,r);return await this.moveFile(s,l,o)}catch(a){throw console.error("Error moving file by path:",a),a}}async moveFolder(e,n,r){try{const a=n.split("/").filter(w=>w!==""),o=a.pop();if(!o)throw new Error("Invalid source folder path");const s=await this.getDirectoryHandleByPath(e,a.join("/")),l=await s.getDirectoryHandle(o),c=await this.getDirectoryHandleByPath(e,r),{folders:d}=await this.listDirectoryEntries(c),m=this.generateUniqueFolderName(d,o),f=await c.getDirectoryHandle(m,{create:!0});return await this.copyDirectoryContents(l,f),await s.removeEntry(o,{recursive:!0}),console.log(`Moved folder ${o} to ${r} as ${m}`),m}catch(a){throw console.error("Error moving folder:",a),a}}async copyDirectoryContents(e,n){for await(const r of e.values())if(r.kind==="file"){const o=await r.getFile(),l=await(await n.getFileHandle(r.name,{create:!0})).createWritable();await l.write(o),await l.close()}else if(r.kind==="directory"){const a=r,o=await n.getDirectoryHandle(r.name,{create:!0});await this.copyDirectoryContents(a,o)}}async isDirectoryEmpty(e){try{for await(const n of e.values())return!1;return!0}catch(n){return console.error("Error checking if directory is empty:",n),!1}}async listDirectoryEntries(e){try{const n=[],r=[];for await(const[a,o]of e.entries())o.kind==="file"?n.push(a):o.kind==="directory"&&r.push(a);return{files:n,folders:r}}catch(n){return console.error("Error listing directory entries:",n),{files:[],folders:[]}}}generateUniqueFileName(e,n){if(!e.includes(n))return n;const r=n.lastIndexOf("."),a=r>0?n.substring(0,r):n,o=r>0?n.substring(r):"";let s=2,l;do l=`${a} (${s})${o}`,s++;while(e.includes(l)&&s<1e3);return l}generateUniqueFolderName(e,n){if(!e.includes(n))return n;let r=2,a;do a=`${n} (${r})`,r++;while(e.includes(a)&&r<1e3);return a}}const ki=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,pn=(await ve("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default;class ut{static instance;cache=new Map;maxCacheSize=50;hits=0;misses=0;static getInstance(){return ut.instance||(ut.instance=new ut),ut.instance}simpleHash(e){let n=0;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);n=(n<<5)-n+a,n=n&n}return Math.abs(n).toString(36)}get(e){const n=this.simpleHash(e),r=this.cache.get(n)||null;return r?this.hits++:this.misses++,r}set(e,n){const r=this.simpleHash(e);if(this.cache.size>=this.maxCacheSize){const a=this.cache.keys().next().value;a&&this.cache.delete(a)}this.cache.set(r,n)}clear(){this.cache.clear(),this.hits=0,this.misses=0}getStats(){const e=this.hits+this.misses,n=e>0?(this.hits/e*100).toFixed(1):"0.0";return{size:this.cache.size,maxSize:this.maxCacheSize,hits:this.hits,misses:this.misses,hitRate:`${n}%`}}}const hn=ut.getInstance();class gt{static instance;cache=new Map;maxCacheSize=100;hits=0;misses=0;static getInstance(){return gt.instance||(gt.instance=new gt),gt.instance}get(e){const n=this.cache.get(e)||null;return n?this.hits++:this.misses++,n}set(e,n){if(this.cache.size>=this.maxCacheSize){const r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear(),this.hits=0,this.misses=0}getStats(){const e=this.hits+this.misses,n=e>0?(this.hits/e*100).toFixed(1):"0.0";return{size:this.cache.size,maxSize:this.maxCacheSize,hits:this.hits,misses:this.misses,hitRate:`${n}%`}}}const St=gt.getInstance();async function vi(t){async function e(C){let h=C.content;const p=hn.get(h);if(p)return p;let x;try{await pn.parse(h,{suppressErrors:!1}),await pn.parse(h,{suppressErrors:!0})&&(x=await pn.render(`_mermaidSvg_${ki.getUUID().slice(0,5)}`,h));const D=x.svg;return hn.set(h,D),D}catch{const v='<pre class="ERR">Mermaid æ¸²æŸ“å¤±è´¥</pre>';return hn.set(h,v),v}}async function n(C){try{const h=decodeURIComponent(C.content.slice(2)),p=new Xe;return p.getTopDirectoryHandle()?`${await p.readFileContent(p.getTopDirectoryHandle(),h,!0)}`:'<div class="ERR">PDF è¯»å–å¤±è´¥ï¼šè¯·å…ˆæ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹</div>'}catch{return'<div class="ERR">PDF è¯»å–å¤±è´¥ï¼šæ–‡ä»¶ä¸å­˜åœ¨æˆ–è·¯å¾„é”™è¯¯</div>'}}async function r(C){let h=C.attrGet("src");if(!h.startsWith("/vf/")){const p=St.get(h);if(p)return p}if(h.startsWith("/vf/")){let p=h.match(/\d+/)?.[0];return p?await yi("uuid",parseInt(p)).then(x=>{if(x&&x.length>0&&x[0]&&x[0].imgBase64)return x[0].imgBase64}).catch(()=>{}):void 0}else if(h.startsWith("./"))try{const p=new Xe;if(p.getTopDirectoryHandle()){const x=await p.readFileContent(p.getTopDirectoryHandle(),decodeURIComponent(h).slice(2),!0);return x&&St.set(h,x),x}else{const v=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="120">
            <rect width="400" height="120" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="4"/>
            <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#d32f2f">Image Error</text>
            <text x="200" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Please check if local folder is opened</text>
            <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">or path is correct</text>
            <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">è¯·æ£€æŸ¥æ˜¯å¦æ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹æˆ–è·¯å¾„æ˜¯å¦æ­£ç¡®</text>
          </svg>`)))}`;return St.set(h,v),v}}catch{const v=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="120">
          <rect width="400" height="120" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="4"/>
          <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#d32f2f">Image Error</text>
          <text x="200" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Please check if local folder is opened</text>
          <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">or path is correct</text>
          <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">è¯·æ£€æŸ¥æ˜¯å¦æ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹æˆ–è·¯å¾„æ˜¯å¦æ­£ç¡®</text>
        </svg>`)))}`;return St.set(h,v),v}else return St.set(h,h),h}let a=[],o=[],s=[],l=[],c=[],d=[],m=[],f=Qt();f.renderer.rules.image=function(C,h){return(C[h].attrGet("src")?.startsWith("/vf/")||C[h].attrGet("src")?.startsWith("./"))&&a.push(C[h]),""},f.renderer.rules.fence=function(C,h,p,x,D){const v=C[h].info;return v==="mermaid"?(o.push(C[h]),""):((v==="py"||v==="python")&&l.push(C[h]),"")},f.renderer.rules.import_inline=function(C,h,p,x){return C[h].meta.extension==="pdf"&&s.push(C[h]),""},f.render(t,{});for(const C of a){let h=await r(C);c.push(h)}for(const C of o){let h=await e(C);d.push(h)}for(const C of s){let h=await n(C);m.push(h)}return{vfImgSrcArr:c,vfImgSeq:0,mermaidParsedArr:d,mermaidSeq:0,pdfParsedArr:m,pdfSeq:0}}let Xr=0,An=0;const yn=new Map;function Ei(t,e,n){return`${Xr}-${t}-${e}-${n}`}function Si(t,e,n){const r=Ei(t,e,n);if(!yn.has(r)){An++;const a=`table-${An}`;yn.set(r,a)}return yn.get(r)}function Ti(){Xr++,An=0}function Ii(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36).slice(0,12)}class ft{static instance;standardDataRegistry=new Map;dataChangeListeners=new Map;static getInstance(){return ft.instance||(ft.instance=new ft),ft.instance}createStandardData(e,n,r,a,o){const s=Date.now(),l=this.standardDataRegistry.get(e),c="alignments"in n?n.alignments:void 0,d=n.headers.map((f,w)=>({id:`col_${w}`,title:f||`Column ${w+1}`,type:"text",index:w,align:c?.[w]||"left"}));return{tableId:e,metadata:{startLine:r,endLine:a,tableHash:Ii(JSON.stringify({headers:n.headers,rows:n.rows})),rawMarkdown:o,createdAt:l?.metadata.createdAt||s,updatedAt:s},schema:{headers:d,columnCount:n.headers.length,rowCount:n.rows.length},data:{headers:[...n.headers],rows:n.rows.map(f=>[...f])}}}registerStandardData(e){this.standardDataRegistry.set(e.tableId,e),this.notifyDataChange(e.tableId,e)}getStandardData(e){return this.standardDataRegistry.get(e)||null}updateStandardData(e,n,r="react"){const a=this.standardDataRegistry.get(e);if(!a)return console.warn(`å°è¯•æ›´æ–°ä¸å­˜åœ¨çš„è¡¨æ ¼: ${e}`),!1;const o={...n,alignments:a.schema.headers.map(c=>c.align||"left")},s=Wn(o),l=this.createStandardData(e,o,a.metadata.startLine,a.metadata.endLine,s);return l.metadata.rawMarkdown=s,this.registerStandardData(l),!0}addDataChangeListener(e,n){this.dataChangeListeners.has(e)||this.dataChangeListeners.set(e,new Set),this.dataChangeListeners.get(e).add(n)}removeDataChangeListener(e,n){const r=this.dataChangeListeners.get(e);r&&(r.delete(n),r.size===0&&this.dataChangeListeners.delete(e))}notifyDataChange(e,n){const r=this.dataChangeListeners.get(e);r&&r.forEach(a=>{try{a(n)}catch(o){console.error(`æ ‡å‡†åŒ–æ•°æ®ç›‘å¬å™¨å›è°ƒå‡ºé”™ (${e}):`,o)}})}clearAll(){this.standardDataRegistry.clear(),this.dataChangeListeners.clear()}getAllStandardData(){return new Map(this.standardDataRegistry)}}const He=ft.getInstance(),Yt=new Map;function Di(t){const e=[],n=[],r=[];let a=[],o=!1,s=!1;for(const d of t)switch(d.type){case"thead_open":o=!0;break;case"thead_close":o=!1;break;case"tbody_open":s=!0;break;case"tbody_close":s=!1;break;case"tr_open":a=[];break;case"tr_close":o&&a.length>0?e.push(...a):s&&a.length>0&&n.push([...a]);break;case"th_open":case"td_open":if(o&&d.type==="th_open"){const m=d.attrGet&&d.attrGet("style");m&&m.includes("text-align:center")?r.push("center"):m&&m.includes("text-align:right")?r.push("right"):r.push("left")}break;case"th_close":case"td_close":break;case"inline":if(d.content!==void 0){const m=d.content.trim();a.push(m)}break}const l=Math.max(e.length,...n.map(d=>d.length),1);for(;e.length<l;)e.push("");for(;r.length<l;)r.push("left");return n.forEach(d=>{for(;d.length<l;)d.push("")}),{headers:e,rows:n,alignments:r}}function Wn(t){if(!t.headers.length&&!t.rows.length)return"";let e="";const n="alignments"in t?t.alignments:void 0;if(t.headers.length>0){const a=t.headers.map(s=>s===""?" ":s);e+="| "+a.join(" | ")+` |
`;const o=t.headers.map((s,l)=>{const c=n?.[l]||"left";return c==="center"?":---:":c==="right"?"---:":"---"});e+="| "+o.join(" | ")+` |
`}const r=t.headers.length;for(const a of t.rows){const o=[...a];for(;o.length<r;)o.push("");const s=o.slice(0,r).map(l=>l===""?" ":l);e+="| "+s.join(" | ")+` |
`}return e}function Mi(t){return{headers:[...t.data.headers],rows:t.data.rows.map(e=>[...e])}}function Ai(t,e,n,r,a){return He.createStandardData(t,e,n,r,a)}let Li=function(t){t.core.ruler.after("block","table_to_div",n=>{Ti(),Yt.clear(),He.clearAll();const r=n.tokens;let a=0;for(let o=0;o<r.length;o++)if(r[o].type==="table_open"){let l="left";if(o>0&&r[o-1].type==="html_block"){const m=r[o-1].content.trim().toLowerCase();m==="<center>"&&(l="center"),m==="<right>"&&(l="right")}let c=-1;for(let m=o;m<r.length;m++)if(r[m].type==="table_close"){c=m;break}if(c!==-1&&c+1<r.length&&r[c+1].type==="html_block"){const m=r[c+1].content.trim().toLowerCase();m==="</center>"&&(l="center"),m==="</right>"&&(l="right")}let d=[];for(let m=o;m<r.length;m++)if(d.push(r[m]),r[m].type==="table_close"){c=m;break}if(c!==-1){let m=0,f=0;const w=r[o];w&&w.map&&w.map.length>0&&(m=w.map[0]);const C=r[c];C&&C.map&&C.map.length>1?f=C.map[1]:f=m+3;const h=Si(m,f,a);a++;const p=Di(d),x=2+p.rows.length;(f<=m||f-m<x)&&(f=m+x);const D=Wn(p),v=He.createStandardData(h,p,m,f,D);He.registerStandardData(v);const z={tableId:h,tableHash:v.metadata.tableHash,startLine:m,endLine:f,rawMarkdown:D,data:p};Yt.set(h,z);const A=new n.Token("html_block","",0);A.content=`<div data-react-table data-table-id="${h}" data-table-hash="${v.metadata.tableHash}" data-start-line="${m}" data-end-line="${f}" data-align="${l}" class="react-table-placeholder" style="min-height: 100px; margin: 16px 0;"></div>`,r.splice(o,c-o+1,A)}}});const e=t.renderer.rules.html_block;t.renderer.rules.html_block=function(n,r,a,o,s){const l=n[r].content;if(!/data-react-table/.test(l))return e?e(n,r,a,o,s):l;const c=l.match(/data-table-id="([^"]+)"/)?.[1]??"",d=l.match(/data-table-hash="([^"]+)"/)?.[1]??"",m=l.match(/data-start-line="([^"]+)"/)?.[1]??"",f=l.match(/data-end-line="([^"]+)"/)?.[1]??"",w=l.match(/data-align="([^"]+)"/)?.[1]??"left";return function(){window.IncrementalDOM.elementOpen("div",c,["class","react-table-placeholder","data-react-table","true","data-table-id",c,"data-table-hash",d,"data-start-line",m,"data-end-line",f,"data-align",w,"style","min-height: 100px; margin: 16px 0;"]),window.IncrementalDOM.skip(),window.IncrementalDOM.elementClose("div")}}};const xe={getStandardData:t=>He.getStandardData(t),updateStandardData:(t,e,n="react")=>He.updateStandardData(t,e,n),registerStandardData:t=>He.registerStandardData(t),onDataChange:(t,e)=>He.addDataChangeListener(t,e),offDataChange:(t,e)=>He.removeDataChangeListener(t,e),getAllStandardData:()=>He.getAllStandardData(),standardToTable:Mi,tableToStandard:Ai};let Ve=!1;class pt{static instance;isInternalUpdate=!1;syncCallbacks=new Map;static getInstance(){return pt.instance||(pt.instance=new pt),pt.instance}addStandardDataListener(e,n){this.syncCallbacks.has(e)||this.syncCallbacks.set(e,new Set),this.syncCallbacks.get(e).add(n),xe.onDataChange(e,n)}removeStandardDataListener(e,n){const r=this.syncCallbacks.get(e);r&&(r.delete(n),r.size===0&&this.syncCallbacks.delete(e)),xe.offDataChange(e,n)}notifyStandardDataChange(e,n,r="react"){if(this.isInternalUpdate){console.log(`è·³è¿‡åŒæ­¥æ›´æ–° ${e}ï¼Œæ­£åœ¨è¿›è¡Œå†…éƒ¨æ›´æ–°`);return}this.isInternalUpdate=!0,console.log(`ğŸš€ æ ‡å‡†åŒ–æ•°æ®åŒæ­¥å¼€å§‹: ${e}, source: ${r}`);try{r==="react"?xe.updateStandardData(e,n,r)?(console.log(`âœ… æ ‡å‡†åŒ–æ•°æ®æ›´æ–°æˆåŠŸï¼Œå‡†å¤‡å†™å…¥Monaco: ${e}`),Ri(e,n)||console.error(`âŒ Monacoå†™å…¥å¤±è´¥: ${e}`)):console.warn(`âŒ æ›´æ–°æ ‡å‡†åŒ–æ•°æ®å¤±è´¥: ${e}`):xe.updateStandardData(e,n,r)}finally{setTimeout(()=>{this.isInternalUpdate=!1,console.log(`âœ… åŒæ­¥æ›´æ–°å®Œæˆ: ${e}`)},100)}}isUpdating(){return this.isInternalUpdate}clearTableListeners(e){const n=this.syncCallbacks.get(e);n&&(n.forEach(r=>{xe.offDataChange(e,r)}),this.syncCallbacks.delete(e))}clearAllListeners(){this.syncCallbacks.forEach((e,n)=>{e.forEach(r=>{xe.offDataChange(n,r)})}),this.syncCallbacks.clear()}}const qe=pt.getInstance();class ht{static instance;syncListeners=new Map;isInternalUpdate=!1;static getInstance(){return ht.instance||(ht.instance=new ht),ht.instance}addTableListener(e,n){this.syncListeners.has(e)||this.syncListeners.set(e,new Set),this.syncListeners.get(e).add(n);const r=a=>{const o=xe.standardToTable(a);n(o)};qe.addStandardDataListener(e,r)}removeTableListener(e,n){const r=this.syncListeners.get(e);r&&(r.delete(n),r.size===0&&this.syncListeners.delete(e))}notifyTableDataChange(e,n,r="react"){qe.notifyStandardDataChange(e,n,r)}isUpdating(){return this.isInternalUpdate||qe.isUpdating()}clearTableListeners(e){this.syncListeners.delete(e),qe.clearTableListeners(e)}clearAllListeners(){this.syncListeners.clear(),qe.clearAllListeners()}}const rt=ht.getInstance();function Ri(t,e){Ve=!0;const n=xe.getStandardData(t);if(!n)return console.warn(`Standard table data ${t} not found in registry`),Ve=!1,!1;if(!window.monaco||!window.editor)return console.warn("Monaco editor not available"),Ve=!1,!1;try{const r=Wn(e);console.log(`ç”Ÿæˆæ–°markdownï¼Œè¡Œæ•°: ${r.split(`
`).length}`);const a=window.editor,o=a.getModel();if(!o)return console.warn("Monaco editor model not available"),Ve=!1,!1;const s=n.metadata.startLine,l=n.metadata.endLine,c=o.getLineCount(),d=l-1,m=Math.min(d,c-1),f=s+1,w=m+1,C=new window.monaco.Range(f,1,w,o.getLineMaxColumn(w));console.log(`æ›¿æ¢èŒƒå›´: [${f}:1] åˆ° [${w}:${o.getLineMaxColumn(w)}]`);let h=r.trimEnd();const p=l+1;if(p<=c){const x=o.getLineContent(p);console.log(`æ£€æŸ¥ä¸‹ä¸€è¡Œ ${p}: "${x}"`),x&&x.trim()!==""&&(h+=`
`,console.log(`æ·»åŠ ç©ºè¡Œåˆ†éš”ï¼Œå› ä¸ºä¸‹ä¸€è¡Œæœ‰å†…å®¹: "${x}"`))}return a.executeEdits(`table-edit-${t}`,[{range:C,text:h,forceMoveMarkers:!0}]),setTimeout(()=>{if(a.getModel()){const D=h.split(`
`),z=s+D.length-1+1;console.log(`æ›´æ–°endLine: ${l} -> ${z} (è¡¨æ ¼è¡Œæ•°: ${D.length})`),$i(t,z)}Ve=!1,console.log(`Monacoå†™å…¥å®Œæˆ: ${t}`)},10),!0}catch(r){return console.error("Failed to write standard table",r),Ve=!1,!1}}function $i(t,e){const n=xe.getStandardData(t);if(!n){console.warn(`å°è¯•æ›´æ–°ä¸å­˜åœ¨çš„è¡¨æ ¼å…ƒæ•°æ®: ${t}`);return}const r={...n,metadata:{...n.metadata,endLine:e,updatedAt:Date.now()}};xe.registerStandardData(r)}function Fi(){return Ve}function Pi(t){return xe.getStandardData(t)}function zi(t){const e=xe.getStandardData(t);if(e)return xe.standardToTable(e);const n=Yt.get(t);return n?n.data:null}function _i(t){return Yt.get(t)}function Bi(){if(Ve||qe.isUpdating())return;const t=window.editor;if(!t){console.warn("Monacoç¼–è¾‘å™¨ä¸å¯ç”¨");return}if(!t.getModel()?.getValue()){console.warn("Monacoç¼–è¾‘å™¨å†…å®¹ä¸ºç©º");return}}function Ni(){Bi()}function mr(t,e){var n,r,a=t.posMax,o=!0,s=!0;return n=e>0?t.src.charCodeAt(e-1):-1,r=e+1<=a?t.src.charCodeAt(e+1):-1,(n===32||n===9||r>=48&&r<=57)&&(s=!1),(r===32||r===9)&&(o=!1),{can_open:o,can_close:s}}function Hi(t,e){var n,r,a,o,s;if(t.src[t.pos]!=="$")return!1;if(o=mr(t,t.pos),!o.can_open)return e||(t.pending+="$"),t.pos+=1,!0;for(n=t.pos+1,r=n;(r=t.src.indexOf("$",r))!==-1;){for(s=r-1;t.src[s]==="\\";)s-=1;if((r-s)%2==1)break;r+=1}return r===-1?(e||(t.pending+="$"),t.pos=n,!0):r-n===0||r-n===2?(e||(t.pending+="$$"),t.pos=n+1,!0):(o=mr(t,r),o.can_close?(e||(a=t.push("math_inline","math",0),a.markup="$",a.content=t.src.slice(n,r)),t.pos=r+1,!0):(e||(t.pending+="$"),t.pos=n,!0))}function Oi(t,e,n,r){var a,o,s,l,c=!1,d,m=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(m+2>f||t.src.slice(m,m+2)!=="$$")return!1;if(m+=2,a=t.src.slice(m,f),r)return!0;for(a.trim().slice(-2)==="$$"&&(a=a.trim().slice(0,-2),c=!0),s=e;!c&&(s++,!(s>=n||(m=t.bMarks[s]+t.tShift[s],f=t.eMarks[s],m<f&&t.tShift[s]<t.blkIndent)));)t.src.slice(m,f).trim().slice(-2)==="$$"&&(l=t.src.slice(0,f).lastIndexOf("$$"),o=t.src.slice(m,l),c=!0);return t.line=s+1,d=t.push("math_block","math",0),d.block=!0,d.content=(a&&a.trim()?a+`
`:"")+t.getLines(e+1,s,t.tShift[e],!0)+(o&&o.trim()?o:""),d.map=[e,t.line],d.markup="$$",!0}function Yr(t,e){e=e||{throwOnError:!1,strict:!1};var n=function(s){if(e.displayMode=!1,s)try{return window.katex.renderToString(s,e)}catch{return s}else return"Latex Missing"},r=function(s,l){return n(s[l].content)},a=function(s,l){e.displayMode=!0;let c;if(l.map&&l.level===0&&(c=l.map[0]),s)try{return`<p data-line=${String(c)}>`+window.katex.renderToString(s,e)+"</p>"}catch{return s}else return"LATEX MISSING"},o=function(s,l){return a(s[l].content,s[l])+`
`};t.inline.ruler.after("escape","math_inline",Hi),t.block.ruler.after("blockquote","math_block",Oi,{alt:["paragraph","reference","blockquote","list"]}),t.renderer.rules.math_inline=r,t.renderer.rules.math_block=o}const Wi=(await ve("https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm")).default,ji=({transform:t})=>({...t,x:0}),qi=()=>{const t=ge()==="dark";return{paperBackground:t?"#1e1e1e":"#ffffff",paperBorder:t?"1px solid #808080":"none",cellBackground:t?"#1e1e1e":"#ffffff",cellHoverBackground:t?"#2d2d30":"#f5f5f5",cellSelectedBackground:t?ue("#569cd6",.2):ue("#1976d2",.12),cellActiveBackground:t?ue("#569cd6",.15):ue("#1976d2",.08),cellBorder:t?"#3e3e42":"#e0e0e0",cellText:t?"#d8d8d8ff":"#000000",headerBackground:t?"#1e1e1e":"#f5f5f5",headerText:t?"#cdcdcdff":"#000000",headerHoverBackground:t?"#2d2d30":"#eeeeee",toolbarBackground:t?"#1e1e1e":"transparent",toolbarBorder:t?"#808080":"#e0e0e0",buttonColor:t?"#cccccc":"#1976d2",buttonHoverBackground:t?"#2d2d30":ue("#1976d2",.04),editorBackground:t?"#1e1e1e":"#ffffff",editorBorder:t?"1px solid #569cd6":"1px solid #1976d2",editorFocusBorder:t?"2px solid #569cd6":"2px solid #1976d2",selectedRowBackground:t?ue("#569cd6",.2):ue("#1976d2",.08),selectedRowHoverBackground:t?ue("#569cd6",.25):ue("#1976d2",.12)}},Ki=({rowId:t,rowIndex:e,row:n,isEditMode:r,isSelected:a,lastSelectedIndex:o,editingCell:s,onRowClick:l,renderCellContent:c,setSelectedRows:d,setLastSelectedIndex:m,totalColumns:f,themeStyles:w})=>{const{attributes:C,listeners:h,setNodeRef:p,transform:x,transition:D,isDragging:v}=Ao({id:t}),z={transform:Lo.Transform.toString(x),transition:D,zIndex:v?1e3:"auto",opacity:v?.8:1};return u.createElement(Sn,{ref:p,style:z,key:t,hover:!0,role:r?"checkbox":void 0,"aria-checked":r?a:void 0,tabIndex:-1,selected:r?a:!1,sx:{"&:nth-of-type(even)":{backgroundColor:v?w.cellHoverBackground:w.cellBackground},"&:hover":{backgroundColor:r?ue("#1976d2",.08):w.cellHoverBackground},cursor:r?"pointer":"default"},onClick:A=>{r&&l(A,e)}},r&&u.createElement(At,{padding:"checkbox"},u.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1}},u.createElement(En,{color:"primary",checked:a,onChange:A=>{A.stopPropagation(),a?(d(S=>S.filter(P=>P!==e)),o===e&&m(null)):(d(S=>S.includes(e)?S:[...S,e]),m(e))},inputProps:{"aria-labelledby":`enhanced-table-checkbox-${e}`}}),u.createElement(se,{size:"small",...C,...h,sx:{cursor:"grab",opacity:.6,"&:hover":{opacity:1},"&:active":{cursor:"grabbing"},touchAction:"none"}},u.createElement(Ar,{fontSize:"small"})))),n.map((A,S)=>u.createElement(At,{key:S,sx:{width:`${100/(f+(r?1:0))}%`,minWidth:0,maxWidth:`${100/(f+(r?1:0))}%`,padding:0,"& > *":{width:"100%",maxWidth:"100%"}},onClick:P=>{r&&P.stopPropagation()}},c(A,e,S))))},ur=u.memo(({tableId:t,tableData:e})=>{const[n,r]=i.useState(ge()),a=i.useMemo(()=>qi(),[n]);i.useEffect(()=>{const y=setInterval(()=>{const b=ge();b!==n&&r(b)},100);return()=>clearInterval(y)},[n]);const[o,s]=i.useState({headers:[],rows:[]}),[l,c]=i.useState(null),[d,m]=i.useState(!1),[f,w]=i.useState(null),[C,h]=i.useState({order:"asc",orderBy:""}),[p,x]=i.useState([]),[D,v]=i.useState([]),[z,A]=i.useState(null),S=i.useRef(null),P=i.useMemo(()=>{const g=new Wi({html:!1,linkify:!0,typographer:!1,breaks:!0});return g.use(Yr,{throwOnError:!1,strict:!1}),g.renderer.rules.text,g.renderer.rules.text=function(y,b,k,I,N){let O=y[b].content;return O=O.replace(/~~([^~]+)~~/g,"<del>$1</del>"),O},g},[]),W=Eo(sr($o,{activationConstraint:{distance:8}}),sr(Ro,{activationConstraint:{delay:200,tolerance:5}})),$=i.useCallback((g,y,b)=>{const k=o.headers.indexOf(b);if(k===-1)return 0;const I=g[k]||"",N=y[k]||"",O=parseFloat(I),M=parseFloat(N);return!isNaN(O)&&!isNaN(M)?M-O:N<I?-1:N>I?1:0},[o.headers]),G=i.useCallback((g,y)=>g==="desc"?(b,k)=>$(b,k,y):(b,k)=>-$(b,k,y),[$]),q=i.useMemo(()=>o.rows,[o.rows]),ee=i.useCallback(g=>{if(g.target.checked){const y=o.rows.map((b,k)=>k);v(y),j(y.length>0?y[y.length-1]:null)}else v([]),j(null)},[o.rows]),[Q,j]=i.useState(null),be=i.useCallback((g,y)=>{if(g.ctrlKey||g.metaKey){const b=D.indexOf(y);let k=[];b===-1?k=[...D,y]:b===0?k=D.slice(1):b===D.length-1?k=D.slice(0,-1):b>0&&(k=[...D.slice(0,b),...D.slice(b+1)]),k=Array.from(new Set(k)),v(k),j(y)}else if(g.shiftKey&&Q!==null){const b=Math.min(Q,y),k=Math.max(Q,y),I=Array.from({length:k-b+1},(O,M)=>b+M),N=Array.from(new Set([...D,...I])).sort((O,M)=>O-M);v(N)}else v([y]),j(y)},[D,Q]),te=i.useCallback((g,y)=>p.some(b=>b.rowIndex===g&&b.colIndex===y),[p]),ae=i.useCallback(g=>D.includes(g),[D]),F=i.useCallback((g,y,b)=>{if(g.stopPropagation(),g.ctrlKey||g.metaKey){const k=p.some(I=>I.rowIndex===y&&I.colIndex===b);x(k?I=>I.filter(N=>!(N.rowIndex===y&&N.colIndex===b)):I=>[...I,{rowIndex:y,colIndex:b}])}else if(g.shiftKey&&p.length>0){const k=p[p.length-1],I=Math.min(k.rowIndex,y),N=Math.max(k.rowIndex,y),O=Math.min(k.colIndex,b),M=Math.max(k.colIndex,b),J=[];for(let _=I;_<=N;_++)for(let U=O;U<=M;U++)J.push({rowIndex:_,colIndex:U});const L=[...p,...J].filter((_,U,ne)=>ne.findIndex(ce=>ce.rowIndex===_.rowIndex&&ce.colIndex===_.colIndex)===U);x(L)}else x([{rowIndex:y,colIndex:b}])},[p]),K=i.useMemo(()=>({headers:["Name","Age","City","Email"],rows:[["John Doe","25","New York","john@example.com"],["Alice Brown","28","Paris","alice@example.com"]]}),[]),Y=i.useCallback(g=>{s(g),t&&qe.notifyStandardDataChange(t,g,"react")},[t]),B=i.useCallback(g=>{t&&xe.getStandardData(t)?Y(g):(s(g),t&&rt.notifyTableDataChange(t,g,"react"))},[t,Y]);i.useEffect(()=>{if(!t)return;const g=y=>{const b=xe.standardToTable(y),k=JSON.stringify(o)!==JSON.stringify(b),I=JSON.stringify(f)!==JSON.stringify(y);(k||I)&&(w(y),s(b))};return qe.addStandardDataListener(t,g),()=>{qe.removeStandardDataListener(t,g)}},[t]),i.useEffect(()=>{if(!t)return;const g=y=>{if(xe.getStandardData(t))return;JSON.stringify(o)!==JSON.stringify(y)&&s(y)};return rt.addTableListener(t,g),()=>{rt.removeTableListener(t,g)}},[t,o]),i.useEffect(()=>{let g,y=null;t?(y=Pi(t),y?g=xe.standardToTable(y):g=zi(t)||K):g=e||K;const b=JSON.stringify(o)!==JSON.stringify(g),k=JSON.stringify(f)!==JSON.stringify(y);(b||k)&&(s(g),w(y))},[t,e,K]);const Z=i.useCallback((g,y)=>{const k=g===-1?o.headers[y]||"":o.rows[g]?.[y]||"",I=`${g}-${y}`,O=Me.current.get(I)?.getBoundingClientRect();c({rowIndex:g,colIndex:y,value:k,width:O?.width,height:O?.height})},[o]),Ee=i.useCallback(()=>{if(!l)return;const{rowIndex:g,colIndex:y,value:b}=l;s(k=>{const I={headers:[...k.headers],rows:k.rows.map(N=>[...N])};return g===-1?I.headers[y]=b:(I.rows[g]||(I.rows[g]=new Array(I.headers.length).fill("")),I.rows[g][y]=b),t&&setTimeout(()=>{B(I)},0),I}),c(null),x([]),A(null)},[l,t,B]),De=i.useCallback(()=>{c(null),x([]),A(null)},[]),oe=i.useCallback(()=>{const g={headers:[...o.headers],rows:o.rows.map(k=>[...k])},y=g.headers.length,b=new Array(y).fill("");g.rows.push(b),B(g)},[o,B]);i.useCallback(g=>{const y={headers:[...o.headers],rows:o.rows.map(b=>[...b])};y.rows.splice(g,1),B(y)},[o,B]);const fe=i.useCallback(()=>{const g={headers:[...o.headers],rows:o.rows.map(y=>[...y])};g.headers.push(`Col ${g.headers.length+1}`),g.rows.forEach(y=>{y.push("")}),B(g)},[o,B]),me=i.useCallback(g=>{if(o.headers.length<=1)return;const y={headers:[...o.headers],rows:o.rows.map(b=>[...b])};y.headers.splice(g,1),y.rows.forEach(b=>{b.length>g&&b.splice(g,1)}),B(y)},[o,B]),E=i.useCallback((g,y)=>{const b={bold:{start:"**",end:"**"},italic:{start:"*",end:"*"},strikethrough:{start:"~~",end:"~~"},code:{start:"`",end:"`"}},{start:k,end:I}=b[y];return g.startsWith(k)&&g.endsWith(I)?g.slice(k.length,-I.length):`${k}${g}${I}`},[]),Se=i.useCallback(g=>{if(!(!d||l)){if((g.ctrlKey||g.metaKey)&&g.key.toLowerCase()==="b"){if(g.preventDefault(),p.length===0)return;const y=JSON.parse(JSON.stringify(o));p.forEach(({rowIndex:b,colIndex:k})=>{b===-1?k<y.headers.length&&(y.headers[k]=E(y.headers[k]||"","bold")):b<y.rows.length&&k<y.rows[b].length&&(y.rows[b][k]=E(y.rows[b][k]||"","bold"))}),B(y);return}if((g.ctrlKey||g.metaKey)&&g.key.toLowerCase()==="i"){if(g.preventDefault(),p.length===0)return;const y=JSON.parse(JSON.stringify(o));p.forEach(({rowIndex:b,colIndex:k})=>{b===-1?k<y.headers.length&&(y.headers[k]=E(y.headers[k]||"","italic")):b<y.rows.length&&k<y.rows[b].length&&(y.rows[b][k]=E(y.rows[b][k]||"","italic"))}),B(y);return}if((g.ctrlKey||g.metaKey)&&g.key==="a"){g.preventDefault();const y=o.rows.map((b,k)=>k);v(y);return}if((g.ctrlKey||g.metaKey)&&g.key==="d"){g.preventDefault(),v([]),x([]),j(null);return}if((g.ctrlKey||g.metaKey)&&g.key.toLowerCase()==="c"){if(g.preventDefault(),p.length===0)return;const y=Math.min(...p.map(M=>M.rowIndex)),b=Math.max(...p.map(M=>M.rowIndex)),k=Math.min(...p.map(M=>M.colIndex)),I=Math.max(...p.map(M=>M.colIndex)),N=[];for(let M=y;M<=b;M++){const J=[];for(let H=k;H<=I;H++){const L=p.some(U=>U.rowIndex===M&&U.colIndex===H);let _="";L&&(M===-1?_=o.headers[H]||"":_=o.rows[M]?.[H]||""),J.push(_)}N.push(J.join("	"))}const O=N.join(`
`);navigator.clipboard.writeText(O).catch(M=>{console.warn("å¤åˆ¶åˆ°å‰ªè´´æ¿å¤±è´¥:",M)});return}if((g.ctrlKey||g.metaKey)&&g.key.toLowerCase()==="x"){if(g.preventDefault(),p.length===0)return;const y=Math.min(...p.map(M=>M.rowIndex)),b=Math.max(...p.map(M=>M.rowIndex)),k=Math.min(...p.map(M=>M.colIndex)),I=Math.max(...p.map(M=>M.colIndex)),N=[];for(let M=y;M<=b;M++){const J=[];for(let H=k;H<=I;H++){const L=p.some(U=>U.rowIndex===M&&U.colIndex===H);let _="";L&&(M===-1?_=o.headers[H]||"":_=o.rows[M]?.[H]||""),J.push(_)}N.push(J.join("	"))}const O=N.join(`
`);navigator.clipboard.writeText(O).then(()=>{const M=JSON.parse(JSON.stringify(o));p.forEach(({rowIndex:J,colIndex:H})=>{J===-1?H<M.headers.length&&(M.headers[H]=""):J<M.rows.length&&H<M.rows[J].length&&(M.rows[J][H]="")}),B(M)}).catch(M=>{console.warn("å‰ªåˆ‡å¤±è´¥:",M)});return}if((g.ctrlKey||g.metaKey)&&g.key.toLowerCase()==="v"){if(g.preventDefault(),!z)return;navigator.clipboard.readText().then(y=>{if(!y.trim())return;const b=y.split(`
`).map(H=>H.split("	")),k=b.length,I=Math.max(...b.map(H=>H.length)),N=Math.max(o.rows.length,z.rowIndex+k),O=Math.max(o.headers.length,z.colIndex+I),M={headers:[...o.headers],rows:o.rows.map(H=>[...H])};for(;M.headers.length<O;)M.headers.push(`Col ${M.headers.length+1}`);for(;M.rows.length<N;){const H=new Array(O).fill("");M.rows.push(H)}M.rows.forEach(H=>{for(;H.length<O;)H.push("")});for(let H=0;H<k;H++){const L=z.rowIndex+H;if(L>=0&&L<M.rows.length)for(let _=0;_<b[H].length;_++){const U=z.colIndex+_;U>=0&&U<M.rows[L].length&&(M.rows[L][U]=b[H][_]||"")}}B(M);const J=[];for(let H=0;H<k;H++)for(let L=0;L<I;L++){const _=z.rowIndex+H,U=z.colIndex+L;_>=0&&_<N&&U>=0&&U<O&&J.push({rowIndex:_,colIndex:U})}x(J)}).catch(y=>{console.warn("ä»å‰ªè´´æ¿è¯»å–å¤±è´¥:",y)});return}if(g.key==="Delete"&&D.length>0){g.preventDefault();const y=[...D].sort((k,I)=>I-k);let b={headers:[...o.headers],rows:o.rows.map(k=>[...k])};y.forEach(k=>{b.rows.splice(k,1)}),B(b),v([]),j(null);return}if(g.key==="Escape"){v([]),x([]),j(null);return}if(["ArrowUp","ArrowDown"].includes(g.key)){g.preventDefault();let y;if(D.length===0){y=g.key==="ArrowDown"?0:o.rows.length-1,v([y]),j(y);return}const b=Q!==null?Q:D[D.length-1];if(g.key==="ArrowDown"?y=Math.min(b+1,o.rows.length-1):y=Math.max(b-1,0),g.shiftKey){const k=Math.min(Q||b,y),I=Math.max(Q||b,y),N=Array.from({length:I-k+1},(O,M)=>k+M);v(N)}else v([y]),j(y);return}}},[d,l,o,D,Q,B]),Ce=i.useCallback(g=>{const{active:y,over:b}=g;if(!b||y.id===b.id)return;const k=parseInt(String(y.id).replace("row-","")),I=parseInt(String(b.id).replace("row-",""));if(isNaN(k)||isNaN(I)){console.warn("æ— æ³•è§£ææ‹–æ‹½ç´¢å¼•");return}const N=So(o.rows,k,I),O={headers:[...o.headers],rows:N};v([]),x([]),j(null),B(O)},[o,B]),_e=i.useCallback(g=>{if(g===""||g==="Â ")return u.createElement("span",null,"Â ");try{const y=P.renderInline(g);return u.createElement("span",{dangerouslySetInnerHTML:{__html:y},style:{wordBreak:"break-word",whiteSpace:"normal",display:"inline-block",width:"100%"}})}catch(y){console.warn("Markdown æ¸²æŸ“å¤±è´¥:",y);const b=g===""?"Â ":g;return u.createElement("span",{style:{wordBreak:"break-word",whiteSpace:"normal",display:"inline-block",width:"100%"}},b)}},[P]),We=i.useCallback(g=>{const b=C.orderBy===g&&C.order==="asc"?"desc":"asc",k=[...o.rows].sort(G(b,g)),I={headers:[...o.headers],rows:k};h({order:b,orderBy:g}),v([]),x([]),j(null),B(I)},[C,o,G,B]),Me=i.useRef(new Map),je=i.useCallback((g,y,b)=>{const k=`${y}-${b}`;return Me.current.get(k),u.createElement(xt,{value:l?.value||"",onChange:I=>c(N=>N?{...N,value:I.target.value}:null),onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey?(I.preventDefault(),Ee()):I.key==="Escape"&&De()},onBlur:Ee,autoFocus:!0,multiline:!0,size:"small",variant:"standard",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",margin:0,"& .MuiInputBase-root":{fontSize:"0.875rem",height:"100%",width:"100%",padding:"6px 8px",margin:0,backgroundColor:a.cellBackground,color:a.cellText,border:a.editorFocusBorder,borderRadius:0,boxSizing:"border-box","&:before, &:after":{display:"none"},"&:hover":{backgroundColor:a.cellBackground}},"& .MuiInputBase-input":{padding:0,height:"100%",boxSizing:"border-box",overflow:"auto",wordBreak:"break-word",whiteSpace:"pre-wrap",color:a.cellText}}})},[l,Ee,De,a]),Be=i.useCallback(g=>f?.schema.headers[g]?.align||"left",[f]),dt=i.useCallback((g,y,b,k=!1)=>{const I=l?.rowIndex===y&&l?.colIndex===b,N=te(y,b),O=z?.rowIndex===y&&z?.colIndex===b,M=Be(b),J=g===""?"Â ":g,H=`${y}-${b}`;return u.createElement(T,{ref:L=>{L&&L instanceof HTMLDivElement?Me.current.set(H,L):Me.current.delete(H)},sx:{display:"flex",alignItems:"flex-start",justifyContent:M==="center"?"center":M==="right"?"flex-end":"flex-start",minHeight:I&&l.height?`${l.height}px`:"32px",height:I&&l.height?`${l.height}px`:"auto",width:I&&l.width?`${l.width}px`:"100%",cursor:d?"text":"default",padding:I?0:"6px 8px",position:"relative",backgroundColor:N?ue("#1976d2",.12):O?ue("#1976d2",.08):"transparent",border:O&&!I?"1px solid #1976d2":"1px solid transparent",boxSizing:"border-box",wordBreak:"break-word",whiteSpace:"normal",overflowWrap:"break-word",overflow:I?"hidden":"visible","&:hover":{backgroundColor:d&&!k?N?ue("#1976d2",.16):ue("#1976d2",.08):"transparent"}},onClick:L=>{d&&!k&&(F(L,y,b),A({rowIndex:y,colIndex:b}),Z(y,b))}},I?je(g,y,b):k?u.createElement("span",{style:{fontWeight:"bold",wordBreak:"break-word",whiteSpace:"normal",display:"block",width:"100%",textAlign:M,color:a.headerText}},J||`Header ${b+1}`):u.createElement("div",{style:{wordBreak:"break-word",whiteSpace:"normal",width:"100%",textAlign:M,color:a.cellText}},_e(g)))},[l,je,Z,d,te,z,_e,F,Be]);return!o||!o.headers.length&&!o.rows.length?u.createElement(ot,{sx:{p:2,textAlign:"center",color:"text.secondary"}},"Empty table - ",t?`Table ID: ${t}`:"No data",f&&u.createElement("div",{style:{fontSize:"0.75rem",marginTop:"4px",color:"#666"}},"Columns: ",f.schema.columnCount," | Rows: ",f.schema.rowCount)):u.createElement(To,{sensors:W,collisionDetection:Io,onDragEnd:Ce,modifiers:[ji]},u.createElement(ot,{elevation:0,sx:{width:"100%",overflow:"hidden",backgroundColor:a.paperBackground,border:a.paperBorder},className:"academic-table",tabIndex:0,onKeyDown:Se,ref:S},u.createElement(T,{sx:{display:"flex",flexDirection:"column",borderBottom:`1px solid ${a.toolbarBorder}`,backgroundColor:a.toolbarBackground},className:"react-table-toolbar"},u.createElement(T,{sx:{p:1,display:"flex",gap:1,alignItems:"center"}},u.createElement(he,{title:d?"Exit Edit Mode":"Enter Edit Mode"},u.createElement(se,{size:"small",onClick:()=>{m(!d),d&&(v([]),x([]),j(null),A(null),c(null))},color:d?"primary":"default"},u.createElement(ka,null))),d&&u.createElement(u.Fragment,null,u.createElement(T,{sx:{display:"flex",gap:.5,ml:1}},u.createElement(he,{title:"Add Row"},u.createElement(se,{size:"small",onClick:oe},u.createElement(Jn,null))),u.createElement(he,{title:"Add Column"},u.createElement(se,{size:"small",onClick:fe},u.createElement(Jn,{sx:{transform:"rotate(90deg)"}})))),u.createElement(T,{sx:{width:"1px",height:"20px",backgroundColor:a.toolbarBorder,mx:1}}),u.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1}},u.createElement("span",{style:{fontSize:"0.75rem",color:a.cellText,opacity:.7}},"åˆ—:"),u.createElement(T,{sx:{display:"flex",gap:.5}},o.headers.map((g,y)=>u.createElement(he,{key:y,title:`Delete "${g}" column`},u.createElement(se,{size:"small",onClick:()=>me(y),disabled:o.headers.length<=1,sx:{p:.25,fontSize:"0.75rem",minWidth:"auto",color:o.headers.length<=1?"#ccc":"#d32f2f","&:hover":{backgroundColor:o.headers.length<=1?"transparent":ue("#d32f2f",.08)}}},u.createElement(Gn,{fontSize:"inherit"})))))),u.createElement(T,{sx:{width:"1px",height:"20px",backgroundColor:a.toolbarBorder,mx:1}}),u.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1}},u.createElement("span",{style:{fontSize:"0.75rem",color:a.cellText,opacity:.7}},"æ’åº:"),C.orderBy&&u.createElement(T,{sx:{display:"flex",alignItems:"center",gap:.5}},u.createElement("span",{style:{fontSize:"0.75rem",fontWeight:500,color:a.cellText}},C.orderBy),u.createElement("span",{style:{fontSize:"0.75rem",color:"#1976d2"}},C.order==="asc"?"â†‘":"â†“"),u.createElement(he,{title:"Clear Sort"},u.createElement(se,{size:"small",onClick:()=>{h({order:"asc",orderBy:""})},sx:{p:.25}},u.createElement(Xn,{fontSize:"inherit"})))),!C.orderBy&&u.createElement("span",{style:{fontSize:"0.75rem",color:a.cellText,opacity:.5,fontStyle:"italic"}},"ç‚¹å‡»è¡¨å¤´æ’åº"))),u.createElement(T,{sx:{ml:"auto",display:"flex",alignItems:"center",gap:1}},d&&u.createElement(he,{title:u.createElement(T,{sx:{fontSize:"0.75rem",lineHeight:1.2}},u.createElement("div",null,"å¿«æ·é”®:"),u.createElement("div",null,"â€¢ Ctrl+A: å…¨é€‰"),u.createElement("div",null,"â€¢ Ctrl+D: å–æ¶ˆé€‰æ‹©"),u.createElement("div",null,"â€¢ Ctrl+B: åŠ ç²—é€‰ä¸­å•å…ƒæ ¼"),u.createElement("div",null,"â€¢ Ctrl+I: æ–œä½“é€‰ä¸­å•å…ƒæ ¼"),u.createElement("div",null,"â€¢ Ctrl+C: å¤åˆ¶é€‰ä¸­å•å…ƒæ ¼"),u.createElement("div",null,"â€¢ Ctrl+X: å‰ªåˆ‡é€‰ä¸­å•å…ƒæ ¼"),u.createElement("div",null,"â€¢ Ctrl+V: ç²˜è´´åˆ°æ´»åŠ¨å•å…ƒæ ¼"),u.createElement("div",null,"â€¢ Delete: åˆ é™¤é€‰ä¸­è¡Œ"),u.createElement("div",null,"â€¢ Ctrl+ç‚¹å‡»: å¤šé€‰"),u.createElement("div",null,"â€¢ Shift+ç‚¹å‡»: èŒƒå›´é€‰æ‹©"),u.createElement("div",null,"â€¢ æ–¹å‘é”®: ç§»åŠ¨é€‰æ‹©"),u.createElement("div",null,"â€¢ Shift+æ–¹å‘é”®: æ‰©å±•é€‰æ‹©"),u.createElement("div",null,"â€¢ æ‹–æ‹½è¡Œé¦–å›¾æ ‡: é‡æ–°æ’åº"))},u.createElement(se,{size:"small"},u.createElement(va,{fontSize:"small"}))),t&&u.createElement(T,{sx:{fontSize:"0.75rem",color:"text.secondary",display:"flex",alignItems:"center"}},"Table ID: ",t,f&&u.createElement("span",{style:{marginLeft:"8px"}},f.schema.columnCount,"Ã—",f.schema.rowCount)))),d&&D.length>0&&u.createElement(T,{sx:{px:1,py:.5,display:"flex",alignItems:"center",gap:1,backgroundColor:ue("#1976d2",.04),borderTop:`1px solid ${a.toolbarBorder}`}},u.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1}},u.createElement(En,{size:"small",indeterminate:D.length>0&&D.length<o.rows.length,checked:o.rows.length>0&&D.length===o.rows.length,onChange:ee}),u.createElement("span",{style:{fontWeight:500,color:"#1976d2",fontSize:"0.875rem"}},D.length," row",D.length>1?"s":""," selected")),u.createElement(T,{sx:{display:"flex",gap:.5,ml:2}},u.createElement(he,{title:"Delete Selected Rows"},u.createElement(se,{size:"small",onClick:()=>{const g={headers:[...o.headers],rows:o.rows.map(b=>[...b])};[...D].sort((b,k)=>k-b).forEach(b=>{g.rows.splice(b,1)}),B(g),v([]),j(null)},color:"error"},u.createElement(Gn,null))),u.createElement(he,{title:"Clear Selection"},u.createElement(se,{size:"small",onClick:()=>{v([]),x([]),j(null)}},u.createElement(Xn,null)))))),u.createElement(Ea,{sx:{width:"100%",overflowX:"hidden",overflowY:"visible",maxWidth:"100%",display:"block"},className:"uniform-scroller"},u.createElement(Sa,{size:"small",stickyHeader:!0,sx:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","& .MuiTableCell-root":{wordWrap:"break-word",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"normal",verticalAlign:"top",borderLeft:"none",borderRight:"none",borderBottom:`1px solid ${a.cellBorder}`,color:a.cellText}}},u.createElement(Ta,null,u.createElement(Sn,{sx:{backgroundColor:a.headerBackground,"& .MuiTableCell-head":{fontWeight:600,borderBottom:`2px solid ${a.cellBorder}`,color:a.headerText,position:"sticky",top:0,backgroundColor:a.headerBackground,zIndex:10}}},d&&u.createElement(At,{padding:"checkbox",sx:{width:80}},u.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1}},u.createElement(En,{color:"primary",indeterminate:D.length>0&&D.length<o.rows.length,checked:o.rows.length>0&&D.length===o.rows.length,onChange:ee,inputProps:{"aria-label":"select all rows"}}),u.createElement(Ar,{fontSize:"small",sx:{opacity:.5,cursor:"default"}}))),o.headers.map((g,y)=>u.createElement(At,{key:y,sx:{width:`${100/o.headers.length}%`,minWidth:0,maxWidth:`${100/o.headers.length}%`,padding:"4px 8px","& > *":{width:"100%",maxWidth:"100%"}}},u.createElement(Ia,{active:d&&C.orderBy===g,direction:C.orderBy===g?C.order:"asc",onClick:()=>{d&&We(g)},disabled:!d,sx:{width:"100%","& .MuiTableSortLabel-root":{flexDirection:"row"},"&.Mui-disabled":{opacity:1,color:"inherit"}}},u.createElement(T,{sx:{display:"flex",alignItems:"flex-start",minHeight:"32px",cursor:d?"text":"default",padding:"6px 8px",width:"100%",wordBreak:"break-word",whiteSpace:"normal","&:hover":{backgroundColor:d?a.headerHoverBackground:"transparent"}},onClick:b=>{d&&(b.stopPropagation(),Z(-1,y))}},l?.rowIndex===-1&&l?.colIndex===y?je(g,-1,y):u.createElement("span",{style:{wordBreak:"break-word",whiteSpace:"normal",display:"block",color:a.headerText,width:"100%"}},g||`Header ${y+1}`)),d&&C.orderBy===g?u.createElement(T,{component:"span",sx:Da},C.order==="desc"?"sorted descending":"sorted ascending"):null))))),u.createElement(Ma,null,u.createElement(Do,{items:q.map((g,y)=>`row-${y}`),strategy:Mo},q.map((g,y)=>{const b=ae(y),k=`row-${y}`;return d?u.createElement(Ki,{key:k,rowId:k,rowIndex:y,row:g,isEditMode:d,isSelected:b,lastSelectedIndex:Q,editingCell:l,onRowClick:be,renderCellContent:dt,setSelectedRows:v,setLastSelectedIndex:j,totalColumns:o.headers.length,themeStyles:a}):u.createElement(Sn,{key:k,hover:!0,sx:{"&:nth-of-type(even)":{backgroundColor:a.cellBackground},"&:hover":{backgroundColor:a.cellHoverBackground}}},g.map((I,N)=>u.createElement(At,{key:N,sx:{width:`${100/o.headers.length}%`,minWidth:0,maxWidth:`${100/o.headers.length}%`,padding:0,"& > *":{width:"100%",maxWidth:"100%"}}},dt(I,y,N))))})))))))},(t,e)=>t.tableId!==e.tableId?!1:JSON.stringify(t.tableData)===JSON.stringify(e.tableData));class yt{static instance;mountedRoots=new Map;lastTableStates=new Map;pendingRoots=new Set;static getInstance(){return yt.instance||(yt.instance=new yt),yt.instance}mountTables(){const e=document.querySelectorAll("[data-react-table]"),n=new Set;e.forEach((r,a)=>{const o=r.getAttribute("data-table-id");if(r.getAttribute("data-align"),r.getAttribute("data-table-hash"),!o){console.warn(`è¡¨æ ¼å ä½ç¬¦ ${a} ç¼ºå°‘ data-table-id`);return}n.add(o);const l=_i(o)?.tableHash||null,c=this.lastTableStates.get(o),d=this.mountedRoots.get(o),m=r.children.length>0,f=this.pendingRoots.has(o);if(!l){console.warn(`è¡¨æ ¼ ${o} åœ¨æ³¨å†Œè¡¨ä¸­æœªæ‰¾åˆ°ï¼Œè·³è¿‡å¤„ç†`);return}if(!f&&!(d&&l===c&&m)){if(d&&(!m||l!==c)){this.updateTable(o,l);return}d||this.createTableRoot(r,o,l)}}),this.cleanupUnusedRoots(n)}createTableRoot(e,n,r){if(!this.pendingRoots.has(n)){this.pendingRoots.add(n);try{e.innerHTML="",e.style.border="none",e.style.background="transparent",e.style.minHeight="auto",e.style.padding="0",e.style.margin="16px 0",Ue(()=>import("./react-dom-b710246a.js").then(a=>a.c),["./react-dom-b710246a.js","./@babel-518c05f7.js","./react-0d9c9f23.js","./scheduler-765c72db.js"],import.meta.url).then(({createRoot:a})=>{if(!document.contains(e)){console.warn(`è¡¨æ ¼ ${n} çš„å ä½ç¬¦å·²è¢«ç§»é™¤`),this.pendingRoots.delete(n);return}if(this.mountedRoots.has(n)){this.pendingRoots.delete(n);return}const o=a(e);o.render(u.createElement(ur,{tableId:n})),this.mountedRoots.set(n,o),r&&this.lastTableStates.set(n,r),this.pendingRoots.delete(n)}).catch(a=>{console.error(`åˆ›å»ºè¡¨æ ¼ ${n} æ ¹èŠ‚ç‚¹å¤±è´¥:`,a),this.pendingRoots.delete(n)})}catch(a){console.error(`ä¸ºè¡¨æ ¼ ${n} åˆ›å»ºæ ¹èŠ‚ç‚¹æ—¶å‘ç”Ÿé”™è¯¯:`,a),this.pendingRoots.delete(n)}}}updateTable(e,n){const r=this.mountedRoots.get(e);if(r&&n)try{r.render(u.createElement(ur,{tableId:e,key:`${e}-${n}`})),this.lastTableStates.set(e,n)}catch(a){console.error(`æ›´æ–°è¡¨æ ¼ ${e} å¤±è´¥:`,a)}}cleanupUnusedRoots(e){const n=[];this.mountedRoots.forEach((r,a)=>{if(!e.has(a))try{r.unmount(),n.push(a)}catch(o){console.warn(`å¸è½½è¡¨æ ¼ ${a} å¤±è´¥:`,o)}}),n.forEach(r=>{this.mountedRoots.delete(r),this.lastTableStates.delete(r),this.pendingRoots.delete(r),rt.clearTableListeners(r)})}forceRemountAllTables(){this.unmountAllTables(),this.mountTables()}unmountAllTables(){this.mountedRoots.forEach((e,n)=>{try{e.unmount(),rt.clearTableListeners(n)}catch(r){console.warn(`å¸è½½è¡¨æ ¼ ${n} å¤±è´¥:`,r)}}),this.mountedRoots.clear(),this.lastTableStates.clear(),this.pendingRoots.clear(),rt.clearAllListeners()}getDebugInfo(){return{mountedRootsCount:this.mountedRoots.size,tableStatesCount:this.lastTableStates.size,pendingRootsCount:this.pendingRoots.size,mountedTableIds:Array.from(this.mountedRoots.keys()),pendingTableIds:Array.from(this.pendingRoots),tableStates:Object.fromEntries(this.lastTableStates),syncListenersCount:rt.syncListeners?.size||0}}}const Ui=(await ve("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;async function bt(t=!1){let e=Pt();e=Ci(e);let n=await vi(e);const r=yt.getInstance();t||!window.IncrementalDOM?document.getElementById("view-area").innerHTML=Qt().render(e,n):window.IncrementalDOM.patch(document.getElementById("view-area"),Qt().renderToIncrementalDOM(e,n)),Ui.highlightAll(),r.mountTables()}class Vi{themeState;fileManagerState;emojiPickerState;contextMenuClickPosition;states;memorableStates;settingsConfig;constructor({themeState:e,fileManagerState:n,emojiPickerState:r,contextMenuClickPosition:a,states:o,memorableStates:s,settingsConfig:l}){Hn(this,{themeState:ie,fileManagerState:ie,emojiPickerState:ie,contextMenuClickPosition:ie,states:ie,memorableStates:ie,settingsConfig:ie}),this.themeState=e,this.fileManagerState=n,this.emojiPickerState=r,this.contextMenuClickPosition=a,this.states=o,this.memorableStates=s,this.settingsConfig=l}getAllConfig(){let e={};return Object.getOwnPropertyNames(this).forEach((n,r)=>{e[n]=this[n]}),e}}function Ji(t,e){const n=function(r,a,o,s,l){let c;return(r[a].map&&r[a].level===0||r[a].type==="list_item_open")&&(c=r[a].map[0],r[a].attrSet("data-line",String(c))),l.renderToken(r,a,o)};t.renderer.rules.paragraph_open=t.renderer.rules.heading_open=t.renderer.rules.table_open=t.renderer.rules.tr_open=t.renderer.rules.th_open=t.renderer.rules.bullet_list_open=t.renderer.rules.list_item_open=t.renderer.rules.import_plugin=n}let Gi=function(t){t.core.ruler.before("inline","myrule",function(e){var n=e.tokens;for(let r=0;r<n.length;r++)n[r].content&&n[r].content.indexOf("MYRULE")})},Xi=function(t){t.renderer.rules.image,t.core.ruler.before("normalize","replace_spaces_in_image_src",e=>{e.src=e.src.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,a)=>{const o=a.replace(/ /g,"%20");return`![${r}](${o})`})}),t.renderer.rules.image=function(e,n,r,a,o){const s=e[n],l="#";let c=s.attrs[s.attrIndex("src")][1],d=s.content;s&&s.attrGet("src")?.startsWith("/vf/")?a.vfImgSrcArr&&(c=a.vfImgSrcArr[a.vfImgSeq++]):s&&s.attrGet("src")?.startsWith("./")&&(c=a.vfImgSrcArr[a.vfImgSeq++]);let m="auto",f="",w="L",C=d.split(l);if(C.length>1)for(let h=0;h<C.length;h++){let p=C[h];p==="s"&&(f+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),p==="s1"&&(f+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),p==="s2"&&(f+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(p==="C"||p=="c")&&(w="C"),(p==="R"||p=="r")&&(w="R"),p.startsWith("w")&&(m=C[h].substring(1),m.endsWith("%")||(m+="px"))}return`<div class="imgBox-r FLEX  ${w=="C"?" JUS-CENTER":w=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${m}" style="${f}" src="${c}" alt="${d}">
    </div>`}};const Yi=(await ve("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;let Qi=function(t){const e=t.renderer.rules.code_block;t.renderer.rules.fence=function(n,r,a,o,s){let l;n[r].map&&n[r].level===0&&(l=n[r].map[0],n[r].attrSet("data-line",String(l)));let c=n[r].info,d=n[r].content;if(d=d.replace(/</g,"&lt;").replace(/>/g,"&gt;"),c==="mermaid"){if(o.mermaidParsedArr)return`<div data-line="${l}" class="language-mermaid language-plaintext">
        ${o.mermaidParsedArr[o.mermaidSeq++]}
        </div>`}else return Yi.getLanguage(c)?`<pre class="language-code" data-line="${l}"><code class="language-${c} ${ge()==="light"?"":"hljs-dark"}">${d}</code></pre>`:`<div class="code-container" data-line="${l}">
      <pre><code class="language-plaintext">${d}</code></pre>
    </div>`;return e(n,r,a,o,s)}},Zi=function(t){function e(n){const r=n.tokens;for(let a=0;a<r.length;a++)if(r[a].type==="inline"){let o=r[a].children;for(let s=0;s<o.length;s++){const l=o[s];if(l.type==="text"&&l.content){const d=l.content.match(/\^(.*?)\^(.*?)\#$/);if(d){const m=new n.Token("html_block","",0);m.content=`<div class="${d[2]}">${t.render(d[1])}</div>`,o[s]=m,s++}}}}}t.core.ruler.push("my_rule1",e),t.inline.ruler.before("emphasis","mark",(n,r)=>!1)};function es(t){t.core.ruler.push("custom_align",function(e){let n=null;e.tokens.forEach((r,a)=>{if(r.type==="paragraph_open"){let o=e.tokens[a+1];o&&o.type==="inline"&&o.children.forEach(s=>{if(s.type==="text"){const l=s.content;switch(l.slice(-2)){case"||":s.content=l.slice(0,-2),n="C";break;case">>":s.content=l.slice(0,-2),n="R";break}}})}n&&r.type==="paragraph_open"&&(r.attrPush(["class",n]),n=null)})})}function ts(t){t.core.ruler.push("custom_align_heading",function(e){let n=null;e.tokens.forEach((r,a)=>{if(r.type==="heading_open"){let o=e.tokens[a+1];o&&o.type==="inline"&&o.children.forEach(s=>{if(s.type==="text"){const l=s.content;switch(l.slice(-2)){case"||":s.content=l.slice(0,-2),n="C";break;case">>":s.content=l.slice(0,-2),n="R";break}}})}n&&r.type==="heading_open"&&(r.attrPush(["class",n]),n=null)})})}function ns(t,e,n=t.createDecorationsCollection()){document.getElementById("view-area").addEventListener("dblclick",function(r){let a=r.target,o=0;if(a!==this){for(;a;){if(a.hasAttribute("data-line")){o=parseInt(a.getAttribute("data-line"));break}a=a.parentElement}o&&(t.setPosition({lineNumber:o+1,column:1}),t.revealLineInCenter(o+1,1),n.clear(),n.set([{range:new e.Range(o+1,1,o+1,1),options:{isWholeLine:!0,className:"HILIGHT-MONACO",zIndex:0}}]))}})}const Vt={};let rs=0;const as=t=>{if(!Vt[t]){const e=document.createElement("div");e.className=`mui-notification-wrapper-${t}`,e.style.cssText=`
      position: fixed;
      z-index: 10000;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-width: 320px;
    `;const n=os(t);Object.assign(e.style,n),document.body.appendChild(e),Vt[t]=e}return Vt[t]},os=t=>{const e={topLeft:{top:"24px",left:"24px"},topRight:{top:"24px",right:"24px"},bottomLeft:{bottom:"24px",left:"24px"},bottomRight:{bottom:"24px",right:"24px"},top:{top:"24px",left:"50%",transform:"translateX(-50%)"},bottom:{bottom:"24px",left:"50%",transform:"translateX(-50%)"}};return e[t]||e.bottomRight},jn=()=>{const t=ge()==="dark",e={light:{backgroundColor:"#ffffff",borderColor:"#d9d9d9",textColor:"#000000d9",secondaryTextColor:"#00000073",shadowColor:"rgba(0,0,0,.15)"},dark:{backgroundColor:"#2f2f2f",borderColor:"#424242",textColor:"#ffffffd9",secondaryTextColor:"#ffffff73",shadowColor:"rgba(0,0,0,.3)"}},n=t?"dark":"light";return{...e,current:n,currentColors:e[n]}},is=t=>{const e=jn(),n=e.currentColors,r={width:"320px",border:"1px solid",borderRadius:"6px",boxShadow:`0 4px 12px ${n.shadowColor}`,padding:"16px 24px 16px 16px",fontSize:"14px",fontWeight:400,position:"relative",cursor:"pointer",pointerEvents:"auto",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',lineHeight:"1.5715",backgroundColor:n.backgroundColor,color:n.textColor},a={success:e.current==="dark"?"#52c41a40":"#ffffff",error:e.current==="dark"?"#ff4d4f40":"#ffffff",warning:e.current==="dark"?"#faad1440":"#ffffff",info:e.current==="dark"?"#1890ff40":"#ffffff"};return{...r,borderColor:a[t]}},ss=t=>{const e=document.createElement("span");e.style.cssText=`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    margin-right: 12px;
    flex-shrink: 0;
  `;const n={success:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 6.1L7.1 10.4c-.2.2-.4.3-.7.3s-.5-.1-.7-.3L3.5 8.2c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L6.4 8.3l3.7-3.7c.4-.4 1-.4 1.4 0s.4 1 0 1.5z"/>
      </svg>`,color:"#52c41a"},error:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3s-.5-.1-.7-.3L8 9.4l-2.1 2.1c-.2.2-.4.3-.7.3s-.5-.1-.7-.3c-.4-.4-.4-1 0-1.4L6.6 8 4.5 5.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L8 6.6l2.1-2.1c.4-.4 1-.4 1.4 0s.4 1 0 1.4L9.4 8l2.1 2.1z"/>
      </svg>`,color:"#ff4d4f"},warning:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8.7.1c-.4-.2-.9-.2-1.3 0-.2.1-.4.2-.5.4L.2 13.2c-.2.4-.2.8 0 1.2.1.2.3.3.5.4.2.1.4.1.6.1h13.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.4.2-.4.2-.8 0-1.2L8.2.5c-.1-.2-.3-.3-.5-.4zM9 12H7v-2h2v2zm0-3H7V5h2v4z"/>
      </svg>`,color:"#faad14"},info:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm1 12H7V7h2v5zm0-6H7V4h2v2z"/>
      </svg>`,color:"#1890ff"}},r=n[t]||n.success;return e.innerHTML=r.html,e.style.color=r.color,e},ls=()=>{const e=jn().currentColors,n=document.createElement("span");return n.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
    <path d="M6.8 6l4.6-4.6c.2-.2.2-.5 0-.7s-.5-.2-.7 0L6 5.3 1.4.7c-.2-.2-.5-.2-.7 0s-.2.5 0 .7L5.3 6 .7 10.6c-.2.2-.2.5 0 .7.1.1.2.1.4.1s.3 0 .4-.1L6 6.8l4.6 4.6c.1.1.2.1.4.1s.3 0 .4-.1c.2-.2.2-.5 0-.7L6.8 6z"/>
  </svg>`,n.style.cssText=`
    position: absolute;
    top: 12px;
    right: 12px;
    cursor: pointer;
    opacity: 0.45;
    padding: 4px;
    border-radius: 2px;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    color: ${e.secondaryTextColor};
  `,n.addEventListener("mouseenter",()=>{n.style.opacity="0.75"}),n.addEventListener("mouseleave",()=>{n.style.opacity="0.45"}),n},cs=t=>{const e={topLeft:{from:{x:-100,opacity:0},to:{x:0,opacity:1}},topRight:{from:{x:100,opacity:0},to:{x:0,opacity:1}},bottomLeft:{from:{x:-100,opacity:0},to:{x:0,opacity:1}},bottomRight:{from:{x:100,opacity:0},to:{x:0,opacity:1}},top:{from:{y:-50,opacity:0},to:{y:0,opacity:1}},bottom:{from:{y:50,opacity:0},to:{y:0,opacity:1}}};return e[t]||e.bottomRight},ds=(t,e,n)=>{const r=n?.kind??"success",a=n?.position??"bottomRight",s={success:"success",error:"error",warning:"warning",info:"info"}[r]||"success",l=as(a),d=jn().currentColors,m=document.createElement("div");m.className="mui-notification-item",m.setAttribute("data-notification-id",String(++rs));const f=is(s);Object.assign(m.style,f);const w=document.createElement("div");w.style.cssText=`
    display: flex;
    align-items: flex-start;
    gap: 0;
  `;const C=ss(s),h=document.createElement("div");h.style.cssText=`
    flex: 1;
    min-width: 0;
  `;const p=document.createElement("div");p.textContent=t,p.style.cssText=`
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
    color: ${d.textColor};
  `;const x=document.createElement("div");x.textContent=e,x.style.cssText=`
    font-size: 14px;
    color: ${d.secondaryTextColor};
    line-height: 1.5715;
  `,h.appendChild(p),h.appendChild(x),w.appendChild(C),w.appendChild(h);const D=ls();m.appendChild(w),m.appendChild(D),l.appendChild(m);const v=cs(a);Gt.fromTo(m,{...v.from,scale:.9},{duration:.4,...v.to,scale:1,ease:"back.out(1.2)"});const z=()=>{const A={duration:.3,opacity:0,scale:.9,ease:"power2.in"};a.includes("Right")?A.x=100:a.includes("Left")?A.x=-100:a.includes("top")?A.y=-50:A.y=50,Gt.to(m,{...A,onComplete:()=>{m.parentNode&&(l.removeChild(m),l.children.length===0&&(document.body.removeChild(l),delete Vt[a]))}})};D.addEventListener("click",A=>{A.stopPropagation(),z()}),setTimeout(z,4500)},gr=(t,e,n)=>{ds(t,e,n)};function Qr(t,e){if(typeof t!="object"||t===null||typeof e!="object"||e===null)return t;for(let n in e)e.hasOwnProperty(n)&&(typeof e[n]=="object"&&e[n]!==null?t[n]=Qr(t[n],e[n]):t[n]=e[n]);return t}function Zr(t){return new Promise(e=>{let n=0;const r=()=>{let a=!0;for(const o of t)if(typeof window[o]>"u"){a=!1;break}if(a)e();else{n++;let o=1e3;n<=5?o=30:n<=10&&(o=50),setTimeout(r,o)}};r()})}const ms=/^@\[(import)\]\(([^)]+)\)$/,us=function(e){const n=`
border: none;
height: 89svh;
`;function r(a,o){a.posMax;const s=a.pos;if(a.src.charCodeAt(s)!==64||a.src.charCodeAt(s+1)!==91)return!1;const l=a.src.indexOf("]",s+2);if(l===-1||a.src.charCodeAt(l+1)!==40)return!1;const c=a.src.indexOf(")",l+2);if(c===-1)return!1;const d=ms.exec(a.src.slice(s,c+1));if(!d)return!1;if(!o){const m=a.push("import_inline","",0),f=d[2].trim(),w=f.match(/\.(md|xlsx|csv|pdf)$/);if(!w)return!1;m.content=f,m.meta={extension:w[1]}}return a.pos=c+1,!0}e.inline.ruler.before("emphasis","import_plugin",r),e.renderer.rules.import_inline=function(a,o,s,l){const c=a[o];c.content,c.meta.extension;const d=`${l.pdfParsedArr[0]}`;let m;return d.length>10?m=`<embed onload="(()=>{Array.from(document.getElementsByClassName('pdf-preview')).forEach(e=>e.style.width=document.getElementById('view-area').clientWidth-20+'px')})()" class="pdf-preview" style="${n}" src="${d}"></embed>`:m="<div>PDF loading...</div>",m}};function gs(t){function e(r,a){let o=r.pos;if(r.src[o]!=="\\"||r.src[o+1]!=="(")return!1;let s=r.src.indexOf("\\)",o+2);if(s===-1)return!1;if(!a){const l=r.src.slice(o+2,s).replace(/\s+/g,"");let c=r.push("math_inline","",0);c.content=`${l}`}return r.pos=s+2,!0}function n(r,a,o,s){let l=r.bMarks[a]+r.tShift[a],c=r.eMarks[a];if(r.src.slice(l,l+2)!=="\\[")return!1;let d=r.src.slice(l+2,c),m=[],f=!1,w=a,C=d.indexOf("\\]");if(C!==-1)m.push(d.slice(0,C)),f=!0;else for(m.push(d),w=a+1;w<o;w++){l=r.bMarks[w]+r.tShift[w],c=r.eMarks[w];let h=r.src.slice(l,c);if(C=h.indexOf("\\]"),C!==-1){m.push(h.slice(0,C)),f=!0;break}m.push(h)}if(!f)return!1;if(!s){let h=r.push("math_block","",0);h.block=!0,h.content=m.join(`
`).trim(),h.map=[a,w+1]}return r.line=w+1,!0}t.block.ruler.before("paragraph","math_block",n,{alt:["paragraph"]}),t.inline.ruler.before("escape","math_inline2",e)}const fs=(await ve("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default,wn=(await ve("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default,ps=(await ve("https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm")).default,bn=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,hs=(await ve("https://cdn.jsdmirror.com/npm/markdown-it-footnote@4.0.0/+esm")).default;function Qt(){return ps({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(Ji).use(Po,{anchorLinkSymbol:"",anchorLinkBefore:!1}).use(Gi).use(Xi).use(Fo,{multiline:!0,rowspan:!0,headerless:!0,multibody:!0,aotolabel:!0}).use(Qi).use(Zi).use(hs).use(es).use(ts).use(_o).use(zo).use(gs).use(Yr).use(us).use(Li).use(window.markdownitIncrementalDOM)}class ys{constructor(){}mermaidInit(){const e={securityLevel:"loose",logLevel:4,startOnLoad:!1,gantt:{fontSize:19,sectionFontSize:"16",numberSectionStyles:10,useMaxWidth:!0},theme:ye().advanced.mermaidTheme};wn.parseError=n=>{},wn.initialize(e),wn.mermaidAPI.initialize(e)}hljsInit(){fs.configure({ignoreUnescapedHTML:!0})}settingsAllInit(){this.mermaidInit(),this.hljsInit()}static newSettings(){return new this}}function ws(t=window.editor,e=window.monaco){new ys().settingsAllInit(),bi(),bn.addStyle(`
    .markdown-body p,
    .markdown-body ol,
    .markdown-body li,
    .markdown-body div {
        font-size: ${ye().basic.fontSize}px;
    }
      `,"fontSizeStyle"),xi().then(async()=>{await bt(!1),Ke({unmemorable:{loading:!1}}),await bn.sleep(110),gr(nt.t("t-updated-to-latest-version"),nt.t("t-current-version",{version:"v3.1.0"})),await bn.sleep(680),gr(nt.t("t-new-features-current-version"),nt.t("t-file-manager"),{kind:"info"})}),window._deco=t.createDecorationsCollection(),window._speechData={processing:!1,speechResult:"",speech:null,isFinal:!1},ns(t,e,window._deco)}const Mt={themeState:"light",fileManagerState:!1,emojiPickerState:"off",contextMenuClickPosition:{posx:20,posy:20},memorableStates:{memorable:{languageChanged:!1,welcomeAnimationState:!0,localLANId:"none"}},states:{unmemorable:{isDragging:!1,loading:!0,previewMode:!1,aiPanelState:!1,voicePanelState:!1,voiceData:"",promptPanelState:!1,mouseUpPos:{posx:0,posy:0},selectEndPos:{posx:0,posy:0}}},settingsConfig:{basic:{language:"zh",editorAutoWrap:!0,fontSize:16,fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',syncScroll:!1,speechLanguage:"zh-CN",fileEditLocal:!0},advanced:{mermaidTheme:"default",imageSettings:{modePrefer:"folder",basicStyle:"#w70%#c#s",imgStorePath:"/images/",htmlOrMdStyle:"md"}}}},bs=[...Object.keys(Mt.memorableStates.memorable),...Object.keys(Mt.states.unmemorable),...Object.keys(Mt.settingsConfig.basic),...Object.keys(Mt.settingsConfig.advanced)],Gd=["default","forest","dark","neutral"],Xd=["default (é»˜è®¤ï¼Œæ‰æ˜¯æœ€ç¾çš„ï¼)","forest (è¯´çœŸçš„ï¼Œå¾ˆç»¿)","dark (è¯´çœŸçš„ï¼Œå¾ˆé»‘)","neutral (æ¸…å¿ƒå¯¡æ¬²ï¼Œå‡ºå®¶å¿…é€‰)"];function xs(t){function e(a){typeof n[a]=="object"?r.setItem(a,JSON.stringify(n[a])):r.setItem(a,n[a])}let n=t,r=new Wr;for(let a in n)if(r.getItem(a))if(a=="themeState"||a=="emojiPickerState"||a=="settingsConfig"||a=="memorableStates")try{if(typeof n[a]=="object"){const o=JSON.parse(r.getItem(a).toString());for(let s in o)Object.keys(o[s]).forEach(l=>{if(!bs.includes(l))return console.warn("abnormal key"),e(a),n});r.setItem(a,JSON.stringify(Qr(t[a],JSON.parse(r.getItem(a).toString())))),n[a]=JSON.parse(r.getItem(a).toString())}else n[a]=r.getItem(a).toString()}catch{console.warn("reset settings 1"),e(a)}else e(a);else console.warn("reset settings 3"),e(a);return n}const Cs=new Vi(xs(Mt)),$e=()=>Cs;let zt=new Wr;function Yd(t){re(()=>{t=="light"?($e().themeState="light",zt.setItem("themeState","light")):($e().themeState="dark",zt.setItem("themeState","dark"))})}function ge(){return $e().themeState}function ks(t){if(t.posx&&t.posy)re(()=>{$e().contextMenuClickPosition=t});else return!1}function Qd(t){const e=vs(),n=Es(e,t);re(()=>{$e().memorableStates=n}),zt.setItem("memorableStates",JSON.stringify(n))}function vs(){return On($e().memorableStates)}function Ke(t){const e=at(),n=Ss(e,t);re(()=>{$e().states=n}),zt.setItem("states",JSON.stringify(n))}function at(){return On($e().states)}function Zt(t){const e=ye(),n=Ts(e,t);re(()=>{$e().settingsConfig=n}),zt.setItem("settingsConfig",JSON.stringify(n))}function ye(){return On($e().settingsConfig)}function Es(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Ss(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Ts(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function en(t){re(()=>{$e().fileManagerState=t})}function ea(){return $e().fileManagerState}const Is=u.forwardRef(Ds);function Ds(t,e){let n="FLEX JUS-CENTER ",r={width:"fitContent"};const[a,o]=u.useState(!1),s=ge();function l(f){f.altKey&&Yo(`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${t.uuid})`),f.ctrlKey&&lt(`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${t.uuid})`,!0)}let[c,d]=u.useState({src:t.src,uuid:t.uuid,magic:t.magic!=0,className:n+(t.className??""),style:t.style?{...t.style,...r}:r});const m=f=>s==="dark"?"none":f?"1vh 2vh 21px rgb(79 79 79)":"rgb(216 216 216) 1vh 2vh 21px";return u.createElement(u.Fragment,null,u.createElement("div",{...c,...t,ref:e,className:c.className,style:c.style},u.createElement(he,{placement:"right",TransitionComponent:Lr,arrow:!0,title:"æŒ‰ä½Ctrlç‚¹å‡»æ’å…¥"},u.createElement("img",{onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},onClick:f=>{l(f)},style:{width:"70%",transition:" 0.2s ease-in-out",borderRadius:"5px",transform:a?"translate(0px, -2px)":"",boxShadow:m(a)},src:c.src,alt:"error"}))))}class Ms{displayState=!1;imgList=[];refreshCounter=0;constructor(e){Hn(this,{displayState:ie,imgList:ie,refreshCounter:ie}),this.displayState=e,this.loadImages()}display(){this.displayState=!0,this.refreshImages()}hidden(){this.displayState=!1}async loadImages(){try{const e=await wi();re(()=>{this.imgList=e||[]})}catch(e){console.error("Failed to load images:",e),re(()=>{this.imgList=[]})}}refreshImages(){this.loadImages(),this.refreshCounter++}getImages(){return this.imgList}}const As=new Ms(!1),ta=()=>As;function Ls(t){const e=u.Children.toArray(t.children).length;let n="LR ",r={display:"flex",flexDirection:"row",justifyContent:t.jus??"center",alignItems:t.ali??"center",width:"100%",height:"100%"},[a,o]=u.useState({style:t.style?{...t.style,...r}:r,className:n+(t.className??""),space:t.space??void 0,order:[]}),[s,l]=u.useState({marginRight:"5px",width:"100%",height:"100%"});return u.createElement(u.Fragment,null,u.createElement("div",{...a,...t,className:a.className,style:a.style},u.Children.map(t.children,(c,d)=>d==e-1?u.createElement("div",{style:{...s,flex:a.space?"auto":void 0}},c):u.createElement("div",{style:{...s,order:`${a.order[d]}`,flex:`0 0 ${a.space?a.space[d]:void 0}%`}},c))))}function xn(t){let e="Box ",n={display:"flex",flexDirection:t.dir??"row",justifyContent:t.jus??"center",alignItems:t.ali??"center",width:t.min==1?"fitContent":"100%",height:t.min==1?"fitContent":"100%",transform:t.move?`translate(${t.move?.x??0}, ${t.move?.y??0})`:void 0},[r,a]=u.useState({style:t.style?{...t.style,...n}:n,className:e+(t.className??""),space:t.space??void 0,order:[]});return u.createElement(u.Fragment,null,u.createElement("div",{...r,...t,className:r.className,style:r.style},t.children))}const Rs=zn({palette:{primary:{main:"#1976d2"}}}),$s=Re(()=>{const{t}=we(),e=ta(),[n,r]=i.useState(!1),[a,o]=i.useState(!1),s=ge();function l(){o(!0)}async function c(m){try{const f=await $t("md_content",2);ni(f,"users_img","uuid",m),setTimeout(()=>{e.refreshImages()},100)}catch(f){console.error("åˆ é™¤å›¾ç‰‡å¤±è´¥:",f)}}i.useEffect(()=>{r(e.displayState)},[e.displayState]);const d=e.getImages();return i.createElement(i.Fragment,null,i.createElement(it,{open:a,onClose:()=>{o(!1)},style:{zIndex:9999}},i.createElement(tn,{id:"alert-dialog-title"},t("t-image-manager-delete-all-title")),i.createElement(nn,null,i.createElement(Aa,{id:"alert-dialog-description"},t("t-image-manager-delete-all-content"))),i.createElement(rn,null,i.createElement(le,{onClick:()=>{o(!1),ri("md_content"),e.refreshImages()}},t("t-image-manager-confirm-yes")),i.createElement(le,{onClick:()=>{o(!1)},autoFocus:!0},t("t-image-manager-confirm-no")))),i.createElement(_n,{anchor:"bottom",open:n,elevation:16,onClose:()=>{e.hidden()}},i.createElement("div",{style:{height:"60vh",overflow:"auto"}},i.createElement("div",null,i.createElement(Rr,{theme:Rs},i.createElement(xn,null,i.createElement(Ls,{space:[90]},i.createElement(xn,{min:1,move:{x:"5vw"}},i.createElement("p",null,t("t-image-manager-title")),i.createElement(he,{title:i.createElement("div",null,t("t-image-manager-tooltip-title"),i.createElement("ul",{style:{margin:"2px"}},i.createElement("li",null,t("t-image-manager-tooltip-ctrl-click")),i.createElement("li",null,t("t-image-manager-tooltip-double-click")),i.createElement("li",null,t("t-image-manager-tooltip-alt-click"))))},i.createElement(se,null,i.createElement(Lt,{color:"primary"})))),i.createElement(xn,null,i.createElement(he,{title:t("t-image-manager-tooltip-delete-all")},i.createElement(se,{onClick:l},i.createElement(an,{color:"primary"})))))))),i.createElement(Rt,{style:{marginBottom:"1.3vh"}}),d.length>0?i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem",padding:"0 1rem 1rem 1rem"}},d.map(m=>i.createElement("div",{key:m.uuid,style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:s==="light"?"#f9f9f9":"#2a2a2a",borderRadius:"8px",padding:"1rem",transition:"all 0.2s ease",border:`1px solid ${s==="light"?"#e0e0e0":"#404040"}`}},i.createElement(he,{title:t("t-image-manager-tooltip-delete-single")},i.createElement(se,{size:"small",onClick:()=>c(m.uuid),style:{position:"absolute",top:"8px",right:"8px",backgroundColor:s==="light"?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.7)",color:"#f44336",zIndex:10,width:"24px",height:"24px"}},i.createElement(Jt,{style:{fontSize:"16px"}}))),i.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"0.5rem"}},i.createElement(Is,{magic:0,src:m.imgBase64,uuid:m.uuid,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px"}})),i.createElement("div",{style:{fontSize:"12px",color:s==="light"?"#666":"#999",textAlign:"center",wordBreak:"break-all"}},"UUID: ",m.uuid)))):i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem 1rem",color:s==="light"?"#999":"#666",textAlign:"center"}},i.createElement(Lt,{style:{fontSize:"48px",marginBottom:"1rem",opacity:.5}}),i.createElement("h3",{style:{margin:"0 0 0.5rem 0",fontWeight:"normal"}},t("t-image-manager-no-images-title")),i.createElement("p",{style:{margin:0,fontSize:"14px"}},t("t-image-manager-no-images-description"))))))}),Fs=st(le)(({theme:t})=>({color:t.palette.mode==="light"?"rgb(55, 65, 81)":"#FFFFFF",marginLeft:10,fontFamily:["electronicFont"].join(","),backgroundColor:t.palette.mode==="light"?"#FFFFFF":"","&:hover":{backgroundColor:t.palette.mode==="light"?La[300]:""}}));function Ot(t){return i.createElement(Fs,{id:"demo-customized-button",href:t.href?t.href:void 0,"aria-controls":t.open?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":t.open?"true":void 0,disableElevation:!0,onClick:t.onClick,onMouseOver:t.onHover,endIcon:t.endIcon,startIcon:t.startIcon?t.startIcon:void 0,variant:"contained"},t.children)}const Ps=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function Ln(){document.getElementById("view-area").innerHTML,window.document.body.style.background=ge()==="light"?"":"#0D1117",Ps.sleep(500).then(()=>{window.print()})}function na(t,e,n=""){const r=e??window.editor,a=t.editor.getEditors()[0].getModel().getFullModelRange();r.executeEdits("my-replace2",[{range:a,text:n,forceMoveMarkers:!0}])}const Rn=st(t=>i.createElement(Ra,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...t}))(({theme:t})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:t.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:t.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:t.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}})),fr=t=>t.children!==void 0,pr=t=>{const e=t.match(/^(\d+)/);return e?parseInt(e[1],10):null},zs=(t,e)=>{const n=pr(t),r=pr(e);if(n!==null&&r!==null){if(n!==r)return n-r;const a=t.substring(n.toString().length),o=e.substring(r.toString().length);return a.toLowerCase().localeCompare(o.toLowerCase())}return n!==null?-1:r!==null?1:t.toLowerCase().localeCompare(e.toLowerCase())},ra=t=>{const e=[...t];return e.sort((n,r)=>{const a=fr(n),o=fr(r);return a&&!o?-1:!a&&o?1:zs(n.label,r.label)}),e.forEach(n=>{n.children&&n.children.length>0&&(n.children=ra(n.children))}),e},_s=3,Je=t=>t?t.replace(/[\/\\]+/g,"/").replace(/^\/+|\/+$/g,"").trim():"",hr=(t,e)=>{const n=Je(t);return`${e}:${n}`},Bs=t=>{const e=Je(t);return e?e.split("/").length:0},Ns=(t,e)=>e!=="folder"?!1:Bs(t)>=_s;st("div")`
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  .lazy-placeholder {
    opacity: 0.7;
    font-style: italic;
    
    &.loading {
      opacity: 0.5;
    }
  }
  
  .lazy-placeholder:hover {
    opacity: 1;
    background-color: ${ue("#1976d2",.08)};
  }
`;const Hs=[{id:"1",label:"Documents"},{id:"2",label:"Bookmarked",children:[{id:"2.1",label:"Learning materials",fileType:"folder"}]}];function Os(){return i.createElement(T,{sx:{width:8,height:8,borderRadius:"100%",bgcolor:"warning.main",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",zIndex:1,mx:1}})}const yr=st($a)(({theme:t})=>({color:t.palette.mode==="light"?t.palette.grey[800]:t.palette.grey[400],position:"relative",[`& .${wt.groupTransition}`]:{marginLeft:t.spacing(2),paddingLeft:t.spacing(2.5),borderLeft:`1px dashed ${t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[700]}`}})),wr=st(Fa)(({theme:t})=>({flexDirection:"row-reverse",borderRadius:t.spacing(.7),marginBottom:t.spacing(.5),marginTop:t.spacing(.5),padding:t.spacing(.5),paddingRight:t.spacing(1),fontWeight:500,[`& .${wt.iconContainer}`]:{marginRight:t.spacing(2)},"&.Mui-expanded ":{"&:not(.Mui-focused, .Mui-selected, .Mui-selected.Mui-focused) .labelIcon":{color:t.palette.mode==="light"?t.palette.primary.main:t.palette.primary.dark},"&::before":{content:'""',display:"block",position:"absolute",left:"16px",top:"44px",height:"calc(100% - 48px)",width:"1.5px",backgroundColor:t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[700]}},"&:hover":{backgroundColor:ue(t.palette.primary.main,.1),color:t.palette.mode==="light"?t.palette.primary.main:"white"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:t.palette.mode==="light"?t.palette.primary.main:t.palette.primary.dark,color:t.palette.primary.contrastText},"&[draggable='true']":{cursor:"default","&:active":{opacity:1}},"&.drag-over":{backgroundColor:ue(t.palette.success.main,.2),border:`2px dashed ${t.palette.success.main}`}}));function Ws(t){return i.createElement($r,{...t,className:Dn(t.className,wt.groupTransition)})}const br=({icon:t,expandable:e=!1,children:n,draggable:r=!1})=>i.createElement(i.Fragment,null,i.createElement(za,{draggable:r},i.createElement(T,{sx:{display:"flex",alignItems:"center",cursor:"pointer"}},t&&i.createElement(T,{component:t,className:"labelIcon",color:"inherit",sx:{mr:1,fontSize:"1.2rem"}}),i.createElement(V,{sx:{color:"inherit",fontFamily:"General Sans",fontWeight:500},variant:"body2"},n),e&&i.createElement(Os,null)))),aa=t=>Array.isArray(t)?t.length>0&&t.some(aa):!!t;function $n({visible:t,x:e,y:n,onClose:r,onNewFile:a,onNewFolder:o,onRename:s,onDelete:l,isFile:c=!1,isRoot:d=!1}){const{t:m}=we(),f=i.useRef(null);if(i.useEffect(()=>{if(!t)return;console.log("Setting up global click listener for context menu");const x=A=>{if(A.button!==2){if(f.current&&f.current.contains(A.target)){console.log("Click inside menu, keeping open");return}console.log("Click outside menu, closing"),r()}},D=A=>{f.current&&!f.current.contains(A.target)&&(console.log("Right click outside menu, closing"),r())},v=A=>{A.key==="Escape"&&(console.log("Escape key pressed, closing menu"),r())},z=setTimeout(()=>{document.addEventListener("mousedown",x),document.addEventListener("contextmenu",D),document.addEventListener("keydown",v)},100);return()=>{clearTimeout(z),document.removeEventListener("mousedown",x),document.removeEventListener("contextmenu",D),document.removeEventListener("keydown",v)}},[t,r]),!t)return null;const w=Math.min(e,window.innerWidth-220),C=Math.min(n,window.innerHeight-240);console.log("Rendering context menu at:",w,C,d?"(Root menu)":"");const h={position:"fixed",top:C,left:w,zIndex:999999,backgroundColor:"white",border:"1px solid #ddd",borderRadius:8,boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:200,padding:4,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:14,userSelect:"none",pointerEvents:"auto",isolation:"isolate"},p={padding:"8px 16px",cursor:"pointer",borderRadius:4,display:"flex",alignItems:"center",gap:8,transition:"background-color 0.1s"};return ba.createPortal(i.createElement("div",{ref:f,style:h,onClick:x=>x.stopPropagation(),onContextMenu:x=>x.preventDefault()},(d||!c)&&i.createElement(i.Fragment,null,i.createElement("div",{style:p,onClick:x=>{x.stopPropagation(),a()},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent"},i.createElement("span",null,"ğŸ“„"),i.createElement("span",null,m("t-file-manager-new-file"))),i.createElement("div",{style:p,onClick:x=>{x.stopPropagation(),o()},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent"},i.createElement("span",null,"ğŸ“"),i.createElement("span",null,m("t-file-manager-new-folder"))),!d&&i.createElement("div",{style:{height:1,backgroundColor:"#eee",margin:"4px 0"}})),!d&&i.createElement(i.Fragment,null,i.createElement("div",{style:p,onClick:x=>{x.stopPropagation(),s()},onMouseEnter:x=>x.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent"},i.createElement("span",null,"âœï¸"),i.createElement("span",null,m("t-file-manager-rename"))),i.createElement("div",{style:{...p,color:"#ff4d4f"},onClick:x=>{x.stopPropagation(),l()},onMouseEnter:x=>{x.currentTarget.style.backgroundColor="#fff2f0",x.currentTarget.style.color="#ff4d4f"},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="transparent",x.currentTarget.style.color="#ff4d4f"}},i.createElement("span",null,"ğŸ—‘ï¸"),i.createElement("span",null,m("t-file-manager-delete"))))),document.body)}function js({onCreateFile:t,onCreateFolder:e}){const{t:n}=we();return i.createElement(T,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:200,padding:"24px 16px",textAlign:"center",margin:"8px 4px"}},i.createElement(Fr,{sx:{fontSize:48,color:"text.secondary",mb:2,opacity:.6}}),i.createElement(V,{variant:"h6",color:"text.secondary",gutterBottom:!0,sx:{fontSize:"1rem",fontWeight:500}},n("t-file-manager-empty-folder")),i.createElement(V,{variant:"body2",color:"text.secondary",sx:{mb:3,opacity:.7,maxWidth:280}},n("t-file-manager-empty-folder-desc")),i.createElement(T,{sx:{display:"flex",gap:1.5,flexWrap:"wrap",justifyContent:"center"}},i.createElement(le,{size:"small",variant:"outlined",startIcon:i.createElement(Ha,null),onClick:t,sx:{borderRadius:2,textTransform:"none",fontSize:"0.875rem"}},n("t-file-manager-new-file")),i.createElement(le,{size:"small",variant:"outlined",startIcon:i.createElement(Oa,null),onClick:e,sx:{borderRadius:2,textTransform:"none",fontSize:"0.875rem"}},n("t-file-manager-new-folder"))))}function xr({open:t,title:e,label:n,onClose:r,onConfirm:a,defaultValue:o=""}){const{t:s}=we(),[l,c]=i.useState(o);i.useEffect(()=>{c(o)},[o,t]),i.useEffect(()=>{console.log("InputDialog state changed:",{open:t,title:e,label:n,defaultValue:o})},[t,e,n,o]);const d=()=>{l.trim()&&(a(l.trim()),r())};return i.createElement(it,{open:t,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{style:{zIndex:999999}},style:{zIndex:999999}},i.createElement(tn,null,e),i.createElement(nn,null,i.createElement(xt,{autoFocus:!0,fullWidth:!0,label:n,value:l,onChange:m=>c(m.target.value),onKeyPress:m=>{m.key==="Enter"&&d()},sx:{mt:1}})),i.createElement(rn,null,i.createElement(le,{onClick:r},s("t-image-manager-confirm-no")),i.createElement(le,{onClick:d,variant:"contained"},s("t-image-manager-confirm-yes"))))}function Cr({open:t,title:e,message:n,onClose:r,onConfirm:a}){const{t:o}=we();return i.createElement(it,{open:t,onClose:r,PaperProps:{style:{zIndex:999999}},style:{zIndex:999999}},i.createElement(tn,null,e),i.createElement(nn,null,i.createElement(V,null,n)),i.createElement(rn,null,i.createElement(le,{onClick:r},o("t-image-manager-confirm-no")),i.createElement(le,{onClick:a,color:"error",variant:"contained"},o("t-image-manager-confirm-yes"))))}const qs=t=>{switch(t){case"image":return Bn;case"pdf":return Ba;case"doc":return er;case"video":return _a;case"folder":return Pr;case"pinned":return Fr;case"trash":return an;default:return er}},Ks=i.forwardRef(function(e,n){const{setIsDragging:r,fillText:a,folderManager:o,setExpandedFolderState:s,onRefresh:l,onManualRefresh:c,contextMenuState:d,onShowContextMenu:m,onCloseContextMenu:f,inputDialog:w,confirmDialog:C,onShowInputDialog:h,onShowConfirmDialog:p,onCloseInputDialog:x,onCloseConfirmDialog:D,onConfirmInput:v,onConfirmDelete:z,onLoadLazily:A,currentEditingFile:S,onFileSelect:P,id:W,itemId:$,label:G,disabled:q,children:ee,...Q}=e,{t:j}=we(),be=on(),[te,ae]=i.useState(!1),[F,K]=i.useState(!1),Y=d?.itemId===$,{getRootProps:B,getContentProps:Z,getIconContainerProps:Ee,getLabelProps:De,getGroupTransitionProps:oe,status:fe,publicAPI:me}=Pa({id:W,itemId:$,children:ee,label:G,disabled:q,rootRef:n});let E=me.getItem($);const Se=aa(ee);let Ce;const _e=S&&E.path===S&&E.fileType==="file";E.fileType==="lazy-placeholder"?Ce=void 0:Se?Ce=Pr:E.fileType&&(Ce=qs(E.fileType));const We=async()=>{if(E.fileType==="lazy-placeholder"&&A){K(!0);try{const L=Je(E.path.replace("/[lazy-placeholder]",""));console.log("Lazy loading triggered for:",L,"from placeholder:",E.path),await A($,L)}catch(L){console.error("Error loading lazily:",L)}finally{K(!1)}}},Me=L=>{E.fileType!=="lazy-placeholder"&&(L.preventDefault(),L.stopPropagation(),console.log("Right click detected on:",E.label),console.log("Event coordinates:",L.clientX,L.clientY),m(L,$))},je=L=>{Me(L),L.nativeEvent.stopImmediatePropagation?.()},Be=()=>{console.log("Closing context menu"),f()},dt=()=>{console.log("handleNewFile called for item:",E.label,"path:",E.path),h({open:!0,type:"newFile",title:j("t-file-manager-new-file"),label:j("t-file-manager-new-file-name"),defaultValue:"",itemId:$}),console.log("InputDialog state set, closing context menu"),Be()},g=()=>{console.log("handleNewFolder called for item:",E.label,"path:",E.path),h({open:!0,type:"newFolder",title:j("t-file-manager-new-folder"),label:j("t-file-manager-new-folder-name"),defaultValue:"",itemId:$}),console.log("InputDialog state set, closing context menu"),Be()},y=()=>{console.log("handleRename called for item:",E.label,"path:",E.path),h({open:!0,type:"rename",title:j("t-file-manager-rename"),label:j("t-file-manager-rename-name"),defaultValue:E.label,itemId:$}),Be()},b=()=>{console.log("handleDelete called for item:",E.label,"path:",E.path);const L=E.fileType==="folder",_=L?j("t-file-manager-confirm-delete-folder",{name:E.label}):j("t-file-manager-confirm-delete-file",{name:E.label});p({open:!0,title:j("t-file-manager-confirm-delete"),message:_,action:async()=>{try{const U=o.getTopDirectoryHandle();if(!U)return;const ne=S===E.path,ce=L&&S&&S.startsWith(E.path+"/");L?await o.deleteFolderAtPath(U,E.path):await o.deleteFileAtPath(U,E.path),(ne||ce)&&(console.log("Deleted currently editing file/folder, clearing selection"),P?.("")),R(j("t-file-manager-delete-success"),2e3,{kind:"success"}),l(),D()}catch(U){console.error("Delete error:",U),R(j("t-file-manager-operation-failed"),2e3,{kind:"error"}),D()}},itemId:$}),Be()},k=L=>{const _=L.label.toLowerCase(),U=_.lastIndexOf(".");if(U===-1)return!1;const ne=_.substring(U+1);return ln.includes(ne)||ne==="pdf"?!0:["md","txt","go","java","kt","py","js","ts","html","css","c","cpp","json","mjs","jsx","tsx","ps1","cmd","xsl","toml","ipynb","makefile","yml"].includes(ne)},I=L=>L.label.toLowerCase().endsWith(".pdf"),N=async L=>{if(E.fileType==="lazy-placeholder"){await We();return}if(E.fileType==="file"&&o.fileState===1)try{if(!k(E)){const _=E.label.toLowerCase(),U=_.lastIndexOf("."),ne=U!==-1?_.substring(U+1):"æœªçŸ¥";R(j("t-file-format-not-supported",{extension:ne}),2e3,{kind:"warning"});return}if(Ke({unmemorable:{previewMode:!0}}),kr(E)){let _=`![${ye().advanced.imageSettings.basicStyle}](./${E.path})`;a(_,E.label),P?.(E.path)}else if(I(E)){let _=`@[import](./${E.path})`;a(_,E.label),P?.(E.path)}else{Ke({unmemorable:{previewMode:!1}});let _=await o.readFileContent(o.getTopDirectoryHandle(),E.path);a(_,E.label),await bt(!1),P?.(E.path)}}catch(_){console.error("Error reading file content:",_),R(j("t-error-opening-file"),2e3,{kind:"error"})}},O=L=>{if(E.fileType==="lazy-placeholder"){L.preventDefault();return}console.log("Drag start:",E.label,"path:",E.path),kr(E)?(L.dataTransfer.effectAllowed="copyMove",setTimeout(()=>{r(!0)},400),L.dataTransfer.setData("text/html",`![${ye().advanced.imageSettings.basicStyle}](./${E.path})`)):L.dataTransfer.effectAllowed="move",L.dataTransfer.setData("text/plain",JSON.stringify({itemId:$,label:E.label,path:E.path,fileType:E.fileType}))},M=L=>{E.fileType!=="lazy-placeholder"&&E.fileType==="folder"&&(L.preventDefault(),L.dataTransfer.dropEffect="move",ae(!0))},J=L=>{L.currentTarget.contains(L.relatedTarget)||ae(!1)},H=async L=>{if(L.preventDefault(),ae(!1),E.fileType==="folder")try{const _=JSON.parse(L.dataTransfer.getData("text/plain")),{itemId:U,label:ne,path:ce,fileType:Ct}=_;if(U===$)return;if(Ct==="folder"&&E.path.startsWith(ce)){R(j("t-file-manager-invalid-move"),2e3,{kind:"warning"});return}const de=ce.includes("/")?ce.substring(0,ce.lastIndexOf("/")):"";if(de===E.path)return;const pe=o.getTopDirectoryHandle();if(!pe)return;console.log(`Moving ${ne} from "${de}" to "${E.path}"`);const dn=S===ce,Te=Ct==="folder"&&S&&S.startsWith(ce+"/");let Ie=ne;if(Ct==="folder"?Ie=await o.moveFolder(pe,ce,E.path):Ie=await o.moveFileByPath(pe,ce,E.path),dn)if(Ie!==ne)console.log(`Moved currently editing file was renamed from '${ne}' to '${Ie}', clearing editing state`),P?.("");else{const Pe=E.path?`${E.path}/${Ie}`:Ie;console.log(`Moved currently editing file, updating path from '${ce}' to '${Pe}'`),P?.(Pe)}else if(Te&&S)if(Ie!==ne)console.log(`Moved folder containing currently editing file was renamed from '${ne}' to '${Ie}', clearing editing state`),P?.("");else{const Pe=S.substring(ce.length+1),kt=E.path?`${E.path}/${Ie}/${Pe}`:`${Ie}/${Pe}`;console.log(`Moved folder containing currently editing file, updating path from '${S}' to '${kt}'`),P?.(kt)}Ie!==ne?R(`${j("t-file-manager-move-success")} (${ne} â†’ ${Ie})`,3e3,{kind:"success"}):R(j("t-file-manager-move-success"),2e3,{kind:"success"}),setTimeout(async()=>{console.log("Executing immediate refresh after file move"),e.onManualRefresh?await e.onManualRefresh("file_move"):l()},50)}catch(_){console.error("Move error:",_),R(j("t-file-manager-operation-failed"),2e3,{kind:"error"})}};return E.fileType==="lazy-placeholder"?i.createElement("div",{style:{position:"relative"}},i.createElement(Yn,{itemId:$},i.createElement(yr,{onClick:We,...B(Q),style:{position:"relative",opacity:F?.6:1,cursor:F?"wait":"pointer"}},i.createElement(wr,{...Z({className:Dn("content","lazy-placeholder",{loading:F})})},i.createElement(Qn,{...Ee()},F?i.createElement("div",{style:{animation:"spin 1s linear infinite",fontSize:"1.2rem"}},"âŸ³"):i.createElement(Zn,{status:fe})),i.createElement(br,{draggable:!1,...De({icon:void 0,expandable:!1})},j(F?"t-file-manager-loading":"t-file-manager-load-more")))))):i.createElement("div",{style:{position:"relative"}},i.createElement(Yn,{itemId:$},i.createElement(yr,{onClick:N,onContextMenu:je,draggable:!1,...B(Q),style:{position:"relative"}},i.createElement(wr,{draggable:Vs(),onDragStart:O,onDragOver:M,onDragLeave:J,onDrop:H,...Z({className:Dn("content",{"Mui-expanded":fe.expanded,"Mui-selected":!1,"Mui-focused":!1,"Mui-disabled":fe.disabled,"custom-editing":_e}),style:{backgroundColor:_e?be.palette.mode==="light"?be.palette.primary.main:be.palette.primary.dark:"transparent",color:_e?be.palette.primary.contrastText:"inherit"}})},i.createElement(Qn,{...Ee()},i.createElement(Zn,{status:fe})),i.createElement(br,{draggable:!1,...De({icon:Ce,expandable:Se&&fe.expanded})})),ee&&i.createElement(Ws,{...oe()}))),i.createElement($n,{visible:Y,x:d?.mouseX||0,y:d?.mouseY||0,onClose:Be,onNewFile:dt,onNewFolder:g,onRename:y,onDelete:b,isFile:E.fileType==="file",isRoot:!1}))});function Us(t){const{t:e}=we();let n=ra(t.fileDirectoryArr);const[r,a]=i.useState(null),[o,s]=i.useState({open:!1,type:"newFile",title:"",label:"",defaultValue:"",itemId:""}),[l,c]=i.useState({open:!1,title:"",message:"",action:()=>{},itemId:""}),[d,m]=i.useState(!1),[f,w]=i.useState(new Set),C=i.useCallback(async(F,K)=>{if(t.onLoadLazily)return t.onLoadLazily(F,K);try{const Y=t.folderManager.getTopDirectoryHandle();if(!Y)return;const B=Je(K.replace("/[lazy-placeholder]",""));console.log("Loading folder lazily:",B,"from placeholder:",K);const Z=await t.folderManager.loadFolderLazily(Y,B);if(!Z||Z.length===0){console.log("No children found for:",B);return}const Ee=Z.map(me=>{const E=Je(me.path||`${B}/${me.label}`),Se=hr(E,me.fileType);if(me.fileType==="folder"){const Ce=Ns(E,"folder");return{...me,id:Se,path:E,children:Ce?[{id:hr(`${E}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${E}/[lazy-placeholder]`}]:me.children}}else return{...me,id:Se,path:E}}),De=me=>me.map(E=>{if(Je(E.path)===B&&E.fileType==="folder"){console.log("Found target folder, updating children:",E.path);const Se=E.children?.filter(Me=>Me.fileType!=="lazy-placeholder")||[],Ce=new Set(Se.map(Me=>Je(Me.path))),_e=Ee.filter(Me=>!Ce.has(Je(Me.path))),We=[...Se,..._e];return{...E,children:We.length>0?We:void 0}}return E.children&&Array.isArray(E.children)?{...E,children:De(E.children)}:E}),oe=Array.isArray(t.fileDirectoryArr)?t.fileDirectoryArr:[],fe=De(oe);console.log("File tree updated with lazy loaded content"),t.folderManager.topDirectoryArray=fe,t.onRefresh&&t.onRefresh(),w(me=>new Set([...me,B]))}catch(Y){console.error("Error loading folder lazily:",Y)}},[t.folderManager,t.fileDirectoryArr,t.onRefresh,t.onLoadLazily]),h=F=>{F.preventDefault(),F.stopPropagation(),console.log("Root area context menu triggered at:",F.clientX,F.clientY),a({mouseX:F.clientX,mouseY:F.clientY,itemId:"root"})},p=()=>{console.log("Root new file called"),s({open:!0,type:"newFile",title:e("t-file-manager-new-file"),label:e("t-file-manager-new-file-name"),defaultValue:"",itemId:"root"}),v()},x=()=>{console.log("Root new folder called"),s({open:!0,type:"newFolder",title:e("t-file-manager-new-folder"),label:e("t-file-manager-new-folder-name"),defaultValue:"",itemId:"root"}),v()},D=i.useCallback((F,K)=>{a({mouseX:F.clientX,mouseY:F.clientY,itemId:K})},[]),v=i.useCallback(()=>{a(null)},[]),z=i.useCallback(F=>{console.log("handleShowInputDialog called with:",F),s(F)},[]),A=i.useCallback(F=>{c(F)},[]),S=i.useCallback(()=>{console.log("handleCloseInputDialog called"),s(F=>({...F,open:!1}))},[]),P=i.useCallback(()=>{c(F=>({...F,open:!1}))},[]),W=i.useCallback(async()=>{await new Promise(F=>setTimeout(F,150)),t.onRefresh?.()},[t.onRefresh]),$=i.useCallback(async F=>{console.log("handleConfirmInput called with:",F,"dialog type:",o.type,"itemId:",o.itemId);try{const K=t.folderManager.getTopDirectoryHandle();if(!K)return;const Y=(Ee,De)=>{for(const oe of Ee){if(oe.id===De)return oe;if(oe.children){const fe=Y(oe.children,De);if(fe)return fe}}return null},B=Y(n,o.itemId);if(!B&&o.type!=="newFile"&&o.type!=="newFolder"){console.error("Current item not found");return}let Z=o.type;switch(o.type){case"newFile":B&&B.fileType==="folder"?await t.folderManager.createNewFileAtPath(K,B.path,F):await t.folderManager.createNewFile(K,F),R(e("t-file-manager-create-success"),2e3,{kind:"success"}),Z="create_file";break;case"newFolder":B&&B.fileType==="folder"?await t.folderManager.createNewFolderAtPath(K,B.path,F):await t.folderManager.createNewFolder(K,F),R(e("t-file-manager-create-success"),2e3,{kind:"success"}),Z="create_folder";break;case"rename":B&&(B.fileType==="folder"?(await t.folderManager.renameFolderAtPath(K,B.path,F),Z="rename_folder"):(await t.folderManager.renameFileAtPath(K,B.path,F),Z="rename_file"),R(e("t-file-manager-rename-success"),2e3,{kind:"success"}));break}t.onManualRefresh?await t.onManualRefresh(Z):W()}catch(K){console.error("Operation error:",K),R(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},[o.type,o.itemId,t.folderManager,W,e,n]),G=i.useCallback(()=>{l.action()},[l.action]),q=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move",m(!0)},ee=F=>{F.currentTarget.contains(F.relatedTarget)||m(!1)},Q=async F=>{F.preventDefault(),m(!1);try{const K=JSON.parse(F.dataTransfer.getData("text/plain")),{itemId:Y,label:B,path:Z,fileType:Ee}=K;if(!Z.includes("/"))return;const oe=t.folderManager.getTopDirectoryHandle();if(!oe)return;console.log(`Moving ${B} from "${Z}" to root directory`);const fe=t.currentEditingFile===Z,me=Ee==="folder"&&t.currentEditingFile&&t.currentEditingFile.startsWith(Z+"/");let E=B;if(Ee==="folder"?E=await t.folderManager.moveFolder(oe,Z,""):E=await t.folderManager.moveFileByPath(oe,Z,""),fe)E!==B?(console.log(`Moved currently editing file to root was renamed from '${B}' to '${E}', clearing editing state`),t.onFileSelect?.("")):(console.log(`Moved currently editing file to root, updating path from '${Z}' to '${E}'`),t.onFileSelect?.(E));else if(me&&t.currentEditingFile)if(E!==B)console.log(`Moved folder containing currently editing file to root was renamed from '${B}' to '${E}', clearing editing state`),t.onFileSelect?.("");else{const Se=t.currentEditingFile.substring(Z.length+1),Ce=`${E}/${Se}`;console.log(`Moved folder containing currently editing file to root, updating path from '${t.currentEditingFile}' to '${Ce}'`),t.onFileSelect?.(Ce)}E!==B?R(`${e("t-file-manager-move-success")} (${B} â†’ ${E})`,3e3,{kind:"success"}):R(e("t-file-manager-move-success"),2e3,{kind:"success"}),setTimeout(async()=>{console.log("Executing immediate refresh after move to root"),t.onManualRefresh?await t.onManualRefresh("move_to_root"):W()},50)}catch(K){console.error("Move to root error:",K),R(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},j=!n||n.length===0||n.length===1&&n[0].children&&n[0].children.length===0,be=async()=>{const F=t.folderManager.getTopDirectoryHandle();if(F)try{const K=`æ–°å»ºæ–‡ä»¶${Date.now()}.md`;await t.folderManager.createNewFile(F,K),R(e("t-file-manager-create-success"),2e3,{kind:"success"}),t.onManualRefresh?await t.onManualRefresh("empty_folder_create_file"):W()}catch(K){console.error("Create file error:",K),R(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},te=async()=>{const F=t.folderManager.getTopDirectoryHandle();if(F)try{const K=`æ–°å»ºæ–‡ä»¶å¤¹${Date.now()}`;await t.folderManager.createNewFolder(F,K),R(e("t-file-manager-create-success"),2e3,{kind:"success"}),t.onManualRefresh?await t.onManualRefresh("empty_folder_create_folder"):W()}catch(K){console.error("Create folder error:",K),R(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}};if(j)return i.createElement(T,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onDragOver:q,onDragLeave:ee,onDrop:Q,onContextMenu:h,style:{backgroundColor:d?"rgba(46, 125, 50, 0.1)":"transparent",border:d?"2px dashed #2e7d32":"2px solid transparent",transition:"all 0.2s ease"}},i.createElement(js,{onCreateFile:be,onCreateFolder:te}),i.createElement($n,{visible:r?.itemId==="root",x:r?.mouseX||0,y:r?.mouseY||0,onClose:v,onNewFile:p,onNewFolder:x,onRename:()=>{},onDelete:()=>{},isFile:!1,isRoot:!0}),i.createElement(xr,{open:o.open,title:o.title,label:o.label,defaultValue:o.defaultValue,onClose:S,onConfirm:$}),i.createElement(Cr,{open:l.open,title:l.title,message:l.message,onClose:P,onConfirm:G}));const ae=i.useCallback(F=>i.createElement(Ks,{...F,fillText:t.fillText,setIsDragging:t.setIsDragging,setExpandedFolderState:()=>{},folderManager:t.folderManager,onRefresh:W,onManualRefresh:t.onManualRefresh,contextMenuState:r,onShowContextMenu:D,onCloseContextMenu:v,inputDialog:o,confirmDialog:l,onShowInputDialog:z,onShowConfirmDialog:A,onCloseInputDialog:S,onCloseConfirmDialog:P,onConfirmInput:$,onConfirmDelete:G,onLoadLazily:C,currentEditingFile:t.currentEditingFile,onFileSelect:t.onFileSelect}),[t.fillText,t.setIsDragging,t.folderManager,t.currentEditingFile,t.onFileSelect,W,r,D,v,o,l,z,A,S,P,$,G,C,t.onManualRefresh]);return i.createElement(T,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onDragOver:q,onDragLeave:ee,onDrop:Q,onContextMenu:h,style:{backgroundColor:d?"rgba(46, 125, 50, 0.1)":"transparent",border:d?"2px dashed #2e7d32":"2px solid transparent",transition:"all 0.2s ease"}},i.createElement(Na,{items:n??Hs,"aria-label":"file explorer",className:"uniform-scroller",sx:{height:"100%",flexGrow:1,userSelect:"none",maxWidth:400,overflowY:"auto",flex:1,padding:"8px 0 8px 4px","& .MuiTreeView-root":{padding:0},"& > ul":{padding:"4px 0"}},slots:{item:ae}}),i.createElement($n,{visible:r?.itemId==="root",x:r?.mouseX||0,y:r?.mouseY||0,onClose:v,onNewFile:p,onNewFolder:x,onRename:()=>{},onDelete:()=>{},isFile:!1,isRoot:!0}),i.createElement(xr,{open:o.open,title:o.title,label:o.label,defaultValue:o.defaultValue,onClose:S,onConfirm:$}),i.createElement(Cr,{open:l.open,title:l.title,message:l.message,onClose:P,onConfirm:G}))}function Vs(t){return!0}function kr(t){const e=t.label.toLowerCase(),n=e.lastIndexOf(".");if(n===-1)return!1;const r=e.substring(n+1);return ln.includes(r)}const Js=u.forwardRef(({children:t,sx:e,...n},r)=>u.createElement(T,{ref:r,sx:{display:"flex",flexDirection:"column",width:500,height:200,overflow:"auto",padding:"10px","&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-track":{boxShadow:"inset 0 0 5px grey",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"darkgrey",borderRadius:"10px"},...e},...n},t)),Gs=3,ke=t=>t?t.replace(/[\/\\]+/g,"/").replace(/^\/+|\/+$/g,"").trim():"",Ne=(t,e)=>{const n=ke(t);return`${e}:${n}`},Xs=t=>{const e=ke(t);return e?e.split("/").length:0},Wt=(t,e)=>e!=="folder"?!1:Xs(t)>=Gs,Qe=new Gr,X=new Xe,Ys=Re(function(){const{t:e}=we(),[n,r]=u.useState([]),[a,o]=u.useState(""),[s,l]=u.useState(""),[c,d]=i.useState(!1),[m,f]=i.useState(!1),[w,C]=i.useState(!1),[h,p]=i.useState(new Set),[x,D]=i.useState(!1),[v,z]=i.useState([]),[A,S]=i.useState(!1),[P,W]=i.useState(0),[$,G]=i.useState(1500),[q,ee]=i.useState(0),[Q,j]=i.useState(Date.now());window._setIsDragging=f;const be=on(),te=u.useRef(),ae=u.useRef(),F=u.useRef(),[K,Y]=i.useState(!0),B=u.useCallback((g,y)=>{if(!g||g.length===0)return!1;const b=ke(y);for(const k of g)if(ke(k.path)===b||k.children&&Array.isArray(k.children)&&B(k.children,y))return!0;return!1},[]),Z=(g,y)=>{na(window.monaco,window.editor,g),R(`${e("t-file-manager-open-success")}${y}ï¼ğŸ˜€`)},Ee=g=>()=>{c||en(g)},De=(g,y)=>{Zt({basic:{fileEditLocal:y}})},oe=u.useCallback(async()=>{const g=Date.now();if(A){const y=g-P;if(y<200){te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{oe()},200-y);return}}if(g-P<300){te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{oe()},300-(g-P));return}x||(te.current&&clearTimeout(te.current),te.current=setTimeout(async()=>{try{z(O=>[...O.slice(-9),{type:"system",timestamp:g,operation:"file_system_change"}]);const y=X.topDirectoryArray||[],b=X.getTopDirectoryHandle();if(!b)return;const k=await X.readDirectoryAsArrayOptimized(b,!0,3),I=E(k),N=me(y,I,h);if(N.hasChanges){X.topDirectoryArray=N.updatedTree,r(N.updatedTree),p(N.updatedExpandedFolders),j(g),ee(0);const O=1e3;if(O!==$&&(G(O),X.stopWatching(),X.watchDirectory(oe,O)),s){const M=ke(s);B(N.updatedTree,M)||(l(""),o(""))}Y(!0)}else{const O=g-Q;ee(M=>{const J=M+1;let H=$;return O>3e4?H=5e3:O>1e4?H=3e3:J>=3&&(H=1e3),H!==$&&(G(H),setTimeout(()=>{X.stopWatching(),X.watchDirectory(oe,H)},100)),J>10?0:J})}}catch(y){console.error("Error during system watch refresh:",y),Y(!1),setTimeout(()=>{try{X.stopWatching(),X.watchDirectory(oe,$),Y(!0)}catch(b){console.error("Health check: failed to restart watcher:",b)}},1e3)}},400))},[X,h,x,s,A,P,$,q,Q,B]),fe=u.useCallback(async g=>{const y=Date.now();S(!0),W(y),te.current&&(clearTimeout(te.current),te.current=void 0),z(b=>[...b.slice(-9),{type:"user",timestamp:y,operation:g}]);try{const b=X.getTopDirectoryHandle();if(!b)return;const k=await X.readDirectoryAsArrayOptimized(b,!0,3),I=E(k),N=X.topDirectoryArray||[],O=me(N,I,h);if(X.topDirectoryArray=O.updatedTree,r(O.updatedTree),p(O.updatedExpandedFolders),G(1e3),ee(0),j(y),s){const M=ke(s);B(O.updatedTree,M)||(l(""),o(""))}Y(!0)}catch(b){console.error("Error during user operation refresh:",b)}finally{setTimeout(()=>{S(!1)},100)}},[X,h,s,B]),me=u.useCallback((g,y,b)=>{const k=new Set(b),I=(H,L,_="")=>{let U=!1;const ne=[],ce=new Map(H.map(de=>[de.label,de])),Ct=new Map(L.map(de=>[de.label,de]));for(const de of L){const pe=ce.get(de.label),dn=_?`${_}/${de.label}`:de.label,Te=ke(dn);if(!pe)U=!0,ne.push({...de,id:Ne(Te,de.fileType),path:Te});else if(de.fileType==="file")ne.push({...pe,path:Te,id:Ne(Te,"file")});else if(de.fileType==="folder"){const Ie=b.has(Te)||b.has(pe.path);let Pe=pe.children||[],kt=!1;if(Ie&&de.children&&!de.children.some(Nt=>Nt.fileType==="lazy-placeholder")){const Nt=I(pe.children||[],de.children,Te);Pe=Nt.items,kt=Nt.hasChanges,kt&&(U=!0)}else Wt(Te,"folder")&&(!pe.children||pe.children.length===0)?Pe=[{id:Ne(`${Te}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${Te}/[lazy-placeholder]`}]:Pe=pe.children||[];ne.push({...pe,path:Te,id:Ne(Te,"folder"),children:Pe.length>0?Pe:void 0}),Ie&&pe.path!==Te&&(k.delete(pe.path),k.add(Te))}}for(const[de,pe]of ce)Ct.has(de)||(U=!0,pe.fileType==="folder"&&k.delete(pe.path));return{items:ne,hasChanges:U}},N=I(g,y),O=new Set,M=H=>{for(const L of H)L.fileType==="folder"&&(O.add(ke(L.path)),L.children&&!L.children.some(_=>_.fileType==="lazy-placeholder")&&M(L.children))};M(N.items);const J=new Set([...k].filter(H=>O.has(ke(H))));return{hasChanges:N.hasChanges,updatedTree:N.items,updatedExpandedFolders:J}},[]),E=u.useCallback((g,y="",b=0)=>g.map(k=>{const I=ke(y?`${y}/${k.label}`:k.label),N={...k,id:Ne(I,k.fileType),path:I};return k.fileType==="folder"&&(Wt(I,"folder")?N.children=[{id:Ne(`${I}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${I}/[lazy-placeholder]`}]:k.children&&Array.isArray(k.children)&&(N.children=E(k.children,I,b+1))),N}),[]);u.useEffect(()=>{const g=()=>{if(X.getTopDirectoryHandle()&&!K)try{X.stopWatching(),X.watchDirectory(oe,$),Y(!0)}catch(y){console.error("Health check: failed to restart watcher:",y)}};return F.current=setInterval(g,1e4),()=>{F.current&&clearInterval(F.current)}},[K,X,oe,$]);const Se=async()=>{try{X.stopWatching(),te.current&&(clearTimeout(te.current),te.current=void 0),ae.current&&(clearTimeout(ae.current),ae.current=void 0),X.topDirectoryArray=[],p(new Set),S(!1),W(0),z([]),Y(!0),D(!1);const g=await Qe.openSingleFile();if(!g){R(e("t-no-file-selected"),2500,{kind:"warning"});return}o(g.name),l(g.name),r([{id:"1."+g.name,label:g.name,path:g.name,fileType:g.kind}]),R(e("t-opening-file"));const y=await Qe.readFile(g);Z(y,g.name)}catch(g){console.error("Error opening file:",g),R(e("t-error-opening-file"),2e3,{kind:"error"})}},Ce=async()=>{try{C(!0);let g=X;g.stopWatching();const y=await g.openDirectory();if(y){R(e("t-file-manager-loading"),1e3,{kind:"info"}),S(!1),W(0),z([]),Y(!0),G(1500),ee(0),p(new Set);let b=await g.readDirectoryAsArrayOptimized(y,!0,1);const k=(I,N="",O=0)=>I.map(M=>{const J=ke(N?`${N}/${M.label}`:M.label),H={...M,id:Ne(J,M.fileType),path:J};return M.fileType==="folder"&&(Wt(J,"folder")?H.children=[{id:Ne(`${J}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${J}/[lazy-placeholder]`}]:M.children&&Array.isArray(M.children)&&(H.children=k(M.children,J,O+1))),H});b=k(b),g.watchDirectory(oe,1500),g.topDirectoryArray=b,r(b),(!b||b.length===0)&&R(e("t-file-manager-empty-folder"),2e3,{kind:"info"}),setTimeout(async()=>{try{const I={monaco:window.monaco,editor:window.editor,body:document.body,editorContainer:document.getElementById("monaco-editor-container"),previewContainer:document.getElementById("preview")};if(Object.entries(I).filter(([O,M])=>!M).map(([O])=>O).length>0)return;window.editor&&typeof window.editor.getModel=="function"&&window.editor.getModel()&&await bt(!1)}catch(I){console.error("Error re-rendering markdown:",I),I instanceof Error&&I.message?.includes("ownerDocument")}},200)}}catch(g){console.error("Error opening folder:",g),R(e("t-error-opening-folder"),2e3,{kind:"error"})}finally{C(!1)}},_e=async()=>{await fe("manual_refresh")},We=u.useCallback(async(g="manual_operation")=>{await fe(g)},[fe]),Me=u.useCallback(async(g,y)=>{D(!0);try{const b=X.getTopDirectoryHandle();if(!b)return;const k=ke(y.replace("/[lazy-placeholder]",""));X.lastLazyLoadTime=Date.now();try{const I=await X.getDirectoryHandleByPath(b,k),N=[],O=[];for await(const[L,_]of I.entries())O.push([L,_]);O.sort((L,_)=>L[0].localeCompare(_[0]));for(const[L,_]of O){const U=ke(`${k}/${L}`),ne=Ne(U,_.kind);if(_.kind==="file")N.push({id:ne,label:L,fileType:"file",path:U});else{const ce=Wt(U,"folder")?[{id:Ne(`${U}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${U}/[lazy-placeholder]`}]:void 0;N.push({id:ne,label:L,fileType:"folder",path:U,children:ce})}}const M=L=>L.map(_=>ke(_.path)===k&&_.fileType==="folder"?{..._,children:N}:_.children&&Array.isArray(_.children)?{..._,children:M(_.children)}:_),J=Array.isArray(n)?n:[],H=M(J);X.topDirectoryArray=H,r(H),p(L=>new Set([...L,k]))}catch(I){console.error("æ‡’åŠ è½½æ–‡ä»¶å¤¹å¤±è´¥:",I)}}catch(b){console.error("æ‡’åŠ è½½å‡ºé”™:",b)}finally{setTimeout(()=>{D(!1)},1e3)}},[X,n]);u.useEffect(()=>()=>{te.current&&clearTimeout(te.current),ae.current&&clearTimeout(ae.current),F.current&&clearInterval(F.current),X.stopWatching()},[]),u.useEffect(()=>{X.watchInterval!==null&&console.log("Watcher active, health status:",K)},[h,K]);const je={width:"53%",height:"6svh",mb:"10px"},Be=st(Nn)({backgroundColor:"transparent"}),dt=u.useCallback(g=>{l(g),(!g||g.trim()==="")&&(o(""),Qe.fileHandle&&(Qe.fileHandle=null),console.log("Cleared current editing file state due to file move/rename"))},[Qe]);return u.createElement(u.Fragment,null,u.createElement("style",null,`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `),u.createElement(_n,{PaperProps:{style:{pointerEvents:"all",zIndex:99999}},keepMounted:!0,ModalProps:{disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,style:{pointerEvents:c||m?"none":"all"},BackdropComponent:g=>u.createElement(Be,{onDrop:()=>{setTimeout(()=>{window._setIsDragging(!1)},30)},...g,className:"pointed-through-backdrop"})},anchor:"right",autoFocus:!1,open:ea(),onClose:Ee(!1)},u.createElement(T,{sx:{overflow:"hidden",background:be.palette.mode==="light"?"#F9F9F9":"dark",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",height:"100svh"}},u.createElement(T,{sx:{width:{xs:"50px",sm:"60px",md:"70px"},maxWidth:"70px",height:"100svh",display:"flex",background:be.palette.mode==="light"?"#eeeeee":"#414141",alignItems:"center",justifyContent:"center"}},u.createElement(Wa,{sx:{width:{xs:50,sm:60,md:70},maxWidth:70,height:"100vh",alignItems:"center",paddingTop:2}},u.createElement(Tt,{icon:u.createElement(ja,null),onClick:()=>en(!1)}),u.createElement(Tt,{icon:c?u.createElement(qa,{sx:{transform:"rotate(45deg)"}}):u.createElement(Ka,{sx:{transform:"rotate(45deg)"}}),onClick:()=>d(!c),tooltipText:"ğŸ§·"+e("t-file-manager-pinned")}),u.createElement(Tt,{icon:u.createElement(Ua,null),onClick:Se,tooltipText:"ğŸ“"+e("t-file-manager-open-file")}),u.createElement(Tt,{tooltipText:"ğŸ“"+e("t-file-manager-open-folder"),icon:u.createElement(Va,null),onClick:Ce}),u.createElement(Tt,{tooltipText:"ğŸ“‘"+e("t-file-manager-saveAs"),icon:u.createElement(Ja,null),onClick:()=>Qe.saveAsFile(Pt())}))),u.createElement(T,{sx:{width:{xs:"250px",sm:"280px",md:"320px",lg:"360px"},maxWidth:"400px",minWidth:"250px",height:"100svh",display:"flex",flexDirection:"column"}},u.createElement(T,{sx:{width:"100%",height:"10svh",maxHeight:"60px",minHeight:"50px",alignItems:"center",mt:"4px",justifyContent:"center"},className:"FLEX COW ALI-CEN JUS-CEN"},u.createElement(V,{sx:{mr:"10px",fontSize:"17px"},color:be.palette.info.contrastText},e("t-file-manager-syncLocal")),u.createElement(Rn,{checked:ye().basic.fileEditLocal,size:"small",inputProps:{"aria-label":"controlled"},onChange:De})),u.createElement(T,{className:"FLEX ALI-CEN JUS-CEN",sx:{display:"flex",height:"98%",alignContent:"center",justifyContent:"center",marginBottom:"20svh"}},n.length!=0?u.createElement(u.Fragment,null,u.createElement(Js,{sx:{width:"100%",height:"100%"}},u.createElement(Us,{folderManager:X,fillText:Z,setIsDragging:f,fileDirectoryArr:n,onRefresh:_e,onManualRefresh:We,currentEditingFile:s,onFileSelect:dt,onLoadLazily:Me}))):u.createElement(u.Fragment,null,u.createElement(T,{className:"FLEX COL ALI-CEN JUS-CEN",sx:{width:"100%"}},w&&u.createElement(T,{sx:{mb:2,display:"flex",alignItems:"center",gap:1}},u.createElement("div",{style:{animation:"spin 1s linear infinite",fontSize:"1.2rem",color:be.palette.primary.main}},"âŸ³"),u.createElement(V,{variant:"body2",color:"primary"},e("t-file-manager-loading"))),u.createElement(V,null,ye().basic.fileEditLocal?a:""),u.createElement(le,{sx:je,onClick:Se,variant:"contained",color:"primary",disabled:w},e("t-file-manager-open-file")),u.createElement(le,{sx:je,variant:"contained",color:"primary",onClick:Ce,disabled:w},e("t-file-manager-open-folder")),u.createElement(le,{sx:je,variant:"contained",onClick:()=>{Qe.saveAsFile(Pt())},disabled:w},e("t-file-manager-saveAs")))))))))});function Tt({icon:t,onClick:e,tooltipText:n}){const r=on(),a=u.createElement(le,{sx:{width:{xs:"46px",sm:"50px",md:"56px"},height:{xs:"46px",sm:"50px",md:"56px"},minWidth:"46px",maxWidth:"56px",backgroundColor:"transparent","&:hover":{backgroundColor:r.palette.action.hover,borderRadius:"0"},"& .MuiTouchRipple-rippleVisible":{animation:"MuiTouchRipple-keyframes-enter 550ms cubic-bezier(0.4, 0, 0.2, 1)",transform:"scale(3)"},"& .MuiTouchRipple-child":{backgroundColor:r.palette.primary.main}},onClick:e,color:"inherit"},t);return n?u.createElement(he,{sx:{whiteSpace:"normal"},TransitionComponent:Lr,enterDelay:200,placement:"left",title:n},a):a}function Qs(t){return i.createElement($r,{...t})}const Zs=st(Ga)(({theme:t})=>({color:t.palette.mode==="light"?t.palette.grey[800]:t.palette.grey[200],[`& .${wt.content}`]:{borderRadius:t.spacing(.5),padding:t.spacing(.5,1),margin:t.spacing(.2,0),[`& .${wt.label}`]:{fontSize:"0.89rem",fontWeight:500}},[`& .${wt.iconContainer}`]:{borderRadius:"80%",backgroundColor:t.palette.mode==="light"?ue(t.palette.primary.main,.45):t.palette.primary.dark,color:t.palette.mode==="dark"&&t.palette.primary.contrastText,padding:t.spacing(0,1.2)}})),ze=i.forwardRef((t,e)=>i.createElement(Zs,{...t,slots:{groupTransition:Qs,...t.slots},ref:e}));function Zd(){const{t}=we();function e(n){document.getElementById(n).scrollIntoView()}return i.createElement(i.Fragment,null,i.createElement(T,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:{xs:"0 0 35%",sm:"0 0 32%",md:"0 0 28%",lg:"0 0 25%"},minWidth:"180px",maxWidth:"280px",minHeight:20,overflowX:"hidden",borderRight:"1px solid rgba(0, 0, 0, 0.12)"}},i.createElement(zr,{"aria-label":"customized",defaultExpandedItems:["1_x","2_x"],slots:{endIcon:_r},sx:{userSelect:"none",minHeight:270,maxWidth:280,width:"100%"}},i.createElement(ze,{slots:{endIcon:tr},onClick:()=>{e("settings_1_x")},itemId:"1_x",label:t("t-basic-settings")},i.createElement(ze,{slots:{endIcon:Xa},onClick:()=>{e("settings_1_1")},itemId:"1_1",label:t("t-theme-settings")}),i.createElement(ze,{slots:{endIcon:Ya},onClick:()=>{e("settings_1_2")},itemId:"1_2",label:t("t-language-settings")}),i.createElement(ze,{slots:{endIcon:tr},onClick:()=>{e("settings_1_3")},itemId:"1_3",label:t("t-editor-settings")}),i.createElement(ze,{slots:{endIcon:Br},onClick:()=>{document.getElementById("settings_1_4").scrollIntoView()},itemId:"1_4",label:t("t-speech-to-text")})),i.createElement(ze,{onClick:()=>{e("settings_2_x")},itemId:"2_x",label:t("t-advanced-settings")},i.createElement(ze,{onClick:()=>{e("settings_2_1")},itemId:"2_1",label:t("t-export-settings")}),i.createElement(ze,{onClick:()=>{e("settings_2_2")},itemId:"2_2",label:t("t-mermaid-settings")}),i.createElement(ze,{slots:{endIcon:Bn},onClick:()=>{e("settings_2_3")},itemId:"2_3",label:t("t-image-settings")}),i.createElement(ze,{slots:{endIcon:Qa},onClick:()=>{e("settings_2_7")},itemId:"2_7",label:t("t-reset-initialization")})))))}const el=[{id:"0_1",labelKey:"directory.preface.title"},{id:"1_x",labelKey:"directory.basic.title",children:[{id:"1_1",labelKey:"directory.basic.paragraph"},{id:"1_2",labelKey:"directory.basic.lineBreak"},{id:"1_3",labelKey:"directory.basic.bold"},{id:"1_4",labelKey:"directory.basic.italic"},{id:"1_5",labelKey:"directory.basic.center"},{id:"1_6",labelKey:"directory.basic.customText"},{id:"1_7",labelKey:"directory.basic.exportPdf"}]},{id:"2_x",labelKey:"directory.advanced.title",children:[{id:"2_1",labelKey:"directory.advanced.speechToText"},{id:"2_2",labelKey:"directory.advanced.aiAssistant"},{id:"2_3",labelKey:"directory.advanced.autoFormat"},{id:"2_4",labelKey:"directory.advanced.fileManager"},{id:"2_5",labelKey:"directory.advanced.imageUpload"},{id:"2_6",labelKey:"directory.advanced.syncScroll"},{id:"2_7",labelKey:"directory.advanced.emojiMarket"},{id:"2_8",labelKey:"directory.advanced.collaboration"},{id:"2_9",labelKey:"directory.advanced.tableBuilder"},{id:"2_10",labelKey:"directory.advanced.mindMap"},{id:"2_11",labelKey:"directory.advanced.doubleClick"}]},{id:"3_x",labelKey:"directory.smart.title",children:[{id:"3_1",labelKey:"directory.smart.latex"},{id:"3_2",labelKey:"directory.smart.autoComplete"},{id:"3_3",labelKey:"directory.smart.settings"}]}],tl={"0_1":{title:"å‰è¨€",content:["ä½ å¥½ï¼Œæœ‹å‹ï¼Œæ¬¢è¿æ¥åˆ° Markdown å…¥é—¨æŒ‡å—ã€‚æœ¬æ•™ç¨‹å°†å¸®åŠ©ä½ æŒæ¡ Markdown çš„åŸºæœ¬è¯­æ³•ï¼Œä»¥åŠä¸€äº›è¿›é˜¶çš„é»‘ç§‘æŠ€æŠ€å·§ã€‚","å…¶å®è¦å¼€å§‹å†™markdownå¾ˆç®€å•ï¼Œä½ å¯ä»¥é€€å‡ºæŒ‡å—ï¼ŒæŒ‰ä¸‹`Ctrl+J`ä¸€é”®å‘¼å‡ºAIï¼Œæˆ–è€…åœ¨ç¼–è¾‘åŒºå³é”®å‘¼å‡ºèœå•åï¼Œç‚¹å‡»AskAIå³å¯å¼€å§‹å†™ä½œ,åˆ«å¿˜äº†å†™å®Œå`Ctrl+S`ä¿å­˜æ–‡æœ¬åˆ°æµè§ˆå™¨ç¼“å­˜ã€‚","","å¦‚æœä½ å–œæ¬¢è¿™ä¸ªç¼–è¾‘å™¨ï¼Œä¸å¦¨ç»™ä¸ªStarå‘—ï¼Œ[Github](https://github.com/LiWeny16/MarkdownOnline?tab=readme-ov-file)"]},"1_1":{title:"æ®µè½å’Œæ ‡é¢˜",content:["Markdown æ®µè½çš„å†™æ³•å¾ˆç®€å•ï¼Œåªéœ€ç›´æ¥è¾“å…¥æ–‡æœ¬å³å¯ã€‚ä¾‹å¦‚ï¼š","","```\nè¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚\n```","","æ®µè½ä¹‹é—´éœ€è¦ç©ºè¡Œï¼Œå¦åˆ™ä¼šè¢«è®¤ä¸ºæ˜¯åŒä¸€æ®µå†…å®¹ã€‚","","æ ‡é¢˜æ›´ç®€å•ï¼Œå¯¹è¿™ä¸€è¡ŒæŒ‰ä¸‹`Ctrl+1`å³å¯"]},"1_2":{title:"æ¢è¡Œ",content:["Markdown é»˜è®¤ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œå¦‚æœä½ æƒ³æ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨ `<br>`ã€‚","```\nè¿™æ˜¯ç¬¬ä¸€è¡Œã€‚<br>è¿™æ˜¯ç¬¬äºŒè¡Œã€‚\n```"]},"1_3":{title:"åŠ ç²—",content:["Markdown å¯ä»¥ä½¿ç”¨ `**` æˆ– `__` æ¥åŠ ç²—æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼š","","```\n**è¿™æ˜¯åŠ ç²—çš„æ–‡æœ¬**\n```","","æ•ˆæœï¼š **è¿™æ˜¯åŠ ç²—çš„æ–‡æœ¬**"]},"1_4":{title:"æ–œä½“",content:["Markdown ä½¿ç”¨ `*` æˆ– `_` è®©æ–‡æœ¬å˜æˆæ–œä½“ã€‚ä¾‹å¦‚ï¼š","","```\n*è¿™æ˜¯æ–œä½“æ–‡æœ¬*\n```","","æ•ˆæœï¼š *è¿™æ˜¯æ–œä½“æ–‡æœ¬*"]},"1_5":{title:"å±…ä¸­",content:["åœ¨æ–°çš„ä¸€è¡Œï¼ŒæŒ‰ä¸‹`/`æ–œæ ï¼Œè¾“å…¥any-center-textå›è½¦,å³å¯å¾—åˆ°å±…ä¸­æ–‡æœ¬","åŒç†,å±…å³æ˜¯è¿™æ ·å†™",'```\n<p style="text-align: right">å±…å³</p>\n```',"","æˆ–è€…ç›´æ¥`Ctrl+E`è¿›è¡Œå±…ä¸­ï¼Œ`Ctrl+R`è¿›è¡Œå±…å³"]},"1_6":{title:"ä»»æ„å­—ä½“",content:["åœ¨æ–°çš„ä¸€è¡Œï¼ŒæŒ‰ä¸‹`/`æ–œæ ï¼Œè¾“å…¥any-textå›è½¦,å³å¯å¾—åˆ°ä½ æƒ³è¦å®ƒä»€ä¹ˆæ ·å­ä»–å°±æ˜¯ä»€ä¹ˆæ ·å­çš„æ–‡æœ¬äº†ï¼"]},"1_7":{title:"å¯¼å‡ºPDF",content:["å³ä¸Šè§’æ›´å¤šæŒ‰é’®é‡Œæœ‰å¯¼å‡ºåŠŸèƒ½ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å¿«æ·é”®`Ctrl+P`","","åœ¨å¯¼å‡ºPDFçš„æ—¶å€™ä½ ç»å¸¸ä¼šå‘ç°åˆ†å‰²é¡µå¾€å¾€ä¸å°½äººæ„ï¼Œæ‰€ä»¥è¿™é‡Œæä¾›`/page-breaker`æ¥åˆ†å‰²æ¯ä¸ªé¡µ","æˆ–è€…åœ¨éœ€è¦åˆ†å‰²çš„åœ°æ–¹æ‰“å‡º`|---|`å³å¯"]},"2_1":{title:"è¯­éŸ³è½¬æ–‡å­—",content:["å…è´¹ã€ä¸é™æ—¶é•¿ã€é«˜å‡†ç¡®ç‡çš„è¯­éŸ³è½¬æ–‡å­—ï¼Œè¿˜ä¸å¿«æ¥è¯•è¯•ï¼","","å¿«æ·é”®:`Ctrl+Alt+V`"]},"2_2":{title:"AIæ™ºèƒ½åŠ©æ‰‹",content:["AI å¯ä»¥å¸®åŠ©ä½ è‡ªåŠ¨ç”Ÿæˆ Markdown æ ¼å¼çš„å†…å®¹ï¼Œä¾‹å¦‚è‡ªåŠ¨æ’ç‰ˆã€è¯­æ³•æ£€æŸ¥ã€ä»£ç æ ¼å¼åŒ–ç­‰ã€‚","","åœ¨ä»»ä½•æ—¶å€™ï¼Œæˆ‘éƒ½å¼ºçƒˆæ¨èä½ è¯¢é—®AIå…·ä½“çš„markdownè¯­æ³•æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æ›´åŠ é«˜æ•ˆ","","å¿«æ·é”®ï¼š`Ctrl+J`"]},"2_3":{title:"è‡ªåŠ¨æ’ç‰ˆ",content:["Markdown æ”¯æŒè‡ªåŠ¨æ’ç‰ˆï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·å¦‚ `Prettier` æˆ– `Markdownlint` æ¥ä¼˜åŒ–æ’ç‰ˆï¼Œä½¿æ–‡æ¡£æ›´æ˜“è¯»ã€‚","","å¿«æ·é”®:`Shift+Alt+F`"]},"2_4":{title:"æ–‡ä»¶ç®¡ç†å™¨",content:["ç¼–è¾‘å™¨å¼•ç”¨äº†å…¨æ–°æ–‡ä»¶æ¥å£ï¼Œå¯ä»¥ç›´æ¥å¯¹æœ¬åœ°æ–‡ä»¶å¤¹è¿›è¡Œæ‰“å¼€å’Œä¿®æ”¹ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹åï¼Œç²˜è´´åˆ°ç¼–è¾‘å™¨çš„å›¾ç‰‡å°†ä¼šè¢«è‡ªåŠ¨ä¿å­˜åˆ°å½“å‰ç›®å½•çš„imageæ–‡ä»¶å¤¹ä¸‹","","å¿«æ·é”®:`Ctrl+Alt+F`(å¯èƒ½å’Œå¾®ä¿¡å†²çªï¼Œè¯·ä¿®æ”¹å¾®ä¿¡çš„çƒ­é”®)ï¼Œæˆ–åœ¨å³ä¸Šè§’æ›´å¤šé‡Œæ‰“å¼€"]},"2_5":{title:"å›¾ç‰‡ä¸Šä¼ ",content:["ç®€å•æ˜“æ‡‚ï¼Œå¤åˆ¶å›¾ç‰‡æ–‡ä»¶ç„¶åç²˜è´´åˆ°ç¼–è¾‘å™¨å³å¯ï¼Œè‹¥æ²¡æœ‰æ‰“å¼€æ–‡ä»¶å¤¹å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨ç¼“å­˜ä¸­","","å›¾ç‰‡å¯ä»¥æ‰¹é‡å¤åˆ¶ä¸Šä¼ ï¼Œå¹¶ä¸”æ”¯æŒå¿«æ·é”®`Ctrl+E`è°ƒæ•´å±…ä¸­ï¼Œé»˜è®¤æ ·å¼è§£é‡Šå¦‚ä¸‹:","",`> #wä»£è¡¨å¤§å°ï¼Œ#cä»£è¡¨å±…ä¸­(center)ï¼Œ
#sä»£è¡¨é˜´å½±(shadow)ï¼Œ#rä»£è¡¨å±…å³(right)`]},"2_6":{title:"åŒæ­¥æ»šåŠ¨",content:["éšæ—¶å¼€å¯ï¼Œé«˜åº¦æ™ºèƒ½çš„åŒæ­¥æ»šåŠ¨ç®—æ³•ï¼Œæ¯”èµ·VScodeé™ç»´æ‰“å‡»çš„å¼€å…³åŠŸèƒ½","","å¿«æ·é”®`Ctrl+Q`"]},"2_7":{title:"è¡¨æƒ…åŒ…è¶…å¸‚",content:["è¡¨æƒ…åŒ…ï¼Œä»»ä½ æŒ‘é€‰ğŸ˜","","ç¼–è¾‘åŒºå³é”®èœå•ï¼Œè¡¨æƒ…åŒ…è¶…å¸‚"]},"2_8":{title:"ååŒåŠå…¬",content:["ä¸¤å°è®¾å¤‡åŒä¸€ä¸ªçƒ­ç‚¹æˆ–æ”¯æŒå†…ç½‘å…±äº«çš„WIFIä¸‹(æ‰‹æœºçƒ­ç‚¹é»˜è®¤éƒ½æ”¯æŒ)ï¼Œå³å¯æ€¥é€Ÿåˆ†äº«æ–‡æœ¬å’Œæ–‡ä»¶ï¼","","åœ¨å“ªï¼šå³ä¸Šè§’æ›´å¤šæŒ‰é’®ï¼ŒååŒåŠå…¬"]},"2_9":{title:"è¡¨æ ¼",content:["æ–°çš„ä¸€è¡ŒæŒ‰ä¸‹`/`ï¼Œè¾“å…¥tableå³å¯çœ‹åˆ°åŠ¨æ€è¡¨æ ¼åŠŸèƒ½ï¼","","ä¾‹å¦‚ï¼š`/table3` åˆ›å»º3x3è¡¨æ ¼ï¼Œ`/table3x5` åˆ›å»º3è¡Œ5åˆ—è¡¨æ ¼","","æ”¯æŒä»»æ„è¡Œåˆ—æ•°ï¼Œå¦‚ `/table2`ã€`/table4x6` ç­‰","","æ—§ç‰ˆæœ¬ï¼šç¼–è¾‘åŒºæŒ‰F1ï¼Œè¾“å…¥table#3#2ä¹Ÿä¾ç„¶å¯ç”¨"]},"2_10":{title:"æµç¨‹å›¾ï¼Œæ€ç»´å¯¼å›¾...",content:["æ–°çš„ä¸€è¡ŒæŒ‰ä¸‹`/`è¾“å¦‚mermaidå³å¯çœ‹åˆ°è”æƒ³çš„æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾...ç­‰ç­‰"]},"2_11":{title:"åŒå‡»å®šä½",content:["åŒå‡»å³è¾¹æ¸²æŸ“åæ–‡æœ¬ï¼Œå³å¯å®šä½åˆ°å·¦è¾¹åŸæ–‡æœ¬ï¼Œå¤ªå¤ªå¤ªæ–¹ä¾¿å•¦ï¼ï¼"]},"3_1":{title:"LaTexæ•°å­¦å…¬å¼",content:["æ–°èµ·ä¸€è¡Œæ‰“`/latex`åå›è½¦ï¼Œåœ¨latexä¸­é—´æŒ‰ä¸‹`\\`å³å¯å¼€å§‹äº«ç”¨æ™ºèƒ½è¯­æ³•æç¤ºï¼","","å¿«æ·é”®:`Ctrl+M`"]},"3_2":{title:"æ™ºèƒ½æç¤º",content:["ä¼°è®¡è®¤çœŸçœ‹è¿‡æ•™ç¨‹çš„ä½ å·²ç»å‘ç°äº†ï¼Œæ–°çš„ä¸€è¡Œæ‰“ä¸€ä¸ª`/`å³å¯è·å¾—å¤§é‡é«˜é¢‘ä½¿ç”¨çš„markdownåŠŸèƒ½ï¼Œæœ‰å›¾ç‰‡ã€å…¬å¼ã€æ–‡æœ¬ã€æµç¨‹å›¾ã€åˆ—è¡¨..."]},"3_3":{title:"è®¾ç½®",content:["è®¾ç½®ç•Œé¢æä¾›äº†åŒä¸»é¢˜ã€ä»¥åŠä¸€äº›é«˜é¢‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¦‚å­—ä½“ï¼Œè¯­è¨€ç­‰ç­‰"]}},nl={"0_1":{title:"Preface",content:["Hello, friend! Welcome to the Markdown Getting Started Guide. This tutorial will help you master the basic syntax of Markdown, as well as some advanced tips and tricks.","Actually, getting started with Markdown is simple. You can exit the guide, press `Ctrl+J` to summon AI, or right-click in the editing area to bring up the menu and click AskAI to start writing. Don't forget to press `Ctrl+S` to save your text to browser cache when you're done.","","If you like this editor, please give it a Star! [Github](https://github.com/LiWeny16/MarkdownOnline?tab=readme-ov-file)"]},"1_1":{title:"Paragraphs and Headers",content:["Writing Markdown paragraphs is simple, just type text directly. For example:","","```\nThis is a paragraph.\n```","","Paragraphs need blank lines between them, otherwise they will be considered as the same content.","","Headers are even simpler, just press `Ctrl+1` on the line"]},"1_2":{title:"Line Breaks",content:["Markdown doesn't automatically break lines by default. If you want to break lines, you can use `<br>`.","```\nThis is the first line.<br>This is the second line.\n```"]},"1_3":{title:"Bold",content:["Markdown can use `**` or `__` to make text bold. For example:","","```\n**This is bold text**\n```","","Effect: **This is bold text**"]},"1_4":{title:"Italic",content:["Markdown uses `*` or `_` to make text italic. For example:","","```\n*This is italic text*\n```","","Effect: *This is italic text*"]},"1_5":{title:"Center Alignment",content:["On a new line, press `/` slash, type any-center-text and hit Enter to get centered text","Similarly, for right alignment:",'```\n<p style="text-align: right">Right aligned</p>\n```',"","Or directly use `Ctrl+E` for center, `Ctrl+R` for right alignment"]},"1_6":{title:"Custom Font",content:["On a new line, press `/` slash, type any-text and hit Enter to get text that looks exactly how you want it to!"]},"1_7":{title:"Export PDF",content:["Export function is available in the More button at the top right, or use the shortcut `Ctrl+P`","","When exporting PDF, you often find page breaks are not ideal, so here's `/page-breaker` to split pages","Or type `|---|` where you need to split"]},"2_1":{title:"Speech to Text",content:["Free, unlimited duration, high accuracy speech-to-text. Come and try it!","","Shortcut: `Ctrl+Alt+V`"]},"2_2":{title:"AI Smart Assistant",content:["AI can help you automatically generate Markdown formatted content, such as auto-formatting, syntax checking, code formatting, etc.","","At any time, I strongly recommend asking AI about specific markdown syntax, which is more efficient","","Shortcut: `Ctrl+J`"]},"2_3":{title:"Auto Formatting",content:["Markdown supports auto-formatting. You can use tools like `Prettier` or `Markdownlint` to optimize formatting and make documents more readable.","","Shortcut: `Shift+Alt+F`"]},"2_4":{title:"File Manager",content:["The editor uses a brand new file interface that can directly open and modify local folders. After opening a folder, pasted images will be automatically saved to the image folder in the current directory","","Shortcut: `Ctrl+Alt+F` (may conflict with WeChat, please modify WeChat's hotkeys), or open it in the More menu at the top right"]},"2_5":{title:"Image Upload",content:["Simple and intuitive, copy image files and paste them into the editor. If no folder is opened, images are automatically saved to browser cache","","Images can be batch copied and uploaded, with shortcut `Ctrl+E` for center alignment. Default style explanation:","",`> #w represents size, #c represents center,
#s represents shadow, #r represents right alignment`]},"2_6":{title:"Synchronized Scrolling",content:["Always available, highly intelligent synchronized scrolling algorithm, a dimensional upgrade over VSCode's simple toggle function","","Shortcut: `Ctrl+Q`"]},"2_7":{title:"Emoji Market",content:["Emojis, pick whatever you likeğŸ˜","","Right-click menu in editing area, Emoji Market"]},"2_8":{title:"Collaboration",content:["Two devices on the same hotspot or supported WIFI under the same network (default all phones support hotspots), can share text and files instantly!","","Where: More button at the top right, Collaboration"]},"2_9":{title:"Tables",content:["On a new line, press `/` and type table to see dynamic table features!","","Examples: `/table3` creates 3x3 table, `/table3x5` creates 3-row 5-column table","","Supports any row/column size like `/table2`, `/table4x6`, etc.","","Legacy version: Press F1 in editing area, type table#3#2 still works"]},"2_10":{title:"Flowcharts, Mind Maps...",content:["On a new line, press `/` and type mermaid to see suggestions for mind maps, flowcharts... and more"]},"2_11":{title:"Double-click Positioning",content:["Double-click on the rendered text on the right to locate the original text on the left. So convenient!!!"]},"3_1":{title:"LaTeX Math Formulas",content:["Start a new line, type `/latex` and hit Enter. Press `\\` in the latex environment to enjoy smart syntax suggestions!","","Shortcut: `Ctrl+M`"]},"3_2":{title:"Smart Suggestions",content:["If you've read the tutorial carefully, you've probably noticed that typing `/` on a new line gives you a lot of frequently used markdown features: images, formulas, text, flowcharts, lists..."]},"3_3":{title:"Settings",content:["The settings interface provides dual themes and some frequently used features, such as fonts, languages, etc."]}};function rl(t){return t==="en"?nl:tl}function al(t){return t.flatMap(e=>[`# ${e.title}`,...e.content])}function oa(t,e,n){return t.map(r=>u.createElement(ze,{key:r.id,itemId:r.id,label:n(r.labelKey),slots:{endIcon:r.children?void 0:Lt},onClick:()=>{r.id.slice(-1)!=="x"&&e([r.id])}},r.children&&oa(r.children,e,n)))}function ol(t){const{t:e}=we();return u.createElement(T,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:"0 0 35%",minHeight:20,overflowX:"hidden",borderRight:"solid rgba(0, 0, 0, 0.12)"}},u.createElement(zr,{"aria-label":"customized",defaultExpandedItems:["1_x"],slots:{endIcon:Lt},sx:{userSelect:"none",minHeight:270,maxWidth:300}},oa(el,t.setActiveId,e)))}function il({activeId:t}){const{i18n:e}=we(),n=e.language||"zh",r=rl(n),a=t.map(s=>r[s]).filter(Boolean),o=al(a);return u.createElement(T,{className:"transparent-scrollbar",sx:{width:"100%",height:"100%",margin:"10px",overflowY:"scroll"}},u.createElement(T,{className:` markdown-body ${ge()==="light"?"markdown-body-light":"markdown-body-dark"} transparent-scrollbar`,sx:{ml:"10px",backgroundColor:ge()==="light"?"#F8FAFB":"#393939"}},o.map((s,l)=>u.createElement("div",{key:l,dangerouslySetInnerHTML:{__html:Qt().render(s)}}))))}function sl(t){const[e,n]=u.useState(["0_1"]);we();const r=ge();return u.createElement(u.Fragment,null,u.createElement(it,{fullScreen:!1,maxWidth:!1,open:t.open,onClose:t.onClose,sx:{height:"100vh"}},u.createElement(T,{className:"transparent-scrollbar",sx:{background:r==="light"?"#F8FAFB":"",padding:"1rem",height:"58vh",width:"58vw"}},u.createElement(T,{className:"transparent-scrollbar",sx:{height:"53vh",display:"flex",background:r==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRradius:"50px",borderRadius:"5px",overflow:"hidden"}},u.createElement(ol,{setActiveId:n}),u.createElement(il,{activeId:e})))),u.createElement(_r,null))}const ll=["äº§å“ç»ç†","æŠ€æœ¯è´Ÿè´£äºº","UIè®¾è®¡å¸ˆ","å‰ç«¯å¼€å‘","åç«¯å¼€å‘","æµ‹è¯•å·¥ç¨‹å¸ˆ","é¡¹ç›®ç»ç†","è¿è¥","å¸‚åœº","å®¢æˆ·","å…¶ä»–"];class cl{displayState=!1;historyDisplayState=!1;currentMeeting=null;isRecording=!1;currentSpeaker="å‘è¨€äºº";messages=[];tempTranscript="";sourceLanguage="zh-CN";targetLanguage="en";enableRealtimeTranslation=!0;participants=[{id:"p1",name:"å‚ä¼šäºº1",role:"äº§å“ç»ç†",isActive:!0},{id:"p2",name:"å‚ä¼šäºº2",role:"æŠ€æœ¯è´Ÿè´£äºº",isActive:!0},{id:"p3",name:"å‚ä¼šäºº3",role:"å‰ç«¯å¼€å‘",isActive:!0},{id:"p4",name:"å‚ä¼šäºº4",role:"åç«¯å¼€å‘",isActive:!0}];enableAISpeakerDetection=!0;aiSuggestions=[];constructor(){Hn(this,{displayState:ie,historyDisplayState:ie,currentMeeting:ie,isRecording:ie,currentSpeaker:ie,messages:ie,tempTranscript:ie,sourceLanguage:ie,targetLanguage:ie,enableRealtimeTranslation:ie,aiSuggestions:ie,participants:ie,enableAISpeakerDetection:ie})}get activeParticipants(){return this.participants.filter(e=>e.isActive)}addParticipant(e="",n="å…¶ä»–"){re(()=>{const r=`p${Date.now()}`,a=e||`å‚ä¼šäºº${this.participants.length+1}`;this.participants.push({id:r,name:a,role:n,isActive:!0})})}removeParticipant(e){re(()=>{this.participants=this.participants.filter(n=>n.id!==e)})}updateParticipant(e,n){re(()=>{const r=this.participants.find(a=>a.id===e);r&&(n.name!==void 0&&(r.name=n.name),n.role!==void 0&&(r.role=n.role))})}toggleParticipantActive(e){re(()=>{const n=this.participants.find(r=>r.id===e);if(n&&(n.isActive=!n.isActive,!n.isActive&&this.currentSpeaker===n.name)){const r=this.participants.find(a=>a.isActive);r&&(this.currentSpeaker=r.name)}})}switchToParticipant(e){re(()=>{const n=this.participants.find(r=>r.id===e);n&&n.isActive&&(this.currentSpeaker=n.name)})}toggleAISpeakerDetection(){re(()=>{this.enableAISpeakerDetection=!this.enableAISpeakerDetection})}getParticipantsDescription(){const e=this.activeParticipants;return e.length===0?"":e.map(n=>`${n.name}(${n.role})`).join("ã€")}display(){this.displayState=!0}hidden(){this.displayState=!1}displayHistory(){this.historyDisplayState=!0}hiddenHistory(){this.historyDisplayState=!1}generateMeetingId(){const e=Date.now(),n=Math.random().toString(36).substr(2,9);return`meeting_${e}_${n}`}generateMeetingTitle(){const e=new Date,n=e.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}),r=e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1}),a=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][e.getDay()];return`ä¼šè®®è®°å½• ${n} ${a} ${r}`}async startNewMeeting(e="zh-CN",n="en",r=""){this.currentMeeting&&this.messages.length>0&&await this.autoSaveMeeting(),re(()=>{const a={id:this.generateMeetingId(),title:r||this.generateMeetingTitle(),startTime:Date.now(),messages:[],language:e,translateLanguage:n};this.currentMeeting=a,this.messages=[],this.tempTranscript="",this.sourceLanguage=e,this.targetLanguage=n,this.isRecording=!1})}async endMeeting(){re(()=>{this.currentMeeting&&(this.currentMeeting.endTime=Date.now(),this.currentMeeting.messages=this.messages.filter(e=>e.isFinal)),this.isRecording=!1}),await this.autoSaveMeeting()}async autoSaveMeeting(){if(this.currentMeeting)try{const{saveMeetingRecord:e}=await Ue(()=>Promise.resolve().then(()=>nd),void 0,import.meta.url),n={id:this.currentMeeting.id,title:this.currentMeeting.title,startTime:this.currentMeeting.startTime,endTime:this.currentMeeting.endTime||Date.now(),language:this.currentMeeting.language,translateLanguage:this.currentMeeting.translateLanguage,summary:this.currentMeeting.summary,messages:this.messages.filter(r=>r.isFinal).map(r=>({id:r.id,speaker:r.speaker,text:r.text,translatedText:r.translatedText,timestamp:r.timestamp,isFinal:r.isFinal,language:r.language}))};await e(n),console.log("ä¼šè®®å·²è‡ªåŠ¨ä¿å­˜")}catch(e){console.error("è‡ªåŠ¨ä¿å­˜ä¼šè®®å¤±è´¥:",e)}}startRecording(){this.isRecording=!0}stopRecording(){this.isRecording=!1}setSpeaker(e){this.currentSpeaker=e}addMessage(e){re(()=>{this.messages.push(e)})}setTempTranscript(e){re(()=>{this.tempTranscript=e})}clearTempTranscript(){re(()=>{this.tempTranscript=""})}updateFinalMessage(e,n){re(()=>{const r=this.messages.find(a=>a.id===e);r&&r.isFinal&&(r.text=n,r.timestamp=Date.now())})}updateLastMessage(e,n=!1){re(()=>{if(this.messages.length>0){const r=this.messages[this.messages.length-1];r.text=e,r.isFinal=n}else this.addMessage({id:`msg_${Date.now()}`,speaker:this.currentSpeaker,text:e,timestamp:Date.now(),isFinal:n,language:this.sourceLanguage})})}updateMessageTranslation(e,n){re(()=>{const r=this.messages.find(a=>a.id===e);r&&(r.translatedText=n)})}setSourceLanguage(e){this.sourceLanguage=e}setTargetLanguage(e){this.targetLanguage=e}toggleRealtimeTranslation(){re(()=>{this.enableRealtimeTranslation=!this.enableRealtimeTranslation})}clearMessages(){re(()=>{this.messages=[]})}setMeetingSummary(e){re(()=>{this.currentMeeting&&(this.currentMeeting.summary=e)})}loadMeeting(e){re(()=>{this.currentMeeting=e,this.messages=[...e.messages],this.sourceLanguage=e.language,this.targetLanguage=e.translateLanguage})}}const dl=new cl,ct=()=>dl,ml=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,ul=i.lazy(()=>Ue(()=>import("./Menu-7d8226e4.js"),["./Menu-7d8226e4.js","./react-0d9c9f23.js","./@babel-518c05f7.js","./@mui-0903014f.js","./clsx-29d81c80.js","./@emotion-c98c060d.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-transition-group-5217f7e1.js","./react-dom-b710246a.js","./scheduler-765c72db.js","./@popperjs-61ffd834.js","./prop-types-c01d55b3.js","./react-is-11039b32.js","./mobx-react-49086c1a.js","./mobx-890d6d9e.js","./mobx-react-lite-64872c2a.js","./use-sync-external-store-3bf5d15d.js","./react-i18next-093df503.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./gsap-cf87e9ff.js","./i18next-2edfafb0.js","./@dnd-kit-b0134b90.js","./markdown-it-multimd-table-766322c9.js","./markdown-it-github-toc-d2e55c92.js","./uslug-b4eaf0e7.js","./unorm-1228fe77.js","./markdown-it-task-lists-4fbe77b0.js","./markdown-it-emoji-66d1da7f.js","./@monaco-editor-41149cb1.js","./state-local-dd516420.js","./html2canvas-a81bcda4.js","./react-resizable-44dc0d2e.js","./react-draggable-4a1d91b3.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-953d2d0b.js"],import.meta.url)),gl=(t,e)=>{ml.sleep(e).then(()=>{window.location.href=t})},fl=()=>{gl("https://bigonion.cn",300)},pl="0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12);",hl=240,yl=Re(t=>{const{t:e}=we(),n=on(),r=ct(),{window:a}=t,[o,s]=i.useState(!1),[l,c]=i.useState(!1),d=()=>{s(h=>!h)},m=()=>{r.display()},f=a!==void 0?()=>a().document.body:void 0,w=()=>{R("æ­¤åŠŸèƒ½ä»ç„¶åœ¨å¼€å‘ä¸­",3e3,{kind:"info"})},C=i.createElement(T,{onClick:d,sx:{textAlign:"center",height:"100%",bgcolor:"black"}},i.createElement(V,{variant:"h2",sx:{fontSize:"20px",my:2,color:"wheat",textAlign:"center",boxShadow:pl}},"Markdown+ Online View"),i.createElement(sn,{sx:{height:"100%",bgcolor:"background.paper"}},i.createElement(et,null,i.createElement(It,{onClick:fl},i.createElement(Ht,null,i.createElement(Ge,null,i.createElement(io,null))),i.createElement(tt,{primary:"Home",secondary:""}))),i.createElement(et,null,i.createElement(It,{onClick:w},i.createElement(Ht,null,i.createElement(Ge,null,i.createElement(Bn,null))),i.createElement(tt,{primary:"Photos",secondary:""}))),i.createElement(et,null,i.createElement(It,{onClick:Ln},i.createElement(Ht,null,i.createElement(Ge,null,i.createElement(so,null))),i.createElement(tt,{primary:"Export",secondary:""}))),i.createElement(et,null,i.createElement(It,{onClick:()=>{}},i.createElement(Ht,null,i.createElement(Ge,null,i.createElement(lo,null))),i.createElement(tt,{primary:"About",secondary:""})))));return i.createElement(i.Fragment,null,i.createElement(T,{className:"FLEX header-app-bar",style:{transition:"0.5s",flex:"0 0 8.7vh"}},i.createElement(Nr,null),i.createElement(Za,{component:"nav",sx:{position:"inherit",justifyContent:"center",zIndex:100,height:"8.7vh",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},i.createElement(eo,null,i.createElement(se,{color:"inherit",onClick:d,sx:{mr:200,display:{sm:"none"}}},i.createElement(to,null)),i.createElement(no,{sx:{color:n.palette.mode=="light"?"black":"white",display:{xs:"none",md:"flex"},transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",mr:1}}),i.createElement(V,{variant:"h1",component:"a",fontFamily:"monospace",href:"/",sx:{flexGrow:1,display:{xs:"none",sm:"block"},color:n.palette.mode==="light"?n.palette.primary.contrastText:n.palette.secondary.contrastText,fontFamily:"emoji",letterSpacing:".3rem",textDecoration:"none"}},i.createElement("h2",{style:{fontSize:"28px"}},"Markdown+ Online View")),i.createElement(T,{sx:{display:{xs:"none",sm:"flex",flexDirection:"row"}}},i.createElement(Ot,{href:"https://bigonion.cn",startIcon:i.createElement(ro,null)},e("t-home")),i.createElement(Ot,{onClick:()=>{c(!0)},startIcon:i.createElement(Lt,null)},e("t-about")),i.createElement(ao,{badgeContent:"NEW!",color:"error",sx:{"& .MuiBadge-badge":{fontSize:"0.55rem",height:"16px",minWidth:"30px",fontWeight:"bold"}}},i.createElement(Ot,{onClick:m,startIcon:i.createElement(Hr,null),sx:{position:"relative"}},e("t-ai-meeting-button"))),i.createElement(i.Suspense,{fallback:i.createElement(Ot,{open,endIcon:i.createElement(oo,null)},e("t-more"))},i.createElement(ul,null)),i.createElement($s,null),i.createElement(Ys,null)))),i.createElement(T,{sx:{display:{xs:"flex",sm:"none"}},component:"nav"},i.createElement(_n,{container:f,variant:"temporary",open:o,onClose:d,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:hl}}},C)),i.createElement(sl,{open:l,onClose:()=>{c(!1)}})))});async function qn(t=null,e=!0){const n=nt.t;if(at().unmemorable.previewMode){R(n("t-preview-mode-error"),2500,{kind:"error"});return}let r=Pt(),a="";if(e&&r!="null")try{pi(r),ye().basic.fileEditLocal?await new Gr().saveFileSilently(r)?a=n("t-save-success-local"):a=n("t-save-success-browser-no-local"):a=n("t-save-success-browser"),R(a)}catch{R(n("t-rejection-error"),2500,{kind:"error"})}else qn()}async function wl(){return await Vr().then(t=>t&&t.length>0?t[0]?.contentText===Pt():!1)}function ia(t,e){if(ye().basic.syncScroll)R("åŒæ­¥æ»šåŠ¨å·²å…³é—­ ğŸ§ ",2e3),Zt({basic:{syncScroll:!1}});else{R("åŒæ­¥æ»šåŠ¨å·²å¼€å¯ ğŸ˜ ",2e3);const n=t.getScrollTop();t.setScrollTop(n+.3),t.setScrollTop(n-.3);const r=t.getVisibleRanges();if(r.length>0){const o=r[0].startLineNumber,s=document.getElementById("view-area");o==1&&s.scrollTo({top:0,behavior:"smooth"})}Zt({basic:{syncScroll:!0}})}}function sa(t,e){ea()?en(!1):en(!0)}function la(t,e){at().unmemorable.aiPanelState?Ke({unmemorable:{aiPanelState:!1}}):(Ke({unmemorable:{selectEndPos:{posx:window.innerWidth/4,posy:window.innerHeight/2.6}}}),Ke({unmemorable:{aiPanelState:!0}}))}let ca=(t,e=!0,n)=>{const r=new webkitSpeechRecognition||new SpeechRecognition;let a=!1;return r.lang=t,r.continuous=!0,r.interimResults=!0,e&&r.start(),r.onstart=()=>{a=!0},r.onresult=o=>{let s="",l=!1;for(let c=o.resultIndex;c<o.results.length;c++)s=o.results[c][0].transcript,l=o.results[c].isFinal;t.startsWith("zh")&&(s=s.replace(/ /g,"")),window._speechData.speechResult=s,window._speechData.isFinal=l,n(s.length,l),a===!1&&r.stopRecognition()},r.onerror=function(o){o.error=="not-allowed"?R("è¯­éŸ³æƒé™è¢«æ‹’ç»ï¼Œä¸–ç•Œï¼Œæ‹’ç»äº†æˆ‘...",4500):console.log("è¯­éŸ³è¯†åˆ«é”™è¯¯:",o.error)},r.onend=()=>{console.log(a),a&&r.start()},r.stopRecognition=()=>{r.stop(),a=!1},{recognition:r,recognizing:a}};const bl=[["zh-CN","æ™®é€šè¯"],["en-US","English"],["ja-JP","æ—¥æœ¬èª"],["fr-ch","æ³•è¯­ï¼ˆç‘å£«ï¼‰"],["ko","éŸ©è¯­"]];let jt="";window._speechData||(window._speechData={processing:!1,speechResult:"",isFinal:!1,speech:null});function da(t,e){const n=ye().basic.speechLanguage??"zh-CN",r=(a,o)=>{const s=window._speechData.speechResult;o&&s&&s!==jt?(lt(s,!0),jt=s,console.log("âœ… æ’å…¥æœ€ç»ˆè¯†åˆ«ç»“æœ:",s)):o||console.log("â³ ä¸´æ—¶è¯†åˆ«ç»“æœ:",s)};if(window._speechData.processing)R("è¯­éŸ³è¯†åˆ«å·²å…³é—­ï¼Œæˆ‘ä¸å¬...",2e3),window._speechData.processing=!1,window._speechData.speech.stopRecognition(),window._speechData.speech=null,window._speechData.speechResult="",jt="";else{R("è¯­éŸ³è¯†åˆ«å·²å¼€å¯ï¼Œå—¯ä½ è¯´ï¼Œæˆ‘åœ¨å¬...",3e3),window._speechData.processing=!0,jt="";let{recognition:a}=ca(n,!0,r);window._speechData.speech=a}}function xl(){document.addEventListener("keydown",t=>{t.ctrlKey&&t.key.toLowerCase()=="q"&&(t.stopPropagation(),t.preventDefault(),ia(window.editor)),t.ctrlKey&&(t.altKey||t.shiftKey)&&t.key.toLowerCase()=="f"&&(t.stopPropagation(),t.preventDefault(),sa()),t.ctrlKey&&t.key.toLowerCase()=="s"&&(t.stopPropagation(),t.preventDefault(),qn()),t.ctrlKey&&t.key.toLowerCase()=="j"&&(t.stopPropagation(),t.preventDefault(),la()),t.ctrlKey&&t.altKey&&t.key.toLowerCase()=="v"&&(t.stopPropagation(),t.preventDefault(),da())},!0)}const vr=ye().advanced.imageSettings.basicStyle,Cn=new Xe,Cl=ta();function kl(t,e){t.getContainerDomNode().addEventListener("paste",async n=>{await vl(n).then(async r=>{let a="";if(r){if(!Cn.getTopDirectoryHandle()||ye().advanced.imageSettings.modePrefer==="vf"){let o=new Date().getTime();for(let s=0;s<=r.length-1;s++)a+=`![${vr}](/vf/${o+s})`;hi(r,o),Cl.refreshImages()}else{let o=ye().advanced.imageSettings.imgStorePath;o=o.slice(-1)==="/"?o.slice(0,o.length-1):o;for(let s=0;s<=r.length-1;s++){let l=await Cn.writeBase64ImageFile(Cn.getTopDirectoryHandle(),".png",r[s],o);a+=`![${vr}](.${o}/${l}.png)`}}lt(a,!0)}})},!0)}function vl(t){return new Promise(e=>{let r=t.clipboardData.items;const a=r.length;let o=[];for(let s=0;s<r.length;s++){let l=r[s];if(l.kind=="file"){t.preventDefault(),t.stopPropagation();let c=l.getAsFile(),d=new FileReader;d.onload=function(f){typeof f.target.result=="string"&&o.push(f.target.result),s===a-1&&e(o)};const m=c.type.split("/")[1];ln.includes(m)&&d.readAsDataURL(c)}}})}let kn=!1,qt=0;function El(t=2){let e,n;qt++,kn?(clearTimeout(e),e=setTimeout(function(){bt(),qt=0},300)):(clearTimeout(n),qt>=t?(kn=!0,bt(),n=setTimeout(()=>{kn=!1,qt=0},200)):typeof window.markdownitIncrementalDOM=="function"&&bt())}function vn(){return document.getElementsByClassName("ibwrapper")[0]?document.getElementsByClassName("ibwrapper")[0].children[0].value:""}function Sl(){console.log(vn().split("#"));const t=vn().split("#")[1],e=vn().split("#")[2];lt(Tl(t,e),!0)}function Tl(t,e){if(!t||!e)return"";let n="| ";for(let r=0;r<e;r++)n+=`Header  ${r+1} | `;n+=`
|`;for(let r=0;r<e;r++)n+="--- | ";for(let r=0;r<t;r++){n+=`
| `;for(let a=0;a<e;a++)n+=` Cell ${r+1}-${a+1} | `}return n}const Er=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function Il(t=3,e="markdown.jpeg"){let n=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div id="exportBox" style="width:64vw" class="markdown-body markdown-body-${ge()==="light"?"light":"dark"}">${n}</div>`,Er.sleep(250).then(()=>{Oo(document.getElementById("exportBox"),{scale:t}).then(r=>{let a=r.toDataURL("image/png",.6);var o=document.createElement("a");o.download=e,o.href=a,o.click()}),Er.sleep(2e3).then(()=>{window.location.reload()})})}function Dl(){lt(`|---|
`,!0)}function Ml(t,e){const n=t.getPosition();n.column==1&&(lt(`$$

$$`,!0),t.setPosition({column:1,lineNumber:n.lineNumber+1}))}function ma(t,e){const r=t.getValue().split(`
`),a=e.lineNumber-1;let o="",s=!1,l=-1,c=-1;const d=new Set(["br","img","input","hr","meta","link"]);for(let m=a;m>=0;m--){const f=r[m].match(/<([a-zA-Z]+)(\s+[^>]*)?>/);if(f){if(o=f[1],d.has(o)||r[m].includes("/>"))continue;l=m,s=!0;break}}if(!s)return!1;for(let m=a;m<r.length;m++){const f=r[m].match(new RegExp(`</${o}>`));if(f){f[0],c=m;break}}return l!==-1&&c!==-1&&l<=a&&a<=c}function Al(t,e){const n=t.getSelection();if(!n)return;const r=t.getModel();if(!r)return;let o=r.getValueInRange(n).trim(),s;const l=n.getStartPosition();ma(r,l)?s=o.startsWith("<b>")&&o.endsWith("</b>")?o.slice(3,-4):`<b>${o}</b>`:s=o.startsWith("**")&&o.endsWith("**")?o.slice(2,-2):`**${o}**`;var d=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);t.executeEdits("my-source",[{range:d,text:s,forceMoveMarkers:!1}]);const m=new e.Selection(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn+s.length);t.setSelection(m)}function Ll(t,e){const n=t.getSelection(),r=t.getModel(),a=n.startLineNumber,o=r.getLineContent(a),s=o.length;let l="",c=s+1,d=s+1;const m=/\!\[(.*?)\]\((.*?)\)/g;if(m.test(o)){const h=o.match(m);console.log(h);let p=o.replace(m,(D,v,z)=>v.includes("#r")?`![${v.replace("#r","")}](${z})`:`![${v}#r](${z})`);const x=new e.Range(a,1,a,o.length+1);t.executeEdits("center-action",[{range:x,text:p,forceMoveMarkers:!0}]);return}const f=o.slice(-2);f===">>"?(l="",c=s-1):f==="||"?(l=">>",c=s-1):l=">>";const w=new e.Range(a,c,a,d);t.executeEdits("my-source",[{range:w,text:l,forceMoveMarkers:!0}]);const C=new e.Selection(a,c+l.length,a,c+l.length);t.setSelection(C)}function Rl(t,e){const n=t.getSelection(),r=Xo();if(!n)return;const a=t.getModel(),o=n.startLineNumber,s=a.getLineContent(o),l=s.length;let c="",d=l+1,m=l+1;const f=/\!\[(.*?)\]\((.*?)\)/g;if(f.test(s)){const x=s.match(f);console.log(x);let D=s.replace(f,(z,A,S)=>A.includes("#c")?`![${A.replace("#c","")}](${S})`:`![${A}#c](${S})`);const v=new e.Range(o,1,o,s.length+1);t.executeEdits("center-action",[{range:v,text:D,forceMoveMarkers:!0}]);return}const w=/```mermaid([\s\S]*?)```/g;if(w.test(r)){let x=r.replace(w,v=>`<center> 
      
${v}
</center>`);const D=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);t.executeEdits("center-action",[{range:D,text:x,forceMoveMarkers:!0}]);return}const C=s.slice(-2);C==="||"?(c="",d=l-1):C===">>"?(c="||",d=l-1):c="||";const h=new e.Range(o,d,o,m);t.executeEdits("my-source",[{range:h,text:c,forceMoveMarkers:!0}]);const p=new e.Selection(o,d+c.length,o,d+c.length);t.setSelection(p)}function $l(t,e){const n=t.getSelection(),r=t.getModel();let a=r.getValueInRange(n),o;ma(r,n.getStartPosition())?a.startsWith("<i>")&&a.endsWith("</i>")?o=a.replace(/^<i>/,"").replace(/<\/i>$/,""):o=`<i>${a}</i>`:a.startsWith("*")&&a.endsWith("*")?o=a.slice(1,-1):o=`*${a}*`;var l=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:l,text:o,forceMoveMarkers:!1}]),o!==a){const c=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+o.length);t.setSelection(c)}}function Fl(t,e){const n=t.getSelection();let a=t.getModel().getValueInRange(n),o;a.startsWith("<u>")&&a.endsWith("</u>")?o=a.slice(3,-4):o=`<u>${a}</u>`;var l=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:l,text:o,forceMoveMarkers:!1}]),o!==a){const c=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+o.length);t.setSelection(c)}}function Pl(t,e){const n=t.getSelection();let a=t.getModel().getValueInRange(n),o;a.startsWith("~~")&&a.endsWith("~~")?o=a.slice(2,-2):o=`~~${a}~~`;var l=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:l,text:o,forceMoveMarkers:!1}]),o!==a){const c=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+o.length);t.setSelection(c)}}function Kt(t,e,n){const r=t.getSelection(),a=new e.Range(r.startLineNumber,1,r.startLineNumber,1),o=t.getModel().getLineContent(r.startLineNumber),s=/^(#+) /,l=o.match(s);if(!(["$"].includes(o[0])||o.match("```")))if(l&&l[1].length===n){console.log(o);const c=o.slice(l[0].length);t.executeEdits("",[{range:new e.Range(r.startLineNumber,1,r.startLineNumber,o.length+1),text:c}])}else{const c="#".repeat(n)+" ",d=l?new e.Range(r.startLineNumber,1,r.startLineNumber,l[0].length+1):a;t.executeEdits("",[{range:d,text:c}])}}const zl=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function _l(t,e){const n={save:e.KeyMod.CtrlCmd|e.KeyCode.KeyS,quotation:e.KeyMod.Shift|e.KeyCode.Quote,format:e.KeyMod.Shift|e.KeyCode.KeyF,pageBreaker:e.KeyMod.CtrlCmd|e.KeyMod.Alt|e.KeyCode.Enter,latexBlock:e.KeyMod.CtrlCmd|e.KeyCode.KeyM,askAI:e.KeyMod.CtrlCmd|e.KeyCode.KeyJ,voice2Words:e.KeyMod.CtrlCmd|e.KeyMod.Alt|e.KeyCode.KeyV,syncScroll:e.KeyMod.CtrlCmd|e.KeyCode.KeyQ,fileManager:e.KeyMod.CtrlCmd|e.KeyMod.Shift|e.KeyCode.KeyF,markdownTextEditFastKey:{bold:e.KeyMod.CtrlCmd|e.KeyCode.KeyB,italics:e.KeyMod.CtrlCmd|e.KeyCode.KeyI,underline:e.KeyMod.CtrlCmd|e.KeyCode.KeyU,alignCenter:e.KeyMod.CtrlCmd|e.KeyCode.KeyE,alignRight:e.KeyMod.CtrlCmd|e.KeyCode.KeyR,deleteLine:e.KeyMod.CtrlCmd|e.KeyCode.Backquote,h1:e.KeyMod.CtrlCmd|e.KeyCode.Digit1,h2:e.KeyMod.CtrlCmd|e.KeyCode.Digit2,h3:e.KeyMod.CtrlCmd|e.KeyCode.Digit3,h4:e.KeyMod.CtrlCmd|e.KeyCode.Digit4}};t.addAction({id:"insert.tableAny",label:"æ’å…¥ä»»æ„è¡Œå’Œåˆ—,æ ¼å¼: table#x#x",keybindings:[],run:()=>{Sl()}}),t.addAction({id:"reload-no-cache",label:"å¼ºåˆ¶åˆ·æ–°Markdownåœ¨çº¿",keybindings:[],run:()=>{window.location.reload(!0)}}),t.addAction({id:"export.asPDF",label:"ä¿å­˜å¹¶å¯¼å‡ºä¸ºPDF",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:async()=>{await wl()?Ln():(qn(),zl.sleep(800).then(()=>{Ln()}))}}),t.addAction({id:"export.asImg",label:"ä½œä¸ºPNGæ ¼å¼çš„å›¾ç‰‡å¯¼å‡º",keybindings:[],run:()=>{Il()}}),t.addAction({id:"insert.pageBreaker",label:"æ’å…¥ä¸€ä¸ªåˆ†é¡µç¬¦",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Dl()}}),t.addAction({id:"insert.latexBlock",label:"æ’å…¥ä¸€ä¸ªLaTexè¯­æ³•å—",keybindings:[n.latexBlock],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Ml(t)}}),t.addAction({id:"insert.voice2words",label:"è¯­éŸ³è½¬æ–‡å­—...å˜Ÿ...å–‚...å¬å¾—è§å—....",keybindings:[n.voice2Words],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{da()}}),t.addAction({id:"command.syncScroll",label:"åŒæ­¥æ»šåŠ¨ (å¼€å¯/å…³é—­)",keybindings:[n.syncScroll],contextMenuGroupId:"navigation",run:()=>{ia(t)}}),t.addAction({id:"command.fileManagerState",label:"æ–‡ä»¶ç®¡ç†å™¨ (å¼€å¯/å…³é—­)",keybindings:[n.fileManager],contextMenuGroupId:"navigation",run:()=>{sa()}}),t.addAction({id:"insert.bold",label:"åŠ ç²—æ–‡æœ¬",keybindings:[n.markdownTextEditFastKey.bold],contextMenuGroupId:"navigation",run:()=>{Al(t,e)}}),t.addAction({id:"insert.alignRight",label:"æ–‡æœ¬å±…å³",keybindings:[n.markdownTextEditFastKey.alignRight],contextMenuGroupId:"navigation",run:()=>{Ll(t,e)}}),t.addAction({id:"insert.alignCenter",label:"æ–‡æœ¬å±…ä¸­",keybindings:[n.markdownTextEditFastKey.alignCenter],contextMenuGroupId:"navigation",run:()=>{Rl(t,e)}}),t.addAction({id:"insert.italics",label:"æ–œä½“",keybindings:[n.markdownTextEditFastKey.italics],run:()=>{$l(t,e)}}),t.addAction({id:"insert.underline",label:"ä¸‹åˆ’çº¿",keybindings:[n.markdownTextEditFastKey.underline],run:()=>{Fl(t,e)}}),t.addAction({id:"insert.deleteLine",label:"åˆ é™¤çº¿",keybindings:[n.markdownTextEditFastKey.deleteLine],run:()=>{Pl(t,e)}}),t.addAction({id:"insert.h1",label:"æ ‡é¢˜1",keybindings:[n.markdownTextEditFastKey.h1],run:()=>{Kt(t,e,1)}}),t.addAction({id:"insert.h2",label:"æ ‡é¢˜2",keybindings:[n.markdownTextEditFastKey.h2],run:()=>{Kt(t,e,2)}}),t.addAction({id:"insert.h3",label:"æ ‡é¢˜3",keybindings:[n.markdownTextEditFastKey.h3],run:()=>{Kt(t,e,3)}}),t.addAction({id:"insert.h4",label:"æ ‡é¢˜4",keybindings:[n.markdownTextEditFastKey.h4],run:()=>{Kt(t,e,4)}}),t.addAction({id:"reload",label:"é‡æ–°åŠ è½½çª—å£(Reload Window)",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:100,run:()=>{window.location.reload()}}),t.addAction({id:"AI",label:"âœ¨Ask AI",keybindings:[n.askAI],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{la()}})}const Bl=["tilde","mathring","widetilde","overgroup","utilde","undergroup","acute","vec","Overrightarrow","bar","overleftarrow","overrightarrow","breve","underleftarrow","underrightarrow","check","overleftharpoon","overrightharpoon","dot","overleftrightarrow","overbrace","ddot","underleftrightarrow","underbrace","grave","overline","overlinesegment","hat","underline","underlinesegment","widehat","widecheck","underbar"],Nl=["lparen","rparen","lceil","rceil","uparrow","lbrack","rbrack","lfloor","rfloor","downarrow","lbrace","rbrace","lmoustache","rmoustache","updownarrow","langle","rangle","lgroup","rgroup","Uparrow","vert","ulcorner","urcorner","Downarrow","Vert","llcorner","lrcorner","Updownarrow","lvert","rvert","lVert","rVert","backslash","lang","rang","lt","gt","llbracket","rrbracket","lBrace","rBrace"],Hl=["left","big","bigl","bigm","bigr","middle","Big","Bigl","Bigm","Bigr","right","bigg","biggl","biggm","biggr","Bigg","Biggl","Biggm","Biggr"],Ol=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","varGamma","varDelta","varTheta","varLambda","varXi","varPi","varSigma","varUpsilon","varPhi","varPsi","varOmega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega","varepsilon","varkappa","vartheta","thetasym","varpi","varrho","varsigma","varphi","digamma"],Wl=["imath","nabla","Im","Reals","jmath","partial","image","wp","aleph","Game","Bbbk","weierp","alef","Finv","N","Z","alefsym","cnums","natnums","beth","Complex","R","gimel","ell","Re","daleth","hbar","real","eth","hslash","reals"],jl=["cancel","overbrace","bcancel","underbrace","xcancel","not =","sout","boxed","phase","tag","tag*"],ql=["atop"],Kl=["substack"],Ul=["stackrel","overset","underset","raisebox"],Vl=["mathllap","mathrlap","mathclap","llap","rlap","clap","smash"],Jl=["thinspace","medspace","thickspace","enspace","quad","qquad","negthinspace","negmedspace","nobreakspace","negthickspace","space","mathstrut"],Gl=["kern","mkern","mskip","hskip","hspace","hspace*","phantom","hphantom","vphantom"],Xl=["forall","complement","therefore","emptyset","exists","subset","because","empty","exist","supset","mapsto","varnothing","nexists","mid","to","implies","in","land","gets","impliedby","isin","lor","leftrightarrow","iff","notin","ni","notni","neg","lnot"],Yl=["Set","set"],Ql=["def","gdef","edef","xdef","let","futurelet","global","newcommand","renewcommand","providecommand","long","char","mathchoice","TextOrMath","@ifstar","@ifnextchar","@firstoftwo","@secondoftwo","relax","expandafter","noexpand"],Zl=["sum","prod","bigotimes","bigvee","int","coprod","bigoplus","bigwedge","iint","intop","bigodot","bigcap","iiint","smallint","biguplus","bigcup","oint","oiint","oiiint","bigsqcup"],ec=["cdot","gtrdot","pmod","cdotp","intercal","pod","centerdot","land","rhd","circ","leftthreetimes","rightthreetimes","amalg","circledast","ldotp","rtimes","And","circledcirc","lor","setminus","ast","circleddash","lessdot","smallsetminus","barwedge","Cup","lhd","sqcap","bigcirc","cup","ltimes","sqcup","bmod","curlyvee","times","boxdot","curlywedge","mp","unlhd","boxminus","div","odot","unrhd","boxplus","divideontimes","ominus","uplus","boxtimes","dotplus","oplus","vee","bullet","doublebarwedge","otimes","veebar","Cap","doublecap","oslash","wedge","cap","doublecup","pm","plusmn","wr"],tc=["over","above"],nc=["frac","dfrac","tfrac","cfrac","genfrac"],rc=["choose"],ac=["binom","dbinom","tbinom","brace","brack"],oc=["arcsin","cosec","deg","sec","arccos","cosh","dim","sin","arctan","cot","exp","sinh","arctg","cotg","hom","sh","arcctg","coth","ker","tan","arg","csc","lg","tanh","ch","ctg","ln","tg","cos","cth","log","th","argmax","injlim","min","varinjlim","argmin","lim","plim","varliminf","det","liminf","Pr","varlimsup","gcd","limsup","projlim","varprojlim","inf","max","sup"],ic=["operatorname","operatorname*","operatornamewithlimits"],sc=["sqrt"],lc=["doteqdot","lessapprox","smile","eqcirc","lesseqgtr","sqsubset","eqcolon","minuscolon","lesseqqgtr","sqsubseteq","Eqcolon","minuscoloncolon","lessgtr","sqsupset","approx","eqqcolon","equalscolon","lesssim","sqsupseteq","approxcolon","Eqqcolon","equalscoloncolon","ll","Subset","approxcoloncolon","eqsim","lll","subset","sub","approxeq","eqslantgtr","llless","subseteq","sube","asymp","eqslantless","lt","subseteqq","backepsilon","equiv","mid","succ","backsim","fallingdotseq","models","succapprox","backsimeq","frown","multimap","succcurlyeq","between","ge","origof","succeq","bowtie","geq","owns","succsim","bumpeq","geqq","parallel","Supset","Bumpeq","geqslant","perp","supset","circeq","gg","pitchfork","supseteq","supe","colonapprox","ggg","prec","supseteqq","Colonapprox","coloncolonapprox","gggtr","precapprox","thickapprox","coloneq","colonminus","gt","preccurlyeq","thicksim","Coloneq","coloncolonminus","gtrapprox","preceq","trianglelefteq","coloneqq","colonequals","gtreqless","precsim","triangleq","Coloneqq","coloncolonequals","gtreqqless","propto","trianglerighteq","colonsim","gtrless","risingdotseq","varpropto","Colonsim","coloncolonsim","gtrsim","shortmid","vartriangle","cong","imageof","shortparallel","vartriangleleft","curlyeqprec","in","isin","sim","vartriangleright","curlyeqsucc","Join","simcolon","vcentcolon","ratio","dashv","le","simcoloncolon","vdash","dblcolon","coloncolon","leq","simeq","vDash","doteq","leqq","smallfrown","Vdash","Doteq","leqslant","smallsmile","Vvdash"],cc=["gnapprox","ngeqslant","nsubseteq","precneqq","gneq","ngtr","nsubseteqq","precnsim","gneqq","nleq","nsucc","subsetneq","gnsim","nleqq","nsucceq","subsetneqq","gvertneqq","nleqslant","nsupseteq","succnapprox","lnapprox","nless","nsupseteqq","succneqq","lneq","nmid","ntriangleleft","succnsim","lneqq","notin","ntrianglelefteq","supsetneq","lnsim","notni","ntriangleright","supsetneqq","lvertneqq","nparallel","ntrianglerighteq","varsubsetneq","ncong","nprec","nvdash","varsubsetneqq","ne","npreceq","nvDash","varsupsetneq","neq","nshortmid","nVDash","varsupsetneqq","ngeq","nshortparallel","nVdash","ngeqq","nsim","precnapprox"],dc=["circlearrowleft","leftharpoonup","rArr","circlearrowright","leftleftarrows","rarr","curvearrowleft","leftrightarrow","restriction","curvearrowright","Leftrightarrow","rightarrow","Darr","leftrightarrows","Rightarrow","dArr","leftrightharpoons","rightarrowtail","darr","leftrightsquigarrow","rightharpoondown","dashleftarrow","Lleftarrow","rightharpoonup","dashrightarrow","longleftarrow","rightleftarrows","downarrow","Longleftarrow","rightleftharpoons","Downarrow","longleftrightarrow","rightrightarrows","downdownarrows","Longleftrightarrow","rightsquigarrow","downharpoonleft","longmapsto","Rrightarrow","downharpoonright","longrightarrow","Rsh","gets","Longrightarrow","searrow","Harr","looparrowleft","swarrow","hArr","looparrowright","to","harr","Lrarr","twoheadleftarrow","hookleftarrow","lrArr","twoheadrightarrow","hookrightarrow","lrarr","Uarr","iff","Lsh","uArr","impliedby","mapsto","uarr","implies","nearrow","uparrow","Larr","nleftarrow","Uparrow","lArr","nLeftarrow","updownarrow","larr","nleftrightarrow","Updownarrow","leadsto","nLeftrightarrow","upharpoonleft","leftarrow","nrightarrow","upharpoonright","Leftarrow","nRightarrow","upuparrows","leftarrowtail","nwarrow","leftharpoondown","Rarr"],mc=["xleftarrow","xrightarrow","xLeftarrow","xRightarrow","xleftrightarrow","xLeftrightarrow","xhookleftarrow","xhookrightarrow","xtwoheadleftarrow","xtwoheadrightarrow","xleftharpoonup","xrightharpoonup","xleftharpoondown","xrightharpoondown","xleftrightharpoons","xrightleftharpoons","xtofrom","xmapsto","xlongequal"],uc=["bra","Bra","ket","Ket","braket","Braket"],gc=["mathbin","mathclose","mathinner","mathop","mathopen","mathord","mathpunct","mathrel"],fc=["color","textcolor","colorbox"],pc=["rm","bf","it","sf","tt"],hc=["mathrm","mathbf","mathit","mathnormal","textbf","textit","textrm","bold","Bbb","textnormal","boldsymbol","mathbb","text","bm","frak","mathsf","mathtt","mathfrak","textsf","texttt","mathcal","mathscr","pmb"],yc=["Huge","huge","LARGE","Large","large","normalsize","small","footnotesize","scriptsize","tiny"],wc=["displaystyle","textstyle","scriptstyle","scriptscriptstyle","limits","nolimits","verb"],bc=["cdots","LaTeX","ddots","TeX","ldots","nabla","vdots","infty","dotsb","infin","dotsc","checkmark","dotsi","dag","dotsm","dagger","dotso","sdot","ddag","mathellipsis","ddagger","Box","Dagger","lq","square","angle","blacksquare","measuredangle","rq","triangle","sphericalangle","triangledown","top","triangleleft","bot","triangleright","colon","bigtriangledown","backprime","bigtriangleup","pounds","prime","blacktriangle","mathsterling","blacktriangledown","blacktriangleleft","yen","blacktriangleright","surd","diamond","degree","Diamond","lozenge","mho","blacklozenge","diagdown","star","diagup","bigstar","flat","clubsuit","natural","copyright","clubs","sharp","circledR","diamondsuit","heartsuit","diamonds","hearts","circledS","spadesuit","spades","maltese","minuso"],xc=["message","errmessage","show"],Cc=["matrix","array","pmatrix","bmatrix","vmatrix","Vmatrix","Bmatrix","cases","rcases","smallmatrix","subarray","equation","split","align","gather","alignat","CD","darray","dcases","drcases","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","equation*","gather*","align*","alignat*","gathered","aligned","alignedat"];function kc(){const t=new Date,e=t.getDate(),n=t.toLocaleString("en-US",{month:"short"}),r=t.getFullYear();return`${e}, ${n}, ${r}`}async function vc(t,e){e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:(l,c,d)=>{const m=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column}),f=l.getValueInRange({startLineNumber:c.lineNumber,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column}),w={startLineNumber:c.lineNumber,startColumn:c.column-1,endLineNumber:c.lineNumber,endColumn:c.column},C=[{pattern:/\/table(\d+)x(\d+)$/i,type:"complete"},{pattern:/\/table(\d+)x$/i,type:"partial"},{pattern:/\/table(\d+)$/i,type:"square"},{pattern:/\/table$/i,type:"basic"}];for(const h of C){const p=f.match(h.pattern);if(p&&!Fn(m)){const x={startLineNumber:c.lineNumber,startColumn:c.column-f.length+f.lastIndexOf("/"),endLineNumber:c.lineNumber,endColumn:c.column};let D=[];if(h.type==="complete"){const v=parseInt(p[1]),z=parseInt(p[2]);v>0&&z>0&&v<=20&&z<=20&&D.push({label:`/table${v}x${z} (${v}è¡Œ${z}åˆ—è¡¨æ ¼)`,detail:`æ’å…¥ä¸€ä¸ª${v}è¡Œ${z}åˆ—çš„è¡¨æ ¼`,kind:e.languages.CompletionItemKind.Function,insertText:Sr(v,z),insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:x})}else if(h.type==="partial"){const v=parseInt(p[1]);v>0&&v<=20&&D.push({label:`/table${v}x... (${v}è¡Œè¡¨æ ¼)`,detail:`ç»§ç»­è¾“å…¥åˆ—æ•°ï¼Œå¦‚ /table${v}x3`,kind:e.languages.CompletionItemKind.Function,insertText:`table${v}x`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:x})}else if(h.type==="square"){const v=parseInt(p[1]);v>0&&v<=20&&(D.push({label:`/table${v} (${v}x${v}æ­£æ–¹å½¢è¡¨æ ¼)`,detail:`æ’å…¥ä¸€ä¸ª${v}è¡Œ${v}åˆ—çš„æ­£æ–¹å½¢è¡¨æ ¼`,kind:e.languages.CompletionItemKind.Function,insertText:Sr(v,v),insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:x}),D.push({label:`/table${v}x... (è‡ªå®šä¹‰${v}è¡Œè¡¨æ ¼)`,detail:"è¾“å…¥xåç»§ç»­æŒ‡å®šåˆ—æ•°",kind:e.languages.CompletionItemKind.Function,insertText:`table${v}x`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:x}))}else h.type==="basic"&&D.push({label:"/table (nè¡Œmåˆ—è¡¨æ ¼)",detail:"å¦‚ /table3 æˆ– /table3x5",kind:e.languages.CompletionItemKind.Function,insertText:"table",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:x});if(D.length>0)return{suggestions:D}}}if(!Fn(m)&&c.column===2)return{suggestions:[{label:"/code (ä»£ç å—)",detail:"æ’å…¥ä¸€æ®µä»£ç å—",kind:e.languages.CompletionItemKind.Function,insertText:"\n```${1:js}\n${2:}\n```\n",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:w},{label:"/image (å›¾ç‰‡)",detail:"æ’å…¥å›¾ç‰‡",kind:e.languages.CompletionItemKind.Function,insertText:`![${ye().advanced.imageSettings.basicStyle}\${1:}](\${2:})`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:w},{label:"/table (nè¡Œmåˆ—è¡¨æ ¼)",detail:"å¦‚ /table3 æˆ– /table3x5",kind:e.languages.CompletionItemKind.Function,insertText:"table",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:w},{label:"/latex-block (å…¬å¼å—)",detail:"åˆ›å»ºä¸€ä¸ªLaTexå…¬å¼å—",kind:e.languages.CompletionItemKind.Field,sortText:"4",range:w,insertText:`$$
\${1:}
$$
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/list-in-order (æœ‰åºåˆ—è¡¨)",detail:"åˆ›å»ºæœ‰åºåˆ—è¡¨",kind:e.languages.CompletionItemKind.Function,sortText:"5",range:w,insertText:`
1. \${1:}
2. \${2:}
3. \${3:}
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/page-breaker (åˆ†é¡µç¬¦)",detail:"æ’å…¥ä¸€ä¸ªåˆ†é¡µç¬¦",kind:e.languages.CompletionItemKind.Function,sortText:"6",range:w,insertText:`
|---|
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-flowChart (æµç¨‹å›¾)",detail:"æ’å…¥mermaidæµç¨‹å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"7",range:w,insertText:"\n```mermaid\nflowchart TB\nStart --> Stop\n```\n",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-pie-chart (é¥¼å›¾)",detail:"æ’å…¥mermaidé¥¼å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"8",range:w,insertText:'\n```mermaid\npie title ${1:Pets adopted by volunteers}\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n```\n',insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-mind-map (æ€ç»´å¯¼å›¾)",detail:"æ’å…¥mermaidæ€ç»´å¯¼å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"9",range:w,insertText:`
\`\`\`mermaid
mindmap
Root
    A
      B
      C
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-time-line (æ—¶é—´çº¿å›¾)",detail:"æ’å…¥mermaidæ—¶é—´çº¿å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"a1",range:w,insertText:`
\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : Youtube
    2006 : Twitter
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-sequence (åºåˆ—å›¾)",detail:"æ’å…¥mermaidåºåˆ—å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"a2",range:w,insertText:`
\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-font-size-text (ä»»æ„å¤§å°æ–‡å­—)",detail:"ä½ èƒ½ä»»æ„æŒæ§å¤§å°çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a3",range:w,insertText:'\n<p style="font-size:${1:16}px">${2:}</p>\n',insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-center-text (å±…ä¸­æ–‡æœ¬)",detail:"ä½ èƒ½ä»»æ„æŒæ§ä½ç½®çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a4",range:w,insertText:`
<p style="text-align:center">\${1:}</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-color-text (ä»»æ„é¢œè‰²æ–‡æœ¬)",detail:"ä½ èƒ½ä»»æ„æŒæ§é¢œè‰²çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a5",range:w,insertText:`
<p style="color:red">\${1:}</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-text (ä»»æ„æ–‡æœ¬)",detail:"ä½ èƒ½ä»»æ„æŒæ§çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a6",range:w,insertText:`
<p style="font-size:16px;text-align:center;color:black;font-weight:bold;font-style:italic;">
\${1:}
</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/title-text (å›¾è¡¨é¢˜æ³¨é‡Šæ–‡æœ¬)",detail:"å›¾ç‰‡ã€è¡¨æ ¼ä¸‹çš„å°å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a6",range:w,insertText:`
<p style="font-size:16px;text-align:center;font-style:italic;">
\${1:}
</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/cover (å°é¢ï¼Œç§’äº†)",detail:"å›¾ç‰‡ã€è¡¨æ ¼ä¸‹çš„å°å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a7",range:w,insertText:`
<br>
<br>
<br>

![#w70%#c](https://www.nus.edu.sg/images/default-source/identity-images/NUS_logo_full-horizontal.jpg)
<br>
<div>
 <center>
      <h1>\${1:Title}</h1><br><br><br><br><br><br><br><br>
      <p style="font-size:17px;">
        <b>
        \${2:Name}<br>
        \${3:[INFO]}<br>
        \${4:${kc()}}
        </b>
      </p>
 </center>
</div>

|---|
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/prettier-ignore (å¿½ç•¥æ ¼å¼åŒ–è¡Œ)",detail:"ä¸‹ä¸€è¡Œä¸è¿›è¡Œprettieræ ¼å¼åŒ–",kind:e.languages.CompletionItemKind.Function,insertText:"<!-- prettier-ignore -->",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:w,sortText:"b1"},{label:"/prettier-ignore-block (å¿½ç•¥æ ¼å¼åŒ–å—)",detail:"å¿½ç•¥prettieræ ¼å¼åŒ–å—",kind:e.languages.CompletionItemKind.Function,insertText:`<!-- prettier-ignore-start -->
\${1:}
<!-- prettier-ignore-end -->`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:w,sortText:"b2"}]}}});class n{children;isEndOfWord;constructor(){this.children={},this.isEndOfWord=!1}}class r{root;constructor(){this.root=new n}insert(c){let d=this.root;for(let m of c)d.children[m]||(d.children[m]=new n),d=d.children[m];d.isEndOfWord=!0}search(c){let d=this.root;for(let m of c){if(!d.children[m])return[];d=d.children[m]}return this._findAllWords(d,c)}_findAllWords(c,d){let m=[];c.isEndOfWord&&m.push(d);for(let f in c.children)m=m.concat(this._findAllWords(c.children[f],d+f));return m}}const a=new r;e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:"abcdefghijklmnopqrstuvwxyz".split(""),provideCompletionItems:async(l,c)=>{const d=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});let m=await ai("spelling_data_json");m&&m.forEach(C=>a.insert(C));const f=m?d.split(/\s+/).pop():"";let w;return m?w=a.search(f.toLowerCase()).map(C=>({label:C,kind:e.languages.CompletionItemKind.Text,insertText:C,detail:`Suggested word: ${C}`})):w=[],{suggestions:w}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["\\"],provideCompletionItems:(l,c,d)=>{const m=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});if(Ec(e,l,m,c)){const f=Array.from([...Nl,...Hl,...Ol,...Wl,...Jl,...ql,...Xl,...Ql,...Zl,...ec,...rc,...tc,...oc,...lc,...cc,...dc,...pc,...yc,...wc,...bc,...xc],(p,x)=>({label:`\\${p}`,kind:e.languages.CompletionItemKind.Function,insertText:p,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(p[0])?"1":"0"})),w=Array.from([...Bl,...jl,...Kl,...Vl,...Gl,...Yl,...ic,...sc,...mc,...hc,...uc,...gc],(p,x)=>({label:`\\${p}`,kind:e.languages.CompletionItemKind.Function,insertText:`${p}{$1}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(p[0])?"1":"0"})),C=Array.from([...Ul,...ac,...nc,...fc],(p,x)=>({label:`\\${p}`,kind:e.languages.CompletionItemKind.Function,insertText:`${p}{$1}{$2}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(p[0])?"1":"0"})),h=[{label:"\\begin",kind:e.languages.CompletionItemKind.Function,insertText:"begin{${1|"+Cc.join(",")+`|}}
	$2
\\end{$1}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}];return{suggestions:[...f,...w,...C,...h]}}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["^"],provideCompletionItems:(l,c,d)=>{const m=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});if(Ic(m))return{suggestions:[{label:"RED",kind:e.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."},{label:"PINK",kind:e.languages.CompletionItemKind.Function,insertText:"PINK",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"PINK..."}]}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:async(l,c,d)=>{const m=l.getValueInRange({startLineNumber:c.lineNumber,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});let w=new Xe().topDirectoryArray;if(Sc(e,l,m)){const C=m.match(/!\[.*?\]\(\.\/([^\/)]+(?:\/[^\/)]+)*)\/?$/);if(m.slice(-2)==="./"&&!C)return{suggestions:s(w,e)};if(console.log(C),C){const p=C[1].split("/");console.log(p);const x=o(w,p);if(x&&x.fileType==="folder"&&x.children)return{suggestions:s(x.children,e)};{const D=p.slice(0,-1),v=p[p.length-1],z=o(w,D);if(z&&z.fileType==="folder"&&z.children)return{suggestions:z.children.filter(S=>S.label.startsWith(v)).map(S=>({label:S.label,kind:S.fileType==="folder"?e.languages.CompletionItemKind.Folder:e.languages.CompletionItemKind.File,insertText:S.label,detail:S.fileType==="folder"?"Folder":"File",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}))}}}}return{suggestions:[]}}});function o(l,c){if(c.length===0)return{children:l};let d=null,m=[...c];return d=l.find(f=>f.label===m[0]&&f.fileType==="folder"),d?(m.shift(),m.length===0?d:d.children?o(d.children,m):null):null}function s(l,c){return l.map(d=>({label:d.label,kind:d.fileType==="folder"?c.languages.CompletionItemKind.Folder:c.languages.CompletionItemKind.File,insertText:d.label,detail:d.fileType==="folder"?"Folder":"File",insertTextRules:c.languages.CompletionItemInsertTextRule.InsertAsSnippet}))}}function Ec(t,e,n,r){return!!(n[n.length-1]==="\\"&&(Fn(n)||Tc(e,r)))}function Sc(t,e,n,r){const a=/!\[.*?\]\((\.\/[^)]*)$/;return!!n.match(a)}function Fn(t){return t.match(/\$\$/g)?t.match(/\$\$/g).length%2===1:!1}function Tc(t,e,n){const r=t.getLineContent(e.lineNumber),a=/\$(?!\s)((\\\$|[^\$\n])*?)(?<!\s)\$/g;if(r.match(a)){const o=r,l=window.editor.getPosition().column-1,c=[];let d;for(;(d=a.exec(o))!==null;){const f=d.index+1,w=a.lastIndex-1;c.push({startIndex:f,endIndex:w})}return c.some(f=>l>f.startIndex&&l<=f.endIndex)}else return!1}function Ic(t){return t[t.length-1]==="^"}function Sr(t,e){if(t<=0||e<=0)return"";let n=`
`,r="|";for(let o=0;o<e;o++)r+=`\${${o+1}:}    |`;n+=r+`
`;let a="|";for(let o=0;o<e;o++)a+="--- |";n+=a+`
`;for(let o=1;o<t;o++){let s="|";for(let l=0;l<e;l++)s+=`\${${e+o*e+l+1}:}    |`;n+=s+`
`}return n}function Dc(t,e){e.languages.registerDocumentFormattingEditProvider("markdown",{async provideDocumentFormattingEdits(n){let r=n.getValue();var a=t.getPosition();try{const o=await Ue(()=>import("./prettier-8105477d.js").then(c=>c.s),["./prettier-8105477d.js","./@babel-518c05f7.js"],import.meta.url),s=await Ue(()=>import("./prettier-8105477d.js").then(c=>c.m),["./prettier-8105477d.js","./@babel-518c05f7.js"],import.meta.url),l=await o.format(r,{parser:"markdown",plugins:[s.default]});na(window.monaco,t,l),t.setPosition(a)}catch(o){console.error("Prettier formatting failed:",o)}return[]}})}function Mc(){const t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;return t/e>=1?"PC":"mobile"}function Ac(t,e){let n,r={posx:50,posy:50};function a(o){Ke({unmemorable:{promptPanelState:!1,selectEndPos:r}})}document.addEventListener("mouseup",o=>{o.clientX,o.clientY,o.target.closest(".prompt-panel-content")||(r={posx:o.clientX,posy:o.clientY},Ke({unmemorable:{mouseUpPos:r}}))}),t.onDidChangeCursorSelection(o=>{const s=t.getSelection();clearTimeout(n),s&&!s.isEmpty()&&(n=setTimeout(()=>{a()},700))}),t.onContextMenu(o=>{ks({posx:o.event.posx,posy:o.event.posy})})}function Lc(t,e){t.onDidFocusEditorWidget(()=>{window._deco.clear()})}function Rc(t){const e=()=>{t(Math.floor(window.innerHeight*.9))};window.addEventListener("resize",e)}function $c(t,e){const n=Or(()=>{Fc(t)},20);t.onDidScrollChange(n)}function Fc(t,e){if(ye().basic.syncScroll){const n=t.getVisibleRanges();if(n.length>0){const a=n[0].startLineNumber;Pc(a-1)}}}function Pc(t){const e=document.getElementById("view-area");if(!e)return;if(t===0){e.scrollTo({top:0,behavior:"smooth"});return}const n=document.querySelectorAll("#view-area [data-line]");let r=null,a=null,o=1/0,s=1/0,l=null;if(n.forEach(c=>{const m=parseInt(c.getAttribute("data-line")||"0",10)-t;m==0?l=c:(m<0&&Math.abs(m)<o&&(o=Math.abs(m),r=c),m>0&&m<s&&(s=m,a=c))}),l){e.scrollTo({top:l.offsetTop,behavior:"smooth"});return}if(!a){e.scrollTo({top:r.offsetTop,behavior:"smooth"});return}if(r&&a){const c=r.offsetTop,d=a.offsetTop,m=(t-(t-o))/(s+o),f=(d-c)*m+c;e.scrollTo({top:f,behavior:"smooth"})}}function zc(t,e){const n=t.getContainerDomNode();if(!n)return;n.addEventListener("dragover",a=>{a.preventDefault();const o=a.dataTransfer?.types||[];o.includes("text/html")||o.includes("text/plain"),a.dataTransfer.dropEffect="copy"});const r=a=>{a.preventDefault(),a.stopPropagation(),window._setIsDragging(!1),a.dataTransfer.dropEffect="none"};window.addEventListener("dragend",r,!0),n.addEventListener("drop",a=>{if(window._setIsDragging(!1),a.dataTransfer){let o=a.dataTransfer.getData("text/html"),s=!1;if(o)s=!0;else{const c=a.dataTransfer.getData("text/plain");if(c)try{const d=JSON.parse(c);if(d.itemId&&d.path)if(d.fileType==="file")o=`./${d.path}`;else return;else o=c}catch{o=c}}const l=t.getTargetAtClientPoint(a.clientX,a.clientY);if(l&&o){const{position:c}=l;t.executeEdits(null,[{range:new Ca(c.lineNumber,c.column,c.lineNumber,c.column),text:o,forceMoveMarkers:!0}]),t.setPosition({lineNumber:c.lineNumber,column:c.column+o.length}),t.focus()}a.dataTransfer.dropEffect="none",console.log("Dropped data:",o,"isImageDrop:",s)}},!0)}No.config({paths:{vs:"https://cdn.jsdmirror.com/npm/monaco-editor@0.45.0/min/vs"}});const _c={"index.py":{name:"index.py",language:"python",value:""},"index.js":{name:"index.js",language:"javascript",value:"nihao"},"index.md":{name:"index.md",language:"markdown",value:""}},Bc=Re(function({setMarkdownViewerWidth:e}){const n=u.useRef(null),[r,a]=i.useState("index.md"),o=_c[r],[s,l]=u.useState(640),[c,d]=u.useState(800),[m,f]=i.useState(!1),[w,C]=i.useState({fontSize:16,wordWrap:ye().basic.editorAutoWrap?"on":"off",formatOnType:!0,formatOnPaste:!1,stickyScroll:{enabled:!0,defaultModel:"outlineModel",maxLineCount:5},quickSuggestions:!0,fontLigatures:!0,autoSurround:"quotes",autoClosingQuotes:"always",smoothScrolling:!0,codeLens:!1,pasteAs:{enabled:!1,showPasteSelector:"never"},peekWidgetDefaultFocus:"tree",cursorSmoothCaretAnimation:"explicit",colorDecorators:!0,minimap:{enabled:!0},unicodeHighlight:{nonBasicASCII:!1,ambiguousCharacters:!1},dragAndDrop:!0}),h=()=>{document.body.style.userSelect="none",document.body.style.cursor="col-resize"},p=()=>{document.body.style.userSelect="auto",document.body.style.cursor="default"},x=W=>{},D=()=>{f(!0),h(),document.getElementsByClassName("react-resizable-handle")[0].style.backgroundColor="#90caf9"},v=()=>{f(!1),p(),document.getElementsByClassName("react-resizable-handle")[0].style.backgroundColor="",setTimeout(()=>{C(W=>({...W,minimap:{enabled:!0}}))},300)},z=(W,$)=>{const G=document.getElementsByClassName("pdf-preview"),ee=document.getElementById("editor").clientWidth-$.size.width-20+"px";Array.from(G).forEach(Q=>{Q.style.width=ee}),C(Q=>({...Q,minimap:{enabled:!1}})),l(W.x)};function A(W,$){Mc()=="PC"&&l(document.getElementById("editor").clientWidth/2),d(document.getElementById("editor").clientHeight),$.languages.setLanguageConfiguration("markdown",{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/*",close:"*/",notIn:["string"]},{open:"ï¼Ÿ",close:"ï¼Ÿ",notIn:["string","comment"]}]}),$.languages.setMonarchTokensProvider("markdown",{tokenizer:{root:[[/\b(function|return|var)\b/,"keyword"],[/\|\|/,"string"],[/>>/,"string"],[/[{}]/,"delimiter"],[/[a-z_$][\w$]*/,"identifier"],[/"[^"]*"/,"string"],[/\d+/,"number"],[/[$$$$]/,"keyword"]]}}),$.languages.registerFoldingRangeProvider("markdown",{provideFoldingRanges(G,q,ee){const Q=G.getLineCount(),j=[];let be=!1;for(let ae=1;ae<=Q;ae++){const F=G.getLineContent(ae).trim();if(/^```/.test(F)){be=!be;continue}if(!be){const K=/^(#{1,6})\s+/.exec(F);if(K){const Y=K[1].length;j.push({level:Y,line:ae})}}}const te=[];for(let ae=0;ae<j.length;ae++){const{level:F,line:K}=j[ae];let Y=Q;for(let B=ae+1;B<j.length;B++)if(j[B].level<=F){Y=j[B].line-1;break}for(;Y>K&&G.getLineContent(Y).trim()==="";)Y--;Y>K&&te.push({start:K,end:Y})}return te}})}function S(){}function P(W,$){window.editor=W,window.monaco=$,W.onDidChangeModelContent(G=>{if(Fi()){console.log("è·³è¿‡å˜åŒ–äº‹ä»¶ - æ­£åœ¨å†™å…¥Monaco");return}Or(()=>{Ni(),El(2)},150)()}),Zr(["markdownitIncrementalDOM","katex","IncrementalDOM"]).then(()=>{ws(W,$),A(W,$),kl(W),_l(W,$),vc(W,$),Dc(W,$),Ac(W),Lc(W),$c(W),zc(W),Rc(d)})}return u.useEffect(()=>{},[]),u.createElement(u.Fragment,null,u.createElement("div",{ref:n,id:"monaco-editor",style:{width:s,height:"100%"}},u.createElement(Nn,{sx:{backgroundColor:"transparent",color:"#fff",zIndex:9999},open:m}),u.createElement(Wo,{className:"custom-resizable",width:s,height:c,draggableOpts:{grid:[2,5]},onResizeStart:D,onResizeStop:v,onResize:z,axis:"x"},u.createElement(Ho,{className:"monaco-editor-inner",height:"100%",width:s,theme:ge()==="light"?"vs-light":"vs-dark",path:o.name,defaultLanguage:o.language,defaultValue:o.value,onMount:P,onChange:x,options:w,beforeMount:S}))))});function Nc({setMarkdownViewerWidth:t}){return u.createElement(u.Fragment,null,u.createElement(Bc,{setMarkdownViewerWidth:t}))}const Hc=u.lazy(()=>Ue(()=>import("./AIPanel-e50dfff3.js"),["./AIPanel-e50dfff3.js","./react-0d9c9f23.js","./@babel-518c05f7.js","./mobx-react-49086c1a.js","./mobx-890d6d9e.js","./mobx-react-lite-64872c2a.js","./react-dom-b710246a.js","./scheduler-765c72db.js","./use-sync-external-store-3bf5d15d.js","./gsap-cf87e9ff.js","./@mui-0903014f.js","./clsx-29d81c80.js","./@emotion-c98c060d.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-transition-group-5217f7e1.js","./@popperjs-61ffd834.js","./prop-types-c01d55b3.js","./react-is-11039b32.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./i18next-2edfafb0.js","./@dnd-kit-b0134b90.js","./markdown-it-multimd-table-766322c9.js","./markdown-it-github-toc-d2e55c92.js","./uslug-b4eaf0e7.js","./unorm-1228fe77.js","./markdown-it-task-lists-4fbe77b0.js","./markdown-it-emoji-66d1da7f.js","./react-i18next-093df503.js","./@monaco-editor-41149cb1.js","./state-local-dd516420.js","./html2canvas-a81bcda4.js","./react-resizable-44dc0d2e.js","./react-draggable-4a1d91b3.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-953d2d0b.js"],import.meta.url)),Oc=u.lazy(()=>Ue(()=>import("./VoiceTrans-8320cf0a.js"),["./VoiceTrans-8320cf0a.js","./react-0d9c9f23.js","./@babel-518c05f7.js","./mobx-react-49086c1a.js","./mobx-890d6d9e.js","./mobx-react-lite-64872c2a.js","./react-dom-b710246a.js","./scheduler-765c72db.js","./use-sync-external-store-3bf5d15d.js","./@mui-0903014f.js","./clsx-29d81c80.js","./@emotion-c98c060d.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-transition-group-5217f7e1.js","./@popperjs-61ffd834.js","./prop-types-c01d55b3.js","./react-is-11039b32.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./gsap-cf87e9ff.js","./i18next-2edfafb0.js","./@dnd-kit-b0134b90.js","./markdown-it-multimd-table-766322c9.js","./markdown-it-github-toc-d2e55c92.js","./uslug-b4eaf0e7.js","./unorm-1228fe77.js","./markdown-it-task-lists-4fbe77b0.js","./markdown-it-emoji-66d1da7f.js","./react-i18next-093df503.js","./@monaco-editor-41149cb1.js","./state-local-dd516420.js","./html2canvas-a81bcda4.js","./react-resizable-44dc0d2e.js","./react-draggable-4a1d91b3.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-953d2d0b.js"],import.meta.url)),Wc=Re(function(){const e=u.useRef(null),[n,r]=u.useState("100%");return u.useEffect(()=>{xl()},[]),u.createElement(u.Fragment,null,u.createElement("div",{style:{marginTop:"1.3vh"},id:"bodyTopBox"},u.createElement("div",{id:"editor",className:`${ge()=="light"?"theme-light":"theme-dark"} FLEX ROW`},u.createElement(Nc,{setMarkdownViewerWidth:r}),u.createElement("article",{id:"view-area-hidden",className:"hidden-pre"}),u.createElement("article",{ref:e,id:"view-area",style:{fontFamily:ye().basic.fontFamily,width:n,padding:at().unmemorable.previewMode?"0px 5px":"26px 38px"},className:`uniform-scroller markdown-body ${ge()==="light"?"markdown-body-light":"markdown-body-dark"}`})),u.createElement(i.Suspense,null,u.createElement(Hc,{open:at().unmemorable.aiPanelState})),u.createElement(i.Suspense,null,u.createElement(Oc,{open:at().unmemorable.voicePanelState}))))}),ua={äº§å“ç»ç†:"#FF6B6B",æŠ€æœ¯è´Ÿè´£äºº:"#4ECDC4",UIè®¾è®¡å¸ˆ:"#A78BFA",å‰ç«¯å¼€å‘:"#60A5FA",åç«¯å¼€å‘:"#34D399",æµ‹è¯•å·¥ç¨‹å¸ˆ:"#FBBF24",é¡¹ç›®ç»ç†:"#F472B6",è¿è¥:"#FB923C",å¸‚åœº:"#22D3EE",å®¢æˆ·:"#E879F9",å…¶ä»–:"#94A3B8"};function ga(t){if(!t)return"?";if(/[\u4e00-\u9fa5]/.test(t))return t.charAt(0);const e=t.trim().split(/\s+/);return e.length>=2?(e[0].charAt(0)+e[1].charAt(0)).toUpperCase():t.charAt(0).toUpperCase()}const jc=Re(({message:t,themeStyles:e,tempText:n,isLast:r})=>{const{t:a}=we(),o=ct(),l=(m=>{const f=o.participants.find(w=>w.name===m);return f&&ua[f.role]||"#94A3B8"})(t.speaker),c=ga(t.speaker),d=e.background==="#1e1e1e";return i.createElement(T,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"flex-start"}},i.createElement(Ge,{sx:{bgcolor:l,color:"#fff",fontWeight:"bold",width:40,height:40,fontSize:"1rem"}},c),i.createElement(T,{sx:{flex:1,minWidth:0}},i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5}},i.createElement(V,{variant:"body2",sx:{fontWeight:"bold",color:e.color}},t.speaker),i.createElement(V,{variant:"caption",sx:{color:d?"#888":"#666"}},new Date(t.timestamp).toLocaleTimeString("zh-CN"))),i.createElement(ot,{elevation:1,sx:{p:1.5,bgcolor:d?"#2d2d30":"#f5f5f5",color:e.color,borderRadius:2,mb:t.translatedText?1:0}},i.createElement(V,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},t.text,r&&n&&i.createElement("span",{style:{color:d?"#888":"#999",fontStyle:"italic"}},n," ..."))),t.translatedText&&i.createElement(ot,{elevation:1,sx:{p:1.5,bgcolor:d?"rgba(144, 202, 249, 0.1)":"rgba(144, 202, 249, 0.08)",color:e.color,borderRadius:2,borderLeft:"3px solid #90CAF9"}},i.createElement(V,{variant:"caption",sx:{color:"#64B5F6",fontWeight:600,mb:.5,display:"block"}},a("t-ai-meeting-translation")),i.createElement(V,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},t.translatedText))))}),qc=Re(({aiMeeting:t,themeStyles:e})=>{const n=e.background==="#1e1e1e",a=(o=>{const s=t.participants.find(l=>l.name===o);return s&&ua[s.role]||"#94A3B8"})(t.currentSpeaker);return i.createElement(T,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"flex-start"}},i.createElement(Ge,{sx:{bgcolor:a,color:"#fff",fontWeight:"bold",width:40,height:40,fontSize:"1rem"}},ga(t.currentSpeaker)),i.createElement(T,{sx:{flex:1,minWidth:0}},i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5}},i.createElement(V,{variant:"body2",sx:{fontWeight:"bold",color:e.color}},t.currentSpeaker),i.createElement(V,{variant:"caption",sx:{color:n?"#888":"#666"}},new Date().toLocaleTimeString("zh-CN"))),i.createElement(ot,{elevation:1,sx:{p:1.5,bgcolor:n?"#2d2d30":"#f5f5f5",color:n?"#888":"#999",borderRadius:2,fontStyle:"italic"}},i.createElement(V,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},t.tempTranscript," ..."))))}),Kc=Re(({themeStyles:t})=>{const e=ct(),{t:n}=we(),r=i.useRef(null);return i.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e.messages.length,e.tempTranscript]),i.createElement(T,{sx:{display:"flex",flexDirection:"column",height:"100%"}},i.createElement(T,{sx:{p:2,background:t.headerBg,borderBottom:`1px solid ${t.divider}`}},i.createElement(V,{variant:"h6",sx:{fontWeight:"bold",fontSize:"1rem"}},n("t-ai-meeting-transcript-title"))),i.createElement(T,{ref:r,className:"uniform-scroller",sx:{flex:1,overflowY:"auto",p:2}},e.messages.length===0&&!e.tempTranscript?i.createElement(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.color,opacity:.5}},i.createElement(V,{variant:"body1"},n("t-ai-meeting-transcript-placeholder"))):i.createElement(i.Fragment,null,e.messages.map((a,o)=>{const s=o===e.messages.length-1,l=s&&a.speaker===e.currentSpeaker;return i.createElement(jc,{key:a.id,message:a,themeStyles:t,tempText:l?e.tempTranscript:void 0,isLast:s})}),(e.messages.length===0&&e.tempTranscript||e.messages.length>0&&e.tempTranscript&&e.messages[e.messages.length-1].speaker!==e.currentSpeaker)&&i.createElement(qc,{aiMeeting:e,themeStyles:t}))))}),Pn="4f0f9e54e52e43faadbf24c9a7754b00.Xon9PmRyJShYVVJ7",fa="https://open.bigmodel.cn/api/paas/v4/chat/completions";class Uc{static token=Pn;abortController=null;abortCurrentRequest(){this.abortController&&(this.abortController.abort(),this.abortController=null)}async askAI(e,n,r,a,o,s){const l=()=>s?[{type:"image_url",image_url:{url:s}},{type:"text",text:e}]:e,c={model:s?"GLM-4V-Plus-0111":"GLM-4-flash",tool:"web-search-pro",stream:!0,messages:[{role:"system",content:"ä½ æ˜¯ä¸“ä¸šçš„Markdownå†™ä½œåŠ©æ‰‹ï¼Œæä¾›ç®€æ´å‡†ç¡®çš„å†…å®¹ï¼Œç›´æ¥è¾“å‡ºå¯ç”¨çš„Markdownæ ¼å¼æ–‡æœ¬ï¼Œä¸ç”¨ä»£ç å—åŒ…è£¹ã€‚"},{role:"system",content:"æ ¼å¼è§„èŒƒï¼šæ•°å­¦å…¬å¼ç”¨$åŒ…è£¹ï¼ˆè¡Œå†…ï¼‰æˆ–$$åŒ…è£¹ï¼ˆå—çº§ï¼‰ï¼›å›¾è¡¨ç”¨æ­£ç¡®çš„mermaidè¯­æ³•ï¼›ä¿æŒå±‚æ¬¡æ¸…æ™°ã€‚"},{role:"system",content:n?`ç”¨æˆ·é€‰ä¸­æ–‡æœ¬ï¼š"${n}"ï¼Œè¯·æ ¹æ®è¦æ±‚å¤„ç†æ­¤æ–‡æœ¬ï¼ˆä¿®æ”¹/æ‰©å†™/ä¼˜åŒ–ç­‰ï¼‰ï¼ŒæœªæŒ‡æ˜åˆ™é»˜è®¤ä¼˜åŒ–ã€‚`:"æ ¹æ®ç”¨æˆ·é—®é¢˜æä¾›ç›¸åº”çš„Markdownå†…å®¹ã€‚"},{role:"user",content:l()}]};try{this.abortController=new AbortController;const d=await fetch(fa,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${Pn}`},body:JSON.stringify(c),signal:this.abortController.signal});if(!d.body)throw new Error("ReadableStream not supported in this browser.");const m=d.body.getReader(),f=new TextDecoder("utf-8");let w=!1,C="";for(;!w;){if(this.abortController.signal.aborted){a(C);return}const{value:h,done:p}=await m.read();if(w=p,h){const D=f.decode(h,{stream:!0}).split(`
`).filter(v=>v.trim()!=="");for(const v of D)if(v.startsWith("data:")){const z=v.replace("data:","").trim();if(z==="[DONE]"){a(C),this.abortController=null;return}try{const P=JSON.parse(z).choices[0].delta?.content;P&&(C+=P,r(P))}catch(A){console.error("JSON parse error:",A),o(A)}}}}this.abortController=null}catch(d){if(this.abortController=null,d.name==="AbortError"){a("å›ç­”å·²ä¸­æ–­");return}console.error("Error:",d),o(d)}}}const Tr=new Uc;async function Vc(t,e,n,r){if(e.length===0)return r;const a=e.map(l=>`${l.name}(${l.role})`).join("ã€"),o=n.slice(-5).map(l=>`${l.speaker}: ${l.text}`).join(`
`),s=`ä½ æ˜¯ä¸€ä¸ªè¯´è¯äººè¯†åˆ«åŠ©æ‰‹ã€‚æ ¹æ®ä»¥ä¸‹ä¿¡æ¯åˆ¤æ–­å½“å‰è¯´è¯çš„æ˜¯è°ã€‚

å‚ä¼šäººå‘˜ï¼š${a}

æœ€è¿‘å¯¹è¯ï¼š
${o}

å½“å‰å‘è¨€å†…å®¹ï¼š"${t}"

è¯·åˆ¤æ–­è¿™å¥è¯æœ€å¯èƒ½æ˜¯å“ªä½å‚ä¼šäººå‘˜è¯´çš„ã€‚åªéœ€è¦å›å¤å‚ä¼šäººçš„åå­—ï¼Œä¸è¦å…¶ä»–å†…å®¹ã€‚å¦‚æœæ— æ³•åˆ¤æ–­ï¼Œå›å¤"${r}"ã€‚`;return new Promise(l=>{let c=r;fetch(fa,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${Pn}`},body:JSON.stringify({model:"GLM-4-flash",stream:!1,messages:[{role:"user",content:s}]})}).then(d=>d.json()).then(d=>{const m=d.choices?.[0]?.message?.content?.trim()||r,f=e.find(w=>m.includes(w.name));c=f?f.name:r,l(c)}).catch(()=>{l(r)})})}function Ir(t){const{children:e,value:n,index:r,...a}=t;return i.createElement(T,{role:"tabpanel",hidden:n!==r,id:`meeting-tabpanel-${r}`,"aria-labelledby":`meeting-tab-${r}`,sx:{flex:1,display:n===r?"flex":"none",flexDirection:"column",overflow:"hidden",height:"100%"},...a},n===r&&e)}const Jc=Re(({themeStyles:t})=>{const e=ct(),{t:n}=we(),[r,a]=i.useState(0),[o,s]=i.useState(""),[l,c]=i.useState(!1),[d,m]=i.useState([]),[f,w]=i.useState(!1),[C,h]=i.useState("ä¼šè®®"),p=t.background==="#1e1e1e",x=async()=>{if(e.messages.length===0){R(n("t-ai-meeting-no-content-to-summarize"),2e3);return}c(!0),s("");try{const S=e.participants.filter(q=>q.isActive),P=S.length>0?`å‚ä¼šäººå‘˜ï¼š
${S.map(q=>`- ${q.name}ï¼ˆ${q.role}ï¼‰`).join(`
`)}

`:"",W=e.messages.filter(q=>q.isFinal).map(q=>{const ee=S.find(j=>j.name===q.speaker);return`${ee?`${q.speaker}(${ee.role})`:q.speaker}: ${q.text}`}).join(`
`),$=`è¯·æ€»ç»“ä»¥ä¸‹ä¼šè®®å†…å®¹ï¼Œæç‚¼å‡ºå…³é”®è¦ç‚¹ã€å†³ç­–å’Œè¡ŒåŠ¨é¡¹ã€‚ç”¨æ¸…æ™°çš„Markdownæ ¼å¼è¾“å‡ºï¼ŒåŒ…æ‹¬ï¼š
1. ä¼šè®®æ¦‚è¿°ï¼ˆç®€è¦è¯´æ˜ä¼šè®®ä¸»é¢˜å’Œå‚ä¼šäººå‘˜ï¼‰
2. å„æ–¹è§‚ç‚¹ï¼ˆæŒ‰å‚ä¼šäººå²—ä½è§’è‰²å½’çº³å„è‡ªçš„ä¸»è¦è§‚ç‚¹ï¼‰
3. å…³é”®è®¨è®ºç‚¹
4. é‡è¦å†³ç­–
5. å¾…åŠäº‹é¡¹/è¡ŒåŠ¨é¡¹ï¼ˆæ˜ç¡®è´£ä»»äººï¼‰

${P}ä¼šè®®å†…å®¹ï¼š
${W}`;let G="";await Tr.askAI($,"",q=>{G+=q,s(G)},q=>{s(q),e.setMeetingSummary(q),c(!1),R(n("t-ai-meeting-summary-generated"),2e3)},q=>{console.error("ç”Ÿæˆæ€»ç»“å¤±è´¥:",q),R(n("t-ai-meeting-summary-failed"),3e3),c(!1)},"")}catch(S){console.error("ç”Ÿæˆæ€»ç»“å¤±è´¥:",S),R(n("t-ai-meeting-summary-failed"),3e3),c(!1)}},D=()=>{if(!o){R(n("t-ai-meeting-no-summary-to-export"),2e3);return}try{const S=new Date().toLocaleString("zh-CN"),P=`

## ${n("t-ai-meeting-summary-tab")} - ${S}

${o}

`;lt(P,!0),R(n("t-ai-meeting-exported-to-editor"),2e3)}catch(S){console.error("å¯¼å‡ºå¤±è´¥:",S),R(n("t-ai-meeting-export-failed"),3e3)}},v=async()=>{if(!e.currentMeeting){R(n("t-ai-meeting-no-meeting-to-save"),2e3);return}try{await e.autoSaveMeeting(),R(n("t-ai-meeting-saved"),2e3)}catch(S){console.error("ä¿å­˜å¤±è´¥:",S),R(n("t-ai-meeting-save-failed"),3e3)}};i.useEffect(()=>{e.currentMeeting?.summary?s(e.currentMeeting.summary):s("")},[e.currentMeeting?.id,e.currentMeeting?.summary]);const z=async()=>{if(e.messages.length===0){R(n("t-ai-meeting-no-content-to-analyze"),2e3);return}w(!0),m([]);try{const S=e.messages.slice(-20).map($=>`${$.speaker}: ${$.text}`).join(`
`),P=`ä½œä¸ºæˆ‘çš„å®æ—¶${C}åŠ©æ‰‹ï¼Œè¯·æ ¹æ®ä»¥ä¸‹æœ€è¿‘çš„å¯¹è¯å†…å®¹ï¼Œæä¾›3-5ä¸ªç®€çŸ­çš„å»ºè®®æˆ–å‘è¨€æ€è·¯ã€‚
å»ºè®®åº”åŒ…æ‹¬ï¼š
1. æˆ‘å¯ä»¥æå‡ºçš„é—®é¢˜
2. æˆ‘å¯ä»¥è¡¥å……çš„è§‚ç‚¹
3. éœ€è¦æ³¨æ„çš„æ½œåœ¨é—®é¢˜
è¯·ç›´æ¥åˆ—å‡ºå»ºè®®ç‚¹ï¼Œä¸è¦åºŸè¯ã€‚

æœ€è¿‘å¯¹è¯ï¼š
${S}`;let W="";await Tr.askAI(P,"",$=>{W+=$},$=>{const G=$.split(`
`).map(q=>q.trim()).filter(q=>q.length>0&&(q.startsWith("-")||q.startsWith("*")||/^\d+\./.test(q))).map(q=>q.replace(/^[-*\d\.]+\s*/,""));G.length>0?m(G):m([$]),w(!1)},$=>{console.error("ç”Ÿæˆå»ºè®®å¤±è´¥:",$),R(n("t-ai-meeting-summary-failed"),3e3),w(!1)},"")}catch(S){console.error("ç”Ÿæˆå»ºè®®å¤±è´¥:",S),R(n("t-ai-meeting-summary-failed"),3e3),w(!1)}},A=S=>{navigator.clipboard.writeText(S),R(n("t-ai-meeting-copied-to-clipboard"),1e3)};return i.createElement(T,{sx:{display:"flex",flexDirection:"column",height:"100%",bgcolor:t.background}},i.createElement(T,{sx:{borderBottom:1,borderColor:t.divider,bgcolor:t.headerBg}},i.createElement(co,{value:r,onChange:(S,P)=>a(P),variant:"fullWidth",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:500,color:p?"#888":"#666","&.Mui-selected":{color:"#90CAF9"}},"& .MuiTabs-indicator":{backgroundColor:"#90CAF9"}}},i.createElement(nr,{label:n("t-ai-meeting-summary-tab"),icon:i.createElement(Ut,{fontSize:"small"}),iconPosition:"start"}),i.createElement(nr,{label:n("t-ai-meeting-assistant-tab"),icon:i.createElement(mn,{fontSize:"small"}),iconPosition:"start"}))),i.createElement(Ir,{value:r,index:0},i.createElement(T,{sx:{p:2,display:"flex",gap:1,justifyContent:"flex-end",borderBottom:`1px solid ${t.divider}`}},i.createElement(le,{size:"small",variant:"contained",startIcon:l?i.createElement(Dt,{size:16,color:"inherit"}):i.createElement(Ut,null),onClick:x,disabled:l||e.messages.length===0,sx:{bgcolor:"#90CAF9",color:"#1a1a2e",borderRadius:2,textTransform:"none",boxShadow:"none","&:hover":{bgcolor:"#64B5F6",boxShadow:"none"}}},n("t-ai-meeting-generate-summary")),i.createElement(le,{size:"small",variant:"outlined",startIcon:i.createElement(mo,null),onClick:D,disabled:!o,sx:{borderRadius:2,textTransform:"none",borderColor:p?"#555":"#ddd",color:t.color,"&:hover":{borderColor:p?"#777":"#bbb"}}},n("t-ai-meeting-export")),i.createElement(le,{size:"small",variant:"outlined",startIcon:i.createElement(uo,null),onClick:v,disabled:!e.currentMeeting,sx:{borderRadius:2,textTransform:"none",borderColor:p?"#555":"#ddd",color:t.color,"&:hover":{borderColor:p?"#777":"#bbb"}}},n("t-ai-meeting-save"))),i.createElement(T,{className:"uniform-scroller",sx:{flex:1,p:2,overflowY:"auto"}},i.createElement(ot,{elevation:0,sx:{p:2,bgcolor:p?"#2d2d30":"#f9f9f9",border:`1px solid ${t.divider}`,minHeight:"100%",display:"flex",flexDirection:"column"}},l?i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center",height:"100%"}},i.createElement(Dt,{size:24}),i.createElement(V,{variant:"body2",sx:{color:t.color}},n("t-ai-meeting-summary-generating"))):o?i.createElement(xt,{multiline:!0,fullWidth:!0,value:o,onChange:S=>s(S.target.value),variant:"standard",InputProps:{disableUnderline:!0,sx:{color:t.color,fontSize:"0.9rem",lineHeight:1.6}}}):i.createElement(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.color,opacity:.7,flexDirection:"column",gap:2}},i.createElement(T,{sx:{p:3,borderRadius:"50%",bgcolor:p?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",display:"flex"}},i.createElement(Ut,{sx:{fontSize:48,opacity:.8}})),i.createElement(V,{variant:"body1",align:"center",sx:{fontWeight:500}},n("t-ai-meeting-summary-placeholder-title")),i.createElement(V,{variant:"body2",align:"center",sx:{opacity:.7}},n("t-ai-meeting-summary-placeholder-desc")))))),i.createElement(Ir,{value:r,index:1},i.createElement(T,{sx:{p:2,borderBottom:`1px solid ${t.divider}`}},i.createElement(T,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"}},[{key:"ä¼šè®®",label:n("t-ai-meeting-context-meeting")},{key:"é¢è¯•",label:n("t-ai-meeting-context-interview")},{key:"è°ˆåˆ¤",label:n("t-ai-meeting-context-negotiation")},{key:"å¤´è„‘é£æš´",label:n("t-ai-meeting-context-brainstorming")}].map(S=>i.createElement(Tn,{key:S.key,label:S.label,onClick:()=>h(S.key),size:"small",clickable:!0,sx:{borderRadius:2,borderColor:p?"#444":"#ddd",bgcolor:C===S.key?"#90CAF9":"transparent",color:C===S.key?"#1a1a2e":p?"#ddd":"#333",fontWeight:500,"&:hover":{bgcolor:C===S.key?"#64B5F6":p?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)"}}}))),i.createElement(le,{fullWidth:!0,variant:"contained",startIcon:f?i.createElement(Dt,{size:16,color:"inherit"}):i.createElement(go,null),onClick:z,disabled:f||e.messages.length===0,sx:{bgcolor:"#90CAF9",color:"#1a1a2e",borderRadius:2,textTransform:"none",fontWeight:500,boxShadow:"none","&:hover":{bgcolor:"#64B5F6",boxShadow:"none"}}},n("t-ai-meeting-get-suggestions"))),i.createElement(T,{className:"uniform-scroller",sx:{flex:1,p:2,overflowY:"auto"}},f?i.createElement(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"}},i.createElement(Dt,{size:24}),i.createElement(V,{variant:"body2",sx:{ml:2,color:t.color}},n("t-ai-meeting-suggestions-generating"))):d.length>0?i.createElement(sn,null,d.map((S,P)=>i.createElement(ot,{key:P,elevation:1,sx:{mb:2,bgcolor:p?"#2d2d30":"#fff",border:`1px solid ${t.divider}`,transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:3}}},i.createElement(et,{alignItems:"flex-start",secondaryAction:i.createElement(se,{edge:"end","aria-label":"copy",onClick:()=>A(S)},i.createElement(fo,{fontSize:"small"}))},i.createElement(po,{sx:{minWidth:36,mt:.5}},i.createElement(mn,{sx:{color:"#90CAF9"},fontSize:"small"})),i.createElement(tt,{primary:i.createElement(V,{variant:"body2",sx:{color:t.color,lineHeight:1.6}},S)}))))):i.createElement(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.color,opacity:.7,flexDirection:"column",gap:2}},i.createElement(T,{sx:{p:3,borderRadius:"50%",bgcolor:p?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",display:"flex"}},i.createElement(mn,{sx:{fontSize:48,opacity:.8}})),i.createElement(V,{variant:"body1",align:"center",sx:{fontWeight:500}},n("t-ai-meeting-suggestions-placeholder-title")),i.createElement(V,{variant:"body2",align:"center",sx:{opacity:.7}},n("t-ai-meeting-suggestions-placeholder-desc"))))))}),Gc="https://trans-mpcjmvtlut.cn-hangzhou.fcapp.run",Dr={"zh-CN":"zh","en-US":"en","ja-JP":"jp","fr-FR":"fra","de-DE":"de","es-ES":"spa","it-IT":"it","ko-KR":"kor","pt-PT":"pt","ru-RU":"ru","th-TH":"th","ar-SA":"ara"};async function Xc(t){try{const{text:e,sourceLang:n="auto",targetLang:r}=t;if(!e||e.trim().length===0)return"";const a=await fetch(Gc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,sourceLang:n,targetLang:r})});if(!a.ok)throw new Error(`äº‘å‡½æ•°è¯·æ±‚å¤±è´¥: ${a.status} ${a.statusText}`);const o=await a.json();if(!o.success||o.error)throw new Error(o.error||"ç¿»è¯‘å¤±è´¥");return o.translatedText||""}catch(e){throw console.error("ç™¾åº¦ç¿»è¯‘é”™è¯¯:",e),e}}async function Mr(t,e,n="auto"){return Xc({text:t,targetLang:e,sourceLang:n})}const Yc=Re(({themeStyles:t})=>{const e=ct(),{t:n}=we(),[r,a]=i.useState(null),[o,s]=i.useState(""),[l,c]=i.useState(!1),d=t.background==="#1e1e1e",m=p=>({äº§å“ç»ç†:"#FF6B6B",æŠ€æœ¯è´Ÿè´£äºº:"#4ECDC4",UIè®¾è®¡å¸ˆ:"#A78BFA",å‰ç«¯å¼€å‘:"#60A5FA",åç«¯å¼€å‘:"#34D399",æµ‹è¯•å·¥ç¨‹å¸ˆ:"#FBBF24",é¡¹ç›®ç»ç†:"#F472B6",è¿è¥:"#FB923C",å¸‚åœº:"#22D3EE",å®¢æˆ·:"#E879F9",å…¶ä»–:"#94A3B8"})[p]||"#94A3B8",f=()=>{if(e.isRecording)r&&(r.recognition.stopRecognition(),a(null)),e.clearTempTranscript(),e.stopRecording(),R(n("t-ai-meeting-recording-stopped"),2e3);else{if(!e.currentMeeting){R(n("t-ai-meeting-please-start-meeting-first"),2e3);return}try{const p=ca(e.sourceLanguage,!0,async(x,D)=>{const v=window._speechData.speechResult;if(v)if(D){e.clearTempTranscript();let z=e.currentSpeaker;if(e.enableAISpeakerDetection&&e.activeParticipants.length>1)try{z=await Vc(v,e.activeParticipants.map(P=>({name:P.name,role:P.role})),e.messages.slice(-5).map(P=>({speaker:P.speaker,text:P.text})),e.currentSpeaker),z!==e.currentSpeaker&&e.setSpeaker(z)}catch(P){console.error("AIè¯´è¯äººè¯†åˆ«å¤±è´¥:",P)}const A=e.messages.length>0?e.messages[e.messages.length-1]:null;if(A&&A.isFinal&&A.speaker===z&&A.text.length<130&&A){const P=A.text+v;if(e.updateFinalMessage(A.id,P),e.enableRealtimeTranslation&&e.targetLanguage)try{const W=Dr[e.sourceLanguage]||"auto",$=await Mr(P,e.targetLanguage,W);e.updateMessageTranslation(A.id,$)}catch(W){console.error("ç¿»è¯‘å¤±è´¥:",W)}}else{const P=`msg_${Date.now()}`,W={id:P,speaker:z,text:v,timestamp:Date.now(),isFinal:!0,language:e.sourceLanguage};if(e.addMessage(W),e.enableRealtimeTranslation&&e.targetLanguage)try{const $=Dr[e.sourceLanguage]||"auto",G=await Mr(v,e.targetLanguage,$);e.updateMessageTranslation(P,G)}catch($){console.error("ç¿»è¯‘å¤±è´¥:",$)}}}else e.setTempTranscript(v)});a(p),e.startRecording(),R(n("t-ai-meeting-recording-started"),2e3)}catch(p){console.error("å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥:",p),R(n("t-ai-meeting-recognition-failed"),3e3)}}},w=async()=>{await e.startNewMeeting(e.sourceLanguage,e.targetLanguage,o.trim()),s(""),R(n("t-ai-meeting-meeting-created"),2e3),setTimeout(()=>{f()},300)},C=async()=>{r&&(r.recognition.stopRecognition(),a(null)),await e.endMeeting(),R(n("t-ai-meeting-meeting-ended"),2e3)},h=()=>{e.displayHistory()};return i.createElement(i.Fragment,null,i.createElement(T,{sx:{px:3,py:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",background:t.headerBg||t.background}},i.createElement(le,{variant:"contained",onClick:w,disabled:!!e.currentMeeting&&!e.currentMeeting.endTime,sx:{bgcolor:"#90CAF9",color:"#1a1a2e",borderRadius:2,textTransform:"none",fontWeight:500,px:2.5,boxShadow:"none","&:hover":{bgcolor:"#64B5F6",boxShadow:"none"}}},n("t-ai-meeting-new-meeting")),i.createElement(xt,{size:"small",label:n("t-ai-meeting-meeting-name"),value:o,onChange:p=>s(p.target.value),placeholder:n("t-ai-meeting-meeting-name-placeholder"),disabled:!!e.currentMeeting&&!e.currentMeeting.endTime,sx:{width:200,"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:d?"#3c3c3c":"#f0f0f0","& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:d?"#555":"#ccc"},"&.Mui-focused fieldset":{borderColor:"#90CAF9"}}},onKeyPress:p=>{p.key==="Enter"&&(!e.currentMeeting||e.currentMeeting.endTime)&&w()}}),i.createElement(le,{variant:"outlined",onClick:C,disabled:!e.currentMeeting||!!e.currentMeeting.endTime,sx:{borderRadius:2,textTransform:"none",fontWeight:500,borderColor:d?"#555":"#ddd",color:t.color,"&:hover":{borderColor:d?"#777":"#bbb",bgcolor:d?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}}},n("t-ai-meeting-end-meeting")),i.createElement(he,{title:e.isRecording?n("t-ai-meeting-stop-recording"):n("t-ai-meeting-start-recording")},i.createElement(se,{onClick:f,disabled:!e.currentMeeting||!!e.currentMeeting.endTime,sx:{bgcolor:e.isRecording?"#ef4444":"#90CAF9",color:e.isRecording?"white":"#1a1a2e",width:40,height:40,"&:hover":{bgcolor:e.isRecording?"#dc2626":"#64B5F6"}}},e.isRecording?i.createElement(Br,null):i.createElement(ho,null))),i.createElement(he,{title:n("t-ai-meeting-history")},i.createElement(se,{onClick:h,sx:{color:d?"#888":"#666","&:hover":{bgcolor:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"}}},i.createElement(yo,null))),i.createElement(he,{title:n("t-ai-meeting-participants")},i.createElement(se,{onClick:()=>c(!0),sx:{color:d?"#888":"#666","&:hover":{bgcolor:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"}}},i.createElement(rr,null))),i.createElement(T,{sx:{flex:1}}),i.createElement(un,{size:"small",sx:{minWidth:120}},i.createElement(ar,{sx:{fontSize:"0.85rem"}},n("t-ai-meeting-source-language")),i.createElement(gn,{value:e.sourceLanguage,label:n("t-ai-meeting-source-language"),onChange:p=>e.setSourceLanguage(p.target.value),disabled:e.isRecording,sx:{borderRadius:2,bgcolor:d?"#3c3c3c":"#f0f0f0","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:d?"#555":"#ccc"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#90CAF9"}}},bl.map(([p,x])=>i.createElement(Ae,{key:p,value:p},x)))),i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1}},i.createElement(wo,{sx:{fontSize:20,color:d?"#888":"#666"}}),i.createElement(Rn,{checked:e.enableRealtimeTranslation,onChange:()=>e.toggleRealtimeTranslation()})),i.createElement(un,{size:"small",sx:{minWidth:120}},i.createElement(ar,{sx:{fontSize:"0.85rem"}},n("t-ai-meeting-translate-to")),i.createElement(gn,{value:e.targetLanguage,label:n("t-ai-meeting-translate-to"),onChange:p=>e.setTargetLanguage(p.target.value),disabled:!e.enableRealtimeTranslation,sx:{borderRadius:2,bgcolor:d?"#3c3c3c":"#f0f0f0","& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:d?"#555":"#ccc"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#989affff"}}},i.createElement(Ae,{value:"zh"},"ä¸­æ–‡"),i.createElement(Ae,{value:"en"},"English"),i.createElement(Ae,{value:"jp"},"æ—¥æœ¬èª"),i.createElement(Ae,{value:"fra"},"FranÃ§ais"),i.createElement(Ae,{value:"de"},"Deutsch"),i.createElement(Ae,{value:"spa"},"EspaÃ±ol"),i.createElement(Ae,{value:"it"},"Italiano"),i.createElement(Ae,{value:"kor"},"í•œêµ­ì–´"),i.createElement(Ae,{value:"pt"},"PortuguÃªs"),i.createElement(Ae,{value:"ru"},"Ğ ÑƒÑÑĞºĞ¸Ğ¹"),i.createElement(Ae,{value:"th"},"à¹„à¸—à¸¢"),i.createElement(Ae,{value:"ara"},"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")))),e.activeParticipants.length>0&&i.createElement(T,{sx:{px:3,py:1.5,display:"flex",gap:1.5,alignItems:"center",flexWrap:"wrap",background:d?"#252526":"#f0f0f0",borderTop:`1px solid ${d?"#333":"#e8e8e8"}`}},i.createElement(V,{variant:"caption",sx:{color:d?"#888":"#666",mr:1,fontWeight:500}},n("t-ai-meeting-quick-switch"),":"),e.activeParticipants.map(p=>{const x=!e.enableAISpeakerDetection&&e.currentSpeaker===p.name,D=m(p.role);return i.createElement(Tn,{key:p.id,avatar:i.createElement(Ge,{sx:{bgcolor:D,color:"#fff !important",fontWeight:"bold",fontSize:"0.75rem"}},p.name.charAt(0)),label:`${p.name} (${p.role})`,onClick:()=>{e.enableAISpeakerDetection&&e.toggleAISpeakerDetection(),e.switchToParticipant(p.id)},variant:x?"filled":"outlined",color:x?"primary":"default",size:"small",sx:{borderRadius:2,borderColor:d?"#444":"#ddd",opacity:e.enableAISpeakerDetection?.6:1,bgcolor:x?"#90CAF9":"transparent","& .MuiChip-label":{color:x?"#1a1a2e":d?"#ddd":"#333",fontWeight:500,fontSize:"0.8rem"},"&:hover":{bgcolor:x?"#64B5F6":d?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)"}}})}),i.createElement(T,{sx:{ml:"auto",display:"flex",alignItems:"center",gap:.5}},i.createElement(he,{title:n("t-ai-meeting-ai-speaker-detection")},i.createElement(Ut,{sx:{fontSize:18,color:e.enableAISpeakerDetection?"#90CAF9":d?"#666":"#999"}})),i.createElement(Rn,{checked:e.enableAISpeakerDetection,onChange:()=>e.toggleAISpeakerDetection(),size:"small"}))),i.createElement(it,{open:l,onClose:()=>c(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:d?"#1e1e1e":"#fff",color:t.color,borderRadius:3}}},i.createElement(tn,{sx:{display:"flex",alignItems:"center",gap:1.5,pb:1}},i.createElement(rr,{sx:{color:"#90CAF9"}}),i.createElement(V,{variant:"h6",sx:{fontWeight:600}},n("t-ai-meeting-participants-title"))),i.createElement(nn,null,i.createElement(V,{variant:"body2",sx:{mb:2,color:d?"#888":"#666"}},n("t-ai-meeting-participants-desc")),i.createElement(sn,{sx:{maxHeight:400,overflow:"auto"}},e.participants.map(p=>i.createElement(et,{key:p.id,sx:{bgcolor:p.isActive?d?"rgba(144, 202, 249, 0.1)":"rgba(144, 202, 249, 0.08)":"transparent",borderRadius:2,mb:1,border:`1px solid ${p.isActive?d?"#555":"#ddd":d?"#333":"#e8e8e8"}`,transition:"all 0.2s"}},i.createElement(Ge,{sx:{bgcolor:p.isActive?m(p.role):d?"#444":"#ccc",color:"#fff",mr:2,transition:"all 0.2s"}},p.name.charAt(0)),i.createElement(tt,{primary:i.createElement(xt,{variant:"standard",value:p.name,onChange:x=>e.updateParticipant(p.id,{name:x.target.value}),size:"small",sx:{width:120,"& .MuiInput-root":{color:t.color}},InputProps:{sx:{fontSize:"0.95rem",fontWeight:600}}}),secondary:i.createElement(un,{size:"small",variant:"standard",sx:{minWidth:100,mt:.5}},i.createElement(gn,{value:p.role,onChange:x=>e.updateParticipant(p.id,{role:x.target.value}),sx:{fontSize:"0.8rem",color:d?"#888":"#666","&::before":{borderColor:d?"#444":"#ddd"}}},ll.map(x=>i.createElement(Ae,{key:x,value:x,sx:{fontSize:"0.85rem"}},x))))}),i.createElement(bo,null,i.createElement(he,{title:p.isActive?n("t-ai-meeting-participant-remove"):n("t-ai-meeting-participant-add")},i.createElement(Tn,{label:p.isActive?n("t-ai-meeting-attending"):n("t-ai-meeting-not-attending"),size:"small",onClick:()=>e.toggleParticipantActive(p.id),sx:{mr:1,cursor:"pointer",borderRadius:1.5,bgcolor:p.isActive?"#22c55e":d?"#444":"#e8e8e8",color:p.isActive?"#fff":d?"#888":"#666","&:hover":{bgcolor:p.isActive?"#16a34a":d?"#555":"#ddd"}}})),i.createElement(se,{edge:"end",onClick:()=>e.removeParticipant(p.id),size:"small",sx:{color:d?"#666":"#999","&:hover":{color:"#ef4444",bgcolor:"rgba(239, 68, 68, 0.1)"}}},i.createElement(an,{fontSize:"small"})))))),i.createElement(Rt,{sx:{my:2,borderColor:d?"#333":"#e8e8e8"}}),i.createElement(le,{startIcon:i.createElement(xo,null),onClick:()=>e.addParticipant(),variant:"outlined",fullWidth:!0,sx:{borderRadius:2,borderColor:d?"#555":"#ddd",color:t.color,textTransform:"none",fontWeight:500,"&:hover":{borderColor:"#90CAF9",bgcolor:"rgba(144, 202, 249, 0.1)"}}},n("t-ai-meeting-add-participant"))),i.createElement(rn,{sx:{px:3,pb:2}},i.createElement(le,{onClick:()=>c(!1),sx:{borderRadius:2,textTransform:"none",fontWeight:500,color:d?"#888":"#666","&:hover":{bgcolor:d?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}}},n("t-ai-meeting-close")))))}),Qc=Re(()=>{const t=ct(),{t:e}=we(),[n,r]=i.useState({width:window.innerWidth*.8,height:window.innerHeight*.9}),[a,o]=i.useState({x:window.innerWidth*.1,y:window.innerHeight*.05}),[s,l]=i.useState(!1),[c,d]=i.useState(!1),[m,f]=i.useState(!1),w=i.useRef({offsetX:0,offsetY:0}),C=ge()==="dark",h={background:C?"#1e1e1e":"#f8f9fa",color:C?"#e0e0e0":"#1a1a2e",border:C?"1px solid #333":"1px solid #e8e8e8",headerBg:C?"#252526":"#ffffff",divider:C?"#333":"#e8e8e8",cardBg:C?"#2d2d30":"#ffffff",inputBg:C?"#3c3c3c":"#f0f0f0",accent:"#90CAF9"},p=()=>{t.hidden()},x=A=>{s||(d(!0),w.current={offsetX:A.clientX-a.x,offsetY:A.clientY-a.y})},D=A=>{if(!c)return;const S=window.innerWidth-n.width,P=window.innerHeight-n.height,W=Math.max(0,Math.min(S,A.clientX-w.current.offsetX)),$=Math.max(0,Math.min(P,A.clientY-w.current.offsetY));o({x:W,y:$})},v=()=>{d(!1)};i.useEffect(()=>{if(c)return document.addEventListener("mousemove",D),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",v)}},[c,n]);const z=()=>{l(!s)};return i.createElement(it,{hideBackdrop:!1,fullScreen:!1,maxWidth:!1,open:t.displayState,onClose:p,PaperProps:{style:{position:"fixed",left:s?0:a.x,top:s?0:a.y,width:s?"100vw":n.width,height:s?"100vh":n.height,margin:0,maxWidth:"none",maxHeight:"none",background:h.background,boxShadow:C?"0 8px 32px rgba(0, 0, 0, 0.5)":"0 4px 24px rgba(0, 0, 0, 0.08)",overflow:"hidden",transition:c||m?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)",borderRadius:s?0:16}}},i.createElement(T,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative"}},i.createElement(T,{onMouseDown:x,sx:{px:3,py:2,display:"flex",justifyContent:"space-between",alignItems:"center",background:h.headerBg,borderBottom:`1px solid ${h.divider}`,cursor:c?"grabbing":s?"default":"grab",userSelect:"none"}},i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1.5}},i.createElement(Hr,{sx:{fontSize:26,color:h.accent}}),i.createElement(V,{variant:"h6",sx:{fontWeight:600,color:h.color,fontSize:"1.1rem"}},e("t-ai-meeting-title"))),i.createElement(T,{sx:{display:"flex",gap:.5,position:"relative",zIndex:1e3}},i.createElement(se,{onClick:z,size:"small",sx:{color:C?"#888":"#666","&:hover":{bgcolor:C?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"}}},i.createElement(Co,{fontSize:"small"})),i.createElement(se,{onClick:p,size:"small",sx:{color:C?"#888":"#666","&:hover":{bgcolor:"rgba(239, 68, 68, 0.1)",color:"#ef4444"}}},i.createElement(Jt,{fontSize:"small"})))),i.createElement(Yc,{themeStyles:h}),i.createElement(Rt,{sx:{bgcolor:h.divider}}),i.createElement(T,{sx:{flex:1,display:"flex",overflow:"hidden",gap:2,p:2.5,bgcolor:h.background}},i.createElement(T,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:h.cardBg,border:`1px solid ${h.divider}`,borderRadius:3,boxShadow:C?"none":"0 1px 3px rgba(0,0,0,0.04)"}},i.createElement(Kc,{themeStyles:h})),i.createElement(T,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:h.cardBg,border:`1px solid ${h.divider}`,borderRadius:3,boxShadow:C?"none":"0 1px 3px rgba(0,0,0,0.04)"}},i.createElement(Jc,{themeStyles:h}))),(c||m)&&i.createElement(T,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:999,cursor:c?"grabbing":"default",background:"transparent"}}),!s&&i.createElement(i.Fragment,null,i.createElement(T,{sx:{position:"absolute",right:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:A=>{A.preventDefault(),f(!0);const S=A.clientX,P=n.width,W=G=>{const q=Math.max(600,Math.min(window.innerWidth,P+(G.clientX-S)));r(ee=>({...ee,width:q}))},$=()=>{f(!1),document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",$)};document.addEventListener("mousemove",W),document.addEventListener("mouseup",$)}}),i.createElement(T,{sx:{position:"absolute",bottom:-8,left:0,width:"100%",height:16,cursor:"ns-resize",zIndex:1e3},onMouseDown:A=>{A.preventDefault(),f(!0);const S=A.clientY,P=n.height,W=G=>{const q=Math.max(400,Math.min(window.innerHeight,P+(G.clientY-S)));r(ee=>({...ee,height:q}))},$=()=>{f(!1),document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",$)};document.addEventListener("mousemove",W),document.addEventListener("mouseup",$)}}),i.createElement(T,{sx:{position:"absolute",bottom:-8,right:-8,width:20,height:20,cursor:"nwse-resize",zIndex:1001},onMouseDown:A=>{A.preventDefault(),f(!0);const S=A.clientX,P=A.clientY,W=n.width,$=n.height,G=ee=>{const Q=Math.max(600,Math.min(window.innerWidth,W+(ee.clientX-S))),j=Math.max(400,Math.min(window.innerHeight,$+(ee.clientY-P)));r({width:Q,height:j})},q=()=>{f(!1),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",q)};document.addEventListener("mousemove",G),document.addEventListener("mouseup",q)}}))))}),Zc="MarkdownOL_Meeting",ed=1,Fe="meetings";function Bt(){return new Promise((t,e)=>{const n=indexedDB.open(Zc,ed);n.onerror=()=>{e(new Error("æ— æ³•æ‰“å¼€ä¼šè®®æ•°æ®åº“"))},n.onsuccess=()=>{t(n.result)},n.onupgradeneeded=r=>{const a=r.target.result;if(!a.objectStoreNames.contains(Fe)){const o=a.createObjectStore(Fe,{keyPath:"id"});o.createIndex("startTime","startTime",{unique:!1}),o.createIndex("title","title",{unique:!1})}}})}async function Kn(t){try{const e=await Bt(),n=e.transaction([Fe],"readwrite"),r=n.objectStore(Fe);return new Promise((a,o)=>{const s=r.put(t);s.onsuccess=()=>{a()},s.onerror=()=>{o(new Error("ä¿å­˜ä¼šè®®è®°å½•å¤±è´¥"))},n.oncomplete=()=>{e.close()}})}catch(e){throw console.error("ä¿å­˜ä¼šè®®è®°å½•é”™è¯¯:",e),e}}async function cn(){try{const t=await Bt(),e=t.transaction([Fe],"readonly"),n=e.objectStore(Fe);return new Promise((r,a)=>{const o=n.getAll();o.onsuccess=()=>{const s=o.result;s.sort((l,c)=>c.startTime-l.startTime),r(s)},o.onerror=()=>{a(new Error("è·å–ä¼šè®®è®°å½•å¤±è´¥"))},e.oncomplete=()=>{t.close()}})}catch(t){throw console.error("è·å–ä¼šè®®è®°å½•é”™è¯¯:",t),t}}async function pa(t){try{const e=await Bt(),n=e.transaction([Fe],"readonly"),r=n.objectStore(Fe);return new Promise((a,o)=>{const s=r.get(t);s.onsuccess=()=>{a(s.result||null)},s.onerror=()=>{o(new Error("è·å–ä¼šè®®è®°å½•å¤±è´¥"))},n.oncomplete=()=>{e.close()}})}catch(e){throw console.error("è·å–ä¼šè®®è®°å½•é”™è¯¯:",e),e}}async function Un(t){try{const e=await Bt(),n=e.transaction([Fe],"readwrite"),r=n.objectStore(Fe);return new Promise((a,o)=>{const s=r.delete(t);s.onsuccess=()=>{a()},s.onerror=()=>{o(new Error("åˆ é™¤ä¼šè®®è®°å½•å¤±è´¥"))},n.oncomplete=()=>{e.close()}})}catch(e){throw console.error("åˆ é™¤ä¼šè®®è®°å½•é”™è¯¯:",e),e}}async function ha(t){return Kn(t)}async function ya(){try{const t=await Bt(),e=t.transaction([Fe],"readwrite"),n=e.objectStore(Fe);return new Promise((r,a)=>{const o=n.clear();o.onsuccess=()=>{r()},o.onerror=()=>{a(new Error("æ¸…ç©ºä¼šè®®è®°å½•å¤±è´¥"))},e.oncomplete=()=>{t.close()}})}catch(t){throw console.error("æ¸…ç©ºä¼šè®®è®°å½•é”™è¯¯:",t),t}}async function Vn(t){try{const e=await cn(),n=t.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(n)||r.summary?.toLowerCase().includes(n)||r.messages.some(a=>a.text.toLowerCase().includes(n)))}catch(e){throw console.error("æœç´¢ä¼šè®®è®°å½•é”™è¯¯:",e),e}}const td={saveMeetingRecord:Kn,getAllMeetingRecords:cn,getMeetingRecordById:pa,deleteMeetingRecord:Un,updateMeetingRecord:ha,clearAllMeetingRecords:ya,searchMeetingRecords:Vn},nd=Object.freeze(Object.defineProperty({__proto__:null,clearAllMeetingRecords:ya,default:td,deleteMeetingRecord:Un,getAllMeetingRecords:cn,getMeetingRecordById:pa,saveMeetingRecord:Kn,searchMeetingRecords:Vn,updateMeetingRecord:ha},Symbol.toStringTag,{value:"Module"})),rd=Re(()=>{const t=ct(),[e,n]=i.useState([]),[r,a]=i.useState(""),[o,s]=i.useState(!1),l=ge()==="dark",c={background:l?"#1e1e1e":"#ffffff",color:l?"#d8d8d8":"#000000",border:l?"1px solid #404040":"1px solid #e0e0e0",headerBg:l?"#2d2d30":"#f5f5f5",divider:l?"#404040":"#e0e0e0",itemHover:l?"#2d2d30":"#f5f5f5"},d=async()=>{s(!0);try{const h=await cn();n(h)}catch(h){console.error("åŠ è½½ä¼šè®®è®°å½•å¤±è´¥:",h),R("åŠ è½½ä¼šè®®è®°å½•å¤±è´¥",3e3)}finally{s(!1)}},m=async()=>{if(!r.trim()){d();return}s(!0);try{const h=await Vn(r);n(h)}catch(h){console.error("æœç´¢å¤±è´¥:",h),R("æœç´¢å¤±è´¥",3e3)}finally{s(!1)}},f=h=>{t.loadMeeting(h),t.hiddenHistory(),R("å·²åŠ è½½ä¼šè®®è®°å½•",2e3)},w=async(h,p)=>{if(h.stopPropagation(),!!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡ä¼šè®®è®°å½•å—ï¼Ÿ"))try{await Un(p),R("å·²åˆ é™¤ä¼šè®®è®°å½•",2e3),d()}catch(x){console.error("åˆ é™¤å¤±è´¥:",x),R("åˆ é™¤å¤±è´¥",3e3)}},C=h=>{if(!h.endTime)return"è¿›è¡Œä¸­";const p=h.endTime-h.startTime,x=Math.floor(p/6e4),D=Math.floor(x/60);return D>0?`${D}å°æ—¶${x%60}åˆ†é’Ÿ`:`${x}åˆ†é’Ÿ`};return i.useEffect(()=>{t.historyDisplayState&&d()},[t.historyDisplayState]),i.createElement(it,{open:t.historyDisplayState,onClose:()=>t.hiddenHistory(),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:c.background,color:c.color,minHeight:"70vh"}}},i.createElement(T,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",background:c.headerBg,borderBottom:`1px solid ${c.divider}`}},i.createElement(V,{variant:"h6",sx:{fontWeight:"bold"}},"ğŸ“š ä¼šè®®å†å²è®°å½•"),i.createElement(se,{onClick:()=>t.hiddenHistory(),size:"small"},i.createElement(Jt,null))),i.createElement(T,{sx:{p:2}},i.createElement(xt,{fullWidth:!0,size:"small",placeholder:"æœç´¢ä¼šè®®æ ‡é¢˜ã€å†…å®¹æˆ–æ€»ç»“...",value:r,onChange:h=>a(h.target.value),onKeyPress:h=>{h.key==="Enter"&&m()},InputProps:{startAdornment:i.createElement(or,{position:"start"},i.createElement(ko,null)),endAdornment:r&&i.createElement(or,{position:"end"},i.createElement(se,{size:"small",onClick:()=>{a(""),d()}},i.createElement(Jt,{fontSize:"small"})))}})),i.createElement(Rt,{sx:{bgcolor:c.divider}}),i.createElement(T,{sx:{flex:1,overflowY:"auto",minHeight:"400px","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:c.background},"&::-webkit-scrollbar-thumb":{background:c.divider,borderRadius:"4px"}}},o?i.createElement(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"}},i.createElement(V,{variant:"body2",sx:{color:c.color}},"åŠ è½½ä¸­...")):e.length===0?i.createElement(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:c.color,opacity:.5}},i.createElement(V,{variant:"body1"},r?"æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¼šè®®":"è¿˜æ²¡æœ‰ä¼šè®®è®°å½•")):i.createElement(sn,{sx:{p:0}},e.map((h,p)=>i.createElement(i.Fragment,{key:h.id},i.createElement(et,{disablePadding:!0,secondaryAction:i.createElement(se,{edge:"end",onClick:x=>w(x,h.id),sx:{color:"error.main"}},i.createElement(an,null))},i.createElement(It,{onClick:()=>f(h),sx:{"&:hover":{bgcolor:c.itemHover}}},i.createElement(tt,{primary:i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5}},i.createElement(V,{variant:"subtitle1",sx:{fontWeight:"bold"}},h.title),!h.endTime&&i.createElement(V,{variant:"caption",sx:{bgcolor:"success.main",color:"white",px:1,py:.25,borderRadius:1}},"è¿›è¡Œä¸­")),secondary:i.createElement(T,{sx:{mt:.5}},i.createElement(T,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5}},i.createElement(vo,{sx:{fontSize:14,opacity:.6}}),i.createElement(V,{variant:"caption",sx:{opacity:.8}},new Date(h.startTime).toLocaleString("zh-CN")),i.createElement(V,{variant:"caption",sx:{opacity:.6,mx:.5}},"â€¢"),i.createElement(V,{variant:"caption",sx:{opacity:.8}},C(h)),i.createElement(V,{variant:"caption",sx:{opacity:.6,mx:.5}},"â€¢"),i.createElement(V,{variant:"caption",sx:{opacity:.8}},h.messages.length," æ¡æ¶ˆæ¯")),h.summary&&i.createElement(V,{variant:"caption",sx:{display:"block",opacity:.7,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},"æ€»ç»“: ",h.summary.substring(0,100),"..."))}))),p<e.length-1&&i.createElement(Rt,{sx:{bgcolor:c.divider}}))))),i.createElement(T,{sx:{p:2,borderTop:`1px solid ${c.divider}`,display:"flex",justifyContent:"flex-end"}},i.createElement(le,{onClick:()=>t.hiddenHistory(),variant:"outlined"},"å…³é—­")))}),ad=(await ve("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,od=()=>{ad.addStyle(`
::selection {
border-radius: 5px;
background-color: ${ge()==="light"?"#add6ff":"#636363"};
}

    `)},wa={zIndex:{drawer:1300,modal:1200,appBar:1200}},id=zn({...wa,palette:{primary:{main:In[200],contrastText:"#fff378"},secondary:{main:"#EEEEEE",contrastText:"#ffc0cb"},info:{main:In[200],contrastText:"#8B8A8A"},mode:"light"}}),sd=zn({...wa,palette:{primary:{main:In[400],contrastText:"#f5deb3"},secondary:{main:ir[700],contrastText:"#f5deb3"},info:{main:ir[600],contrastText:"#8B8A8A"},mode:"dark"}}),ld=Re(()=>(u.useEffect(()=>{od()},[]),u.createElement(u.Fragment,null,u.createElement(Rr,{theme:ge()==="light"?id:sd},u.createElement(Nr,null),u.createElement(T,{className:"FLEX COL App-top"},u.createElement(yl,null),u.createElement(Wc,null),u.createElement(Nn,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:at().unmemorable.loading,onClick:()=>{Ke({unmemorable:{loading:!1}})}},u.createElement(Dt,{color:"inherit"}))),u.createElement(Qc,null),u.createElement(rd,null))))),cd={en:{translation:{"t-more":"More","t-about":"Help","t-home":"Home","t-image-manager":"Image Manager","t-file-manager":"File Manager","t-file-manager-open-file":"Open File ","t-file-manager-open-folder":"Open Folder ","t-file-manager-saveAs":"Save As","t-file-manager-pinned":"Pinned!","t-file-manager-syncLocal":"Sync File To Local","t-export":"Export","t-share":"Share (Dev)","t-collaborative-office":"Realtime Office","t-settings":"Settings","t-more-coming-soon":"More (Coming Soon)","t-export-pdf":"Export as PDF","t-export-image":"Export as Image (Beta1.0)","t-export-markdown":"Export as Markdown","t-basic-settings":"Basic Settings","t-theme-settings":"Theme Settings","t-language-settings":"Language Settings","t-editor-settings":"Editor Settings","t-speech-to-text":"Speech to Text","t-advanced-settings":"Advanced Settings","t-export-settings":"Export Settings","t-mermaid-settings":"Mermaid Settings","t-image-settings":"Image Settings","t-reset-initialization":"Reset & Initialization","t-basic-settings-title":"Basic Settings","t-advanced-settings-title":"Advanced Settings (Under Construction)","t-theme-description":"Change editor theme","t-language-description":"Change editor language","t-editor-settings-title":"Editor Settings","t-font-size-description":"Change rendered text font size","t-font-family-description":"Change rendered text font","t-sync-scroll-description":"Sync scrolling between left editor and preview area","t-auto-wrap-description":"Enable editor auto line wrap","t-speech-language-description":"Select speech-to-text recognition language","t-export-settings-description":"Change export settings (under construction)","t-mermaid-theme-description":"Mermaid flowchart theme","t-image-settings-title":"Image Settings","t-image-storage-preference":"Image Storage Mode Preference (Pasting)","t-image-storage-description":"Choose to prioritize storing pasted images in browser/folder","t-image-storage-folder":"Local Folder (Prefer In Local Folder)","t-image-storage-browser":"Browser (Prefer In Browser)","t-default-image-style":"Default Image Style","t-default-image-style-description":"Default image style, size, position etc. w=width, c=center, s=shadow","t-basic-style":"Basic Style","t-default-stored-path":"Default Stored Path","t-default-stored-path-description":"Default path for pasted image uploads. If set to 'images', images will be uploaded to an 'images' folder in the root directory. If empty, defaults to 'images' folder","t-image-store-path":"Image Storage Path","t-reset-settings-title":"Reset & Initialization Settings","t-reset-data-description":"Clear all saved text data, including images, settings, cache and restore to initial state","t-reset-button":"Reset All Data","t-reset-success":"Data cleared successfully, page will refresh in 3 seconds to complete reset...","t-reset-warning":"Some data has been cleared, page will refresh to complete reset","t-reset-confirm-title":"âš ï¸ Confirm Reset All Data","t-reset-confirm-description":"This operation will <strong>permanently delete</strong> the following data:","t-reset-confirm-list":"â€¢ All saved drafts and images<br/>â€¢ User settings and preferences<br/>â€¢ Browser cache","t-reset-confirm-warning":"âš ï¸ This operation cannot be undone, please ensure you have backed up important data!","t-cancel":"Cancel","t-confirm-reset":"Confirm Reset","t-chinese":"Chinese","t-english":"English","t-default":"Default","t-on":"On","t-off":"Off","t-image-manager-title":"Image Manager","t-image-manager-tooltip-title":"Manage pasted and uploaded images","t-image-manager-tooltip-ctrl-click":"Hold Ctrl and click image to insert","t-image-manager-tooltip-double-click":"Double-click image to preview","t-image-manager-tooltip-alt-click":"Hold Alt and click image to copy","t-image-manager-tooltip-delete-all":"Delete all images and stored text","t-image-manager-tooltip-delete-single":"Delete this image","t-image-manager-delete-all-title":"Ready to delete all the images?","t-image-manager-delete-all-content":"Once you have clicked the 'yes' button, all your pictures  will be deleted!","t-image-manager-confirm-yes":"YES","t-image-manager-confirm-no":"NO","t-image-manager-no-images-title":"No Images","t-image-manager-no-images-description":"Please paste images into the editor, and they will be automatically saved here","t-lab-title":"Frontend Lab","t-lab-card-spelling-association-title":"Spelling Association","t-lab-card-spelling-association-desc":"Spelling completion (English only)","t-lab-card-spelling-check-title":"Spelling Check","t-lab-card-spelling-check-desc":"Spell checking, insufficient funds, let's not use it!","t-lab-button-install":"Install","t-lab-button-uninstall":"Uninstall","t-lab-button-enable":"Enable","t-lab-button-disable":"Disable","t-lab-install-success":"Dictionary installed successfully!","t-file-manager-new-file":"New File","t-file-manager-new-folder":"New Folder","t-file-manager-rename":"Rename","t-file-manager-delete":"Delete","t-file-manager-move":"Move","t-file-manager-copy":"Copy","t-file-manager-empty-folder":"This folder is empty","t-file-manager-empty-folder-desc":"Right-click to create new files or folders","t-file-manager-confirm-delete":"Confirm Delete","t-file-manager-confirm-delete-file":"Are you sure you want to delete '{{name}}'?","t-file-manager-confirm-delete-folder":"Are you sure you want to delete folder '{{name}}' and all its contents?","t-file-manager-new-file-name":"Enter file name","t-file-manager-new-folder-name":"Enter folder name","t-file-manager-rename-name":"Enter new name","t-file-manager-create-success":"Created successfully!","t-file-manager-delete-success":"Deleted successfully!","t-file-manager-rename-success":"Renamed successfully!","t-file-manager-operation-failed":"Operation failed","t-file-manager-open-success":"Successfully opened","t-file-manager-move-success":"Moved successfully!","t-file-manager-invalid-move":"Cannot move parent folder into child folder","t-file-manager-already-in-root":"File is already in root directory","t-file-manager-loading":"Loading...","t-file-manager-load-more":"Click to load more","t-file-format-not-supported":"File format '.{{extension}}' is not supported","t-ai-meeting-button":"AI Meeting","t-ai-meeting-title":"AI Meeting - Real-time Transcription & Translation & Minutes","t-ai-meeting-new-meeting":"New Meeting","t-ai-meeting-end-meeting":"End Meeting","t-ai-meeting-meeting-name":"Meeting Name (Optional)","t-ai-meeting-meeting-name-placeholder":"Leave blank for auto-generation","t-ai-meeting-speaker":"Speaker","t-ai-meeting-source-language":"Source Language","t-ai-meeting-translate-to":"Translate To","t-ai-meeting-start-recording":"Start Recording","t-ai-meeting-stop-recording":"Stop Recording","t-ai-meeting-history":"History","t-ai-meeting-transcript-title":"ğŸ“ Meeting Transcript & Translation","t-ai-meeting-transcript-placeholder":"Click the microphone button to start recording, real-time transcription and translation will be displayed here","t-ai-meeting-summary-tab":"Meeting Summary","t-ai-meeting-assistant-tab":"Real-time Assistant","t-ai-meeting-generate-summary":"Generate Summary","t-ai-meeting-export":"Export","t-ai-meeting-save":"Save","t-ai-meeting-summary-placeholder-title":"Click 'Generate Summary' button above","t-ai-meeting-summary-placeholder-desc":"AI will extract key points from the meeting","t-ai-meeting-summary-generating":"Analyzing meeting content...","t-ai-meeting-get-suggestions":"Get Real-time Suggestions / Speaking Ideas","t-ai-meeting-suggestions-placeholder-title":"Select a scenario and click 'Get Suggestions'","t-ai-meeting-suggestions-placeholder-desc":"AI will provide speaking ideas based on recent conversation","t-ai-meeting-suggestions-generating":"Thinking...","t-ai-meeting-context-meeting":"Meeting","t-ai-meeting-context-interview":"Interview","t-ai-meeting-context-negotiation":"Negotiation","t-ai-meeting-context-brainstorming":"Brainstorming","t-ai-meeting-translation":"Translation","t-ai-meeting-no-content-to-summarize":"No meeting content to summarize","t-ai-meeting-no-content-to-analyze":"No meeting content to analyze","t-ai-meeting-no-summary-to-export":"No summary content to export","t-ai-meeting-no-meeting-to-save":"No meeting record to save","t-ai-meeting-summary-generated":"Meeting summary generated","t-ai-meeting-summary-failed":"Failed to generate summary","t-ai-meeting-exported-to-editor":"Exported to editor","t-ai-meeting-export-failed":"Export failed","t-ai-meeting-saved":"Meeting record saved","t-ai-meeting-save-failed":"Save failed","t-ai-meeting-copied-to-clipboard":"Copied to clipboard","t-ai-meeting-recording-stopped":"Recording stopped","t-ai-meeting-please-start-meeting-first":"Please start a new meeting first","t-ai-meeting-recording-started":"Recording started...","t-ai-meeting-recognition-failed":"Speech recognition failed","t-ai-meeting-meeting-created":"New meeting created, starting recording...","t-ai-meeting-meeting-ended":"Meeting ended and saved","t-ai-meeting-participants":"Participants","t-ai-meeting-participants-title":"Manage Participants","t-ai-meeting-participants-desc":"Add participants and their roles. AI will automatically identify speakers based on conversation content.","t-ai-meeting-quick-switch":"Quick Switch","t-ai-meeting-add-participant":"Add Participant","t-ai-meeting-participant-add":"Add to Meeting","t-ai-meeting-participant-remove":"Remove from Meeting","t-ai-meeting-attending":"Attending","t-ai-meeting-not-attending":"Not Attending","t-ai-meeting-ai-speaker-detection":"AI Speaker Detection","t-ai-meeting-close":"Close","t-preview-mode-error":"Preview mode is enabled, can't save. Open another file!","t-save-success-local":"Saved locally! ğŸ‰","t-save-success-browser-no-local":"Saved to browser! ğŸ‰ (No local file opened)","t-save-success-browser":"Saved to browser! ğŸ‰","t-rejection-error":"How dare you refuse me.","t-updated-to-latest-version":"Updated to the latest version","t-current-version":"Current version: {{version}}","t-new-features-current-version":"New features in the current version","t-no-file-selected":"Looking around, living in a fantasy?","t-opening-file":"Opening local file, hold on a bit ğŸ˜…","t-error-opening-file":"An error occurred ğŸ¤£","t-error-opening-folder":"Failed to open folder","t-update-notification-do-not-show-again":"Don't show again","directory.preface.title":"Preface","directory.basic.title":"1. Basic Operations Guide","directory.basic.paragraph":"Paragraphs","directory.basic.lineBreak":"Line Breaks","directory.basic.bold":"Bold","directory.basic.italic":"Italic","directory.basic.center":"Center Alignment","directory.basic.customText":"Custom Text","directory.basic.exportPdf":"Export PDF","directory.advanced.title":"2. Advanced Features Guide","directory.advanced.speechToText":"Speech to Text","directory.advanced.aiAssistant":"âœ¨AI Smart Assistant","directory.advanced.autoFormat":"Auto Formatting","directory.advanced.fileManager":"File Manager","directory.advanced.imageUpload":"Image Upload","directory.advanced.syncScroll":"Synchronized Scrolling","directory.advanced.emojiMarket":"Emoji Market","directory.advanced.collaboration":"Collaborative Office","directory.advanced.tableBuilder":"Table Builder","directory.advanced.mindMap":"Mind Maps","directory.advanced.doubleClick":"Double-click Positioning","directory.smart.title":"3. Smart Features Guide","directory.smart.latex":"LaTeX Math Formulas","directory.smart.autoComplete":"Smart Suggestions","directory.smart.settings":"Settings Interface",featuresList:{startExperience:{title:"Start Experience",description:"Click to start and explore more features."},smartEditor:{title:`Markdown
Plus AI`,description:"A smart, dual-pane editor with live scrolling preview, integrated with smart completions and comprehensive shortcuts. Press Ctrl+J to summon the GPT-4 assistant, enhancing your creativity."},codeDisplay:{title:`Mind Maps
All-Inclusive`,description:"Supports syntax highlighting for over 30 programming languages and offers Mermaid flowcharts and mind maps in various themes, adding vibrance to your creation."},multiDeviceSync:{title:`Advanced
File System`,description:"A clear folder directory, one-click sync to local files, and easy clipboard image pasting, freeing your creative worries."},flexibleExport:{title:`Flexible
Export Options`,description:"Export effortlessly in formats like PDF, Markdown, and JPG, making content management a breeze."}}}},zh:{translation:{"t-more":"æ›´å¤š","t-about":"å¸®åŠ©","t-home":"é¦–é¡µ","t-image-manager":"å›¾ç‰‡ç®¡ç†å™¨ (æµè§ˆå™¨)","t-file-manager":"æ–‡ä»¶ç®¡ç†å™¨âœ¨","t-file-manager-open-file":"æ‰“å¼€æ–‡ä»¶ ","t-file-manager-open-folder":"æ‰“å¼€æ–‡ä»¶å¤¹ ","t-file-manager-saveAs":"å¦å­˜ä¸º ","t-file-manager-pinned":"å›ºå®šï¼","t-file-manager-syncLocal":"åŒæ­¥æœ¬åœ°ç¼–è¾‘","t-export":"å¯¼å‡º","t-share":"åˆ†äº« (å¼€å‘ä¸­)","t-collaborative-office":"ååŒåŠå…¬ (å¼€å‘ä¸­)","t-settings":"è®¾ç½®","t-more-coming-soon":"æ›´å¤š (æ•¬è¯·æœŸå¾…)","t-export-pdf":"å¯¼å‡ºä¸º PDF","t-export-image":"å¯¼å‡ºä¸ºå›¾ç‰‡ (Beta1.0)","t-export-markdown":"å¯¼å‡ºä¸º Markdown","t-basic-settings":"åŸºç¡€è®¾ç½®","t-theme-settings":"ä¸»é¢˜è®¾ç½®","t-language-settings":"è¯­è¨€è®¾ç½®","t-editor-settings":"ç¼–è¾‘å™¨è®¾ç½®","t-speech-to-text":"è¯­éŸ³è½¬æ–‡å­—","t-advanced-settings":"é«˜çº§è®¾ç½®","t-export-settings":"å¯¼å‡ºè®¾ç½®","t-mermaid-settings":"Mermaidè®¾ç½®","t-image-settings":"å›¾ç‰‡è®¾ç½®","t-reset-initialization":"é‡ç½®ä¸åˆå§‹åŒ–","t-basic-settings-title":"åŸºç¡€è®¾ç½®","t-advanced-settings-title":"é«˜çº§è®¾ç½®ï¼ˆæ–½å·¥ä¸­ï¼‰","t-theme-description":"æ›´æ”¹ç¼–è¾‘å™¨çš„ä¸»é¢˜","t-language-description":"æ›´æ”¹ç¼–è¾‘å™¨çš„è¯­è¨€","t-editor-settings-title":"ç¼–è¾‘å™¨è®¾ç½®","t-font-size-description":"æ›´æ”¹æ¸²æŸ“åæ–‡å­—å­—ä½“å¤§å°","t-font-family-description":"æ›´æ”¹æ¸²æŸ“åæ–‡å­—å­—ä½“","t-sync-scroll-description":"åŒæ­¥æ»šåŠ¨å·¦è¾¹ç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŸŸ","t-auto-wrap-description":"æ˜¯å¦å¼€å¯ç¼–è¾‘å™¨è‡ªåŠ¨æ¢è¡Œ","t-speech-language-description":"é€‰æ‹©è¯­éŸ³è½¬æ–‡å­—çš„è¯†åˆ«è¯­è¨€","t-export-settings-description":"æ›´æ”¹å¯¼å‡ºè®¾ç½®(æ–½å·¥ä¸­)","t-mermaid-theme-description":"Mermaidæµç¨‹å›¾ä¸»é¢˜","t-image-settings-title":"å›¾ç‰‡è®¾ç½®","t-image-storage-preference":"å›¾ç‰‡å­˜å‚¨æ¨¡å¼åå¥½ (ç²˜è´´)","t-image-storage-description":"é€‰æ‹©ä¼˜å…ˆå°†ç²˜è´´å›¾ç‰‡å­˜å‚¨åœ¨æµè§ˆå™¨/æ–‡ä»¶å¤¹","t-image-storage-folder":"æœ¬åœ°æ–‡ä»¶å¤¹ (Prefer In Local Folder)","t-image-storage-browser":"æµè§ˆå™¨ (Prefer In Browser)","t-default-image-style":"é»˜è®¤å›¾ç‰‡æ ·å¼","t-default-image-style-description":"é»˜è®¤å¡«å……çš„å›¾ç‰‡æ ·å¼ï¼Œå¤§å°ï¼Œä½ç½®ç­‰,wè¡¨ç¤ºå¤§å°, cè¡¨ç¤ºcenter, sè¡¨ç¤ºshadow","t-basic-style":"åŸºæœ¬æ ·å¼","t-default-stored-path":"é»˜è®¤å­˜å‚¨è·¯å¾„","t-default-stored-path-description":'é»˜è®¤ç²˜è´´å›¾ç‰‡ä¸Šä¼ çš„è·¯å¾„ï¼Œå¦‚è®¾ç½®ä¸º"images"ï¼Œåˆ™å›¾ç‰‡ä¼šä¸Šä¼ åˆ°æ ¹ç›®å½•çš„ä¸€ä¸ªä¸º"images"çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚è¯¥é¡¹ä¸ºç©ºï¼Œåˆ™ä¿æŒé»˜è®¤çš„"images"æ–‡ä»¶å¤¹',"t-image-store-path":"å›¾ç‰‡å­˜å‚¨è·¯å¾„","t-reset-settings-title":"é‡ç½®ä¸åˆå§‹åŒ–è®¾ç½®","t-reset-data-description":"æ¸…é™¤æ‰€æœ‰ä¿å­˜æ–‡æœ¬æ•°æ®ï¼ŒåŒ…æ‹¬å›¾ç‰‡ï¼Œè®¾ç½®ï¼Œç¼“å­˜å¹¶æ¢å¤åˆå§‹çŠ¶æ€","t-reset-button":"é‡ç½®æ‰€æœ‰æ•°æ®","t-reset-success":"æ•°æ®æ¸…é™¤å®Œæˆï¼Œé¡µé¢å°†åœ¨3ç§’ååˆ·æ–°ä»¥å®Œæˆé‡ç½®...","t-reset-warning":"éƒ¨åˆ†æ•°æ®å·²æ¸…é™¤ï¼Œé¡µé¢å°†åˆ·æ–°ä»¥å®Œæˆé‡ç½®","t-reset-confirm-title":"âš ï¸ ç¡®è®¤é‡ç½®æ‰€æœ‰æ•°æ®","t-reset-confirm-description":"æ­¤æ“ä½œå°†<strong>æ°¸ä¹…åˆ é™¤</strong>ä»¥ä¸‹æ•°æ®ï¼š","t-reset-confirm-list":"â€¢ æ‰€æœ‰ä¿å­˜çš„è‰ç¨¿å’Œå›¾ç‰‡<br/>â€¢ ç”¨æˆ·è®¾ç½®å’Œåå¥½<br/>â€¢ æµè§ˆå™¨ç¼“å­˜","t-reset-confirm-warning":"âš ï¸ æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œè¯·ç¡®ä¿æ‚¨å·²å¤‡ä»½é‡è¦æ•°æ®ï¼","t-cancel":"å–æ¶ˆ","t-confirm-reset":"ç¡®è®¤é‡ç½®","t-chinese":"ä¸­æ–‡","t-english":"English","t-default":"é»˜è®¤","t-on":"å¼€å¯","t-off":"å…³é—­","t-image-manager-title":"å›¾ç‰‡ç®¡ç†å™¨","t-image-manager-tooltip-title":"ç®¡ç†ç²˜è´´ä¸Šä¼ çš„å›¾ç‰‡","t-image-manager-tooltip-ctrl-click":"æŒ‰ä½Ctrlç‚¹å‡»å›¾ç‰‡æ’å…¥","t-image-manager-tooltip-double-click":"åŒå‡»å›¾ç‰‡æ”¾å¤§é¢„è§ˆ","t-image-manager-tooltip-alt-click":"æŒ‰ä½Altç‚¹å‡»å›¾ç‰‡å¤åˆ¶å›¾ç‰‡","t-image-manager-tooltip-delete-all":"åˆ é™¤å…¨éƒ¨å›¾ç‰‡å’Œå‚¨å­˜çš„æ–‡å­—","t-image-manager-tooltip-delete-single":"åˆ é™¤æ­¤å›¾ç‰‡","t-image-manager-delete-all-title":"ç¡®å®šè¦åˆ é™¤æ‰€æœ‰å›¾ç‰‡å—ï¼Ÿ","t-image-manager-delete-all-content":'ä¸€æ—¦ç‚¹å‡»"ç¡®å®š"æŒ‰é’®ï¼Œæ‚¨çš„å…¨éƒ¨å›¾ç‰‡å°†è¢«åˆ é™¤ï¼',"t-image-manager-confirm-yes":"ç¡®å®š","t-image-manager-confirm-no":"å–æ¶ˆ","t-image-manager-no-images-title":"æš‚æ— å›¾ç‰‡","t-image-manager-no-images-description":"è¯·ç²˜è´´å›¾ç‰‡åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œå›¾ç‰‡å°†è‡ªåŠ¨ä¿å­˜åˆ°æ­¤å¤„","t-lab-title":"å‰ç«¯å®éªŒå®¤","t-lab-card-spelling-association-title":"æ‹¼å†™è”æƒ³","t-lab-card-spelling-association-desc":"æ‹¼å†™è¡¥å…¨(åªæ”¯æŒè‹±æ–‡),å®‰è£…ä¼šåœ¨æœ¬åœ°ä¸‹è½½è¯å…¸","t-lab-card-spelling-check-title":"æ‹¼å†™æ£€æŸ¥","t-lab-card-spelling-check-desc":"æ‹¼å†™æ£€æŸ¥,ç»è´¹ä¸è¶³,å’±ä¸ç”¨äº†ï¼","t-lab-button-install":"å®‰è£…","t-lab-button-uninstall":"å¸è½½","t-lab-button-enable":"å¯ç”¨","t-lab-button-disable":"ç¦ç”¨","t-lab-install-success":"æˆåŠŸå®‰è£…å­—å…¸ï¼","t-file-manager-new-file":"æ–°å»ºæ–‡ä»¶","t-file-manager-new-folder":"æ–°å»ºæ–‡ä»¶å¤¹","t-file-manager-rename":"é‡å‘½å","t-file-manager-delete":"åˆ é™¤","t-file-manager-move":"ç§»åŠ¨","t-file-manager-copy":"å¤åˆ¶","t-file-manager-empty-folder":"æ­¤æ–‡ä»¶å¤¹ä¸ºç©º","t-file-manager-empty-folder-desc":"å³é”®ç‚¹å‡»åˆ›å»ºæ–°æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹","t-file-manager-confirm-delete":"ç¡®è®¤åˆ é™¤","t-file-manager-confirm-delete-file":"ç¡®å®šè¦åˆ é™¤ '{{name}}' å—ï¼Ÿ","t-file-manager-confirm-delete-folder":"ç¡®å®šè¦åˆ é™¤æ–‡ä»¶å¤¹ '{{name}}' åŠå…¶æ‰€æœ‰å†…å®¹å—ï¼Ÿ","t-file-manager-new-file-name":"è¯·è¾“å…¥æ–‡ä»¶å","t-file-manager-new-folder-name":"è¯·è¾“å…¥æ–‡ä»¶å¤¹å","t-file-manager-rename-name":"è¯·è¾“å…¥æ–°åç§°","t-file-manager-create-success":"åˆ›å»ºæˆåŠŸï¼","t-file-manager-delete-success":"åˆ é™¤æˆåŠŸï¼","t-file-manager-rename-success":"é‡å‘½åæˆåŠŸï¼","t-file-manager-operation-failed":"æ“ä½œå¤±è´¥","t-file-manager-open-success":"æˆåŠŸæ‰“å¼€","t-file-manager-move-success":"ç§»åŠ¨æˆåŠŸï¼","t-file-manager-invalid-move":"ä¸èƒ½å°†çˆ¶æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å­æ–‡ä»¶å¤¹ä¸­","t-file-manager-already-in-root":"æ–‡ä»¶å·²åœ¨æ ¹ç›®å½•","t-file-manager-loading":"åŠ è½½ä¸­...","t-file-manager-load-more":"ç‚¹å‡»åŠ è½½æ›´å¤š","t-file-format-not-supported":"ä¸æ”¯æŒ '.{{extension}}' æ–‡ä»¶æ ¼å¼","t-ai-meeting-button":"AI ä¼šè®®","t-ai-meeting-title":"AI ä¼šè®® - å®æ—¶è½¬å½• & ç¿»è¯‘ & ä¼šè®®çºªè¦","t-ai-meeting-new-meeting":"æ–°å»ºä¼šè®®","t-ai-meeting-end-meeting":"ç»“æŸä¼šè®®","t-ai-meeting-meeting-name":"ä¼šè®®åç§°ï¼ˆå¯é€‰ï¼‰","t-ai-meeting-meeting-name-placeholder":"ç•™ç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆ","t-ai-meeting-speaker":"å‘è¨€äºº","t-ai-meeting-source-language":"æºè¯­è¨€","t-ai-meeting-translate-to":"ç¿»è¯‘ä¸º","t-ai-meeting-start-recording":"å¼€å§‹å½•éŸ³","t-ai-meeting-stop-recording":"åœæ­¢å½•éŸ³","t-ai-meeting-history":"å†å²è®°å½•","t-ai-meeting-transcript-title":"ğŸ“ ä¼šè®®è½¬å½• & ç¿»è¯‘","t-ai-meeting-transcript-placeholder":"ç‚¹å‡»éº¦å…‹é£æŒ‰é’®å¼€å§‹å½•éŸ³ï¼Œå®æ—¶è½¬å½•å’Œç¿»è¯‘ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ","t-ai-meeting-summary-tab":"ä¼šè®®æ€»ç»“","t-ai-meeting-assistant-tab":"å®æ—¶åŠ©æ‰‹","t-ai-meeting-generate-summary":"ç”Ÿæˆæ€»ç»“","t-ai-meeting-export":"å¯¼å‡º","t-ai-meeting-save":"ä¿å­˜","t-ai-meeting-summary-placeholder-title":'ç‚¹å‡»ä¸Šæ–¹"ç”Ÿæˆæ€»ç»“"æŒ‰é’®',"t-ai-meeting-summary-placeholder-desc":"AIå°†ä¸ºæ‚¨æç‚¼ä¼šè®®è¦ç‚¹","t-ai-meeting-summary-generating":"æ­£åœ¨åˆ†æä¼šè®®å†…å®¹...","t-ai-meeting-get-suggestions":"è·å–å®æ—¶å»ºè®® / å‘è¨€æ€è·¯","t-ai-meeting-suggestions-placeholder-title":'é€‰æ‹©åœºæ™¯å¹¶ç‚¹å‡»"è·å–å»ºè®®"',"t-ai-meeting-suggestions-placeholder-desc":"AIå°†æ ¹æ®æœ€è¿‘çš„å¯¹è¯æä¾›å‘è¨€æ€è·¯","t-ai-meeting-suggestions-generating":"æ­£åœ¨æ€è€ƒä¸­...","t-ai-meeting-context-meeting":"ä¼šè®®","t-ai-meeting-context-interview":"é¢è¯•","t-ai-meeting-context-negotiation":"è°ˆåˆ¤","t-ai-meeting-context-brainstorming":"å¤´è„‘é£æš´","t-ai-meeting-translation":"ç¿»è¯‘","t-ai-meeting-no-content-to-summarize":"æ²¡æœ‰ä¼šè®®å†…å®¹å¯ä»¥æ€»ç»“","t-ai-meeting-no-content-to-analyze":"æ²¡æœ‰ä¼šè®®å†…å®¹å¯ä»¥åˆ†æ","t-ai-meeting-no-summary-to-export":"æ²¡æœ‰æ€»ç»“å†…å®¹å¯ä»¥å¯¼å‡º","t-ai-meeting-no-meeting-to-save":"æ²¡æœ‰ä¼šè®®è®°å½•å¯ä»¥ä¿å­˜","t-ai-meeting-summary-generated":"ä¼šè®®æ€»ç»“ç”Ÿæˆå®Œæˆ","t-ai-meeting-summary-failed":"ç”Ÿæˆæ€»ç»“å¤±è´¥","t-ai-meeting-exported-to-editor":"å·²å¯¼å‡ºåˆ°ç¼–è¾‘å™¨","t-ai-meeting-export-failed":"å¯¼å‡ºå¤±è´¥","t-ai-meeting-saved":"ä¼šè®®è®°å½•å·²ä¿å­˜","t-ai-meeting-save-failed":"ä¿å­˜å¤±è´¥","t-ai-meeting-copied-to-clipboard":"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","t-ai-meeting-recording-stopped":"å½•éŸ³å·²åœæ­¢","t-ai-meeting-please-start-meeting-first":"è¯·å…ˆå¼€å§‹æ–°ä¼šè®®","t-ai-meeting-recording-started":"å¼€å§‹å½•éŸ³...","t-ai-meeting-recognition-failed":"è¯­éŸ³è¯†åˆ«å¯åŠ¨å¤±è´¥","t-ai-meeting-meeting-created":"æ–°ä¼šè®®å·²åˆ›å»ºï¼Œå¼€å§‹å½•éŸ³...","t-ai-meeting-meeting-ended":"ä¼šè®®å·²ç»“æŸå¹¶ä¿å­˜","t-ai-meeting-participants":"å‚ä¼šäººå‘˜","t-ai-meeting-participants-title":"ç®¡ç†å‚ä¼šäººå‘˜","t-ai-meeting-participants-desc":"æ·»åŠ å‚ä¼šäººå‘˜åŠå…¶å²—ä½ï¼ŒAIå°†æ ¹æ®å¯¹è¯å†…å®¹è‡ªåŠ¨è¯†åˆ«è¯´è¯äººã€‚","t-ai-meeting-quick-switch":"å¿«é€Ÿåˆ‡æ¢","t-ai-meeting-add-participant":"æ·»åŠ å‚ä¼šäºº","t-ai-meeting-participant-add":"åŠ å…¥ä¼šè®®","t-ai-meeting-participant-remove":"ç¦»å¼€ä¼šè®®","t-ai-meeting-attending":"å‚ä¼šä¸­","t-ai-meeting-not-attending":"æœªå‚ä¼š","t-ai-meeting-ai-speaker-detection":"AIè¯´è¯äººè¯†åˆ«","t-ai-meeting-close":"å…³é—­","t-preview-mode-error":"é¢„è§ˆæ¨¡å¼ä½ ä¿å­˜ä¸ªå±ï¼Œå¼€å¦ä¸€ä¸ªæ–‡ä»¶ï¼","t-save-success-local":"æˆåŠŸä¿å­˜åˆ°æœ¬åœ°ï¼ğŸ‰","t-save-success-browser-no-local":"æˆåŠŸä¿å­˜åˆ°æµè§ˆå™¨ï¼ğŸ‰(æœªæ‰“å¼€æœ¬åœ°æ–‡ä»¶)","t-save-success-browser":"æˆåŠŸä¿å­˜åˆ°æµè§ˆå™¨ï¼ğŸ‰","t-rejection-error":"ä½ ç«Ÿæ•¢æ‹’ç»æˆ‘ã€‚","t-updated-to-latest-version":"å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬","t-current-version":"å½“å‰ç‰ˆæœ¬: {{version}}","t-new-features-current-version":"å½“å‰ç‰ˆæœ¬æ–°å¢ç‰¹æ€§","t-no-file-selected":"å·¦é¡¾å³ç›¼ï¼Œæ´»åœ¨æ¢¦å¹»?","t-opening-file":"æ­£åœ¨æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œåˆ«æ€¥ï¼Œä½ ç»™æˆ‘ç­‰ä¼šğŸ˜…","t-error-opening-file":"å°¼ç›çš„æŠ¥é”™ä¹ğŸ¤£","t-error-opening-folder":"æ‰“å¼€æ–‡ä»¶å¤¹å¤±è´¥","t-update-notification-do-not-show-again":"ä¸å†æ˜¾ç¤º","directory.preface.title":"å‰è¨€","directory.basic.title":"1.åŸºç¡€æ“ä½œæŒ‡å—","directory.basic.paragraph":"æ®µè½","directory.basic.lineBreak":"æ¢è¡Œ","directory.basic.bold":"åŠ ç²—","directory.basic.italic":"æ–œä½“","directory.basic.center":"å±…ä¸­","directory.basic.customText":"ä»»æ„æ–‡æœ¬","directory.basic.exportPdf":"å¯¼å‡ºPDF","directory.advanced.title":"2.é»‘ç§‘æŠ€æŒ‡å—","directory.advanced.speechToText":"è¯­éŸ³è½¬æ–‡å­—","directory.advanced.aiAssistant":"âœ¨AIæ™ºèƒ½åŠ©æ‰‹","directory.advanced.autoFormat":"è‡ªåŠ¨æ’ç‰ˆ","directory.advanced.fileManager":"æ–‡ä»¶ç®¡ç†å™¨","directory.advanced.imageUpload":"å›¾ç‰‡ä¸Šä¼ ","directory.advanced.syncScroll":"åŒæ­¥æ»šåŠ¨","directory.advanced.emojiMarket":"è¡¨æƒ…åŒ…è¶…å¸‚","directory.advanced.collaboration":"ååŒåŠå…¬","directory.advanced.tableBuilder":"è¡¨æ ¼é€Ÿå»º","directory.advanced.mindMap":"æ€ç»´å¯¼å›¾","directory.advanced.doubleClick":"åŒå‡»å®šä½","directory.smart.title":"3.æ™ºèƒ½æç¤ºæŒ‡å—","directory.smart.latex":"LaTexæ•°å­¦å…¬å¼","directory.smart.autoComplete":"æ™ºèƒ½æç¤º","directory.smart.settings":"è®¾ç½®ç•Œé¢",featuresList:{startExperience:{title:"å¼€å§‹ä½“éªŒ",description:"ç‚¹å‡»å¼€å§‹ï¼Œæ¢ç´¢æ›´å¤šåŠŸèƒ½ã€‚"},smartEditor:{title:`Markdown
+ AI`,description:"æ™ºèƒ½åŒæ ç¼–è¾‘å™¨ï¼Œå®æ—¶æ»šåŠ¨é¢„è§ˆï¼Œé›†æˆæ™ºèƒ½è¡¥å…¨å’Œå…¨é¢å¿«æ·é”®ã€‚æŒ‰ Ctrl+J å¬å”¤ GPT-4 åŠ©æ‰‹ï¼Œå¢å¼ºæ‚¨çš„åˆ›é€ åŠ›ã€‚"},codeDisplay:{title:`æ€ç»´å¯¼å›¾
å…¨åŒ…å«`,description:"æ”¯æŒ 30+ ç¼–ç¨‹è¯­è¨€è¯­æ³•é«˜äº®ï¼Œæä¾›å¤šä¸»é¢˜ Mermaid æµç¨‹å›¾å’Œæ€ç»´å¯¼å›¾ï¼Œä¸ºæ‚¨çš„åˆ›ä½œå¢è‰²ã€‚"},multiDeviceSync:{title:`é«˜çº§
æ–‡ä»¶ç³»ç»Ÿ`,description:"æ¸…æ™°çš„æ–‡ä»¶å¤¹ç›®å½•ï¼Œä¸€é”®åŒæ­¥æœ¬åœ°æ–‡ä»¶ï¼Œè½»æ¾å‰ªè´´æ¿å›¾ç‰‡ç²˜è´´ï¼Œè§£æ”¾æ‚¨çš„åˆ›ä½œçƒ¦æ¼ã€‚"},flexibleExport:{title:`çµæ´»
å¯¼å‡ºé€‰é¡¹`,description:"è½»æ¾å¯¼å‡º PDFã€Markdownã€JPG ç­‰æ ¼å¼ï¼Œè®©å†…å®¹ç®¡ç†å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚"}}}}},dd=()=>{const t=navigator.language;return t==="zh-CN"?"zh":"en"},md=()=>{const t=localStorage.getItem("i18nextLng")||dd();Zt({basic:{language:t}}),nt.use(jo).use(Bo).init({debug:!1,lng:t,fallbackLng:"zh",interpolation:{escapeValue:!1},react:{useSuspense:!0},resources:cd})};md();Zr(["markdownitIncrementalDOM","katex","IncrementalDOM"]).then(()=>{const t=document.getElementById("root"),e=document.getElementById("app-loading");if(!t||!e){console.error("Fatal Error: #root or #app-loading element not found.");return}xa.createRoot(t).render(u.createElement(i.Suspense,{fallback:u.createElement("div",null,"Loading...")},u.createElement(ld,null))),setTimeout(()=>{t.style.opacity="1",e.classList.add("hidden"),e.addEventListener("transitionend",()=>{const r=window;typeof r.clearLoadingInterval=="function"&&r.clearLoadingInterval(),e.remove()},{once:!0})},150)});export{lt as A,Ke as B,Ot as C,at as D,Rn as I,Zd as S,ge as a,ye as b,Gd as c,Xd as d,Il as e,Zt as f,Pt as g,Yd as h,ve as i,Qd as j,bt as k,R as l,Ln as m,gr as n,ai as o,Jd as p,jr as q,Vd as r,bl as s,qn as t,wl as u,en as v,ta as w,Js as x,Tr as y,Xo as z};
