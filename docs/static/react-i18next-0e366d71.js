const O=(...e)=>{console?.warn&&(f(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},E={},b=(...e)=>{f(e[0])&&E[e[0]]||(f(e[0])&&(E[e[0]]=new Date),O(...e))},L=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},z=(e,t,s)=>{e.loadNamespaces(t,L(e,s))},F=(e,t,s,o)=>{f(s)&&(s=[s]),s.forEach(g=>{e.options.ns.indexOf(g)<0&&e.options.ns.push(g)}),e.loadLanguages(t,L(e,o))},P=(e,t,s={})=>!t.languages||!t.languages.length?(b("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(e,{lng:s.lng,precheck:(o,g)=>{if(s.bindI18n?.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!g(o.isLanguageChangingTo,e))return!1}}),f=e=>typeof e=="string",v=e=>typeof e=="object"&&e!==null,U=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,$={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},q=e=>$[e],A=e=>e.replace(U,q);let x={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:A};const B=(e={})=>{x={...x,...e}},W=()=>x;let k;const G=e=>{k=e},J=()=>k,ee={type:"3rdParty",init(e){B(e.options.react),G(e)}},K=window.React.createContext,Y=K();class Q{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const X=window.React.useState,C=window.React.useEffect,Z=window.React.useContext,j=window.React.useRef,_=window.React.useCallback,D=(e,t)=>{const s=j();return C(()=>{s.current=t?s.current:e},[e,t]),s.current},H=(e,t,s,o)=>e.getFixedT(t,s,o),V=(e,t,s,o)=>_(H(e,t,s,o),[e,t,s,o]),te=(e,t={})=>{const{i18n:s}=t,{i18n:o,defaultNS:g}=Z(Y)||{},n=s||o||J();if(n&&!n.reportNamespaces&&(n.reportNamespaces=new Q),!n){b("You will need to pass in an i18next instance by using initReactI18next");const i=(r,u)=>f(u)?u:v(u)&&f(u.defaultValue)?u.defaultValue:Array.isArray(r)?r[r.length-1]:r,c=[i,{},!1];return c.t=i,c.i18n={},c.ready=!1,c}n.options.react?.wait&&b("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const p={...W(),...n.options.react,...t},{useSuspense:S,keyPrefix:y}=p;let a=e||g||n.options?.defaultNS;a=f(a)?[a]:a||["translation"],n.reportNamespaces.addUsedNamespaces?.(a);const l=(n.isInitialized||n.initializedStoreOnce)&&a.every(i=>P(i,n,p)),M=V(n,t.lng||null,p.nsMode==="fallback"?a:a[0],y),R=()=>M,h=()=>H(n,t.lng||null,p.nsMode==="fallback"?a:a[0],y),[T,m]=X(R);let w=a.join();t.lng&&(w=`${t.lng}${w}`);const I=D(w),d=j(!0);C(()=>{const{bindI18n:i,bindI18nStore:c}=p;d.current=!0,!l&&!S&&(t.lng?F(n,t.lng,a,()=>{d.current&&m(h)}):z(n,a,()=>{d.current&&m(h)})),l&&I&&I!==w&&d.current&&m(h);const r=()=>{d.current&&m(h)};return i&&n?.on(i,r),c&&n?.store.on(c,r),()=>{d.current=!1,n&&i?.split(" ").forEach(u=>n.off(u,r)),c&&n&&c.split(" ").forEach(u=>n.store.off(u,r))}},[n,w]),C(()=>{d.current&&l&&m(R)},[n,y,l]);const N=[T,n,l];if(N.t=T,N.i18n=n,N.ready=l,l||!l&&!S)return N;throw new Promise(i=>{t.lng?F(n,t.lng,a,()=>i()):z(n,a,()=>i())})};export{ee as i,te as u};
