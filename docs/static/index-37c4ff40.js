import{R as u,r as c}from"./react-2c2ad9dc.js";import{r as xr,a as Cr}from"./react-dom-c6aabcbc.js";import{_ as Ve,R as kr}from"./monaco-editor-5cf1114e.js";import{T as zn,B as z,P as cn,a as Ie,I as Me,E as vr,A as dn,D as _t,H as Er,b as Sr,c as Tr,d as Ir,e as un,f as qe,C as mn,g as Dr,v as Mr,h as Fr,i as rt,Z as Hn,j as Qt,k as Mt,l as Zt,m as en,n as Ar,o as tn,p as ve,q as nn,r as Bn,s as ft,t as On,u as $r,w as Lr,x as Ge,y as Rr,S as Pr,z as _r,F as mt,G as jr,J as Ft,K as Nr,L as fn,M as gn,N as pn,O as Kn,Q as zr,R as ke,U as hn,V as Wn,W as Un,X as Hr,Y as Br,_ as rn,$ as Or,a0 as Kr,a1 as Wr,a2 as At,a3 as Ur,a4 as Vr,a5 as Jr,a6 as Gr,a7 as qr,a8 as Xr,a9 as Yr,aa as Qr,ab as Vn,ac as Jn,ad as yn,ae as Zr,af as ea,ag as ta,ah as Gn,ai as na,aj as ra,ak as aa,al as oa,am as ia,an as la,ao as sa,ap as yt,aq as wt,ar as bt,as as xt,at as ca,au as Ct,av as da,aw as ua,ax as qn,ay as Jt,az as wn,aA as ma}from"./@mui-fd8f6c35.js";import{i as Xe}from"./i18next-c75e253c.js";import{o as at}from"./mobx-react-7d4c1e4f.js";import{u as Te,i as fa}from"./react-i18next-65ca089e.js";import{c as bn}from"./clsx-0839fdbe.js";import{l as Xn,F as ga}from"./@monaco-editor-80ea4237.js";import{R as pa}from"./react-resizable-942463f8.js";import{B as ha}from"./i18next-browser-languagedetector-ac00b891.js";import"./@babel-e5f941c7.js";import"./scheduler-765c72db.js";/* empty css                      */import"./@emotion-ac376cc0.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./stylis-79144faa.js";import"./react-transition-group-34e06d3e.js";import"./@popperjs-61ffd834.js";import"./prop-types-d9a440a1.js";import"./mobx-3741033e.js";import"./mobx-react-lite-afa2ccc5.js";import"./use-sync-external-store-b06bb362.js";import"./state-local-dd516420.js";import"./react-draggable-966ae795.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const ya=[];async function T(t){if(!t)throw new Error("A non-empty URL must be provided.");let e=new URL(t);async function n(r){try{const a=await fetch(r);if(!a.ok)throw new Error("Network response was not ok "+a.statusText);const o=a.body.getReader(),i=new TextDecoder;let s=0,l="";for(;;){const{done:m,value:d}=await o.read();if(m)break;l+=i.decode(d,{stream:!0}),s+=d.length}return l}catch(a){throw console.error("Error:",a),a}}if(ya.includes(e.pathname))try{const r=await n(t),a=new Blob([r],{type:"application/javascript"}),o=URL.createObjectURL(a);return await Ve(()=>import(o),[],import.meta.url)}catch(r){console.error("Failed to load module:",r)}else try{return e.host=window._cdn.cdn[0],await Ve(()=>import(e.toString()),[],import.meta.url)}catch{return window._cdn.failed.includes(e.host)||(window._cdn.failed.push(e.host),window._cdn.cdn=window._cdn.cdn.filter(a=>a!==e.host)),T(t)}}function $t(t,e=1,n){return new Promise((r,a)=>{var o=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;let i;const s=o.open(t,e);s.onsuccess=function(l){i=l.target.result,r(i)},s.onerror=function(l){console.log("数据库打开报错"),a(l)},s.onupgradeneeded=function(l){i=l.target.result,n&&n(i,l)}})}function wa(t,e,n){const r=t.transaction([e],"readwrite").objectStore(e).add(n);r.onsuccess=function(a){console.log("数据写入成功")},r.onerror=function(a){console.error("数据写入失败",a)}}function ba(t,e,n){return new Promise((r,a)=>{var o=t.transaction([e],"readwrite").objectStore(e).put(n);o.onsuccess=function(){r()},o.onerror=function(i){}})}function Yn(t,e,n){return new Promise((r,a)=>{const i=t.transaction(e,"readonly").objectStore(e).get(n);i.onerror=function(s){a(s)},i.onsuccess=function(s){r(i.result)}})}function Us(t,e,n){var r=t.transaction([e],"readwrite").objectStore(e).delete(n);r.onsuccess=function(){console.log("数据删除成功")},r.onerror=function(){console.log("数据删除失败")}}function xa(t,e,n,r){var a=t.transaction(e,"readwrite").objectStore(e),o=a.index(n).openCursor(IDBKeyRange.only(r));o.onsuccess=function(i){var s=i.target.result,l;s&&(l=s.delete(),l.onerror=function(){console.log("游标删除该记录失败")},l.onsuccess=function(){console.log("游标删除该记录成功")},s.continue())},o.onerror=function(i){}}function Ca(t){let e=window.indexedDB.deleteDatabase(t);e.onerror=function(n){console.log("删除失败")},e.onsuccess=function(n){console.log("删除成功")}}async function Vs(t,e,n){try{const r=await fetch(t);if(!r.ok)throw new Error(`网络请求失败: ${r.status}`);const a=r.headers.get("Content-Length");a||console.warn("无法获取 Content-Length，无法计算下载进度");const o=r.body?.getReader();if(!o)throw new Error("读取流失败");let i=0;const s=[],l=a?parseInt(a,10):0;for(;;){const{done:b,value:g}=await o.read();if(b)break;if(s.push(g),i+=g.length,l&&n){const h=Math.round(i/l*100);n(h)}}const m=new Uint8Array(i);let d=0;for(const b of s)m.set(b,d),d+=b.length;const f=JSON.parse(new TextDecoder("utf-8").decode(m)),p=await $t("cache_DB",1,(b,g)=>{b.objectStoreNames.contains("data")||b.createObjectStore("data",{keyPath:"id",autoIncrement:!0})});await wa(p,"data",{id:e,data:f}),n&&n(100),console.log("JSON数据已成功存入 IndexedDB")}catch(r){console.error("获取或存储 JSON 数据时出错:",r),n&&n(-1)}}async function ka(t){try{const e=await $t("cache_DB",1),n=await Yn(e,"data",t);return n?n.data:null}catch{return null}}const va=["cdn.jsdelivr.net","fastly.jsdelivr.net","cdn.jsdmirror.com"];async function Ea(){window._cdn={failed:[],index:0,cdn:va}}async function Sa(){return new Promise(async t=>{try{t()}catch(e){console.log("hifuck",e),t()}})}async function Ta(){const t=()=>$t("cache_DB",1,m=>{m.createObjectStore("scripts",{keyPath:"id"}),m.createObjectStore("styles",{keyPath:"id"}),m.createObjectStore("data",{keyPath:"id"})}),e=(l,m,d)=>Yn(l,m,d),n=(l,m,d,f)=>ba(l,m,{id:d,content:f}),r=async(l,m,d)=>{const f=await t(),p=l+"s";let b=await e(f,p,m);if(!b){const g=await fetch(d);if(!g.ok)throw new Error(`Failed to fetch ${d}`);const h=await g.text();if((h.match(/define$/g)||[]).length>1)throw new Error(`Script at ${d} has multiple anonymous define calls`);await n(f,p,m,h),b={content:h}}if(!document.querySelector(`script[data-id="${m}"]`)){const g=document.createElement(l);g.textContent=b.content,g.setAttribute("data-id",m),document.head.appendChild(g)}},a=window._cdn.cdn[0],o=[{id:"katex",cdnUrl:`https://${a}/npm/katex@0.16.7/dist/katex.min.js`},{id:"IncrementalDOM",cdnUrl:`https://${a}/npm/incremental-dom@0.7.0/dist/incremental-dom-min.js`},{id:"markdownitIncrementalDOM",cdnUrl:`https://${a}/npm/markdown-it-incremental-dom/dist/markdown-it-incremental-dom.min.js`}],i=[{id:"githubMd",cdnUrl:`https://${a}/npm/clue-parser@1.0.3/src/githubMd.min.css`},{id:"clue-parser",cdnUrl:`https://${a}/npm/clue-parser@1.0.4/index.min.css`},{id:"arco-design",cdnUrl:`https://${a}/npm/@arco-design/web-react@2.58.3/dist/css/arco.min.css`}];async function s(l,m,d){try{await m(d,l.id,l.cdnUrl)}catch{let p=new URL(l.cdnUrl);p.host=window._cdn.cdn[1]?window._cdn.cdn[1]:p.host,await m(l.id,p.toString())}}for(const l of o)await s(l,r,"script");for(const l of i)await s(l,r,"style")}async function Ia(){const t=indexedDB.open("cache_DB",1);t.onupgradeneeded=a=>{a.target.result.createObjectStore("scripts",{keyPath:"id"}),a.target.result.createObjectStore("styles",{keyPath:"id"}),a.target.result.createObjectStore("data",{keyPath:"id"})};const e=(a,o)=>new Promise((i,s)=>{const l=a.transaction("scripts").objectStore("scripts").get(o);l.onsuccess=()=>i(l.result),l.onerror=()=>s(l.error)});await(async a=>{const o=await new Promise((s,l)=>{t.onsuccess=()=>s(t.result)});let i=o.objectStoreNames;if(!i.contains("scripts")||!i.contains("styles")||!i.contains("data")){let s=window.indexedDB.deleteDatabase("cache_DB");s.onsuccess=function(l){window.location.reload()}}for(const{id:s,cdnUrl:l}of a)try{const m=await e(o,s);if(m){const d=document.createElement("script");d.textContent=m.content,document.head.appendChild(d)}else{const d=document.createElement("script");d.src=l,document.head.appendChild(d)}}catch(m){console.error(`Error loading script ${s}:`,m)}})([{id:"katex",cdnUrl:"https://cdn.jsdmirror.com/npm/katex@0.16.7/dist/katex.min.js"},{id:"incremental-dom",cdnUrl:"https://cdn.jsdmirror.com/npm/incremental-dom@0.7.0/dist/incremental-dom-min.js"},{id:"markdown-it-incremental-dom",cdnUrl:"https://cdn.jsdmirror.com/npm/markdown-it-incremental-dom/dist/markdown-it-incremental-dom.min.js"}])}const Da=()=>{const t=localStorage.getItem("i18nextLng")||"zh-CN";document.documentElement.lang=t};(async function(){Da(),await Ea(),await Sa(),await Ta(),await Ia()})();function Ma(t=window.editor){const e=t??window.editor;var n=e.getSelection(),r=n.startLineNumber,a=n.startColumn,o=n.endLineNumber,i=n.endColumn,s=e.getModel().getValueInRange({startLineNumber:r,startColumn:a,endLineNumber:o,endColumn:i});return s}function ot(t,e,n=window.editor,r=window.monaco){const a=window.editor,o=t,i=window.editor.getSelections()[0];a.executeEdits("img-insert",[{range:new window.monaco.Range(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn),text:o,forceMoveMarkers:e}])}function Fa(t){navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(t).catch(e=>{console.error("Failed to copy text using Clipboard API: ",e),xn(t)}):xn(t)}function xn(t){try{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="1px",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")?console.log("Text copied to clipboard using execCommand."):console.error("Fallback: Failed to copy text using execCommand."),document.body.removeChild(e)}catch(e){console.error("Fallback: Unable to copy text to clipboard: ",e)}}class Qn{version="0.2";setItem(e,n){localStorage.setItem(e,n)}getItem(e){return localStorage.getItem(e)?localStorage.getItem(e):""}removeItem(e){localStorage.removeItem(e)}}const Aa=`[TOC]\r
\r
## 新一代的“Markdown”编辑器📣\r
\r
1. 如果你还不清楚什么是markdown的话请移步[markdown简介](https://markdown.com.cn/cheat-sheet.html#总览), 下面是一些简短的介绍：\r
   - 左边是源代码\r
   - 右边是渲染出来的结果\r
   - 试着在新的一行打出一个# 你好, 在右边就会发现变成标题了！\r
\r
## 一、QQ咩咩好用到爆炸的Markdown编辑器😀\r
\r
1. 目前全世界最好用的onion写的Web端Markdown免费编辑器\r
2. 在新的一行打一个斜杠字符：\`/\`，即可看到流程图、代码块等快捷提示！\r
3. 鼠标右键也有一堆神奇功能！\r
4. 导出为PDF在右上角更多里，直接按下\`Ctrl + P\`也可以哦\r
5. 免费、不限时长、高准确率的语音转文字，还不快来试试！\r
6. 最智能的同步滚动算法，最高效的代码渲染效率，最现代的UI界面，最酷炫的神奇功能！\r
7. 双击右侧能快速定位到左侧对应代码，说真的，用过的都说太方便了！\r
8. 最全快捷键，没有之一\r
   - \`Ctrl + V\` 上传复制和截图的JPG、PNG格式图片\r
   - \`Ctrl + Z\` 撤回编辑\r
   - \`Ctrl + F\` 查找与替换\r
   - \`Ctrl + E/R\` 文本居中/右\r
   - \`Ctrl + B\` 文本加粗\r
   - \`Ctrl + U\` 下划线\r
   - \`Ctrl + I\` 文本斜体\r
   - \`Ctrl + 1-4\` 1-4级标题\r
   - \`\` Ctrl + \` \`\` 删除线\r
   - \`Ctrl + Q\` 同步滚动\r
   - \`Ctrl + Shift + F\` 文件管理器\r
   - \`Ctrl + S\` 保存\r
   - \`Ctrl + M\` 插入一个LaTex代码块\r
   - \`Shift + Alt + F\` 格式化Markdown\r
   - \`Ctrl + Alt + V\` 语音转文字\r
   - 更多快捷键，敬请期待...\r
\r
## 二、常用的Makrdown语法\r
\r
- 这就用了无序列表了，那你猜猜，有序列表是什么呢？\r
- 你好，我是带语法提示的LaTex！语法参见：[LaTex公示表](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
  $$\r
  \\lambda+1=\\lambda^3-1\r
  $$\r
- 不教学了，真的**很简单**！\r
\r
## 三、流程图？思维导图？饼图？统统拿下！✨\r
\r
对，就在下面，打一个斜杠/，再打flow，回车！\r
\r
\`\`\`mermaid\r
flowchart LR\r
Start --> Stop\r
\`\`\`\r
\r
## 四、超Newbee的图片管理器\r
\r
1. 点击右上角更多打开文件管理器，打开文件夹并授权\r
2. 截图 （或者是复制图片文件）\r
3. 粘贴 （到这里任何地方）\r
\r
是的，就这么简单！！\r
\r
## 五、提上日程\r
\r
- 协同办公\r
- 分享\r
- 在线运行Python\r
\r
## 六、关于我和这个项目\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: 就是解释一些东西的脚注啦！\r
[^2]: 这是第二个脚注！\r
`,$a=`[TOC]\r
\r
## Next-Generation "Markdown" Editor📣\r
\r
1. If you're not familiar with Markdown, please visit [Markdown Introduction](https://markdown.com.cn/cheat-sheet.html#overview). Here's a brief introduction:\r
   - The left side is the source code\r
   - The right side is the rendered result\r
   - Try typing \`# Hello\` on a new line, and you'll see it becomes a heading on the right!\r
\r
## 1. The Most Amazing Markdown Editor Ever😀\r
\r
1. Currently the world's best free web-based Markdown editor written by onion\r
2. Type a forward slash character: \`/\` on a new line to see quick suggestions for flowcharts, code blocks, and more!\r
3. Right-click also has a bunch of magical features!\r
4. Export to PDF is in the "More" menu at the top right, or press \`Ctrl + P\` directly\r
5. Free, unlimited duration, high-accuracy speech-to-text conversion - come try it!\r
6. The smartest synchronized scrolling algorithm, most efficient code rendering, most modern UI interface, and coolest magical features!\r
7. Double-click on the right side to quickly locate the corresponding code on the left - seriously, everyone who's used it says it's super convenient!\r
8. The most comprehensive keyboard shortcuts, bar none:\r
   - \`Ctrl + V\` Upload copied and screenshot JPG/PNG images\r
   - \`Ctrl + Z\` Undo edit\r
   - \`Ctrl + F\` Find and replace\r
   - \`Ctrl + E/R\` Center/right align text\r
   - \`Ctrl + B\` Bold text\r
   - \`Ctrl + U\` Underline\r
   - \`Ctrl + I\` Italic text\r
   - \`Ctrl + 1-4\` Level 1-4 headings\r
   - \`\` Ctrl + \` \`\` Strikethrough\r
   - \`Ctrl + Q\` Synchronized scrolling\r
   - \`Ctrl + Shift + F\` File manager\r
   - \`Ctrl + S\` Save\r
   - \`Ctrl + M\` Insert a LaTeX code block\r
   - \`Shift + Alt + F\` Format Markdown\r
   - \`Ctrl + Alt + V\` Speech to text\r
   - More shortcuts coming soon...\r
\r
## 2. Common Markdown Syntax\r
\r
- This uses an unordered list - can you guess what an ordered list looks like?\r
- Hello, I'm LaTeX with syntax highlighting! For syntax reference, see: [LaTeX Formula Table](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
  $$\r
  \\lambda+1=\\lambda^3-1\r
  $$\r
- No more tutorials - it's really **that simple**!\r
\r
## 3. Flowcharts? Mind Maps? Pie Charts? We've Got Them All!✨\r
\r
Yes, right below! Type a forward slash \`/\`, then type "flow", and press Enter!\r
\r
\`\`\`mermaid\r
flowchart LR\r
Start --> Stop\r
\`\`\`\r
\r
## 4. Super User-Friendly Image Manager\r
\r
1. Click "More" in the top right corner to open the file manager, open a folder and grant authorization\r
2. Take a screenshot (or copy an image file)\r
3. Paste (anywhere here)\r
\r
Yes, it's that simple!!\r
\r
## 5. On the Agenda\r
\r
- Collaborative Office\r
- Sharing\r
- Online Python Execution\r
\r
## 6. About Me and This Project\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: These are footnotes for explaining things!\r
[^2]: This is the second footnote!\r
`,pt=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).openDB,La=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).cursorGetDataByIndex,Zn=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).cursorGetData,er=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/db.min.js")).updateDB;function Ra(t){pt("md_content",2).then(e=>{er(e,"users_md",{uuid:1,contentText:t})})}async function tr(){return new Promise(t=>{pt("md_content",2).then(e=>{Zn(e,"users_md").then(n=>{t(n)})})})}function Pa(t,e){pt("md_content",2).then(n=>{for(let r=0;r<=t.length-1;r++){let a={uuid:e+r,imgBase64:t[r]};er(n,"users_img",a)}})}async function _a(t,e){return new Promise(n=>{pt("md_content",2).then(r=>{La(r,"users_img",t,e).then(a=>{n(a)})})})}async function ja(){return new Promise(t=>{pt("md_content",2).then(e=>{Zn(e,"users_img").then(n=>{t(n)})})})}function Na(){return new Promise(t=>{tr().then(e=>{if(e.length&&e[0].contentText)window.editor.setValue(e[0].contentText),t();else{const r=(pe().basic.language||"zh")==="en"?$a:Aa;window.editor.setValue(r),t()}})})}function gt(){return window.editor?.getValue?window.editor.getValue():"null"}function za(t){return t=t.replace(/\|---\|/g,'<div style="page-break-after: always;"></div>'),t}const Ha=(await T("https://cdn.jsdmirror.com/npm/@arco-design/web-react@2.62.0/+esm")).Message,Ba=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,H=(t,e,n)=>{const r=n?.zIndex??9999,a=n?.kind??"success";let o=document.getElementsByClassName("arco-message-wrapper arco-message-wrapper-top")[0];o?o.style.zIndex=String(r)??r:Ba.addStyle(`.arco-message-wrapper .arco-message-wrapper-top{z-index:${r}}`),Ha[a]({style:{position:"relative",zIndex:r},content:t,closable:!0,duration:e??2500,position:"top",...n?.extraConfig})};class Ye{static instance;counter=0;baseTimestamp;constructor(){this.baseTimestamp=Date.now()}static getInstance(){return Ye.instance||(Ye.instance=new Ye),Ye.instance}generateId(e,n=!1){const r=e.replace(/[\/\\]/g,"_").replace(/[^a-zA-Z0-9_-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"root";this.counter++;const a=Math.floor(Math.random()*1e4),o=n?".lazy":"";return`${r}_${this.baseTimestamp}_${this.counter}_${a}${o}`}}const ct=Ye.getInstance(),nr=["md","txt","go","java","kt","py","js","ts","html","css","c","cpp","json","mjs","jsx","tsx","ps1","cmd","xsl","toml","ipynb","makefile","yml"],Cn=nr.map(t=>`.${t}`),Lt=["jpg","jpeg","png","gif","bmp","webp","svg","fig"];class Ee{static fileState=0;static fileHandle=null;static topDirectoryArray=[]}class rr extends Ee{constructor(e){super()}get fileState(){return Ee.fileState}set fileState(e){Ee.fileState=e}get fileHandle(){return Ee.fileHandle}set fileHandle(e){Ee.fileHandle=e}async openSingleFile(){try{return[this.fileHandle]=await window.showOpenFilePicker({multiple:!1,types:[{description:"Text Files",accept:{"text/plain":Cn}}]}),this.fileState=0,this.fileHandle}catch(e){return console.error("Error opening file:",e),null}}async readFile(e){return this.fileHandle?await(await this.fileHandle.getFile()).text():void 0}async saveFileSilently(e){if(!this.fileHandle)return;const n=await this.fileHandle.createWritable(),r=e;return await n.write(r),await n.close(),!0}async saveAsFile(e){try{const r=await(await window.showSaveFilePicker({suggestedName:"text",types:[{description:"Text Files",accept:{"text/plain":Cn}}]})).createWritable();await r.write(e??"Sth.."),await r.close(),console.log("File saved successfully as new file.")}catch(n){console.error("Save As operation cancelled or failed:",n)}}}class Ne extends Ee{static topDirectoryHandle;currentDirectoryHandle;isWatching=!1;watchInterval=null;lastLazyLoadTime=0;constructor(e){super()}get topDirectoryArray(){return Ee.topDirectoryArray}set topDirectoryArray(e){Ee.topDirectoryArray=e}get fileState(){return Ee.fileState}set fileState(e){Ee.fileState=e}get fileHandle(){return Ee.fileHandle}set fileHandle(e){Ee.fileHandle=e}getTopDirectoryHandle(){return Ne.topDirectoryHandle}getCurrentDirectoryHandle(){return this.currentDirectoryHandle}async openDirectory(){try{const e=await window.showDirectoryPicker();return Ne.topDirectoryHandle=e,this.fileState=1,this.currentDirectoryHandle=e,e}catch(e){return console.error("Error opening directory:",e),null}}async readDirectoryAsArray(e,n=!1){async function r(i,s){const l=i.name,m=s?`${s}/${l}`:l,d=ct.generateId(m);if(i.kind==="file")return{id:d,label:l,fileType:"file",path:m};if(i.kind==="directory"){const f=[],p=[];for await(const[g,h]of i.entries())p.push([g,h]);p.sort((g,h)=>g[0].localeCompare(h[0]));for(const[g,h]of p){const v=await r(h,m);f.push(v)}let b={id:d,label:l,children:f,fileType:"folder",path:m};return n&&(Ee.topDirectoryArray=[b]),b}}const a=[],o=[];for await(const[i,s]of e.entries())o.push([i,s]);o.sort((i,s)=>i[0].localeCompare(s[0]));for(let i=0;i<o.length;i++){const[s,l]=o[i],m=await r(l,"");a.push(m)}return a}async readDirectoryAsArrayOptimized(e,n=!1,r=0,a=0){async function o(i,s,l){const m=i.name,d=s?`${s}/${m}`:m,f=ct.generateId(d);if(i.kind==="file")return{id:f,label:m,fileType:"file",path:d};if(i.kind==="directory"){let p=[];if(r===0||l<r)try{const g=[],h=i.entries(),v=[],C=50;let E=[];for await(const I of h)if(g.push(I),g.length>=C)break;g.sort((I,W)=>I[0].localeCompare(W[0]));const S=10,F=[];for(let I=0;I<g.length;I++){const[W,j]=g[I];if(F.push(o(j,d,l+1)),F.length>=S){const R=await Promise.all(F);p.push(...R),F.length=0}}if(F.length>0){const I=await Promise.all(F);p.push(...I)}}catch(g){console.error(`Error reading directory ${d}:`,g)}else{const g=ct.generateId(`${d}/[lazy-placeholder]`,!0);p.push({id:g,label:"...",fileType:"lazy-placeholder",path:`${d}/[lazy-placeholder]`})}let b={id:f,label:m,children:p,fileType:"folder",path:d};return n&&(Ee.topDirectoryArray=[b]),b}return null}try{const i=[],s=[];for await(const[d,f]of e.entries())s.push([d,f]);s.sort((d,f)=>d[0].localeCompare(f[0]));const l=15,m=[];for(let d=0;d<s.length;d++){const[f,p]=s[d];if(m.push(o(p,"",a)),m.length>=l){const b=await Promise.all(m);i.push(...b),m.length=0}}if(m.length>0){const d=await Promise.all(m);i.push(...d)}return i}catch(i){return console.error("Error in readDirectoryAsArrayOptimized:",i),await this.readDirectoryAsArray(e,n)}}async loadFolderLazily(e,n){try{this.lastLazyLoadTime=Date.now();const r=await this.getDirectoryHandleByPath(e,n);return await this.readDirectoryAsArrayLazilyWithPath(r,n,1)}catch(r){return console.error("Error loading folder lazily:",r),[]}}async readDirectoryAsArrayLazilyWithPath(e,n,r=1){try{async function a(s,l){const m=s.name,d=l?`${l}/${m}`:m,f=n?`${n}/${d}`:d,p=ct.generateId(f);if(s.kind==="file")return{id:p,label:m,fileType:"file",path:f};if(s.kind==="directory"){const b=ct.generateId(`${f}/[lazy-placeholder]`,!0);return{id:p,label:m,fileType:"folder",path:f,children:[{id:b,label:"...",fileType:"lazy-placeholder",path:`${f}/[lazy-placeholder]`}]}}}const o=[],i=[];for await(const[s,l]of e.entries())i.push([s,l]);i.sort((s,l)=>s[0].localeCompare(l[0]));for(const[s,l]of i){const m=await a(l,"");o.push(m)}return o}catch(a){return console.error("Error in readDirectoryAsArrayLazilyWithPath:",a),[]}}async listDirectoryAsObject(e){let n={};for await(const[r,a]of e.entries())a.kind==="file"?n[r]="file":a.kind==="directory"&&(n[r]=await this.listDirectoryAsObject(a));return n}async readFileContent(e,n,r=!1){console.log("readFileContent called with filePath:",n);const a=decodeURIComponent(n);console.log("decodedFilePath:",a);const o=a.split("/");console.log("pathParts:",o);let i=e;for(let f=0;f<o.length-1;f++){const p=o[f];p&&(console.log("Navigating to directory:",p),i=await i.getDirectoryHandle(p))}const s=o[o.length-1];console.log("Getting file:",s),console.log("Current directory contents:");try{for await(const[f,p]of i.entries())console.log("  -",f,p.kind)}catch(f){console.error("Error listing directory contents:",f)}const l=s.split(".").pop()?.toLowerCase();if(!l)throw new Error("无法识别文件扩展名。");console.log("Attempting to get file handle for:",s);const m=await i.getFileHandle(s);if(r){if(!(Lt.includes(l)||l==="pdf"))throw H(`文件扩展名 .${l} 不被支持为可读文件。`,1e3,{kind:"error"}),new Error(`文件扩展名 .${l} 不被支持为可读文件。`)}else{if(!nr.includes(l))throw H(`文件扩展名 .${l} 不被支持为文本文件。`,1e3,{kind:"error"}),new Error(`文件扩展名 .${l} 不被支持为文本文件。`);this.fileHandle=m}const d=await m.getFile();if(r){const f=await d.arrayBuffer();return await this.arrayBufferToBase64(f,d.type)}else return await d.text()}async checkOrCreateNestedDirectory(e,n){try{const r=n.split("/").filter(Boolean);let a=e;for(const o of r)a=await a.getDirectoryHandle(o,{create:!0});return this.currentDirectoryHandle=a,a}catch(r){throw console.error("Error creating nested directory:",r),r}}async renameFolder(e,n,r){try{const a=await e.getDirectoryHandle(n),o=await e.getDirectoryHandle(r,{create:!0});for await(const i of a.values())if(i.kind==="file"){const s=await i.getFile(),m=await(await o.getFileHandle(i.name,{create:!0})).createWritable();await m.write(s),await m.close()}else i.kind==="directory"&&await this.copyDirectory(i,o);await e.removeEntry(n,{recursive:!0}),console.log(`Renamed folder from ${n} to ${r}`)}catch(a){console.error("Error renaming folder:",a)}}async writeFile(e,n,r){try{const o=await(await e.getFileHandle(n,{create:!0})).createWritable();await o.write(r),await o.close()}catch(a){throw console.error(`Error writing file ${n}:`,a),a}}async writeBase64ImageFile(e,n,r,a="/images"){try{const o=await this.checkOrCreateNestedDirectory(e,a);let i=0,s=0;for await(const p of o.values())if(p.kind==="file"){const b=p.name.match(/^(\d+)\.png$/);if(b){const g=parseInt(b[1],10);g>i&&(i=g)}}s=i+1;const l=r.split(",")[1],m=atob(l),d=new Uint8Array(m.length);for(let p=0;p<m.length;p++)d[p]=m.charCodeAt(p);const f=new Blob([d],{type:"image/png"});return await this.writeFile(o,s+n,f),s}catch(o){throw console.error("Error writing Base64 image file:",o),o}}async watchDirectory(e,n=1e3){this.isWatching||(this.isWatching=!0,this.watchInterval=setInterval(e,n))}stopWatching(){this.isWatching&&this.watchInterval&&(clearInterval(this.watchInterval),this.isWatching=!1,this.watchInterval=null)}async arrayBufferToBase64(e,n){return new Promise((r,a)=>{const o=new Blob([e],{type:n}),i=new FileReader;i.onloadend=()=>{const s=i.result;r(s)},i.onerror=s=>{a(s)},i.readAsDataURL(o)})}async copyDirectory(e,n){const r=await n.getDirectoryHandle(e.name,{create:!0});for await(const a of e.values())if(a.kind==="file"){const o=await a.getFile(),s=await(await r.getFileHandle(a.name,{create:!0})).createWritable();await s.write(o),await s.close()}else a.kind==="directory"&&await this.copyDirectory(a,r)}async createNewFile(e,n,r=`# New Document

Start writing here...`){try{const a=n.endsWith(".md")?n:`${n}.md`,i=await(await e.getFileHandle(a,{create:!0})).createWritable();await i.write(r),await i.close(),console.log(`Created new file: ${a}`)}catch(a){throw console.error("Error creating new file:",a),a}}async createNewFileAtPath(e,n,r,a=`# New Document

Start writing here...`){try{const o=await this.getDirectoryHandleByPath(e,n);await this.createNewFile(o,r,a)}catch(o){throw console.error("Error creating new file at path:",o),o}}async createNewFolder(e,n){try{const r=await e.getDirectoryHandle(n,{create:!0});return console.log(`Created new folder: ${n}`),r}catch(r){throw console.error("Error creating new folder:",r),r}}async createNewFolderAtPath(e,n,r){try{const a=await this.getDirectoryHandleByPath(e,n);return await this.createNewFolder(a,r)}catch(a){throw console.error("Error creating new folder at path:",a),a}}async getDirectoryHandleByPath(e,n){if(!n||n===""||n==="/")return e;const r=n.split("/").filter(o=>o!=="");let a=e;for(const o of r)a=await a.getDirectoryHandle(o);return a}async getFileHandleByPath(e,n){const r=n.split("/").filter(i=>i!==""),a=r.pop();if(!a)throw new Error("Invalid file path");let o=e;for(const i of r)o=await o.getDirectoryHandle(i);return await o.getFileHandle(a)}async deleteFile(e,n){try{await e.removeEntry(n),console.log(`Deleted file: ${n}`)}catch(r){throw console.error("Error deleting file:",r),r}}async deleteFileAtPath(e,n){try{const r=n.split("/").filter(i=>i!==""),a=r.pop();if(!a)throw new Error("Invalid file path");const o=await this.getDirectoryHandleByPath(e,r.join("/"));await this.deleteFile(o,a)}catch(r){throw console.error("Error deleting file at path:",r),r}}async deleteFolder(e,n){try{await e.removeEntry(n,{recursive:!0}),console.log(`Deleted folder: ${n}`)}catch(r){throw console.error("Error deleting folder:",r),r}}async deleteFolderAtPath(e,n){try{const r=n.split("/").filter(i=>i!==""),a=r.pop();if(!a)throw new Error("Invalid folder path");const o=await this.getDirectoryHandleByPath(e,r.join("/"));await this.deleteFolder(o,a)}catch(r){throw console.error("Error deleting folder at path:",r),r}}async renameFile(e,n,r){try{const o=await(await e.getFileHandle(n)).getFile(),s=await(await e.getFileHandle(r,{create:!0})).createWritable();await s.write(o),await s.close(),await e.removeEntry(n),console.log(`Renamed file from ${n} to ${r}`)}catch(a){throw console.error("Error renaming file:",a),a}}async renameFileAtPath(e,n,r){try{const a=n.split("/").filter(s=>s!==""),o=a.pop();if(!o)throw new Error("Invalid file path");const i=await this.getDirectoryHandleByPath(e,a.join("/"));await this.renameFile(i,o,r)}catch(a){throw console.error("Error renaming file at path:",a),a}}async renameFolderAtPath(e,n,r){try{const a=n.split("/").filter(s=>s!==""),o=a.pop();if(!o)throw new Error("Invalid folder path");const i=await this.getDirectoryHandleByPath(e,a.join("/"));await this.renameFolder(i,o,r)}catch(a){throw console.error("Error renaming folder at path:",a),a}}async moveFile(e,n,r){try{const o=await(await e.getFileHandle(r)).getFile(),{files:i}=await this.listDirectoryEntries(n),s=this.generateUniqueFileName(i,r),m=await(await n.getFileHandle(s,{create:!0})).createWritable();return await m.write(o),await m.close(),await e.removeEntry(r),console.log(`Moved file ${r} to target directory as ${s}`),s}catch(a){throw console.error("Error moving file:",a),a}}async moveFileByPath(e,n,r){try{const a=n.split("/").filter(m=>m!==""),o=a.pop();if(!o)throw new Error("Invalid source file path");const i=await this.getDirectoryHandleByPath(e,a.join("/")),s=await this.getDirectoryHandleByPath(e,r);return await this.moveFile(i,s,o)}catch(a){throw console.error("Error moving file by path:",a),a}}async moveFolder(e,n,r){try{const a=n.split("/").filter(p=>p!==""),o=a.pop();if(!o)throw new Error("Invalid source folder path");const i=await this.getDirectoryHandleByPath(e,a.join("/")),s=await i.getDirectoryHandle(o),l=await this.getDirectoryHandleByPath(e,r),{folders:m}=await this.listDirectoryEntries(l),d=this.generateUniqueFolderName(m,o),f=await l.getDirectoryHandle(d,{create:!0});return await this.copyDirectoryContents(s,f),await i.removeEntry(o,{recursive:!0}),console.log(`Moved folder ${o} to ${r} as ${d}`),d}catch(a){throw console.error("Error moving folder:",a),a}}async copyDirectoryContents(e,n){for await(const r of e.values())if(r.kind==="file"){const o=await r.getFile(),s=await(await n.getFileHandle(r.name,{create:!0})).createWritable();await s.write(o),await s.close()}else if(r.kind==="directory"){const a=r,o=await n.getDirectoryHandle(r.name,{create:!0});await this.copyDirectoryContents(a,o)}}async isDirectoryEmpty(e){try{for await(const n of e.values())return!1;return!0}catch(n){return console.error("Error checking if directory is empty:",n),!1}}async listDirectoryEntries(e){try{const n=[],r=[];for await(const[a,o]of e.entries())o.kind==="file"?n.push(a):o.kind==="directory"&&r.push(a);return{files:n,folders:r}}catch(n){return console.error("Error listing directory entries:",n),{files:[],folders:[]}}}generateUniqueFileName(e,n){if(!e.includes(n))return n;const r=n.lastIndexOf("."),a=r>0?n.substring(0,r):n,o=r>0?n.substring(r):"";let i=2,s;do s=`${a} (${i})${o}`,i++;while(e.includes(s)&&i<1e3);return s}generateUniqueFolderName(e,n){if(!e.includes(n))return n;let r=2,a;do a=`${n} (${r})`,r++;while(e.includes(a)&&r<1e3);return a}}const Oa=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,jt=(await T("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default;async function Ka(t){async function e(b){let g=b.content,h;try{return await jt.parse(g,{suppressErrors:!1}),await jt.parse(g,{suppressErrors:!0})&&(h=await jt.render(`_mermaidSvg_${Oa.getUUID().slice(0,5)}`,g)),h.svg}catch{return'<pre class="ERR">Mermaid 渲染失败</pre>'}}async function n(b){try{const g=decodeURIComponent(b.content.slice(2)),h=new Ne;return h.getTopDirectoryHandle()?`${await h.readFileContent(h.getTopDirectoryHandle(),g,!0)}`:'<div class="ERR">PDF 读取失败：请先打开本地文件夹</div>'}catch{return'<div class="ERR">PDF 读取失败：文件不存在或路径错误</div>'}}async function r(b){let g=b.attrGet("src");if(g.startsWith("/vf/")){let h=g.match(/\d+/)?.[0];return h?await _a("uuid",parseInt(h)).then(v=>{if(v&&v[0]&&v[0].imgBase64)return v[0].imgBase64}).catch(()=>{}):void 0}else if(g.startsWith("./"))try{const h=new Ne;return h.getTopDirectoryHandle()?await h.readFileContent(h.getTopDirectoryHandle(),decodeURIComponent(g).slice(2),!0):`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="120">
            <rect width="400" height="120" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="4"/>
            <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#d32f2f">Image Error</text>
            <text x="200" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Please check if local folder is opened</text>
            <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">or path is correct</text>
            <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">请检查是否打开本地文件夹或路径是否正确</text>
          </svg>`)))}`}catch{return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="120">
          <rect width="400" height="120" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="4"/>
          <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#d32f2f">Image Error</text>
          <text x="200" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Please check if local folder is opened</text>
          <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">or path is correct</text>
          <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">请检查是否打开本地文件夹或路径是否正确</text>
        </svg>`)))}`}else return g}let a=[],o=[],i=[],s=[],l=[],m=[],d=[],f=Tt();f.renderer.rules.image=function(b,g){return(b[g].attrGet("src")?.startsWith("/vf/")||b[g].attrGet("src")?.startsWith("./"))&&a.push(b[g]),""},f.renderer.rules.fence=function(b,g,h,v,C){const E=b[g].info;return E==="mermaid"?(o.push(b[g]),""):((E==="py"||E==="python")&&s.push(b[g]),"")},f.renderer.rules.import_inline=function(b,g,h,v){return b[g].meta.extension==="pdf"&&i.push(b[g]),""},f.render(t,{});for(const b of a){let g=await r(b);l.push(g)}for(const b of o){let g=await e(b);m.push(g)}for(const b of i){let g=await n(b);d.push(g)}return{vfImgSrcArr:l,vfImgSeq:0,mermaidParsedArr:m,mermaidSeq:0,pdfParsedArr:d,pdfSeq:0}}let ar=0,Gt=0;const Nt=new Map;function Wa(t,e,n){return`${ar}-${t}-${e}-${n}`}function Ua(t,e,n){const r=Wa(t,e,n);if(!Nt.has(r)){Gt++;const a=`table-${Gt}`;Nt.set(r,a)}return Nt.get(r)}function Va(){ar++,Gt=0}function Ja(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36).slice(0,12)}class Qe{static instance;standardDataRegistry=new Map;dataChangeListeners=new Map;static getInstance(){return Qe.instance||(Qe.instance=new Qe),Qe.instance}createStandardData(e,n,r,a,o){const i=Date.now(),s=this.standardDataRegistry.get(e),l=n.headers.map((d,f)=>({id:`col_${f}`,title:d||`Column ${f+1}`,type:"text",index:f}));return{tableId:e,metadata:{startLine:r,endLine:a,tableHash:Ja(JSON.stringify({headers:n.headers,rows:n.rows})),rawMarkdown:o,createdAt:s?.metadata.createdAt||i,updatedAt:i},schema:{headers:l,columnCount:n.headers.length,rowCount:n.rows.length},data:{headers:[...n.headers],rows:n.rows.map(d=>[...d])}}}registerStandardData(e){this.standardDataRegistry.set(e.tableId,e),this.notifyDataChange(e.tableId,e)}getStandardData(e){return this.standardDataRegistry.get(e)||null}updateStandardData(e,n,r="react"){const a=this.standardDataRegistry.get(e);if(!a)return console.warn(`尝试更新不存在的表格: ${e}`),!1;const o=an(n),i=this.createStandardData(e,n,a.metadata.startLine,a.metadata.endLine,o);return i.metadata.rawMarkdown=o,console.log(`更新标准化数据 ${e} (source: ${r})`),console.log("新的表格数据:",n),console.log("生成的Markdown:",o),this.registerStandardData(i),!0}addDataChangeListener(e,n){this.dataChangeListeners.has(e)||this.dataChangeListeners.set(e,new Set),this.dataChangeListeners.get(e).add(n)}removeDataChangeListener(e,n){const r=this.dataChangeListeners.get(e);r&&(r.delete(n),r.size===0&&this.dataChangeListeners.delete(e))}notifyDataChange(e,n){const r=this.dataChangeListeners.get(e);r&&r.forEach(a=>{try{a(n)}catch(o){console.error(`标准化数据监听器回调出错 (${e}):`,o)}})}clearAll(){this.standardDataRegistry.clear(),this.dataChangeListeners.clear()}getAllStandardData(){return new Map(this.standardDataRegistry)}}const $e=Qe.getInstance(),St=new Map;function Ga(t){const e=[],n=[];let r=[],a=!1,o=!1;for(const l of t)switch(l.type){case"thead_open":a=!0;break;case"thead_close":a=!1;break;case"tbody_open":o=!0;break;case"tbody_close":o=!1;break;case"tr_open":r=[];break;case"tr_close":a&&r.length>0?e.push(...r):o&&r.length>0&&n.push([...r]);break;case"th_open":case"td_open":break;case"th_close":case"td_close":break;case"inline":if(l.content!==void 0){const m=l.content.trim();r.push(m)}break}const i=Math.max(e.length,...n.map(l=>l.length),1);for(;e.length<i;)e.push("");return n.forEach(l=>{for(;l.length<i;)l.push("")}),{headers:e,rows:n}}function an(t){if(!t.headers.length&&!t.rows.length)return"";let e="";if(t.headers.length>0){const r=t.headers.map(a=>a===""?" ":a);e+="| "+r.join(" | ")+` |
`,e+="| "+t.headers.map(()=>"---").join(" | ")+` |
`}const n=t.headers.length;for(const r of t.rows){const a=[...r];for(;a.length<n;)a.push("");const o=a.slice(0,n).map(i=>i===""?" ":i);e+="| "+o.join(" | ")+` |
`}return e}function qa(t){return{headers:[...t.data.headers],rows:t.data.rows.map(e=>[...e])}}function Xa(t,e,n,r,a){return $e.createStandardData(t,e,n,r,a)}let Ya=function(t){t.core.ruler.after("block","table_to_div",n=>{Va(),St.clear(),$e.clearAll();const r=n.tokens;let a=0;for(let o=0;o<r.length;o++)if(r[o].type==="table_open"){let s="left";if(o>0&&r[o-1].type==="html_block"){const d=r[o-1].content.trim().toLowerCase();d==="<center>"&&(s="center"),d==="<right>"&&(s="right")}let l=-1;for(let d=o;d<r.length;d++)if(r[d].type==="table_close"){l=d;break}if(l!==-1&&l+1<r.length&&r[l+1].type==="html_block"){const d=r[l+1].content.trim().toLowerCase();d==="</center>"&&(s="center"),d==="</right>"&&(s="right")}let m=[];for(let d=o;d<r.length;d++)if(m.push(r[d]),r[d].type==="table_close"){l=d;break}if(l!==-1){let d=0,f=0;const p=r[o];p&&p.map&&p.map.length>0&&(d=p.map[0]);const b=r[l];b&&b.map&&b.map.length>1?f=b.map[1]:f=d+3;const g=Ua(d,f,a);a++;const h=Ga(m),v=2+h.rows.length;(f<=d||f-d<v)&&(f=d+v,console.log(`修正endLine: ${d} -> ${f} (${v}行)`));const C=an(h),E=$e.createStandardData(g,h,d,f,C);$e.registerStandardData(E);const S={tableId:g,tableHash:E.metadata.tableHash,startLine:d,endLine:f,rawMarkdown:C,data:h};St.set(g,S);const F=new n.Token("html_block","",0);F.content=`<div data-react-table data-table-id="${g}" data-table-hash="${E.metadata.tableHash}" data-start-line="${d}" data-end-line="${f}" data-align="${s}" class="react-table-placeholder" style="min-height: 100px; margin: 16px 0;"></div>`,r.splice(o,l-o+1,F)}}});const e=t.renderer.rules.html_block;t.renderer.rules.html_block=function(n,r,a,o,i){const s=n[r].content;if(!/data-react-table/.test(s))return e?e(n,r,a,o,i):s;const l=s.match(/data-table-id="([^"]+)"/)?.[1]??"",m=s.match(/data-table-hash="([^"]+)"/)?.[1]??"",d=s.match(/data-start-line="([^"]+)"/)?.[1]??"",f=s.match(/data-end-line="([^"]+)"/)?.[1]??"",p=s.match(/data-align="([^"]+)"/)?.[1]??"left";return function(){window.IncrementalDOM.elementOpen("div",l,["class","react-table-placeholder","data-react-table","true","data-table-id",l,"data-table-hash",m,"data-start-line",d,"data-end-line",f,"data-align",p,"style","min-height: 100px; margin: 16px 0;"]),window.IncrementalDOM.skip(),window.IncrementalDOM.elementClose("div")}}};const ye={getStandardData:t=>$e.getStandardData(t),updateStandardData:(t,e,n="react")=>$e.updateStandardData(t,e,n),registerStandardData:t=>$e.registerStandardData(t),onDataChange:(t,e)=>$e.addDataChangeListener(t,e),offDataChange:(t,e)=>$e.removeDataChangeListener(t,e),getAllStandardData:()=>$e.getAllStandardData(),standardToTable:qa,tableToStandard:Xa};let _e=!1;class Ze{static instance;isInternalUpdate=!1;syncCallbacks=new Map;static getInstance(){return Ze.instance||(Ze.instance=new Ze),Ze.instance}addStandardDataListener(e,n){this.syncCallbacks.has(e)||this.syncCallbacks.set(e,new Set),this.syncCallbacks.get(e).add(n),ye.onDataChange(e,n)}removeStandardDataListener(e,n){const r=this.syncCallbacks.get(e);r&&(r.delete(n),r.size===0&&this.syncCallbacks.delete(e)),ye.offDataChange(e,n)}notifyStandardDataChange(e,n,r="react"){if(this.isInternalUpdate){console.log(`跳过同步更新 ${e}，正在进行内部更新`);return}this.isInternalUpdate=!0,console.log(`标准化数据同步: ${e}, source: ${r}`);try{r==="react"?ye.updateStandardData(e,n,r)?(console.log(`准备写入Monaco: ${e}`),setTimeout(()=>{Qa(e,n)},50)):console.warn(`更新标准化数据失败: ${e}`):ye.updateStandardData(e,n,r)}finally{setTimeout(()=>{this.isInternalUpdate=!1,console.log(`同步更新完成: ${e}`)},200)}}isUpdating(){return this.isInternalUpdate}clearTableListeners(e){const n=this.syncCallbacks.get(e);n&&(n.forEach(r=>{ye.offDataChange(e,r)}),this.syncCallbacks.delete(e))}clearAllListeners(){this.syncCallbacks.forEach((e,n)=>{e.forEach(r=>{ye.offDataChange(n,r)})}),this.syncCallbacks.clear()}}const Re=Ze.getInstance();class et{static instance;syncListeners=new Map;isInternalUpdate=!1;static getInstance(){return et.instance||(et.instance=new et),et.instance}addTableListener(e,n){this.syncListeners.has(e)||this.syncListeners.set(e,new Set),this.syncListeners.get(e).add(n);const r=a=>{const o=ye.standardToTable(a);n(o)};Re.addStandardDataListener(e,r)}removeTableListener(e,n){const r=this.syncListeners.get(e);r&&(r.delete(n),r.size===0&&this.syncListeners.delete(e))}notifyTableDataChange(e,n,r="react"){Re.notifyStandardDataChange(e,n,r)}isUpdating(){return this.isInternalUpdate||Re.isUpdating()}clearTableListeners(e){this.syncListeners.delete(e),Re.clearTableListeners(e)}clearAllListeners(){this.syncListeners.clear(),Re.clearAllListeners()}}const We=et.getInstance();function Qa(t,e){_e=!0;const n=ye.getStandardData(t);if(!n)return console.warn(`Standard table data ${t} not found in registry`),_e=!1,!1;if(!window.monaco||!window.editor)return console.warn("Monaco editor not available"),_e=!1,!1;try{const r=an(e),a=window.editor,o=a.getModel();if(!o)return console.warn("Monaco editor model not available"),_e=!1,!1;const i=n.metadata.startLine,s=n.metadata.endLine,l=o.getLineCount(),m=Math.min(s,l-1),d=i+1,f=m+1,b=o.getLineContent(f).length+1,g=new window.monaco.Range(d,1,f,b);a.executeEdits(`table-edit-${t}`,[{range:g,text:r.trim(),forceMoveMarkers:!0}]);const h=(r.endsWith(`
`)?r.slice(0,-1):r).split(`
`).length,v=i+h-1;return Za(t,v),setTimeout(()=>{_e=!1,console.log(`Monaco写入完成: ${t}`)},50),!0}catch(r){return console.error("Failed to write standard table",r),_e=!1,!1}}function Za(t,e){const n=ye.getStandardData(t);if(!n){console.warn(`尝试更新不存在的表格元数据: ${t}`);return}const r={...n,metadata:{...n.metadata,endLine:e,updatedAt:Date.now()}};ye.registerStandardData(r)}function eo(){return _e}function to(t){return ye.getStandardData(t)}function no(t){const e=ye.getStandardData(t);if(e)return ye.standardToTable(e);const n=St.get(t);return n?n.data:null}function ro(t){return St.get(t)}function ao(){if(_e||Re.isUpdating())return;const t=window.editor;if(!t){console.warn("Monaco编辑器不可用");return}if(!t.getModel()?.getValue()){console.warn("Monaco编辑器内容为空");return}console.log("Monaco内容发生变化，将通过 mdConverter 重新解析所有表格数据")}function oo(){ao()}const kn=u.memo(({tableId:t,tableData:e})=>{const[n,r]=c.useState({headers:[],rows:[]}),[a,o]=c.useState(null),[i,s]=c.useState(!1),[l,m]=c.useState(null),[d,f]=c.useState({order:"asc",orderBy:""}),[p,b]=c.useState([]),[g,h]=c.useState([]),v=c.useCallback((x,w,k)=>{const D=n.headers.indexOf(k);if(D===-1)return 0;const L=x[D]||"",y=w[D]||"",ue=parseFloat(L),oe=parseFloat(y);return!isNaN(ue)&&!isNaN(oe)?oe-ue:y<L?-1:y>L?1:0},[n.headers]),C=c.useCallback((x,w)=>x==="desc"?(k,D)=>v(k,D,w):(k,D)=>-v(k,D,w),[v]),E=c.useMemo(()=>n.rows,[n.rows]),S=c.useCallback(x=>{if(x.target.checked){const w=n.rows.map((k,D)=>D);h(w),I(w.length>0?w[w.length-1]:null)}else h([]),I(null)},[n.rows]),[F,I]=c.useState(null),W=c.useCallback((x,w)=>{if(x.ctrlKey||x.metaKey){const k=g.indexOf(w);let D=[];k===-1?D=[...g,w]:k===0?D=g.slice(1):k===g.length-1?D=g.slice(0,-1):k>0&&(D=[...g.slice(0,k),...g.slice(k+1)]),D=Array.from(new Set(D)),h(D),I(w)}else if(x.shiftKey&&F!==null){const k=Math.min(F,w),D=Math.max(F,w),L=Array.from({length:D-k+1},(ue,oe)=>k+oe),y=Array.from(new Set([...g,...L])).sort((ue,oe)=>ue-oe);h(y)}else h([w]),I(w)},[g,F]);c.useCallback((x,w)=>p.some(k=>k.rowIndex===x&&k.colIndex===w),[p]);const j=c.useCallback(x=>g.includes(x),[g]),R=c.useMemo(()=>({headers:["Name","Age","City","Email"],rows:[["John Doe","25","New York","john@example.com"],["Alice Brown","28","Paris","alice@example.com"]]}),[]),re=c.useCallback(x=>{r(x),t&&Re.notifyStandardDataChange(t,x,"react")},[t]),X=c.useCallback(x=>{t&&ye.getStandardData(t)?re(x):(r(x),t&&We.notifyTableDataChange(t,x,"react"))},[t,re]);c.useEffect(()=>{if(!t)return;const x=w=>{const k=ye.standardToTable(w);JSON.stringify(n)!==JSON.stringify(k)&&(m(w),r(k))};return Re.addStandardDataListener(t,x),()=>{Re.removeStandardDataListener(t,x)}},[t,n]),c.useEffect(()=>{if(!t)return;const x=w=>{if(ye.getStandardData(t))return;JSON.stringify(n)!==JSON.stringify(w)&&r(w)};return We.addTableListener(t,x),()=>{We.removeTableListener(t,x)}},[t,n]),c.useEffect(()=>{let x,w=null;t?(w=to(t),w?x=ye.standardToTable(w):x=no(t)||R):x=e||R;const k=JSON.stringify(n)!==JSON.stringify(x),D=JSON.stringify(l)!==JSON.stringify(w);(k||D)&&(r(x),m(w))},[t,e,R]);const de=c.useCallback((x,w)=>{const D=x===-1?n.headers[w]||"":n.rows[x]?.[w]||"";o({rowIndex:x,colIndex:w,value:D})},[n]),ie=c.useCallback(()=>{if(!a)return;const{rowIndex:x,colIndex:w,value:k}=a;r(D=>{const L={headers:[...D.headers],rows:D.rows.map(y=>[...y])};return x===-1?L.headers[w]=k:(L.rows[x]||(L.rows[x]=new Array(L.headers.length).fill("")),L.rows[x][w]=k),t&&setTimeout(()=>{X(L)},0),L}),o(null)},[a,t,X]),B=c.useCallback(()=>{o(null)},[]),he=c.useCallback(()=>{const x={headers:[...n.headers],rows:n.rows.map(D=>[...D])},w=x.headers.length,k=new Array(w).fill("");x.rows.push(k),X(x)},[n,X]),Y=c.useCallback(x=>{const w={headers:[...n.headers],rows:n.rows.map(k=>[...k])};w.rows.splice(x,1),X(w)},[n,X]),ae=c.useCallback(()=>{const x={headers:[...n.headers],rows:n.rows.map(w=>[...w])};x.headers.push(`Col ${x.headers.length+1}`),x.rows.forEach(w=>{w.push("")}),X(x)},[n,X]),M=c.useCallback(x=>{if(n.headers.length<=1)return;const w={headers:[...n.headers],rows:n.rows.map(k=>[...k])};w.headers.splice(x,1),w.rows.forEach(k=>{k.length>x&&k.splice(x,1)}),X(w)},[n,X]),_=c.useCallback(x=>{if(!(!i||a)){if((x.ctrlKey||x.metaKey)&&x.key==="a"){x.preventDefault();const w=n.rows.map((k,D)=>D);h(w);return}if((x.ctrlKey||x.metaKey)&&x.key==="d"){x.preventDefault(),h([]),b([]),I(null);return}if(x.key==="Delete"&&g.length>0){x.preventDefault();const w=[...g].sort((D,L)=>L-D);let k={headers:[...n.headers],rows:n.rows.map(D=>[...D])};w.forEach(D=>{k.rows.splice(D,1)}),X(k),h([]),I(null);return}if(x.key==="Escape"){h([]),b([]),I(null);return}if(["ArrowUp","ArrowDown"].includes(x.key)){x.preventDefault();let w;if(g.length===0){w=x.key==="ArrowDown"?0:n.rows.length-1,h([w]),I(w);return}const k=F!==null?F:g[g.length-1];if(x.key==="ArrowDown"?w=Math.min(k+1,n.rows.length-1):w=Math.max(k-1,0),x.shiftKey){const D=Math.min(F||k,w),L=Math.max(F||k,w),y=Array.from({length:L-D+1},(ue,oe)=>D+oe);h(y)}else h([w]),I(w);return}}},[i,a,n,g,F,X]),J=c.useCallback(x=>{const k=d.orderBy===x&&d.order==="asc"?"desc":"asc";console.log(`排序请求: ${x}, 方向: ${k}`);const D=[...n.rows].sort(C(k,x)),L={headers:[...n.headers],rows:D};console.log("排序前数据:",n.rows),console.log("排序后数据:",D),f({order:k,orderBy:x}),h([]),b([]),I(null),X(L)},[d,n,C,X]),P=c.useCallback(x=>u.createElement(zn,{value:a?.value||"",onChange:w=>o(k=>k?{...k,value:w.target.value}:null),onKeyDown:w=>{w.key==="Enter"?ie():w.key==="Escape"&&B()},onBlur:ie,autoFocus:!0,size:"small",variant:"outlined",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%","& .MuiOutlinedInput-root":{fontSize:"0.875rem",height:"100%",padding:0,border:"none",borderRadius:0,backgroundColor:"transparent","& fieldset":{border:"1px solid #1976d2",borderRadius:0,margin:0,padding:0},"&:hover fieldset":{border:"1px solid #1976d2"},"&.Mui-focused fieldset":{border:"2px solid #1976d2",borderRadius:0}},"& .MuiOutlinedInput-input":{padding:"6px 8px",height:"calc(100% - 12px)",boxSizing:"border-box"}}}),[a,ie,B]),Q=c.useCallback((x,w,k,D=!1)=>{const L=a?.rowIndex===w&&a?.colIndex===k,y=x===""?" ":x;return u.createElement(z,{sx:{display:"flex",alignItems:"center",minHeight:"32px",height:"32px",cursor:i?"text":"default",padding:L?0:"6px 8px",position:"relative","&:hover":{backgroundColor:i&&!D?"rgba(25, 118, 210, 0.08)":"transparent"}},onClick:()=>{i&&!D&&de(w,k)}},L?P(x):u.createElement("span",null,y||(D?`Header ${k+1}`:"")))},[a,P,de,i]);return!n||!n.headers.length&&!n.rows.length?u.createElement(cn,{sx:{p:2,textAlign:"center",color:"text.secondary"}},"Empty table - ",t?`Table ID: ${t}`:"No data",l&&u.createElement("div",{style:{fontSize:"0.75rem",marginTop:"4px",color:"#666"}},"Columns: ",l.schema.columnCount," | Rows: ",l.schema.rowCount)):u.createElement(cn,{elevation:0,sx:{width:"100%",overflow:"hidden"},className:"academic-table",tabIndex:0,onKeyDown:_},u.createElement(z,{sx:{p:1,display:"flex",gap:1,borderBottom:"1px solid #e0e0e0",backgroundColor:"transparent"},className:"react-table-toolbar"},u.createElement(Ie,{title:i?"Exit Edit Mode (多选：Ctrl+点击, Shift+点击范围选择)":"Enter Edit Mode"},u.createElement(Me,{size:"small",onClick:()=>{s(!i),i&&(h([]),b([]),I(null))},color:i?"primary":"default"},u.createElement(vr,null))),i&&u.createElement(u.Fragment,null,u.createElement(Ie,{title:"Add Row"},u.createElement(Me,{size:"small",onClick:he},u.createElement(dn,null))),u.createElement(Ie,{title:"Add Column"},u.createElement(Me,{size:"small",onClick:ae},u.createElement(dn,{sx:{transform:"rotate(90deg)"}}))),g.length>0&&u.createElement(u.Fragment,null,u.createElement(z,{sx:{display:"flex",alignItems:"center",ml:1,mr:1}},u.createElement("span",{style:{fontWeight:500,color:"#1976d2",fontSize:"0.875rem"}},g.length," row",g.length>1?"s":""," selected")),u.createElement(Ie,{title:"Delete Selected Rows"},u.createElement(Me,{size:"small",onClick:()=>{[...g].sort((w,k)=>k-w).forEach(w=>Y(w)),h([]),I(null)},color:"error"},u.createElement(_t,null)))),u.createElement(Ie,{title:u.createElement(z,{sx:{fontSize:"0.75rem",lineHeight:1.2}},u.createElement("div",null,"快捷键:"),u.createElement("div",null,"• Ctrl+A: 全选"),u.createElement("div",null,"• Ctrl+D: 取消选择"),u.createElement("div",null,"• Delete: 删除选中行"),u.createElement("div",null,"• Ctrl+点击: 多选"),u.createElement("div",null,"• Shift+点击: 范围选择"),u.createElement("div",null,"• 方向键: 移动选择"),u.createElement("div",null,"• Shift+方向键: 扩展选择"))},u.createElement(Me,{size:"small",sx:{ml:"auto"}},u.createElement(Er,{fontSize:"small"})))),t&&u.createElement(z,{sx:{ml:i?1:"auto",fontSize:"0.75rem",color:"text.secondary",display:"flex",alignItems:"center"}},"Table ID: ",t,l&&u.createElement("span",{style:{marginLeft:"8px"}},l.schema.columnCount,"×",l.schema.rowCount))),u.createElement(Sr,{sx:{width:"100%",overflowX:"auto",overflowY:"visible",maxWidth:"100%"},className:"uniform-scroller"},u.createElement(Tr,{size:"small",stickyHeader:!0,sx:{minWidth:"max-content",width:"auto",tableLayout:"fix"}},u.createElement(Ir,null,u.createElement(un,{sx:{backgroundColor:"#f5f5f5","& .MuiTableCell-head":{fontWeight:600,borderBottom:"2px solid #e0e0e0",color:"#333",position:"sticky",top:0,backgroundColor:"#f5f5f5",zIndex:10}}},i&&u.createElement(qe,{padding:"checkbox",sx:{width:48}},u.createElement(mn,{color:"primary",indeterminate:g.length>0&&g.length<n.rows.length,checked:n.rows.length>0&&g.length===n.rows.length,onChange:S,inputProps:{"aria-label":"select all rows"}})),n.headers.map((x,w)=>u.createElement(qe,{key:w,sx:{minWidth:120,whiteSpace:"nowrap"}},u.createElement(z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}},u.createElement(Dr,{active:i&&d.orderBy===x,direction:d.orderBy===x?d.order:"asc",onClick:()=>{i&&J(x)},disabled:!i,sx:{flex:1,"& .MuiTableSortLabel-root":{flexDirection:"row"},"&.Mui-disabled":{opacity:1,color:"inherit"}}},u.createElement(z,{sx:{display:"flex",alignItems:"center",minHeight:"32px",cursor:i?"text":"default",padding:"6px 8px",width:"100%","&:hover":{backgroundColor:i?"rgba(25, 118, 210, 0.08)":"transparent"}},onClick:k=>{i&&(k.stopPropagation(),de(-1,w))}},a?.rowIndex===-1&&a?.colIndex===w?P(x):u.createElement("span",null,x||`Header ${w+1}`)),i&&d.orderBy===x?u.createElement(z,{component:"span",sx:Mr},d.order==="desc"?"sorted descending":"sorted ascending"):null),i&&n.headers.length>1&&u.createElement(Ie,{title:"Delete Column"},u.createElement(Me,{size:"small",onClick:()=>M(w),color:"error",sx:{opacity:.6,"&:hover":{opacity:1},ml:1}},u.createElement(_t,{fontSize:"inherit"})))))),i&&u.createElement(qe,{sx:{width:80}},"Actions"))),u.createElement(Fr,null,E.map((x,w)=>{const k=j(w);return u.createElement(un,{key:`row-${w}-${JSON.stringify(x).slice(0,20)}`,hover:!0,role:i?"checkbox":void 0,"aria-checked":i?k:void 0,tabIndex:-1,selected:i?k:!1,sx:{"&:nth-of-type(even)":{backgroundColor:"#fafafa"},"&:hover":{backgroundColor:i?rt("#1976d2",.08):"#f0f0f0"},cursor:i?"pointer":"default"},onClick:D=>{i&&W(D,w)}},i&&u.createElement(qe,{padding:"checkbox"},u.createElement(mn,{color:"primary",checked:k,onChange:D=>{D.stopPropagation(),k?(h(L=>L.filter(y=>y!==w)),F===w&&I(null)):(h(L=>L.includes(w)?L:[...L,w]),I(w))},inputProps:{"aria-labelledby":`enhanced-table-checkbox-${w}`}})),x.map((D,L)=>u.createElement(qe,{key:L,sx:{minWidth:120,padding:0,whiteSpace:"nowrap","&:hover":{backgroundColor:i?rt("#1976d2",.04):"transparent"}},onClick:y=>{i&&y.stopPropagation()}},Q(D,w,L))),i&&u.createElement(qe,null,u.createElement(Ie,{title:"Delete Row"},u.createElement(Me,{size:"small",onClick:D=>{D.stopPropagation(),Y(w)},color:"error",sx:{opacity:.6,"&:hover":{opacity:1}}},u.createElement(_t,{fontSize:"inherit"})))))})))))},(t,e)=>t.tableId!==e.tableId?!1:JSON.stringify(t.tableData)===JSON.stringify(e.tableData));class tt{static instance;mountedRoots=new Map;lastTableStates=new Map;static getInstance(){return tt.instance||(tt.instance=new tt),tt.instance}mountTables(){const e=document.querySelectorAll("[data-react-table]"),n=new Set;e.forEach((r,a)=>{const o=r.getAttribute("data-table-id");if(r.getAttribute("data-align"),r.getAttribute("data-table-hash"),!o){console.warn(`表格占位符 ${a} 缺少 data-table-id`);return}n.add(o);const s=ro(o)?.tableHash||null,l=this.lastTableStates.get(o),m=this.mountedRoots.get(o),d=r.children.length>0;if(!s){console.warn(`表格 ${o} 在注册表中未找到，跳过处理`);return}if(!(m&&s===l&&d)){if(m&&(!d||s!==l)){this.updateTable(o,s);return}m||this.createTableRoot(r,o,s)}}),this.cleanupUnusedRoots(n)}createTableRoot(e,n,r){try{e.style.border="none",e.style.background="transparent",e.style.minHeight="auto",e.style.padding="0",e.style.margin="16px 0",Ve(()=>import("./react-dom-c6aabcbc.js").then(a=>a.c),["./react-dom-c6aabcbc.js","./@babel-e5f941c7.js","./react-2c2ad9dc.js","./scheduler-765c72db.js"],import.meta.url).then(({createRoot:a})=>{if(!document.contains(e)){console.warn(`表格 ${n} 的占位符已被移除`);return}const o=a(e);o.render(u.createElement(kn,{tableId:n})),this.mountedRoots.set(n,o),r&&this.lastTableStates.set(n,r)}).catch(a=>{console.error(`创建表格 ${n} 根节点失败:`,a)})}catch(a){console.error(`为表格 ${n} 创建根节点时发生错误:`,a)}}updateTable(e,n){const r=this.mountedRoots.get(e);if(r&&n)try{r.render(u.createElement(kn,{tableId:e,key:`${e}-${n}`})),this.lastTableStates.set(e,n)}catch(a){console.error(`更新表格 ${e} 失败:`,a)}}cleanupUnusedRoots(e){const n=[];this.mountedRoots.forEach((r,a)=>{if(!e.has(a))try{r.unmount(),n.push(a)}catch(o){console.warn(`卸载表格 ${a} 失败:`,o)}}),n.forEach(r=>{this.mountedRoots.delete(r),this.lastTableStates.delete(r),We.clearTableListeners(r)})}forceRemountAllTables(){this.unmountAllTables(),this.mountTables()}unmountAllTables(){this.mountedRoots.forEach((e,n)=>{try{e.unmount(),We.clearTableListeners(n)}catch(r){console.warn(`卸载表格 ${n} 失败:`,r)}}),this.mountedRoots.clear(),this.lastTableStates.clear(),We.clearAllListeners()}getDebugInfo(){return{mountedRootsCount:this.mountedRoots.size,tableStatesCount:this.lastTableStates.size,mountedTableIds:Array.from(this.mountedRoots.keys()),tableStates:Object.fromEntries(this.lastTableStates),syncListenersCount:We.syncListeners?.size||0}}}const io=(await T("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;async function nt(t=!1){let e=gt();e=za(e);let n=await Ka(e);const r=tt.getInstance();t||!window.IncrementalDOM?document.getElementById("view-area").innerHTML=Tt().render(e,n):window.IncrementalDOM.patch(document.getElementById("view-area"),Tt().renderToIncrementalDOM(e,n)),io.highlightAll(),r.mountTables()}const lo=(await T("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).makeAutoObservable,Oe=(await T("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).observable;class so{themeState;fileManagerState;emojiPickerState;contextMenuClickPosition;states;memorableStates;settingsConfig;constructor({themeState:e,fileManagerState:n,emojiPickerState:r,contextMenuClickPosition:a,states:o,memorableStates:i,settingsConfig:s}){lo(this,{themeState:Oe,fileManagerState:Oe,emojiPickerState:Oe,contextMenuClickPosition:Oe,states:Oe,memorableStates:Oe,settingsConfig:Oe}),this.themeState=e,this.fileManagerState=n,this.emojiPickerState=r,this.contextMenuClickPosition=a,this.states=o,this.memorableStates=i,this.settingsConfig=s}getAllConfig(){let e={};return Object.getOwnPropertyNames(this).forEach((n,r)=>{e[n]=this[n]}),e}}function co(t,e){const n=function(r,a,o,i,s){let l;return(r[a].map&&r[a].level===0||r[a].type==="list_item_open")&&(l=r[a].map[0],r[a].attrSet("data-line",String(l))),s.renderToken(r,a,o)};t.renderer.rules.paragraph_open=t.renderer.rules.heading_open=t.renderer.rules.table_open=t.renderer.rules.tr_open=t.renderer.rules.th_open=t.renderer.rules.bullet_list_open=t.renderer.rules.list_item_open=t.renderer.rules.import_plugin=n}let uo=function(t){t.core.ruler.before("inline","myrule",function(e){var n=e.tokens;for(let r=0;r<n.length;r++)n[r].content&&n[r].content.indexOf("MYRULE")})},mo=function(t){t.renderer.rules.image,t.core.ruler.before("normalize","replace_spaces_in_image_src",e=>{e.src=e.src.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,a)=>{const o=a.replace(/ /g,"%20");return`![${r}](${o})`})}),t.renderer.rules.image=function(e,n,r,a,o){const i=e[n],s="#";let l=i.attrs[i.attrIndex("src")][1],m=i.content;i&&i.attrGet("src")?.startsWith("/vf/")?a.vfImgSrcArr&&(l=a.vfImgSrcArr[a.vfImgSeq++]):i&&i.attrGet("src")?.startsWith("./")&&(l=a.vfImgSrcArr[a.vfImgSeq++]);let d="auto",f="",p="L",b=m.split(s);if(b.length>1)for(let g=0;g<b.length;g++){let h=b[g];h==="s"&&(f+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),h==="s1"&&(f+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),h==="s2"&&(f+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(h==="C"||h=="c")&&(p="C"),(h==="R"||h=="r")&&(p="R"),h.startsWith("w")&&(d=b[g].substring(1),d.endsWith("%")||(d+="px"))}return`<div class="imgBox-r FLEX  ${p=="C"?" JUS-CENTER":p=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${d}" style="${f}" src="${l}" alt="${m}">
    </div>`}};const fo=(await T("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;let go=function(t){const e=t.renderer.rules.code_block;t.renderer.rules.fence=function(n,r,a,o,i){let s;n[r].map&&n[r].level===0&&(s=n[r].map[0],n[r].attrSet("data-line",String(s)));let l=n[r].info,m=n[r].content;if(m=m.replace(/</g,"&lt;").replace(/>/g,"&gt;"),l==="mermaid"){if(o.mermaidParsedArr)return`<div data-line="${s}" class="language-mermaid language-plaintext">
        ${o.mermaidParsedArr[o.mermaidSeq++]}
        </div>`}else return fo.getLanguage(l)?`<pre class="language-code" data-line="${s}"><code class="language-${l} ${Se()==="light"?"":"hljs-dark"}">${m}</code></pre>`:`<div class="code-container" data-line="${s}">
      <pre><code class="language-plaintext">${m}</code></pre>
    </div>`;return e(n,r,a,o,i)}},po=function(t){function e(n){const r=n.tokens;for(let a=0;a<r.length;a++)if(r[a].type==="inline"){let o=r[a].children;for(let i=0;i<o.length;i++){const s=o[i];if(s.type==="text"&&s.content){const m=s.content.match(/\^(.*?)\^(.*?)\#$/);if(m){const d=new n.Token("html_block","",0);d.content=`<div class="${m[2]}">${t.render(m[1])}</div>`,o[i]=d,i++}}}}}t.core.ruler.push("my_rule1",e),t.inline.ruler.before("emphasis","mark",(n,r)=>!1)};function ho(t){t.core.ruler.push("custom_align",function(e){let n=null;e.tokens.forEach((r,a)=>{if(r.type==="paragraph_open"){let o=e.tokens[a+1];o&&o.type==="inline"&&o.children.forEach(i=>{if(i.type==="text"){const s=i.content;switch(s.slice(-2)){case"||":i.content=s.slice(0,-2),n="C";break;case">>":i.content=s.slice(0,-2),n="R";break}}})}n&&r.type==="paragraph_open"&&(r.attrPush(["class",n]),n=null)})})}function yo(t){t.core.ruler.push("custom_align_heading",function(e){let n=null;e.tokens.forEach((r,a)=>{if(r.type==="heading_open"){let o=e.tokens[a+1];o&&o.type==="inline"&&o.children.forEach(i=>{if(i.type==="text"){const s=i.content;switch(s.slice(-2)){case"||":i.content=s.slice(0,-2),n="C";break;case">>":i.content=s.slice(0,-2),n="R";break}}})}n&&r.type==="heading_open"&&(r.attrPush(["class",n]),n=null)})})}function wo(t,e,n=t.createDecorationsCollection()){document.getElementById("view-area").addEventListener("dblclick",function(r){let a=r.target,o=0;if(a!==this){for(;a;){if(a.hasAttribute("data-line")){o=parseInt(a.getAttribute("data-line"));break}a=a.parentElement}o&&(t.setPosition({lineNumber:o+1,column:1}),t.revealLineInCenter(o+1,1),n.clear(),n.set([{range:new e.Range(o+1,1,o+1,1),options:{isWholeLine:!0,className:"HILIGHT-MONACO",zIndex:0}}]))}})}function vn(t,e){var n,r,a=t.posMax,o=!0,i=!0;return n=e>0?t.src.charCodeAt(e-1):-1,r=e+1<=a?t.src.charCodeAt(e+1):-1,(n===32||n===9||r>=48&&r<=57)&&(i=!1),(r===32||r===9)&&(o=!1),{can_open:o,can_close:i}}function bo(t,e){var n,r,a,o,i;if(t.src[t.pos]!=="$")return!1;if(o=vn(t,t.pos),!o.can_open)return e||(t.pending+="$"),t.pos+=1,!0;for(n=t.pos+1,r=n;(r=t.src.indexOf("$",r))!==-1;){for(i=r-1;t.src[i]==="\\";)i-=1;if((r-i)%2==1)break;r+=1}return r===-1?(e||(t.pending+="$"),t.pos=n,!0):r-n===0||r-n===2?(e||(t.pending+="$$"),t.pos=n+1,!0):(o=vn(t,r),o.can_close?(e||(a=t.push("math_inline","math",0),a.markup="$",a.content=t.src.slice(n,r)),t.pos=r+1,!0):(e||(t.pending+="$"),t.pos=n,!0))}function xo(t,e,n,r){var a,o,i,s,l=!1,m,d=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(d+2>f||t.src.slice(d,d+2)!=="$$")return!1;if(d+=2,a=t.src.slice(d,f),r)return!0;for(a.trim().slice(-2)==="$$"&&(a=a.trim().slice(0,-2),l=!0),i=e;!l&&(i++,!(i>=n||(d=t.bMarks[i]+t.tShift[i],f=t.eMarks[i],d<f&&t.tShift[i]<t.blkIndent)));)t.src.slice(d,f).trim().slice(-2)==="$$"&&(s=t.src.slice(0,f).lastIndexOf("$$"),o=t.src.slice(d,s),l=!0);return t.line=i+1,m=t.push("math_block","math",0),m.block=!0,m.content=(a&&a.trim()?a+`
`:"")+t.getLines(e+1,i,t.tShift[e],!0)+(o&&o.trim()?o:""),m.map=[e,t.line],m.markup="$$",!0}function Co(t,e){e=e||{throwOnError:!1,strict:!1};var n=function(i){if(e.displayMode=!1,i)try{return window.katex.renderToString(i,e)}catch{return i}else return"Latex Missing"},r=function(i,s){return n(i[s].content)},a=function(i,s){e.displayMode=!0;let l;if(s.map&&s.level===0&&(l=s.map[0]),i)try{return`<p data-line=${String(l)}>`+window.katex.renderToString(i,e)+"</p>"}catch{return i}else return"LATEX MISSING"},o=function(i,s){return a(i[s].content,i[s])+`
`};t.inline.ruler.after("escape","math_inline",bo),t.block.ruler.after("blockquote","math_block",xo,{alt:["paragraph","reference","blockquote","list"]}),t.renderer.rules.math_inline=r,t.renderer.rules.math_block=o}const ko=(await T("https://cdn.jsdmirror.com/npm/@arco-design/web-react@2.62.0/+esm")).Notification,En=(t,e,n)=>{const r=n?.kind??"success",a=n?.position??"bottomRight";ko[r]({title:t,content:e,position:a})};function or(t,e){if(typeof t!="object"||t===null||typeof e!="object"||e===null)return t;for(let n in e)e.hasOwnProperty(n)&&(typeof e[n]=="object"&&e[n]!==null?t[n]=or(t[n],e[n]):t[n]=e[n]);return t}function ir(t){return new Promise(e=>{let n=0;const r=()=>{let a=!0;for(const o of t)if(typeof window[o]>"u"){a=!1;break}if(a)e();else{n++;let o=1e3;n<=5?o=30:n<=10&&(o=50),setTimeout(r,o)}};r()})}const vo=/^@\[(import)\]\(([^)]+)\)$/,Eo=function(e){const n=`
border: none;
height: 89svh;
`;function r(a,o){a.posMax;const i=a.pos;if(a.src.charCodeAt(i)!==64||a.src.charCodeAt(i+1)!==91)return!1;const s=a.src.indexOf("]",i+2);if(s===-1||a.src.charCodeAt(s+1)!==40)return!1;const l=a.src.indexOf(")",s+2);if(l===-1)return!1;const m=vo.exec(a.src.slice(i,l+1));if(!m)return!1;if(!o){const d=a.push("import_inline","",0),f=m[2].trim(),p=f.match(/\.(md|xlsx|csv|pdf)$/);if(!p)return!1;d.content=f,d.meta={extension:p[1]}}return a.pos=l+1,!0}e.inline.ruler.before("emphasis","import_plugin",r),e.renderer.rules.import_inline=function(a,o,i,s){const l=a[o];l.content,l.meta.extension;const m=`${s.pdfParsedArr[0]}`;let d;return m.length>10?d=`<embed onload="(()=>{Array.from(document.getElementsByClassName('pdf-preview')).forEach(e=>e.style.width=document.getElementById('view-area').clientWidth-20+'px')})()" class="pdf-preview" style="${n}" src="${m}"></embed>`:d="<div>PDF loading...</div>",d}};function So(t){function e(r,a){let o=r.pos;if(r.src[o]!=="\\"||r.src[o+1]!=="(")return!1;let i=r.src.indexOf("\\)",o+2);if(i===-1)return!1;if(!a){const s=r.src.slice(o+2,i).replace(/\s+/g,"");let l=r.push("math_inline","",0);l.content=`${s}`}return r.pos=i+2,!0}function n(r,a,o,i){let s=r.bMarks[a]+r.tShift[a],l=r.eMarks[a];if(r.src.slice(s,s+2)!=="\\[")return!1;let m=r.src.slice(s+2,l),d=[],f=!1,p=a,b=m.indexOf("\\]");if(b!==-1)d.push(m.slice(0,b)),f=!0;else for(d.push(m),p=a+1;p<o;p++){s=r.bMarks[p]+r.tShift[p],l=r.eMarks[p];let g=r.src.slice(s,l);if(b=g.indexOf("\\]"),b!==-1){d.push(g.slice(0,b)),f=!0;break}d.push(g)}if(!f)return!1;if(!i){let g=r.push("math_block","",0);g.block=!0,g.content=d.join(`
`).trim(),g.map=[a,p+1]}return r.line=p+1,!0}t.block.ruler.before("paragraph","math_block",n,{alt:["paragraph"]}),t.inline.ruler.before("escape","math_inline2",e)}const To=(await T("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default,zt=(await T("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default,Io=(await T("https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm")).default,Do=(await T("https://cdn.jsdmirror.com/npm/markdown-it-multimd-table@4.2.3/+esm")).default,Mo=(await T("https://cdn.jsdmirror.com/npm/markdown-it-github-toc@3.2.4/src/index.js/+esm")).default,Fo=(await T("https://cdn.jsdmirror.com/npm/@hackmd/markdown-it-task-lists@2.1.4/+esm")).default,Ao=(await T("https://cdn.jsdmirror.com/npm/markdown-it-emoji@3.0.0/+esm")).full,Ht=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,$o=(await T("https://cdn.jsdmirror.com/npm/markdown-it-footnote@4.0.0/+esm")).default;function Tt(){return Io({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(co).use(Mo,{anchorLinkSymbol:"",anchorLinkBefore:!1}).use(uo).use(mo).use(Do,{multiline:!0,rowspan:!0,headerless:!0,multibody:!0,aotolabel:!0}).use(go).use(po).use($o).use(ho).use(yo).use(Ao).use(Fo).use(So).use(Co).use(Eo).use(Ya).use(window.markdownitIncrementalDOM)}class Lo{constructor(){}mermaidInit(){const e={securityLevel:"loose",logLevel:4,startOnLoad:!1,gantt:{fontSize:19,sectionFontSize:"16",numberSectionStyles:10,useMaxWidth:!0},theme:pe().advanced.mermaidTheme};zt.parseError=n=>{},zt.initialize(e),zt.mermaidAPI.initialize(e)}hljsInit(){To.configure({ignoreUnescapedHTML:!0})}settingsAllInit(){this.mermaidInit(),this.hljsInit()}static newSettings(){return new this}}function Ro(t=window.editor,e=window.monaco){new Lo().settingsAllInit(),Ht.addStyle(`
    .markdown-body p,
    .markdown-body ol,
    .markdown-body li,
    .markdown-body div {
        font-size: ${pe().basic.fontSize}px;
    }
      `,"fontSizeStyle"),Na().then(async()=>{await nt(!1),Pe({unmemorable:{loading:!1}}),await Ht.sleep(110),En(Xe.t("t-updated-to-latest-version"),Xe.t("t-current-version",{version:"v3.1.0"})),await Ht.sleep(680),En(Xe.t("t-new-features-current-version"),Xe.t("t-file-manager"),{kind:"info"})}),window._deco=t.createDecorationsCollection(),window._speechData={processing:!1,speechResult:"",speech:null},wo(t,e,window._deco)}const ut={themeState:"light",fileManagerState:!1,emojiPickerState:"off",contextMenuClickPosition:{posx:20,posy:20},memorableStates:{memorable:{languageChanged:!1,welcomeAnimationState:!0,localLANId:"none"}},states:{unmemorable:{isDragging:!1,loading:!0,previewMode:!1,aiPanelState:!1,voicePanelState:!1,voiceData:"",promptPanelState:!1,mouseUpPos:{posx:0,posy:0},selectEndPos:{posx:0,posy:0}}},settingsConfig:{basic:{language:"zh",editorAutoWrap:!0,fontSize:16,fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',syncScroll:!1,speechLanguage:"zh-CN",fileEditLocal:!0},advanced:{mermaidTheme:"default",imageSettings:{modePrefer:"folder",basicStyle:"#w70%#c#s",imgStorePath:"/images/",htmlOrMdStyle:"md"}}}},Po=[...Object.keys(ut.memorableStates.memorable),...Object.keys(ut.states.unmemorable),...Object.keys(ut.settingsConfig.basic),...Object.keys(ut.settingsConfig.advanced)],Js=["default","forest","dark","neutral"],Gs=["default (默认，才是最美的！)","forest (说真的，很绿)","dark (说真的，很黑)","neutral (清心寡欲，出家必选)"];function _o(t){function e(a){typeof n[a]=="object"?r.setItem(a,JSON.stringify(n[a])):r.setItem(a,n[a])}let n=t,r=new Qn;for(let a in n)if(r.getItem(a))if(a=="themeState"||a=="emojiPickerState"||a=="settingsConfig"||a=="memorableStates")try{if(typeof n[a]=="object"){const o=JSON.parse(r.getItem(a).toString());for(let i in o)Object.keys(o[i]).forEach(s=>{if(!Po.includes(s))return console.warn("abnormal key"),e(a),n});r.setItem(a,JSON.stringify(or(t[a],JSON.parse(r.getItem(a).toString())))),n[a]=JSON.parse(r.getItem(a).toString())}else n[a]=r.getItem(a).toString()}catch{console.warn("reset settings 1"),e(a)}else e(a);else console.warn("reset settings 3"),e(a);return n}const jo=new so(_o(ut)),be=()=>jo,on=(await T("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).toJS;let Je=new Qn;function qs(t){t=="light"?(be().themeState="light",Je.setItem("themeState","light")):(be().themeState="dark",Je.setItem("themeState","dark"))}function Se(){return be().themeState}function Sn(t){t=="on"?(be().emojiPickerState="on",Je.setItem("emojiPickerState","on")):(be().emojiPickerState="off",Je.setItem("emojiPickerState","off"))}function lr(){return be().emojiPickerState}function No(t){if(t.posx&&t.posy)be().contextMenuClickPosition=t;else return!1}function Xs(){return be().contextMenuClickPosition}function zo(t){const e=ln(),n=Ho(e,t);be().memorableStates=n,Je.setItem("memorableStates",JSON.stringify(n))}function ln(){return on(be().memorableStates)}function Pe(t){const e=Ue(),n=Bo(e,t);be().states=n,Je.setItem("states",JSON.stringify(n))}function Ue(){return on(be().states)}function It(t){const e=pe(),n=Oo(e,t);be().settingsConfig=n,Je.setItem("settingsConfig",JSON.stringify(n))}function pe(){return on(be().settingsConfig)}function Ho(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Bo(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Oo(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Dt(t){be().fileManagerState=t}function sr(){return be().fileManagerState}const Ko=u.forwardRef(Wo);function Wo(t,e){let n="FLEX JUS-CENTER ",r={width:"fitContent"};const[a,o]=u.useState(!1),i=Se();function s(f){f.altKey&&Fa(`![我是图片](/vf/${t.uuid})`),f.ctrlKey&&ot(`![我是图片](/vf/${t.uuid})`,!0)}let[l,m]=u.useState({src:t.src,uuid:t.uuid,magic:t.magic!=0,className:n+(t.className??""),style:t.style?{...t.style,...r}:r});const d=f=>i==="dark"?"none":f?"1vh 2vh 21px rgb(79 79 79)":"rgb(216 216 216) 1vh 2vh 21px";return u.createElement(u.Fragment,null,u.createElement("div",{...l,...t,ref:e,className:l.className,style:l.style},u.createElement(Ie,{placement:"right",TransitionComponent:Hn,arrow:!0,title:"按住Ctrl点击插入"},u.createElement("img",{onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},onClick:f=>{s(f)},style:{width:"70%",transition:" 0.2s ease-in-out",borderRadius:"5px",transform:a?"translate(0px, -2px)":"",boxShadow:d(a)},src:l.src,alt:"error"}))))}const Bt=(await T("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).observable,Uo=(await T("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).makeAutoObservable,Tn=(await T("https://cdn.jsdmirror.com/npm/mobx@6.12.0/+esm")).runInAction;class Vo{displayState=!1;imgList=[];refreshCounter=0;constructor(e){Uo(this,{displayState:Bt,imgList:Bt,refreshCounter:Bt}),this.displayState=e,this.loadImages()}display(){this.displayState=!0,this.refreshImages()}hidden(){this.displayState=!1}async loadImages(){try{const e=await ja();Tn(()=>{this.imgList=e||[]})}catch(e){console.error("Failed to load images:",e),Tn(()=>{this.imgList=[]})}}refreshImages(){this.loadImages(),this.refreshCounter++}getImages(){return this.imgList}}const Jo=new Vo(!1),cr=()=>Jo;function Go(t){const e=u.Children.toArray(t.children).length;let n="LR ",r={display:"flex",flexDirection:"row",justifyContent:t.jus??"center",alignItems:t.ali??"center",width:"100%",height:"100%"},[a,o]=u.useState({style:t.style?{...t.style,...r}:r,className:n+(t.className??""),space:t.space??void 0,order:[]}),[i,s]=u.useState({marginRight:"5px",width:"100%",height:"100%"});return u.createElement(u.Fragment,null,u.createElement("div",{...a,...t,className:a.className,style:a.style},u.Children.map(t.children,(l,m)=>m==e-1?u.createElement("div",{style:{...i,flex:a.space?"auto":void 0}},l):u.createElement("div",{style:{...i,order:`${a.order[m]}`,flex:`0 0 ${a.space?a.space[m]:void 0}%`}},l))))}function Ot(t){let e="Box ",n={display:"flex",flexDirection:t.dir??"row",justifyContent:t.jus??"center",alignItems:t.ali??"center",width:t.min==1?"fitContent":"100%",height:t.min==1?"fitContent":"100%",transform:t.move?`translate(${t.move?.x??0}, ${t.move?.y??0})`:void 0},[r,a]=u.useState({style:t.style?{...t.style,...n}:n,className:e+(t.className??""),space:t.space??void 0,order:[]});return u.createElement(u.Fragment,null,u.createElement("div",{...r,...t,className:r.className,style:r.style},t.children))}const qo=Qt({palette:{primary:{main:"#1976d2"}}}),Xo=at(()=>{const{t}=Te(),e=cr(),[n,r]=c.useState(!1),[a,o]=c.useState(!1),i=Se();function s(){o(!0)}async function l(d){try{const f=await $t("md_content",2);xa(f,"users_img","uuid",d),setTimeout(()=>{e.refreshImages()},100)}catch(f){console.error("删除图片失败:",f)}}c.useEffect(()=>{r(e.displayState)},[e.displayState]);const m=e.getImages();return c.createElement(c.Fragment,null,c.createElement(Mt,{open:a,onClose:()=>{o(!1)},style:{zIndex:9999}},c.createElement(Zt,{id:"alert-dialog-title"},t("t-image-manager-delete-all-title")),c.createElement(en,null,c.createElement(Ar,{id:"alert-dialog-description"},t("t-image-manager-delete-all-content"))),c.createElement(tn,null,c.createElement(ve,{onClick:()=>{o(!1),Ca("md_content"),e.refreshImages()}},t("t-image-manager-confirm-yes")),c.createElement(ve,{onClick:()=>{o(!1)},autoFocus:!0},t("t-image-manager-confirm-no")))),c.createElement(nn,{anchor:"bottom",open:n,elevation:16,onClose:()=>{e.hidden()}},c.createElement("div",{style:{height:"60vh",overflow:"auto"}},c.createElement("div",null,c.createElement(Bn,{theme:qo},c.createElement(Ot,null,c.createElement(Go,{space:[90]},c.createElement(Ot,{min:1,move:{x:"5vw"}},c.createElement("p",null,t("t-image-manager-title")),c.createElement(Ie,{title:c.createElement("div",null,t("t-image-manager-tooltip-title"),c.createElement("ul",{style:{margin:"2px"}},c.createElement("li",null,t("t-image-manager-tooltip-ctrl-click")),c.createElement("li",null,t("t-image-manager-tooltip-double-click")),c.createElement("li",null,t("t-image-manager-tooltip-alt-click"))))},c.createElement(Me,null,c.createElement(ft,{color:"primary"})))),c.createElement(Ot,null,c.createElement(Ie,{title:t("t-image-manager-tooltip-delete-all")},c.createElement(Me,{onClick:s},c.createElement(On,{color:"primary"})))))))),c.createElement($r,{style:{marginBottom:"1.3vh"}}),m.length>0?c.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem",padding:"0 1rem 1rem 1rem"}},m.map(d=>c.createElement("div",{key:d.uuid,style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:i==="light"?"#f9f9f9":"#2a2a2a",borderRadius:"8px",padding:"1rem",transition:"all 0.2s ease",border:`1px solid ${i==="light"?"#e0e0e0":"#404040"}`}},c.createElement(Ie,{title:t("t-image-manager-tooltip-delete-single")},c.createElement(Me,{size:"small",onClick:()=>l(d.uuid),style:{position:"absolute",top:"8px",right:"8px",backgroundColor:i==="light"?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.7)",color:"#f44336",zIndex:10,width:"24px",height:"24px"}},c.createElement(Lr,{style:{fontSize:"16px"}}))),c.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"0.5rem"}},c.createElement(Ko,{magic:0,src:d.imgBase64,uuid:d.uuid,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px"}})),c.createElement("div",{style:{fontSize:"12px",color:i==="light"?"#666":"#999",textAlign:"center",wordBreak:"break-all"}},"UUID: ",d.uuid)))):c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem 1rem",color:i==="light"?"#999":"#666",textAlign:"center"}},c.createElement(ft,{style:{fontSize:"48px",marginBottom:"1rem",opacity:.5}}),c.createElement("h3",{style:{margin:"0 0 0.5rem 0",fontWeight:"normal"}},t("t-image-manager-no-images-title")),c.createElement("p",{style:{margin:0,fontSize:"14px"}},t("t-image-manager-no-images-description"))))))}),Yo=Ge(ve)(({theme:t})=>({color:t.palette.mode==="light"?"rgb(55, 65, 81)":"#FFFFFF",marginLeft:10,fontFamily:["electronicFont"].join(","),backgroundColor:t.palette.mode==="light"?"#FFFFFF":"","&:hover":{backgroundColor:t.palette.mode==="light"?Rr[300]:""}}));function Kt(t){return c.createElement(Yo,{id:"demo-customized-button",href:t.href?t.href:void 0,"aria-controls":t.open?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":t.open?"true":void 0,disableElevation:!0,onClick:t.onClick,onMouseOver:t.onHover,endIcon:t.endIcon,startIcon:t.startIcon?t.startIcon:void 0,variant:"contained"},t.children)}const Qo=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function qt(){let t=document.getElementById("view-area").innerHTML;window.document.body.style.background=Se()==="light"?"":"#0D1117",window.document.body.innerHTML=`<div class="markdown-body markdown-body-${Se()==="light"?"light":"dark"}">${t}</div>`,Qo.sleep(500).then(()=>{window.print()})}function dr(t,e,n=""){const r=e??window.editor,a=t.editor.getEditors()[0].getModel().getFullModelRange();r.executeEdits("my-replace2",[{range:a,text:n,forceMoveMarkers:!0}])}const Zo=Ge(t=>c.createElement(Pr,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...t}))(({theme:t})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:t.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:t.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:t.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}})),In=t=>t.children!==void 0,Dn=t=>{const e=t.match(/^(\d+)/);return e?parseInt(e[1],10):null},ei=(t,e)=>{const n=Dn(t),r=Dn(e);if(n!==null&&r!==null){if(n!==r)return n-r;const a=t.substring(n.toString().length),o=e.substring(r.toString().length);return a.toLowerCase().localeCompare(o.toLowerCase())}return n!==null?-1:r!==null?1:t.toLowerCase().localeCompare(e.toLowerCase())},ur=t=>{const e=[...t];return e.sort((n,r)=>{const a=In(n),o=In(r);return a&&!o?-1:!a&&o?1:ei(n.label,r.label)}),e.forEach(n=>{n.children&&n.children.length>0&&(n.children=ur(n.children))}),e},ti=3,je=t=>t?t.replace(/[\/\\]+/g,"/").replace(/^\/+|\/+$/g,"").trim():"",Mn=(t,e)=>{const n=je(t);return`${e}:${n}`},ni=t=>{const e=je(t);return e?e.split("/").length:0},ri=(t,e)=>e!=="folder"?!1:ni(t)>=ti;Ge("div")`
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  .lazy-placeholder {
    opacity: 0.7;
    font-style: italic;
    
    &.loading {
      opacity: 0.5;
    }
  }
  
  .lazy-placeholder:hover {
    opacity: 1;
    background-color: ${rt("#1976d2",.08)};
  }
`;const ai=[{id:"1",label:"Documents"},{id:"2",label:"Bookmarked",children:[{id:"2.1",label:"Learning materials",fileType:"folder"}]}];function oi(){return c.createElement(z,{sx:{width:8,height:8,borderRadius:"100%",bgcolor:"warning.main",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",zIndex:1,mx:1}})}const Fn=Ge(_r)(({theme:t})=>({color:t.palette.mode==="light"?t.palette.grey[800]:t.palette.grey[400],position:"relative",[`& .${mt.groupTransition}`]:{marginLeft:t.spacing(3.5)}})),An=Ge(jr)(({theme:t})=>({flexDirection:"row-reverse",borderRadius:t.spacing(.7),marginBottom:t.spacing(.5),marginTop:t.spacing(.5),padding:t.spacing(.5),paddingRight:t.spacing(1),fontWeight:500,[`& .${mt.iconContainer}`]:{marginRight:t.spacing(2)},"&.Mui-expanded ":{"&:not(.Mui-focused, .Mui-selected, .Mui-selected.Mui-focused) .labelIcon":{color:t.palette.mode==="light"?t.palette.primary.main:t.palette.primary.dark},"&::before":{content:'""',display:"block",position:"absolute",left:"16px",top:"44px",height:"calc(100% - 48px)",width:"1.5px",backgroundColor:t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[700]}},"&:hover":{backgroundColor:rt(t.palette.primary.main,.1),color:t.palette.mode==="light"?t.palette.primary.main:"white"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:t.palette.mode==="light"?t.palette.primary.main:t.palette.primary.dark,color:t.palette.primary.contrastText},"&[draggable='true']":{cursor:"default","&:active":{opacity:1}},"&.drag-over":{backgroundColor:rt(t.palette.success.main,.2),border:`2px dashed ${t.palette.success.main}`}}));function ii(t){return c.createElement(Kn,{...t})}const $n=({icon:t,expandable:e=!1,children:n,draggable:r=!1})=>c.createElement(c.Fragment,null,c.createElement(zr,{draggable:r},c.createElement(z,{sx:{display:"flex",alignItems:"center",cursor:"pointer"}},t&&c.createElement(z,{component:t,className:"labelIcon",color:"inherit",sx:{mr:1,fontSize:"1.2rem"}}),c.createElement(ke,{sx:{color:"inherit",fontFamily:"General Sans",fontWeight:500},variant:"body2"},n),e&&c.createElement(oi,null)))),mr=t=>Array.isArray(t)?t.length>0&&t.some(mr):!!t;function Xt({visible:t,x:e,y:n,onClose:r,onNewFile:a,onNewFolder:o,onRename:i,onDelete:s,isFile:l=!1,isRoot:m=!1}){const{t:d}=Te(),f=c.useRef(null);if(c.useEffect(()=>{if(!t)return;console.log("Setting up global click listener for context menu");const v=F=>{if(F.button!==2){if(f.current&&f.current.contains(F.target)){console.log("Click inside menu, keeping open");return}console.log("Click outside menu, closing"),r()}},C=F=>{f.current&&!f.current.contains(F.target)&&(console.log("Right click outside menu, closing"),r())},E=F=>{F.key==="Escape"&&(console.log("Escape key pressed, closing menu"),r())},S=setTimeout(()=>{document.addEventListener("mousedown",v),document.addEventListener("contextmenu",C),document.addEventListener("keydown",E)},100);return()=>{clearTimeout(S),document.removeEventListener("mousedown",v),document.removeEventListener("contextmenu",C),document.removeEventListener("keydown",E)}},[t,r]),!t)return null;const p=Math.min(e,window.innerWidth-220),b=Math.min(n,window.innerHeight-240);console.log("Rendering context menu at:",p,b,m?"(Root menu)":"");const g={position:"fixed",top:b,left:p,zIndex:999999,backgroundColor:"white",border:"1px solid #ddd",borderRadius:8,boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:200,padding:4,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:14,userSelect:"none",pointerEvents:"auto",isolation:"isolate"},h={padding:"8px 16px",cursor:"pointer",borderRadius:4,display:"flex",alignItems:"center",gap:8,transition:"background-color 0.1s"};return xr.createPortal(c.createElement("div",{ref:f,style:g,onClick:v=>v.stopPropagation(),onContextMenu:v=>v.preventDefault()},(m||!l)&&c.createElement(c.Fragment,null,c.createElement("div",{style:h,onClick:v=>{v.stopPropagation(),a()},onMouseEnter:v=>v.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent"},c.createElement("span",null,"📄"),c.createElement("span",null,d("t-file-manager-new-file"))),c.createElement("div",{style:h,onClick:v=>{v.stopPropagation(),o()},onMouseEnter:v=>v.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent"},c.createElement("span",null,"📁"),c.createElement("span",null,d("t-file-manager-new-folder"))),!m&&c.createElement("div",{style:{height:1,backgroundColor:"#eee",margin:"4px 0"}})),!m&&c.createElement(c.Fragment,null,c.createElement("div",{style:h,onClick:v=>{v.stopPropagation(),i()},onMouseEnter:v=>v.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent"},c.createElement("span",null,"✏️"),c.createElement("span",null,d("t-file-manager-rename"))),c.createElement("div",{style:{...h,color:"#ff4d4f"},onClick:v=>{v.stopPropagation(),s()},onMouseEnter:v=>{v.currentTarget.style.backgroundColor="#fff2f0",v.currentTarget.style.color="#ff4d4f"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="transparent",v.currentTarget.style.color="#ff4d4f"}},c.createElement("span",null,"🗑️"),c.createElement("span",null,d("t-file-manager-delete"))))),document.body)}function li({onCreateFile:t,onCreateFolder:e}){const{t:n}=Te();return c.createElement(z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:200,padding:"24px 16px",textAlign:"center",margin:"8px 4px"}},c.createElement(Wn,{sx:{fontSize:48,color:"text.secondary",mb:2,opacity:.6}}),c.createElement(ke,{variant:"h6",color:"text.secondary",gutterBottom:!0,sx:{fontSize:"1rem",fontWeight:500}},n("t-file-manager-empty-folder")),c.createElement(ke,{variant:"body2",color:"text.secondary",sx:{mb:3,opacity:.7,maxWidth:280}},n("t-file-manager-empty-folder-desc")),c.createElement(z,{sx:{display:"flex",gap:1.5,flexWrap:"wrap",justifyContent:"center"}},c.createElement(ve,{size:"small",variant:"outlined",startIcon:c.createElement(Kr,null),onClick:t,sx:{borderRadius:2,textTransform:"none",fontSize:"0.875rem"}},n("t-file-manager-new-file")),c.createElement(ve,{size:"small",variant:"outlined",startIcon:c.createElement(Wr,null),onClick:e,sx:{borderRadius:2,textTransform:"none",fontSize:"0.875rem"}},n("t-file-manager-new-folder"))))}function Ln({open:t,title:e,label:n,onClose:r,onConfirm:a,defaultValue:o=""}){const{t:i}=Te(),[s,l]=c.useState(o);c.useEffect(()=>{l(o)},[o,t]),c.useEffect(()=>{console.log("InputDialog state changed:",{open:t,title:e,label:n,defaultValue:o})},[t,e,n,o]);const m=()=>{s.trim()&&(a(s.trim()),r())};return c.createElement(Mt,{open:t,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{style:{zIndex:999999}},style:{zIndex:999999}},c.createElement(Zt,null,e),c.createElement(en,null,c.createElement(zn,{autoFocus:!0,fullWidth:!0,label:n,value:s,onChange:d=>l(d.target.value),onKeyPress:d=>{d.key==="Enter"&&m()},sx:{mt:1}})),c.createElement(tn,null,c.createElement(ve,{onClick:r},i("t-image-manager-confirm-no")),c.createElement(ve,{onClick:m,variant:"contained"},i("t-image-manager-confirm-yes"))))}function Rn({open:t,title:e,message:n,onClose:r,onConfirm:a}){const{t:o}=Te();return c.createElement(Mt,{open:t,onClose:r,PaperProps:{style:{zIndex:999999}},style:{zIndex:999999}},c.createElement(Zt,null,e),c.createElement(en,null,c.createElement(ke,null,n)),c.createElement(tn,null,c.createElement(ve,{onClick:r},o("t-image-manager-confirm-no")),c.createElement(ve,{onClick:a,color:"error",variant:"contained"},o("t-image-manager-confirm-yes"))))}const si=t=>{switch(t){case"image":return rn;case"pdf":return Br;case"doc":return hn;case"video":return Hr;case"folder":return Un;case"pinned":return Wn;case"trash":return On;default:return hn}},ci=c.forwardRef(function(e,n){const{setIsDragging:r,fillText:a,folderManager:o,setExpandedFolderState:i,onRefresh:s,onManualRefresh:l,contextMenuState:m,onShowContextMenu:d,onCloseContextMenu:f,inputDialog:p,confirmDialog:b,onShowInputDialog:g,onShowConfirmDialog:h,onCloseInputDialog:v,onCloseConfirmDialog:C,onConfirmInput:E,onConfirmDelete:S,onLoadLazily:F,currentEditingFile:I,onFileSelect:W,id:j,itemId:R,label:re,disabled:X,children:de,...ie}=e,{t:B}=Te(),he=Ft(),[Y,ae]=c.useState(!1),[M,_]=c.useState(!1),J=m?.itemId===R,{getRootProps:P,getContentProps:Q,getIconContainerProps:x,getLabelProps:w,getGroupTransitionProps:k,status:D,publicAPI:L}=Nr({id:j,itemId:R,children:de,label:re,disabled:X,rootRef:n});let y=L.getItem(R);const ue=mr(de);let oe;const ze=I&&y.path===I&&y.fileType==="file";y.fileType==="lazy-placeholder"?oe=void 0:ue?oe=Un:y.fileType&&(oe=si(y.fileType));const He=async()=>{if(y.fileType==="lazy-placeholder"&&F){_(!0);try{const A=je(y.path.replace("/[lazy-placeholder]",""));console.log("Lazy loading triggered for:",A,"from placeholder:",y.path),await F(R,A)}catch(A){console.error("Error loading lazily:",A)}finally{_(!1)}}},Le=A=>{y.fileType!=="lazy-placeholder"&&(A.preventDefault(),A.stopPropagation(),console.log("Right click detected on:",y.label),console.log("Event coordinates:",A.clientX,A.clientY),d(A,R))},it=A=>{Le(A),A.nativeEvent.stopImmediatePropagation?.()},Be=()=>{console.log("Closing context menu"),f()},Rt=()=>{console.log("handleNewFile called for item:",y.label,"path:",y.path),g({open:!0,type:"newFile",title:B("t-file-manager-new-file"),label:B("t-file-manager-new-file-name"),defaultValue:"",itemId:R}),console.log("InputDialog state set, closing context menu"),Be()},$=()=>{console.log("handleNewFolder called for item:",y.label,"path:",y.path),g({open:!0,type:"newFolder",title:B("t-file-manager-new-folder"),label:B("t-file-manager-new-folder-name"),defaultValue:"",itemId:R}),console.log("InputDialog state set, closing context menu"),Be()},O=()=>{console.log("handleRename called for item:",y.label,"path:",y.path),g({open:!0,type:"rename",title:B("t-file-manager-rename"),label:B("t-file-manager-rename-name"),defaultValue:y.label,itemId:R}),Be()},K=()=>{console.log("handleDelete called for item:",y.label,"path:",y.path);const A=y.fileType==="folder",N=A?B("t-file-manager-confirm-delete-folder",{name:y.label}):B("t-file-manager-confirm-delete-file",{name:y.label});h({open:!0,title:B("t-file-manager-confirm-delete"),message:N,action:async()=>{try{const ee=o.getTopDirectoryHandle();if(!ee)return;const ne=I===y.path,fe=A&&I&&I.startsWith(y.path+"/");A?await o.deleteFolderAtPath(ee,y.path):await o.deleteFileAtPath(ee,y.path),(ne||fe)&&(console.log("Deleted currently editing file/folder, clearing selection"),W?.("")),H(B("t-file-manager-delete-success"),2e3,{kind:"success"}),s(),C()}catch(ee){console.error("Delete error:",ee),H(B("t-file-manager-operation-failed"),2e3,{kind:"error"}),C()}},itemId:R}),Be()},U=A=>{const N=A.label.toLowerCase(),ee=N.lastIndexOf(".");if(ee===-1)return!1;const ne=N.substring(ee+1);return Lt.includes(ne)||ne==="pdf"?!0:["md","txt","go","java","kt","py","js","ts","html","css","c","cpp","json","mjs","jsx","tsx","ps1","cmd","xsl","toml","ipynb","makefile","yml"].includes(ne)},G=A=>A.label.toLowerCase().endsWith(".pdf"),Z=async A=>{if(y.fileType==="lazy-placeholder"){await He();return}if(y.fileType==="file"&&o.fileState===1)try{if(!U(y)){const N=y.label.toLowerCase(),ee=N.lastIndexOf("."),ne=ee!==-1?N.substring(ee+1):"未知";H(B("t-file-format-not-supported",{extension:ne}),2e3,{kind:"warning"});return}if(Pe({unmemorable:{previewMode:!0}}),Pn(y)){let N=`![${pe().advanced.imageSettings.basicStyle}](./${y.path})`;a(N,y.label),W?.(y.path)}else if(G(y)){let N=`@[import](./${y.path})`;a(N,y.label),W?.(y.path)}else{Pe({unmemorable:{previewMode:!1}});let N=await o.readFileContent(o.getTopDirectoryHandle(),y.path);a(N,y.label),await nt(!1),W?.(y.path)}}catch(N){console.error("Error reading file content:",N),H(B("t-error-opening-file"),2e3,{kind:"error"})}},q=A=>{if(y.fileType==="lazy-placeholder"){A.preventDefault();return}console.log("Drag start:",y.label,"path:",y.path),Pn(y)?(A.dataTransfer.effectAllowed="copyMove",setTimeout(()=>{r(!0)},400),A.dataTransfer.setData("text/html",`![${pe().advanced.imageSettings.basicStyle}](./${y.path})`)):A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",JSON.stringify({itemId:R,label:y.label,path:y.path,fileType:y.fileType}))},te=A=>{y.fileType!=="lazy-placeholder"&&y.fileType==="folder"&&(A.preventDefault(),A.dataTransfer.dropEffect="move",ae(!0))},me=A=>{A.currentTarget.contains(A.relatedTarget)||ae(!1)},se=async A=>{if(A.preventDefault(),ae(!1),y.fileType==="folder")try{const N=JSON.parse(A.dataTransfer.getData("text/plain")),{itemId:ee,label:ne,path:fe,fileType:lt}=N;if(ee===R)return;if(lt==="folder"&&y.path.startsWith(fe)){H(B("t-file-manager-invalid-move"),2e3,{kind:"warning"});return}const ce=fe.includes("/")?fe.substring(0,fe.lastIndexOf("/")):"";if(ce===y.path)return;const ge=o.getTopDirectoryHandle();if(!ge)return;console.log(`Moving ${ne} from "${ce}" to "${y.path}"`);const Pt=I===fe,xe=lt==="folder"&&I&&I.startsWith(fe+"/");let Ce=ne;if(lt==="folder"?Ce=await o.moveFolder(ge,fe,y.path):Ce=await o.moveFileByPath(ge,fe,y.path),Pt)if(Ce!==ne)console.log(`Moved currently editing file was renamed from '${ne}' to '${Ce}', clearing editing state`),W?.("");else{const De=y.path?`${y.path}/${Ce}`:Ce;console.log(`Moved currently editing file, updating path from '${fe}' to '${De}'`),W?.(De)}else if(xe&&I)if(Ce!==ne)console.log(`Moved folder containing currently editing file was renamed from '${ne}' to '${Ce}', clearing editing state`),W?.("");else{const De=I.substring(fe.length+1),st=y.path?`${y.path}/${Ce}/${De}`:`${Ce}/${De}`;console.log(`Moved folder containing currently editing file, updating path from '${I}' to '${st}'`),W?.(st)}Ce!==ne?H(`${B("t-file-manager-move-success")} (${ne} → ${Ce})`,3e3,{kind:"success"}):H(B("t-file-manager-move-success"),2e3,{kind:"success"}),setTimeout(async()=>{console.log("Executing immediate refresh after file move"),e.onManualRefresh?await e.onManualRefresh("file_move"):s()},50)}catch(N){console.error("Move error:",N),H(B("t-file-manager-operation-failed"),2e3,{kind:"error"})}};return y.fileType==="lazy-placeholder"?c.createElement("div",{style:{position:"relative"}},c.createElement(fn,{itemId:R},c.createElement(Fn,{onClick:He,...P(ie),style:{position:"relative",opacity:M?.6:1,cursor:M?"wait":"pointer"}},c.createElement(An,{...Q({className:bn("content","lazy-placeholder",{loading:M})})},c.createElement(gn,{...x()},M?c.createElement("div",{style:{animation:"spin 1s linear infinite",fontSize:"1.2rem"}},"⟳"):c.createElement(pn,{status:D})),c.createElement($n,{draggable:!1,...w({icon:void 0,expandable:!1})},B(M?"t-file-manager-loading":"t-file-manager-load-more")))))):c.createElement("div",{style:{position:"relative"}},c.createElement(fn,{itemId:R},c.createElement(Fn,{onClick:Z,onContextMenu:it,draggable:!1,...P(ie),style:{position:"relative"}},c.createElement(An,{draggable:ui(),onDragStart:q,onDragOver:te,onDragLeave:me,onDrop:se,...Q({className:bn("content",{"Mui-expanded":D.expanded,"Mui-selected":!1,"Mui-focused":!1,"Mui-disabled":D.disabled,"custom-editing":ze}),style:{backgroundColor:ze?he.palette.mode==="light"?he.palette.primary.main:he.palette.primary.dark:"transparent",color:ze?he.palette.primary.contrastText:"inherit"}})},c.createElement(gn,{...x()},c.createElement(pn,{status:D})),c.createElement($n,{draggable:!1,...w({icon:oe,expandable:ue&&D.expanded})})),de&&c.createElement(ii,{...k()}))),c.createElement(Xt,{visible:J,x:m?.mouseX||0,y:m?.mouseY||0,onClose:Be,onNewFile:Rt,onNewFolder:$,onRename:O,onDelete:K,isFile:y.fileType==="file",isRoot:!1}))});function di(t){const{t:e}=Te();let n=ur(t.fileDirectoryArr);const[r,a]=c.useState(null),[o,i]=c.useState({open:!1,type:"newFile",title:"",label:"",defaultValue:"",itemId:""}),[s,l]=c.useState({open:!1,title:"",message:"",action:()=>{},itemId:""}),[m,d]=c.useState(!1),[f,p]=c.useState(new Set),b=c.useCallback(async(M,_)=>{if(t.onLoadLazily)return t.onLoadLazily(M,_);try{const J=t.folderManager.getTopDirectoryHandle();if(!J)return;const P=je(_.replace("/[lazy-placeholder]",""));console.log("Loading folder lazily:",P,"from placeholder:",_);const Q=await t.folderManager.loadFolderLazily(J,P);if(!Q||Q.length===0){console.log("No children found for:",P);return}const x=Q.map(L=>{const y=je(L.path||`${P}/${L.label}`),ue=Mn(y,L.fileType);if(L.fileType==="folder"){const oe=ri(y,"folder");return{...L,id:ue,path:y,children:oe?[{id:Mn(`${y}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${y}/[lazy-placeholder]`}]:L.children}}else return{...L,id:ue,path:y}}),w=L=>L.map(y=>{if(je(y.path)===P&&y.fileType==="folder"){console.log("Found target folder, updating children:",y.path);const ue=y.children?.filter(Le=>Le.fileType!=="lazy-placeholder")||[],oe=new Set(ue.map(Le=>je(Le.path))),ze=x.filter(Le=>!oe.has(je(Le.path))),He=[...ue,...ze];return{...y,children:He.length>0?He:void 0}}return y.children&&Array.isArray(y.children)?{...y,children:w(y.children)}:y}),k=Array.isArray(t.fileDirectoryArr)?t.fileDirectoryArr:[],D=w(k);console.log("File tree updated with lazy loaded content"),t.folderManager.topDirectoryArray=D,t.onRefresh&&t.onRefresh(),p(L=>new Set([...L,P]))}catch(J){console.error("Error loading folder lazily:",J)}},[t.folderManager,t.fileDirectoryArr,t.onRefresh,t.onLoadLazily]),g=M=>{M.preventDefault(),M.stopPropagation(),console.log("Root area context menu triggered at:",M.clientX,M.clientY),a({mouseX:M.clientX,mouseY:M.clientY,itemId:"root"})},h=()=>{console.log("Root new file called"),i({open:!0,type:"newFile",title:e("t-file-manager-new-file"),label:e("t-file-manager-new-file-name"),defaultValue:"",itemId:"root"}),E()},v=()=>{console.log("Root new folder called"),i({open:!0,type:"newFolder",title:e("t-file-manager-new-folder"),label:e("t-file-manager-new-folder-name"),defaultValue:"",itemId:"root"}),E()},C=c.useCallback((M,_)=>{a({mouseX:M.clientX,mouseY:M.clientY,itemId:_})},[]),E=c.useCallback(()=>{a(null)},[]),S=c.useCallback(M=>{console.log("handleShowInputDialog called with:",M),i(M)},[]),F=c.useCallback(M=>{l(M)},[]),I=c.useCallback(()=>{console.log("handleCloseInputDialog called"),i(M=>({...M,open:!1}))},[]),W=c.useCallback(()=>{l(M=>({...M,open:!1}))},[]),j=c.useCallback(async()=>{await new Promise(M=>setTimeout(M,150)),t.onRefresh?.()},[t.onRefresh]),R=c.useCallback(async M=>{console.log("handleConfirmInput called with:",M,"dialog type:",o.type,"itemId:",o.itemId);try{const _=t.folderManager.getTopDirectoryHandle();if(!_)return;const J=(x,w)=>{for(const k of x){if(k.id===w)return k;if(k.children){const D=J(k.children,w);if(D)return D}}return null},P=J(n,o.itemId);if(!P&&o.type!=="newFile"&&o.type!=="newFolder"){console.error("Current item not found");return}let Q=o.type;switch(o.type){case"newFile":P&&P.fileType==="folder"?await t.folderManager.createNewFileAtPath(_,P.path,M):await t.folderManager.createNewFile(_,M),H(e("t-file-manager-create-success"),2e3,{kind:"success"}),Q="create_file";break;case"newFolder":P&&P.fileType==="folder"?await t.folderManager.createNewFolderAtPath(_,P.path,M):await t.folderManager.createNewFolder(_,M),H(e("t-file-manager-create-success"),2e3,{kind:"success"}),Q="create_folder";break;case"rename":P&&(P.fileType==="folder"?(await t.folderManager.renameFolderAtPath(_,P.path,M),Q="rename_folder"):(await t.folderManager.renameFileAtPath(_,P.path,M),Q="rename_file"),H(e("t-file-manager-rename-success"),2e3,{kind:"success"}));break}t.onManualRefresh?await t.onManualRefresh(Q):j()}catch(_){console.error("Operation error:",_),H(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},[o.type,o.itemId,t.folderManager,j,e,n]),re=c.useCallback(()=>{s.action()},[s.action]),X=M=>{M.preventDefault(),M.dataTransfer.dropEffect="move",d(!0)},de=M=>{M.currentTarget.contains(M.relatedTarget)||d(!1)},ie=async M=>{M.preventDefault(),d(!1);try{const _=JSON.parse(M.dataTransfer.getData("text/plain")),{itemId:J,label:P,path:Q,fileType:x}=_;if(!Q.includes("/"))return;const k=t.folderManager.getTopDirectoryHandle();if(!k)return;console.log(`Moving ${P} from "${Q}" to root directory`);const D=t.currentEditingFile===Q,L=x==="folder"&&t.currentEditingFile&&t.currentEditingFile.startsWith(Q+"/");let y=P;if(x==="folder"?y=await t.folderManager.moveFolder(k,Q,""):y=await t.folderManager.moveFileByPath(k,Q,""),D)y!==P?(console.log(`Moved currently editing file to root was renamed from '${P}' to '${y}', clearing editing state`),t.onFileSelect?.("")):(console.log(`Moved currently editing file to root, updating path from '${Q}' to '${y}'`),t.onFileSelect?.(y));else if(L&&t.currentEditingFile)if(y!==P)console.log(`Moved folder containing currently editing file to root was renamed from '${P}' to '${y}', clearing editing state`),t.onFileSelect?.("");else{const ue=t.currentEditingFile.substring(Q.length+1),oe=`${y}/${ue}`;console.log(`Moved folder containing currently editing file to root, updating path from '${t.currentEditingFile}' to '${oe}'`),t.onFileSelect?.(oe)}y!==P?H(`${e("t-file-manager-move-success")} (${P} → ${y})`,3e3,{kind:"success"}):H(e("t-file-manager-move-success"),2e3,{kind:"success"}),setTimeout(async()=>{console.log("Executing immediate refresh after move to root"),t.onManualRefresh?await t.onManualRefresh("move_to_root"):j()},50)}catch(_){console.error("Move to root error:",_),H(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},B=!n||n.length===0||n.length===1&&n[0].children&&n[0].children.length===0,he=async()=>{const M=t.folderManager.getTopDirectoryHandle();if(M)try{const _=`新建文件${Date.now()}.md`;await t.folderManager.createNewFile(M,_),H(e("t-file-manager-create-success"),2e3,{kind:"success"}),t.onManualRefresh?await t.onManualRefresh("empty_folder_create_file"):j()}catch(_){console.error("Create file error:",_),H(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},Y=async()=>{const M=t.folderManager.getTopDirectoryHandle();if(M)try{const _=`新建文件夹${Date.now()}`;await t.folderManager.createNewFolder(M,_),H(e("t-file-manager-create-success"),2e3,{kind:"success"}),t.onManualRefresh?await t.onManualRefresh("empty_folder_create_folder"):j()}catch(_){console.error("Create folder error:",_),H(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}};if(B)return c.createElement(z,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onDragOver:X,onDragLeave:de,onDrop:ie,onContextMenu:g,style:{backgroundColor:m?"rgba(46, 125, 50, 0.1)":"transparent",border:m?"2px dashed #2e7d32":"2px solid transparent",transition:"all 0.2s ease"}},c.createElement(li,{onCreateFile:he,onCreateFolder:Y}),c.createElement(Xt,{visible:r?.itemId==="root",x:r?.mouseX||0,y:r?.mouseY||0,onClose:E,onNewFile:h,onNewFolder:v,onRename:()=>{},onDelete:()=>{},isFile:!1,isRoot:!0}),c.createElement(Ln,{open:o.open,title:o.title,label:o.label,defaultValue:o.defaultValue,onClose:I,onConfirm:R}),c.createElement(Rn,{open:s.open,title:s.title,message:s.message,onClose:W,onConfirm:re}));const ae=c.useCallback(M=>c.createElement(ci,{...M,fillText:t.fillText,setIsDragging:t.setIsDragging,setExpandedFolderState:()=>{},folderManager:t.folderManager,onRefresh:j,onManualRefresh:t.onManualRefresh,contextMenuState:r,onShowContextMenu:C,onCloseContextMenu:E,inputDialog:o,confirmDialog:s,onShowInputDialog:S,onShowConfirmDialog:F,onCloseInputDialog:I,onCloseConfirmDialog:W,onConfirmInput:R,onConfirmDelete:re,onLoadLazily:b,currentEditingFile:t.currentEditingFile,onFileSelect:t.onFileSelect}),[t.fillText,t.setIsDragging,t.folderManager,t.currentEditingFile,t.onFileSelect,j,r,C,E,o,s,S,F,I,W,R,re,b,t.onManualRefresh]);return c.createElement(z,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onDragOver:X,onDragLeave:de,onDrop:ie,onContextMenu:g,style:{backgroundColor:m?"rgba(46, 125, 50, 0.1)":"transparent",border:m?"2px dashed #2e7d32":"2px solid transparent",transition:"all 0.2s ease"}},c.createElement(Or,{items:n??ai,"aria-label":"file explorer",className:"uniform-scroller",sx:{height:"100%",flexGrow:1,userSelect:"none",maxWidth:400,overflowY:"auto",flex:1,padding:"8px 0 8px 4px","& .MuiTreeView-root":{padding:0},"& > ul":{padding:"4px 0"}},slots:{item:ae}}),c.createElement(Xt,{visible:r?.itemId==="root",x:r?.mouseX||0,y:r?.mouseY||0,onClose:E,onNewFile:h,onNewFolder:v,onRename:()=>{},onDelete:()=>{},isFile:!1,isRoot:!0}),c.createElement(Ln,{open:o.open,title:o.title,label:o.label,defaultValue:o.defaultValue,onClose:I,onConfirm:R}),c.createElement(Rn,{open:s.open,title:s.title,message:s.message,onClose:W,onConfirm:re}))}function ui(t){return!0}function Pn(t){const e=t.label.toLowerCase(),n=e.lastIndexOf(".");if(n===-1)return!1;const r=e.substring(n+1);return Lt.includes(r)}const mi=u.forwardRef(({children:t,sx:e,...n},r)=>u.createElement(z,{ref:r,sx:{display:"flex",flexDirection:"column",width:500,height:200,overflow:"auto",padding:"10px","&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-track":{boxShadow:"inset 0 0 5px grey",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"darkgrey",borderRadius:"10px"},...e},...n},t)),fi=3,we=t=>t?t.replace(/[\/\\]+/g,"/").replace(/^\/+|\/+$/g,"").trim():"",Fe=(t,e)=>{const n=we(t);return`${e}:${n}`},gi=t=>{const e=we(t);return e?e.split("/").length:0},kt=(t,e)=>e!=="folder"?!1:gi(t)>=fi,Ke=new rr,V=new Ne,pi=at(function(){const{t:e}=Te(),[n,r]=u.useState([]),[a,o]=u.useState(""),[i,s]=u.useState(""),[l,m]=c.useState(!1),[d,f]=c.useState(!1),[p,b]=c.useState(!1),[g,h]=c.useState(new Set),[v,C]=c.useState(!1),[E,S]=c.useState([]),[F,I]=c.useState(!1),[W,j]=c.useState(0),[R,re]=c.useState(1500),[X,de]=c.useState(0),[ie,B]=c.useState(Date.now());window._setIsDragging=f;const he=Ft(),Y=u.useRef(),ae=u.useRef(),M=u.useRef(),[_,J]=c.useState(!0),P=u.useCallback(($,O)=>{if(!$||$.length===0)return!1;const K=we(O);for(const U of $)if(we(U.path)===K||U.children&&Array.isArray(U.children)&&P(U.children,O))return!0;return!1},[]),Q=($,O)=>{dr(window.monaco,window.editor,$),H(`${e("t-file-manager-open-success")}${O}！😀`)},x=$=>()=>{l||Dt($)},w=($,O)=>{It({basic:{fileEditLocal:O}})},k=u.useCallback(async()=>{const $=Date.now();if(F){const O=$-W;if(O<200){Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{k()},200-O);return}}if($-W<300){Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{k()},300-($-W));return}v||(Y.current&&clearTimeout(Y.current),Y.current=setTimeout(async()=>{try{S(q=>[...q.slice(-9),{type:"system",timestamp:$,operation:"file_system_change"}]);const O=V.topDirectoryArray||[],K=V.getTopDirectoryHandle();if(!K)return;const U=await V.readDirectoryAsArrayOptimized(K,!0,3),G=y(U),Z=L(O,G,g);if(Z.hasChanges){V.topDirectoryArray=Z.updatedTree,r(Z.updatedTree),h(Z.updatedExpandedFolders),B($),de(0);const q=1e3;if(q!==R&&(re(q),V.stopWatching(),V.watchDirectory(k,q)),i){const te=we(i);P(Z.updatedTree,te)||(s(""),o(""))}J(!0)}else{const q=$-ie;de(te=>{const me=te+1;let se=R;return q>3e4?se=5e3:q>1e4?se=3e3:me>=3&&(se=1e3),se!==R&&(re(se),setTimeout(()=>{V.stopWatching(),V.watchDirectory(k,se)},100)),me>10?0:me})}}catch(O){console.error("Error during system watch refresh:",O),J(!1),setTimeout(()=>{try{V.stopWatching(),V.watchDirectory(k,R),J(!0)}catch(K){console.error("Health check: failed to restart watcher:",K)}},1e3)}},400))},[V,g,v,i,F,W,R,X,ie,P]),D=u.useCallback(async $=>{const O=Date.now();I(!0),j(O),Y.current&&(clearTimeout(Y.current),Y.current=void 0),S(K=>[...K.slice(-9),{type:"user",timestamp:O,operation:$}]);try{const K=V.getTopDirectoryHandle();if(!K)return;const U=await V.readDirectoryAsArrayOptimized(K,!0,3),G=y(U),Z=V.topDirectoryArray||[],q=L(Z,G,g);if(V.topDirectoryArray=q.updatedTree,r(q.updatedTree),h(q.updatedExpandedFolders),re(1e3),de(0),B(O),i){const te=we(i);P(q.updatedTree,te)||(s(""),o(""))}J(!0)}catch(K){console.error("Error during user operation refresh:",K)}finally{setTimeout(()=>{I(!1)},100)}},[V,g,i,P]),L=u.useCallback(($,O,K)=>{const U=new Set(K),G=(se,A,N="")=>{let ee=!1;const ne=[],fe=new Map(se.map(ce=>[ce.label,ce])),lt=new Map(A.map(ce=>[ce.label,ce]));for(const ce of A){const ge=fe.get(ce.label),Pt=N?`${N}/${ce.label}`:ce.label,xe=we(Pt);if(!ge)ee=!0,ne.push({...ce,id:Fe(xe,ce.fileType),path:xe});else if(ce.fileType==="file")ne.push({...ge,path:xe,id:Fe(xe,"file")});else if(ce.fileType==="folder"){const Ce=K.has(xe)||K.has(ge.path);let De=ge.children||[],st=!1;if(Ce&&ce.children&&!ce.children.some(ht=>ht.fileType==="lazy-placeholder")){const ht=G(ge.children||[],ce.children,xe);De=ht.items,st=ht.hasChanges,st&&(ee=!0)}else kt(xe,"folder")&&(!ge.children||ge.children.length===0)?De=[{id:Fe(`${xe}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${xe}/[lazy-placeholder]`}]:De=ge.children||[];ne.push({...ge,path:xe,id:Fe(xe,"folder"),children:De.length>0?De:void 0}),Ce&&ge.path!==xe&&(U.delete(ge.path),U.add(xe))}}for(const[ce,ge]of fe)lt.has(ce)||(ee=!0,ge.fileType==="folder"&&U.delete(ge.path));return{items:ne,hasChanges:ee}},Z=G($,O),q=new Set,te=se=>{for(const A of se)A.fileType==="folder"&&(q.add(we(A.path)),A.children&&!A.children.some(N=>N.fileType==="lazy-placeholder")&&te(A.children))};te(Z.items);const me=new Set([...U].filter(se=>q.has(we(se))));return{hasChanges:Z.hasChanges,updatedTree:Z.items,updatedExpandedFolders:me}},[]),y=u.useCallback(($,O="",K=0)=>$.map(U=>{const G=we(O?`${O}/${U.label}`:U.label),Z={...U,id:Fe(G,U.fileType),path:G};return U.fileType==="folder"&&(kt(G,"folder")?Z.children=[{id:Fe(`${G}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${G}/[lazy-placeholder]`}]:U.children&&Array.isArray(U.children)&&(Z.children=y(U.children,G,K+1))),Z}),[]);u.useEffect(()=>{const $=()=>{if(V.getTopDirectoryHandle()&&!_)try{V.stopWatching(),V.watchDirectory(k,R),J(!0)}catch(O){console.error("Health check: failed to restart watcher:",O)}};return M.current=setInterval($,1e4),()=>{M.current&&clearInterval(M.current)}},[_,V,k,R]);const ue=async()=>{try{V.stopWatching(),Y.current&&(clearTimeout(Y.current),Y.current=void 0),ae.current&&(clearTimeout(ae.current),ae.current=void 0),V.topDirectoryArray=[],h(new Set),I(!1),j(0),S([]),J(!0),C(!1);const $=await Ke.openSingleFile();if(!$){H(e("t-no-file-selected"),2500,{kind:"warning"});return}o($.name),s($.name),r([{id:"1."+$.name,label:$.name,path:$.name,fileType:$.kind}]),H(e("t-opening-file"));const O=await Ke.readFile($);Q(O,$.name)}catch($){console.error("Error opening file:",$),H(e("t-error-opening-file"),2e3,{kind:"error"})}},oe=async()=>{try{b(!0);let $=V;$.stopWatching();const O=await $.openDirectory();if(O){H(e("t-file-manager-loading"),1e3,{kind:"info"}),I(!1),j(0),S([]),J(!0),re(1500),de(0),h(new Set);let K=await $.readDirectoryAsArrayOptimized(O,!0,1);const U=(G,Z="",q=0)=>G.map(te=>{const me=we(Z?`${Z}/${te.label}`:te.label),se={...te,id:Fe(me,te.fileType),path:me};return te.fileType==="folder"&&(kt(me,"folder")?se.children=[{id:Fe(`${me}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${me}/[lazy-placeholder]`}]:te.children&&Array.isArray(te.children)&&(se.children=U(te.children,me,q+1))),se});K=U(K),$.watchDirectory(k,1500),$.topDirectoryArray=K,r(K),(!K||K.length===0)&&H(e("t-file-manager-empty-folder"),2e3,{kind:"info"}),setTimeout(async()=>{try{const G={monaco:window.monaco,editor:window.editor,body:document.body,editorContainer:document.getElementById("monaco-editor-container"),previewContainer:document.getElementById("preview")};if(Object.entries(G).filter(([q,te])=>!te).map(([q])=>q).length>0)return;window.editor&&typeof window.editor.getModel=="function"&&window.editor.getModel()&&await nt(!1)}catch(G){console.error("Error re-rendering markdown:",G),G instanceof Error&&G.message?.includes("ownerDocument")}},200)}}catch($){console.error("Error opening folder:",$),H(e("t-error-opening-folder"),2e3,{kind:"error"})}finally{b(!1)}},ze=async()=>{await D("manual_refresh")},He=u.useCallback(async($="manual_operation")=>{await D($)},[D]),Le=u.useCallback(async($,O)=>{C(!0);try{const K=V.getTopDirectoryHandle();if(!K)return;const U=we(O.replace("/[lazy-placeholder]",""));V.lastLazyLoadTime=Date.now();try{const G=await V.getDirectoryHandleByPath(K,U),Z=[],q=[];for await(const[A,N]of G.entries())q.push([A,N]);q.sort((A,N)=>A[0].localeCompare(N[0]));for(const[A,N]of q){const ee=we(`${U}/${A}`),ne=Fe(ee,N.kind);if(N.kind==="file")Z.push({id:ne,label:A,fileType:"file",path:ee});else{const fe=kt(ee,"folder")?[{id:Fe(`${ee}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${ee}/[lazy-placeholder]`}]:void 0;Z.push({id:ne,label:A,fileType:"folder",path:ee,children:fe})}}const te=A=>A.map(N=>we(N.path)===U&&N.fileType==="folder"?{...N,children:Z}:N.children&&Array.isArray(N.children)?{...N,children:te(N.children)}:N),me=Array.isArray(n)?n:[],se=te(me);V.topDirectoryArray=se,r(se),h(A=>new Set([...A,U]))}catch(G){console.error("懒加载文件夹失败:",G)}}catch(K){console.error("懒加载出错:",K)}finally{setTimeout(()=>{C(!1)},1e3)}},[V,n]);u.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current),ae.current&&clearTimeout(ae.current),M.current&&clearInterval(M.current),V.stopWatching()},[]),u.useEffect(()=>{V.watchInterval!==null&&console.log("Watcher active, health status:",_)},[g,_]);const it={width:"53%",height:"6svh",mb:"10px"},Be=Ge(At)({backgroundColor:"transparent"}),Rt=u.useCallback($=>{s($),(!$||$.trim()==="")&&(o(""),Ke.fileHandle&&(Ke.fileHandle=null),console.log("Cleared current editing file state due to file move/rename"))},[Ke]);return u.createElement(u.Fragment,null,u.createElement("style",null,`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `),u.createElement(nn,{PaperProps:{style:{pointerEvents:"all",zIndex:99999}},keepMounted:!0,ModalProps:{disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,style:{pointerEvents:l||d?"none":"all"},BackdropComponent:$=>u.createElement(Be,{onDrop:()=>{setTimeout(()=>{window._setIsDragging(!1)},30)},...$,className:"pointed-through-backdrop"})},anchor:"right",autoFocus:!1,open:sr(),onClose:x(!1)},u.createElement(z,{sx:{overflow:"hidden",background:he.palette.mode==="light"?"#F9F9F9":"dark",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",height:"100svh"}},u.createElement(z,{sx:{width:"4.6svw",height:"100svh",display:"flex",background:he.palette.mode==="light"?"#eeeeee":"#414141",alignItems:"center",justifyContent:"center"}},u.createElement(Ur,{sx:{width:60,height:"100vh",alignItems:"center",paddingTop:2}},u.createElement(dt,{icon:u.createElement(Vr,null),onClick:()=>Dt(!1)}),u.createElement(dt,{icon:l?u.createElement(Jr,{sx:{transform:"rotate(45deg)"}}):u.createElement(Gr,{sx:{transform:"rotate(45deg)"}}),onClick:()=>m(!l),tooltipText:"🧷"+e("t-file-manager-pinned")}),u.createElement(dt,{icon:u.createElement(qr,null),onClick:ue,tooltipText:"📁"+e("t-file-manager-open-file")}),u.createElement(dt,{tooltipText:"📁"+e("t-file-manager-open-folder"),icon:u.createElement(Xr,null),onClick:oe}),u.createElement(dt,{tooltipText:"📑"+e("t-file-manager-saveAs"),icon:u.createElement(Yr,null),onClick:()=>Ke.saveAsFile(gt())}))),u.createElement(z,{sx:{width:"23svw",height:"100svh",display:"flex",flexDirection:"column"}},u.createElement(z,{sx:{width:"23svw",height:"10svh",alignItems:"center",mt:"4px",justifyContent:"center"},className:"FLEX COW ALI-CEN JUS-CEN"},u.createElement(ke,{sx:{mr:"10px",fontSize:"17px"},color:he.palette.info.contrastText},e("t-file-manager-syncLocal")),u.createElement(Zo,{checked:pe().basic.fileEditLocal,size:"small",inputProps:{"aria-label":"controlled"},onChange:w})),u.createElement(z,{className:"FLEX ALI-CEN JUS-CEN",sx:{display:"flex",height:"98%",alignContent:"center",justifyContent:"center",marginBottom:"20svh"}},n.length!=0?u.createElement(u.Fragment,null,u.createElement(mi,{sx:{width:"100%",height:"100%"}},u.createElement(di,{folderManager:V,fillText:Q,setIsDragging:f,fileDirectoryArr:n,onRefresh:ze,onManualRefresh:He,currentEditingFile:i,onFileSelect:Rt,onLoadLazily:Le}))):u.createElement(u.Fragment,null,u.createElement(z,{className:"FLEX COL ALI-CEN JUS-CEN",sx:{width:"100%"}},p&&u.createElement(z,{sx:{mb:2,display:"flex",alignItems:"center",gap:1}},u.createElement("div",{style:{animation:"spin 1s linear infinite",fontSize:"1.2rem",color:he.palette.primary.main}},"⟳"),u.createElement(ke,{variant:"body2",color:"primary"},e("t-file-manager-loading"))),u.createElement(ke,null,pe().basic.fileEditLocal?a:""),u.createElement(ve,{sx:it,onClick:ue,variant:"contained",color:"primary",disabled:p},e("t-file-manager-open-file")),u.createElement(ve,{sx:it,variant:"contained",color:"primary",onClick:oe,disabled:p},e("t-file-manager-open-folder")),u.createElement(ve,{sx:it,variant:"contained",onClick:()=>{Ke.saveAsFile(gt())},disabled:p},e("t-file-manager-saveAs")))))))))});function dt({icon:t,onClick:e,tooltipText:n}){const r=Ft(),a=u.createElement(ve,{sx:{width:"4.6svw",height:"4.6svw",backgroundColor:"transparent","&:hover":{backgroundColor:r.palette.action.hover,borderRadius:"0"},"& .MuiTouchRipple-rippleVisible":{animation:"MuiTouchRipple-keyframes-enter 550ms cubic-bezier(0.4, 0, 0.2, 1)",transform:"scale(3)"},"& .MuiTouchRipple-child":{backgroundColor:r.palette.primary.main}},onClick:e,color:"inherit"},t);return n?u.createElement(Ie,{sx:{whiteSpace:"normal"},TransitionComponent:Hn,enterDelay:200,placement:"left",title:n},a):a}function hi(t){return c.createElement(Kn,{...t})}const yi=Ge(Qr)(({theme:t})=>({color:t.palette.mode==="light"?t.palette.grey[800]:t.palette.grey[200],[`& .${mt.content}`]:{borderRadius:t.spacing(.5),padding:t.spacing(.5,1),margin:t.spacing(.2,0),[`& .${mt.label}`]:{fontSize:"0.89rem",fontWeight:500}},[`& .${mt.iconContainer}`]:{borderRadius:"80%",backgroundColor:t.palette.mode==="light"?rt(t.palette.primary.main,.45):t.palette.primary.dark,color:t.palette.mode==="dark"&&t.palette.primary.contrastText,padding:t.spacing(0,1.2)}})),Ae=c.forwardRef((t,e)=>c.createElement(yi,{...t,slots:{groupTransition:hi,...t.slots},ref:e}));function Ys(){const{t}=Te();function e(n){document.getElementById(n).scrollIntoView()}return c.createElement(c.Fragment,null,c.createElement(z,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:"0 0 30%",minHeight:20,overflowX:"hidden",borderRight:"solid rgba(0, 0, 0, 0.12)"}},c.createElement(Vn,{"aria-label":"customized",defaultExpandedItems:["1_x","2_x"],slots:{endIcon:Jn},sx:{userSelect:"none",minHeight:270,maxWidth:300}},c.createElement(Ae,{slots:{endIcon:yn},onClick:()=>{e("settings_1_x")},itemId:"1_x",label:t("t-basic-settings")},c.createElement(Ae,{slots:{endIcon:Zr},onClick:()=>{e("settings_1_1")},itemId:"1_1",label:t("t-theme-settings")}),c.createElement(Ae,{slots:{endIcon:ea},onClick:()=>{e("settings_1_2")},itemId:"1_2",label:t("t-language-settings")}),c.createElement(Ae,{slots:{endIcon:yn},onClick:()=>{e("settings_1_3")},itemId:"1_3",label:t("t-editor-settings")}),c.createElement(Ae,{slots:{endIcon:ta},onClick:()=>{document.getElementById("settings_1_4").scrollIntoView()},itemId:"1_4",label:t("t-speech-to-text")})),c.createElement(Ae,{onClick:()=>{e("settings_2_x")},itemId:"2_x",label:t("t-advanced-settings")},c.createElement(Ae,{onClick:()=>{e("settings_2_1")},itemId:"2_1",label:t("t-export-settings")}),c.createElement(Ae,{onClick:()=>{e("settings_2_2")},itemId:"2_2",label:t("t-mermaid-settings")}),c.createElement(Ae,{slots:{endIcon:rn},onClick:()=>{e("settings_2_3")},itemId:"2_3",label:t("t-image-settings")})))))}const wi=[{id:"0_1",labelKey:"directory.preface.title"},{id:"1_x",labelKey:"directory.basic.title",children:[{id:"1_1",labelKey:"directory.basic.paragraph"},{id:"1_2",labelKey:"directory.basic.lineBreak"},{id:"1_3",labelKey:"directory.basic.bold"},{id:"1_4",labelKey:"directory.basic.italic"},{id:"1_5",labelKey:"directory.basic.center"},{id:"1_6",labelKey:"directory.basic.customText"},{id:"1_7",labelKey:"directory.basic.exportPdf"}]},{id:"2_x",labelKey:"directory.advanced.title",children:[{id:"2_1",labelKey:"directory.advanced.speechToText"},{id:"2_2",labelKey:"directory.advanced.aiAssistant"},{id:"2_3",labelKey:"directory.advanced.autoFormat"},{id:"2_4",labelKey:"directory.advanced.fileManager"},{id:"2_5",labelKey:"directory.advanced.imageUpload"},{id:"2_6",labelKey:"directory.advanced.syncScroll"},{id:"2_7",labelKey:"directory.advanced.emojiMarket"},{id:"2_8",labelKey:"directory.advanced.collaboration"},{id:"2_9",labelKey:"directory.advanced.tableBuilder"},{id:"2_10",labelKey:"directory.advanced.mindMap"},{id:"2_11",labelKey:"directory.advanced.doubleClick"}]},{id:"3_x",labelKey:"directory.smart.title",children:[{id:"3_1",labelKey:"directory.smart.latex"},{id:"3_2",labelKey:"directory.smart.autoComplete"},{id:"3_3",labelKey:"directory.smart.settings"}]}],bi={"0_1":{title:"前言",content:["你好，朋友，欢迎来到 Markdown 入门指南。本教程将帮助你掌握 Markdown 的基本语法，以及一些进阶的黑科技技巧。","其实要开始写markdown很简单，你可以退出指南，按下`Ctrl+J`一键呼出AI，或者在编辑区右键呼出菜单后，点击AskAI即可开始写作,别忘了写完后`Ctrl+S`保存文本到浏览器缓存。","","如果你喜欢这个编辑器，不妨给个Star呗，[Github](https://github.com/LiWeny16/MarkdownOnline?tab=readme-ov-file)"]},"1_1":{title:"段落和标题",content:["Markdown 段落的写法很简单，只需直接输入文本即可。例如：","","```\n这是一个段落。\n```","","段落之间需要空行，否则会被认为是同一段内容。","","标题更简单，对这一行按下`Ctrl+1`即可"]},"1_2":{title:"换行",content:["Markdown 默认不会自动换行，如果你想换行，可以使用 `<br>`。","```\n这是第一行。<br>这是第二行。\n```"]},"1_3":{title:"加粗",content:["Markdown 可以使用 `**` 或 `__` 来加粗文本。例如：","","```\n**这是加粗的文本**\n```","","效果： **这是加粗的文本**"]},"1_4":{title:"斜体",content:["Markdown 使用 `*` 或 `_` 让文本变成斜体。例如：","","```\n*这是斜体文本*\n```","","效果： *这是斜体文本*"]},"1_5":{title:"居中",content:["在新的一行，按下`/`斜杠，输入any-center-text回车,即可得到居中文本","同理,居右是这样写",'```\n<p style="text-align: right">居右</p>\n```',"","或者直接`Ctrl+E`进行居中，`Ctrl+R`进行居右"]},"1_6":{title:"任意字体",content:["在新的一行，按下`/`斜杠，输入any-text回车,即可得到你想要它什么样子他就是什么样子的文本了！"]},"1_7":{title:"导出PDF",content:["右上角更多按钮里有导出功能，或者直接使用快捷键`Ctrl+P`","","在导出PDF的时候你经常会发现分割页往往不尽人意，所以这里提供`/page-breaker`来分割每个页","或者在需要分割的地方打出`|---|`即可"]},"2_1":{title:"语音转文字",content:["免费、不限时长、高准确率的语音转文字，还不快来试试！","","快捷键:`Ctrl+Alt+V`"]},"2_2":{title:"AI智能助手",content:["AI 可以帮助你自动生成 Markdown 格式的内容，例如自动排版、语法检查、代码格式化等。","","在任何时候，我都强烈推荐你询问AI具体的markdown语法是什么，这样更加高效","","快捷键：`Ctrl+J`"]},"2_3":{title:"自动排版",content:["Markdown 支持自动排版，可以使用工具如 `Prettier` 或 `Markdownlint` 来优化排版，使文档更易读。","","快捷键:`Shift+Alt+F`"]},"2_4":{title:"文件管理器",content:["编辑器引用了全新文件接口，可以直接对本地文件夹进行打开和修改，打开文件夹后，粘贴到编辑器的图片将会被自动保存到当前目录的image文件夹下","","快捷键:`Ctrl+Alt+F`(可能和微信冲突，请修改微信的热键)，或在右上角更多里打开"]},"2_5":{title:"图片上传",content:["简单易懂，复制图片文件然后粘贴到编辑器即可，若没有打开文件夹图片自动保存到浏览器缓存中","","图片可以批量复制上传，并且支持快捷键`Ctrl+E`调整居中，默认样式解释如下:","",`> #w代表大小，#c代表居中(center)，
#s代表阴影(shadow)，#r代表居右(right)`]},"2_6":{title:"同步滚动",content:["随时开启，高度智能的同步滚动算法，比起VScode降维打击的开关功能","","快捷键`Ctrl+Q`"]},"2_7":{title:"表情包超市",content:["表情包，任你挑选😍","","编辑区右键菜单，表情包超市"]},"2_8":{title:"协同办公",content:["两台设备同一个热点或支持内网共享的WIFI下(手机热点默认都支持)，即可急速分享文本和文件！","","在哪：右上角更多按钮，协同办公"]},"2_9":{title:"表格",content:["新的一行按下`/`，输入table即可看到动态表格功能！","","例如：`/table3` 创建3x3表格，`/table3x5` 创建3行5列表格","","支持任意行列数，如 `/table2`、`/table4x6` 等","","旧版本：编辑区按F1，输入table#3#2也依然可用"]},"2_10":{title:"流程图，思维导图...",content:["新的一行按下`/`输如mermaid即可看到联想的思维导图、流程图...等等"]},"2_11":{title:"双击定位",content:["双击右边渲染后文本，即可定位到左边原文本，太太太方便啦！！"]},"3_1":{title:"LaTex数学公式",content:["新起一行打`/latex`后回车，在latex中间按下`\\`即可开始享用智能语法提示！","","快捷键:`Ctrl+M`"]},"3_2":{title:"智能提示",content:["估计认真看过教程的你已经发现了，新的一行打一个`/`即可获得大量高频使用的markdown功能，有图片、公式、文本、流程图、列表..."]},"3_3":{title:"设置",content:["设置界面提供了双主题、以及一些高频使用的功能，如字体，语言等等"]}},xi={"0_1":{title:"Preface",content:["Hello, friend! Welcome to the Markdown Getting Started Guide. This tutorial will help you master the basic syntax of Markdown, as well as some advanced tips and tricks.","Actually, getting started with Markdown is simple. You can exit the guide, press `Ctrl+J` to summon AI, or right-click in the editing area to bring up the menu and click AskAI to start writing. Don't forget to press `Ctrl+S` to save your text to browser cache when you're done.","","If you like this editor, please give it a Star! [Github](https://github.com/LiWeny16/MarkdownOnline?tab=readme-ov-file)"]},"1_1":{title:"Paragraphs and Headers",content:["Writing Markdown paragraphs is simple, just type text directly. For example:","","```\nThis is a paragraph.\n```","","Paragraphs need blank lines between them, otherwise they will be considered as the same content.","","Headers are even simpler, just press `Ctrl+1` on the line"]},"1_2":{title:"Line Breaks",content:["Markdown doesn't automatically break lines by default. If you want to break lines, you can use `<br>`.","```\nThis is the first line.<br>This is the second line.\n```"]},"1_3":{title:"Bold",content:["Markdown can use `**` or `__` to make text bold. For example:","","```\n**This is bold text**\n```","","Effect: **This is bold text**"]},"1_4":{title:"Italic",content:["Markdown uses `*` or `_` to make text italic. For example:","","```\n*This is italic text*\n```","","Effect: *This is italic text*"]},"1_5":{title:"Center Alignment",content:["On a new line, press `/` slash, type any-center-text and hit Enter to get centered text","Similarly, for right alignment:",'```\n<p style="text-align: right">Right aligned</p>\n```',"","Or directly use `Ctrl+E` for center, `Ctrl+R` for right alignment"]},"1_6":{title:"Custom Font",content:["On a new line, press `/` slash, type any-text and hit Enter to get text that looks exactly how you want it to!"]},"1_7":{title:"Export PDF",content:["Export function is available in the More button at the top right, or use the shortcut `Ctrl+P`","","When exporting PDF, you often find page breaks are not ideal, so here's `/page-breaker` to split pages","Or type `|---|` where you need to split"]},"2_1":{title:"Speech to Text",content:["Free, unlimited duration, high accuracy speech-to-text. Come and try it!","","Shortcut: `Ctrl+Alt+V`"]},"2_2":{title:"AI Smart Assistant",content:["AI can help you automatically generate Markdown formatted content, such as auto-formatting, syntax checking, code formatting, etc.","","At any time, I strongly recommend asking AI about specific markdown syntax, which is more efficient","","Shortcut: `Ctrl+J`"]},"2_3":{title:"Auto Formatting",content:["Markdown supports auto-formatting. You can use tools like `Prettier` or `Markdownlint` to optimize formatting and make documents more readable.","","Shortcut: `Shift+Alt+F`"]},"2_4":{title:"File Manager",content:["The editor uses a brand new file interface that can directly open and modify local folders. After opening a folder, pasted images will be automatically saved to the image folder in the current directory","","Shortcut: `Ctrl+Alt+F` (may conflict with WeChat, please modify WeChat's hotkeys), or open it in the More menu at the top right"]},"2_5":{title:"Image Upload",content:["Simple and intuitive, copy image files and paste them into the editor. If no folder is opened, images are automatically saved to browser cache","","Images can be batch copied and uploaded, with shortcut `Ctrl+E` for center alignment. Default style explanation:","",`> #w represents size, #c represents center,
#s represents shadow, #r represents right alignment`]},"2_6":{title:"Synchronized Scrolling",content:["Always available, highly intelligent synchronized scrolling algorithm, a dimensional upgrade over VSCode's simple toggle function","","Shortcut: `Ctrl+Q`"]},"2_7":{title:"Emoji Market",content:["Emojis, pick whatever you like😍","","Right-click menu in editing area, Emoji Market"]},"2_8":{title:"Collaboration",content:["Two devices on the same hotspot or supported WIFI under the same network (default all phones support hotspots), can share text and files instantly!","","Where: More button at the top right, Collaboration"]},"2_9":{title:"Tables",content:["On a new line, press `/` and type table to see dynamic table features!","","Examples: `/table3` creates 3x3 table, `/table3x5` creates 3-row 5-column table","","Supports any row/column size like `/table2`, `/table4x6`, etc.","","Legacy version: Press F1 in editing area, type table#3#2 still works"]},"2_10":{title:"Flowcharts, Mind Maps...",content:["On a new line, press `/` and type mermaid to see suggestions for mind maps, flowcharts... and more"]},"2_11":{title:"Double-click Positioning",content:["Double-click on the rendered text on the right to locate the original text on the left. So convenient!!!"]},"3_1":{title:"LaTeX Math Formulas",content:["Start a new line, type `/latex` and hit Enter. Press `\\` in the latex environment to enjoy smart syntax suggestions!","","Shortcut: `Ctrl+M`"]},"3_2":{title:"Smart Suggestions",content:["If you've read the tutorial carefully, you've probably noticed that typing `/` on a new line gives you a lot of frequently used markdown features: images, formulas, text, flowcharts, lists..."]},"3_3":{title:"Settings",content:["The settings interface provides dual themes and some frequently used features, such as fonts, languages, etc."]}};function Ci(t){return t==="en"?xi:bi}function ki(t){return t.flatMap(e=>[`# ${e.title}`,...e.content])}function fr(t,e,n){return t.map(r=>u.createElement(Ae,{key:r.id,itemId:r.id,label:n(r.labelKey),slots:{endIcon:r.children?void 0:ft},onClick:()=>{r.id.slice(-1)!=="x"&&e([r.id])}},r.children&&fr(r.children,e,n)))}function vi(t){const{t:e}=Te();return u.createElement(z,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:"0 0 35%",minHeight:20,overflowX:"hidden",borderRight:"solid rgba(0, 0, 0, 0.12)"}},u.createElement(Vn,{"aria-label":"customized",defaultExpandedItems:["1_x"],slots:{endIcon:ft},sx:{userSelect:"none",minHeight:270,maxWidth:300}},fr(wi,t.setActiveId,e)))}function Ei({activeId:t}){const{i18n:e}=Te(),n=e.language||"zh",r=Ci(n),a=t.map(i=>r[i]).filter(Boolean),o=ki(a);return u.createElement(z,{className:"transparent-scrollbar",sx:{width:"100%",height:"100%",margin:"10px",overflowY:"scroll"}},u.createElement(z,{className:` markdown-body ${Se()==="light"?"markdown-body-light":"markdown-body-dark"} transparent-scrollbar`,sx:{ml:"10px",backgroundColor:Se()==="light"?"#F8FAFB":"#393939"}},o.map((i,s)=>u.createElement("div",{key:s,dangerouslySetInnerHTML:{__html:Tt().render(i)}}))))}function Si(t){const[e,n]=u.useState(["0_1"]);Te();const r=Se();return u.createElement(u.Fragment,null,u.createElement(Mt,{fullScreen:!1,maxWidth:!1,open:t.open,onClose:t.onClose,sx:{height:"100vh"}},u.createElement(z,{className:"transparent-scrollbar",sx:{background:r==="light"?"#F8FAFB":"",padding:"1rem",height:"58vh",width:"58vw"}},u.createElement(z,{className:"transparent-scrollbar",sx:{height:"53vh",display:"flex",background:r==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRradius:"50px",borderRadius:"5px",overflow:"hidden"}},u.createElement(vi,{setActiveId:n}),u.createElement(Ei,{activeId:e})))),u.createElement(Jn,null))}const Ti=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,Ii=c.lazy(()=>Ve(()=>import("./Menu-a9351412.js"),["./Menu-a9351412.js","./react-2c2ad9dc.js","./@babel-e5f941c7.js","./@mui-fd8f6c35.js","./@emotion-ac376cc0.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./stylis-79144faa.js","./react-transition-group-34e06d3e.js","./react-dom-c6aabcbc.js","./scheduler-765c72db.js","./@popperjs-61ffd834.js","./clsx-0839fdbe.js","./prop-types-d9a440a1.js","./mobx-react-7d4c1e4f.js","./mobx-3741033e.js","./mobx-react-lite-afa2ccc5.js","./use-sync-external-store-b06bb362.js","./react-i18next-65ca089e.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./i18next-c75e253c.js","./@monaco-editor-80ea4237.js","./state-local-dd516420.js","./react-resizable-942463f8.js","./react-draggable-966ae795.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-ac00b891.js"],import.meta.url)),Di=(t,e)=>{Ti.sleep(e).then(()=>{window.location.href=t})},Mi=()=>{Di("https://bigonion.cn",300)},Fi="0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12);",Ai=240,$i=at(t=>{const{t:e}=Te(),n=Ft(),{window:r}=t,[a,o]=c.useState(!1),[i,s]=c.useState(!1),l=()=>{o(p=>!p)},m=r!==void 0?()=>r().document.body:void 0,d=()=>{H("此功能仍然在开发中",3e3,{kind:"info"})},f=c.createElement(z,{onClick:l,sx:{textAlign:"center",height:"100%",bgcolor:"black"}},c.createElement(ke,{variant:"h2",sx:{fontSize:"20px",my:2,color:"wheat",textAlign:"center",boxShadow:Fi}},"Markdown+ Online View"),c.createElement(sa,{sx:{height:"100%",bgcolor:"background.paper"}},c.createElement(yt,null,c.createElement(wt,{onClick:Mi},c.createElement(bt,null,c.createElement(xt,null,c.createElement(ca,null))),c.createElement(Ct,{primary:"Home",secondary:""}))),c.createElement(yt,null,c.createElement(wt,{onClick:d},c.createElement(bt,null,c.createElement(xt,null,c.createElement(rn,null))),c.createElement(Ct,{primary:"Photos",secondary:""}))),c.createElement(yt,null,c.createElement(wt,{onClick:qt},c.createElement(bt,null,c.createElement(xt,null,c.createElement(da,null))),c.createElement(Ct,{primary:"Export",secondary:""}))),c.createElement(yt,null,c.createElement(wt,{onClick:()=>{}},c.createElement(bt,null,c.createElement(xt,null,c.createElement(ua,null))),c.createElement(Ct,{primary:"About",secondary:""})))));return c.createElement(c.Fragment,null,c.createElement(z,{className:"FLEX header-app-bar",style:{transition:"0.5s",flex:"0 0 8.7vh"}},c.createElement(Gn,null),c.createElement(na,{component:"nav",sx:{position:"inherit",justifyContent:"center",zIndex:100,height:"8.7vh",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},c.createElement(ra,null,c.createElement(Me,{color:"inherit",onClick:l,sx:{mr:200,display:{sm:"none"}}},c.createElement(aa,null)),c.createElement(oa,{sx:{color:n.palette.mode=="light"?"black":"white",display:{xs:"none",md:"flex"},transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",mr:1}}),c.createElement(ke,{variant:"h1",component:"a",fontFamily:"monospace",href:"/",sx:{flexGrow:1,display:{xs:"none",sm:"block"},color:n.palette.mode==="light"?n.palette.primary.contrastText:n.palette.secondary.contrastText,fontFamily:"emoji",letterSpacing:".3rem",textDecoration:"none"}},c.createElement("h2",{style:{fontSize:"28px"}},"Markdown+ Online View")),c.createElement(z,{sx:{display:{xs:"none",sm:"flex",flexDirection:"row"}}},c.createElement(Kt,{href:"https://bigonion.cn",startIcon:c.createElement(ia,null)},e("t-home")),c.createElement(Kt,{onClick:()=>{s(!0)},startIcon:c.createElement(ft,null)},e("t-about")),c.createElement(c.Suspense,{fallback:c.createElement(Kt,{open,endIcon:c.createElement(la,null)},e("t-more"))},c.createElement(Ii,null)),c.createElement(Xo,null),c.createElement(pi,null)))),c.createElement(z,{sx:{display:{xs:"flex",sm:"none"}},component:"nav"},c.createElement(nn,{container:m,variant:"temporary",open:a,onClose:l,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:Ai}}},f)),c.createElement(Si,{open:i,onClose:()=>{s(!1)}})))});async function sn(t=null,e=!0){const n=Xe.t;if(Ue().unmemorable.previewMode){H(n("t-preview-mode-error"),2500,{kind:"error"});return}let r=gt(),a="";if(e&&r!="null")try{Ra(r),pe().basic.fileEditLocal?await new rr().saveFileSilently(r)?a=n("t-save-success-local"):a=n("t-save-success-browser-no-local"):a=n("t-save-success-browser"),H(a)}catch{H(n("t-rejection-error"),2500,{kind:"error"})}else sn()}async function Li(){return await tr().then(t=>t?t[0]?.contentText===gt():!1)}function gr(t,e){if(pe().basic.syncScroll)H("同步滚动已关闭 🧐 ",2e3),It({basic:{syncScroll:!1}});else{H("同步滚动已开启 😍 ",2e3);const n=t.getScrollTop();t.setScrollTop(n+.3),t.setScrollTop(n-.3);const r=t.getVisibleRanges();if(r.length>0){const o=r[0].startLineNumber,i=document.getElementById("view-area");o==1&&i.scrollTo({top:0,behavior:"smooth"})}It({basic:{syncScroll:!0}})}}function pr(t,e){sr()?Dt(!1):Dt(!0)}function hr(t,e){Ue().unmemorable.aiPanelState?Pe({unmemorable:{aiPanelState:!1}}):(Pe({unmemorable:{selectEndPos:{posx:window.innerWidth/4,posy:window.innerHeight/2.6}}}),Pe({unmemorable:{aiPanelState:!0}}))}let Ri=(t,e=!0,n)=>{const r=new webkitSpeechRecognition||new SpeechRecognition;let a=!1;return r.lang=t,r.continuous=!0,r.interimResults=!1,e&&r.start(),r.onstart=()=>{a=!0},r.onresult=o=>{let i=o.results[o.results.length-1][0].transcript;i=i.replace(/ /g,""),window._speechData.speechResult=i,n(i.length),a===!1&&r.stopRecognition()},r.onerror=function(o){o.error=="not-allowed"?H("语音权限被拒绝，世界，拒绝了我...",4500):console.log("语音识别错误:",o.error)},r.onend=()=>{console.log(a),a&&r.start()},r.stopRecognition=()=>{r.stop(),a=!1},{recognition:r,recognizing:a}};const Qs=[["zh-CN","普通话"],["en-US","English"],["ja-JP","日本語"],["fr-ch","法语（瑞士）"],["ko","韩语"]];function yr(t,e){const n=pe().basic.speechLanguage??"zh-CN";let r=a=>{ot(window._speechData.speechResult,!0)};if(window._speechData.processing)H("语音识别已关闭，我不听...",2e3),window._speechData.processing=!1,window._speechData.speech.stopRecognition(),window._speechData.speech=null,window._speechData.speechResult="";else{H("语音识别已开启，嗯你说，我在听...",3e3),window._speechData.processing=!0;let{recognition:a}=Ri(n,!0,r);window._speechData.speech=a}}function Pi(){document.addEventListener("keydown",t=>{t.ctrlKey&&t.key.toLowerCase()=="q"&&(t.stopPropagation(),t.preventDefault(),gr(window.editor)),t.ctrlKey&&(t.altKey||t.shiftKey)&&t.key.toLowerCase()=="f"&&(t.stopPropagation(),t.preventDefault(),pr()),t.ctrlKey&&t.key.toLowerCase()=="s"&&(t.stopPropagation(),t.preventDefault(),sn()),t.ctrlKey&&t.key.toLowerCase()=="j"&&(t.stopPropagation(),t.preventDefault(),hr()),t.ctrlKey&&t.altKey&&t.key.toLowerCase()=="v"&&(t.stopPropagation(),t.preventDefault(),yr())},!0)}const _n=pe().advanced.imageSettings.basicStyle,Wt=new Ne,_i=cr();function ji(t,e){t.getContainerDomNode().addEventListener("paste",async n=>{await Ni(n).then(async r=>{let a="";if(r){if(!Wt.getTopDirectoryHandle()||pe().advanced.imageSettings.modePrefer==="vf"){let o=new Date().getTime();for(let i=0;i<=r.length-1;i++)a+=`![${_n}](/vf/${o+i})`;Pa(r,o),_i.refreshImages()}else{let o=pe().advanced.imageSettings.imgStorePath;o=o.slice(-1)==="/"?o.slice(0,o.length-1):o;for(let i=0;i<=r.length-1;i++){let s=await Wt.writeBase64ImageFile(Wt.getTopDirectoryHandle(),".png",r[i],o);a+=`![${_n}](.${o}/${s}.png)`}}ot(a,!0)}})},!0)}function Ni(t){return new Promise(e=>{let r=t.clipboardData.items;const a=r.length;let o=[];for(let i=0;i<r.length;i++){let s=r[i];if(s.kind=="file"){t.preventDefault(),t.stopPropagation();let l=s.getAsFile(),m=new FileReader;m.onload=function(f){typeof f.target.result=="string"&&o.push(f.target.result),i===a-1&&e(o)};const d=l.type.split("/")[1];Lt.includes(d)&&m.readAsDataURL(l)}}})}let Ut=!1,vt=0;function zi(t=2){let e,n;vt++,Ut?(clearTimeout(e),e=setTimeout(function(){nt(),vt=0},300)):(clearTimeout(n),vt>=t?(Ut=!0,nt(),n=setTimeout(()=>{Ut=!1,vt=0},200)):typeof window.markdownitIncrementalDOM=="function"&&nt())}function Vt(){return document.getElementsByClassName("ibwrapper")[0]?document.getElementsByClassName("ibwrapper")[0].children[0].value:""}function Hi(){console.log(Vt().split("#"));const t=Vt().split("#")[1],e=Vt().split("#")[2];ot(Bi(t,e),!0)}function Bi(t,e){if(!t||!e)return"";let n="| ";for(let r=0;r<e;r++)n+=`Header  ${r+1} | `;n+=`
|`;for(let r=0;r<e;r++)n+="--- | ";for(let r=0;r<t;r++){n+=`
| `;for(let a=0;a<e;a++)n+=` Cell ${r+1}-${a+1} | `}return n}const jn=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,Oi=(await T("https://cdn.jsdmirror.com/npm/html2canvas@1.4.1/+esm")).default;function Ki(t=3,e="markdown.jpeg"){let n=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div id="exportBox" style="width:64vw" class="markdown-body markdown-body-${Se()==="light"?"light":"dark"}">${n}</div>`,jn.sleep(250).then(()=>{Oi(document.getElementById("exportBox"),{scale:t}).then(r=>{let a=r.toDataURL("image/png",.6);var o=document.createElement("a");o.download=e,o.href=a,o.click()}),jn.sleep(2e3).then(()=>{window.location.reload()})})}function Wi(){ot(`|---|
`,!0)}function Ui(t,e){const n=t.getPosition();n.column==1&&(ot(`$$

$$`,!0),t.setPosition({column:1,lineNumber:n.lineNumber+1}))}function Vi(t,e){lr()==="on"?Sn("off"):Sn("on")}function wr(t,e){const r=t.getValue().split(`
`),a=e.lineNumber-1;let o="",i=!1,s=-1,l=-1;const m=new Set(["br","img","input","hr","meta","link"]);for(let d=a;d>=0;d--){const f=r[d].match(/<([a-zA-Z]+)(\s+[^>]*)?>/);if(f){if(o=f[1],m.has(o)||r[d].includes("/>"))continue;s=d,i=!0;break}}if(!i)return!1;for(let d=a;d<r.length;d++){const f=r[d].match(new RegExp(`</${o}>`));if(f){f[0],l=d;break}}return s!==-1&&l!==-1&&s<=a&&a<=l}function Ji(t,e){const n=t.getSelection();if(!n)return;const r=t.getModel();if(!r)return;let o=r.getValueInRange(n).trim(),i;const s=n.getStartPosition();wr(r,s)?i=o.startsWith("<b>")&&o.endsWith("</b>")?o.slice(3,-4):`<b>${o}</b>`:i=o.startsWith("**")&&o.endsWith("**")?o.slice(2,-2):`**${o}**`;var m=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);t.executeEdits("my-source",[{range:m,text:i,forceMoveMarkers:!1}]);const d=new e.Selection(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn+i.length);t.setSelection(d)}function Gi(t,e){const n=t.getSelection(),r=t.getModel(),a=n.startLineNumber,o=r.getLineContent(a),i=o.length;let s="",l=i+1,m=i+1;const d=/\!\[(.*?)\]\((.*?)\)/g;if(d.test(o)){const g=o.match(d);console.log(g);let h=o.replace(d,(C,E,S)=>E.includes("#r")?`![${E.replace("#r","")}](${S})`:`![${E}#r](${S})`);const v=new e.Range(a,1,a,o.length+1);t.executeEdits("center-action",[{range:v,text:h,forceMoveMarkers:!0}]);return}const f=o.slice(-2);f===">>"?(s="",l=i-1):f==="||"?(s=">>",l=i-1):s=">>";const p=new e.Range(a,l,a,m);t.executeEdits("my-source",[{range:p,text:s,forceMoveMarkers:!0}]);const b=new e.Selection(a,l+s.length,a,l+s.length);t.setSelection(b)}function qi(t,e){const n=t.getSelection(),r=Ma();if(!n)return;const a=t.getModel(),o=n.startLineNumber,i=a.getLineContent(o),s=i.length;let l="",m=s+1,d=s+1;const f=/\!\[(.*?)\]\((.*?)\)/g;if(f.test(i)){const v=i.match(f);console.log(v);let C=i.replace(f,(S,F,I)=>F.includes("#c")?`![${F.replace("#c","")}](${I})`:`![${F}#c](${I})`);const E=new e.Range(o,1,o,i.length+1);t.executeEdits("center-action",[{range:E,text:C,forceMoveMarkers:!0}]);return}const p=/```mermaid([\s\S]*?)```/g;if(p.test(r)){let v=r.replace(p,E=>`<center> 
      
${E}
</center>`);const C=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);t.executeEdits("center-action",[{range:C,text:v,forceMoveMarkers:!0}]);return}const b=i.slice(-2);b==="||"?(l="",m=s-1):b===">>"?(l="||",m=s-1):l="||";const g=new e.Range(o,m,o,d);t.executeEdits("my-source",[{range:g,text:l,forceMoveMarkers:!0}]);const h=new e.Selection(o,m+l.length,o,m+l.length);t.setSelection(h)}function Xi(t,e){const n=t.getSelection(),r=t.getModel();let a=r.getValueInRange(n),o;wr(r,n.getStartPosition())?a.startsWith("<i>")&&a.endsWith("</i>")?o=a.replace(/^<i>/,"").replace(/<\/i>$/,""):o=`<i>${a}</i>`:a.startsWith("*")&&a.endsWith("*")?o=a.slice(1,-1):o=`*${a}*`;var s=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:s,text:o,forceMoveMarkers:!1}]),o!==a){const l=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+o.length);t.setSelection(l)}}function Yi(t,e){const n=t.getSelection();let a=t.getModel().getValueInRange(n),o;a.startsWith("<u>")&&a.endsWith("</u>")?o=a.slice(3,-4):o=`<u>${a}</u>`;var s=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:s,text:o,forceMoveMarkers:!1}]),o!==a){const l=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+o.length);t.setSelection(l)}}function Qi(t,e){const n=t.getSelection();let a=t.getModel().getValueInRange(n),o;a.startsWith("~~")&&a.endsWith("~~")?o=a.slice(2,-2):o=`~~${a}~~`;var s=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:s,text:o,forceMoveMarkers:!1}]),o!==a){const l=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+o.length);t.setSelection(l)}}function Et(t,e,n){const r=t.getSelection(),a=new e.Range(r.startLineNumber,1,r.startLineNumber,1),o=t.getModel().getLineContent(r.startLineNumber),i=/^(#+) /,s=o.match(i);if(!(["$"].includes(o[0])||o.match("```")))if(s&&s[1].length===n){console.log(o);const l=o.slice(s[0].length);t.executeEdits("",[{range:new e.Range(r.startLineNumber,1,r.startLineNumber,o.length+1),text:l}])}else{const l="#".repeat(n)+" ",m=s?new e.Range(r.startLineNumber,1,r.startLineNumber,s[0].length+1):a;t.executeEdits("",[{range:m,text:l}])}}const Zi=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function el(t,e){const n={save:e.KeyMod.CtrlCmd|e.KeyCode.KeyS,quotation:e.KeyMod.Shift|e.KeyCode.Quote,format:e.KeyMod.Shift|e.KeyCode.KeyF,pageBreaker:e.KeyMod.CtrlCmd|e.KeyMod.Alt|e.KeyCode.Enter,latexBlock:e.KeyMod.CtrlCmd|e.KeyCode.KeyM,askAI:e.KeyMod.CtrlCmd|e.KeyCode.KeyJ,voice2Words:e.KeyMod.CtrlCmd|e.KeyMod.Alt|e.KeyCode.KeyV,syncScroll:e.KeyMod.CtrlCmd|e.KeyCode.KeyQ,fileManager:e.KeyMod.CtrlCmd|e.KeyMod.Shift|e.KeyCode.KeyF,markdownTextEditFastKey:{bold:e.KeyMod.CtrlCmd|e.KeyCode.KeyB,italics:e.KeyMod.CtrlCmd|e.KeyCode.KeyI,underline:e.KeyMod.CtrlCmd|e.KeyCode.KeyU,alignCenter:e.KeyMod.CtrlCmd|e.KeyCode.KeyE,alignRight:e.KeyMod.CtrlCmd|e.KeyCode.KeyR,deleteLine:e.KeyMod.CtrlCmd|e.KeyCode.Backquote,h1:e.KeyMod.CtrlCmd|e.KeyCode.Digit1,h2:e.KeyMod.CtrlCmd|e.KeyCode.Digit2,h3:e.KeyMod.CtrlCmd|e.KeyCode.Digit3,h4:e.KeyMod.CtrlCmd|e.KeyCode.Digit4}};t.addAction({id:"show.emojiPicker",label:"打开表情包超市 🤪",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{Vi()}}),t.addAction({id:"insert.tableAny",label:"插入任意行和列,格式: table#x#x",keybindings:[],run:()=>{Hi()}}),t.addAction({id:"reload-no-cache",label:"强制刷新Markdown在线",keybindings:[],run:()=>{window.location.reload(!0)}}),t.addAction({id:"export.asPDF",label:"保存并导出为PDF",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:async()=>{await Li()?qt():(sn(),Zi.sleep(800).then(()=>{qt()}))}}),t.addAction({id:"export.asImg",label:"作为PNG格式的图片导出",keybindings:[],run:()=>{Ki()}}),t.addAction({id:"insert.pageBreaker",label:"插入一个分页符",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Wi()}}),t.addAction({id:"insert.latexBlock",label:"插入一个LaTex语法块",keybindings:[n.latexBlock],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Ui(t)}}),t.addAction({id:"insert.voice2words",label:"语音转文字...嘟...喂...听得见吗....",keybindings:[n.voice2Words],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{yr()}}),t.addAction({id:"command.syncScroll",label:"同步滚动 (开启/关闭)",keybindings:[n.syncScroll],contextMenuGroupId:"navigation",run:()=>{gr(t)}}),t.addAction({id:"command.fileManagerState",label:"文件管理器 (开启/关闭)",keybindings:[n.fileManager],contextMenuGroupId:"navigation",run:()=>{pr()}}),t.addAction({id:"insert.bold",label:"加粗文本",keybindings:[n.markdownTextEditFastKey.bold],contextMenuGroupId:"navigation",run:()=>{Ji(t,e)}}),t.addAction({id:"insert.alignRight",label:"文本居右",keybindings:[n.markdownTextEditFastKey.alignRight],contextMenuGroupId:"navigation",run:()=>{Gi(t,e)}}),t.addAction({id:"insert.alignCenter",label:"文本居中",keybindings:[n.markdownTextEditFastKey.alignCenter],contextMenuGroupId:"navigation",run:()=>{qi(t,e)}}),t.addAction({id:"insert.italics",label:"斜体",keybindings:[n.markdownTextEditFastKey.italics],run:()=>{Xi(t,e)}}),t.addAction({id:"insert.underline",label:"下划线",keybindings:[n.markdownTextEditFastKey.underline],run:()=>{Yi(t,e)}}),t.addAction({id:"insert.deleteLine",label:"删除线",keybindings:[n.markdownTextEditFastKey.deleteLine],run:()=>{Qi(t,e)}}),t.addAction({id:"insert.h1",label:"标题1",keybindings:[n.markdownTextEditFastKey.h1],run:()=>{Et(t,e,1)}}),t.addAction({id:"insert.h2",label:"标题2",keybindings:[n.markdownTextEditFastKey.h2],run:()=>{Et(t,e,2)}}),t.addAction({id:"insert.h3",label:"标题3",keybindings:[n.markdownTextEditFastKey.h3],run:()=>{Et(t,e,3)}}),t.addAction({id:"insert.h4",label:"标题4",keybindings:[n.markdownTextEditFastKey.h4],run:()=>{Et(t,e,4)}}),t.addAction({id:"reload",label:"重新加载窗口(Reload Window)",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:100,run:()=>{window.location.reload()}}),t.addAction({id:"AI",label:"✨Ask AI",keybindings:[n.askAI],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{hr()}})}function tl(){const t=new Date,e=t.getDate(),n=t.toLocaleString("en-US",{month:"short"}),r=t.getFullYear();return`${e}, ${n}, ${r}`}const nl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).accents1,rl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).delimiters0,al=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).delimeterSizing0,ol=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).greekLetters0,il=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).otherLetters0,ll=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).annotation1,sl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).verticalLayout0,cl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).verticalLayout1,dl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).verticalLayout2,ul=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).overlap1,ml=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).spacing0,fl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).spacing1,gl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).logicAndSetTheory0,pl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).logicAndSetTheory1,hl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).macros0,yl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).bigOperators0,wl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).binaryOperators0,bl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).fractions0,xl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).fractions2,Cl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).binomialCoefficients0,kl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).binomialCoefficients2,vl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).mathOperators0,El=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).mathOperators1,Sl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).sqrt1,Tl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).relations0,Il=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).negatedRelations0,Dl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).arrows0,Ml=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).extensibleArrows1,Fl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).braketNotation1,Al=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).classAssignment1,$l=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).color2,Ll=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).font0,Rl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).font1,Pl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).size0,_l=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).style0,jl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).symbolsAndPunctuation0,Nl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).debugging0,zl=(await T("https://cdn.jsdelivr.net/npm/react-photo-view-cdn@0.0.4/esm/latex.map.min.js")).envs;async function Hl(t,e){e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:(s,l,m)=>{const d=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}),f=s.getValueInRange({startLineNumber:l.lineNumber,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column}),p={startLineNumber:l.lineNumber,startColumn:l.column-1,endLineNumber:l.lineNumber,endColumn:l.column},b=[{pattern:/\/table(\d+)x(\d+)$/i,type:"complete"},{pattern:/\/table(\d+)x$/i,type:"partial"},{pattern:/\/table(\d+)$/i,type:"square"},{pattern:/\/table$/i,type:"basic"}];for(const g of b){const h=f.match(g.pattern);if(h&&!Yt(d)){const v={startLineNumber:l.lineNumber,startColumn:l.column-f.length+f.lastIndexOf("/"),endLineNumber:l.lineNumber,endColumn:l.column};let C=[];if(g.type==="complete"){const E=parseInt(h[1]),S=parseInt(h[2]);E>0&&S>0&&E<=20&&S<=20&&C.push({label:`/table${E}x${S} (${E}行${S}列表格)`,detail:`插入一个${E}行${S}列的表格`,kind:e.languages.CompletionItemKind.Function,insertText:Nn(E,S),insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:v})}else if(g.type==="partial"){const E=parseInt(h[1]);E>0&&E<=20&&C.push({label:`/table${E}x... (${E}行表格)`,detail:`继续输入列数，如 /table${E}x3`,kind:e.languages.CompletionItemKind.Function,insertText:`table${E}x`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:v})}else if(g.type==="square"){const E=parseInt(h[1]);E>0&&E<=20&&(C.push({label:`/table${E} (${E}x${E}正方形表格)`,detail:`插入一个${E}行${E}列的正方形表格`,kind:e.languages.CompletionItemKind.Function,insertText:Nn(E,E),insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:v}),C.push({label:`/table${E}x... (自定义${E}行表格)`,detail:"输入x后继续指定列数",kind:e.languages.CompletionItemKind.Function,insertText:`table${E}x`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:v}))}else g.type==="basic"&&C.push({label:"/table (n行m列表格)",detail:"如 /table3 或 /table3x5",kind:e.languages.CompletionItemKind.Function,insertText:"table",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:v});if(C.length>0)return{suggestions:C}}}if(!Yt(d)&&l.column===2)return{suggestions:[{label:"/code (代码块)",detail:"插入一段代码块",kind:e.languages.CompletionItemKind.Function,insertText:"\n```${1:js}\n${2:}\n```\n",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:p},{label:"/image (图片)",detail:"插入图片",kind:e.languages.CompletionItemKind.Function,insertText:`![${pe().advanced.imageSettings.basicStyle}\${1:}](\${2:})`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:p},{label:"/table (n行m列表格)",detail:"如 /table3 或 /table3x5",kind:e.languages.CompletionItemKind.Function,insertText:"table",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:p},{label:"/latex-block (公式块)",detail:"创建一个LaTex公式块",kind:e.languages.CompletionItemKind.Field,sortText:"4",range:p,insertText:`$$
\${1:}
$$
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/list-in-order (有序列表)",detail:"创建有序列表",kind:e.languages.CompletionItemKind.Function,sortText:"5",range:p,insertText:`
1. \${1:}
2. \${2:}
3. \${3:}
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/page-breaker (分页符)",detail:"插入一个分页符",kind:e.languages.CompletionItemKind.Function,sortText:"6",range:p,insertText:`
|---|
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-flowChart (流程图)",detail:"插入mermaid流程图",kind:e.languages.CompletionItemKind.Function,sortText:"7",range:p,insertText:"\n```mermaid\nflowchart TB\nStart --> Stop\n```\n",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-pie-chart (饼图)",detail:"插入mermaid饼图",kind:e.languages.CompletionItemKind.Function,sortText:"8",range:p,insertText:'\n```mermaid\npie title ${1:Pets adopted by volunteers}\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n```\n',insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-mind-map (思维导图)",detail:"插入mermaid思维导图",kind:e.languages.CompletionItemKind.Function,sortText:"9",range:p,insertText:`
\`\`\`mermaid
mindmap
Root
    A
      B
      C
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-time-line (时间线图)",detail:"插入mermaid时间线图",kind:e.languages.CompletionItemKind.Function,sortText:"a1",range:p,insertText:`
\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : Youtube
    2006 : Twitter
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-sequence (序列图)",detail:"插入mermaid序列图",kind:e.languages.CompletionItemKind.Function,sortText:"a2",range:p,insertText:`
\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-font-size-text (任意大小文字)",detail:"你能任意掌控大小的文字",kind:e.languages.CompletionItemKind.Function,sortText:"a3",range:p,insertText:'\n<p style="font-size:${1:16}px">${2:}</p>\n',insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-center-text (居中文本)",detail:"你能任意掌控位置的文字",kind:e.languages.CompletionItemKind.Function,sortText:"a4",range:p,insertText:`
<p style="text-align:center">\${1:}</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-color-text (任意颜色文本)",detail:"你能任意掌控颜色的文字",kind:e.languages.CompletionItemKind.Function,sortText:"a5",range:p,insertText:`
<p style="color:red">\${1:}</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-text (任意文本)",detail:"你能任意掌控的文字",kind:e.languages.CompletionItemKind.Function,sortText:"a6",range:p,insertText:`
<p style="font-size:16px;text-align:center;color:black;font-weight:bold;font-style:italic;">
\${1:}
</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/title-text (图表题注释文本)",detail:"图片、表格下的小字",kind:e.languages.CompletionItemKind.Function,sortText:"a6",range:p,insertText:`
<p style="font-size:16px;text-align:center;font-style:italic;">
\${1:}
</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/cover (封面，秒了)",detail:"图片、表格下的小字",kind:e.languages.CompletionItemKind.Function,sortText:"a7",range:p,insertText:`
<br>
<br>
<br>

![#w70%#c](https://www.nus.edu.sg/images/default-source/identity-images/NUS_logo_full-horizontal.jpg)
<br>
<div>
 <center>
      <h1>\${1:Title}</h1><br><br><br><br><br><br><br><br>
      <p style="font-size:17px;">
        <b>
        \${2:Name}<br>
        \${3:[INFO]}<br>
        \${4:${tl()}}
        </b>
      </p>
 </center>
</div>

|---|
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/prettier-ignore (忽略格式化行)",detail:"下一行不进行prettier格式化",kind:e.languages.CompletionItemKind.Function,insertText:"<!-- prettier-ignore -->",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:p,sortText:"b1"},{label:"/prettier-ignore-block (忽略格式化块)",detail:"忽略prettier格式化块",kind:e.languages.CompletionItemKind.Function,insertText:`<!-- prettier-ignore-start -->
\${1:}
<!-- prettier-ignore-end -->`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:p,sortText:"b2"}]}}});class n{children;isEndOfWord;constructor(){this.children={},this.isEndOfWord=!1}}class r{root;constructor(){this.root=new n}insert(l){let m=this.root;for(let d of l)m.children[d]||(m.children[d]=new n),m=m.children[d];m.isEndOfWord=!0}search(l){let m=this.root;for(let d of l){if(!m.children[d])return[];m=m.children[d]}return this._findAllWords(m,l)}_findAllWords(l,m){let d=[];l.isEndOfWord&&d.push(m);for(let f in l.children)d=d.concat(this._findAllWords(l.children[f],m+f));return d}}const a=new r;e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:"abcdefghijklmnopqrstuvwxyz".split(""),provideCompletionItems:async(s,l)=>{const m=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column});let d=await ka("spelling_data_json");d&&d.forEach(b=>a.insert(b));const f=d?m.split(/\s+/).pop():"";let p;return d?p=a.search(f.toLowerCase()).map(b=>({label:b,kind:e.languages.CompletionItemKind.Text,insertText:b,detail:`Suggested word: ${b}`})):p=[],{suggestions:p}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["\\"],provideCompletionItems:(s,l,m)=>{const d=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column});if(Bl(e,s,d,l)){const f=Array.from([...rl,...al,...ol,...il,...ml,...sl,...gl,...hl,...yl,...wl,...Cl,...bl,...vl,...Tl,...Il,...Dl,...Ll,...Pl,..._l,...jl,...Nl],(h,v)=>({label:`\\${h}`,kind:e.languages.CompletionItemKind.Function,insertText:h,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(h[0])?"1":"0"})),p=Array.from([...nl,...ll,...cl,...ul,...fl,...pl,...El,...Sl,...Ml,...Rl,...Fl,...Al],(h,v)=>({label:`\\${h}`,kind:e.languages.CompletionItemKind.Function,insertText:`${h}{$1}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(h[0])?"1":"0"})),b=Array.from([...dl,...kl,...xl,...$l],(h,v)=>({label:`\\${h}`,kind:e.languages.CompletionItemKind.Function,insertText:`${h}{$1}{$2}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(h[0])?"1":"0"})),g=[{label:"\\begin",kind:e.languages.CompletionItemKind.Function,insertText:"begin{${1|"+zl.join(",")+`|}}
	$2
\\end{$1}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}];return{suggestions:[...f,...p,...b,...g]}}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["^"],provideCompletionItems:(s,l,m)=>{const d=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column});if(Wl(d))return{suggestions:[{label:"RED",kind:e.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."},{label:"PINK",kind:e.languages.CompletionItemKind.Function,insertText:"PINK",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"PINK..."}]}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:async(s,l,m)=>{const d=s.getValueInRange({startLineNumber:l.lineNumber,startColumn:1,endLineNumber:l.lineNumber,endColumn:l.column});let p=new Ne().topDirectoryArray;if(Ol(e,s,d)){const b=d.match(/!\[.*?\]\(\.\/([^\/)]+(?:\/[^\/)]+)*)\/?$/);if(d.slice(-2)==="./"&&!b)return{suggestions:i(p,e)};if(console.log(b),b){const h=b[1].split("/");console.log(h);const v=o(p,h);if(v&&v.fileType==="folder"&&v.children)return{suggestions:i(v.children,e)};{const C=h.slice(0,-1),E=h[h.length-1],S=o(p,C);if(S&&S.fileType==="folder"&&S.children)return{suggestions:S.children.filter(I=>I.label.startsWith(E)).map(I=>({label:I.label,kind:I.fileType==="folder"?e.languages.CompletionItemKind.Folder:e.languages.CompletionItemKind.File,insertText:I.label,detail:I.fileType==="folder"?"Folder":"File",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}))}}}}return{suggestions:[]}}});function o(s,l){if(l.length===0)return{children:s};let m=null,d=[...l];return m=s.find(f=>f.label===d[0]&&f.fileType==="folder"),m?(d.shift(),d.length===0?m:m.children?o(m.children,d):null):null}function i(s,l){return s.map(m=>({label:m.label,kind:m.fileType==="folder"?l.languages.CompletionItemKind.Folder:l.languages.CompletionItemKind.File,insertText:m.label,detail:m.fileType==="folder"?"Folder":"File",insertTextRules:l.languages.CompletionItemInsertTextRule.InsertAsSnippet}))}}function Bl(t,e,n,r){return!!(n[n.length-1]==="\\"&&(Yt(n)||Kl(e,r)))}function Ol(t,e,n,r){const a=/!\[.*?\]\((\.\/[^)]*)$/;return!!n.match(a)}function Yt(t){return t.match(/\$\$/g)?t.match(/\$\$/g).length%2===1:!1}function Kl(t,e,n){const r=t.getLineContent(e.lineNumber),a=/\$(?!\s)((\\\$|[^\$\n])*?)(?<!\s)\$/g;if(r.match(a)){const o=r,s=window.editor.getPosition().column-1,l=[];let m;for(;(m=a.exec(o))!==null;){const f=m.index+1,p=a.lastIndex-1;l.push({startIndex:f,endIndex:p})}return l.some(f=>s>f.startIndex&&s<=f.endIndex)}else return!1}function Wl(t){return t[t.length-1]==="^"}function Nn(t,e){if(t<=0||e<=0)return"";let n=`
`,r="|";for(let o=0;o<e;o++)r+=`\${${o+1}:}    |`;n+=r+`
`;let a="|";for(let o=0;o<e;o++)a+="--- |";n+=a+`
`;for(let o=1;o<t;o++){let i="|";for(let s=0;s<e;s++)i+=`\${${e+o*e+s+1}:}    |`;n+=i+`
`}return n}const Ul=(await T("https://cdn.jsdmirror.com/npm/prettier@3.2.4/+esm")).default,Vl=(await T("https://cdn.jsdmirror.com/npm/prettier@3.2.4/plugins/markdown.js/+esm")).default;function Jl(t,e){e.languages.registerDocumentFormattingEditProvider("markdown",{provideDocumentFormattingEdits(n){let r=n.getValue();var a=t.getPosition();return Ul.format(r,{parser:"markdown",plugins:[Vl]}).then(o=>{dr(window.monaco,t,o),t.setPosition(a)}),[]}})}function Gl(){const t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;return t/e>=1?"PC":"mobile"}function ql(t,e){let n,r={posx:50,posy:50};function a(o){Pe({unmemorable:{promptPanelState:!1,selectEndPos:r}})}document.addEventListener("mouseup",o=>{o.clientX,o.clientY,o.target.closest(".prompt-panel-content")||(r={posx:o.clientX,posy:o.clientY},Pe({unmemorable:{mouseUpPos:r}}))}),t.onDidChangeCursorSelection(o=>{const i=t.getSelection();clearTimeout(n),i&&!i.isEmpty()&&(n=setTimeout(()=>{a()},700))}),t.onContextMenu(o=>{No({posx:o.event.posx,posy:o.event.posy})})}function Xl(t,e){t.onDidFocusEditorWidget(()=>{window._deco.clear()})}function Yl(t){const e=()=>{t(Math.floor(window.innerHeight*.9))};window.addEventListener("resize",e)}function Ql(t,e){const n=qn(()=>{Zl(t)},20);t.onDidScrollChange(n)}function Zl(t,e){if(pe().basic.syncScroll){const n=t.getVisibleRanges();if(n.length>0){const a=n[0].startLineNumber;es(a-1)}}}function es(t){const e=document.getElementById("view-area");if(!e)return;if(t===0){e.scrollTo({top:0,behavior:"smooth"});return}const n=document.querySelectorAll("#view-area [data-line]");let r=null,a=null,o=1/0,i=1/0,s=null;if(n.forEach(l=>{const d=parseInt(l.getAttribute("data-line")||"0",10)-t;d==0?s=l:(d<0&&Math.abs(d)<o&&(o=Math.abs(d),r=l),d>0&&d<i&&(i=d,a=l))}),s){e.scrollTo({top:s.offsetTop,behavior:"smooth"});return}if(!a){e.scrollTo({top:r.offsetTop,behavior:"smooth"});return}if(r&&a){const l=r.offsetTop,m=a.offsetTop,d=(t-(t-o))/(i+o),f=(m-l)*d+l;e.scrollTo({top:f,behavior:"smooth"})}}function ts(t,e){const n=t.getContainerDomNode();if(!n)return;n.addEventListener("dragover",a=>{a.preventDefault();const o=a.dataTransfer?.types||[];o.includes("text/html")||o.includes("text/plain"),a.dataTransfer.dropEffect="copy"});const r=a=>{a.preventDefault(),a.stopPropagation(),window._setIsDragging(!1),a.dataTransfer.dropEffect="none"};window.addEventListener("dragend",r,!0),n.addEventListener("drop",a=>{if(window._setIsDragging(!1),a.dataTransfer){let o=a.dataTransfer.getData("text/html"),i=!1;if(o)i=!0;else{const l=a.dataTransfer.getData("text/plain");if(l)try{const m=JSON.parse(l);if(m.itemId&&m.path)if(m.fileType==="file")o=`./${m.path}`;else return;else o=l}catch{o=l}}const s=t.getTargetAtClientPoint(a.clientX,a.clientY);if(s&&o){const{position:l}=s;t.executeEdits(null,[{range:new kr(l.lineNumber,l.column,l.lineNumber,l.column),text:o,forceMoveMarkers:!0}]),t.setPosition({lineNumber:l.lineNumber,column:l.column+o.length}),t.focus()}a.dataTransfer.dropEffect="none",console.log("Dropped data:",o,"isImageDrop:",i)}},!0)}Xn.config({paths:{vs:`https://${window._cdn.cdn[0]}/npm/monaco-editor@0.45.0/min/vs`},"vs/editor/editor.main":`https://${window._cdn.cdn[0]}/npm/monaco-editor@0.45.0/min/vs/editor/editor.main.js`});Xn.init().then(t=>{self.MonacoEnvironment={getWorkerUrl:function(e,n){return n==="html"?`https://${window._cdn.cdn[0]}/npm/monaco-editor@0.45.0/min/vs/language/html/html.worker.js`:n==="typescript"||n==="javascript"?`https://${window._cdn.cdn[0]}/npm/monaco-editor@0.45.0/min/vs/language/typescript/ts.worker.js`:`https://${window._cdn.cdn[0]}/npm/monaco-editor@0.45.0/min/vs/editor/editor.worker.js`}}});const ns={"index.py":{name:"index.py",language:"python",value:""},"index.js":{name:"index.js",language:"javascript",value:"nihao"},"index.md":{name:"index.md",language:"markdown",value:""}},rs=at(function({setMarkdownViewerWidth:e}){const n=u.useRef(null),[r,a]=c.useState("index.md"),o=ns[r],[i,s]=u.useState(640),[l,m]=u.useState(800),[d,f]=c.useState(!1),[p,b]=c.useState({fontSize:16,wordWrap:pe().basic.editorAutoWrap?"on":"off",formatOnType:!0,formatOnPaste:!1,stickyScroll:{enabled:!0,defaultModel:"outlineModel",maxLineCount:5},quickSuggestions:!0,fontLigatures:!0,autoSurround:"quotes",autoClosingQuotes:"always",smoothScrolling:!0,codeLens:!1,pasteAs:{enabled:!1,showPasteSelector:"never"},peekWidgetDefaultFocus:"tree",cursorSmoothCaretAnimation:"explicit",colorDecorators:!0,minimap:{enabled:!0},unicodeHighlight:{nonBasicASCII:!1,ambiguousCharacters:!1},dragAndDrop:!0}),g=()=>{document.body.style.userSelect="none",document.body.style.cursor="col-resize"},h=()=>{document.body.style.userSelect="auto",document.body.style.cursor="default"},v=j=>{},C=()=>{f(!0),g(),document.getElementsByClassName("react-resizable-handle")[0].style.backgroundColor="#90caf9"},E=()=>{f(!1),h(),document.getElementsByClassName("react-resizable-handle")[0].style.backgroundColor="",setTimeout(()=>{b(j=>({...j,minimap:{enabled:!0}}))},300)},S=(j,R)=>{const re=document.getElementsByClassName("pdf-preview"),de=document.getElementById("editor").clientWidth-R.size.width-20+"px";Array.from(re).forEach(ie=>{ie.style.width=de}),b(ie=>({...ie,minimap:{enabled:!1}})),s(j.x)};function F(j,R){Gl()=="PC"&&s(document.getElementById("editor").clientWidth/2),m(document.getElementById("editor").clientHeight),R.languages.setLanguageConfiguration("markdown",{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/*",close:"*/",notIn:["string"]},{open:"？",close:"？",notIn:["string","comment"]}]}),R.languages.setMonarchTokensProvider("markdown",{tokenizer:{root:[[/\b(function|return|var)\b/,"keyword"],[/\|\|/,"string"],[/>>/,"string"],[/[{}]/,"delimiter"],[/[a-z_$][\w$]*/,"identifier"],[/"[^"]*"/,"string"],[/\d+/,"number"],[/[$$$$]/,"keyword"]]}}),R.languages.registerFoldingRangeProvider("markdown",{provideFoldingRanges(re,X,de){const ie=re.getLineCount(),B=[];let he=!1;for(let ae=1;ae<=ie;ae++){const M=re.getLineContent(ae).trim();if(/^```/.test(M)){he=!he;continue}if(!he){const _=/^(#{1,6})\s+/.exec(M);if(_){const J=_[1].length;B.push({level:J,line:ae})}}}const Y=[];for(let ae=0;ae<B.length;ae++){const{level:M,line:_}=B[ae];let J=ie;for(let P=ae+1;P<B.length;P++)if(B[P].level<=M){J=B[P].line-1;break}for(;J>_&&re.getLineContent(J).trim()==="";)J--;J>_&&Y.push({start:_,end:J})}return Y}})}function I(){}function W(j,R){window.editor=j,window.monaco=R,j.onDidChangeModelContent(re=>{if(eo()){console.log("跳过变化事件 - 正在写入Monaco");return}qn(()=>{console.log("执行Monaco内容变化同步"),oo(),zi(2)},150)()}),ir(["markdownitIncrementalDOM","katex","IncrementalDOM"]).then(()=>{Ro(j,R),F(j,R),ji(j),el(j,R),Hl(j,R),Jl(j,R),ql(j),Xl(j),Ql(j),ts(j),Yl(m)})}return u.useEffect(()=>{},[]),u.createElement(u.Fragment,null,u.createElement("div",{ref:n,id:"monaco-editor",style:{width:i,height:"100%"}},u.createElement(At,{sx:{backgroundColor:"transparent",color:"#fff",zIndex:9999},open:d}),u.createElement(pa,{className:"custom-resizable",width:i,height:l,draggableOpts:{grid:[2,5]},onResizeStart:C,onResizeStop:E,onResize:S,axis:"x"},u.createElement(ga,{className:"monaco-editor-inner",height:"100%",width:i,theme:Se()==="light"?"vs-light":"vs-dark",path:o.name,defaultLanguage:o.language,defaultValue:o.value,onMount:W,onChange:v,options:p,beforeMount:I}))))});function as({setMarkdownViewerWidth:t}){return u.createElement(u.Fragment,null,u.createElement(rs,{setMarkdownViewerWidth:t}))}const le=(await T("https://cdn.jsdmirror.com/npm/gsap@3.12/+esm")).gsap,os=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,is=()=>{const{t}=Te(),e=[{title:t("featuresList.startExperience.title"),description:t("featuresList.startExperience.description"),icon:"🚀",isButton:!0},{title:t("featuresList.startExperience.title"),description:t("featuresList.startExperience.description"),icon:"🚀",isStartCard:!0},{title:"未完待续...",description:`探索，
创新，
永不言弃。

 To Explore, 
To Innovate, 
Never give up.`,icon:"✨"},{title:t("featuresList.smartEditor.title"),description:t("featuresList.smartEditor.description"),icon:"✍️"},{title:t("featuresList.codeDisplay.title"),description:t("featuresList.codeDisplay.description"),icon:"🌍"},{title:t("featuresList.multiDeviceSync.title"),description:t("featuresList.multiDeviceSync.description"),icon:"📂"},{title:t("featuresList.flexibleExport.title"),description:t("featuresList.flexibleExport.description"),icon:"📤"}],n=c.useRef(null),r=c.useRef([]),a=c.useRef([]),[o,i]=c.useState(null),[s,l]=c.useState(0),[m,d]=c.useState(!1),f=(C,E)=>Math.random()*(E-C)+C,p=e.map((C,E)=>{let S;return C.isButton?S=45:S=(E-(e.length-1)/2)*15,{x:C.isButton?175:S*3,y:0,rotation:S,zIndex:C.isButton?e.length+1:E,scale:1}}),b=()=>{le.context(()=>{const C=le.timeline({onComplete:()=>d(!0)}),E=e.findIndex(S=>S.isButton);C.add("cardsReveal","+=0.6"),C.to(r.current[E],{scale:1.1,duration:.5,yoyo:!0,repeat:1,ease:"power1.inOut"}),r.current.forEach((S,F)=>{if(S&&F!==E){let I=(F-(e.length-1)/2)*15;const W=F*.15;C.to(S,{scale:1,opacity:1,rotation:I,x:I*3,y:0,duration:.8,ease:"back.out(1.7)",onStart:()=>{le.set(S,{zIndex:F})}},`cardsReveal+=${W}`),F!==0&&C.add(()=>{const j=le.to(S,{rotation:`+=${f(-2,2)}`,duration:f(3,5),repeat:-1,yoyo:!0,ease:"sine.inOut"});a.current[F]=j},`cardsReveal+=${W+.8}`)}}),C.to(r.current[E],{scale:1.05,rotation:50,x:175,y:0,duration:.8,ease:"back.out(1.7)",onStart:()=>{le.set(r.current[E],{zIndex:e.length+1})},onComplete:()=>{const S=le.to(r.current[E],{y:-10,duration:1.5,repeat:-1,yoyo:!0,ease:"power1.inOut"});a.current[E]=S}},`cardsReveal+=${r.current.length*.15}`)},n)};c.useEffect(()=>{const C=le.context(()=>{le.timeline({onComplete:()=>d(!0)});const E=e.findIndex(S=>S.isButton);r.current.forEach((S,F)=>{S&&(F===E?le.set(S,{x:0,y:0,rotation:0,scale:1,opacity:1,zIndex:e.length+1}):le.set(S,{x:0,y:0,rotation:0,scale:.8,opacity:0,zIndex:F}))})},n);return()=>C.revert()},[]);const g=()=>{const C=le.timeline();r.current.forEach((E,S)=>{if(E){const F=Math.random()*360,I=100,W=Math.cos(F)*I,j=Math.sin(F)*I;C.to(E,{scale:0,opacity:0,x:W,y:j,duration:.6,ease:"back.in(1.7)",delay:S*.1},0)}}),C.to(n.current,{opacity:0,duration:.2},">-0.2"),os.sleep(1500).then(()=>{zo({memorable:{welcomeAnimationState:!1}})})},h=C=>{if(!m)return;const E=le.timeline();if(o===C){const S=r.current[C];S&&(a.current[C]!==null&&(a.current[C].kill(),a.current[C]=null),E.to(S,{scale:1.1,rotation:-30,duration:.7,ease:"power2.inOut",x:p[C].x-400,y:p[C].y-250,onComplete:()=>{le.set(S,{zIndex:p[C].zIndex})}}).to(S,{scale:p[C].scale||1,rotation:p[C].rotation,duration:.4,ease:"power2.inOut",x:p[C].x,y:p[C].y,onComplete:()=>{if(C===0){const F=le.to(S,{rotation:`+=${f(-2,2)}`,duration:f(3,5),repeat:-1,yoyo:!0,ease:"sine.inOut"});a.current[C]=F}e[C].isStartCard&&g()}})),i(null)}else{if(o!==null&&r.current[o]){const S=r.current[o];a.current[o]&&(a.current[o].kill(),a.current[o]=null),le.set(S,{zIndex:p[o].zIndex}),E.to(S,{scale:p[o].scale||1,rotation:p[o].rotation,duration:.8,ease:"power2.inOut",x:p[o].x,y:p[o].y,onComplete:()=>{if(o===0){const F=le.to(S,{rotation:`+=${f(-2,2)}`,duration:f(3,5),repeat:-1,yoyo:!0,ease:"sine.inOut"});a.current[o]=F}}},0)}if(r.current[C]){const S=r.current[C];a.current[C]&&(a.current[C].kill(),a.current[C]=null);const I=(()=>{const W=window.innerWidth,j=window.innerHeight,R=300,re=400,X=.8*W/R,de=.8*j/re,ie=Math.min(X,de,2);return ie<1?1:ie})();le.set(S,{zIndex:100}),E.to(S,{scale:I,x:-300,y:-50,rotation:0,duration:.5,ease:"power2.out",onComplete:()=>{le.set(S,{yPercent:0}),C===0&&a.current[C]&&(a.current[C].kill(),a.current[C]=null)}},0)}i(C)}},v=C=>{C.target===C.currentTarget&&o!==null&&h(o)};return u.createElement(At,{ref:n,open:ln().memorable.welcomeAnimationState,onClick:v,sx:{zIndex:C=>C.zIndex.drawer+1,backgroundColor:"#f5f5f5",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,paddingTop:30,overflow:"hidden"}},u.createElement(z,{sx:{position:"relative",width:"300px",height:"400px",perspective:"1000px",userSelect:"none",marginBottom:8}},e.map((C,E)=>u.createElement(z,{key:E,ref:S=>r.current[E]=S,onClick:S=>{S.stopPropagation(),C.isButton||h(E)},sx:{position:"absolute",top:-20,left:0,width:"100%",height:"100%",padding:3,borderRadius:"12px",backgroundColor:"#ffffff",color:"#000",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",cursor:"pointer",transformOrigin:"center center",transition:"box-shadow 0.3s ease","&:hover":{boxShadow:m?"0 12px 48px rgba(0, 0, 0, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.1)"},pointerEvents:m?"auto":"none",minWidth:C.isButton?"300px":"200px",minHeight:C.isButton?"400px":"250px",maxWidth:"80vw",maxHeight:"80vh",willChange:"transform, opacity"}},C.isButton?u.createElement(ve,{variant:"contained",onClick:S=>{if(S.stopPropagation(),S.stopPropagation(),s==0)b(),l(1);else{const F=le.timeline(),I=r.current[E];le.set(I.parentNode,{perspective:800}),F.to(I,{scale:1.15,duration:.7,ease:"power2.inOut"}).to(I,{scale:0,duration:.7,opacity:0,ease:"power2.inOut",onComplete:()=>{le.to(I,{duration:.2,onComplete:()=>{le.set(I,{display:"none"})}})}})}},sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:4,py:2,fontSize:"1rem",backgroundColor:"#1976d2",color:"#fff",borderRadius:"12px","&:hover":{backgroundColor:"#1565c0",transform:"translateY(-2px)"},transition:"all 0.3s ease"}},u.createElement(ke,{variant:"h5",sx:{whiteSpace:"pre-line",fontSize:"1.5rem",mb:1}},C.icon," ",C.title),u.createElement(ke,{variant:"body2",sx:{whiteSpace:"pre-line",opacity:.8}},C.description)):C.isStartCard?u.createElement(u.Fragment,null,u.createElement(z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},u.createElement(ve,{variant:"contained",onClick:S=>{S.stopPropagation(),h(E)},sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:4,py:2,fontSize:"1rem",backgroundColor:"#FFDDEE",color:"#fff",borderRadius:"12px","&:hover":{backgroundColor:"#ffc3e1",transform:"translateY(-2px)"},transition:"all 0.3s ease"}},u.createElement(ke,{variant:"h5",sx:{whiteSpace:"pre-line",fontSize:"1.5rem",mb:1}},C.icon," ",C.title),u.createElement(ke,{variant:"body2",sx:{whiteSpace:"pre-line",opacity:.8}},C.description)))):u.createElement(u.Fragment,null,u.createElement(z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},u.createElement(ke,{variant:"h5",sx:{fontSize:"1.5rem",mb:1,display:"flex",alignItems:"center",gap:2,whiteSpace:"pre-line"}},u.createElement("span",null,C.icon),C.title),u.createElement(z,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",pb:"80px"}},u.createElement(ke,{alignContent:"center",variant:"body2",sx:{whiteSpace:"pre-line",opacity:.8}},C.description))))))))},ls=u.lazy(()=>Ve(()=>import("./EmojiPicker-69f149f2.js"),["./EmojiPicker-69f149f2.js","./@emoji-mart-49dd832f.js","./react-2c2ad9dc.js","./@babel-e5f941c7.js","./emoji-mart-029374f1.js","./mobx-react-7d4c1e4f.js","./mobx-3741033e.js","./mobx-react-lite-afa2ccc5.js","./react-dom-c6aabcbc.js","./scheduler-765c72db.js","./use-sync-external-store-b06bb362.js","./@mui-fd8f6c35.js","./@emotion-ac376cc0.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./stylis-79144faa.js","./react-transition-group-34e06d3e.js","./@popperjs-61ffd834.js","./clsx-0839fdbe.js","./prop-types-d9a440a1.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./i18next-c75e253c.js","./react-i18next-65ca089e.js","./@monaco-editor-80ea4237.js","./state-local-dd516420.js","./react-resizable-942463f8.js","./react-draggable-966ae795.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-ac00b891.js"],import.meta.url)),ss=u.lazy(()=>Ve(()=>import("./AIPanel-11e5b6c1.js"),["./AIPanel-11e5b6c1.js","./react-2c2ad9dc.js","./@babel-e5f941c7.js","./mobx-react-7d4c1e4f.js","./mobx-3741033e.js","./mobx-react-lite-afa2ccc5.js","./react-dom-c6aabcbc.js","./scheduler-765c72db.js","./use-sync-external-store-b06bb362.js","./@mui-fd8f6c35.js","./@emotion-ac376cc0.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./stylis-79144faa.js","./react-transition-group-34e06d3e.js","./@popperjs-61ffd834.js","./clsx-0839fdbe.js","./prop-types-d9a440a1.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./i18next-c75e253c.js","./react-i18next-65ca089e.js","./@monaco-editor-80ea4237.js","./state-local-dd516420.js","./react-resizable-942463f8.js","./react-draggable-966ae795.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-ac00b891.js"],import.meta.url)),cs=u.lazy(()=>Ve(()=>import("./VoiceTrans-2778acd6.js"),["./VoiceTrans-2778acd6.js","./react-2c2ad9dc.js","./@babel-e5f941c7.js","./mobx-react-7d4c1e4f.js","./mobx-3741033e.js","./mobx-react-lite-afa2ccc5.js","./react-dom-c6aabcbc.js","./scheduler-765c72db.js","./use-sync-external-store-b06bb362.js","./@mui-fd8f6c35.js","./@emotion-ac376cc0.js","./hoist-non-react-statics-23d96a9a.js","./react-is-e8e5dbb3.js","./stylis-79144faa.js","./react-transition-group-34e06d3e.js","./@popperjs-61ffd834.js","./clsx-0839fdbe.js","./prop-types-d9a440a1.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./i18next-c75e253c.js","./react-i18next-65ca089e.js","./@monaco-editor-80ea4237.js","./state-local-dd516420.js","./react-resizable-942463f8.js","./react-draggable-966ae795.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-ac00b891.js"],import.meta.url)),ds=at(function(){const e=u.useRef(null),[n,r]=u.useState("100%");return u.useEffect(()=>{Pi()},[]),u.createElement(u.Fragment,null,u.createElement("div",{style:{marginTop:"1.3vh"},id:"bodyTopBox"},u.createElement("div",{id:"editor",className:`${Se()=="light"?"theme-light":"theme-dark"} FLEX ROW`},u.createElement(as,{setMarkdownViewerWidth:r}),u.createElement("article",{id:"view-area-hidden",className:"hidden-pre"}),u.createElement("article",{ref:e,id:"view-area",style:{fontFamily:pe().basic.fontFamily,width:n,padding:Ue().unmemorable.previewMode?"0px 5px":"26px 38px"},className:`uniform-scroller markdown-body ${Se()==="light"?"markdown-body-light":"markdown-body-dark"}`})),ln().memorable.welcomeAnimationState?u.createElement(is,null):u.createElement(u.Fragment,null),u.createElement(c.Suspense,{fallback:u.createElement(u.Fragment,null)},u.createElement(ls,{open:lr()==="on"})),u.createElement(c.Suspense,null,u.createElement(ss,{open:Ue().unmemorable.aiPanelState})),u.createElement(c.Suspense,null,u.createElement(cs,{open:Ue().unmemorable.voicePanelState}))))}),us=(await T("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,ms=()=>{us.addStyle(`
::selection {
border-radius: 5px;
background-color: ${Se()==="light"?"#add6ff":"#636363"};
}

    `)},br={zIndex:{drawer:1300,modal:1200,appBar:1200}},fs=Qt({...br,palette:{primary:{main:Jt[200],contrastText:"#fff378"},secondary:{main:"#EEEEEE",contrastText:"pink"},info:{main:Jt[200],contrastText:"#8B8A8A"},mode:"light"}}),gs=Qt({...br,palette:{primary:{main:Jt[400],contrastText:"wheat"},secondary:{main:wn[700],contrastText:"wheat"},info:{main:wn[600],contrastText:"#8B8A8A"},mode:"dark"}}),ps=at(()=>(u.useEffect(()=>{ms()},[]),u.createElement(u.Fragment,null,u.createElement(Bn,{theme:Se()==="light"?fs:gs},u.createElement(Gn,null),u.createElement(z,{className:"FLEX COL App-top"},u.createElement($i,null),u.createElement(ds,null),u.createElement(At,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:Ue().unmemorable.loading,onClick:()=>{Pe({unmemorable:{loading:!1}})}},u.createElement(ma,{color:"inherit"}))))))),hs={en:{translation:{"t-more":"More","t-about":"Help","t-home":"Home","t-image-manager":"Image Manager","t-file-manager":"File Manager","t-file-manager-open-file":"Open File ","t-file-manager-open-folder":"Open Folder ","t-file-manager-saveAs":"Save As","t-file-manager-pinned":"Pinned!","t-file-manager-syncLocal":"Sync File To Local","t-export":"Export","t-share":"Share (Dev)","t-collaborative-office":"Realtime Office","t-settings":"Settings","t-more-coming-soon":"More (Coming Soon)","t-export-pdf":"Export as PDF","t-export-image":"Export as Image (Beta1.0)","t-export-markdown":"Export as Markdown","t-basic-settings":"Basic Settings","t-theme-settings":"Theme Settings","t-language-settings":"Language Settings","t-editor-settings":"Editor Settings","t-speech-to-text":"Speech to Text","t-advanced-settings":"Advanced Settings","t-export-settings":"Export Settings","t-mermaid-settings":"Mermaid Settings","t-image-settings":"Image Settings","t-image-manager-title":"Image Manager","t-image-manager-tooltip-title":"Manage pasted and uploaded images","t-image-manager-tooltip-ctrl-click":"Hold Ctrl and click image to insert","t-image-manager-tooltip-double-click":"Double-click image to preview","t-image-manager-tooltip-alt-click":"Hold Alt and click image to copy","t-image-manager-tooltip-delete-all":"Delete all images and stored text","t-image-manager-tooltip-delete-single":"Delete this image","t-image-manager-delete-all-title":"Ready to delete all the images?","t-image-manager-delete-all-content":"Once you have clicked the 'yes' button, all your pictures  will be deleted!","t-image-manager-confirm-yes":"YES","t-image-manager-confirm-no":"NO","t-image-manager-no-images-title":"No Images","t-image-manager-no-images-description":"Please paste images into the editor, and they will be automatically saved here","t-lab-title":"Frontend Lab","t-lab-card-spelling-association-title":"Spelling Association","t-lab-card-spelling-association-desc":"Spelling completion (English only)","t-lab-card-spelling-check-title":"Spelling Check","t-lab-card-spelling-check-desc":"Spell checking, insufficient funds, let's not use it!","t-lab-button-install":"Install","t-lab-button-uninstall":"Uninstall","t-lab-button-enable":"Enable","t-lab-button-disable":"Disable","t-lab-install-success":"Dictionary installed successfully!","t-file-manager-new-file":"New File","t-file-manager-new-folder":"New Folder","t-file-manager-rename":"Rename","t-file-manager-delete":"Delete","t-file-manager-move":"Move","t-file-manager-copy":"Copy","t-file-manager-empty-folder":"This folder is empty","t-file-manager-empty-folder-desc":"Right-click to create new files or folders","t-file-manager-confirm-delete":"Confirm Delete","t-file-manager-confirm-delete-file":"Are you sure you want to delete '{{name}}'?","t-file-manager-confirm-delete-folder":"Are you sure you want to delete folder '{{name}}' and all its contents?","t-file-manager-new-file-name":"Enter file name","t-file-manager-new-folder-name":"Enter folder name","t-file-manager-rename-name":"Enter new name","t-file-manager-create-success":"Created successfully!","t-file-manager-delete-success":"Deleted successfully!","t-file-manager-rename-success":"Renamed successfully!","t-file-manager-operation-failed":"Operation failed","t-file-manager-open-success":"Successfully opened","t-file-manager-move-success":"Moved successfully!","t-file-manager-invalid-move":"Cannot move parent folder into child folder","t-file-manager-already-in-root":"File is already in root directory","t-file-manager-loading":"Loading...","t-file-manager-load-more":"Click to load more","t-file-format-not-supported":"File format '.{{extension}}' is not supported","t-preview-mode-error":"Preview mode is enabled, can't save. Open another file!","t-save-success-local":"Saved locally! 🎉","t-save-success-browser-no-local":"Saved to browser! 🎉 (No local file opened)","t-save-success-browser":"Saved to browser! 🎉","t-rejection-error":"How dare you refuse me.","t-updated-to-latest-version":"Updated to the latest version","t-current-version":"Current version: {{version}}","t-new-features-current-version":"New features in the current version","t-no-file-selected":"Looking around, living in a fantasy?","t-opening-file":"Opening local file, hold on a bit 😅","t-error-opening-file":"An error occurred 🤣","t-error-opening-folder":"Failed to open folder","t-update-notification-do-not-show-again":"Don't show again","directory.preface.title":"Preface","directory.basic.title":"1. Basic Operations Guide","directory.basic.paragraph":"Paragraphs","directory.basic.lineBreak":"Line Breaks","directory.basic.bold":"Bold","directory.basic.italic":"Italic","directory.basic.center":"Center Alignment","directory.basic.customText":"Custom Text","directory.basic.exportPdf":"Export PDF","directory.advanced.title":"2. Advanced Features Guide","directory.advanced.speechToText":"Speech to Text","directory.advanced.aiAssistant":"✨AI Smart Assistant","directory.advanced.autoFormat":"Auto Formatting","directory.advanced.fileManager":"File Manager","directory.advanced.imageUpload":"Image Upload","directory.advanced.syncScroll":"Synchronized Scrolling","directory.advanced.emojiMarket":"Emoji Market","directory.advanced.collaboration":"Collaborative Office","directory.advanced.tableBuilder":"Table Builder","directory.advanced.mindMap":"Mind Maps","directory.advanced.doubleClick":"Double-click Positioning","directory.smart.title":"3. Smart Features Guide","directory.smart.latex":"LaTeX Math Formulas","directory.smart.autoComplete":"Smart Suggestions","directory.smart.settings":"Settings Interface",featuresList:{startExperience:{title:"Start Experience",description:"Click to start and explore more features."},smartEditor:{title:`Markdown
Plus AI`,description:"A smart, dual-pane editor with live scrolling preview, integrated with smart completions and comprehensive shortcuts. Press Ctrl+J to summon the GPT-4 assistant, enhancing your creativity."},codeDisplay:{title:`Mind Maps
All-Inclusive`,description:"Supports syntax highlighting for over 30 programming languages and offers Mermaid flowcharts and mind maps in various themes, adding vibrance to your creation."},multiDeviceSync:{title:`Advanced
File System`,description:"A clear folder directory, one-click sync to local files, and easy clipboard image pasting, freeing your creative worries."},flexibleExport:{title:`Flexible
Export Options`,description:"Export effortlessly in formats like PDF, Markdown, and JPG, making content management a breeze."}}}},zh:{translation:{"t-more":"更多","t-about":"帮助","t-home":"首页","t-image-manager":"图片管理器 (浏览器)","t-file-manager":"文件管理器✨","t-file-manager-open-file":"打开文件 ","t-file-manager-open-folder":"打开文件夹 ","t-file-manager-saveAs":"另存为 ","t-file-manager-pinned":"固定！","t-file-manager-syncLocal":"同步本地编辑","t-export":"导出","t-share":"分享 (开发中)","t-collaborative-office":"协同办公 (开发中)","t-settings":"设置","t-more-coming-soon":"更多 (敬请期待)","t-export-pdf":"导出为 PDF","t-export-image":"导出为图片 (Beta1.0)","t-export-markdown":"导出为 Markdown","t-basic-settings":"基础设置","t-theme-settings":"主题设置","t-language-settings":"语言设置","t-editor-settings":"编辑器设置","t-speech-to-text":"语音转文字","t-advanced-settings":"高级设置","t-export-settings":"导出设置","t-mermaid-settings":"Mermaid设置","t-image-settings":"图片设置","t-image-manager-title":"图片管理器","t-image-manager-tooltip-title":"管理粘贴上传的图片","t-image-manager-tooltip-ctrl-click":"按住Ctrl点击图片插入","t-image-manager-tooltip-double-click":"双击图片放大预览","t-image-manager-tooltip-alt-click":"按住Alt点击图片复制图片","t-image-manager-tooltip-delete-all":"删除全部图片和储存的文字","t-image-manager-tooltip-delete-single":"删除此图片","t-image-manager-delete-all-title":"确定要删除所有图片吗？","t-image-manager-delete-all-content":'一旦点击"确定"按钮，您的全部图片将被删除！',"t-image-manager-confirm-yes":"确定","t-image-manager-confirm-no":"取消","t-image-manager-no-images-title":"暂无图片","t-image-manager-no-images-description":"请粘贴图片到编辑器中，图片将自动保存到此处","t-lab-title":"前端实验室","t-lab-card-spelling-association-title":"拼写联想","t-lab-card-spelling-association-desc":"拼写补全(只支持英文),安装会在本地下载词典","t-lab-card-spelling-check-title":"拼写检查","t-lab-card-spelling-check-desc":"拼写检查,经费不足,咱不用了！","t-lab-button-install":"安装","t-lab-button-uninstall":"卸载","t-lab-button-enable":"启用","t-lab-button-disable":"禁用","t-lab-install-success":"成功安装字典！","t-file-manager-new-file":"新建文件","t-file-manager-new-folder":"新建文件夹","t-file-manager-rename":"重命名","t-file-manager-delete":"删除","t-file-manager-move":"移动","t-file-manager-copy":"复制","t-file-manager-empty-folder":"此文件夹为空","t-file-manager-empty-folder-desc":"右键点击创建新文件或文件夹","t-file-manager-confirm-delete":"确认删除","t-file-manager-confirm-delete-file":"确定要删除 '{{name}}' 吗？","t-file-manager-confirm-delete-folder":"确定要删除文件夹 '{{name}}' 及其所有内容吗？","t-file-manager-new-file-name":"请输入文件名","t-file-manager-new-folder-name":"请输入文件夹名","t-file-manager-rename-name":"请输入新名称","t-file-manager-create-success":"创建成功！","t-file-manager-delete-success":"删除成功！","t-file-manager-rename-success":"重命名成功！","t-file-manager-operation-failed":"操作失败","t-file-manager-open-success":"成功打开","t-file-manager-move-success":"移动成功！","t-file-manager-invalid-move":"不能将父文件夹移动到子文件夹中","t-file-manager-already-in-root":"文件已在根目录","t-file-manager-loading":"加载中...","t-file-manager-load-more":"点击加载更多","t-file-format-not-supported":"不支持 '.{{extension}}' 文件格式","t-preview-mode-error":"预览模式你保存个屁，开另一个文件！","t-save-success-local":"成功保存到本地！🎉","t-save-success-browser-no-local":"成功保存到浏览器！🎉(未打开本地文件)","t-save-success-browser":"成功保存到浏览器！🎉","t-rejection-error":"你竟敢拒绝我。","t-updated-to-latest-version":"已更新到最新版本","t-current-version":"当前版本: {{version}}","t-new-features-current-version":"当前版本新增特性","t-no-file-selected":"左顾右盼，活在梦幻?","t-opening-file":"正在打开本地文件，别急，你给我等会😅","t-error-opening-file":"尼玛的报错乐🤣","t-error-opening-folder":"打开文件夹失败","t-update-notification-do-not-show-again":"不再显示","directory.preface.title":"前言","directory.basic.title":"1.基础操作指南","directory.basic.paragraph":"段落","directory.basic.lineBreak":"换行","directory.basic.bold":"加粗","directory.basic.italic":"斜体","directory.basic.center":"居中","directory.basic.customText":"任意文本","directory.basic.exportPdf":"导出PDF","directory.advanced.title":"2.黑科技指南","directory.advanced.speechToText":"语音转文字","directory.advanced.aiAssistant":"✨AI智能助手","directory.advanced.autoFormat":"自动排版","directory.advanced.fileManager":"文件管理器","directory.advanced.imageUpload":"图片上传","directory.advanced.syncScroll":"同步滚动","directory.advanced.emojiMarket":"表情包超市","directory.advanced.collaboration":"协同办公","directory.advanced.tableBuilder":"表格速建","directory.advanced.mindMap":"思维导图","directory.advanced.doubleClick":"双击定位","directory.smart.title":"3.智能提示指南","directory.smart.latex":"LaTex数学公式","directory.smart.autoComplete":"智能提示","directory.smart.settings":"设置界面",featuresList:{startExperience:{title:"开始体验",description:"点击开始，探索更多功能。"},smartEditor:{title:`Markdown
+ AI`,description:"智能双栏编辑器，实时滚动预览，集成智能补全和全面快捷键。按 Ctrl+J 召唤 GPT-4 助手，增强您的创造力。"},codeDisplay:{title:`思维导图
全包含`,description:"支持 30+ 编程语言语法高亮，提供多主题 Mermaid 流程图和思维导图，为您的创作增色。"},multiDeviceSync:{title:`高级
文件系统`,description:"清晰的文件夹目录，一键同步本地文件，轻松剪贴板图片粘贴，解放您的创作烦恼。"},flexibleExport:{title:`灵活
导出选项`,description:"轻松导出 PDF、Markdown、JPG 等格式，让内容管理变得轻而易举。"}}}}},ys=()=>{const t=navigator.language;return t==="zh-CN"?"zh":"en"},ws=()=>{const t=localStorage.getItem("i18nextLng")||ys();It({basic:{language:t}}),Xe.use(ha).use(fa).init({debug:!1,lng:t,fallbackLng:"zh",interpolation:{escapeValue:!1},react:{useSuspense:!0},resources:hs})};ws();ir(["markdownitIncrementalDOM","katex","IncrementalDOM"]).then(()=>{Cr.createRoot(document.getElementById("root")).render(u.createElement(c.Suspense,{fallback:u.createElement("div",null,"Loading...")},u.createElement(ps,null)))});export{mi as A,Ma as B,Kt as C,Pe as D,Ue as E,Zo as I,Ys as S,Se as a,pe as b,Js as c,Gs as d,Ki as e,It as f,gt as g,qs as h,T as i,zo as j,nt as k,ka as l,qt as m,En as n,Vs as o,$t as p,Us as q,H as r,Qs as s,sn as t,Li as u,Dt as v,cr as w,Xs as x,Sn as y,ot as z};
