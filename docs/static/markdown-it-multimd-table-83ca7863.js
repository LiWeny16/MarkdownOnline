import{b as W}from"./@babel-4ef42ede.js";function d(){this.__highest_alphabet__=0,this.__match_alphabets__={},this.__initial_state__=0,this.__accept_states__={},this.__transitions__={},this.__actions__={}}d.prototype.set_highest_alphabet=function(o){this.__highest_alphabet__=o};d.prototype.set_match_alphabets=function(o){this.__match_alphabets__=o};d.prototype.set_initial_state=function(o){this.__initial_state__=o};d.prototype.set_accept_states=function(o){for(var f=0;f<o.length;f++)this.__accept_states__[o[f]]=!0};d.prototype.set_transitions=function(o){this.__transitions__=o};d.prototype.set_actions=function(o){this.__actions__=o};d.prototype.update_transition=function(o,f){this.__transitions__[o]=Object.assign(this.__transitions__[o]||Object(),f)};d.prototype.execute=function(o,f){var u,g,m;for(u=this.__initial_state__,g=o;u&&g<f;g++){for(m=this.__highest_alphabet__;m>0&&!(u&m&&this.__match_alphabets__[m].call(this,g,u,m));m>>=4);if(this.__actions__(g,u,m),m===0)break;u=this.__transitions__[u][m]||0}return!!this.__accept_states__[u]};var q=d,H=q,J=function(f,u){var g={multiline:!1,rowspan:!1,headerless:!1,multibody:!0,autolabel:!0};u=f.utils.assign({},g,u||{});function m(e,c){var l=e.bMarks[c]+e.sCount[c],n=e.bMarks[c]+e.blkIndent,i=e.skipSpacesBack(e.eMarks[c],n),p=[],s,t,a=!1,r=!1,b=0;for(s=l;s<i;s++)switch(e.src.charCodeAt(s)){case 92:a=!0;break;case 96:t=e.skipChars(s,96)-1,t>s?(r||(b===0?b=t-s:b===t-s&&(b=0)),s=t):(r||!a&&!b)&&(r=!r),a=!1;break;case 124:!r&&!a&&p.push(s),a=!1;break;default:a=!1;break}return p.length===0||(p[0]>n&&p.unshift(n-1),p[p.length-1]<i-1&&p.push(i)),p}function I(e,c,l){var n={text:null,label:null},i=e.bMarks[l]+e.sCount[l],p=e.eMarks[l],s=/^\[(.+?)\](\[([^\[\]]+)\])?\s*$/,t=e.src.slice(i,p).match(s);return t?c?!0:(n.text=t[1],!u.autolabel&&!t[2]||(n.label=t[2]||t[1],n.label=n.label.toLowerCase().replace(/\W+/g,"")),n):!1}function j(e,c,l){var n={bounds:null,multiline:null},i=m(e,l),p,s,t;return i.length<2?!1:c?!0:(n.bounds=i,u.multiline&&(p=e.bMarks[l]+e.sCount[l],s=e.eMarks[l]-1,n.multiline=e.src.charCodeAt(s)===92,n.multiline&&(t=e.eMarks[l],e.eMarks[l]=e.skipSpacesBack(s,p),n.bounds=m(e,l),e.eMarks[l]=t)),n)}function R(e,c,l){var n={aligns:[],wraps:[]},i=m(e,l),p=/^:?(-+|=+):?\+?$/,s,t,a;if(e.sCount[l]-e.blkIndent>=4||i.length===0)return!1;for(s=0;s<i.length-1;s++){if(t=e.src.slice(i[s]+1,i[s+1]).trim(),!p.test(t))return!1;switch(n.wraps.push(t.charCodeAt(t.length-1)===43),a=(t.charCodeAt(0)===58)<<4|t.charCodeAt(t.length-1-n.wraps[s])===58,a){case 0:n.aligns.push("");break;case 1:n.aligns.push("right");break;case 16:n.aligns.push("left");break;case 17:n.aligns.push("center");break}}return c?!0:n}function $(e,c,l){return e.isEmpty(l)}function G(e,c,l,n){var i=new H,p=16,s=-1,t,a,r,b,y,S,M=[],D,E,h,k,C,A,_,w,T,v;if(c+2>l||(a=new e.Token("table_open","table",1),a.meta={sep:null,cap:null,tr:[]},i.set_highest_alphabet(65536),i.set_initial_state(65792),i.set_accept_states([65552,65553,0]),i.set_match_alphabets({65536:I.bind(this,e,!0),4096:R.bind(this,e,!0),256:j.bind(this,e,!0),16:j.bind(this,e,!0),1:$.bind(this,e,!0)}),i.set_transitions({65792:{65536:256,256:4352},256:{256:4352},4352:{4096:65552,256:4352},65552:{65536:0,16:65553},65553:{65536:0,16:65553,1:65552}}),u.headerless&&(i.set_initial_state(69888),i.update_transition(69888,{65536:4352,4096:65552,256:4352}),r=new e.Token("tr_placeholder","tr",0),r.meta=Object()),u.multibody||i.update_transition(65552,{65536:0,16:65552}),i.set_actions(function(x,K,O){switch(O){case 65536:if(a.meta.cap)break;a.meta.cap=I(e,!1,x),a.meta.cap.map=[x,x+1],a.meta.cap.first=x===c;break;case 4096:a.meta.sep=R(e,!1,x),a.meta.sep.map=[x,x+1],r.meta.grp|=1,p=16;break;case 256:case 16:r=new e.Token("tr_open","tr",1),r.map=[x,x+1],r.meta=j(e,!1,x),r.meta.type=O,r.meta.grp=p,p=0,a.meta.tr.push(r),u.multiline&&(r.meta.multiline&&s<0?s=a.meta.tr.length-1:!r.meta.multiline&&s>=0&&(t=a.meta.tr[s],t.meta.mbounds=a.meta.tr.slice(s).map(function(z){return z.meta.bounds}),t.map[1]=r.map[1],a.meta.tr=a.meta.tr.slice(0,s+1),s=-1));break;case 1:r.meta.grp|=1,p=16;break}}),i.execute(c,l)===!1)||!a.meta.tr.length)return!1;if(n)return!0;if(a.meta.tr[a.meta.tr.length-1].meta.grp|=1,a.map=D=[c,0],a.block=!0,a.level=e.level++,e.tokens.push(a),a.meta.cap){t=e.push("caption_open","caption",1),t.map=a.meta.cap.map;var F=[],B=a.meta.cap.first?"top":"bottom";a.meta.cap.label!==null&&F.push(["id",a.meta.cap.label]),B!=="top"&&F.push(["style","caption-side: "+B]),t.attrs=F,t=e.push("inline","",0),t.content=a.meta.cap.text,t.map=a.meta.cap.map,t.children=[],t=e.push("caption_close","caption",-1)}for(A=0;A<a.meta.tr.length;A++){for(y=new e.Token("td_th_placeholder","",0),r=a.meta.tr[A],r.meta.grp&16&&(h=r.meta.type===256?"thead":"tbody",t=e.push(h+"_open",h,1),t.map=E=[r.map[0],0],M=[]),r.block=!0,r.level=e.level++,e.tokens.push(r),_=0;_<r.meta.bounds.length-1;_++){if(C=[r.meta.bounds[_]+1,r.meta.bounds[_+1]],k=e.src.slice.apply(e.src,C),k===""){b=y.attrGet("colspan"),y.attrSet("colspan",b===null?2:b+1);continue}if(u.rowspan&&M[_]&&k.trim()==="^^"){S=M[_].attrGet("rowspan"),M[_].attrSet("rowspan",S===null?2:S+1),y=new e.Token("td_th_placeholder","",0);continue}if(h=r.meta.type===256?"th":"td",t=e.push(h+"_open",h,1),t.map=r.map,t.attrs=[],a.meta.sep.aligns[_]&&t.attrs.push(["style","text-align:"+a.meta.sep.aligns[_]]),a.meta.sep.wraps[_]&&t.attrs.push(["class","extend"]),y=M[_]=t,u.multiline&&r.meta.multiline&&r.meta.mbounds){for(k=new Array(r.map[0]).fill("").concat([k.trimRight()]),w=1;w<r.meta.mbounds.length;w++)_>r.meta.mbounds[w].length-2||(C=[r.meta.mbounds[w][_]+1,r.meta.mbounds[w][_+1]],k.push(e.src.slice.apply(e.src,C).trimRight()));for(v=new e.md.block.State(k.join(`
`),e.md,e.env,[]),v.level=r.level+1,e.md.block.tokenize(v,r.map[0],v.lineMax),T=0;T<v.tokens.length;T++)e.tokens.push(v.tokens[T])}else t=e.push("inline","",0),t.content=k.trim(),t.map=r.map,t.level=r.level+1,t.children=[];t=e.push(h+"_close",h,-1)}e.push("tr_close","tr",-1),r.meta.grp&1&&(h=r.meta.type===256?"thead":"tbody",t=e.push(h+"_close",h,-1),E[1]=r.map[1])}return D[1]=Math.max(E[1],a.meta.sep.map[1],a.meta.cap?a.meta.cap.map[1]:-1),t=e.push("table_close","table",-1),e.line=D[1],!0}f.block.ruler.at("table",G,{alt:["paragraph","reference"]})};const P=W(J);export{P as m};
