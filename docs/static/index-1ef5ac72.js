import{R as m,r as i}from"./react-0d9c9f23.js";import{r as ha,a as pa}from"./react-dom-b710246a.js";import{_ as Ue,R as ya}from"./monaco-editor-5cf1114e.js";import{T as wt,B as I,a as ue,P as nt,b as Ie,I as le,E as wa,A as jn,D as Wn,C as qn,H as ba,M as yn,c as xa,d as Ca,e as ka,f as wn,g as Lt,h as Ir,i as Ea,v as va,j as Sa,Z as Dr,k as Sn,l as bt,m as Tn,n as In,o as Ta,p as Dn,q as me,r as Mn,s as Mr,t as $t,u as Ln,w as Kt,x as Ut,y as at,z as Ia,S as Da,F as Ma,G as Rt,J as La,K as en,L as Ra,N as Kn,O as Un,Q as Vn,R as Lr,U as $a,V as U,W as Jn,X as Rr,Y as $r,_ as Aa,$ as Fa,a0 as Rn,a1 as Pa,a2 as za,a3 as _a,a4 as $n,a5 as Ba,a6 as Na,a7 as Ha,a8 as Oa,a9 as ja,aa as Wa,ab as qa,ac as Ka,ad as Ar,ae as Fr,af as Gn,ag as Ua,ah as Va,ai as Pr,aj as Ja,ak as zr,al as Ga,am as Xa,an as Ya,ao as Za,ap as Qa,aq as eo,ar as _r,as as to,at as An,au as st,av as It,aw as Bt,ax as lt,ay as no,az as ct,aA as ro,aB as ao,aC as Br,aD as oo,aE as Xn,aF as an,aG as on,aH as Dt,aI as io,aJ as so,aK as lo,aL as co,aM as uo,aN as mo,aO as go,aP as fo,aQ as ho,aR as Yn,aS as Zn,aT as Qn,aU as Re,aV as po,aW as yo,aX as er,aY as wo,aZ as bo,a_ as bn,a$ as tr}from"./@mui-06dd8f5f.js";import{g as Vt}from"./gsap-cf87e9ff.js";import{i as Qe}from"./i18next-2edfafb0.js";import{u as xo,a as nr,b as Co,D as ko,c as Eo,S as vo,v as So,d as To,C as Io,T as Do,M as Mo}from"./@dnd-kit-b0134b90.js";import{m as Lo}from"./markdown-it-multimd-table-766322c9.js";import{m as Ro}from"./markdown-it-github-toc-d2e55c92.js";import{m as $o}from"./markdown-it-task-lists-4fbe77b0.js";import{e as Ao}from"./markdown-it-emoji-66d1da7f.js";import{b as Fn,o as se,t as Pn,r as de}from"./mobx-890d6d9e.js";import{o as Fe}from"./mobx-react-49086c1a.js";import{u as ye,i as Fo}from"./react-i18next-093df503.js";import{c as rr}from"./clsx-29d81c80.js";import{l as Po,F as zo}from"./@monaco-editor-41149cb1.js";import{h as _o}from"./html2canvas-a81bcda4.js";import{R as Bo}from"./react-resizable-44dc0d2e.js";import{B as No}from"./i18next-browser-languagedetector-953d2d0b.js";import"./@babel-518c05f7.js";import"./scheduler-765c72db.js";/* empty css                      */import"./@emotion-c98c060d.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-transition-group-5217f7e1.js";import"./@popperjs-61ffd834.js";import"./prop-types-c01d55b3.js";import"./react-is-11039b32.js";import"./uslug-b4eaf0e7.js";import"./unorm-1228fe77.js";import"./mobx-react-lite-64872c2a.js";import"./use-sync-external-store-3bf5d15d.js";import"./state-local-dd516420.js";import"./react-draggable-4a1d91b3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const Ho=[];async function ke(t){if(!t)throw new Error("A non-empty URL must be provided.");let e=new URL(t);async function n(r){try{const o=await fetch(r);if(!o.ok)throw new Error("Network response was not ok "+o.statusText);const a=o.body.getReader(),s=new TextDecoder;let l=0,c="";for(;;){const{done:d,value:u}=await a.read();if(d)break;c+=s.decode(u,{stream:!0}),l+=u.length}return c}catch(o){throw console.error("Error:",o),o}}if(Ho.includes(e.pathname))try{const r=await n(t),o=new Blob([r],{type:"application/javascript"}),a=URL.createObjectURL(o);return await Ue(()=>import(a),[],import.meta.url)}catch(r){console.error("Failed to load module:",r)}else try{return e.host=window._cdn.cdn[0],await Ue(()=>import(e.toString()),[],import.meta.url)}catch{return window._cdn.failed.includes(e.host)||(window._cdn.failed.push(e.host),window._cdn.cdn=window._cdn.cdn.filter(o=>o!==e.host)),ke(t)}}const Et=["cdn.mengze.vip","fastly.jsdelivr.net","cdn.jsdmirsror.com","cdn.jsdelivr.net"];async function Oo(){const t=localStorage.getItem("preferred_cdn");if(t&&Et.includes(t)){const e=Et.indexOf(t);e>-1&&(Et.splice(e,1),Et.unshift(t))}window._cdn={failed:[],index:0,cdn:[...Et]}}async function jo(){return new Promise(async t=>{async function e(r,o=2e3){const a=new AbortController,s=a.signal,l=`https://${r}/npm/bigonion-kit@0.12.6/package.json`,c=setTimeout(()=>{a.abort()},o);try{const d=performance.now(),u=await fetch(l,{method:"HEAD",signal:s,cache:"no-store"}).catch(()=>fetch(l,{signal:s,cache:"no-store"})),g=performance.now();if(clearTimeout(c),!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);const y=g-d;return{domain:r,latency:y}}catch{return null}}function n(r){return new Promise((o,a)=>{let s=0,l=!1;r.forEach(c=>{e(c,1500).then(d=>{l||(d?(l=!0,o(d.domain)):(s++,s===r.length&&a(new Error("All CDNs failed"))))})})})}try{const r=n(window._cdn.cdn),o=new Promise((s,l)=>setTimeout(()=>l(new Error("Timeout")),1e3)),a=await Promise.race([r,o]);if(a){console.log(`[CDN] Fastest detected: ${a}`);const s=window._cdn.cdn,l=s.indexOf(a);l>-1&&(s.splice(l,1),s.unshift(a)),localStorage.setItem("preferred_cdn",a)}}catch{}finally{t()}})}async function Wo(){const t=async(a,s,l)=>{if(document.querySelector(`[data-id="${s}"]`))return;const c=await fetch(l);if(!c.ok)throw new Error(`Failed to fetch ${l}`);const d=await c.text();if(a==="script"&&(d.match(/define$/g)||[]).length>1)throw new Error(`Script at ${l} has multiple anonymous define calls`);const u=document.createElement(a);u.textContent=d,u.setAttribute("data-id",s),document.head.appendChild(u)},e=window._cdn.cdn[0],n=[{id:"katex",cdnUrl:`https://${e}/npm/katex@0.16.7/dist/katex.min.js`},{id:"IncrementalDOM",cdnUrl:`https://${e}/npm/incremental-dom@0.7.0/dist/incremental-dom-min.js`},{id:"markdownitIncrementalDOM",cdnUrl:`https://${e}/npm/markdown-it-incremental-dom/dist/markdown-it-incremental-dom.min.js`}],r=[{id:"githubMd",cdnUrl:`https://${e}/npm/clue-parser@1.0.3/src/githubMd.min.css`},{id:"clue-parser",cdnUrl:`https://${e}/npm/clue-parser@1.0.4/index.min.css`}];async function o(a,s,l){try{await s(l,a.id,a.cdnUrl)}catch{let d=new URL(a.cdnUrl);d.host=window._cdn.cdn[1]?window._cdn.cdn[1]:d.host,await s(l,a.id,d.toString())}}for(const a of n)await o(a,t,"script");for(const a of r)await o(a,t,"style")}async function qo(){const t=[{id:"katex",cdnUrl:"https://cdn.jsdmirror.com/npm/katex@0.16.7/dist/katex.min.js"},{id:"incremental-dom",cdnUrl:"https://cdn.jsdmirror.com/npm/incremental-dom@0.7.0/dist/incremental-dom-min.js"},{id:"markdown-it-incremental-dom",cdnUrl:"https://cdn.jsdmirror.com/npm/markdown-it-incremental-dom/dist/markdown-it-incremental-dom.min.js"}];for(const{id:e,cdnUrl:n}of t){const r=document.createElement("script");r.src=n,r.crossOrigin="anonymous",document.head.appendChild(r)}}function Xe(t,e){const n=window.updateLoadingProgress;if(typeof n=="function")n(t,e);else{const r=document.getElementById("loading-progress");r&&(r.textContent=t)}}const Ko=()=>{const t=localStorage.getItem("i18nextLng")||"zh-CN";document.documentElement.lang=t};(async function(){try{Xe("æ­£åœ¨åˆå§‹åŒ–è¯­è¨€è®¾ç½®...","Initializing language settings..."),Ko(),Xe("æ­£åœ¨åˆå§‹åŒ–CDNé…ç½®...","Initializing CDN configuration..."),await Oo(),Xe("æ­£åœ¨æµ‹è¯•CDNè¿æ¥...","Testing CDN connections..."),await jo(),Xe("æ­£åœ¨åŠ è½½æ ¸å¿ƒè„šæœ¬...","Loading core scripts..."),await Wo(),Xe("æ­£åœ¨é¢„åŠ è½½èµ„æº...","Preloading resources..."),await qo(),Xe("åˆå§‹åŒ–å®Œæˆï¼Œæ­£åœ¨å¯åŠ¨åº”ç”¨...","Initialization complete, starting app...")}catch(e){console.error("[PreInit] åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:",e),Xe("åˆå§‹åŒ–é‡åˆ°é—®é¢˜ï¼Œæ­£åœ¨å°è¯•ç»§ç»­...","Encountered issues during initialization, trying to continue...")}})();function Uo(t=window.editor){const e=t??window.editor;var n=e.getSelection(),r=n.startLineNumber,o=n.startColumn,a=n.endLineNumber,s=n.endColumn,l=e.getModel().getValueInRange({startLineNumber:r,startColumn:o,endLineNumber:a,endColumn:s});return l}function ot(t,e,n=window.editor,r=window.monaco){const o=window.editor,a=t,s=window.editor.getSelections()[0];o.executeEdits("img-insert",[{range:new window.monaco.Range(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn),text:a,forceMoveMarkers:e}])}function Vo(t){navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(t).catch(e=>{console.error("Failed to copy text using Clipboard API: ",e),ar(t)}):ar(t)}function ar(t){try{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="1px",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")?console.log("Text copied to clipboard using execCommand."):console.error("Fallback: Failed to copy text using execCommand."),document.body.removeChild(e)}catch(e){console.error("Fallback: Unable to copy text to clipboard: ",e)}}class Nr{version="0.2";setItem(e,n){localStorage.setItem(e,n)}getItem(e){return localStorage.getItem(e)?localStorage.getItem(e):""}removeItem(e){localStorage.removeItem(e)}}const Jo=`[TOC]\r
\r
## æ–°ä¸€ä»£çš„â€œMarkdownâ€ç¼–è¾‘å™¨ğŸ“£\r
\r
1. å¦‚æœä½ è¿˜ä¸æ¸…æ¥šä»€ä¹ˆæ˜¯markdownçš„è¯è¯·ç§»æ­¥[markdownç®€ä»‹](https://markdown.com.cn/cheat-sheet.html#æ€»è§ˆ), ä¸‹é¢æ˜¯ä¸€äº›ç®€çŸ­çš„ä»‹ç»ï¼š\r
   - å·¦è¾¹æ˜¯æºä»£ç \r
   - å³è¾¹æ˜¯æ¸²æŸ“å‡ºæ¥çš„ç»“æœ\r
   - è¯•ç€åœ¨æ–°çš„ä¸€è¡Œæ‰“å‡ºä¸€ä¸ª# ä½ å¥½, åœ¨å³è¾¹å°±ä¼šå‘ç°å˜æˆæ ‡é¢˜äº†ï¼\r
\r
## ä¸€ã€QQå’©å’©å¥½ç”¨åˆ°çˆ†ç‚¸çš„Markdownç¼–è¾‘å™¨ğŸ˜€\r
\r
1. ç›®å‰å…¨ä¸–ç•Œæœ€å¥½ç”¨çš„onionå†™çš„Webç«¯Markdownå…è´¹ç¼–è¾‘å™¨\r
2. åœ¨æ–°çš„ä¸€è¡Œæ‰“ä¸€ä¸ªæ–œæ å­—ç¬¦ï¼š\`/\`ï¼Œå³å¯çœ‹åˆ°æµç¨‹å›¾ã€ä»£ç å—ç­‰å¿«æ·æç¤ºï¼\r
3. é¼ æ ‡å³é”®ä¹Ÿæœ‰ä¸€å †ç¥å¥‡åŠŸèƒ½ï¼\r
4. å¯¼å‡ºä¸ºPDFåœ¨å³ä¸Šè§’æ›´å¤šé‡Œï¼Œç›´æ¥æŒ‰ä¸‹\`Ctrl + P\`ä¹Ÿå¯ä»¥å“¦\r
5. å…è´¹ã€ä¸é™æ—¶é•¿ã€é«˜å‡†ç¡®ç‡çš„è¯­éŸ³è½¬æ–‡å­—ï¼Œè¿˜ä¸å¿«æ¥è¯•è¯•ï¼\r
6. æœ€æ™ºèƒ½çš„åŒæ­¥æ»šåŠ¨ç®—æ³•ï¼Œæœ€é«˜æ•ˆçš„ä»£ç æ¸²æŸ“æ•ˆç‡ï¼Œæœ€ç°ä»£çš„UIç•Œé¢ï¼Œæœ€é…·ç‚«çš„ç¥å¥‡åŠŸèƒ½ï¼\r
7. åŒå‡»å³ä¾§èƒ½å¿«é€Ÿå®šä½åˆ°å·¦ä¾§å¯¹åº”ä»£ç ï¼Œè¯´çœŸçš„ï¼Œç”¨è¿‡çš„éƒ½è¯´å¤ªæ–¹ä¾¿äº†ï¼\r
8. æœ€å…¨å¿«æ·é”®ï¼Œæ²¡æœ‰ä¹‹ä¸€\r
   - \`Ctrl + V\` ä¸Šä¼ å¤åˆ¶å’Œæˆªå›¾çš„JPGã€PNGæ ¼å¼å›¾ç‰‡\r
   - \`Ctrl + Z\` æ’¤å›ç¼–è¾‘\r
   - \`Ctrl + F\` æŸ¥æ‰¾ä¸æ›¿æ¢\r
   - \`Ctrl + E/R\` æ–‡æœ¬å±…ä¸­/å³\r
   - \`Ctrl + B\` æ–‡æœ¬åŠ ç²—\r
   - \`Ctrl + U\` ä¸‹åˆ’çº¿\r
   - \`Ctrl + I\` æ–‡æœ¬æ–œä½“\r
   - \`Ctrl + 1-4\` 1-4çº§æ ‡é¢˜\r
   - \`\` Ctrl + \` \`\` åˆ é™¤çº¿\r
   - \`Ctrl + Q\` åŒæ­¥æ»šåŠ¨\r
   - \`Ctrl + Shift + F\` æ–‡ä»¶ç®¡ç†å™¨\r
   - \`Ctrl + S\` ä¿å­˜\r
   - \`Ctrl + M\` æ’å…¥ä¸€ä¸ªLaTexä»£ç å—\r
   - \`Shift + Alt + F\` æ ¼å¼åŒ–Markdown\r
   - \`Ctrl + Alt + V\` è¯­éŸ³è½¬æ–‡å­—\r
   - æ›´å¤šå¿«æ·é”®ï¼Œæ•¬è¯·æœŸå¾…...\r
\r
## äºŒã€å¸¸ç”¨çš„Makrdownè¯­æ³•\r
\r
- è¿™å°±ç”¨äº†æ— åºåˆ—è¡¨äº†ï¼Œé‚£ä½ çŒœçŒœï¼Œæœ‰åºåˆ—è¡¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\r
- ä½ å¥½ï¼Œæˆ‘æ˜¯å¸¦è¯­æ³•æç¤ºçš„LaTexï¼è¯­æ³•å‚è§ï¼š[LaTexå…¬ç¤ºè¡¨](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
  $$\r
  \\lambda+1=\\lambda^3-1\r
  $$\r
- ä¸æ•™å­¦äº†ï¼ŒçœŸçš„**å¾ˆç®€å•**ï¼\r
\r
## ä¸‰ã€æµç¨‹å›¾ï¼Ÿæ€ç»´å¯¼å›¾ï¼Ÿé¥¼å›¾ï¼Ÿç»Ÿç»Ÿæ‹¿ä¸‹ï¼âœ¨\r
\r
å¯¹ï¼Œå°±åœ¨ä¸‹é¢ï¼Œæ‰“ä¸€ä¸ªæ–œæ /ï¼Œå†æ‰“flowï¼Œå›è½¦ï¼\r
\r
\`\`\`mermaid\r
flowchart LR\r
Start --> Stop\r
\`\`\`\r
\r
## å››ã€è¶…Newbeeçš„å›¾ç‰‡ç®¡ç†å™¨\r
\r
1. ç‚¹å‡»å³ä¸Šè§’æ›´å¤šæ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹å¹¶æˆæƒ\r
2. æˆªå›¾ ï¼ˆæˆ–è€…æ˜¯å¤åˆ¶å›¾ç‰‡æ–‡ä»¶ï¼‰\r
3. ç²˜è´´ ï¼ˆåˆ°è¿™é‡Œä»»ä½•åœ°æ–¹ï¼‰\r
\r
æ˜¯çš„ï¼Œå°±è¿™ä¹ˆç®€å•ï¼ï¼\r
\r
## äº”ã€æä¸Šæ—¥ç¨‹\r
\r
- ååŒåŠå…¬\r
- åˆ†äº«\r
- åœ¨çº¿è¿è¡ŒPython\r
\r
## å…­ã€å…³äºæˆ‘å’Œè¿™ä¸ªé¡¹ç›®\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: å°±æ˜¯è§£é‡Šä¸€äº›ä¸œè¥¿çš„è„šæ³¨å•¦ï¼\r
[^2]: è¿™æ˜¯ç¬¬äºŒä¸ªè„šæ³¨ï¼\r
`,Go=`[TOC]\r
\r
## Next-Generation "Markdown" EditorğŸ“£\r
\r
1. If you're not familiar with Markdown, please visit [Markdown Introduction](https://markdown.com.cn/cheat-sheet.html#overview). Here's a brief introduction:\r
   - The left side is the source code\r
   - The right side is the rendered result\r
   - Try typing \`# Hello\` on a new line, and you'll see it becomes a heading on the right!\r
\r
## 1. The Most Amazing Markdown Editor EverğŸ˜€\r
\r
1. Currently the world's best free web-based Markdown editor written by onion\r
2. Type a forward slash character: \`/\` on a new line to see quick suggestions for flowcharts, code blocks, and more!\r
3. Right-click also has a bunch of magical features!\r
4. Export to PDF is in the "More" menu at the top right, or press \`Ctrl + P\` directly\r
5. Free, unlimited duration, high-accuracy speech-to-text conversion - come try it!\r
6. The smartest synchronized scrolling algorithm, most efficient code rendering, most modern UI interface, and coolest magical features!\r
7. Double-click on the right side to quickly locate the corresponding code on the left - seriously, everyone who's used it says it's super convenient!\r
8. The most comprehensive keyboard shortcuts, bar none:\r
   - \`Ctrl + V\` Upload copied and screenshot JPG/PNG images\r
   - \`Ctrl + Z\` Undo edit\r
   - \`Ctrl + F\` Find and replace\r
   - \`Ctrl + E/R\` Center/right align text\r
   - \`Ctrl + B\` Bold text\r
   - \`Ctrl + U\` Underline\r
   - \`Ctrl + I\` Italic text\r
   - \`Ctrl + 1-4\` Level 1-4 headings\r
   - \`\` Ctrl + \` \`\` Strikethrough\r
   - \`Ctrl + Q\` Synchronized scrolling\r
   - \`Ctrl + Shift + F\` File manager\r
   - \`Ctrl + S\` Save\r
   - \`Ctrl + M\` Insert a LaTeX code block\r
   - \`Shift + Alt + F\` Format Markdown\r
   - \`Ctrl + Alt + V\` Speech to text\r
   - More shortcuts coming soon...\r
\r
## 2. Common Markdown Syntax\r
\r
- This uses an unordered list - can you guess what an ordered list looks like?\r
- Hello, I'm LaTeX with syntax highlighting! For syntax reference, see: [LaTeX Formula Table](https://blog.csdn.net/Yushan_Ji/article/details/134322574)\r
  $$\r
  \\lambda+1=\\lambda^3-1\r
  $$\r
- No more tutorials - it's really **that simple**!\r
\r
## 3. Flowcharts? Mind Maps? Pie Charts? We've Got Them All!âœ¨\r
\r
Yes, right below! Type a forward slash \`/\`, then type "flow", and press Enter!\r
\r
\`\`\`mermaid\r
flowchart LR\r
Start --> Stop\r
\`\`\`\r
\r
## 4. Super User-Friendly Image Manager\r
\r
1. Click "More" in the top right corner to open the file manager, open a folder and grant authorization\r
2. Take a screenshot (or copy an image file)\r
3. Paste (anywhere here)\r
\r
Yes, it's that simple!!\r
\r
## 5. On the Agenda\r
\r
- Collaborative Office\r
- Sharing\r
- Online Python Execution\r
\r
## 6. About Me and This Project\r
\r
https://github.com/LiWeny16/MarkdownOnline\r
\r
[^1]: These are footnotes for explaining things!\r
[^2]: This is the second footnote!\r
`;function rt(t,e=1,n){return new Promise((r,o)=>{var a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;let s;const l=a.open(t,e);l.onsuccess=function(c){s=c.target.result,r(s)},l.onerror=function(c){console.log("æ•°æ®åº“æ‰“å¼€æŠ¥é”™"),o(c)},l.onupgradeneeded=function(c){s=c.target.result,n&&n(s,c)}})}function Xo(t,e,n){const r=t.transaction([e],"readwrite").objectStore(e).add(n);r.onsuccess=function(o){console.log("æ•°æ®å†™å…¥æˆåŠŸ")},r.onerror=function(o){console.error("æ•°æ®å†™å…¥å¤±è´¥",o)}}function Jt(t,e,n){return new Promise((r,o)=>{var a=t.transaction([e],"readwrite").objectStore(e).put(n);a.onsuccess=function(){r()},a.onerror=function(s){console.error("æ•°æ®æ›´æ–°å¤±è´¥:",s),o(s)}})}function Yo(t,e,n){return new Promise((r,o)=>{const s=t.transaction(e,"readonly").objectStore(e).get(n);s.onerror=function(l){o(l)},s.onsuccess=function(l){r(s.result)}})}function Gt(t,e){return new Promise(n=>{let r=[];const o=t.transaction(e,"readwrite").objectStore(e).openCursor();o.onsuccess=function(a){const s=a.target.result;s?(r.push(s.value),s.continue()):n(r)},o.onerror=function(a){console.error("æ¸¸æ ‡æ“ä½œé”™è¯¯",a)}})}function Zo(t,e,n,r){return new Promise(o=>{let a=[];const s=t.transaction(e,"readwrite"),d=s.objectStore(e).index(n).openCursor(IDBKeyRange.only(r));d.onsuccess=function(u){const g=u.target.result;g?(a.push(g.value),g.continue()):o(a)},s.onerror=function(){}})}function jd(t,e,n){var r=t.transaction([e],"readwrite").objectStore(e).delete(n);r.onsuccess=function(){console.log("æ•°æ®åˆ é™¤æˆåŠŸ")},r.onerror=function(){console.log("æ•°æ®åˆ é™¤å¤±è´¥")}}function Qo(t,e,n,r){var o=t.transaction(e,"readwrite").objectStore(e),a=o.index(n).openCursor(IDBKeyRange.only(r));a.onsuccess=function(s){var l=s.target.result,c;l&&(c=l.delete(),c.onerror=function(){console.log("æ¸¸æ ‡åˆ é™¤è¯¥è®°å½•å¤±è´¥")},c.onsuccess=function(){console.log("æ¸¸æ ‡åˆ é™¤è¯¥è®°å½•æˆåŠŸ")},l.continue())},a.onerror=function(s){}}function ei(t){let e=window.indexedDB.deleteDatabase(t);e.onerror=function(n){console.log("åˆ é™¤å¤±è´¥")},e.onsuccess=function(n){console.log("åˆ é™¤æˆåŠŸ")}}async function Wd(t,e,n){try{const r=await fetch(t);if(!r.ok)throw new Error(`ç½‘ç»œè¯·æ±‚å¤±è´¥: ${r.status}`);const o=r.headers.get("Content-Length");o||console.warn("æ— æ³•è·å– Content-Lengthï¼Œæ— æ³•è®¡ç®—ä¸‹è½½è¿›åº¦");const a=r.body?.getReader();if(!a)throw new Error("è¯»å–æµå¤±è´¥");let s=0;const l=[],c=o?parseInt(o,10):0;for(;;){const{done:x,value:h}=await a.read();if(x)break;if(l.push(h),s+=h.length,c&&n){const w=Math.round(s/c*100);n(w)}}const d=new Uint8Array(s);let u=0;for(const x of l)d.set(x,u),u+=x.length;const g=JSON.parse(new TextDecoder("utf-8").decode(d)),y=await rt("cache_DB",1,(x,h)=>{x.objectStoreNames.contains("data")||x.createObjectStore("data",{keyPath:"id",autoIncrement:!0})});await Xo(y,"data",{id:e,data:g}),n&&n(100),console.log("JSONæ•°æ®å·²æˆåŠŸå­˜å…¥ IndexedDB")}catch(r){console.error("è·å–æˆ–å­˜å‚¨ JSON æ•°æ®æ—¶å‡ºé”™:",r),n&&n(-1)}}async function ti(t){try{const e=await rt("cache_DB",1),n=await Yo(e,"data",t);return n?n.data:null}catch{return null}}let Ze=null,ni=0;const ri=()=>(Ze||(Ze=document.createElement("div"),Ze.className="mui-alert-wrapper",Ze.style.cssText=`
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
    `,document.body.appendChild(Ze)),Ze),Hr=()=>{const t=ge()==="dark",e={light:{backgroundColor:"#ffffff",borderColor:"#d9d9d9",textColor:"#000000d9",shadowColor:"rgba(0,0,0,.12)"},dark:{backgroundColor:"#2f2f2f",borderColor:"#424242",textColor:"#ffffffd9",shadowColor:"rgba(0,0,0,.25)"}},n=t?"dark":"light";return{...e,current:n,currentColors:e[n]}},ai=t=>{const e=Hr(),n=e.currentColors,r={minWidth:"160px",maxWidth:"400px",width:"fit-content",border:"1px solid",borderRadius:"6px",boxShadow:`0 3px 6px -4px ${n.shadowColor}, 0 6px 16px 0 ${n.shadowColor}, 0 9px 28px 8px ${n.shadowColor}`,fontSize:"14px",fontWeight:400,padding:"10px 16px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",pointerEvents:"auto",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',lineHeight:"1.5715",backgroundColor:n.backgroundColor,borderColor:n.borderColor,color:n.textColor},o={success:e.current==="dark"?"#52c41a40":"#ffffff",error:e.current==="dark"?"#ff4d4f40":"#ffffff",warning:e.current==="dark"?"#faad1440":"#ffffff",info:e.current==="dark"?"#1890ff40":"#ffffff"};return{...r,borderColor:o[t]}},oi=t=>{const e=document.createElement("span");e.style.cssText=`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    margin-right: 6px;
    flex-shrink: 0;
  `;const n={success:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 6.1L7.1 10.4c-.2.2-.4.3-.7.3s-.5-.1-.7-.3L3.5 8.2c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L6.4 8.3l3.7-3.7c.4-.4 1-.4 1.4 0s.4 1 0 1.5z"/>
      </svg>`,color:"#52c41a"},error:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3s-.5-.1-.7-.3L8 9.4l-2.1 2.1c-.2.2-.4.3-.7.3s-.5-.1-.7-.3c-.4-.4-.4-1 0-1.4L6.6 8 4.5 5.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L8 6.6l2.1-2.1c.4-.4 1-.4 1.4 0s.4 1 0 1.4L9.4 8l2.1 2.1z"/>
      </svg>`,color:"#ff4d4f"},warning:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8.7.1c-.4-.2-.9-.2-1.3 0-.2.1-.4.2-.5.4L.2 13.2c-.2.4-.2.8 0 1.2.1.2.3.3.5.4.2.1.4.1.6.1h13.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.4.2-.4.2-.8 0-1.2L8.2.5c-.1-.2-.3-.3-.5-.4zM9 12H7v-2h2v2zm0-3H7V5h2v4z"/>
      </svg>`,color:"#faad14"},info:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm1 12H7V7h2v5zm0-6H7V4h2v2z"/>
      </svg>`,color:"#1890ff"}},r=n[t]||n.success;return e.innerHTML=r.html,e.style.color=r.color,e},ii=()=>{const e=Hr().current==="dark",n=document.createElement("span");return n.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
    <path d="M6.8 6l4.6-4.6c.2-.2.2-.5 0-.7s-.5-.2-.7 0L6 5.3 1.4.7c-.2-.2-.5-.2-.7 0s-.2.5 0 .7L5.3 6 .7 10.6c-.2.2-.2.5 0 .7.1.1.2.1.4.1s.3 0 .4-.1L6 6.8l4.6 4.6c.1.1.2.1.4.1s.3 0 .4-.1c.2-.2.2-.5 0-.7L6.8 6z"/>
  </svg>`,n.style.cssText=`
    margin-left: auto;
    cursor: pointer;
    opacity: 0.45;
    padding: 4px;
    border-radius: 2px;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    color: ${e?"#ffffff73":"#00000073"};
  `,n.addEventListener("mouseenter",()=>{n.style.opacity="0.75"}),n.addEventListener("mouseleave",()=>{n.style.opacity="0.45"}),n},si=(t,e,n)=>{const r=n?.zIndex??9999,o=n?.kind??"success",a=e??2500,l={success:"success",error:"error",warning:"warning",info:"info"}[o]||"success",c=ri();c.style.zIndex=String(r);const d=document.createElement("div");d.className="mui-alert-item",d.setAttribute("data-alert-id",String(++ni));const u=ai(l);Object.assign(d.style,u);const g=oi(l),y=document.createElement("span");y.textContent=t,y.style.cssText=`
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
    text-align: left;
  `;const x=ii();d.appendChild(g),d.appendChild(y),d.appendChild(x),c.appendChild(d),Vt.fromTo(d,{y:-30,opacity:0,scale:.9},{duration:.3,y:0,opacity:1,scale:1,ease:"back.out(1.2)"});const h=()=>{Vt.to(d,{duration:.25,y:-20,opacity:0,scale:.9,ease:"power2.in",onComplete:()=>{d.parentNode&&(c.removeChild(d),c.children.length===0&&(document.body.removeChild(c),Ze=null))}})};x.addEventListener("click",w=>{w.stopPropagation(),h()}),a>0&&setTimeout(h,a)},A=(t,e,n)=>{si(t,e,n)};function li(){try{if(!window.indexedDB)return!1;const t=window.indexedDB.open("test-support-check");return t.onerror=()=>!1,!0}catch{return!1}}let or=!1,sn=!1;function Or(){if(!or&&(sn=li(),or=!0,!sn)){const t=Qe.t,e=t?t("indexeddb-not-supported","æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæˆ–ç¦ç”¨äº†IndexedDBï¼Œæ•°æ®å°†æ— æ³•æœ¬åœ°ä¿å­˜"):"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæˆ–ç¦ç”¨äº†IndexedDBï¼Œæ•°æ®å°†æ— æ³•æœ¬åœ°ä¿å­˜";A(e,5e3,{kind:"error"}),console.error("IndexedDB ä¸è¢«æ”¯æŒï¼Œæ•°æ®æŒä¹…åŒ–åŠŸèƒ½å°†ä¸å¯ç”¨")}return sn}const Oe={name:"md_content",version:2,stores:{users_md:{keyPath:"uuid"},users_img:{keyPath:"uuid",index:{name:"uuid",unique:!1}}}};async function jr(){try{const t=await rt(Oe.name,Oe.version,(a,s)=>{xn(a,s)}),e=Array.from(t.objectStoreNames),r=Object.keys(Oe.stores).filter(a=>!e.includes(a));if(r.length===0)return t;console.warn(`æ•°æ®åº“è¡¨ç»“æ„ä¸å®Œæ•´ï¼Œç¼ºå¤±: ${r.join(", ")}`),A("æ£€æµ‹åˆ°æ•°æ®åº“è¡¨ç¼ºå¤±ï¼Œæ­£åœ¨é‡å»ºæ•°æ®åº“...",3e3,{kind:"warning"}),t.close(),await ci();const o=await rt(Oe.name,Oe.version,(a,s)=>{xn(a,s)});return A("æ•°æ®åº“é‡å»ºæˆåŠŸ",2e3,{kind:"success"}),o}catch(t){throw console.error("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥:",t),A("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Œæ•°æ®å¯èƒ½æ— æ³•ä¿å­˜",4e3,{kind:"error"}),t}}async function ci(){const t=await di();return new Promise((e,n)=>{console.log("å¼€å§‹åˆ é™¤æŸåçš„æ•°æ®åº“..."),t.hasData?A("æ£€æµ‹åˆ°ç°æœ‰æ•°æ®ï¼Œå°†å°è¯•åœ¨é‡å»ºåæ¢å¤",3e3,{kind:"info"}):A("é‡å»ºæ•°æ®åº“å¯èƒ½ä¼šä¸¢å¤±ç°æœ‰æ•°æ®",3e3,{kind:"warning"});const r=window.indexedDB.deleteDatabase(Oe.name);r.onsuccess=async()=>{if(console.log("âœ“ æ•°æ®åº“åˆ é™¤æˆåŠŸï¼Œç°åœ¨å¯ä»¥é‡æ–°åˆ›å»º"),t.hasData)try{await ui(t),console.log("âœ“ æ•°æ®æ¢å¤æˆåŠŸ")}catch(o){console.warn("æ•°æ®æ¢å¤å¤±è´¥ï¼Œä½†æ•°æ®åº“é‡å»ºæˆåŠŸ:",o)}e()},r.onerror=o=>{console.error("âœ— æ•°æ®åº“åˆ é™¤å¤±è´¥:",o),n(new Error("æ•°æ®åº“åˆ é™¤å¤±è´¥"))},r.onblocked=()=>{console.warn("æ•°æ®åº“åˆ é™¤è¢«é˜»å¡ï¼Œå¯èƒ½æœ‰å…¶ä»–è¿æ¥æœªå…³é—­"),setTimeout(()=>{e()},1e3)}})}async function di(){try{const t=await rt(Oe.name),e={hasData:!1};if(t.objectStoreNames.contains("users_md"))try{const n=await Gt(t,"users_md");n&&n.length>0&&(e.textData=n,e.hasData=!0)}catch(n){console.warn("æ–‡æœ¬æ•°æ®å¤‡ä»½å¤±è´¥:",n)}if(t.objectStoreNames.contains("users_img"))try{const n=await Gt(t,"users_img");n&&n.length>0&&(e.imageData=n,e.hasData=!0)}catch(n){console.warn("å›¾ç‰‡æ•°æ®å¤‡ä»½å¤±è´¥:",n)}return t.close(),e}catch(t){return console.warn("æ•°æ®å¤‡ä»½è¿‡ç¨‹å¤±è´¥:",t),{hasData:!1}}}async function ui(t){if(!t.hasData)return;const e=await rt(Oe.name,Oe.version,(n,r)=>{xn(n,r)});try{if(t.textData){for(const n of t.textData)await Jt(e,"users_md",n);console.log(`âœ“ æ¢å¤äº† ${t.textData.length} æ¡æ–‡æœ¬æ•°æ®`)}if(t.imageData){for(const n of t.imageData)await Jt(e,"users_img",n);console.log(`âœ“ æ¢å¤äº† ${t.imageData.length} æ¡å›¾ç‰‡æ•°æ®`)}A("æ•°æ®æ¢å¤æˆåŠŸ",2e3,{kind:"success"})}catch(n){console.error("æ•°æ®æ¢å¤å¤±è´¥:",n),A("æ•°æ®åº“é‡å»ºæˆåŠŸï¼Œä½†æ•°æ®æ¢å¤å¤±è´¥",3e3,{kind:"warning"})}finally{e.close()}}function xn(t,e){console.log(`æ•°æ®åº“å‡çº§ä¸­... ä» v${e.oldVersion} -> v${e.newVersion}`);for(const[n,r]of Object.entries(Oe.stores))if(t.objectStoreNames.contains(n))console.log(`âœ“ è¡¨ ${n} å·²å­˜åœ¨`);else try{const o=t.createObjectStore(n,{keyPath:r.keyPath});r.index&&o.createIndex(r.index.name,r.index.name,{unique:r.index.unique}),console.log(`âœ“ æˆåŠŸåˆ›å»º/ä¿®å¤è¡¨: ${n}`)}catch(o){console.error(`âœ— åˆ›å»º/ä¿®å¤è¡¨ ${n} å¤±è´¥:`,o)}}async function Pt(t,e,n="æ•°æ®åº“æ“ä½œ"){if(!Or())return e;let r=null;try{return r=await jr(),await t(r)}catch(o){console.error(`[${n}] å¤±è´¥:`,o);const a=o.message||"";return a.includes("quota")||a.includes("storage")?A("å­˜å‚¨ç©ºé—´ä¸è¶³ï¼Œè¯·æ¸…ç†æµè§ˆå™¨æ•°æ®åé‡è¯•",4e3,{kind:"error"}):a.includes("è¡¨")||a.includes("store")?A(`æ•°æ®åº“è¡¨å¼‚å¸¸ï¼š${n}å¤±è´¥`,3500,{kind:"error"}):A(`${n}å¤±è´¥ï¼Œè¯·åˆ·æ–°æˆ–ç¨åé‡è¯•`,3e3,{kind:"warning"}),e}finally{r&&r.close()}}async function mi(t){await Pt(async e=>{await Jt(e,"users_md",{uuid:1,contentText:t}),console.log("æ–‡æœ¬æ•°æ®ä¿å­˜æˆåŠŸ")},void 0,"ä¿å­˜æ–‡æœ¬")}async function Wr(){return Pt(async t=>{const e=await Gt(t,"users_md");return Array.isArray(e)?e:[]},[],"è¯»å–æ–‡æœ¬")}async function gi(t,e){await Pt(async n=>{const r=t.map((o,a)=>Jt(n,"users_img",{uuid:e+a,imgBase64:o}));await Promise.all(r),console.log("æ‰¹é‡å›¾ç‰‡æ•°æ®ä¿å­˜æˆåŠŸ")},void 0,"æ‰¹é‡ä¿å­˜å›¾ç‰‡")}async function fi(t,e){return Pt(async n=>{const r=await Zo(n,"users_img",t,e);return Array.isArray(r)?r:[]},[],"è¯»å–å›¾ç‰‡")}async function hi(){return Pt(async t=>{const e=await Gt(t,"users_img");return Array.isArray(e)?e:[]},[],"è¯»å–æ‰€æœ‰å›¾ç‰‡")}async function pi(){if(console.log("æ­£åœ¨åˆå§‹åŒ–å’Œæ£€æŸ¥ Memory æ•°æ®åº“..."),!Or()){console.warn("âš  IndexedDB ä¸æ”¯æŒï¼Œåº”ç”¨å°†åœ¨æ— æ•°æ®åº“æ¨¡å¼ä¸‹è¿è¡Œ");return}let t=null;try{t=await jr(),console.log(`âœ“ Memory æ•°æ®åº“å·²å°±ç»ª (ç‰ˆæœ¬: ${t.version})`)}catch(e){console.error("âœ— Memory æ•°æ®åº“åˆå§‹åŒ–æœ€ç»ˆå¤±è´¥:",e),A("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Œæ•°æ®å°†æ— æ³•ä¿å­˜",5e3,{kind:"error"})}finally{t&&t.close()}}function yi(){return new Promise(t=>{Wr().then(e=>{if(e.length&&e[0].contentText)window.editor.setValue(e[0].contentText),t();else{const r=(pe().basic.language||"zh")==="en"?Go:Jo;window.editor.setValue(r),t()}})})}function At(){return window.editor?.getValue?window.editor.getValue():"null"}function wi(t){return t=t.replace(/\|---\|/g,'<div style="page-break-after: always;"></div>'),t}class dt{static instance;counter=0;baseTimestamp;constructor(){this.baseTimestamp=Date.now()}static getInstance(){return dt.instance||(dt.instance=new dt),dt.instance}generateId(e,n=!1){const r=e.replace(/[\/\\]/g,"_").replace(/[^a-zA-Z0-9_-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")||"root";this.counter++;const o=Math.floor(Math.random()*1e4),a=n?".lazy":"";return`${r}_${this.baseTimestamp}_${this.counter}_${o}${a}`}}const vt=dt.getInstance(),qr=["md","txt","go","java","kt","py","js","ts","html","css","c","cpp","json","mjs","jsx","tsx","ps1","cmd","xsl","toml","ipynb","makefile","yml"],ir=qr.map(t=>`.${t}`),tn=["jpg","jpeg","png","gif","bmp","webp","svg","fig"];class Le{static fileState=0;static fileHandle=null;static topDirectoryArray=[]}class Kr extends Le{constructor(e){super()}get fileState(){return Le.fileState}set fileState(e){Le.fileState=e}get fileHandle(){return Le.fileHandle}set fileHandle(e){Le.fileHandle=e}async openSingleFile(){try{return[this.fileHandle]=await window.showOpenFilePicker({multiple:!1,types:[{description:"Text Files",accept:{"text/plain":ir}}]}),this.fileState=0,this.fileHandle}catch(e){return console.error("Error opening file:",e),null}}async readFile(e){return this.fileHandle?await(await this.fileHandle.getFile()).text():void 0}async saveFileSilently(e){if(!this.fileHandle)return;const n=await this.fileHandle.createWritable(),r=e;return await n.write(r),await n.close(),!0}async saveAsFile(e){try{const r=await(await window.showSaveFilePicker({suggestedName:"text",types:[{description:"Text Files",accept:{"text/plain":ir}}]})).createWritable();await r.write(e??"Sth.."),await r.close(),console.log("File saved successfully as new file.")}catch(n){console.error("Save As operation cancelled or failed:",n)}}}class Ge extends Le{static topDirectoryHandle;currentDirectoryHandle;isWatching=!1;watchInterval=null;lastLazyLoadTime=0;constructor(e){super()}get topDirectoryArray(){return Le.topDirectoryArray}set topDirectoryArray(e){Le.topDirectoryArray=e}get fileState(){return Le.fileState}set fileState(e){Le.fileState=e}get fileHandle(){return Le.fileHandle}set fileHandle(e){Le.fileHandle=e}getTopDirectoryHandle(){return Ge.topDirectoryHandle}getCurrentDirectoryHandle(){return this.currentDirectoryHandle}async openDirectory(){try{const e=await window.showDirectoryPicker();return Ge.topDirectoryHandle=e,this.fileState=1,this.currentDirectoryHandle=e,e}catch(e){return console.error("Error opening directory:",e),null}}async readDirectoryAsArray(e,n=!1){async function r(s,l){const c=s.name,d=l?`${l}/${c}`:c,u=vt.generateId(d);if(s.kind==="file")return{id:u,label:c,fileType:"file",path:d};if(s.kind==="directory"){const g=[],y=[];for await(const[h,w]of s.entries())y.push([h,w]);y.sort((h,w)=>h[0].localeCompare(w[0]));for(const[h,w]of y){const k=await r(w,d);g.push(k)}let x={id:u,label:c,children:g,fileType:"folder",path:d};return n&&(Le.topDirectoryArray=[x]),x}}const o=[],a=[];for await(const[s,l]of e.entries())a.push([s,l]);a.sort((s,l)=>s[0].localeCompare(l[0]));for(let s=0;s<a.length;s++){const[l,c]=a[s],d=await r(c,"");o.push(d)}return o}async readDirectoryAsArrayOptimized(e,n=!1,r=0,o=0){async function a(s,l,c){const d=s.name,u=l?`${l}/${d}`:d,g=vt.generateId(u);if(s.kind==="file")return{id:g,label:d,fileType:"file",path:u};if(s.kind==="directory"){let y=[];if(r===0||c<r)try{const h=[],w=s.entries(),k=[],S=50;let E=[];for await(const D of w)if(h.push(D),h.length>=S)break;h.sort((D,O)=>D[0].localeCompare(O[0]));const P=10,$=[];for(let D=0;D<h.length;D++){const[O,j]=h[D];if($.push(a(j,u,c+1)),$.length>=P){const R=await Promise.all($);y.push(...R),$.length=0}}if($.length>0){const D=await Promise.all($);y.push(...D)}}catch(h){console.error(`Error reading directory ${u}:`,h)}else{const h=vt.generateId(`${u}/[lazy-placeholder]`,!0);y.push({id:h,label:"...",fileType:"lazy-placeholder",path:`${u}/[lazy-placeholder]`})}let x={id:g,label:d,children:y,fileType:"folder",path:u};return n&&(Le.topDirectoryArray=[x]),x}return null}try{const s=[],l=[];for await(const[u,g]of e.entries())l.push([u,g]);l.sort((u,g)=>u[0].localeCompare(g[0]));const c=15,d=[];for(let u=0;u<l.length;u++){const[g,y]=l[u];if(d.push(a(y,"",o)),d.length>=c){const x=await Promise.all(d);s.push(...x),d.length=0}}if(d.length>0){const u=await Promise.all(d);s.push(...u)}return s}catch(s){return console.error("Error in readDirectoryAsArrayOptimized:",s),await this.readDirectoryAsArray(e,n)}}async loadFolderLazily(e,n){try{this.lastLazyLoadTime=Date.now();const r=await this.getDirectoryHandleByPath(e,n);return await this.readDirectoryAsArrayLazilyWithPath(r,n,1)}catch(r){return console.error("Error loading folder lazily:",r),[]}}async readDirectoryAsArrayLazilyWithPath(e,n,r=1){try{async function o(l,c){const d=l.name,u=c?`${c}/${d}`:d,g=n?`${n}/${u}`:u,y=vt.generateId(g);if(l.kind==="file")return{id:y,label:d,fileType:"file",path:g};if(l.kind==="directory"){const x=vt.generateId(`${g}/[lazy-placeholder]`,!0);return{id:y,label:d,fileType:"folder",path:g,children:[{id:x,label:"...",fileType:"lazy-placeholder",path:`${g}/[lazy-placeholder]`}]}}}const a=[],s=[];for await(const[l,c]of e.entries())s.push([l,c]);s.sort((l,c)=>l[0].localeCompare(c[0]));for(const[l,c]of s){const d=await o(c,"");a.push(d)}return a}catch(o){return console.error("Error in readDirectoryAsArrayLazilyWithPath:",o),[]}}async listDirectoryAsObject(e){let n={};for await(const[r,o]of e.entries())o.kind==="file"?n[r]="file":o.kind==="directory"&&(n[r]=await this.listDirectoryAsObject(o));return n}async readFileContent(e,n,r=!1){console.log("readFileContent called with filePath:",n);const o=decodeURIComponent(n);console.log("decodedFilePath:",o);const a=o.split("/");console.log("pathParts:",a);let s=e;for(let g=0;g<a.length-1;g++){const y=a[g];y&&(console.log("Navigating to directory:",y),s=await s.getDirectoryHandle(y))}const l=a[a.length-1];console.log("Getting file:",l),console.log("Current directory contents:");try{for await(const[g,y]of s.entries())console.log("  -",g,y.kind)}catch(g){console.error("Error listing directory contents:",g)}const c=l.split(".").pop()?.toLowerCase();if(!c)throw new Error("æ— æ³•è¯†åˆ«æ–‡ä»¶æ‰©å±•åã€‚");console.log("Attempting to get file handle for:",l);const d=await s.getFileHandle(l);if(r){if(!(tn.includes(c)||c==="pdf"))throw A(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºå¯è¯»æ–‡ä»¶ã€‚`,1e3,{kind:"error"}),new Error(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºå¯è¯»æ–‡ä»¶ã€‚`)}else{if(!qr.includes(c))throw A(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚`,1e3,{kind:"error"}),new Error(`æ–‡ä»¶æ‰©å±•å .${c} ä¸è¢«æ”¯æŒä¸ºæ–‡æœ¬æ–‡ä»¶ã€‚`);this.fileHandle=d}const u=await d.getFile();if(r){const g=await u.arrayBuffer();return await this.arrayBufferToBase64(g,u.type)}else return await u.text()}async checkOrCreateNestedDirectory(e,n){try{const r=n.split("/").filter(Boolean);let o=e;for(const a of r)o=await o.getDirectoryHandle(a,{create:!0});return this.currentDirectoryHandle=o,o}catch(r){throw console.error("Error creating nested directory:",r),r}}async renameFolder(e,n,r){try{const o=await e.getDirectoryHandle(n),a=await e.getDirectoryHandle(r,{create:!0});for await(const s of o.values())if(s.kind==="file"){const l=await s.getFile(),d=await(await a.getFileHandle(s.name,{create:!0})).createWritable();await d.write(l),await d.close()}else s.kind==="directory"&&await this.copyDirectory(s,a);await e.removeEntry(n,{recursive:!0}),console.log(`Renamed folder from ${n} to ${r}`)}catch(o){console.error("Error renaming folder:",o)}}async writeFile(e,n,r){try{const a=await(await e.getFileHandle(n,{create:!0})).createWritable();await a.write(r),await a.close()}catch(o){throw console.error(`Error writing file ${n}:`,o),o}}async writeBase64ImageFile(e,n,r,o="/images"){try{const a=await this.checkOrCreateNestedDirectory(e,o);let s=0,l=0;for await(const y of a.values())if(y.kind==="file"){const x=y.name.match(/^(\d+)\.png$/);if(x){const h=parseInt(x[1],10);h>s&&(s=h)}}l=s+1;const c=r.split(",")[1],d=atob(c),u=new Uint8Array(d.length);for(let y=0;y<d.length;y++)u[y]=d.charCodeAt(y);const g=new Blob([u],{type:"image/png"});return await this.writeFile(a,l+n,g),l}catch(a){throw console.error("Error writing Base64 image file:",a),a}}async watchDirectory(e,n=1e3){this.isWatching||(this.isWatching=!0,this.watchInterval=setInterval(e,n))}stopWatching(){this.isWatching&&this.watchInterval&&(clearInterval(this.watchInterval),this.isWatching=!1,this.watchInterval=null)}async arrayBufferToBase64(e,n){return new Promise((r,o)=>{const a=new Blob([e],{type:n}),s=new FileReader;s.onloadend=()=>{const l=s.result;r(l)},s.onerror=l=>{o(l)},s.readAsDataURL(a)})}async copyDirectory(e,n){const r=await n.getDirectoryHandle(e.name,{create:!0});for await(const o of e.values())if(o.kind==="file"){const a=await o.getFile(),l=await(await r.getFileHandle(o.name,{create:!0})).createWritable();await l.write(a),await l.close()}else o.kind==="directory"&&await this.copyDirectory(o,r)}async createNewFile(e,n,r=`# New Document

Start writing here...`){try{const o=n.endsWith(".md")?n:`${n}.md`,s=await(await e.getFileHandle(o,{create:!0})).createWritable();await s.write(r),await s.close(),console.log(`Created new file: ${o}`)}catch(o){throw console.error("Error creating new file:",o),o}}async createNewFileAtPath(e,n,r,o=`# New Document

Start writing here...`){try{const a=await this.getDirectoryHandleByPath(e,n);await this.createNewFile(a,r,o)}catch(a){throw console.error("Error creating new file at path:",a),a}}async createNewFolder(e,n){try{const r=await e.getDirectoryHandle(n,{create:!0});return console.log(`Created new folder: ${n}`),r}catch(r){throw console.error("Error creating new folder:",r),r}}async createNewFolderAtPath(e,n,r){try{const o=await this.getDirectoryHandleByPath(e,n);return await this.createNewFolder(o,r)}catch(o){throw console.error("Error creating new folder at path:",o),o}}async getDirectoryHandleByPath(e,n){if(!n||n===""||n==="/")return e;const r=n.split("/").filter(a=>a!=="");let o=e;for(const a of r)o=await o.getDirectoryHandle(a);return o}async getFileHandleByPath(e,n){const r=n.split("/").filter(s=>s!==""),o=r.pop();if(!o)throw new Error("Invalid file path");let a=e;for(const s of r)a=await a.getDirectoryHandle(s);return await a.getFileHandle(o)}async deleteFile(e,n){try{await e.removeEntry(n),console.log(`Deleted file: ${n}`)}catch(r){throw console.error("Error deleting file:",r),r}}async deleteFileAtPath(e,n){try{const r=n.split("/").filter(s=>s!==""),o=r.pop();if(!o)throw new Error("Invalid file path");const a=await this.getDirectoryHandleByPath(e,r.join("/"));await this.deleteFile(a,o)}catch(r){throw console.error("Error deleting file at path:",r),r}}async deleteFolder(e,n){try{await e.removeEntry(n,{recursive:!0}),console.log(`Deleted folder: ${n}`)}catch(r){throw console.error("Error deleting folder:",r),r}}async deleteFolderAtPath(e,n){try{const r=n.split("/").filter(s=>s!==""),o=r.pop();if(!o)throw new Error("Invalid folder path");const a=await this.getDirectoryHandleByPath(e,r.join("/"));await this.deleteFolder(a,o)}catch(r){throw console.error("Error deleting folder at path:",r),r}}async renameFile(e,n,r){try{const a=await(await e.getFileHandle(n)).getFile(),l=await(await e.getFileHandle(r,{create:!0})).createWritable();await l.write(a),await l.close(),await e.removeEntry(n),console.log(`Renamed file from ${n} to ${r}`)}catch(o){throw console.error("Error renaming file:",o),o}}async renameFileAtPath(e,n,r){try{const o=n.split("/").filter(l=>l!==""),a=o.pop();if(!a)throw new Error("Invalid file path");const s=await this.getDirectoryHandleByPath(e,o.join("/"));await this.renameFile(s,a,r)}catch(o){throw console.error("Error renaming file at path:",o),o}}async renameFolderAtPath(e,n,r){try{const o=n.split("/").filter(l=>l!==""),a=o.pop();if(!a)throw new Error("Invalid folder path");const s=await this.getDirectoryHandleByPath(e,o.join("/"));await this.renameFolder(s,a,r)}catch(o){throw console.error("Error renaming folder at path:",o),o}}async moveFile(e,n,r){try{const a=await(await e.getFileHandle(r)).getFile(),{files:s}=await this.listDirectoryEntries(n),l=this.generateUniqueFileName(s,r),d=await(await n.getFileHandle(l,{create:!0})).createWritable();return await d.write(a),await d.close(),await e.removeEntry(r),console.log(`Moved file ${r} to target directory as ${l}`),l}catch(o){throw console.error("Error moving file:",o),o}}async moveFileByPath(e,n,r){try{const o=n.split("/").filter(d=>d!==""),a=o.pop();if(!a)throw new Error("Invalid source file path");const s=await this.getDirectoryHandleByPath(e,o.join("/")),l=await this.getDirectoryHandleByPath(e,r);return await this.moveFile(s,l,a)}catch(o){throw console.error("Error moving file by path:",o),o}}async moveFolder(e,n,r){try{const o=n.split("/").filter(y=>y!==""),a=o.pop();if(!a)throw new Error("Invalid source folder path");const s=await this.getDirectoryHandleByPath(e,o.join("/")),l=await s.getDirectoryHandle(a),c=await this.getDirectoryHandleByPath(e,r),{folders:d}=await this.listDirectoryEntries(c),u=this.generateUniqueFolderName(d,a),g=await c.getDirectoryHandle(u,{create:!0});return await this.copyDirectoryContents(l,g),await s.removeEntry(a,{recursive:!0}),console.log(`Moved folder ${a} to ${r} as ${u}`),u}catch(o){throw console.error("Error moving folder:",o),o}}async copyDirectoryContents(e,n){for await(const r of e.values())if(r.kind==="file"){const a=await r.getFile(),l=await(await n.getFileHandle(r.name,{create:!0})).createWritable();await l.write(a),await l.close()}else if(r.kind==="directory"){const o=r,a=await n.getDirectoryHandle(r.name,{create:!0});await this.copyDirectoryContents(o,a)}}async isDirectoryEmpty(e){try{for await(const n of e.values())return!1;return!0}catch(n){return console.error("Error checking if directory is empty:",n),!1}}async listDirectoryEntries(e){try{const n=[],r=[];for await(const[o,a]of e.entries())a.kind==="file"?n.push(o):a.kind==="directory"&&r.push(o);return{files:n,folders:r}}catch(n){return console.error("Error listing directory entries:",n),{files:[],folders:[]}}}generateUniqueFileName(e,n){if(!e.includes(n))return n;const r=n.lastIndexOf("."),o=r>0?n.substring(0,r):n,a=r>0?n.substring(r):"";let s=2,l;do l=`${o} (${s})${a}`,s++;while(e.includes(l)&&s<1e3);return l}generateUniqueFolderName(e,n){if(!e.includes(n))return n;let r=2,o;do o=`${n} (${r})`,r++;while(e.includes(o)&&r<1e3);return o}}const bi=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,ln=(await ke("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default;class ut{static instance;cache=new Map;maxCacheSize=50;hits=0;misses=0;static getInstance(){return ut.instance||(ut.instance=new ut),ut.instance}simpleHash(e){let n=0;for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);n=(n<<5)-n+o,n=n&n}return Math.abs(n).toString(36)}get(e){const n=this.simpleHash(e),r=this.cache.get(n)||null;return r?this.hits++:this.misses++,r}set(e,n){const r=this.simpleHash(e);if(this.cache.size>=this.maxCacheSize){const o=this.cache.keys().next().value;o&&this.cache.delete(o)}this.cache.set(r,n)}clear(){this.cache.clear(),this.hits=0,this.misses=0}getStats(){const e=this.hits+this.misses,n=e>0?(this.hits/e*100).toFixed(1):"0.0";return{size:this.cache.size,maxSize:this.maxCacheSize,hits:this.hits,misses:this.misses,hitRate:`${n}%`}}}const cn=ut.getInstance();class mt{static instance;cache=new Map;maxCacheSize=100;hits=0;misses=0;static getInstance(){return mt.instance||(mt.instance=new mt),mt.instance}get(e){const n=this.cache.get(e)||null;return n?this.hits++:this.misses++,n}set(e,n){if(this.cache.size>=this.maxCacheSize){const r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear(),this.hits=0,this.misses=0}getStats(){const e=this.hits+this.misses,n=e>0?(this.hits/e*100).toFixed(1):"0.0";return{size:this.cache.size,maxSize:this.maxCacheSize,hits:this.hits,misses:this.misses,hitRate:`${n}%`}}}const St=mt.getInstance();async function xi(t){async function e(x){let h=x.content;const w=cn.get(h);if(w)return w;let k;try{await ln.parse(h,{suppressErrors:!1}),await ln.parse(h,{suppressErrors:!0})&&(k=await ln.render(`_mermaidSvg_${bi.getUUID().slice(0,5)}`,h));const S=k.svg;return cn.set(h,S),S}catch{const E='<pre class="ERR">Mermaid æ¸²æŸ“å¤±è´¥</pre>';return cn.set(h,E),E}}async function n(x){try{const h=decodeURIComponent(x.content.slice(2)),w=new Ge;return w.getTopDirectoryHandle()?`${await w.readFileContent(w.getTopDirectoryHandle(),h,!0)}`:'<div class="ERR">PDF è¯»å–å¤±è´¥ï¼šè¯·å…ˆæ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹</div>'}catch{return'<div class="ERR">PDF è¯»å–å¤±è´¥ï¼šæ–‡ä»¶ä¸å­˜åœ¨æˆ–è·¯å¾„é”™è¯¯</div>'}}async function r(x){let h=x.attrGet("src");if(!h.startsWith("/vf/")){const w=St.get(h);if(w)return w}if(h.startsWith("/vf/")){let w=h.match(/\d+/)?.[0];return w?await fi("uuid",parseInt(w)).then(k=>{if(k&&k.length>0&&k[0]&&k[0].imgBase64)return k[0].imgBase64}).catch(()=>{}):void 0}else if(h.startsWith("./"))try{const w=new Ge;if(w.getTopDirectoryHandle()){const k=await w.readFileContent(w.getTopDirectoryHandle(),decodeURIComponent(h).slice(2),!0);return k&&St.set(h,k),k}else{const E=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="120">
            <rect width="400" height="120" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="4"/>
            <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#d32f2f">Image Error</text>
            <text x="200" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Please check if local folder is opened</text>
            <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">or path is correct</text>
            <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">è¯·æ£€æŸ¥æ˜¯å¦æ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹æˆ–è·¯å¾„æ˜¯å¦æ­£ç¡®</text>
          </svg>`)))}`;return St.set(h,E),E}}catch{const E=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="120">
          <rect width="400" height="120" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1" rx="4"/>
          <text x="200" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#d32f2f">Image Error</text>
          <text x="200" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Please check if local folder is opened</text>
          <text x="200" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">or path is correct</text>
          <text x="200" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">è¯·æ£€æŸ¥æ˜¯å¦æ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹æˆ–è·¯å¾„æ˜¯å¦æ­£ç¡®</text>
        </svg>`)))}`;return St.set(h,E),E}else return St.set(h,h),h}let o=[],a=[],s=[],l=[],c=[],d=[],u=[],g=Yt();g.renderer.rules.image=function(x,h){return(x[h].attrGet("src")?.startsWith("/vf/")||x[h].attrGet("src")?.startsWith("./"))&&o.push(x[h]),""},g.renderer.rules.fence=function(x,h,w,k,S){const E=x[h].info;return E==="mermaid"?(a.push(x[h]),""):((E==="py"||E==="python")&&l.push(x[h]),"")},g.renderer.rules.import_inline=function(x,h,w,k){return x[h].meta.extension==="pdf"&&s.push(x[h]),""},g.render(t,{});for(const x of o){let h=await r(x);c.push(h)}for(const x of a){let h=await e(x);d.push(h)}for(const x of s){let h=await n(x);u.push(h)}return{vfImgSrcArr:c,vfImgSeq:0,mermaidParsedArr:d,mermaidSeq:0,pdfParsedArr:u,pdfSeq:0}}let Ur=0,Cn=0;const dn=new Map;function Ci(t,e,n){return`${Ur}-${t}-${e}-${n}`}function ki(t,e,n){const r=Ci(t,e,n);if(!dn.has(r)){Cn++;const o=`table-${Cn}`;dn.set(r,o)}return dn.get(r)}function Ei(){Ur++,Cn=0}function vi(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36).slice(0,12)}class gt{static instance;standardDataRegistry=new Map;dataChangeListeners=new Map;static getInstance(){return gt.instance||(gt.instance=new gt),gt.instance}createStandardData(e,n,r,o,a){const s=Date.now(),l=this.standardDataRegistry.get(e),c="alignments"in n?n.alignments:void 0,d=n.headers.map((g,y)=>({id:`col_${y}`,title:g||`Column ${y+1}`,type:"text",index:y,align:c?.[y]||"left"}));return{tableId:e,metadata:{startLine:r,endLine:o,tableHash:vi(JSON.stringify({headers:n.headers,rows:n.rows})),rawMarkdown:a,createdAt:l?.metadata.createdAt||s,updatedAt:s},schema:{headers:d,columnCount:n.headers.length,rowCount:n.rows.length},data:{headers:[...n.headers],rows:n.rows.map(g=>[...g])}}}registerStandardData(e){this.standardDataRegistry.set(e.tableId,e),this.notifyDataChange(e.tableId,e)}getStandardData(e){return this.standardDataRegistry.get(e)||null}updateStandardData(e,n,r="react"){const o=this.standardDataRegistry.get(e);if(!o)return console.warn(`å°è¯•æ›´æ–°ä¸å­˜åœ¨çš„è¡¨æ ¼: ${e}`),!1;const a={...n,alignments:o.schema.headers.map(c=>c.align||"left")},s=zn(a),l=this.createStandardData(e,a,o.metadata.startLine,o.metadata.endLine,s);return l.metadata.rawMarkdown=s,this.registerStandardData(l),!0}addDataChangeListener(e,n){this.dataChangeListeners.has(e)||this.dataChangeListeners.set(e,new Set),this.dataChangeListeners.get(e).add(n)}removeDataChangeListener(e,n){const r=this.dataChangeListeners.get(e);r&&(r.delete(n),r.size===0&&this.dataChangeListeners.delete(e))}notifyDataChange(e,n){const r=this.dataChangeListeners.get(e);r&&r.forEach(o=>{try{o(n)}catch(a){console.error(`æ ‡å‡†åŒ–æ•°æ®ç›‘å¬å™¨å›è°ƒå‡ºé”™ (${e}):`,a)}})}clearAll(){this.standardDataRegistry.clear(),this.dataChangeListeners.clear()}getAllStandardData(){return new Map(this.standardDataRegistry)}}const He=gt.getInstance(),Xt=new Map;function Si(t){const e=[],n=[],r=[];let o=[],a=!1,s=!1;for(const d of t)switch(d.type){case"thead_open":a=!0;break;case"thead_close":a=!1;break;case"tbody_open":s=!0;break;case"tbody_close":s=!1;break;case"tr_open":o=[];break;case"tr_close":a&&o.length>0?e.push(...o):s&&o.length>0&&n.push([...o]);break;case"th_open":case"td_open":if(a&&d.type==="th_open"){const u=d.attrGet&&d.attrGet("style");u&&u.includes("text-align:center")?r.push("center"):u&&u.includes("text-align:right")?r.push("right"):r.push("left")}break;case"th_close":case"td_close":break;case"inline":if(d.content!==void 0){const u=d.content.trim();o.push(u)}break}const l=Math.max(e.length,...n.map(d=>d.length),1);for(;e.length<l;)e.push("");for(;r.length<l;)r.push("left");return n.forEach(d=>{for(;d.length<l;)d.push("")}),{headers:e,rows:n,alignments:r}}function zn(t){if(!t.headers.length&&!t.rows.length)return"";let e="";const n="alignments"in t?t.alignments:void 0;if(t.headers.length>0){const o=t.headers.map(s=>s===""?" ":s);e+="| "+o.join(" | ")+` |
`;const a=t.headers.map((s,l)=>{const c=n?.[l]||"left";return c==="center"?":---:":c==="right"?"---:":"---"});e+="| "+a.join(" | ")+` |
`}const r=t.headers.length;for(const o of t.rows){const a=[...o];for(;a.length<r;)a.push("");const s=a.slice(0,r).map(l=>l===""?" ":l);e+="| "+s.join(" | ")+` |
`}return e}function Ti(t){return{headers:[...t.data.headers],rows:t.data.rows.map(e=>[...e])}}function Ii(t,e,n,r,o){return He.createStandardData(t,e,n,r,o)}let Di=function(t){t.core.ruler.after("block","table_to_div",n=>{Ei(),Xt.clear(),He.clearAll();const r=n.tokens;let o=0;for(let a=0;a<r.length;a++)if(r[a].type==="table_open"){let l="left";if(a>0&&r[a-1].type==="html_block"){const u=r[a-1].content.trim().toLowerCase();u==="<center>"&&(l="center"),u==="<right>"&&(l="right")}let c=-1;for(let u=a;u<r.length;u++)if(r[u].type==="table_close"){c=u;break}if(c!==-1&&c+1<r.length&&r[c+1].type==="html_block"){const u=r[c+1].content.trim().toLowerCase();u==="</center>"&&(l="center"),u==="</right>"&&(l="right")}let d=[];for(let u=a;u<r.length;u++)if(d.push(r[u]),r[u].type==="table_close"){c=u;break}if(c!==-1){let u=0,g=0;const y=r[a];y&&y.map&&y.map.length>0&&(u=y.map[0]);const x=r[c];x&&x.map&&x.map.length>1?g=x.map[1]:g=u+3;const h=ki(u,g,o);o++;const w=Si(d),k=2+w.rows.length;(g<=u||g-u<k)&&(g=u+k);const S=zn(w),E=He.createStandardData(h,w,u,g,S);He.registerStandardData(E);const P={tableId:h,tableHash:E.metadata.tableHash,startLine:u,endLine:g,rawMarkdown:S,data:w};Xt.set(h,P);const $=new n.Token("html_block","",0);$.content=`<div data-react-table data-table-id="${h}" data-table-hash="${E.metadata.tableHash}" data-start-line="${u}" data-end-line="${g}" data-align="${l}" class="react-table-placeholder" style="min-height: 100px; margin: 16px 0;"></div>`,r.splice(a,c-a+1,$)}}});const e=t.renderer.rules.html_block;t.renderer.rules.html_block=function(n,r,o,a,s){const l=n[r].content;if(!/data-react-table/.test(l))return e?e(n,r,o,a,s):l;const c=l.match(/data-table-id="([^"]+)"/)?.[1]??"",d=l.match(/data-table-hash="([^"]+)"/)?.[1]??"",u=l.match(/data-start-line="([^"]+)"/)?.[1]??"",g=l.match(/data-end-line="([^"]+)"/)?.[1]??"",y=l.match(/data-align="([^"]+)"/)?.[1]??"left";return function(){window.IncrementalDOM.elementOpen("div",c,["class","react-table-placeholder","data-react-table","true","data-table-id",c,"data-table-hash",d,"data-start-line",u,"data-end-line",g,"data-align",y,"style","min-height: 100px; margin: 16px 0;"]),window.IncrementalDOM.skip(),window.IncrementalDOM.elementClose("div")}}};const be={getStandardData:t=>He.getStandardData(t),updateStandardData:(t,e,n="react")=>He.updateStandardData(t,e,n),registerStandardData:t=>He.registerStandardData(t),onDataChange:(t,e)=>He.addDataChangeListener(t,e),offDataChange:(t,e)=>He.removeDataChangeListener(t,e),getAllStandardData:()=>He.getAllStandardData(),standardToTable:Ti,tableToStandard:Ii};let Ve=!1;class ft{static instance;isInternalUpdate=!1;syncCallbacks=new Map;static getInstance(){return ft.instance||(ft.instance=new ft),ft.instance}addStandardDataListener(e,n){this.syncCallbacks.has(e)||this.syncCallbacks.set(e,new Set),this.syncCallbacks.get(e).add(n),be.onDataChange(e,n)}removeStandardDataListener(e,n){const r=this.syncCallbacks.get(e);r&&(r.delete(n),r.size===0&&this.syncCallbacks.delete(e)),be.offDataChange(e,n)}notifyStandardDataChange(e,n,r="react"){if(this.isInternalUpdate){console.log(`è·³è¿‡åŒæ­¥æ›´æ–° ${e}ï¼Œæ­£åœ¨è¿›è¡Œå†…éƒ¨æ›´æ–°`);return}this.isInternalUpdate=!0,console.log(`ğŸš€ æ ‡å‡†åŒ–æ•°æ®åŒæ­¥å¼€å§‹: ${e}, source: ${r}`);try{r==="react"?be.updateStandardData(e,n,r)?(console.log(`âœ… æ ‡å‡†åŒ–æ•°æ®æ›´æ–°æˆåŠŸï¼Œå‡†å¤‡å†™å…¥Monaco: ${e}`),Mi(e,n)||console.error(`âŒ Monacoå†™å…¥å¤±è´¥: ${e}`)):console.warn(`âŒ æ›´æ–°æ ‡å‡†åŒ–æ•°æ®å¤±è´¥: ${e}`):be.updateStandardData(e,n,r)}finally{setTimeout(()=>{this.isInternalUpdate=!1,console.log(`âœ… åŒæ­¥æ›´æ–°å®Œæˆ: ${e}`)},100)}}isUpdating(){return this.isInternalUpdate}clearTableListeners(e){const n=this.syncCallbacks.get(e);n&&(n.forEach(r=>{be.offDataChange(e,r)}),this.syncCallbacks.delete(e))}clearAllListeners(){this.syncCallbacks.forEach((e,n)=>{e.forEach(r=>{be.offDataChange(n,r)})}),this.syncCallbacks.clear()}}const qe=ft.getInstance();class ht{static instance;syncListeners=new Map;isInternalUpdate=!1;static getInstance(){return ht.instance||(ht.instance=new ht),ht.instance}addTableListener(e,n){this.syncListeners.has(e)||this.syncListeners.set(e,new Set),this.syncListeners.get(e).add(n);const r=o=>{const a=be.standardToTable(o);n(a)};qe.addStandardDataListener(e,r)}removeTableListener(e,n){const r=this.syncListeners.get(e);r&&(r.delete(n),r.size===0&&this.syncListeners.delete(e))}notifyTableDataChange(e,n,r="react"){qe.notifyStandardDataChange(e,n,r)}isUpdating(){return this.isInternalUpdate||qe.isUpdating()}clearTableListeners(e){this.syncListeners.delete(e),qe.clearTableListeners(e)}clearAllListeners(){this.syncListeners.clear(),qe.clearAllListeners()}}const et=ht.getInstance();function Mi(t,e){Ve=!0;const n=be.getStandardData(t);if(!n)return console.warn(`Standard table data ${t} not found in registry`),Ve=!1,!1;if(!window.monaco||!window.editor)return console.warn("Monaco editor not available"),Ve=!1,!1;try{const r=zn(e);console.log(`ç”Ÿæˆæ–°markdownï¼Œè¡Œæ•°: ${r.split(`
`).length}`);const o=window.editor,a=o.getModel();if(!a)return console.warn("Monaco editor model not available"),Ve=!1,!1;const s=n.metadata.startLine,l=n.metadata.endLine,c=a.getLineCount(),d=l-1,u=Math.min(d,c-1),g=s+1,y=u+1,x=new window.monaco.Range(g,1,y,a.getLineMaxColumn(y));console.log(`æ›¿æ¢èŒƒå›´: [${g}:1] åˆ° [${y}:${a.getLineMaxColumn(y)}]`);let h=r.trimEnd();const w=l+1;if(w<=c){const k=a.getLineContent(w);console.log(`æ£€æŸ¥ä¸‹ä¸€è¡Œ ${w}: "${k}"`),k&&k.trim()!==""&&(h+=`
`,console.log(`æ·»åŠ ç©ºè¡Œåˆ†éš”ï¼Œå› ä¸ºä¸‹ä¸€è¡Œæœ‰å†…å®¹: "${k}"`))}return o.executeEdits(`table-edit-${t}`,[{range:x,text:h,forceMoveMarkers:!0}]),setTimeout(()=>{if(o.getModel()){const S=h.split(`
`),P=s+S.length-1+1;console.log(`æ›´æ–°endLine: ${l} -> ${P} (è¡¨æ ¼è¡Œæ•°: ${S.length})`),Li(t,P)}Ve=!1,console.log(`Monacoå†™å…¥å®Œæˆ: ${t}`)},10),!0}catch(r){return console.error("Failed to write standard table",r),Ve=!1,!1}}function Li(t,e){const n=be.getStandardData(t);if(!n){console.warn(`å°è¯•æ›´æ–°ä¸å­˜åœ¨çš„è¡¨æ ¼å…ƒæ•°æ®: ${t}`);return}const r={...n,metadata:{...n.metadata,endLine:e,updatedAt:Date.now()}};be.registerStandardData(r)}function Ri(){return Ve}function $i(t){return be.getStandardData(t)}function Ai(t){const e=be.getStandardData(t);if(e)return be.standardToTable(e);const n=Xt.get(t);return n?n.data:null}function Fi(t){return Xt.get(t)}function Pi(){if(Ve||qe.isUpdating())return;const t=window.editor;if(!t){console.warn("Monacoç¼–è¾‘å™¨ä¸å¯ç”¨");return}if(!t.getModel()?.getValue()){console.warn("Monacoç¼–è¾‘å™¨å†…å®¹ä¸ºç©º");return}}function zi(){Pi()}function sr(t,e){var n,r,o=t.posMax,a=!0,s=!0;return n=e>0?t.src.charCodeAt(e-1):-1,r=e+1<=o?t.src.charCodeAt(e+1):-1,(n===32||n===9||r>=48&&r<=57)&&(s=!1),(r===32||r===9)&&(a=!1),{can_open:a,can_close:s}}function _i(t,e){var n,r,o,a,s;if(t.src[t.pos]!=="$")return!1;if(a=sr(t,t.pos),!a.can_open)return e||(t.pending+="$"),t.pos+=1,!0;for(n=t.pos+1,r=n;(r=t.src.indexOf("$",r))!==-1;){for(s=r-1;t.src[s]==="\\";)s-=1;if((r-s)%2==1)break;r+=1}return r===-1?(e||(t.pending+="$"),t.pos=n,!0):r-n===0||r-n===2?(e||(t.pending+="$$"),t.pos=n+1,!0):(a=sr(t,r),a.can_close?(e||(o=t.push("math_inline","math",0),o.markup="$",o.content=t.src.slice(n,r)),t.pos=r+1,!0):(e||(t.pending+="$"),t.pos=n,!0))}function Bi(t,e,n,r){var o,a,s,l,c=!1,d,u=t.bMarks[e]+t.tShift[e],g=t.eMarks[e];if(u+2>g||t.src.slice(u,u+2)!=="$$")return!1;if(u+=2,o=t.src.slice(u,g),r)return!0;for(o.trim().slice(-2)==="$$"&&(o=o.trim().slice(0,-2),c=!0),s=e;!c&&(s++,!(s>=n||(u=t.bMarks[s]+t.tShift[s],g=t.eMarks[s],u<g&&t.tShift[s]<t.blkIndent)));)t.src.slice(u,g).trim().slice(-2)==="$$"&&(l=t.src.slice(0,g).lastIndexOf("$$"),a=t.src.slice(u,l),c=!0);return t.line=s+1,d=t.push("math_block","math",0),d.block=!0,d.content=(o&&o.trim()?o+`
`:"")+t.getLines(e+1,s,t.tShift[e],!0)+(a&&a.trim()?a:""),d.map=[e,t.line],d.markup="$$",!0}function Vr(t,e){e=e||{throwOnError:!1,strict:!1};var n=function(s){if(e.displayMode=!1,s)try{return window.katex.renderToString(s,e)}catch{return s}else return"Latex Missing"},r=function(s,l){return n(s[l].content)},o=function(s,l){e.displayMode=!0;let c;if(l.map&&l.level===0&&(c=l.map[0]),s)try{return`<p data-line=${String(c)}>`+window.katex.renderToString(s,e)+"</p>"}catch{return s}else return"LATEX MISSING"},a=function(s,l){return o(s[l].content,s[l])+`
`};t.inline.ruler.after("escape","math_inline",_i),t.block.ruler.after("blockquote","math_block",Bi,{alt:["paragraph","reference","blockquote","list"]}),t.renderer.rules.math_inline=r,t.renderer.rules.math_block=a}const Ni=(await ke("https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm")).default,Hi=({transform:t})=>({...t,x:0}),Oi=()=>{const t=ge()==="dark";return{paperBackground:t?"#1e1e1e":"#ffffff",paperBorder:t?"1px solid #808080":"none",cellBackground:t?"#1e1e1e":"#ffffff",cellHoverBackground:t?"#2d2d30":"#f5f5f5",cellSelectedBackground:t?ue("#569cd6",.2):ue("#1976d2",.12),cellActiveBackground:t?ue("#569cd6",.15):ue("#1976d2",.08),cellBorder:t?"#3e3e42":"#e0e0e0",cellText:t?"#d8d8d8ff":"#000000",headerBackground:t?"#1e1e1e":"#f5f5f5",headerText:t?"#cdcdcdff":"#000000",headerHoverBackground:t?"#2d2d30":"#eeeeee",toolbarBackground:t?"#1e1e1e":"transparent",toolbarBorder:t?"#808080":"#e0e0e0",buttonColor:t?"#cccccc":"#1976d2",buttonHoverBackground:t?"#2d2d30":ue("#1976d2",.04),editorBackground:t?"#1e1e1e":"#ffffff",editorBorder:t?"1px solid #569cd6":"1px solid #1976d2",editorFocusBorder:t?"2px solid #569cd6":"2px solid #1976d2",selectedRowBackground:t?ue("#569cd6",.2):ue("#1976d2",.08),selectedRowHoverBackground:t?ue("#569cd6",.25):ue("#1976d2",.12)}},ji=({rowId:t,rowIndex:e,row:n,isEditMode:r,isSelected:o,lastSelectedIndex:a,editingCell:s,onRowClick:l,renderCellContent:c,setSelectedRows:d,setLastSelectedIndex:u,totalColumns:g,themeStyles:y})=>{const{attributes:x,listeners:h,setNodeRef:w,transform:k,transition:S,isDragging:E}=To({id:t}),P={transform:Io.Transform.toString(k),transition:S,zIndex:E?1e3:"auto",opacity:E?.8:1};return m.createElement(wn,{ref:w,style:P,key:t,hover:!0,role:r?"checkbox":void 0,"aria-checked":r?o:void 0,tabIndex:-1,selected:r?o:!1,sx:{"&:nth-of-type(even)":{backgroundColor:E?y.cellHoverBackground:y.cellBackground},"&:hover":{backgroundColor:r?ue("#1976d2",.08):y.cellHoverBackground},cursor:r?"pointer":"default"},onClick:$=>{r&&l($,e)}},r&&m.createElement(Lt,{padding:"checkbox"},m.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},m.createElement(yn,{color:"primary",checked:o,onChange:$=>{$.stopPropagation(),o?(d(D=>D.filter(O=>O!==e)),a===e&&u(null)):(d(D=>D.includes(e)?D:[...D,e]),u(e))},inputProps:{"aria-labelledby":`enhanced-table-checkbox-${e}`}}),m.createElement(le,{size:"small",...x,...h,sx:{cursor:"grab",opacity:.6,"&:hover":{opacity:1},"&:active":{cursor:"grabbing"},touchAction:"none"}},m.createElement(Ir,{fontSize:"small"})))),n.map(($,D)=>m.createElement(Lt,{key:D,sx:{width:`${100/(g+(r?1:0))}%`,minWidth:0,maxWidth:`${100/(g+(r?1:0))}%`,padding:0,"& > *":{width:"100%",maxWidth:"100%"}},onClick:O=>{r&&O.stopPropagation()}},c($,e,D))))},lr=m.memo(({tableId:t,tableData:e})=>{const[n,r]=i.useState(ge()),o=i.useMemo(()=>Oi(),[n]);i.useEffect(()=>{const p=setInterval(()=>{const b=ge();b!==n&&r(b)},100);return()=>clearInterval(p)},[n]);const[a,s]=i.useState({headers:[],rows:[]}),[l,c]=i.useState(null),[d,u]=i.useState(!1),[g,y]=i.useState(null),[x,h]=i.useState({order:"asc",orderBy:""}),[w,k]=i.useState([]),[S,E]=i.useState([]),[P,$]=i.useState(null),D=i.useRef(null),O=i.useMemo(()=>{const f=new Ni({html:!1,linkify:!0,typographer:!1,breaks:!0});return f.use(Vr,{throwOnError:!1,strict:!1}),f.renderer.rules.text,f.renderer.rules.text=function(p,b,C,T,B){let H=p[b].content;return H=H.replace(/~~([^~]+)~~/g,"<del>$1</del>"),H},f},[]),j=xo(nr(Mo,{activationConstraint:{distance:8}}),nr(Do,{activationConstraint:{delay:200,tolerance:5}})),R=i.useCallback((f,p,b)=>{const C=a.headers.indexOf(b);if(C===-1)return 0;const T=f[C]||"",B=p[C]||"",H=parseFloat(T),M=parseFloat(B);return!isNaN(H)&&!isNaN(M)?M-H:B<T?-1:B>T?1:0},[a.headers]),J=i.useCallback((f,p)=>f==="desc"?(b,C)=>R(b,C,p):(b,C)=>-R(b,C,p),[R]),Y=i.useMemo(()=>a.rows,[a.rows]),ne=i.useCallback(f=>{if(f.target.checked){const p=a.rows.map((b,C)=>C);E(p),W(p.length>0?p[p.length-1]:null)}else E([]),W(null)},[a.rows]),[Z,W]=i.useState(null),we=i.useCallback((f,p)=>{if(f.ctrlKey||f.metaKey){const b=S.indexOf(p);let C=[];b===-1?C=[...S,p]:b===0?C=S.slice(1):b===S.length-1?C=S.slice(0,-1):b>0&&(C=[...S.slice(0,b),...S.slice(b+1)]),C=Array.from(new Set(C)),E(C),W(p)}else if(f.shiftKey&&Z!==null){const b=Math.min(Z,p),C=Math.max(Z,p),T=Array.from({length:C-b+1},(H,M)=>b+M),B=Array.from(new Set([...S,...T])).sort((H,M)=>H-M);E(B)}else E([p]),W(p)},[S,Z]),ee=i.useCallback((f,p)=>w.some(b=>b.rowIndex===f&&b.colIndex===p),[w]),re=i.useCallback(f=>S.includes(f),[S]),F=i.useCallback((f,p,b)=>{if(f.stopPropagation(),f.ctrlKey||f.metaKey){const C=w.some(T=>T.rowIndex===p&&T.colIndex===b);k(C?T=>T.filter(B=>!(B.rowIndex===p&&B.colIndex===b)):T=>[...T,{rowIndex:p,colIndex:b}])}else if(f.shiftKey&&w.length>0){const C=w[w.length-1],T=Math.min(C.rowIndex,p),B=Math.max(C.rowIndex,p),H=Math.min(C.colIndex,b),M=Math.max(C.colIndex,b),V=[];for(let z=T;z<=B;z++)for(let K=H;K<=M;K++)V.push({rowIndex:z,colIndex:K});const L=[...w,...V].filter((z,K,te)=>te.findIndex(oe=>oe.rowIndex===z.rowIndex&&oe.colIndex===z.colIndex)===K);k(L)}else k([{rowIndex:p,colIndex:b}])},[w]),q=i.useMemo(()=>({headers:["Name","Age","City","Email"],rows:[["John Doe","25","New York","john@example.com"],["Alice Brown","28","Paris","alice@example.com"]]}),[]),X=i.useCallback(f=>{s(f),t&&qe.notifyStandardDataChange(t,f,"react")},[t]),_=i.useCallback(f=>{t&&be.getStandardData(t)?X(f):(s(f),t&&et.notifyTableDataChange(t,f,"react"))},[t,X]);i.useEffect(()=>{if(!t)return;const f=p=>{const b=be.standardToTable(p),C=JSON.stringify(a)!==JSON.stringify(b),T=JSON.stringify(g)!==JSON.stringify(p);(C||T)&&(y(p),s(b))};return qe.addStandardDataListener(t,f),()=>{qe.removeStandardDataListener(t,f)}},[t]),i.useEffect(()=>{if(!t)return;const f=p=>{if(be.getStandardData(t))return;JSON.stringify(a)!==JSON.stringify(p)&&s(p)};return et.addTableListener(t,f),()=>{et.removeTableListener(t,f)}},[t,a]),i.useEffect(()=>{let f,p=null;t?(p=$i(t),p?f=be.standardToTable(p):f=Ai(t)||q):f=e||q;const b=JSON.stringify(a)!==JSON.stringify(f),C=JSON.stringify(g)!==JSON.stringify(p);(b||C)&&(s(f),y(p))},[t,e,q]);const Q=i.useCallback((f,p)=>{const C=f===-1?a.headers[p]||"":a.rows[f]?.[p]||"",T=`${f}-${p}`,H=Me.current.get(T)?.getBoundingClientRect();c({rowIndex:f,colIndex:p,value:C,width:H?.width,height:H?.height})},[a]),Ee=i.useCallback(()=>{if(!l)return;const{rowIndex:f,colIndex:p,value:b}=l;s(C=>{const T={headers:[...C.headers],rows:C.rows.map(B=>[...B])};return f===-1?T.headers[p]=b:(T.rows[f]||(T.rows[f]=new Array(T.headers.length).fill("")),T.rows[f][p]=b),t&&setTimeout(()=>{_(T)},0),T}),c(null),k([]),$(null)},[l,t,_]),De=i.useCallback(()=>{c(null),k([]),$(null)},[]),ae=i.useCallback(()=>{const f={headers:[...a.headers],rows:a.rows.map(C=>[...C])},p=f.headers.length,b=new Array(p).fill("");f.rows.push(b),_(f)},[a,_]);i.useCallback(f=>{const p={headers:[...a.headers],rows:a.rows.map(b=>[...b])};p.rows.splice(f,1),_(p)},[a,_]);const fe=i.useCallback(()=>{const f={headers:[...a.headers],rows:a.rows.map(p=>[...p])};f.headers.push(`Col ${f.headers.length+1}`),f.rows.forEach(p=>{p.push("")}),_(f)},[a,_]),ce=i.useCallback(f=>{if(a.headers.length<=1)return;const p={headers:[...a.headers],rows:a.rows.map(b=>[...b])};p.headers.splice(f,1),p.rows.forEach(b=>{b.length>f&&b.splice(f,1)}),_(p)},[a,_]),v=i.useCallback((f,p)=>{const b={bold:{start:"**",end:"**"},italic:{start:"*",end:"*"},strikethrough:{start:"~~",end:"~~"},code:{start:"`",end:"`"}},{start:C,end:T}=b[p];return f.startsWith(C)&&f.endsWith(T)?f.slice(C.length,-T.length):`${C}${f}${T}`},[]),ve=i.useCallback(f=>{if(!(!d||l)){if((f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="b"){if(f.preventDefault(),w.length===0)return;const p=JSON.parse(JSON.stringify(a));w.forEach(({rowIndex:b,colIndex:C})=>{b===-1?C<p.headers.length&&(p.headers[C]=v(p.headers[C]||"","bold")):b<p.rows.length&&C<p.rows[b].length&&(p.rows[b][C]=v(p.rows[b][C]||"","bold"))}),_(p);return}if((f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="i"){if(f.preventDefault(),w.length===0)return;const p=JSON.parse(JSON.stringify(a));w.forEach(({rowIndex:b,colIndex:C})=>{b===-1?C<p.headers.length&&(p.headers[C]=v(p.headers[C]||"","italic")):b<p.rows.length&&C<p.rows[b].length&&(p.rows[b][C]=v(p.rows[b][C]||"","italic"))}),_(p);return}if((f.ctrlKey||f.metaKey)&&f.key==="a"){f.preventDefault();const p=a.rows.map((b,C)=>C);E(p);return}if((f.ctrlKey||f.metaKey)&&f.key==="d"){f.preventDefault(),E([]),k([]),W(null);return}if((f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="c"){if(f.preventDefault(),w.length===0)return;const p=Math.min(...w.map(M=>M.rowIndex)),b=Math.max(...w.map(M=>M.rowIndex)),C=Math.min(...w.map(M=>M.colIndex)),T=Math.max(...w.map(M=>M.colIndex)),B=[];for(let M=p;M<=b;M++){const V=[];for(let N=C;N<=T;N++){const L=w.some(K=>K.rowIndex===M&&K.colIndex===N);let z="";L&&(M===-1?z=a.headers[N]||"":z=a.rows[M]?.[N]||""),V.push(z)}B.push(V.join("	"))}const H=B.join(`
`);navigator.clipboard.writeText(H).catch(M=>{console.warn("å¤åˆ¶åˆ°å‰ªè´´æ¿å¤±è´¥:",M)});return}if((f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="x"){if(f.preventDefault(),w.length===0)return;const p=Math.min(...w.map(M=>M.rowIndex)),b=Math.max(...w.map(M=>M.rowIndex)),C=Math.min(...w.map(M=>M.colIndex)),T=Math.max(...w.map(M=>M.colIndex)),B=[];for(let M=p;M<=b;M++){const V=[];for(let N=C;N<=T;N++){const L=w.some(K=>K.rowIndex===M&&K.colIndex===N);let z="";L&&(M===-1?z=a.headers[N]||"":z=a.rows[M]?.[N]||""),V.push(z)}B.push(V.join("	"))}const H=B.join(`
`);navigator.clipboard.writeText(H).then(()=>{const M=JSON.parse(JSON.stringify(a));w.forEach(({rowIndex:V,colIndex:N})=>{V===-1?N<M.headers.length&&(M.headers[N]=""):V<M.rows.length&&N<M.rows[V].length&&(M.rows[V][N]="")}),_(M)}).catch(M=>{console.warn("å‰ªåˆ‡å¤±è´¥:",M)});return}if((f.ctrlKey||f.metaKey)&&f.key.toLowerCase()==="v"){if(f.preventDefault(),!P)return;navigator.clipboard.readText().then(p=>{if(!p.trim())return;const b=p.split(`
`).map(N=>N.split("	")),C=b.length,T=Math.max(...b.map(N=>N.length)),B=Math.max(a.rows.length,P.rowIndex+C),H=Math.max(a.headers.length,P.colIndex+T),M={headers:[...a.headers],rows:a.rows.map(N=>[...N])};for(;M.headers.length<H;)M.headers.push(`Col ${M.headers.length+1}`);for(;M.rows.length<B;){const N=new Array(H).fill("");M.rows.push(N)}M.rows.forEach(N=>{for(;N.length<H;)N.push("")});for(let N=0;N<C;N++){const L=P.rowIndex+N;if(L>=0&&L<M.rows.length)for(let z=0;z<b[N].length;z++){const K=P.colIndex+z;K>=0&&K<M.rows[L].length&&(M.rows[L][K]=b[N][z]||"")}}_(M);const V=[];for(let N=0;N<C;N++)for(let L=0;L<T;L++){const z=P.rowIndex+N,K=P.colIndex+L;z>=0&&z<B&&K>=0&&K<H&&V.push({rowIndex:z,colIndex:K})}k(V)}).catch(p=>{console.warn("ä»å‰ªè´´æ¿è¯»å–å¤±è´¥:",p)});return}if(f.key==="Delete"&&S.length>0){f.preventDefault();const p=[...S].sort((C,T)=>T-C);let b={headers:[...a.headers],rows:a.rows.map(C=>[...C])};p.forEach(C=>{b.rows.splice(C,1)}),_(b),E([]),W(null);return}if(f.key==="Escape"){E([]),k([]),W(null);return}if(["ArrowUp","ArrowDown"].includes(f.key)){f.preventDefault();let p;if(S.length===0){p=f.key==="ArrowDown"?0:a.rows.length-1,E([p]),W(p);return}const b=Z!==null?Z:S[S.length-1];if(f.key==="ArrowDown"?p=Math.min(b+1,a.rows.length-1):p=Math.max(b-1,0),f.shiftKey){const C=Math.min(Z||b,p),T=Math.max(Z||b,p),B=Array.from({length:T-C+1},(H,M)=>C+M);E(B)}else E([p]),W(p);return}}},[d,l,a,S,Z,_]),xe=i.useCallback(f=>{const{active:p,over:b}=f;if(!b||p.id===b.id)return;const C=parseInt(String(p.id).replace("row-","")),T=parseInt(String(b.id).replace("row-",""));if(isNaN(C)||isNaN(T)){console.warn("æ— æ³•è§£ææ‹–æ‹½ç´¢å¼•");return}const B=Co(a.rows,C,T),H={headers:[...a.headers],rows:B};E([]),k([]),W(null),_(H)},[a,_]),_e=i.useCallback(f=>{if(f===""||f==="Â ")return m.createElement("span",null,"Â ");try{const p=O.renderInline(f);return m.createElement("span",{dangerouslySetInnerHTML:{__html:p},style:{wordBreak:"break-word",whiteSpace:"normal",display:"inline-block",width:"100%"}})}catch(p){console.warn("Markdown æ¸²æŸ“å¤±è´¥:",p);const b=f===""?"Â ":f;return m.createElement("span",{style:{wordBreak:"break-word",whiteSpace:"normal",display:"inline-block",width:"100%"}},b)}},[O]),je=i.useCallback(f=>{const b=x.orderBy===f&&x.order==="asc"?"desc":"asc",C=[...a.rows].sort(J(b,f)),T={headers:[...a.headers],rows:C};h({order:b,orderBy:f}),E([]),k([]),W(null),_(T)},[x,a,J,_]),Me=i.useRef(new Map),We=i.useCallback((f,p,b)=>{const C=`${p}-${b}`;return Me.current.get(C),m.createElement(wt,{value:l?.value||"",onChange:T=>c(B=>B?{...B,value:T.target.value}:null),onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey?(T.preventDefault(),Ee()):T.key==="Escape"&&De()},onBlur:Ee,autoFocus:!0,multiline:!0,size:"small",variant:"standard",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",margin:0,"& .MuiInputBase-root":{fontSize:"0.875rem",height:"100%",width:"100%",padding:"6px 8px",margin:0,backgroundColor:o.cellBackground,color:o.cellText,border:o.editorFocusBorder,borderRadius:0,boxSizing:"border-box","&:before, &:after":{display:"none"},"&:hover":{backgroundColor:o.cellBackground}},"& .MuiInputBase-input":{padding:0,height:"100%",boxSizing:"border-box",overflow:"auto",wordBreak:"break-word",whiteSpace:"pre-wrap",color:o.cellText}}})},[l,Ee,De,o]),Be=i.useCallback(f=>g?.schema.headers[f]?.align||"left",[g]),it=i.useCallback((f,p,b,C=!1)=>{const T=l?.rowIndex===p&&l?.colIndex===b,B=ee(p,b),H=P?.rowIndex===p&&P?.colIndex===b,M=Be(b),V=f===""?"Â ":f,N=`${p}-${b}`;return m.createElement(I,{ref:L=>{L&&L instanceof HTMLDivElement?Me.current.set(N,L):Me.current.delete(N)},sx:{display:"flex",alignItems:"flex-start",justifyContent:M==="center"?"center":M==="right"?"flex-end":"flex-start",minHeight:T&&l.height?`${l.height}px`:"32px",height:T&&l.height?`${l.height}px`:"auto",width:T&&l.width?`${l.width}px`:"100%",cursor:d?"text":"default",padding:T?0:"6px 8px",position:"relative",backgroundColor:B?ue("#1976d2",.12):H?ue("#1976d2",.08):"transparent",border:H&&!T?"1px solid #1976d2":"1px solid transparent",boxSizing:"border-box",wordBreak:"break-word",whiteSpace:"normal",overflowWrap:"break-word",overflow:T?"hidden":"visible","&:hover":{backgroundColor:d&&!C?B?ue("#1976d2",.16):ue("#1976d2",.08):"transparent"}},onClick:L=>{d&&!C&&(F(L,p,b),$({rowIndex:p,colIndex:b}),Q(p,b))}},T?We(f,p,b):C?m.createElement("span",{style:{fontWeight:"bold",wordBreak:"break-word",whiteSpace:"normal",display:"block",width:"100%",textAlign:M,color:o.headerText}},V||`Header ${b+1}`):m.createElement("div",{style:{wordBreak:"break-word",whiteSpace:"normal",width:"100%",textAlign:M,color:o.cellText}},_e(f)))},[l,We,Q,d,ee,P,_e,F,Be]);return!a||!a.headers.length&&!a.rows.length?m.createElement(nt,{sx:{p:2,textAlign:"center",color:"text.secondary"}},"Empty table - ",t?`Table ID: ${t}`:"No data",g&&m.createElement("div",{style:{fontSize:"0.75rem",marginTop:"4px",color:"#666"}},"Columns: ",g.schema.columnCount," | Rows: ",g.schema.rowCount)):m.createElement(ko,{sensors:j,collisionDetection:Eo,onDragEnd:xe,modifiers:[Hi]},m.createElement(nt,{elevation:0,sx:{width:"100%",overflow:"hidden",backgroundColor:o.paperBackground,border:o.paperBorder},className:"academic-table",tabIndex:0,onKeyDown:ve,ref:D},m.createElement(I,{sx:{display:"flex",flexDirection:"column",borderBottom:`1px solid ${o.toolbarBorder}`,backgroundColor:o.toolbarBackground},className:"react-table-toolbar"},m.createElement(I,{sx:{p:1,display:"flex",gap:1,alignItems:"center"}},m.createElement(Ie,{title:d?"Exit Edit Mode":"Enter Edit Mode"},m.createElement(le,{size:"small",onClick:()=>{u(!d),d&&(E([]),k([]),W(null),$(null),c(null))},color:d?"primary":"default"},m.createElement(wa,null))),d&&m.createElement(m.Fragment,null,m.createElement(I,{sx:{display:"flex",gap:.5,ml:1}},m.createElement(Ie,{title:"Add Row"},m.createElement(le,{size:"small",onClick:ae},m.createElement(jn,null))),m.createElement(Ie,{title:"Add Column"},m.createElement(le,{size:"small",onClick:fe},m.createElement(jn,{sx:{transform:"rotate(90deg)"}})))),m.createElement(I,{sx:{width:"1px",height:"20px",backgroundColor:o.toolbarBorder,mx:1}}),m.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},m.createElement("span",{style:{fontSize:"0.75rem",color:o.cellText,opacity:.7}},"åˆ—:"),m.createElement(I,{sx:{display:"flex",gap:.5}},a.headers.map((f,p)=>m.createElement(Ie,{key:p,title:`Delete "${f}" column`},m.createElement(le,{size:"small",onClick:()=>ce(p),disabled:a.headers.length<=1,sx:{p:.25,fontSize:"0.75rem",minWidth:"auto",color:a.headers.length<=1?"#ccc":"#d32f2f","&:hover":{backgroundColor:a.headers.length<=1?"transparent":ue("#d32f2f",.08)}}},m.createElement(Wn,{fontSize:"inherit"})))))),m.createElement(I,{sx:{width:"1px",height:"20px",backgroundColor:o.toolbarBorder,mx:1}}),m.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},m.createElement("span",{style:{fontSize:"0.75rem",color:o.cellText,opacity:.7}},"æ’åº:"),x.orderBy&&m.createElement(I,{sx:{display:"flex",alignItems:"center",gap:.5}},m.createElement("span",{style:{fontSize:"0.75rem",fontWeight:500,color:o.cellText}},x.orderBy),m.createElement("span",{style:{fontSize:"0.75rem",color:"#1976d2"}},x.order==="asc"?"â†‘":"â†“"),m.createElement(Ie,{title:"Clear Sort"},m.createElement(le,{size:"small",onClick:()=>{h({order:"asc",orderBy:""})},sx:{p:.25}},m.createElement(qn,{fontSize:"inherit"})))),!x.orderBy&&m.createElement("span",{style:{fontSize:"0.75rem",color:o.cellText,opacity:.5,fontStyle:"italic"}},"ç‚¹å‡»è¡¨å¤´æ’åº"))),m.createElement(I,{sx:{ml:"auto",display:"flex",alignItems:"center",gap:1}},d&&m.createElement(Ie,{title:m.createElement(I,{sx:{fontSize:"0.75rem",lineHeight:1.2}},m.createElement("div",null,"å¿«æ·é”®:"),m.createElement("div",null,"â€¢ Ctrl+A: å…¨é€‰"),m.createElement("div",null,"â€¢ Ctrl+D: å–æ¶ˆé€‰æ‹©"),m.createElement("div",null,"â€¢ Ctrl+B: åŠ ç²—é€‰ä¸­å•å…ƒæ ¼"),m.createElement("div",null,"â€¢ Ctrl+I: æ–œä½“é€‰ä¸­å•å…ƒæ ¼"),m.createElement("div",null,"â€¢ Ctrl+C: å¤åˆ¶é€‰ä¸­å•å…ƒæ ¼"),m.createElement("div",null,"â€¢ Ctrl+X: å‰ªåˆ‡é€‰ä¸­å•å…ƒæ ¼"),m.createElement("div",null,"â€¢ Ctrl+V: ç²˜è´´åˆ°æ´»åŠ¨å•å…ƒæ ¼"),m.createElement("div",null,"â€¢ Delete: åˆ é™¤é€‰ä¸­è¡Œ"),m.createElement("div",null,"â€¢ Ctrl+ç‚¹å‡»: å¤šé€‰"),m.createElement("div",null,"â€¢ Shift+ç‚¹å‡»: èŒƒå›´é€‰æ‹©"),m.createElement("div",null,"â€¢ æ–¹å‘é”®: ç§»åŠ¨é€‰æ‹©"),m.createElement("div",null,"â€¢ Shift+æ–¹å‘é”®: æ‰©å±•é€‰æ‹©"),m.createElement("div",null,"â€¢ æ‹–æ‹½è¡Œé¦–å›¾æ ‡: é‡æ–°æ’åº"))},m.createElement(le,{size:"small"},m.createElement(ba,{fontSize:"small"}))),t&&m.createElement(I,{sx:{fontSize:"0.75rem",color:"text.secondary",display:"flex",alignItems:"center"}},"Table ID: ",t,g&&m.createElement("span",{style:{marginLeft:"8px"}},g.schema.columnCount,"Ã—",g.schema.rowCount)))),d&&S.length>0&&m.createElement(I,{sx:{px:1,py:.5,display:"flex",alignItems:"center",gap:1,backgroundColor:ue("#1976d2",.04),borderTop:`1px solid ${o.toolbarBorder}`}},m.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},m.createElement(yn,{size:"small",indeterminate:S.length>0&&S.length<a.rows.length,checked:a.rows.length>0&&S.length===a.rows.length,onChange:ne}),m.createElement("span",{style:{fontWeight:500,color:"#1976d2",fontSize:"0.875rem"}},S.length," row",S.length>1?"s":""," selected")),m.createElement(I,{sx:{display:"flex",gap:.5,ml:2}},m.createElement(Ie,{title:"Delete Selected Rows"},m.createElement(le,{size:"small",onClick:()=>{const f={headers:[...a.headers],rows:a.rows.map(b=>[...b])};[...S].sort((b,C)=>C-b).forEach(b=>{f.rows.splice(b,1)}),_(f),E([]),W(null)},color:"error"},m.createElement(Wn,null))),m.createElement(Ie,{title:"Clear Selection"},m.createElement(le,{size:"small",onClick:()=>{E([]),k([]),W(null)}},m.createElement(qn,null)))))),m.createElement(xa,{sx:{width:"100%",overflowX:"hidden",overflowY:"visible",maxWidth:"100%",display:"block"},className:"uniform-scroller"},m.createElement(Ca,{size:"small",stickyHeader:!0,sx:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","& .MuiTableCell-root":{wordWrap:"break-word",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"normal",verticalAlign:"top",borderLeft:"none",borderRight:"none",borderBottom:`1px solid ${o.cellBorder}`,color:o.cellText}}},m.createElement(ka,null,m.createElement(wn,{sx:{backgroundColor:o.headerBackground,"& .MuiTableCell-head":{fontWeight:600,borderBottom:`2px solid ${o.cellBorder}`,color:o.headerText,position:"sticky",top:0,backgroundColor:o.headerBackground,zIndex:10}}},d&&m.createElement(Lt,{padding:"checkbox",sx:{width:80}},m.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},m.createElement(yn,{color:"primary",indeterminate:S.length>0&&S.length<a.rows.length,checked:a.rows.length>0&&S.length===a.rows.length,onChange:ne,inputProps:{"aria-label":"select all rows"}}),m.createElement(Ir,{fontSize:"small",sx:{opacity:.5,cursor:"default"}}))),a.headers.map((f,p)=>m.createElement(Lt,{key:p,sx:{width:`${100/a.headers.length}%`,minWidth:0,maxWidth:`${100/a.headers.length}%`,padding:"4px 8px","& > *":{width:"100%",maxWidth:"100%"}}},m.createElement(Ea,{active:d&&x.orderBy===f,direction:x.orderBy===f?x.order:"asc",onClick:()=>{d&&je(f)},disabled:!d,sx:{width:"100%","& .MuiTableSortLabel-root":{flexDirection:"row"},"&.Mui-disabled":{opacity:1,color:"inherit"}}},m.createElement(I,{sx:{display:"flex",alignItems:"flex-start",minHeight:"32px",cursor:d?"text":"default",padding:"6px 8px",width:"100%",wordBreak:"break-word",whiteSpace:"normal","&:hover":{backgroundColor:d?o.headerHoverBackground:"transparent"}},onClick:b=>{d&&(b.stopPropagation(),Q(-1,p))}},l?.rowIndex===-1&&l?.colIndex===p?We(f,-1,p):m.createElement("span",{style:{wordBreak:"break-word",whiteSpace:"normal",display:"block",color:o.headerText,width:"100%"}},f||`Header ${p+1}`)),d&&x.orderBy===f?m.createElement(I,{component:"span",sx:va},x.order==="desc"?"sorted descending":"sorted ascending"):null))))),m.createElement(Sa,null,m.createElement(vo,{items:Y.map((f,p)=>`row-${p}`),strategy:So},Y.map((f,p)=>{const b=re(p),C=`row-${p}`;return d?m.createElement(ji,{key:C,rowId:C,rowIndex:p,row:f,isEditMode:d,isSelected:b,lastSelectedIndex:Z,editingCell:l,onRowClick:we,renderCellContent:it,setSelectedRows:E,setLastSelectedIndex:W,totalColumns:a.headers.length,themeStyles:o}):m.createElement(wn,{key:C,hover:!0,sx:{"&:nth-of-type(even)":{backgroundColor:o.cellBackground},"&:hover":{backgroundColor:o.cellHoverBackground}}},f.map((T,B)=>m.createElement(Lt,{key:B,sx:{width:`${100/a.headers.length}%`,minWidth:0,maxWidth:`${100/a.headers.length}%`,padding:0,"& > *":{width:"100%",maxWidth:"100%"}}},it(T,p,B))))})))))))},(t,e)=>t.tableId!==e.tableId?!1:JSON.stringify(t.tableData)===JSON.stringify(e.tableData));class pt{static instance;mountedRoots=new Map;lastTableStates=new Map;pendingRoots=new Set;static getInstance(){return pt.instance||(pt.instance=new pt),pt.instance}mountTables(){const e=document.querySelectorAll("[data-react-table]"),n=new Set;e.forEach((r,o)=>{const a=r.getAttribute("data-table-id");if(r.getAttribute("data-align"),r.getAttribute("data-table-hash"),!a){console.warn(`è¡¨æ ¼å ä½ç¬¦ ${o} ç¼ºå°‘ data-table-id`);return}n.add(a);const l=Fi(a)?.tableHash||null,c=this.lastTableStates.get(a),d=this.mountedRoots.get(a),u=r.children.length>0,g=this.pendingRoots.has(a);if(!l){console.warn(`è¡¨æ ¼ ${a} åœ¨æ³¨å†Œè¡¨ä¸­æœªæ‰¾åˆ°ï¼Œè·³è¿‡å¤„ç†`);return}if(!g&&!(d&&l===c&&u)){if(d&&(!u||l!==c)){this.updateTable(a,l);return}d||this.createTableRoot(r,a,l)}}),this.cleanupUnusedRoots(n)}createTableRoot(e,n,r){if(!this.pendingRoots.has(n)){this.pendingRoots.add(n);try{e.innerHTML="",e.style.border="none",e.style.background="transparent",e.style.minHeight="auto",e.style.padding="0",e.style.margin="16px 0",Ue(()=>import("./react-dom-b710246a.js").then(o=>o.c),["./react-dom-b710246a.js","./@babel-518c05f7.js","./react-0d9c9f23.js","./scheduler-765c72db.js"],import.meta.url).then(({createRoot:o})=>{if(!document.contains(e)){console.warn(`è¡¨æ ¼ ${n} çš„å ä½ç¬¦å·²è¢«ç§»é™¤`),this.pendingRoots.delete(n);return}if(this.mountedRoots.has(n)){this.pendingRoots.delete(n);return}const a=o(e);a.render(m.createElement(lr,{tableId:n})),this.mountedRoots.set(n,a),r&&this.lastTableStates.set(n,r),this.pendingRoots.delete(n)}).catch(o=>{console.error(`åˆ›å»ºè¡¨æ ¼ ${n} æ ¹èŠ‚ç‚¹å¤±è´¥:`,o),this.pendingRoots.delete(n)})}catch(o){console.error(`ä¸ºè¡¨æ ¼ ${n} åˆ›å»ºæ ¹èŠ‚ç‚¹æ—¶å‘ç”Ÿé”™è¯¯:`,o),this.pendingRoots.delete(n)}}}updateTable(e,n){const r=this.mountedRoots.get(e);if(r&&n)try{r.render(m.createElement(lr,{tableId:e,key:`${e}-${n}`})),this.lastTableStates.set(e,n)}catch(o){console.error(`æ›´æ–°è¡¨æ ¼ ${e} å¤±è´¥:`,o)}}cleanupUnusedRoots(e){const n=[];this.mountedRoots.forEach((r,o)=>{if(!e.has(o))try{r.unmount(),n.push(o)}catch(a){console.warn(`å¸è½½è¡¨æ ¼ ${o} å¤±è´¥:`,a)}}),n.forEach(r=>{this.mountedRoots.delete(r),this.lastTableStates.delete(r),this.pendingRoots.delete(r),et.clearTableListeners(r)})}forceRemountAllTables(){this.unmountAllTables(),this.mountTables()}unmountAllTables(){this.mountedRoots.forEach((e,n)=>{try{e.unmount(),et.clearTableListeners(n)}catch(r){console.warn(`å¸è½½è¡¨æ ¼ ${n} å¤±è´¥:`,r)}}),this.mountedRoots.clear(),this.lastTableStates.clear(),this.pendingRoots.clear(),et.clearAllListeners()}getDebugInfo(){return{mountedRootsCount:this.mountedRoots.size,tableStatesCount:this.lastTableStates.size,pendingRootsCount:this.pendingRoots.size,mountedTableIds:Array.from(this.mountedRoots.keys()),pendingTableIds:Array.from(this.pendingRoots),tableStates:Object.fromEntries(this.lastTableStates),syncListenersCount:et.syncListeners?.size||0}}}const Wi=(await ke("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;async function yt(t=!1){let e=At();e=wi(e);let n=await xi(e);const r=pt.getInstance();t||!window.IncrementalDOM?document.getElementById("view-area").innerHTML=Yt().render(e,n):window.IncrementalDOM.patch(document.getElementById("view-area"),Yt().renderToIncrementalDOM(e,n)),Wi.highlightAll(),r.mountTables()}class qi{themeState;fileManagerState;emojiPickerState;contextMenuClickPosition;states;memorableStates;settingsConfig;constructor({themeState:e,fileManagerState:n,emojiPickerState:r,contextMenuClickPosition:o,states:a,memorableStates:s,settingsConfig:l}){Fn(this,{themeState:se,fileManagerState:se,emojiPickerState:se,contextMenuClickPosition:se,states:se,memorableStates:se,settingsConfig:se}),this.themeState=e,this.fileManagerState=n,this.emojiPickerState=r,this.contextMenuClickPosition=o,this.states=a,this.memorableStates=s,this.settingsConfig=l}getAllConfig(){let e={};return Object.getOwnPropertyNames(this).forEach((n,r)=>{e[n]=this[n]}),e}}function Ki(t,e){const n=function(r,o,a,s,l){let c;return(r[o].map&&r[o].level===0||r[o].type==="list_item_open")&&(c=r[o].map[0],r[o].attrSet("data-line",String(c))),l.renderToken(r,o,a)};t.renderer.rules.paragraph_open=t.renderer.rules.heading_open=t.renderer.rules.table_open=t.renderer.rules.tr_open=t.renderer.rules.th_open=t.renderer.rules.bullet_list_open=t.renderer.rules.list_item_open=t.renderer.rules.import_plugin=n}let Ui=function(t){t.core.ruler.before("inline","myrule",function(e){var n=e.tokens;for(let r=0;r<n.length;r++)n[r].content&&n[r].content.indexOf("MYRULE")})},Vi=function(t){t.renderer.rules.image,t.core.ruler.before("normalize","replace_spaces_in_image_src",e=>{e.src=e.src.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(n,r,o)=>{const a=o.replace(/ /g,"%20");return`![${r}](${a})`})}),t.renderer.rules.image=function(e,n,r,o,a){const s=e[n],l="#";let c=s.attrs[s.attrIndex("src")][1],d=s.content;s&&s.attrGet("src")?.startsWith("/vf/")?o.vfImgSrcArr&&(c=o.vfImgSrcArr[o.vfImgSeq++]):s&&s.attrGet("src")?.startsWith("./")&&(c=o.vfImgSrcArr[o.vfImgSeq++]);let u="auto",g="",y="L",x=d.split(l);if(x.length>1)for(let h=0;h<x.length;h++){let w=x[h];w==="s"&&(g+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),w==="s1"&&(g+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),w==="s2"&&(g+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(w==="C"||w=="c")&&(y="C"),(w==="R"||w=="r")&&(y="R"),w.startsWith("w")&&(u=x[h].substring(1),u.endsWith("%")||(u+="px"))}return`<div class="imgBox-r FLEX  ${y=="C"?" JUS-CENTER":y=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${u}" style="${g}" src="${c}" alt="${d}">
    </div>`}};const Ji=(await ke("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default;let Gi=function(t){const e=t.renderer.rules.code_block;t.renderer.rules.fence=function(n,r,o,a,s){let l;n[r].map&&n[r].level===0&&(l=n[r].map[0],n[r].attrSet("data-line",String(l)));let c=n[r].info,d=n[r].content;if(d=d.replace(/</g,"&lt;").replace(/>/g,"&gt;"),c==="mermaid"){if(a.mermaidParsedArr)return`<div data-line="${l}" class="language-mermaid language-plaintext">
        ${a.mermaidParsedArr[a.mermaidSeq++]}
        </div>`}else return Ji.getLanguage(c)?`<pre class="language-code" data-line="${l}"><code class="language-${c} ${ge()==="light"?"":"hljs-dark"}">${d}</code></pre>`:`<div class="code-container" data-line="${l}">
      <pre><code class="language-plaintext">${d}</code></pre>
    </div>`;return e(n,r,o,a,s)}},Xi=function(t){function e(n){const r=n.tokens;for(let o=0;o<r.length;o++)if(r[o].type==="inline"){let a=r[o].children;for(let s=0;s<a.length;s++){const l=a[s];if(l.type==="text"&&l.content){const d=l.content.match(/\^(.*?)\^(.*?)\#$/);if(d){const u=new n.Token("html_block","",0);u.content=`<div class="${d[2]}">${t.render(d[1])}</div>`,a[s]=u,s++}}}}}t.core.ruler.push("my_rule1",e),t.inline.ruler.before("emphasis","mark",(n,r)=>!1)};function Yi(t){t.core.ruler.push("custom_align",function(e){let n=null;e.tokens.forEach((r,o)=>{if(r.type==="paragraph_open"){let a=e.tokens[o+1];a&&a.type==="inline"&&a.children.forEach(s=>{if(s.type==="text"){const l=s.content;switch(l.slice(-2)){case"||":s.content=l.slice(0,-2),n="C";break;case">>":s.content=l.slice(0,-2),n="R";break}}})}n&&r.type==="paragraph_open"&&(r.attrPush(["class",n]),n=null)})})}function Zi(t){t.core.ruler.push("custom_align_heading",function(e){let n=null;e.tokens.forEach((r,o)=>{if(r.type==="heading_open"){let a=e.tokens[o+1];a&&a.type==="inline"&&a.children.forEach(s=>{if(s.type==="text"){const l=s.content;switch(l.slice(-2)){case"||":s.content=l.slice(0,-2),n="C";break;case">>":s.content=l.slice(0,-2),n="R";break}}})}n&&r.type==="heading_open"&&(r.attrPush(["class",n]),n=null)})})}function Qi(t,e,n=t.createDecorationsCollection()){document.getElementById("view-area").addEventListener("dblclick",function(r){let o=r.target,a=0;if(o!==this){for(;o;){if(o.hasAttribute("data-line")){a=parseInt(o.getAttribute("data-line"));break}o=o.parentElement}a&&(t.setPosition({lineNumber:a+1,column:1}),t.revealLineInCenter(a+1,1),n.clear(),n.set([{range:new e.Range(a+1,1,a+1,1),options:{isWholeLine:!0,className:"HILIGHT-MONACO",zIndex:0}}]))}})}const qt={};let es=0;const ts=t=>{if(!qt[t]){const e=document.createElement("div");e.className=`mui-notification-wrapper-${t}`,e.style.cssText=`
      position: fixed;
      z-index: 10000;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-width: 320px;
    `;const n=ns(t);Object.assign(e.style,n),document.body.appendChild(e),qt[t]=e}return qt[t]},ns=t=>{const e={topLeft:{top:"24px",left:"24px"},topRight:{top:"24px",right:"24px"},bottomLeft:{bottom:"24px",left:"24px"},bottomRight:{bottom:"24px",right:"24px"},top:{top:"24px",left:"50%",transform:"translateX(-50%)"},bottom:{bottom:"24px",left:"50%",transform:"translateX(-50%)"}};return e[t]||e.bottomRight},_n=()=>{const t=ge()==="dark",e={light:{backgroundColor:"#ffffff",borderColor:"#d9d9d9",textColor:"#000000d9",secondaryTextColor:"#00000073",shadowColor:"rgba(0,0,0,.15)"},dark:{backgroundColor:"#2f2f2f",borderColor:"#424242",textColor:"#ffffffd9",secondaryTextColor:"#ffffff73",shadowColor:"rgba(0,0,0,.3)"}},n=t?"dark":"light";return{...e,current:n,currentColors:e[n]}},rs=t=>{const e=_n(),n=e.currentColors,r={width:"320px",border:"1px solid",borderRadius:"6px",boxShadow:`0 4px 12px ${n.shadowColor}`,padding:"16px 24px 16px 16px",fontSize:"14px",fontWeight:400,position:"relative",cursor:"pointer",pointerEvents:"auto",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',lineHeight:"1.5715",backgroundColor:n.backgroundColor,color:n.textColor},o={success:e.current==="dark"?"#52c41a40":"#ffffff",error:e.current==="dark"?"#ff4d4f40":"#ffffff",warning:e.current==="dark"?"#faad1440":"#ffffff",info:e.current==="dark"?"#1890ff40":"#ffffff"};return{...r,borderColor:o[t]}},as=t=>{const e=document.createElement("span");e.style.cssText=`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    margin-right: 12px;
    flex-shrink: 0;
  `;const n={success:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 6.1L7.1 10.4c-.2.2-.4.3-.7.3s-.5-.1-.7-.3L3.5 8.2c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L6.4 8.3l3.7-3.7c.4-.4 1-.4 1.4 0s.4 1 0 1.5z"/>
      </svg>`,color:"#52c41a"},error:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3s-.5-.1-.7-.3L8 9.4l-2.1 2.1c-.2.2-.4.3-.7.3s-.5-.1-.7-.3c-.4-.4-.4-1 0-1.4L6.6 8 4.5 5.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0L8 6.6l2.1-2.1c.4-.4 1-.4 1.4 0s.4 1 0 1.4L9.4 8l2.1 2.1z"/>
      </svg>`,color:"#ff4d4f"},warning:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8.7.1c-.4-.2-.9-.2-1.3 0-.2.1-.4.2-.5.4L.2 13.2c-.2.4-.2.8 0 1.2.1.2.3.3.5.4.2.1.4.1.6.1h13.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.4.2-.4.2-.8 0-1.2L8.2.5c-.1-.2-.3-.3-.5-.4zM9 12H7v-2h2v2zm0-3H7V5h2v4z"/>
      </svg>`,color:"#faad14"},info:{html:`<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm1 12H7V7h2v5zm0-6H7V4h2v2z"/>
      </svg>`,color:"#1890ff"}},r=n[t]||n.success;return e.innerHTML=r.html,e.style.color=r.color,e},os=()=>{const e=_n().currentColors,n=document.createElement("span");return n.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
    <path d="M6.8 6l4.6-4.6c.2-.2.2-.5 0-.7s-.5-.2-.7 0L6 5.3 1.4.7c-.2-.2-.5-.2-.7 0s-.2.5 0 .7L5.3 6 .7 10.6c-.2.2-.2.5 0 .7.1.1.2.1.4.1s.3 0 .4-.1L6 6.8l4.6 4.6c.1.1.2.1.4.1s.3 0 .4-.1c.2-.2.2-.5 0-.7L6.8 6z"/>
  </svg>`,n.style.cssText=`
    position: absolute;
    top: 12px;
    right: 12px;
    cursor: pointer;
    opacity: 0.45;
    padding: 4px;
    border-radius: 2px;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    color: ${e.secondaryTextColor};
  `,n.addEventListener("mouseenter",()=>{n.style.opacity="0.75"}),n.addEventListener("mouseleave",()=>{n.style.opacity="0.45"}),n},is=t=>{const e={topLeft:{from:{x:-100,opacity:0},to:{x:0,opacity:1}},topRight:{from:{x:100,opacity:0},to:{x:0,opacity:1}},bottomLeft:{from:{x:-100,opacity:0},to:{x:0,opacity:1}},bottomRight:{from:{x:100,opacity:0},to:{x:0,opacity:1}},top:{from:{y:-50,opacity:0},to:{y:0,opacity:1}},bottom:{from:{y:50,opacity:0},to:{y:0,opacity:1}}};return e[t]||e.bottomRight},ss=(t,e,n)=>{const r=n?.kind??"success",o=n?.position??"bottomRight",s={success:"success",error:"error",warning:"warning",info:"info"}[r]||"success",l=ts(o),d=_n().currentColors,u=document.createElement("div");u.className="mui-notification-item",u.setAttribute("data-notification-id",String(++es));const g=rs(s);Object.assign(u.style,g);const y=document.createElement("div");y.style.cssText=`
    display: flex;
    align-items: flex-start;
    gap: 0;
  `;const x=as(s),h=document.createElement("div");h.style.cssText=`
    flex: 1;
    min-width: 0;
  `;const w=document.createElement("div");w.textContent=t,w.style.cssText=`
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
    color: ${d.textColor};
  `;const k=document.createElement("div");k.textContent=e,k.style.cssText=`
    font-size: 14px;
    color: ${d.secondaryTextColor};
    line-height: 1.5715;
  `,h.appendChild(w),h.appendChild(k),y.appendChild(x),y.appendChild(h);const S=os();u.appendChild(y),u.appendChild(S),l.appendChild(u);const E=is(o);Vt.fromTo(u,{...E.from,scale:.9},{duration:.4,...E.to,scale:1,ease:"back.out(1.2)"});const P=()=>{const $={duration:.3,opacity:0,scale:.9,ease:"power2.in"};o.includes("Right")?$.x=100:o.includes("Left")?$.x=-100:o.includes("top")?$.y=-50:$.y=50,Vt.to(u,{...$,onComplete:()=>{u.parentNode&&(l.removeChild(u),l.children.length===0&&(document.body.removeChild(l),delete qt[o]))}})};S.addEventListener("click",$=>{$.stopPropagation(),P()}),setTimeout(P,4500)},cr=(t,e,n)=>{ss(t,e,n)};function Jr(t,e){if(typeof t!="object"||t===null||typeof e!="object"||e===null)return t;for(let n in e)e.hasOwnProperty(n)&&(typeof e[n]=="object"&&e[n]!==null?t[n]=Jr(t[n],e[n]):t[n]=e[n]);return t}function Gr(t){return new Promise(e=>{let n=0;const r=()=>{let o=!0;for(const a of t)if(typeof window[a]>"u"){o=!1;break}if(o)e();else{n++;let a=1e3;n<=5?a=30:n<=10&&(a=50),setTimeout(r,a)}};r()})}const ls=/^@\[(import)\]\(([^)]+)\)$/,cs=function(e){const n=`
border: none;
height: 89svh;
`;function r(o,a){o.posMax;const s=o.pos;if(o.src.charCodeAt(s)!==64||o.src.charCodeAt(s+1)!==91)return!1;const l=o.src.indexOf("]",s+2);if(l===-1||o.src.charCodeAt(l+1)!==40)return!1;const c=o.src.indexOf(")",l+2);if(c===-1)return!1;const d=ls.exec(o.src.slice(s,c+1));if(!d)return!1;if(!a){const u=o.push("import_inline","",0),g=d[2].trim(),y=g.match(/\.(md|xlsx|csv|pdf)$/);if(!y)return!1;u.content=g,u.meta={extension:y[1]}}return o.pos=c+1,!0}e.inline.ruler.before("emphasis","import_plugin",r),e.renderer.rules.import_inline=function(o,a,s,l){const c=o[a];c.content,c.meta.extension;const d=`${l.pdfParsedArr[0]}`;let u;return d.length>10?u=`<embed onload="(()=>{Array.from(document.getElementsByClassName('pdf-preview')).forEach(e=>e.style.width=document.getElementById('view-area').clientWidth-20+'px')})()" class="pdf-preview" style="${n}" src="${d}"></embed>`:u="<div>PDF loading...</div>",u}};function ds(t){function e(r,o){let a=r.pos;if(r.src[a]!=="\\"||r.src[a+1]!=="(")return!1;let s=r.src.indexOf("\\)",a+2);if(s===-1)return!1;if(!o){const l=r.src.slice(a+2,s).replace(/\s+/g,"");let c=r.push("math_inline","",0);c.content=`${l}`}return r.pos=s+2,!0}function n(r,o,a,s){let l=r.bMarks[o]+r.tShift[o],c=r.eMarks[o];if(r.src.slice(l,l+2)!=="\\[")return!1;let d=r.src.slice(l+2,c),u=[],g=!1,y=o,x=d.indexOf("\\]");if(x!==-1)u.push(d.slice(0,x)),g=!0;else for(u.push(d),y=o+1;y<a;y++){l=r.bMarks[y]+r.tShift[y],c=r.eMarks[y];let h=r.src.slice(l,c);if(x=h.indexOf("\\]"),x!==-1){u.push(h.slice(0,x)),g=!0;break}u.push(h)}if(!g)return!1;if(!s){let h=r.push("math_block","",0);h.block=!0,h.content=u.join(`
`).trim(),h.map=[o,y+1]}return r.line=y+1,!0}t.block.ruler.before("paragraph","math_block",n,{alt:["paragraph"]}),t.inline.ruler.before("escape","math_inline2",e)}const us=(await ke("https://cdn.jsdmirror.com/npm/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js")).default,un=(await ke("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default,ms=(await ke("https://cdn.jsdmirror.com/npm/markdown-it@8.4.2/+esm")).default,mn=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,gs=(await ke("https://cdn.jsdmirror.com/npm/markdown-it-footnote@4.0.0/+esm")).default;function Yt(){return ms({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(Ki).use(Ro,{anchorLinkSymbol:"",anchorLinkBefore:!1}).use(Ui).use(Vi).use(Lo,{multiline:!0,rowspan:!0,headerless:!0,multibody:!0,aotolabel:!0}).use(Gi).use(Xi).use(gs).use(Yi).use(Zi).use(Ao).use($o).use(ds).use(Vr).use(cs).use(Di).use(window.markdownitIncrementalDOM)}class fs{constructor(){}mermaidInit(){const e={securityLevel:"loose",logLevel:4,startOnLoad:!1,gantt:{fontSize:19,sectionFontSize:"16",numberSectionStyles:10,useMaxWidth:!0},theme:pe().advanced.mermaidTheme};un.parseError=n=>{},un.initialize(e),un.mermaidAPI.initialize(e)}hljsInit(){us.configure({ignoreUnescapedHTML:!0})}settingsAllInit(){this.mermaidInit(),this.hljsInit()}static newSettings(){return new this}}function hs(t=window.editor,e=window.monaco){new fs().settingsAllInit(),pi(),mn.addStyle(`
    .markdown-body p,
    .markdown-body ol,
    .markdown-body li,
    .markdown-body div {
        font-size: ${pe().basic.fontSize}px;
    }
      `,"fontSizeStyle"),yi().then(async()=>{await yt(!1),Ke({unmemorable:{loading:!1}}),await mn.sleep(110),cr(Qe.t("t-updated-to-latest-version"),Qe.t("t-current-version",{version:"v3.1.0"})),await mn.sleep(680),cr(Qe.t("t-new-features-current-version"),Qe.t("t-file-manager"),{kind:"info"})}),window._deco=t.createDecorationsCollection(),window._speechData={processing:!1,speechResult:"",speech:null,isFinal:!1},Qi(t,e,window._deco)}const Mt={themeState:"light",fileManagerState:!1,emojiPickerState:"off",contextMenuClickPosition:{posx:20,posy:20},memorableStates:{memorable:{languageChanged:!1,welcomeAnimationState:!0,localLANId:"none"}},states:{unmemorable:{isDragging:!1,loading:!0,previewMode:!1,aiPanelState:!1,voicePanelState:!1,voiceData:"",promptPanelState:!1,mouseUpPos:{posx:0,posy:0},selectEndPos:{posx:0,posy:0}}},settingsConfig:{basic:{language:"zh",editorAutoWrap:!0,fontSize:16,fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',syncScroll:!1,speechLanguage:"zh-CN",fileEditLocal:!0},advanced:{mermaidTheme:"default",imageSettings:{modePrefer:"folder",basicStyle:"#w70%#c#s",imgStorePath:"/images/",htmlOrMdStyle:"md"}}}},ps=[...Object.keys(Mt.memorableStates.memorable),...Object.keys(Mt.states.unmemorable),...Object.keys(Mt.settingsConfig.basic),...Object.keys(Mt.settingsConfig.advanced)],qd=["default","forest","dark","neutral"],Kd=["default (é»˜è®¤ï¼Œæ‰æ˜¯æœ€ç¾çš„ï¼)","forest (è¯´çœŸçš„ï¼Œå¾ˆç»¿)","dark (è¯´çœŸçš„ï¼Œå¾ˆé»‘)","neutral (æ¸…å¿ƒå¯¡æ¬²ï¼Œå‡ºå®¶å¿…é€‰)"];function ys(t){function e(o){typeof n[o]=="object"?r.setItem(o,JSON.stringify(n[o])):r.setItem(o,n[o])}let n=t,r=new Nr;for(let o in n)if(r.getItem(o))if(o=="themeState"||o=="emojiPickerState"||o=="settingsConfig"||o=="memorableStates")try{if(typeof n[o]=="object"){const a=JSON.parse(r.getItem(o).toString());for(let s in a)Object.keys(a[s]).forEach(l=>{if(!ps.includes(l))return console.warn("abnormal key"),e(o),n});r.setItem(o,JSON.stringify(Jr(t[o],JSON.parse(r.getItem(o).toString())))),n[o]=JSON.parse(r.getItem(o).toString())}else n[o]=r.getItem(o).toString()}catch{console.warn("reset settings 1"),e(o)}else e(o);else console.warn("reset settings 3"),e(o);return n}const ws=new qi(ys(Mt)),$e=()=>ws;let Ft=new Nr;function Ud(t){de(()=>{t=="light"?($e().themeState="light",Ft.setItem("themeState","light")):($e().themeState="dark",Ft.setItem("themeState","dark"))})}function ge(){return $e().themeState}function bs(t){if(t.posx&&t.posy)de(()=>{$e().contextMenuClickPosition=t});else return!1}function Vd(t){const e=xs(),n=Cs(e,t);de(()=>{$e().memorableStates=n}),Ft.setItem("memorableStates",JSON.stringify(n))}function xs(){return Pn($e().memorableStates)}function Ke(t){const e=tt(),n=ks(e,t);de(()=>{$e().states=n}),Ft.setItem("states",JSON.stringify(n))}function tt(){return Pn($e().states)}function Zt(t){const e=pe(),n=Es(e,t);de(()=>{$e().settingsConfig=n}),Ft.setItem("settingsConfig",JSON.stringify(n))}function pe(){return Pn($e().settingsConfig)}function Cs(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function ks(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Es(t,e){for(const n in e)n in t?Object.assign(t[n],e[n]):t[n]=e[n];return t}function Qt(t){de(()=>{$e().fileManagerState=t})}function Xr(){return $e().fileManagerState}const vs=m.forwardRef(Ss);function Ss(t,e){let n="FLEX JUS-CENTER ",r={width:"fitContent"};const[o,a]=m.useState(!1),s=ge();function l(g){g.altKey&&Vo(`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${t.uuid})`),g.ctrlKey&&ot(`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${t.uuid})`,!0)}let[c,d]=m.useState({src:t.src,uuid:t.uuid,magic:t.magic!=0,className:n+(t.className??""),style:t.style?{...t.style,...r}:r});const u=g=>s==="dark"?"none":g?"1vh 2vh 21px rgb(79 79 79)":"rgb(216 216 216) 1vh 2vh 21px";return m.createElement(m.Fragment,null,m.createElement("div",{...c,...t,ref:e,className:c.className,style:c.style},m.createElement(Ie,{placement:"right",TransitionComponent:Dr,arrow:!0,title:"æŒ‰ä½Ctrlç‚¹å‡»æ’å…¥"},m.createElement("img",{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},onClick:g=>{l(g)},style:{width:"70%",transition:" 0.2s ease-in-out",borderRadius:"5px",transform:o?"translate(0px, -2px)":"",boxShadow:u(o)},src:c.src,alt:"error"}))))}class Ts{displayState=!1;imgList=[];refreshCounter=0;constructor(e){Fn(this,{displayState:se,imgList:se,refreshCounter:se}),this.displayState=e,this.loadImages()}display(){this.displayState=!0,this.refreshImages()}hidden(){this.displayState=!1}async loadImages(){try{const e=await hi();de(()=>{this.imgList=e||[]})}catch(e){console.error("Failed to load images:",e),de(()=>{this.imgList=[]})}}refreshImages(){this.loadImages(),this.refreshCounter++}getImages(){return this.imgList}}const Is=new Ts(!1),Yr=()=>Is;function Ds(t){const e=m.Children.toArray(t.children).length;let n="LR ",r={display:"flex",flexDirection:"row",justifyContent:t.jus??"center",alignItems:t.ali??"center",width:"100%",height:"100%"},[o,a]=m.useState({style:t.style?{...t.style,...r}:r,className:n+(t.className??""),space:t.space??void 0,order:[]}),[s,l]=m.useState({marginRight:"5px",width:"100%",height:"100%"});return m.createElement(m.Fragment,null,m.createElement("div",{...o,...t,className:o.className,style:o.style},m.Children.map(t.children,(c,d)=>d==e-1?m.createElement("div",{style:{...s,flex:o.space?"auto":void 0}},c):m.createElement("div",{style:{...s,order:`${o.order[d]}`,flex:`0 0 ${o.space?o.space[d]:void 0}%`}},c))))}function gn(t){let e="Box ",n={display:"flex",flexDirection:t.dir??"row",justifyContent:t.jus??"center",alignItems:t.ali??"center",width:t.min==1?"fitContent":"100%",height:t.min==1?"fitContent":"100%",transform:t.move?`translate(${t.move?.x??0}, ${t.move?.y??0})`:void 0},[r,o]=m.useState({style:t.style?{...t.style,...n}:n,className:e+(t.className??""),space:t.space??void 0,order:[]});return m.createElement(m.Fragment,null,m.createElement("div",{...r,...t,className:r.className,style:r.style},t.children))}const Ms=Sn({palette:{primary:{main:"#1976d2"}}}),Ls=Fe(()=>{const{t}=ye(),e=Yr(),[n,r]=i.useState(!1),[o,a]=i.useState(!1),s=ge();function l(){a(!0)}async function c(u){try{const g=await rt("md_content",2);Qo(g,"users_img","uuid",u),setTimeout(()=>{e.refreshImages()},100)}catch(g){console.error("åˆ é™¤å›¾ç‰‡å¤±è´¥:",g)}}i.useEffect(()=>{r(e.displayState)},[e.displayState]);const d=e.getImages();return i.createElement(i.Fragment,null,i.createElement(bt,{open:o,onClose:()=>{a(!1)},style:{zIndex:9999}},i.createElement(Tn,{id:"alert-dialog-title"},t("t-image-manager-delete-all-title")),i.createElement(In,null,i.createElement(Ta,{id:"alert-dialog-description"},t("t-image-manager-delete-all-content"))),i.createElement(Dn,null,i.createElement(me,{onClick:()=>{a(!1),ei("md_content"),e.refreshImages()}},t("t-image-manager-confirm-yes")),i.createElement(me,{onClick:()=>{a(!1)},autoFocus:!0},t("t-image-manager-confirm-no")))),i.createElement(Mn,{anchor:"bottom",open:n,elevation:16,onClose:()=>{e.hidden()}},i.createElement("div",{style:{height:"60vh",overflow:"auto"}},i.createElement("div",null,i.createElement(Mr,{theme:Ms},i.createElement(gn,null,i.createElement(Ds,{space:[90]},i.createElement(gn,{min:1,move:{x:"5vw"}},i.createElement("p",null,t("t-image-manager-title")),i.createElement(Ie,{title:i.createElement("div",null,t("t-image-manager-tooltip-title"),i.createElement("ul",{style:{margin:"2px"}},i.createElement("li",null,t("t-image-manager-tooltip-ctrl-click")),i.createElement("li",null,t("t-image-manager-tooltip-double-click")),i.createElement("li",null,t("t-image-manager-tooltip-alt-click"))))},i.createElement(le,null,i.createElement($t,{color:"primary"})))),i.createElement(gn,null,i.createElement(Ie,{title:t("t-image-manager-tooltip-delete-all")},i.createElement(le,{onClick:l},i.createElement(Ln,{color:"primary"})))))))),i.createElement(Kt,{style:{marginBottom:"1.3vh"}}),d.length>0?i.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem",padding:"0 1rem 1rem 1rem"}},d.map(u=>i.createElement("div",{key:u.uuid,style:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:s==="light"?"#f9f9f9":"#2a2a2a",borderRadius:"8px",padding:"1rem",transition:"all 0.2s ease",border:`1px solid ${s==="light"?"#e0e0e0":"#404040"}`}},i.createElement(Ie,{title:t("t-image-manager-tooltip-delete-single")},i.createElement(le,{size:"small",onClick:()=>c(u.uuid),style:{position:"absolute",top:"8px",right:"8px",backgroundColor:s==="light"?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.7)",color:"#f44336",zIndex:10,width:"24px",height:"24px"}},i.createElement(Ut,{style:{fontSize:"16px"}}))),i.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginBottom:"0.5rem"}},i.createElement(vs,{magic:0,src:u.imgBase64,uuid:u.uuid,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px"}})),i.createElement("div",{style:{fontSize:"12px",color:s==="light"?"#666":"#999",textAlign:"center",wordBreak:"break-all"}},"UUID: ",u.uuid)))):i.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem 1rem",color:s==="light"?"#999":"#666",textAlign:"center"}},i.createElement($t,{style:{fontSize:"48px",marginBottom:"1rem",opacity:.5}}),i.createElement("h3",{style:{margin:"0 0 0.5rem 0",fontWeight:"normal"}},t("t-image-manager-no-images-title")),i.createElement("p",{style:{margin:0,fontSize:"14px"}},t("t-image-manager-no-images-description"))))))}),Rs=at(me)(({theme:t})=>({color:t.palette.mode==="light"?"rgb(55, 65, 81)":"#FFFFFF",marginLeft:10,fontFamily:["electronicFont"].join(","),backgroundColor:t.palette.mode==="light"?"#FFFFFF":"","&:hover":{backgroundColor:t.palette.mode==="light"?Ia[300]:""}}));function Nt(t){return i.createElement(Rs,{id:"demo-customized-button",href:t.href?t.href:void 0,"aria-controls":t.open?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":t.open?"true":void 0,disableElevation:!0,onClick:t.onClick,onMouseOver:t.onHover,endIcon:t.endIcon,startIcon:t.startIcon?t.startIcon:void 0,variant:"contained"},t.children)}const $s=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function kn(){document.getElementById("view-area").innerHTML,window.document.body.style.background=ge()==="light"?"":"#0D1117",$s.sleep(500).then(()=>{window.print()})}function Zr(t,e,n=""){const r=e??window.editor,o=t.editor.getEditors()[0].getModel().getFullModelRange();r.executeEdits("my-replace2",[{range:o,text:n,forceMoveMarkers:!0}])}const Qr=at(t=>i.createElement(Da,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...t}))(({theme:t})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:t.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:t.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:t.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}})),dr=t=>t.children!==void 0,ur=t=>{const e=t.match(/^(\d+)/);return e?parseInt(e[1],10):null},As=(t,e)=>{const n=ur(t),r=ur(e);if(n!==null&&r!==null){if(n!==r)return n-r;const o=t.substring(n.toString().length),a=e.substring(r.toString().length);return o.toLowerCase().localeCompare(a.toLowerCase())}return n!==null?-1:r!==null?1:t.toLowerCase().localeCompare(e.toLowerCase())},ea=t=>{const e=[...t];return e.sort((n,r)=>{const o=dr(n),a=dr(r);return o&&!a?-1:!o&&a?1:As(n.label,r.label)}),e.forEach(n=>{n.children&&n.children.length>0&&(n.children=ea(n.children))}),e},Fs=3,Je=t=>t?t.replace(/[\/\\]+/g,"/").replace(/^\/+|\/+$/g,"").trim():"",mr=(t,e)=>{const n=Je(t);return`${e}:${n}`},Ps=t=>{const e=Je(t);return e?e.split("/").length:0},zs=(t,e)=>e!=="folder"?!1:Ps(t)>=Fs;at("div")`
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  .lazy-placeholder {
    opacity: 0.7;
    font-style: italic;
    
    &.loading {
      opacity: 0.5;
    }
  }
  
  .lazy-placeholder:hover {
    opacity: 1;
    background-color: ${ue("#1976d2",.08)};
  }
`;const _s=[{id:"1",label:"Documents"},{id:"2",label:"Bookmarked",children:[{id:"2.1",label:"Learning materials",fileType:"folder"}]}];function Bs(){return i.createElement(I,{sx:{width:8,height:8,borderRadius:"100%",bgcolor:"warning.main",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",zIndex:1,mx:1}})}const gr=at(Ma)(({theme:t})=>({color:t.palette.mode==="light"?t.palette.grey[800]:t.palette.grey[400],position:"relative",[`& .${Rt.groupTransition}`]:{marginLeft:t.spacing(3.5)}})),fr=at(La)(({theme:t})=>({flexDirection:"row-reverse",borderRadius:t.spacing(.7),marginBottom:t.spacing(.5),marginTop:t.spacing(.5),padding:t.spacing(.5),paddingRight:t.spacing(1),fontWeight:500,[`& .${Rt.iconContainer}`]:{marginRight:t.spacing(2)},"&.Mui-expanded ":{"&:not(.Mui-focused, .Mui-selected, .Mui-selected.Mui-focused) .labelIcon":{color:t.palette.mode==="light"?t.palette.primary.main:t.palette.primary.dark},"&::before":{content:'""',display:"block",position:"absolute",left:"16px",top:"44px",height:"calc(100% - 48px)",width:"1.5px",backgroundColor:t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[700]}},"&:hover":{backgroundColor:ue(t.palette.primary.main,.1),color:t.palette.mode==="light"?t.palette.primary.main:"white"},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:t.palette.mode==="light"?t.palette.primary.main:t.palette.primary.dark,color:t.palette.primary.contrastText},"&[draggable='true']":{cursor:"default","&:active":{opacity:1}},"&.drag-over":{backgroundColor:ue(t.palette.success.main,.2),border:`2px dashed ${t.palette.success.main}`}}));function Ns(t){return i.createElement(Lr,{...t})}const hr=({icon:t,expandable:e=!1,children:n,draggable:r=!1})=>i.createElement(i.Fragment,null,i.createElement($a,{draggable:r},i.createElement(I,{sx:{display:"flex",alignItems:"center",cursor:"pointer"}},t&&i.createElement(I,{component:t,className:"labelIcon",color:"inherit",sx:{mr:1,fontSize:"1.2rem"}}),i.createElement(U,{sx:{color:"inherit",fontFamily:"General Sans",fontWeight:500},variant:"body2"},n),e&&i.createElement(Bs,null)))),ta=t=>Array.isArray(t)?t.length>0&&t.some(ta):!!t;function En({visible:t,x:e,y:n,onClose:r,onNewFile:o,onNewFolder:a,onRename:s,onDelete:l,isFile:c=!1,isRoot:d=!1}){const{t:u}=ye(),g=i.useRef(null);if(i.useEffect(()=>{if(!t)return;console.log("Setting up global click listener for context menu");const k=$=>{if($.button!==2){if(g.current&&g.current.contains($.target)){console.log("Click inside menu, keeping open");return}console.log("Click outside menu, closing"),r()}},S=$=>{g.current&&!g.current.contains($.target)&&(console.log("Right click outside menu, closing"),r())},E=$=>{$.key==="Escape"&&(console.log("Escape key pressed, closing menu"),r())},P=setTimeout(()=>{document.addEventListener("mousedown",k),document.addEventListener("contextmenu",S),document.addEventListener("keydown",E)},100);return()=>{clearTimeout(P),document.removeEventListener("mousedown",k),document.removeEventListener("contextmenu",S),document.removeEventListener("keydown",E)}},[t,r]),!t)return null;const y=Math.min(e,window.innerWidth-220),x=Math.min(n,window.innerHeight-240);console.log("Rendering context menu at:",y,x,d?"(Root menu)":"");const h={position:"fixed",top:x,left:y,zIndex:999999,backgroundColor:"white",border:"1px solid #ddd",borderRadius:8,boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:200,padding:4,fontFamily:'"Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:14,userSelect:"none",pointerEvents:"auto",isolation:"isolate"},w={padding:"8px 16px",cursor:"pointer",borderRadius:4,display:"flex",alignItems:"center",gap:8,transition:"background-color 0.1s"};return ha.createPortal(i.createElement("div",{ref:g,style:h,onClick:k=>k.stopPropagation(),onContextMenu:k=>k.preventDefault()},(d||!c)&&i.createElement(i.Fragment,null,i.createElement("div",{style:w,onClick:k=>{k.stopPropagation(),o()},onMouseEnter:k=>k.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:k=>k.currentTarget.style.backgroundColor="transparent"},i.createElement("span",null,"ğŸ“„"),i.createElement("span",null,u("t-file-manager-new-file"))),i.createElement("div",{style:w,onClick:k=>{k.stopPropagation(),a()},onMouseEnter:k=>k.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:k=>k.currentTarget.style.backgroundColor="transparent"},i.createElement("span",null,"ğŸ“"),i.createElement("span",null,u("t-file-manager-new-folder"))),!d&&i.createElement("div",{style:{height:1,backgroundColor:"#eee",margin:"4px 0"}})),!d&&i.createElement(i.Fragment,null,i.createElement("div",{style:w,onClick:k=>{k.stopPropagation(),s()},onMouseEnter:k=>k.currentTarget.style.backgroundColor="#f5f5f5",onMouseLeave:k=>k.currentTarget.style.backgroundColor="transparent"},i.createElement("span",null,"âœï¸"),i.createElement("span",null,u("t-file-manager-rename"))),i.createElement("div",{style:{...w,color:"#ff4d4f"},onClick:k=>{k.stopPropagation(),l()},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="#fff2f0",k.currentTarget.style.color="#ff4d4f"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="transparent",k.currentTarget.style.color="#ff4d4f"}},i.createElement("span",null,"ğŸ—‘ï¸"),i.createElement("span",null,u("t-file-manager-delete"))))),document.body)}function Hs({onCreateFile:t,onCreateFolder:e}){const{t:n}=ye();return i.createElement(I,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:200,padding:"24px 16px",textAlign:"center",margin:"8px 4px"}},i.createElement(Rr,{sx:{fontSize:48,color:"text.secondary",mb:2,opacity:.6}}),i.createElement(U,{variant:"h6",color:"text.secondary",gutterBottom:!0,sx:{fontSize:"1rem",fontWeight:500}},n("t-file-manager-empty-folder")),i.createElement(U,{variant:"body2",color:"text.secondary",sx:{mb:3,opacity:.7,maxWidth:280}},n("t-file-manager-empty-folder-desc")),i.createElement(I,{sx:{display:"flex",gap:1.5,flexWrap:"wrap",justifyContent:"center"}},i.createElement(me,{size:"small",variant:"outlined",startIcon:i.createElement(za,null),onClick:t,sx:{borderRadius:2,textTransform:"none",fontSize:"0.875rem"}},n("t-file-manager-new-file")),i.createElement(me,{size:"small",variant:"outlined",startIcon:i.createElement(_a,null),onClick:e,sx:{borderRadius:2,textTransform:"none",fontSize:"0.875rem"}},n("t-file-manager-new-folder"))))}function pr({open:t,title:e,label:n,onClose:r,onConfirm:o,defaultValue:a=""}){const{t:s}=ye(),[l,c]=i.useState(a);i.useEffect(()=>{c(a)},[a,t]),i.useEffect(()=>{console.log("InputDialog state changed:",{open:t,title:e,label:n,defaultValue:a})},[t,e,n,a]);const d=()=>{l.trim()&&(o(l.trim()),r())};return i.createElement(bt,{open:t,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{style:{zIndex:999999}},style:{zIndex:999999}},i.createElement(Tn,null,e),i.createElement(In,null,i.createElement(wt,{autoFocus:!0,fullWidth:!0,label:n,value:l,onChange:u=>c(u.target.value),onKeyPress:u=>{u.key==="Enter"&&d()},sx:{mt:1}})),i.createElement(Dn,null,i.createElement(me,{onClick:r},s("t-image-manager-confirm-no")),i.createElement(me,{onClick:d,variant:"contained"},s("t-image-manager-confirm-yes"))))}function yr({open:t,title:e,message:n,onClose:r,onConfirm:o}){const{t:a}=ye();return i.createElement(bt,{open:t,onClose:r,PaperProps:{style:{zIndex:999999}},style:{zIndex:999999}},i.createElement(Tn,null,e),i.createElement(In,null,i.createElement(U,null,n)),i.createElement(Dn,null,i.createElement(me,{onClick:r},a("t-image-manager-confirm-no")),i.createElement(me,{onClick:o,color:"error",variant:"contained"},a("t-image-manager-confirm-yes"))))}const Os=t=>{switch(t){case"image":return Rn;case"pdf":return Fa;case"doc":return Jn;case"video":return Aa;case"folder":return $r;case"pinned":return Rr;case"trash":return Ln;default:return Jn}},js=i.forwardRef(function(e,n){const{setIsDragging:r,fillText:o,folderManager:a,setExpandedFolderState:s,onRefresh:l,onManualRefresh:c,contextMenuState:d,onShowContextMenu:u,onCloseContextMenu:g,inputDialog:y,confirmDialog:x,onShowInputDialog:h,onShowConfirmDialog:w,onCloseInputDialog:k,onCloseConfirmDialog:S,onConfirmInput:E,onConfirmDelete:P,onLoadLazily:$,currentEditingFile:D,onFileSelect:O,id:j,itemId:R,label:J,disabled:Y,children:ne,...Z}=e,{t:W}=ye(),we=en(),[ee,re]=i.useState(!1),[F,q]=i.useState(!1),X=d?.itemId===R,{getRootProps:_,getContentProps:Q,getIconContainerProps:Ee,getLabelProps:De,getGroupTransitionProps:ae,status:fe,publicAPI:ce}=Ra({id:j,itemId:R,children:ne,label:J,disabled:Y,rootRef:n});let v=ce.getItem(R);const ve=ta(ne);let xe;const _e=D&&v.path===D&&v.fileType==="file";v.fileType==="lazy-placeholder"?xe=void 0:ve?xe=$r:v.fileType&&(xe=Os(v.fileType));const je=async()=>{if(v.fileType==="lazy-placeholder"&&$){q(!0);try{const L=Je(v.path.replace("/[lazy-placeholder]",""));console.log("Lazy loading triggered for:",L,"from placeholder:",v.path),await $(R,L)}catch(L){console.error("Error loading lazily:",L)}finally{q(!1)}}},Me=L=>{v.fileType!=="lazy-placeholder"&&(L.preventDefault(),L.stopPropagation(),console.log("Right click detected on:",v.label),console.log("Event coordinates:",L.clientX,L.clientY),u(L,R))},We=L=>{Me(L),L.nativeEvent.stopImmediatePropagation?.()},Be=()=>{console.log("Closing context menu"),g()},it=()=>{console.log("handleNewFile called for item:",v.label,"path:",v.path),h({open:!0,type:"newFile",title:W("t-file-manager-new-file"),label:W("t-file-manager-new-file-name"),defaultValue:"",itemId:R}),console.log("InputDialog state set, closing context menu"),Be()},f=()=>{console.log("handleNewFolder called for item:",v.label,"path:",v.path),h({open:!0,type:"newFolder",title:W("t-file-manager-new-folder"),label:W("t-file-manager-new-folder-name"),defaultValue:"",itemId:R}),console.log("InputDialog state set, closing context menu"),Be()},p=()=>{console.log("handleRename called for item:",v.label,"path:",v.path),h({open:!0,type:"rename",title:W("t-file-manager-rename"),label:W("t-file-manager-rename-name"),defaultValue:v.label,itemId:R}),Be()},b=()=>{console.log("handleDelete called for item:",v.label,"path:",v.path);const L=v.fileType==="folder",z=L?W("t-file-manager-confirm-delete-folder",{name:v.label}):W("t-file-manager-confirm-delete-file",{name:v.label});w({open:!0,title:W("t-file-manager-confirm-delete"),message:z,action:async()=>{try{const K=a.getTopDirectoryHandle();if(!K)return;const te=D===v.path,oe=L&&D&&D.startsWith(v.path+"/");L?await a.deleteFolderAtPath(K,v.path):await a.deleteFileAtPath(K,v.path),(te||oe)&&(console.log("Deleted currently editing file/folder, clearing selection"),O?.("")),A(W("t-file-manager-delete-success"),2e3,{kind:"success"}),l(),S()}catch(K){console.error("Delete error:",K),A(W("t-file-manager-operation-failed"),2e3,{kind:"error"}),S()}},itemId:R}),Be()},C=L=>{const z=L.label.toLowerCase(),K=z.lastIndexOf(".");if(K===-1)return!1;const te=z.substring(K+1);return tn.includes(te)||te==="pdf"?!0:["md","txt","go","java","kt","py","js","ts","html","css","c","cpp","json","mjs","jsx","tsx","ps1","cmd","xsl","toml","ipynb","makefile","yml"].includes(te)},T=L=>L.label.toLowerCase().endsWith(".pdf"),B=async L=>{if(v.fileType==="lazy-placeholder"){await je();return}if(v.fileType==="file"&&a.fileState===1)try{if(!C(v)){const z=v.label.toLowerCase(),K=z.lastIndexOf("."),te=K!==-1?z.substring(K+1):"æœªçŸ¥";A(W("t-file-format-not-supported",{extension:te}),2e3,{kind:"warning"});return}if(Ke({unmemorable:{previewMode:!0}}),wr(v)){let z=`![${pe().advanced.imageSettings.basicStyle}](./${v.path})`;o(z,v.label),O?.(v.path)}else if(T(v)){let z=`@[import](./${v.path})`;o(z,v.label),O?.(v.path)}else{Ke({unmemorable:{previewMode:!1}});let z=await a.readFileContent(a.getTopDirectoryHandle(),v.path);o(z,v.label),await yt(!1),O?.(v.path)}}catch(z){console.error("Error reading file content:",z),A(W("t-error-opening-file"),2e3,{kind:"error"})}},H=L=>{if(v.fileType==="lazy-placeholder"){L.preventDefault();return}console.log("Drag start:",v.label,"path:",v.path),wr(v)?(L.dataTransfer.effectAllowed="copyMove",setTimeout(()=>{r(!0)},400),L.dataTransfer.setData("text/html",`![${pe().advanced.imageSettings.basicStyle}](./${v.path})`)):L.dataTransfer.effectAllowed="move",L.dataTransfer.setData("text/plain",JSON.stringify({itemId:R,label:v.label,path:v.path,fileType:v.fileType}))},M=L=>{v.fileType!=="lazy-placeholder"&&v.fileType==="folder"&&(L.preventDefault(),L.dataTransfer.dropEffect="move",re(!0))},V=L=>{L.currentTarget.contains(L.relatedTarget)||re(!1)},N=async L=>{if(L.preventDefault(),re(!1),v.fileType==="folder")try{const z=JSON.parse(L.dataTransfer.getData("text/plain")),{itemId:K,label:te,path:oe,fileType:Ct}=z;if(K===R)return;if(Ct==="folder"&&v.path.startsWith(oe)){A(W("t-file-manager-invalid-move"),2e3,{kind:"warning"});return}const ie=oe.includes("/")?oe.substring(0,oe.lastIndexOf("/")):"";if(ie===v.path)return;const he=a.getTopDirectoryHandle();if(!he)return;console.log(`Moving ${te} from "${ie}" to "${v.path}"`);const rn=D===oe,Se=Ct==="folder"&&D&&D.startsWith(oe+"/");let Te=te;if(Ct==="folder"?Te=await a.moveFolder(he,oe,v.path):Te=await a.moveFileByPath(he,oe,v.path),rn)if(Te!==te)console.log(`Moved currently editing file was renamed from '${te}' to '${Te}', clearing editing state`),O?.("");else{const Pe=v.path?`${v.path}/${Te}`:Te;console.log(`Moved currently editing file, updating path from '${oe}' to '${Pe}'`),O?.(Pe)}else if(Se&&D)if(Te!==te)console.log(`Moved folder containing currently editing file was renamed from '${te}' to '${Te}', clearing editing state`),O?.("");else{const Pe=D.substring(oe.length+1),kt=v.path?`${v.path}/${Te}/${Pe}`:`${Te}/${Pe}`;console.log(`Moved folder containing currently editing file, updating path from '${D}' to '${kt}'`),O?.(kt)}Te!==te?A(`${W("t-file-manager-move-success")} (${te} â†’ ${Te})`,3e3,{kind:"success"}):A(W("t-file-manager-move-success"),2e3,{kind:"success"}),setTimeout(async()=>{console.log("Executing immediate refresh after file move"),e.onManualRefresh?await e.onManualRefresh("file_move"):l()},50)}catch(z){console.error("Move error:",z),A(W("t-file-manager-operation-failed"),2e3,{kind:"error"})}};return v.fileType==="lazy-placeholder"?i.createElement("div",{style:{position:"relative"}},i.createElement(Kn,{itemId:R},i.createElement(gr,{onClick:je,..._(Z),style:{position:"relative",opacity:F?.6:1,cursor:F?"wait":"pointer"}},i.createElement(fr,{...Q({className:rr("content","lazy-placeholder",{loading:F})})},i.createElement(Un,{...Ee()},F?i.createElement("div",{style:{animation:"spin 1s linear infinite",fontSize:"1.2rem"}},"âŸ³"):i.createElement(Vn,{status:fe})),i.createElement(hr,{draggable:!1,...De({icon:void 0,expandable:!1})},W(F?"t-file-manager-loading":"t-file-manager-load-more")))))):i.createElement("div",{style:{position:"relative"}},i.createElement(Kn,{itemId:R},i.createElement(gr,{onClick:B,onContextMenu:We,draggable:!1,..._(Z),style:{position:"relative"}},i.createElement(fr,{draggable:qs(),onDragStart:H,onDragOver:M,onDragLeave:V,onDrop:N,...Q({className:rr("content",{"Mui-expanded":fe.expanded,"Mui-selected":!1,"Mui-focused":!1,"Mui-disabled":fe.disabled,"custom-editing":_e}),style:{backgroundColor:_e?we.palette.mode==="light"?we.palette.primary.main:we.palette.primary.dark:"transparent",color:_e?we.palette.primary.contrastText:"inherit"}})},i.createElement(Un,{...Ee()},i.createElement(Vn,{status:fe})),i.createElement(hr,{draggable:!1,...De({icon:xe,expandable:ve&&fe.expanded})})),ne&&i.createElement(Ns,{...ae()}))),i.createElement(En,{visible:X,x:d?.mouseX||0,y:d?.mouseY||0,onClose:Be,onNewFile:it,onNewFolder:f,onRename:p,onDelete:b,isFile:v.fileType==="file",isRoot:!1}))});function Ws(t){const{t:e}=ye();let n=ea(t.fileDirectoryArr);const[r,o]=i.useState(null),[a,s]=i.useState({open:!1,type:"newFile",title:"",label:"",defaultValue:"",itemId:""}),[l,c]=i.useState({open:!1,title:"",message:"",action:()=>{},itemId:""}),[d,u]=i.useState(!1),[g,y]=i.useState(new Set),x=i.useCallback(async(F,q)=>{if(t.onLoadLazily)return t.onLoadLazily(F,q);try{const X=t.folderManager.getTopDirectoryHandle();if(!X)return;const _=Je(q.replace("/[lazy-placeholder]",""));console.log("Loading folder lazily:",_,"from placeholder:",q);const Q=await t.folderManager.loadFolderLazily(X,_);if(!Q||Q.length===0){console.log("No children found for:",_);return}const Ee=Q.map(ce=>{const v=Je(ce.path||`${_}/${ce.label}`),ve=mr(v,ce.fileType);if(ce.fileType==="folder"){const xe=zs(v,"folder");return{...ce,id:ve,path:v,children:xe?[{id:mr(`${v}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${v}/[lazy-placeholder]`}]:ce.children}}else return{...ce,id:ve,path:v}}),De=ce=>ce.map(v=>{if(Je(v.path)===_&&v.fileType==="folder"){console.log("Found target folder, updating children:",v.path);const ve=v.children?.filter(Me=>Me.fileType!=="lazy-placeholder")||[],xe=new Set(ve.map(Me=>Je(Me.path))),_e=Ee.filter(Me=>!xe.has(Je(Me.path))),je=[...ve,..._e];return{...v,children:je.length>0?je:void 0}}return v.children&&Array.isArray(v.children)?{...v,children:De(v.children)}:v}),ae=Array.isArray(t.fileDirectoryArr)?t.fileDirectoryArr:[],fe=De(ae);console.log("File tree updated with lazy loaded content"),t.folderManager.topDirectoryArray=fe,t.onRefresh&&t.onRefresh(),y(ce=>new Set([...ce,_]))}catch(X){console.error("Error loading folder lazily:",X)}},[t.folderManager,t.fileDirectoryArr,t.onRefresh,t.onLoadLazily]),h=F=>{F.preventDefault(),F.stopPropagation(),console.log("Root area context menu triggered at:",F.clientX,F.clientY),o({mouseX:F.clientX,mouseY:F.clientY,itemId:"root"})},w=()=>{console.log("Root new file called"),s({open:!0,type:"newFile",title:e("t-file-manager-new-file"),label:e("t-file-manager-new-file-name"),defaultValue:"",itemId:"root"}),E()},k=()=>{console.log("Root new folder called"),s({open:!0,type:"newFolder",title:e("t-file-manager-new-folder"),label:e("t-file-manager-new-folder-name"),defaultValue:"",itemId:"root"}),E()},S=i.useCallback((F,q)=>{o({mouseX:F.clientX,mouseY:F.clientY,itemId:q})},[]),E=i.useCallback(()=>{o(null)},[]),P=i.useCallback(F=>{console.log("handleShowInputDialog called with:",F),s(F)},[]),$=i.useCallback(F=>{c(F)},[]),D=i.useCallback(()=>{console.log("handleCloseInputDialog called"),s(F=>({...F,open:!1}))},[]),O=i.useCallback(()=>{c(F=>({...F,open:!1}))},[]),j=i.useCallback(async()=>{await new Promise(F=>setTimeout(F,150)),t.onRefresh?.()},[t.onRefresh]),R=i.useCallback(async F=>{console.log("handleConfirmInput called with:",F,"dialog type:",a.type,"itemId:",a.itemId);try{const q=t.folderManager.getTopDirectoryHandle();if(!q)return;const X=(Ee,De)=>{for(const ae of Ee){if(ae.id===De)return ae;if(ae.children){const fe=X(ae.children,De);if(fe)return fe}}return null},_=X(n,a.itemId);if(!_&&a.type!=="newFile"&&a.type!=="newFolder"){console.error("Current item not found");return}let Q=a.type;switch(a.type){case"newFile":_&&_.fileType==="folder"?await t.folderManager.createNewFileAtPath(q,_.path,F):await t.folderManager.createNewFile(q,F),A(e("t-file-manager-create-success"),2e3,{kind:"success"}),Q="create_file";break;case"newFolder":_&&_.fileType==="folder"?await t.folderManager.createNewFolderAtPath(q,_.path,F):await t.folderManager.createNewFolder(q,F),A(e("t-file-manager-create-success"),2e3,{kind:"success"}),Q="create_folder";break;case"rename":_&&(_.fileType==="folder"?(await t.folderManager.renameFolderAtPath(q,_.path,F),Q="rename_folder"):(await t.folderManager.renameFileAtPath(q,_.path,F),Q="rename_file"),A(e("t-file-manager-rename-success"),2e3,{kind:"success"}));break}t.onManualRefresh?await t.onManualRefresh(Q):j()}catch(q){console.error("Operation error:",q),A(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},[a.type,a.itemId,t.folderManager,j,e,n]),J=i.useCallback(()=>{l.action()},[l.action]),Y=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move",u(!0)},ne=F=>{F.currentTarget.contains(F.relatedTarget)||u(!1)},Z=async F=>{F.preventDefault(),u(!1);try{const q=JSON.parse(F.dataTransfer.getData("text/plain")),{itemId:X,label:_,path:Q,fileType:Ee}=q;if(!Q.includes("/"))return;const ae=t.folderManager.getTopDirectoryHandle();if(!ae)return;console.log(`Moving ${_} from "${Q}" to root directory`);const fe=t.currentEditingFile===Q,ce=Ee==="folder"&&t.currentEditingFile&&t.currentEditingFile.startsWith(Q+"/");let v=_;if(Ee==="folder"?v=await t.folderManager.moveFolder(ae,Q,""):v=await t.folderManager.moveFileByPath(ae,Q,""),fe)v!==_?(console.log(`Moved currently editing file to root was renamed from '${_}' to '${v}', clearing editing state`),t.onFileSelect?.("")):(console.log(`Moved currently editing file to root, updating path from '${Q}' to '${v}'`),t.onFileSelect?.(v));else if(ce&&t.currentEditingFile)if(v!==_)console.log(`Moved folder containing currently editing file to root was renamed from '${_}' to '${v}', clearing editing state`),t.onFileSelect?.("");else{const ve=t.currentEditingFile.substring(Q.length+1),xe=`${v}/${ve}`;console.log(`Moved folder containing currently editing file to root, updating path from '${t.currentEditingFile}' to '${xe}'`),t.onFileSelect?.(xe)}v!==_?A(`${e("t-file-manager-move-success")} (${_} â†’ ${v})`,3e3,{kind:"success"}):A(e("t-file-manager-move-success"),2e3,{kind:"success"}),setTimeout(async()=>{console.log("Executing immediate refresh after move to root"),t.onManualRefresh?await t.onManualRefresh("move_to_root"):j()},50)}catch(q){console.error("Move to root error:",q),A(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},W=!n||n.length===0||n.length===1&&n[0].children&&n[0].children.length===0,we=async()=>{const F=t.folderManager.getTopDirectoryHandle();if(F)try{const q=`æ–°å»ºæ–‡ä»¶${Date.now()}.md`;await t.folderManager.createNewFile(F,q),A(e("t-file-manager-create-success"),2e3,{kind:"success"}),t.onManualRefresh?await t.onManualRefresh("empty_folder_create_file"):j()}catch(q){console.error("Create file error:",q),A(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}},ee=async()=>{const F=t.folderManager.getTopDirectoryHandle();if(F)try{const q=`æ–°å»ºæ–‡ä»¶å¤¹${Date.now()}`;await t.folderManager.createNewFolder(F,q),A(e("t-file-manager-create-success"),2e3,{kind:"success"}),t.onManualRefresh?await t.onManualRefresh("empty_folder_create_folder"):j()}catch(q){console.error("Create folder error:",q),A(e("t-file-manager-operation-failed"),2e3,{kind:"error"})}};if(W)return i.createElement(I,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onDragOver:Y,onDragLeave:ne,onDrop:Z,onContextMenu:h,style:{backgroundColor:d?"rgba(46, 125, 50, 0.1)":"transparent",border:d?"2px dashed #2e7d32":"2px solid transparent",transition:"all 0.2s ease"}},i.createElement(Hs,{onCreateFile:we,onCreateFolder:ee}),i.createElement(En,{visible:r?.itemId==="root",x:r?.mouseX||0,y:r?.mouseY||0,onClose:E,onNewFile:w,onNewFolder:k,onRename:()=>{},onDelete:()=>{},isFile:!1,isRoot:!0}),i.createElement(pr,{open:a.open,title:a.title,label:a.label,defaultValue:a.defaultValue,onClose:D,onConfirm:R}),i.createElement(yr,{open:l.open,title:l.title,message:l.message,onClose:O,onConfirm:J}));const re=i.useCallback(F=>i.createElement(js,{...F,fillText:t.fillText,setIsDragging:t.setIsDragging,setExpandedFolderState:()=>{},folderManager:t.folderManager,onRefresh:j,onManualRefresh:t.onManualRefresh,contextMenuState:r,onShowContextMenu:S,onCloseContextMenu:E,inputDialog:a,confirmDialog:l,onShowInputDialog:P,onShowConfirmDialog:$,onCloseInputDialog:D,onCloseConfirmDialog:O,onConfirmInput:R,onConfirmDelete:J,onLoadLazily:x,currentEditingFile:t.currentEditingFile,onFileSelect:t.onFileSelect}),[t.fillText,t.setIsDragging,t.folderManager,t.currentEditingFile,t.onFileSelect,j,r,S,E,a,l,P,$,D,O,R,J,x,t.onManualRefresh]);return i.createElement(I,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden"},onDragOver:Y,onDragLeave:ne,onDrop:Z,onContextMenu:h,style:{backgroundColor:d?"rgba(46, 125, 50, 0.1)":"transparent",border:d?"2px dashed #2e7d32":"2px solid transparent",transition:"all 0.2s ease"}},i.createElement(Pa,{items:n??_s,"aria-label":"file explorer",className:"uniform-scroller",sx:{height:"100%",flexGrow:1,userSelect:"none",maxWidth:400,overflowY:"auto",flex:1,padding:"8px 0 8px 4px","& .MuiTreeView-root":{padding:0},"& > ul":{padding:"4px 0"}},slots:{item:re}}),i.createElement(En,{visible:r?.itemId==="root",x:r?.mouseX||0,y:r?.mouseY||0,onClose:E,onNewFile:w,onNewFolder:k,onRename:()=>{},onDelete:()=>{},isFile:!1,isRoot:!0}),i.createElement(pr,{open:a.open,title:a.title,label:a.label,defaultValue:a.defaultValue,onClose:D,onConfirm:R}),i.createElement(yr,{open:l.open,title:l.title,message:l.message,onClose:O,onConfirm:J}))}function qs(t){return!0}function wr(t){const e=t.label.toLowerCase(),n=e.lastIndexOf(".");if(n===-1)return!1;const r=e.substring(n+1);return tn.includes(r)}const Ks=m.forwardRef(({children:t,sx:e,...n},r)=>m.createElement(I,{ref:r,sx:{display:"flex",flexDirection:"column",width:500,height:200,overflow:"auto",padding:"10px","&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-track":{boxShadow:"inset 0 0 5px grey",borderRadius:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"darkgrey",borderRadius:"10px"},...e},...n},t)),Us=3,Ce=t=>t?t.replace(/[\/\\]+/g,"/").replace(/^\/+|\/+$/g,"").trim():"",Ne=(t,e)=>{const n=Ce(t);return`${e}:${n}`},Vs=t=>{const e=Ce(t);return e?e.split("/").length:0},Ht=(t,e)=>e!=="folder"?!1:Vs(t)>=Us,Ye=new Kr,G=new Ge,Js=Fe(function(){const{t:e}=ye(),[n,r]=m.useState([]),[o,a]=m.useState(""),[s,l]=m.useState(""),[c,d]=i.useState(!1),[u,g]=i.useState(!1),[y,x]=i.useState(!1),[h,w]=i.useState(new Set),[k,S]=i.useState(!1),[E,P]=i.useState([]),[$,D]=i.useState(!1),[O,j]=i.useState(0),[R,J]=i.useState(1500),[Y,ne]=i.useState(0),[Z,W]=i.useState(Date.now());window._setIsDragging=g;const we=en(),ee=m.useRef(),re=m.useRef(),F=m.useRef(),[q,X]=i.useState(!0),_=m.useCallback((f,p)=>{if(!f||f.length===0)return!1;const b=Ce(p);for(const C of f)if(Ce(C.path)===b||C.children&&Array.isArray(C.children)&&_(C.children,p))return!0;return!1},[]),Q=(f,p)=>{Zr(window.monaco,window.editor,f),A(`${e("t-file-manager-open-success")}${p}ï¼ğŸ˜€`)},Ee=f=>()=>{c||Qt(f)},De=(f,p)=>{Zt({basic:{fileEditLocal:p}})},ae=m.useCallback(async()=>{const f=Date.now();if($){const p=f-O;if(p<200){ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{ae()},200-p);return}}if(f-O<300){ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{ae()},300-(f-O));return}k||(ee.current&&clearTimeout(ee.current),ee.current=setTimeout(async()=>{try{P(H=>[...H.slice(-9),{type:"system",timestamp:f,operation:"file_system_change"}]);const p=G.topDirectoryArray||[],b=G.getTopDirectoryHandle();if(!b)return;const C=await G.readDirectoryAsArrayOptimized(b,!0,3),T=v(C),B=ce(p,T,h);if(B.hasChanges){G.topDirectoryArray=B.updatedTree,r(B.updatedTree),w(B.updatedExpandedFolders),W(f),ne(0);const H=1e3;if(H!==R&&(J(H),G.stopWatching(),G.watchDirectory(ae,H)),s){const M=Ce(s);_(B.updatedTree,M)||(l(""),a(""))}X(!0)}else{const H=f-Z;ne(M=>{const V=M+1;let N=R;return H>3e4?N=5e3:H>1e4?N=3e3:V>=3&&(N=1e3),N!==R&&(J(N),setTimeout(()=>{G.stopWatching(),G.watchDirectory(ae,N)},100)),V>10?0:V})}}catch(p){console.error("Error during system watch refresh:",p),X(!1),setTimeout(()=>{try{G.stopWatching(),G.watchDirectory(ae,R),X(!0)}catch(b){console.error("Health check: failed to restart watcher:",b)}},1e3)}},400))},[G,h,k,s,$,O,R,Y,Z,_]),fe=m.useCallback(async f=>{const p=Date.now();D(!0),j(p),ee.current&&(clearTimeout(ee.current),ee.current=void 0),P(b=>[...b.slice(-9),{type:"user",timestamp:p,operation:f}]);try{const b=G.getTopDirectoryHandle();if(!b)return;const C=await G.readDirectoryAsArrayOptimized(b,!0,3),T=v(C),B=G.topDirectoryArray||[],H=ce(B,T,h);if(G.topDirectoryArray=H.updatedTree,r(H.updatedTree),w(H.updatedExpandedFolders),J(1e3),ne(0),W(p),s){const M=Ce(s);_(H.updatedTree,M)||(l(""),a(""))}X(!0)}catch(b){console.error("Error during user operation refresh:",b)}finally{setTimeout(()=>{D(!1)},100)}},[G,h,s,_]),ce=m.useCallback((f,p,b)=>{const C=new Set(b),T=(N,L,z="")=>{let K=!1;const te=[],oe=new Map(N.map(ie=>[ie.label,ie])),Ct=new Map(L.map(ie=>[ie.label,ie]));for(const ie of L){const he=oe.get(ie.label),rn=z?`${z}/${ie.label}`:ie.label,Se=Ce(rn);if(!he)K=!0,te.push({...ie,id:Ne(Se,ie.fileType),path:Se});else if(ie.fileType==="file")te.push({...he,path:Se,id:Ne(Se,"file")});else if(ie.fileType==="folder"){const Te=b.has(Se)||b.has(he.path);let Pe=he.children||[],kt=!1;if(Te&&ie.children&&!ie.children.some(_t=>_t.fileType==="lazy-placeholder")){const _t=T(he.children||[],ie.children,Se);Pe=_t.items,kt=_t.hasChanges,kt&&(K=!0)}else Ht(Se,"folder")&&(!he.children||he.children.length===0)?Pe=[{id:Ne(`${Se}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${Se}/[lazy-placeholder]`}]:Pe=he.children||[];te.push({...he,path:Se,id:Ne(Se,"folder"),children:Pe.length>0?Pe:void 0}),Te&&he.path!==Se&&(C.delete(he.path),C.add(Se))}}for(const[ie,he]of oe)Ct.has(ie)||(K=!0,he.fileType==="folder"&&C.delete(he.path));return{items:te,hasChanges:K}},B=T(f,p),H=new Set,M=N=>{for(const L of N)L.fileType==="folder"&&(H.add(Ce(L.path)),L.children&&!L.children.some(z=>z.fileType==="lazy-placeholder")&&M(L.children))};M(B.items);const V=new Set([...C].filter(N=>H.has(Ce(N))));return{hasChanges:B.hasChanges,updatedTree:B.items,updatedExpandedFolders:V}},[]),v=m.useCallback((f,p="",b=0)=>f.map(C=>{const T=Ce(p?`${p}/${C.label}`:C.label),B={...C,id:Ne(T,C.fileType),path:T};return C.fileType==="folder"&&(Ht(T,"folder")?B.children=[{id:Ne(`${T}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${T}/[lazy-placeholder]`}]:C.children&&Array.isArray(C.children)&&(B.children=v(C.children,T,b+1))),B}),[]);m.useEffect(()=>{const f=()=>{if(G.getTopDirectoryHandle()&&!q)try{G.stopWatching(),G.watchDirectory(ae,R),X(!0)}catch(p){console.error("Health check: failed to restart watcher:",p)}};return F.current=setInterval(f,1e4),()=>{F.current&&clearInterval(F.current)}},[q,G,ae,R]);const ve=async()=>{try{G.stopWatching(),ee.current&&(clearTimeout(ee.current),ee.current=void 0),re.current&&(clearTimeout(re.current),re.current=void 0),G.topDirectoryArray=[],w(new Set),D(!1),j(0),P([]),X(!0),S(!1);const f=await Ye.openSingleFile();if(!f){A(e("t-no-file-selected"),2500,{kind:"warning"});return}a(f.name),l(f.name),r([{id:"1."+f.name,label:f.name,path:f.name,fileType:f.kind}]),A(e("t-opening-file"));const p=await Ye.readFile(f);Q(p,f.name)}catch(f){console.error("Error opening file:",f),A(e("t-error-opening-file"),2e3,{kind:"error"})}},xe=async()=>{try{x(!0);let f=G;f.stopWatching();const p=await f.openDirectory();if(p){A(e("t-file-manager-loading"),1e3,{kind:"info"}),D(!1),j(0),P([]),X(!0),J(1500),ne(0),w(new Set);let b=await f.readDirectoryAsArrayOptimized(p,!0,1);const C=(T,B="",H=0)=>T.map(M=>{const V=Ce(B?`${B}/${M.label}`:M.label),N={...M,id:Ne(V,M.fileType),path:V};return M.fileType==="folder"&&(Ht(V,"folder")?N.children=[{id:Ne(`${V}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${V}/[lazy-placeholder]`}]:M.children&&Array.isArray(M.children)&&(N.children=C(M.children,V,H+1))),N});b=C(b),f.watchDirectory(ae,1500),f.topDirectoryArray=b,r(b),(!b||b.length===0)&&A(e("t-file-manager-empty-folder"),2e3,{kind:"info"}),setTimeout(async()=>{try{const T={monaco:window.monaco,editor:window.editor,body:document.body,editorContainer:document.getElementById("monaco-editor-container"),previewContainer:document.getElementById("preview")};if(Object.entries(T).filter(([H,M])=>!M).map(([H])=>H).length>0)return;window.editor&&typeof window.editor.getModel=="function"&&window.editor.getModel()&&await yt(!1)}catch(T){console.error("Error re-rendering markdown:",T),T instanceof Error&&T.message?.includes("ownerDocument")}},200)}}catch(f){console.error("Error opening folder:",f),A(e("t-error-opening-folder"),2e3,{kind:"error"})}finally{x(!1)}},_e=async()=>{await fe("manual_refresh")},je=m.useCallback(async(f="manual_operation")=>{await fe(f)},[fe]),Me=m.useCallback(async(f,p)=>{S(!0);try{const b=G.getTopDirectoryHandle();if(!b)return;const C=Ce(p.replace("/[lazy-placeholder]",""));G.lastLazyLoadTime=Date.now();try{const T=await G.getDirectoryHandleByPath(b,C),B=[],H=[];for await(const[L,z]of T.entries())H.push([L,z]);H.sort((L,z)=>L[0].localeCompare(z[0]));for(const[L,z]of H){const K=Ce(`${C}/${L}`),te=Ne(K,z.kind);if(z.kind==="file")B.push({id:te,label:L,fileType:"file",path:K});else{const oe=Ht(K,"folder")?[{id:Ne(`${K}/[lazy-placeholder]`,"lazy-placeholder"),label:"...",fileType:"lazy-placeholder",path:`${K}/[lazy-placeholder]`}]:void 0;B.push({id:te,label:L,fileType:"folder",path:K,children:oe})}}const M=L=>L.map(z=>Ce(z.path)===C&&z.fileType==="folder"?{...z,children:B}:z.children&&Array.isArray(z.children)?{...z,children:M(z.children)}:z),V=Array.isArray(n)?n:[],N=M(V);G.topDirectoryArray=N,r(N),w(L=>new Set([...L,C]))}catch(T){console.error("æ‡’åŠ è½½æ–‡ä»¶å¤¹å¤±è´¥:",T)}}catch(b){console.error("æ‡’åŠ è½½å‡ºé”™:",b)}finally{setTimeout(()=>{S(!1)},1e3)}},[G,n]);m.useEffect(()=>()=>{ee.current&&clearTimeout(ee.current),re.current&&clearTimeout(re.current),F.current&&clearInterval(F.current),G.stopWatching()},[]),m.useEffect(()=>{G.watchInterval!==null&&console.log("Watcher active, health status:",q)},[h,q]);const We={width:"53%",height:"6svh",mb:"10px"},Be=at($n)({backgroundColor:"transparent"}),it=m.useCallback(f=>{l(f),(!f||f.trim()==="")&&(a(""),Ye.fileHandle&&(Ye.fileHandle=null),console.log("Cleared current editing file state due to file move/rename"))},[Ye]);return m.createElement(m.Fragment,null,m.createElement("style",null,`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        `),m.createElement(Mn,{PaperProps:{style:{pointerEvents:"all",zIndex:99999}},keepMounted:!0,ModalProps:{disableEnforceFocus:!0,disableAutoFocus:!0,disableRestoreFocus:!0,style:{pointerEvents:c||u?"none":"all"},BackdropComponent:f=>m.createElement(Be,{onDrop:()=>{setTimeout(()=>{window._setIsDragging(!1)},30)},...f,className:"pointed-through-backdrop"})},anchor:"right",autoFocus:!1,open:Xr(),onClose:Ee(!1)},m.createElement(I,{sx:{overflow:"hidden",background:we.palette.mode==="light"?"#F9F9F9":"dark",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",height:"100svh"}},m.createElement(I,{sx:{width:"4.6svw",height:"100svh",display:"flex",background:we.palette.mode==="light"?"#eeeeee":"#414141",alignItems:"center",justifyContent:"center"}},m.createElement(Ba,{sx:{width:60,height:"100vh",alignItems:"center",paddingTop:2}},m.createElement(Tt,{icon:m.createElement(Na,null),onClick:()=>Qt(!1)}),m.createElement(Tt,{icon:c?m.createElement(Ha,{sx:{transform:"rotate(45deg)"}}):m.createElement(Oa,{sx:{transform:"rotate(45deg)"}}),onClick:()=>d(!c),tooltipText:"ğŸ§·"+e("t-file-manager-pinned")}),m.createElement(Tt,{icon:m.createElement(ja,null),onClick:ve,tooltipText:"ğŸ“"+e("t-file-manager-open-file")}),m.createElement(Tt,{tooltipText:"ğŸ“"+e("t-file-manager-open-folder"),icon:m.createElement(Wa,null),onClick:xe}),m.createElement(Tt,{tooltipText:"ğŸ“‘"+e("t-file-manager-saveAs"),icon:m.createElement(qa,null),onClick:()=>Ye.saveAsFile(At())}))),m.createElement(I,{sx:{width:"23svw",height:"100svh",display:"flex",flexDirection:"column"}},m.createElement(I,{sx:{width:"23svw",height:"10svh",alignItems:"center",mt:"4px",justifyContent:"center"},className:"FLEX COW ALI-CEN JUS-CEN"},m.createElement(U,{sx:{mr:"10px",fontSize:"17px"},color:we.palette.info.contrastText},e("t-file-manager-syncLocal")),m.createElement(Qr,{checked:pe().basic.fileEditLocal,size:"small",inputProps:{"aria-label":"controlled"},onChange:De})),m.createElement(I,{className:"FLEX ALI-CEN JUS-CEN",sx:{display:"flex",height:"98%",alignContent:"center",justifyContent:"center",marginBottom:"20svh"}},n.length!=0?m.createElement(m.Fragment,null,m.createElement(Ks,{sx:{width:"100%",height:"100%"}},m.createElement(Ws,{folderManager:G,fillText:Q,setIsDragging:g,fileDirectoryArr:n,onRefresh:_e,onManualRefresh:je,currentEditingFile:s,onFileSelect:it,onLoadLazily:Me}))):m.createElement(m.Fragment,null,m.createElement(I,{className:"FLEX COL ALI-CEN JUS-CEN",sx:{width:"100%"}},y&&m.createElement(I,{sx:{mb:2,display:"flex",alignItems:"center",gap:1}},m.createElement("div",{style:{animation:"spin 1s linear infinite",fontSize:"1.2rem",color:we.palette.primary.main}},"âŸ³"),m.createElement(U,{variant:"body2",color:"primary"},e("t-file-manager-loading"))),m.createElement(U,null,pe().basic.fileEditLocal?o:""),m.createElement(me,{sx:We,onClick:ve,variant:"contained",color:"primary",disabled:y},e("t-file-manager-open-file")),m.createElement(me,{sx:We,variant:"contained",color:"primary",onClick:xe,disabled:y},e("t-file-manager-open-folder")),m.createElement(me,{sx:We,variant:"contained",onClick:()=>{Ye.saveAsFile(At())},disabled:y},e("t-file-manager-saveAs")))))))))});function Tt({icon:t,onClick:e,tooltipText:n}){const r=en(),o=m.createElement(me,{sx:{width:"4.6svw",height:"4.6svw",backgroundColor:"transparent","&:hover":{backgroundColor:r.palette.action.hover,borderRadius:"0"},"& .MuiTouchRipple-rippleVisible":{animation:"MuiTouchRipple-keyframes-enter 550ms cubic-bezier(0.4, 0, 0.2, 1)",transform:"scale(3)"},"& .MuiTouchRipple-child":{backgroundColor:r.palette.primary.main}},onClick:e,color:"inherit"},t);return n?m.createElement(Ie,{sx:{whiteSpace:"normal"},TransitionComponent:Dr,enterDelay:200,placement:"left",title:n},o):o}function Gs(t){return i.createElement(Lr,{...t})}const Xs=at(Ka)(({theme:t})=>({color:t.palette.mode==="light"?t.palette.grey[800]:t.palette.grey[200],[`& .${Rt.content}`]:{borderRadius:t.spacing(.5),padding:t.spacing(.5,1),margin:t.spacing(.2,0),[`& .${Rt.label}`]:{fontSize:"0.89rem",fontWeight:500}},[`& .${Rt.iconContainer}`]:{borderRadius:"80%",backgroundColor:t.palette.mode==="light"?ue(t.palette.primary.main,.45):t.palette.primary.dark,color:t.palette.mode==="dark"&&t.palette.primary.contrastText,padding:t.spacing(0,1.2)}})),ze=i.forwardRef((t,e)=>i.createElement(Xs,{...t,slots:{groupTransition:Gs,...t.slots},ref:e}));function Jd(){const{t}=ye();function e(n){document.getElementById(n).scrollIntoView()}return i.createElement(i.Fragment,null,i.createElement(I,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:"0 0 30%",minHeight:20,overflowX:"hidden",borderRight:"solid rgba(0, 0, 0, 0.12)"}},i.createElement(Ar,{"aria-label":"customized",defaultExpandedItems:["1_x","2_x"],slots:{endIcon:Fr},sx:{userSelect:"none",minHeight:270,maxWidth:300}},i.createElement(ze,{slots:{endIcon:Gn},onClick:()=>{e("settings_1_x")},itemId:"1_x",label:t("t-basic-settings")},i.createElement(ze,{slots:{endIcon:Ua},onClick:()=>{e("settings_1_1")},itemId:"1_1",label:t("t-theme-settings")}),i.createElement(ze,{slots:{endIcon:Va},onClick:()=>{e("settings_1_2")},itemId:"1_2",label:t("t-language-settings")}),i.createElement(ze,{slots:{endIcon:Gn},onClick:()=>{e("settings_1_3")},itemId:"1_3",label:t("t-editor-settings")}),i.createElement(ze,{slots:{endIcon:Pr},onClick:()=>{document.getElementById("settings_1_4").scrollIntoView()},itemId:"1_4",label:t("t-speech-to-text")})),i.createElement(ze,{onClick:()=>{e("settings_2_x")},itemId:"2_x",label:t("t-advanced-settings")},i.createElement(ze,{onClick:()=>{e("settings_2_1")},itemId:"2_1",label:t("t-export-settings")}),i.createElement(ze,{onClick:()=>{e("settings_2_2")},itemId:"2_2",label:t("t-mermaid-settings")}),i.createElement(ze,{slots:{endIcon:Rn},onClick:()=>{e("settings_2_3")},itemId:"2_3",label:t("t-image-settings")}),i.createElement(ze,{slots:{endIcon:Ja},onClick:()=>{e("settings_2_7")},itemId:"2_7",label:t("t-reset-initialization")})))))}const Ys=[{id:"0_1",labelKey:"directory.preface.title"},{id:"1_x",labelKey:"directory.basic.title",children:[{id:"1_1",labelKey:"directory.basic.paragraph"},{id:"1_2",labelKey:"directory.basic.lineBreak"},{id:"1_3",labelKey:"directory.basic.bold"},{id:"1_4",labelKey:"directory.basic.italic"},{id:"1_5",labelKey:"directory.basic.center"},{id:"1_6",labelKey:"directory.basic.customText"},{id:"1_7",labelKey:"directory.basic.exportPdf"}]},{id:"2_x",labelKey:"directory.advanced.title",children:[{id:"2_1",labelKey:"directory.advanced.speechToText"},{id:"2_2",labelKey:"directory.advanced.aiAssistant"},{id:"2_3",labelKey:"directory.advanced.autoFormat"},{id:"2_4",labelKey:"directory.advanced.fileManager"},{id:"2_5",labelKey:"directory.advanced.imageUpload"},{id:"2_6",labelKey:"directory.advanced.syncScroll"},{id:"2_7",labelKey:"directory.advanced.emojiMarket"},{id:"2_8",labelKey:"directory.advanced.collaboration"},{id:"2_9",labelKey:"directory.advanced.tableBuilder"},{id:"2_10",labelKey:"directory.advanced.mindMap"},{id:"2_11",labelKey:"directory.advanced.doubleClick"}]},{id:"3_x",labelKey:"directory.smart.title",children:[{id:"3_1",labelKey:"directory.smart.latex"},{id:"3_2",labelKey:"directory.smart.autoComplete"},{id:"3_3",labelKey:"directory.smart.settings"}]}],Zs={"0_1":{title:"å‰è¨€",content:["ä½ å¥½ï¼Œæœ‹å‹ï¼Œæ¬¢è¿æ¥åˆ° Markdown å…¥é—¨æŒ‡å—ã€‚æœ¬æ•™ç¨‹å°†å¸®åŠ©ä½ æŒæ¡ Markdown çš„åŸºæœ¬è¯­æ³•ï¼Œä»¥åŠä¸€äº›è¿›é˜¶çš„é»‘ç§‘æŠ€æŠ€å·§ã€‚","å…¶å®è¦å¼€å§‹å†™markdownå¾ˆç®€å•ï¼Œä½ å¯ä»¥é€€å‡ºæŒ‡å—ï¼ŒæŒ‰ä¸‹`Ctrl+J`ä¸€é”®å‘¼å‡ºAIï¼Œæˆ–è€…åœ¨ç¼–è¾‘åŒºå³é”®å‘¼å‡ºèœå•åï¼Œç‚¹å‡»AskAIå³å¯å¼€å§‹å†™ä½œ,åˆ«å¿˜äº†å†™å®Œå`Ctrl+S`ä¿å­˜æ–‡æœ¬åˆ°æµè§ˆå™¨ç¼“å­˜ã€‚","","å¦‚æœä½ å–œæ¬¢è¿™ä¸ªç¼–è¾‘å™¨ï¼Œä¸å¦¨ç»™ä¸ªStarå‘—ï¼Œ[Github](https://github.com/LiWeny16/MarkdownOnline?tab=readme-ov-file)"]},"1_1":{title:"æ®µè½å’Œæ ‡é¢˜",content:["Markdown æ®µè½çš„å†™æ³•å¾ˆç®€å•ï¼Œåªéœ€ç›´æ¥è¾“å…¥æ–‡æœ¬å³å¯ã€‚ä¾‹å¦‚ï¼š","","```\nè¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚\n```","","æ®µè½ä¹‹é—´éœ€è¦ç©ºè¡Œï¼Œå¦åˆ™ä¼šè¢«è®¤ä¸ºæ˜¯åŒä¸€æ®µå†…å®¹ã€‚","","æ ‡é¢˜æ›´ç®€å•ï¼Œå¯¹è¿™ä¸€è¡ŒæŒ‰ä¸‹`Ctrl+1`å³å¯"]},"1_2":{title:"æ¢è¡Œ",content:["Markdown é»˜è®¤ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œå¦‚æœä½ æƒ³æ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨ `<br>`ã€‚","```\nè¿™æ˜¯ç¬¬ä¸€è¡Œã€‚<br>è¿™æ˜¯ç¬¬äºŒè¡Œã€‚\n```"]},"1_3":{title:"åŠ ç²—",content:["Markdown å¯ä»¥ä½¿ç”¨ `**` æˆ– `__` æ¥åŠ ç²—æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼š","","```\n**è¿™æ˜¯åŠ ç²—çš„æ–‡æœ¬**\n```","","æ•ˆæœï¼š **è¿™æ˜¯åŠ ç²—çš„æ–‡æœ¬**"]},"1_4":{title:"æ–œä½“",content:["Markdown ä½¿ç”¨ `*` æˆ– `_` è®©æ–‡æœ¬å˜æˆæ–œä½“ã€‚ä¾‹å¦‚ï¼š","","```\n*è¿™æ˜¯æ–œä½“æ–‡æœ¬*\n```","","æ•ˆæœï¼š *è¿™æ˜¯æ–œä½“æ–‡æœ¬*"]},"1_5":{title:"å±…ä¸­",content:["åœ¨æ–°çš„ä¸€è¡Œï¼ŒæŒ‰ä¸‹`/`æ–œæ ï¼Œè¾“å…¥any-center-textå›è½¦,å³å¯å¾—åˆ°å±…ä¸­æ–‡æœ¬","åŒç†,å±…å³æ˜¯è¿™æ ·å†™",'```\n<p style="text-align: right">å±…å³</p>\n```',"","æˆ–è€…ç›´æ¥`Ctrl+E`è¿›è¡Œå±…ä¸­ï¼Œ`Ctrl+R`è¿›è¡Œå±…å³"]},"1_6":{title:"ä»»æ„å­—ä½“",content:["åœ¨æ–°çš„ä¸€è¡Œï¼ŒæŒ‰ä¸‹`/`æ–œæ ï¼Œè¾“å…¥any-textå›è½¦,å³å¯å¾—åˆ°ä½ æƒ³è¦å®ƒä»€ä¹ˆæ ·å­ä»–å°±æ˜¯ä»€ä¹ˆæ ·å­çš„æ–‡æœ¬äº†ï¼"]},"1_7":{title:"å¯¼å‡ºPDF",content:["å³ä¸Šè§’æ›´å¤šæŒ‰é’®é‡Œæœ‰å¯¼å‡ºåŠŸèƒ½ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å¿«æ·é”®`Ctrl+P`","","åœ¨å¯¼å‡ºPDFçš„æ—¶å€™ä½ ç»å¸¸ä¼šå‘ç°åˆ†å‰²é¡µå¾€å¾€ä¸å°½äººæ„ï¼Œæ‰€ä»¥è¿™é‡Œæä¾›`/page-breaker`æ¥åˆ†å‰²æ¯ä¸ªé¡µ","æˆ–è€…åœ¨éœ€è¦åˆ†å‰²çš„åœ°æ–¹æ‰“å‡º`|---|`å³å¯"]},"2_1":{title:"è¯­éŸ³è½¬æ–‡å­—",content:["å…è´¹ã€ä¸é™æ—¶é•¿ã€é«˜å‡†ç¡®ç‡çš„è¯­éŸ³è½¬æ–‡å­—ï¼Œè¿˜ä¸å¿«æ¥è¯•è¯•ï¼","","å¿«æ·é”®:`Ctrl+Alt+V`"]},"2_2":{title:"AIæ™ºèƒ½åŠ©æ‰‹",content:["AI å¯ä»¥å¸®åŠ©ä½ è‡ªåŠ¨ç”Ÿæˆ Markdown æ ¼å¼çš„å†…å®¹ï¼Œä¾‹å¦‚è‡ªåŠ¨æ’ç‰ˆã€è¯­æ³•æ£€æŸ¥ã€ä»£ç æ ¼å¼åŒ–ç­‰ã€‚","","åœ¨ä»»ä½•æ—¶å€™ï¼Œæˆ‘éƒ½å¼ºçƒˆæ¨èä½ è¯¢é—®AIå…·ä½“çš„markdownè¯­æ³•æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æ›´åŠ é«˜æ•ˆ","","å¿«æ·é”®ï¼š`Ctrl+J`"]},"2_3":{title:"è‡ªåŠ¨æ’ç‰ˆ",content:["Markdown æ”¯æŒè‡ªåŠ¨æ’ç‰ˆï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·å¦‚ `Prettier` æˆ– `Markdownlint` æ¥ä¼˜åŒ–æ’ç‰ˆï¼Œä½¿æ–‡æ¡£æ›´æ˜“è¯»ã€‚","","å¿«æ·é”®:`Shift+Alt+F`"]},"2_4":{title:"æ–‡ä»¶ç®¡ç†å™¨",content:["ç¼–è¾‘å™¨å¼•ç”¨äº†å…¨æ–°æ–‡ä»¶æ¥å£ï¼Œå¯ä»¥ç›´æ¥å¯¹æœ¬åœ°æ–‡ä»¶å¤¹è¿›è¡Œæ‰“å¼€å’Œä¿®æ”¹ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹åï¼Œç²˜è´´åˆ°ç¼–è¾‘å™¨çš„å›¾ç‰‡å°†ä¼šè¢«è‡ªåŠ¨ä¿å­˜åˆ°å½“å‰ç›®å½•çš„imageæ–‡ä»¶å¤¹ä¸‹","","å¿«æ·é”®:`Ctrl+Alt+F`(å¯èƒ½å’Œå¾®ä¿¡å†²çªï¼Œè¯·ä¿®æ”¹å¾®ä¿¡çš„çƒ­é”®)ï¼Œæˆ–åœ¨å³ä¸Šè§’æ›´å¤šé‡Œæ‰“å¼€"]},"2_5":{title:"å›¾ç‰‡ä¸Šä¼ ",content:["ç®€å•æ˜“æ‡‚ï¼Œå¤åˆ¶å›¾ç‰‡æ–‡ä»¶ç„¶åç²˜è´´åˆ°ç¼–è¾‘å™¨å³å¯ï¼Œè‹¥æ²¡æœ‰æ‰“å¼€æ–‡ä»¶å¤¹å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨ç¼“å­˜ä¸­","","å›¾ç‰‡å¯ä»¥æ‰¹é‡å¤åˆ¶ä¸Šä¼ ï¼Œå¹¶ä¸”æ”¯æŒå¿«æ·é”®`Ctrl+E`è°ƒæ•´å±…ä¸­ï¼Œé»˜è®¤æ ·å¼è§£é‡Šå¦‚ä¸‹:","",`> #wä»£è¡¨å¤§å°ï¼Œ#cä»£è¡¨å±…ä¸­(center)ï¼Œ
#sä»£è¡¨é˜´å½±(shadow)ï¼Œ#rä»£è¡¨å±…å³(right)`]},"2_6":{title:"åŒæ­¥æ»šåŠ¨",content:["éšæ—¶å¼€å¯ï¼Œé«˜åº¦æ™ºèƒ½çš„åŒæ­¥æ»šåŠ¨ç®—æ³•ï¼Œæ¯”èµ·VScodeé™ç»´æ‰“å‡»çš„å¼€å…³åŠŸèƒ½","","å¿«æ·é”®`Ctrl+Q`"]},"2_7":{title:"è¡¨æƒ…åŒ…è¶…å¸‚",content:["è¡¨æƒ…åŒ…ï¼Œä»»ä½ æŒ‘é€‰ğŸ˜","","ç¼–è¾‘åŒºå³é”®èœå•ï¼Œè¡¨æƒ…åŒ…è¶…å¸‚"]},"2_8":{title:"ååŒåŠå…¬",content:["ä¸¤å°è®¾å¤‡åŒä¸€ä¸ªçƒ­ç‚¹æˆ–æ”¯æŒå†…ç½‘å…±äº«çš„WIFIä¸‹(æ‰‹æœºçƒ­ç‚¹é»˜è®¤éƒ½æ”¯æŒ)ï¼Œå³å¯æ€¥é€Ÿåˆ†äº«æ–‡æœ¬å’Œæ–‡ä»¶ï¼","","åœ¨å“ªï¼šå³ä¸Šè§’æ›´å¤šæŒ‰é’®ï¼ŒååŒåŠå…¬"]},"2_9":{title:"è¡¨æ ¼",content:["æ–°çš„ä¸€è¡ŒæŒ‰ä¸‹`/`ï¼Œè¾“å…¥tableå³å¯çœ‹åˆ°åŠ¨æ€è¡¨æ ¼åŠŸèƒ½ï¼","","ä¾‹å¦‚ï¼š`/table3` åˆ›å»º3x3è¡¨æ ¼ï¼Œ`/table3x5` åˆ›å»º3è¡Œ5åˆ—è¡¨æ ¼","","æ”¯æŒä»»æ„è¡Œåˆ—æ•°ï¼Œå¦‚ `/table2`ã€`/table4x6` ç­‰","","æ—§ç‰ˆæœ¬ï¼šç¼–è¾‘åŒºæŒ‰F1ï¼Œè¾“å…¥table#3#2ä¹Ÿä¾ç„¶å¯ç”¨"]},"2_10":{title:"æµç¨‹å›¾ï¼Œæ€ç»´å¯¼å›¾...",content:["æ–°çš„ä¸€è¡ŒæŒ‰ä¸‹`/`è¾“å¦‚mermaidå³å¯çœ‹åˆ°è”æƒ³çš„æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾...ç­‰ç­‰"]},"2_11":{title:"åŒå‡»å®šä½",content:["åŒå‡»å³è¾¹æ¸²æŸ“åæ–‡æœ¬ï¼Œå³å¯å®šä½åˆ°å·¦è¾¹åŸæ–‡æœ¬ï¼Œå¤ªå¤ªå¤ªæ–¹ä¾¿å•¦ï¼ï¼"]},"3_1":{title:"LaTexæ•°å­¦å…¬å¼",content:["æ–°èµ·ä¸€è¡Œæ‰“`/latex`åå›è½¦ï¼Œåœ¨latexä¸­é—´æŒ‰ä¸‹`\\`å³å¯å¼€å§‹äº«ç”¨æ™ºèƒ½è¯­æ³•æç¤ºï¼","","å¿«æ·é”®:`Ctrl+M`"]},"3_2":{title:"æ™ºèƒ½æç¤º",content:["ä¼°è®¡è®¤çœŸçœ‹è¿‡æ•™ç¨‹çš„ä½ å·²ç»å‘ç°äº†ï¼Œæ–°çš„ä¸€è¡Œæ‰“ä¸€ä¸ª`/`å³å¯è·å¾—å¤§é‡é«˜é¢‘ä½¿ç”¨çš„markdownåŠŸèƒ½ï¼Œæœ‰å›¾ç‰‡ã€å…¬å¼ã€æ–‡æœ¬ã€æµç¨‹å›¾ã€åˆ—è¡¨..."]},"3_3":{title:"è®¾ç½®",content:["è®¾ç½®ç•Œé¢æä¾›äº†åŒä¸»é¢˜ã€ä»¥åŠä¸€äº›é«˜é¢‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå¦‚å­—ä½“ï¼Œè¯­è¨€ç­‰ç­‰"]}},Qs={"0_1":{title:"Preface",content:["Hello, friend! Welcome to the Markdown Getting Started Guide. This tutorial will help you master the basic syntax of Markdown, as well as some advanced tips and tricks.","Actually, getting started with Markdown is simple. You can exit the guide, press `Ctrl+J` to summon AI, or right-click in the editing area to bring up the menu and click AskAI to start writing. Don't forget to press `Ctrl+S` to save your text to browser cache when you're done.","","If you like this editor, please give it a Star! [Github](https://github.com/LiWeny16/MarkdownOnline?tab=readme-ov-file)"]},"1_1":{title:"Paragraphs and Headers",content:["Writing Markdown paragraphs is simple, just type text directly. For example:","","```\nThis is a paragraph.\n```","","Paragraphs need blank lines between them, otherwise they will be considered as the same content.","","Headers are even simpler, just press `Ctrl+1` on the line"]},"1_2":{title:"Line Breaks",content:["Markdown doesn't automatically break lines by default. If you want to break lines, you can use `<br>`.","```\nThis is the first line.<br>This is the second line.\n```"]},"1_3":{title:"Bold",content:["Markdown can use `**` or `__` to make text bold. For example:","","```\n**This is bold text**\n```","","Effect: **This is bold text**"]},"1_4":{title:"Italic",content:["Markdown uses `*` or `_` to make text italic. For example:","","```\n*This is italic text*\n```","","Effect: *This is italic text*"]},"1_5":{title:"Center Alignment",content:["On a new line, press `/` slash, type any-center-text and hit Enter to get centered text","Similarly, for right alignment:",'```\n<p style="text-align: right">Right aligned</p>\n```',"","Or directly use `Ctrl+E` for center, `Ctrl+R` for right alignment"]},"1_6":{title:"Custom Font",content:["On a new line, press `/` slash, type any-text and hit Enter to get text that looks exactly how you want it to!"]},"1_7":{title:"Export PDF",content:["Export function is available in the More button at the top right, or use the shortcut `Ctrl+P`","","When exporting PDF, you often find page breaks are not ideal, so here's `/page-breaker` to split pages","Or type `|---|` where you need to split"]},"2_1":{title:"Speech to Text",content:["Free, unlimited duration, high accuracy speech-to-text. Come and try it!","","Shortcut: `Ctrl+Alt+V`"]},"2_2":{title:"AI Smart Assistant",content:["AI can help you automatically generate Markdown formatted content, such as auto-formatting, syntax checking, code formatting, etc.","","At any time, I strongly recommend asking AI about specific markdown syntax, which is more efficient","","Shortcut: `Ctrl+J`"]},"2_3":{title:"Auto Formatting",content:["Markdown supports auto-formatting. You can use tools like `Prettier` or `Markdownlint` to optimize formatting and make documents more readable.","","Shortcut: `Shift+Alt+F`"]},"2_4":{title:"File Manager",content:["The editor uses a brand new file interface that can directly open and modify local folders. After opening a folder, pasted images will be automatically saved to the image folder in the current directory","","Shortcut: `Ctrl+Alt+F` (may conflict with WeChat, please modify WeChat's hotkeys), or open it in the More menu at the top right"]},"2_5":{title:"Image Upload",content:["Simple and intuitive, copy image files and paste them into the editor. If no folder is opened, images are automatically saved to browser cache","","Images can be batch copied and uploaded, with shortcut `Ctrl+E` for center alignment. Default style explanation:","",`> #w represents size, #c represents center,
#s represents shadow, #r represents right alignment`]},"2_6":{title:"Synchronized Scrolling",content:["Always available, highly intelligent synchronized scrolling algorithm, a dimensional upgrade over VSCode's simple toggle function","","Shortcut: `Ctrl+Q`"]},"2_7":{title:"Emoji Market",content:["Emojis, pick whatever you likeğŸ˜","","Right-click menu in editing area, Emoji Market"]},"2_8":{title:"Collaboration",content:["Two devices on the same hotspot or supported WIFI under the same network (default all phones support hotspots), can share text and files instantly!","","Where: More button at the top right, Collaboration"]},"2_9":{title:"Tables",content:["On a new line, press `/` and type table to see dynamic table features!","","Examples: `/table3` creates 3x3 table, `/table3x5` creates 3-row 5-column table","","Supports any row/column size like `/table2`, `/table4x6`, etc.","","Legacy version: Press F1 in editing area, type table#3#2 still works"]},"2_10":{title:"Flowcharts, Mind Maps...",content:["On a new line, press `/` and type mermaid to see suggestions for mind maps, flowcharts... and more"]},"2_11":{title:"Double-click Positioning",content:["Double-click on the rendered text on the right to locate the original text on the left. So convenient!!!"]},"3_1":{title:"LaTeX Math Formulas",content:["Start a new line, type `/latex` and hit Enter. Press `\\` in the latex environment to enjoy smart syntax suggestions!","","Shortcut: `Ctrl+M`"]},"3_2":{title:"Smart Suggestions",content:["If you've read the tutorial carefully, you've probably noticed that typing `/` on a new line gives you a lot of frequently used markdown features: images, formulas, text, flowcharts, lists..."]},"3_3":{title:"Settings",content:["The settings interface provides dual themes and some frequently used features, such as fonts, languages, etc."]}};function el(t){return t==="en"?Qs:Zs}function tl(t){return t.flatMap(e=>[`# ${e.title}`,...e.content])}function na(t,e,n){return t.map(r=>m.createElement(ze,{key:r.id,itemId:r.id,label:n(r.labelKey),slots:{endIcon:r.children?void 0:$t},onClick:()=>{r.id.slice(-1)!=="x"&&e([r.id])}},r.children&&na(r.children,e,n)))}function nl(t){const{t:e}=ye();return m.createElement(I,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:"0 0 35%",minHeight:20,overflowX:"hidden",borderRight:"solid rgba(0, 0, 0, 0.12)"}},m.createElement(Ar,{"aria-label":"customized",defaultExpandedItems:["1_x"],slots:{endIcon:$t},sx:{userSelect:"none",minHeight:270,maxWidth:300}},na(Ys,t.setActiveId,e)))}function rl({activeId:t}){const{i18n:e}=ye(),n=e.language||"zh",r=el(n),o=t.map(s=>r[s]).filter(Boolean),a=tl(o);return m.createElement(I,{className:"transparent-scrollbar",sx:{width:"100%",height:"100%",margin:"10px",overflowY:"scroll"}},m.createElement(I,{className:` markdown-body ${ge()==="light"?"markdown-body-light":"markdown-body-dark"} transparent-scrollbar`,sx:{ml:"10px",backgroundColor:ge()==="light"?"#F8FAFB":"#393939"}},a.map((s,l)=>m.createElement("div",{key:l,dangerouslySetInnerHTML:{__html:Yt().render(s)}}))))}function al(t){const[e,n]=m.useState(["0_1"]);ye();const r=ge();return m.createElement(m.Fragment,null,m.createElement(bt,{fullScreen:!1,maxWidth:!1,open:t.open,onClose:t.onClose,sx:{height:"100vh"}},m.createElement(I,{className:"transparent-scrollbar",sx:{background:r==="light"?"#F8FAFB":"",padding:"1rem",height:"58vh",width:"58vw"}},m.createElement(I,{className:"transparent-scrollbar",sx:{height:"53vh",display:"flex",background:r==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRradius:"50px",borderRadius:"5px",overflow:"hidden"}},m.createElement(nl,{setActiveId:n}),m.createElement(rl,{activeId:e})))),m.createElement(Fr,null))}class ol{displayState=!1;historyDisplayState=!1;currentMeeting=null;isRecording=!1;currentSpeaker="å‘è¨€äºº";messages=[];tempTranscript="";sourceLanguage="zh-CN";targetLanguage="en";enableRealtimeTranslation=!0;aiSuggestions=[];constructor(){Fn(this,{displayState:se,historyDisplayState:se,currentMeeting:se,isRecording:se,currentSpeaker:se,messages:se,tempTranscript:se,sourceLanguage:se,targetLanguage:se,enableRealtimeTranslation:se,aiSuggestions:se})}display(){this.displayState=!0}hidden(){this.displayState=!1}displayHistory(){this.historyDisplayState=!0}hiddenHistory(){this.historyDisplayState=!1}generateMeetingId(){const e=Date.now(),n=Math.random().toString(36).substr(2,9);return`meeting_${e}_${n}`}generateMeetingTitle(){const e=new Date,n=e.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}),r=e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1}),o=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][e.getDay()];return`ä¼šè®®è®°å½• ${n} ${o} ${r}`}async startNewMeeting(e="zh-CN",n="en",r=""){this.currentMeeting&&this.messages.length>0&&await this.autoSaveMeeting(),de(()=>{const o={id:this.generateMeetingId(),title:r||this.generateMeetingTitle(),startTime:Date.now(),messages:[],language:e,translateLanguage:n};this.currentMeeting=o,this.messages=[],this.tempTranscript="",this.sourceLanguage=e,this.targetLanguage=n,this.isRecording=!1})}async endMeeting(){de(()=>{this.currentMeeting&&(this.currentMeeting.endTime=Date.now(),this.currentMeeting.messages=this.messages.filter(e=>e.isFinal)),this.isRecording=!1}),await this.autoSaveMeeting()}async autoSaveMeeting(){if(this.currentMeeting)try{const{saveMeetingRecord:e}=await Ue(()=>Promise.resolve().then(()=>Yc),void 0,import.meta.url),n={id:this.currentMeeting.id,title:this.currentMeeting.title,startTime:this.currentMeeting.startTime,endTime:this.currentMeeting.endTime||Date.now(),language:this.currentMeeting.language,translateLanguage:this.currentMeeting.translateLanguage,summary:this.currentMeeting.summary,messages:this.messages.filter(r=>r.isFinal).map(r=>({id:r.id,speaker:r.speaker,text:r.text,translatedText:r.translatedText,timestamp:r.timestamp,isFinal:r.isFinal,language:r.language}))};await e(n),console.log("ä¼šè®®å·²è‡ªåŠ¨ä¿å­˜")}catch(e){console.error("è‡ªåŠ¨ä¿å­˜ä¼šè®®å¤±è´¥:",e)}}startRecording(){this.isRecording=!0}stopRecording(){this.isRecording=!1}setSpeaker(e){this.currentSpeaker=e}addMessage(e){de(()=>{this.messages.push(e)})}setTempTranscript(e){de(()=>{this.tempTranscript=e})}clearTempTranscript(){de(()=>{this.tempTranscript=""})}updateFinalMessage(e,n){de(()=>{const r=this.messages.find(o=>o.id===e);r&&r.isFinal&&(r.text=n,r.timestamp=Date.now())})}updateLastMessage(e,n=!1){de(()=>{if(this.messages.length>0){const r=this.messages[this.messages.length-1];r.text=e,r.isFinal=n}else this.addMessage({id:`msg_${Date.now()}`,speaker:this.currentSpeaker,text:e,timestamp:Date.now(),isFinal:n,language:this.sourceLanguage})})}updateMessageTranslation(e,n){de(()=>{const r=this.messages.find(o=>o.id===e);r&&(r.translatedText=n)})}setSourceLanguage(e){this.sourceLanguage=e}setTargetLanguage(e){this.targetLanguage=e}toggleRealtimeTranslation(){de(()=>{this.enableRealtimeTranslation=!this.enableRealtimeTranslation})}clearMessages(){de(()=>{this.messages=[]})}setMeetingSummary(e){de(()=>{this.currentMeeting&&(this.currentMeeting.summary=e)})}loadMeeting(e){de(()=>{this.currentMeeting=e,this.messages=[...e.messages],this.sourceLanguage=e.language,this.targetLanguage=e.translateLanguage})}}const il=new ol,xt=()=>il,sl=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,ll=i.lazy(()=>Ue(()=>import("./Menu-45e9c657.js"),["./Menu-45e9c657.js","./react-0d9c9f23.js","./@babel-518c05f7.js","./@mui-06dd8f5f.js","./clsx-29d81c80.js","./@emotion-c98c060d.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-transition-group-5217f7e1.js","./react-dom-b710246a.js","./scheduler-765c72db.js","./@popperjs-61ffd834.js","./prop-types-c01d55b3.js","./react-is-11039b32.js","./mobx-react-49086c1a.js","./mobx-890d6d9e.js","./mobx-react-lite-64872c2a.js","./use-sync-external-store-3bf5d15d.js","./react-i18next-093df503.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./gsap-cf87e9ff.js","./i18next-2edfafb0.js","./@dnd-kit-b0134b90.js","./markdown-it-multimd-table-766322c9.js","./markdown-it-github-toc-d2e55c92.js","./uslug-b4eaf0e7.js","./unorm-1228fe77.js","./markdown-it-task-lists-4fbe77b0.js","./markdown-it-emoji-66d1da7f.js","./@monaco-editor-41149cb1.js","./state-local-dd516420.js","./html2canvas-a81bcda4.js","./react-resizable-44dc0d2e.js","./react-draggable-4a1d91b3.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-953d2d0b.js"],import.meta.url)),cl=(t,e)=>{sl.sleep(e).then(()=>{window.location.href=t})},dl=()=>{cl("https://bigonion.cn",300)},ul="0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12);",ml=240,gl=Fe(t=>{const{t:e}=ye(),n=en(),r=xt(),{window:o}=t,[a,s]=i.useState(!1),[l,c]=i.useState(!1),d=()=>{s(h=>!h)},u=()=>{r.display()},g=o!==void 0?()=>o().document.body:void 0,y=()=>{A("æ­¤åŠŸèƒ½ä»ç„¶åœ¨å¼€å‘ä¸­",3e3,{kind:"info"})},x=i.createElement(I,{onClick:d,sx:{textAlign:"center",height:"100%",bgcolor:"black"}},i.createElement(U,{variant:"h2",sx:{fontSize:"20px",my:2,color:"wheat",textAlign:"center",boxShadow:ul}},"Markdown+ Online View"),i.createElement(An,{sx:{height:"100%",bgcolor:"background.paper"}},i.createElement(st,null,i.createElement(It,{onClick:dl},i.createElement(Bt,null,i.createElement(lt,null,i.createElement(no,null))),i.createElement(ct,{primary:"Home",secondary:""}))),i.createElement(st,null,i.createElement(It,{onClick:y},i.createElement(Bt,null,i.createElement(lt,null,i.createElement(Rn,null))),i.createElement(ct,{primary:"Photos",secondary:""}))),i.createElement(st,null,i.createElement(It,{onClick:kn},i.createElement(Bt,null,i.createElement(lt,null,i.createElement(ro,null))),i.createElement(ct,{primary:"Export",secondary:""}))),i.createElement(st,null,i.createElement(It,{onClick:()=>{}},i.createElement(Bt,null,i.createElement(lt,null,i.createElement(ao,null))),i.createElement(ct,{primary:"About",secondary:""})))));return i.createElement(i.Fragment,null,i.createElement(I,{className:"FLEX header-app-bar",style:{transition:"0.5s",flex:"0 0 8.7vh"}},i.createElement(zr,null),i.createElement(Ga,{component:"nav",sx:{position:"inherit",justifyContent:"center",zIndex:100,height:"8.7vh",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},i.createElement(Xa,null,i.createElement(le,{color:"inherit",onClick:d,sx:{mr:200,display:{sm:"none"}}},i.createElement(Ya,null)),i.createElement(Za,{sx:{color:n.palette.mode=="light"?"black":"white",display:{xs:"none",md:"flex"},transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",mr:1}}),i.createElement(U,{variant:"h1",component:"a",fontFamily:"monospace",href:"/",sx:{flexGrow:1,display:{xs:"none",sm:"block"},color:n.palette.mode==="light"?n.palette.primary.contrastText:n.palette.secondary.contrastText,fontFamily:"emoji",letterSpacing:".3rem",textDecoration:"none"}},i.createElement("h2",{style:{fontSize:"28px"}},"Markdown+ Online View")),i.createElement(I,{sx:{display:{xs:"none",sm:"flex",flexDirection:"row"}}},i.createElement(Nt,{href:"https://bigonion.cn",startIcon:i.createElement(Qa,null)},e("t-home")),i.createElement(Nt,{onClick:()=>{c(!0)},startIcon:i.createElement($t,null)},e("t-about")),i.createElement(eo,{badgeContent:"NEW!",color:"error",sx:{"& .MuiBadge-badge":{fontSize:"0.55rem",height:"16px",minWidth:"30px",fontWeight:"bold"}}},i.createElement(Nt,{onClick:u,startIcon:i.createElement(_r,null),sx:{position:"relative"}},e("t-ai-meeting-button"))),i.createElement(i.Suspense,{fallback:i.createElement(Nt,{open,endIcon:i.createElement(to,null)},e("t-more"))},i.createElement(ll,null)),i.createElement(Ls,null),i.createElement(Js,null)))),i.createElement(I,{sx:{display:{xs:"flex",sm:"none"}},component:"nav"},i.createElement(Mn,{container:g,variant:"temporary",open:a,onClose:d,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:ml}}},x)),i.createElement(al,{open:l,onClose:()=>{c(!1)}})))});async function Bn(t=null,e=!0){const n=Qe.t;if(tt().unmemorable.previewMode){A(n("t-preview-mode-error"),2500,{kind:"error"});return}let r=At(),o="";if(e&&r!="null")try{mi(r),pe().basic.fileEditLocal?await new Kr().saveFileSilently(r)?o=n("t-save-success-local"):o=n("t-save-success-browser-no-local"):o=n("t-save-success-browser"),A(o)}catch{A(n("t-rejection-error"),2500,{kind:"error"})}else Bn()}async function fl(){return await Wr().then(t=>t&&t.length>0?t[0]?.contentText===At():!1)}function ra(t,e){if(pe().basic.syncScroll)A("åŒæ­¥æ»šåŠ¨å·²å…³é—­ ğŸ§ ",2e3),Zt({basic:{syncScroll:!1}});else{A("åŒæ­¥æ»šåŠ¨å·²å¼€å¯ ğŸ˜ ",2e3);const n=t.getScrollTop();t.setScrollTop(n+.3),t.setScrollTop(n-.3);const r=t.getVisibleRanges();if(r.length>0){const a=r[0].startLineNumber,s=document.getElementById("view-area");a==1&&s.scrollTo({top:0,behavior:"smooth"})}Zt({basic:{syncScroll:!0}})}}function aa(t,e){Xr()?Qt(!1):Qt(!0)}function oa(t,e){tt().unmemorable.aiPanelState?Ke({unmemorable:{aiPanelState:!1}}):(Ke({unmemorable:{selectEndPos:{posx:window.innerWidth/4,posy:window.innerHeight/2.6}}}),Ke({unmemorable:{aiPanelState:!0}}))}let ia=(t,e=!0,n)=>{const r=new webkitSpeechRecognition||new SpeechRecognition;let o=!1;return r.lang=t,r.continuous=!0,r.interimResults=!0,e&&r.start(),r.onstart=()=>{o=!0},r.onresult=a=>{let s="",l=!1;for(let c=a.resultIndex;c<a.results.length;c++)s=a.results[c][0].transcript,l=a.results[c].isFinal;t.startsWith("zh")&&(s=s.replace(/ /g,"")),window._speechData.speechResult=s,window._speechData.isFinal=l,n(s.length,l),o===!1&&r.stopRecognition()},r.onerror=function(a){a.error=="not-allowed"?A("è¯­éŸ³æƒé™è¢«æ‹’ç»ï¼Œä¸–ç•Œï¼Œæ‹’ç»äº†æˆ‘...",4500):console.log("è¯­éŸ³è¯†åˆ«é”™è¯¯:",a.error)},r.onend=()=>{console.log(o),o&&r.start()},r.stopRecognition=()=>{r.stop(),o=!1},{recognition:r,recognizing:o}};const hl=[["zh-CN","æ™®é€šè¯"],["en-US","English"],["ja-JP","æ—¥æœ¬èª"],["fr-ch","æ³•è¯­ï¼ˆç‘å£«ï¼‰"],["ko","éŸ©è¯­"]];let Ot="";window._speechData||(window._speechData={processing:!1,speechResult:"",isFinal:!1,speech:null});function sa(t,e){const n=pe().basic.speechLanguage??"zh-CN",r=(o,a)=>{const s=window._speechData.speechResult;a&&s&&s!==Ot?(ot(s,!0),Ot=s,console.log("âœ… æ’å…¥æœ€ç»ˆè¯†åˆ«ç»“æœ:",s)):a||console.log("â³ ä¸´æ—¶è¯†åˆ«ç»“æœ:",s)};if(window._speechData.processing)A("è¯­éŸ³è¯†åˆ«å·²å…³é—­ï¼Œæˆ‘ä¸å¬...",2e3),window._speechData.processing=!1,window._speechData.speech.stopRecognition(),window._speechData.speech=null,window._speechData.speechResult="",Ot="";else{A("è¯­éŸ³è¯†åˆ«å·²å¼€å¯ï¼Œå—¯ä½ è¯´ï¼Œæˆ‘åœ¨å¬...",3e3),window._speechData.processing=!0,Ot="";let{recognition:o}=ia(n,!0,r);window._speechData.speech=o}}function pl(){document.addEventListener("keydown",t=>{t.ctrlKey&&t.key.toLowerCase()=="q"&&(t.stopPropagation(),t.preventDefault(),ra(window.editor)),t.ctrlKey&&(t.altKey||t.shiftKey)&&t.key.toLowerCase()=="f"&&(t.stopPropagation(),t.preventDefault(),aa()),t.ctrlKey&&t.key.toLowerCase()=="s"&&(t.stopPropagation(),t.preventDefault(),Bn()),t.ctrlKey&&t.key.toLowerCase()=="j"&&(t.stopPropagation(),t.preventDefault(),oa()),t.ctrlKey&&t.altKey&&t.key.toLowerCase()=="v"&&(t.stopPropagation(),t.preventDefault(),sa())},!0)}const br=pe().advanced.imageSettings.basicStyle,fn=new Ge,yl=Yr();function wl(t,e){t.getContainerDomNode().addEventListener("paste",async n=>{await bl(n).then(async r=>{let o="";if(r){if(!fn.getTopDirectoryHandle()||pe().advanced.imageSettings.modePrefer==="vf"){let a=new Date().getTime();for(let s=0;s<=r.length-1;s++)o+=`![${br}](/vf/${a+s})`;gi(r,a),yl.refreshImages()}else{let a=pe().advanced.imageSettings.imgStorePath;a=a.slice(-1)==="/"?a.slice(0,a.length-1):a;for(let s=0;s<=r.length-1;s++){let l=await fn.writeBase64ImageFile(fn.getTopDirectoryHandle(),".png",r[s],a);o+=`![${br}](.${a}/${l}.png)`}}ot(o,!0)}})},!0)}function bl(t){return new Promise(e=>{let r=t.clipboardData.items;const o=r.length;let a=[];for(let s=0;s<r.length;s++){let l=r[s];if(l.kind=="file"){t.preventDefault(),t.stopPropagation();let c=l.getAsFile(),d=new FileReader;d.onload=function(g){typeof g.target.result=="string"&&a.push(g.target.result),s===o-1&&e(a)};const u=c.type.split("/")[1];tn.includes(u)&&d.readAsDataURL(c)}}})}let hn=!1,jt=0;function xl(t=2){let e,n;jt++,hn?(clearTimeout(e),e=setTimeout(function(){yt(),jt=0},300)):(clearTimeout(n),jt>=t?(hn=!0,yt(),n=setTimeout(()=>{hn=!1,jt=0},200)):typeof window.markdownitIncrementalDOM=="function"&&yt())}function pn(){return document.getElementsByClassName("ibwrapper")[0]?document.getElementsByClassName("ibwrapper")[0].children[0].value:""}function Cl(){console.log(pn().split("#"));const t=pn().split("#")[1],e=pn().split("#")[2];ot(kl(t,e),!0)}function kl(t,e){if(!t||!e)return"";let n="| ";for(let r=0;r<e;r++)n+=`Header  ${r+1} | `;n+=`
|`;for(let r=0;r<e;r++)n+="--- | ";for(let r=0;r<t;r++){n+=`
| `;for(let o=0;o<e;o++)n+=` Cell ${r+1}-${o+1} | `}return n}const xr=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function El(t=3,e="markdown.jpeg"){let n=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div id="exportBox" style="width:64vw" class="markdown-body markdown-body-${ge()==="light"?"light":"dark"}">${n}</div>`,xr.sleep(250).then(()=>{_o(document.getElementById("exportBox"),{scale:t}).then(r=>{let o=r.toDataURL("image/png",.6);var a=document.createElement("a");a.download=e,a.href=o,a.click()}),xr.sleep(2e3).then(()=>{window.location.reload()})})}function vl(){ot(`|---|
`,!0)}function Sl(t,e){const n=t.getPosition();n.column==1&&(ot(`$$

$$`,!0),t.setPosition({column:1,lineNumber:n.lineNumber+1}))}function la(t,e){const r=t.getValue().split(`
`),o=e.lineNumber-1;let a="",s=!1,l=-1,c=-1;const d=new Set(["br","img","input","hr","meta","link"]);for(let u=o;u>=0;u--){const g=r[u].match(/<([a-zA-Z]+)(\s+[^>]*)?>/);if(g){if(a=g[1],d.has(a)||r[u].includes("/>"))continue;l=u,s=!0;break}}if(!s)return!1;for(let u=o;u<r.length;u++){const g=r[u].match(new RegExp(`</${a}>`));if(g){g[0],c=u;break}}return l!==-1&&c!==-1&&l<=o&&o<=c}function Tl(t,e){const n=t.getSelection();if(!n)return;const r=t.getModel();if(!r)return;let a=r.getValueInRange(n).trim(),s;const l=n.getStartPosition();la(r,l)?s=a.startsWith("<b>")&&a.endsWith("</b>")?a.slice(3,-4):`<b>${a}</b>`:s=a.startsWith("**")&&a.endsWith("**")?a.slice(2,-2):`**${a}**`;var d=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);t.executeEdits("my-source",[{range:d,text:s,forceMoveMarkers:!1}]);const u=new e.Selection(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn+s.length);t.setSelection(u)}function Il(t,e){const n=t.getSelection(),r=t.getModel(),o=n.startLineNumber,a=r.getLineContent(o),s=a.length;let l="",c=s+1,d=s+1;const u=/\!\[(.*?)\]\((.*?)\)/g;if(u.test(a)){const h=a.match(u);console.log(h);let w=a.replace(u,(S,E,P)=>E.includes("#r")?`![${E.replace("#r","")}](${P})`:`![${E}#r](${P})`);const k=new e.Range(o,1,o,a.length+1);t.executeEdits("center-action",[{range:k,text:w,forceMoveMarkers:!0}]);return}const g=a.slice(-2);g===">>"?(l="",c=s-1):g==="||"?(l=">>",c=s-1):l=">>";const y=new e.Range(o,c,o,d);t.executeEdits("my-source",[{range:y,text:l,forceMoveMarkers:!0}]);const x=new e.Selection(o,c+l.length,o,c+l.length);t.setSelection(x)}function Dl(t,e){const n=t.getSelection(),r=Uo();if(!n)return;const o=t.getModel(),a=n.startLineNumber,s=o.getLineContent(a),l=s.length;let c="",d=l+1,u=l+1;const g=/\!\[(.*?)\]\((.*?)\)/g;if(g.test(s)){const k=s.match(g);console.log(k);let S=s.replace(g,(P,$,D)=>$.includes("#c")?`![${$.replace("#c","")}](${D})`:`![${$}#c](${D})`);const E=new e.Range(a,1,a,s.length+1);t.executeEdits("center-action",[{range:E,text:S,forceMoveMarkers:!0}]);return}const y=/```mermaid([\s\S]*?)```/g;if(y.test(r)){let k=r.replace(y,E=>`<center> 
      
${E}
</center>`);const S=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);t.executeEdits("center-action",[{range:S,text:k,forceMoveMarkers:!0}]);return}const x=s.slice(-2);x==="||"?(c="",d=l-1):x===">>"?(c="||",d=l-1):c="||";const h=new e.Range(a,d,a,u);t.executeEdits("my-source",[{range:h,text:c,forceMoveMarkers:!0}]);const w=new e.Selection(a,d+c.length,a,d+c.length);t.setSelection(w)}function Ml(t,e){const n=t.getSelection(),r=t.getModel();let o=r.getValueInRange(n),a;la(r,n.getStartPosition())?o.startsWith("<i>")&&o.endsWith("</i>")?a=o.replace(/^<i>/,"").replace(/<\/i>$/,""):a=`<i>${o}</i>`:o.startsWith("*")&&o.endsWith("*")?a=o.slice(1,-1):a=`*${o}*`;var l=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:l,text:a,forceMoveMarkers:!1}]),a!==o){const c=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);t.setSelection(c)}}function Ll(t,e){const n=t.getSelection();let o=t.getModel().getValueInRange(n),a;o.startsWith("<u>")&&o.endsWith("</u>")?a=o.slice(3,-4):a=`<u>${o}</u>`;var l=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:l,text:a,forceMoveMarkers:!1}]),a!==o){const c=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);t.setSelection(c)}}function Rl(t,e){const n=t.getSelection();let o=t.getModel().getValueInRange(n),a;o.startsWith("~~")&&o.endsWith("~~")?a=o.slice(2,-2):a=`~~${o}~~`;var l=new e.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(t.executeEdits("my-source",[{range:l,text:a,forceMoveMarkers:!1}]),a!==o){const c=new e.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+a.length);t.setSelection(c)}}function Wt(t,e,n){const r=t.getSelection(),o=new e.Range(r.startLineNumber,1,r.startLineNumber,1),a=t.getModel().getLineContent(r.startLineNumber),s=/^(#+) /,l=a.match(s);if(!(["$"].includes(a[0])||a.match("```")))if(l&&l[1].length===n){console.log(a);const c=a.slice(l[0].length);t.executeEdits("",[{range:new e.Range(r.startLineNumber,1,r.startLineNumber,a.length+1),text:c}])}else{const c="#".repeat(n)+" ",d=l?new e.Range(r.startLineNumber,1,r.startLineNumber,l[0].length+1):o;t.executeEdits("",[{range:d,text:c}])}}const $l=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function Al(t,e){const n={save:e.KeyMod.CtrlCmd|e.KeyCode.KeyS,quotation:e.KeyMod.Shift|e.KeyCode.Quote,format:e.KeyMod.Shift|e.KeyCode.KeyF,pageBreaker:e.KeyMod.CtrlCmd|e.KeyMod.Alt|e.KeyCode.Enter,latexBlock:e.KeyMod.CtrlCmd|e.KeyCode.KeyM,askAI:e.KeyMod.CtrlCmd|e.KeyCode.KeyJ,voice2Words:e.KeyMod.CtrlCmd|e.KeyMod.Alt|e.KeyCode.KeyV,syncScroll:e.KeyMod.CtrlCmd|e.KeyCode.KeyQ,fileManager:e.KeyMod.CtrlCmd|e.KeyMod.Shift|e.KeyCode.KeyF,markdownTextEditFastKey:{bold:e.KeyMod.CtrlCmd|e.KeyCode.KeyB,italics:e.KeyMod.CtrlCmd|e.KeyCode.KeyI,underline:e.KeyMod.CtrlCmd|e.KeyCode.KeyU,alignCenter:e.KeyMod.CtrlCmd|e.KeyCode.KeyE,alignRight:e.KeyMod.CtrlCmd|e.KeyCode.KeyR,deleteLine:e.KeyMod.CtrlCmd|e.KeyCode.Backquote,h1:e.KeyMod.CtrlCmd|e.KeyCode.Digit1,h2:e.KeyMod.CtrlCmd|e.KeyCode.Digit2,h3:e.KeyMod.CtrlCmd|e.KeyCode.Digit3,h4:e.KeyMod.CtrlCmd|e.KeyCode.Digit4}};t.addAction({id:"insert.tableAny",label:"æ’å…¥ä»»æ„è¡Œå’Œåˆ—,æ ¼å¼: table#x#x",keybindings:[],run:()=>{Cl()}}),t.addAction({id:"reload-no-cache",label:"å¼ºåˆ¶åˆ·æ–°Markdownåœ¨çº¿",keybindings:[],run:()=>{window.location.reload(!0)}}),t.addAction({id:"export.asPDF",label:"ä¿å­˜å¹¶å¯¼å‡ºä¸ºPDF",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:async()=>{await fl()?kn():(Bn(),$l.sleep(800).then(()=>{kn()}))}}),t.addAction({id:"export.asImg",label:"ä½œä¸ºPNGæ ¼å¼çš„å›¾ç‰‡å¯¼å‡º",keybindings:[],run:()=>{El()}}),t.addAction({id:"insert.pageBreaker",label:"æ’å…¥ä¸€ä¸ªåˆ†é¡µç¬¦",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{vl()}}),t.addAction({id:"insert.latexBlock",label:"æ’å…¥ä¸€ä¸ªLaTexè¯­æ³•å—",keybindings:[n.latexBlock],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{Sl(t)}}),t.addAction({id:"insert.voice2words",label:"è¯­éŸ³è½¬æ–‡å­—...å˜Ÿ...å–‚...å¬å¾—è§å—....",keybindings:[n.voice2Words],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{sa()}}),t.addAction({id:"command.syncScroll",label:"åŒæ­¥æ»šåŠ¨ (å¼€å¯/å…³é—­)",keybindings:[n.syncScroll],contextMenuGroupId:"navigation",run:()=>{ra(t)}}),t.addAction({id:"command.fileManagerState",label:"æ–‡ä»¶ç®¡ç†å™¨ (å¼€å¯/å…³é—­)",keybindings:[n.fileManager],contextMenuGroupId:"navigation",run:()=>{aa()}}),t.addAction({id:"insert.bold",label:"åŠ ç²—æ–‡æœ¬",keybindings:[n.markdownTextEditFastKey.bold],contextMenuGroupId:"navigation",run:()=>{Tl(t,e)}}),t.addAction({id:"insert.alignRight",label:"æ–‡æœ¬å±…å³",keybindings:[n.markdownTextEditFastKey.alignRight],contextMenuGroupId:"navigation",run:()=>{Il(t,e)}}),t.addAction({id:"insert.alignCenter",label:"æ–‡æœ¬å±…ä¸­",keybindings:[n.markdownTextEditFastKey.alignCenter],contextMenuGroupId:"navigation",run:()=>{Dl(t,e)}}),t.addAction({id:"insert.italics",label:"æ–œä½“",keybindings:[n.markdownTextEditFastKey.italics],run:()=>{Ml(t,e)}}),t.addAction({id:"insert.underline",label:"ä¸‹åˆ’çº¿",keybindings:[n.markdownTextEditFastKey.underline],run:()=>{Ll(t,e)}}),t.addAction({id:"insert.deleteLine",label:"åˆ é™¤çº¿",keybindings:[n.markdownTextEditFastKey.deleteLine],run:()=>{Rl(t,e)}}),t.addAction({id:"insert.h1",label:"æ ‡é¢˜1",keybindings:[n.markdownTextEditFastKey.h1],run:()=>{Wt(t,e,1)}}),t.addAction({id:"insert.h2",label:"æ ‡é¢˜2",keybindings:[n.markdownTextEditFastKey.h2],run:()=>{Wt(t,e,2)}}),t.addAction({id:"insert.h3",label:"æ ‡é¢˜3",keybindings:[n.markdownTextEditFastKey.h3],run:()=>{Wt(t,e,3)}}),t.addAction({id:"insert.h4",label:"æ ‡é¢˜4",keybindings:[n.markdownTextEditFastKey.h4],run:()=>{Wt(t,e,4)}}),t.addAction({id:"reload",label:"é‡æ–°åŠ è½½çª—å£(Reload Window)",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:100,run:()=>{window.location.reload()}}),t.addAction({id:"AI",label:"âœ¨Ask AI",keybindings:[n.askAI],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{oa()}})}const Fl=["tilde","mathring","widetilde","overgroup","utilde","undergroup","acute","vec","Overrightarrow","bar","overleftarrow","overrightarrow","breve","underleftarrow","underrightarrow","check","overleftharpoon","overrightharpoon","dot","overleftrightarrow","overbrace","ddot","underleftrightarrow","underbrace","grave","overline","overlinesegment","hat","underline","underlinesegment","widehat","widecheck","underbar"],Pl=["lparen","rparen","lceil","rceil","uparrow","lbrack","rbrack","lfloor","rfloor","downarrow","lbrace","rbrace","lmoustache","rmoustache","updownarrow","langle","rangle","lgroup","rgroup","Uparrow","vert","ulcorner","urcorner","Downarrow","Vert","llcorner","lrcorner","Updownarrow","lvert","rvert","lVert","rVert","backslash","lang","rang","lt","gt","llbracket","rrbracket","lBrace","rBrace"],zl=["left","big","bigl","bigm","bigr","middle","Big","Bigl","Bigm","Bigr","right","bigg","biggl","biggm","biggr","Bigg","Biggl","Biggm","Biggr"],_l=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","varGamma","varDelta","varTheta","varLambda","varXi","varPi","varSigma","varUpsilon","varPhi","varPsi","varOmega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega","varepsilon","varkappa","vartheta","thetasym","varpi","varrho","varsigma","varphi","digamma"],Bl=["imath","nabla","Im","Reals","jmath","partial","image","wp","aleph","Game","Bbbk","weierp","alef","Finv","N","Z","alefsym","cnums","natnums","beth","Complex","R","gimel","ell","Re","daleth","hbar","real","eth","hslash","reals"],Nl=["cancel","overbrace","bcancel","underbrace","xcancel","not =","sout","boxed","phase","tag","tag*"],Hl=["atop"],Ol=["substack"],jl=["stackrel","overset","underset","raisebox"],Wl=["mathllap","mathrlap","mathclap","llap","rlap","clap","smash"],ql=["thinspace","medspace","thickspace","enspace","quad","qquad","negthinspace","negmedspace","nobreakspace","negthickspace","space","mathstrut"],Kl=["kern","mkern","mskip","hskip","hspace","hspace*","phantom","hphantom","vphantom"],Ul=["forall","complement","therefore","emptyset","exists","subset","because","empty","exist","supset","mapsto","varnothing","nexists","mid","to","implies","in","land","gets","impliedby","isin","lor","leftrightarrow","iff","notin","ni","notni","neg","lnot"],Vl=["Set","set"],Jl=["def","gdef","edef","xdef","let","futurelet","global","newcommand","renewcommand","providecommand","long","char","mathchoice","TextOrMath","@ifstar","@ifnextchar","@firstoftwo","@secondoftwo","relax","expandafter","noexpand"],Gl=["sum","prod","bigotimes","bigvee","int","coprod","bigoplus","bigwedge","iint","intop","bigodot","bigcap","iiint","smallint","biguplus","bigcup","oint","oiint","oiiint","bigsqcup"],Xl=["cdot","gtrdot","pmod","cdotp","intercal","pod","centerdot","land","rhd","circ","leftthreetimes","rightthreetimes","amalg","circledast","ldotp","rtimes","And","circledcirc","lor","setminus","ast","circleddash","lessdot","smallsetminus","barwedge","Cup","lhd","sqcap","bigcirc","cup","ltimes","sqcup","bmod","curlyvee","times","boxdot","curlywedge","mp","unlhd","boxminus","div","odot","unrhd","boxplus","divideontimes","ominus","uplus","boxtimes","dotplus","oplus","vee","bullet","doublebarwedge","otimes","veebar","Cap","doublecap","oslash","wedge","cap","doublecup","pm","plusmn","wr"],Yl=["over","above"],Zl=["frac","dfrac","tfrac","cfrac","genfrac"],Ql=["choose"],ec=["binom","dbinom","tbinom","brace","brack"],tc=["arcsin","cosec","deg","sec","arccos","cosh","dim","sin","arctan","cot","exp","sinh","arctg","cotg","hom","sh","arcctg","coth","ker","tan","arg","csc","lg","tanh","ch","ctg","ln","tg","cos","cth","log","th","argmax","injlim","min","varinjlim","argmin","lim","plim","varliminf","det","liminf","Pr","varlimsup","gcd","limsup","projlim","varprojlim","inf","max","sup"],nc=["operatorname","operatorname*","operatornamewithlimits"],rc=["sqrt"],ac=["doteqdot","lessapprox","smile","eqcirc","lesseqgtr","sqsubset","eqcolon","minuscolon","lesseqqgtr","sqsubseteq","Eqcolon","minuscoloncolon","lessgtr","sqsupset","approx","eqqcolon","equalscolon","lesssim","sqsupseteq","approxcolon","Eqqcolon","equalscoloncolon","ll","Subset","approxcoloncolon","eqsim","lll","subset","sub","approxeq","eqslantgtr","llless","subseteq","sube","asymp","eqslantless","lt","subseteqq","backepsilon","equiv","mid","succ","backsim","fallingdotseq","models","succapprox","backsimeq","frown","multimap","succcurlyeq","between","ge","origof","succeq","bowtie","geq","owns","succsim","bumpeq","geqq","parallel","Supset","Bumpeq","geqslant","perp","supset","circeq","gg","pitchfork","supseteq","supe","colonapprox","ggg","prec","supseteqq","Colonapprox","coloncolonapprox","gggtr","precapprox","thickapprox","coloneq","colonminus","gt","preccurlyeq","thicksim","Coloneq","coloncolonminus","gtrapprox","preceq","trianglelefteq","coloneqq","colonequals","gtreqless","precsim","triangleq","Coloneqq","coloncolonequals","gtreqqless","propto","trianglerighteq","colonsim","gtrless","risingdotseq","varpropto","Colonsim","coloncolonsim","gtrsim","shortmid","vartriangle","cong","imageof","shortparallel","vartriangleleft","curlyeqprec","in","isin","sim","vartriangleright","curlyeqsucc","Join","simcolon","vcentcolon","ratio","dashv","le","simcoloncolon","vdash","dblcolon","coloncolon","leq","simeq","vDash","doteq","leqq","smallfrown","Vdash","Doteq","leqslant","smallsmile","Vvdash"],oc=["gnapprox","ngeqslant","nsubseteq","precneqq","gneq","ngtr","nsubseteqq","precnsim","gneqq","nleq","nsucc","subsetneq","gnsim","nleqq","nsucceq","subsetneqq","gvertneqq","nleqslant","nsupseteq","succnapprox","lnapprox","nless","nsupseteqq","succneqq","lneq","nmid","ntriangleleft","succnsim","lneqq","notin","ntrianglelefteq","supsetneq","lnsim","notni","ntriangleright","supsetneqq","lvertneqq","nparallel","ntrianglerighteq","varsubsetneq","ncong","nprec","nvdash","varsubsetneqq","ne","npreceq","nvDash","varsupsetneq","neq","nshortmid","nVDash","varsupsetneqq","ngeq","nshortparallel","nVdash","ngeqq","nsim","precnapprox"],ic=["circlearrowleft","leftharpoonup","rArr","circlearrowright","leftleftarrows","rarr","curvearrowleft","leftrightarrow","restriction","curvearrowright","Leftrightarrow","rightarrow","Darr","leftrightarrows","Rightarrow","dArr","leftrightharpoons","rightarrowtail","darr","leftrightsquigarrow","rightharpoondown","dashleftarrow","Lleftarrow","rightharpoonup","dashrightarrow","longleftarrow","rightleftarrows","downarrow","Longleftarrow","rightleftharpoons","Downarrow","longleftrightarrow","rightrightarrows","downdownarrows","Longleftrightarrow","rightsquigarrow","downharpoonleft","longmapsto","Rrightarrow","downharpoonright","longrightarrow","Rsh","gets","Longrightarrow","searrow","Harr","looparrowleft","swarrow","hArr","looparrowright","to","harr","Lrarr","twoheadleftarrow","hookleftarrow","lrArr","twoheadrightarrow","hookrightarrow","lrarr","Uarr","iff","Lsh","uArr","impliedby","mapsto","uarr","implies","nearrow","uparrow","Larr","nleftarrow","Uparrow","lArr","nLeftarrow","updownarrow","larr","nleftrightarrow","Updownarrow","leadsto","nLeftrightarrow","upharpoonleft","leftarrow","nrightarrow","upharpoonright","Leftarrow","nRightarrow","upuparrows","leftarrowtail","nwarrow","leftharpoondown","Rarr"],sc=["xleftarrow","xrightarrow","xLeftarrow","xRightarrow","xleftrightarrow","xLeftrightarrow","xhookleftarrow","xhookrightarrow","xtwoheadleftarrow","xtwoheadrightarrow","xleftharpoonup","xrightharpoonup","xleftharpoondown","xrightharpoondown","xleftrightharpoons","xrightleftharpoons","xtofrom","xmapsto","xlongequal"],lc=["bra","Bra","ket","Ket","braket","Braket"],cc=["mathbin","mathclose","mathinner","mathop","mathopen","mathord","mathpunct","mathrel"],dc=["color","textcolor","colorbox"],uc=["rm","bf","it","sf","tt"],mc=["mathrm","mathbf","mathit","mathnormal","textbf","textit","textrm","bold","Bbb","textnormal","boldsymbol","mathbb","text","bm","frak","mathsf","mathtt","mathfrak","textsf","texttt","mathcal","mathscr","pmb"],gc=["Huge","huge","LARGE","Large","large","normalsize","small","footnotesize","scriptsize","tiny"],fc=["displaystyle","textstyle","scriptstyle","scriptscriptstyle","limits","nolimits","verb"],hc=["cdots","LaTeX","ddots","TeX","ldots","nabla","vdots","infty","dotsb","infin","dotsc","checkmark","dotsi","dag","dotsm","dagger","dotso","sdot","ddag","mathellipsis","ddagger","Box","Dagger","lq","square","angle","blacksquare","measuredangle","rq","triangle","sphericalangle","triangledown","top","triangleleft","bot","triangleright","colon","bigtriangledown","backprime","bigtriangleup","pounds","prime","blacktriangle","mathsterling","blacktriangledown","blacktriangleleft","yen","blacktriangleright","surd","diamond","degree","Diamond","lozenge","mho","blacklozenge","diagdown","star","diagup","bigstar","flat","clubsuit","natural","copyright","clubs","sharp","circledR","diamondsuit","heartsuit","diamonds","hearts","circledS","spadesuit","spades","maltese","minuso"],pc=["message","errmessage","show"],yc=["matrix","array","pmatrix","bmatrix","vmatrix","Vmatrix","Bmatrix","cases","rcases","smallmatrix","subarray","equation","split","align","gather","alignat","CD","darray","dcases","drcases","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","equation*","gather*","align*","alignat*","gathered","aligned","alignedat"];function wc(){const t=new Date,e=t.getDate(),n=t.toLocaleString("en-US",{month:"short"}),r=t.getFullYear();return`${e}, ${n}, ${r}`}async function bc(t,e){e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:(l,c,d)=>{const u=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column}),g=l.getValueInRange({startLineNumber:c.lineNumber,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column}),y={startLineNumber:c.lineNumber,startColumn:c.column-1,endLineNumber:c.lineNumber,endColumn:c.column},x=[{pattern:/\/table(\d+)x(\d+)$/i,type:"complete"},{pattern:/\/table(\d+)x$/i,type:"partial"},{pattern:/\/table(\d+)$/i,type:"square"},{pattern:/\/table$/i,type:"basic"}];for(const h of x){const w=g.match(h.pattern);if(w&&!vn(u)){const k={startLineNumber:c.lineNumber,startColumn:c.column-g.length+g.lastIndexOf("/"),endLineNumber:c.lineNumber,endColumn:c.column};let S=[];if(h.type==="complete"){const E=parseInt(w[1]),P=parseInt(w[2]);E>0&&P>0&&E<=20&&P<=20&&S.push({label:`/table${E}x${P} (${E}è¡Œ${P}åˆ—è¡¨æ ¼)`,detail:`æ’å…¥ä¸€ä¸ª${E}è¡Œ${P}åˆ—çš„è¡¨æ ¼`,kind:e.languages.CompletionItemKind.Function,insertText:Cr(E,P),insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:k})}else if(h.type==="partial"){const E=parseInt(w[1]);E>0&&E<=20&&S.push({label:`/table${E}x... (${E}è¡Œè¡¨æ ¼)`,detail:`ç»§ç»­è¾“å…¥åˆ—æ•°ï¼Œå¦‚ /table${E}x3`,kind:e.languages.CompletionItemKind.Function,insertText:`table${E}x`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:k})}else if(h.type==="square"){const E=parseInt(w[1]);E>0&&E<=20&&(S.push({label:`/table${E} (${E}x${E}æ­£æ–¹å½¢è¡¨æ ¼)`,detail:`æ’å…¥ä¸€ä¸ª${E}è¡Œ${E}åˆ—çš„æ­£æ–¹å½¢è¡¨æ ¼`,kind:e.languages.CompletionItemKind.Function,insertText:Cr(E,E),insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:k}),S.push({label:`/table${E}x... (è‡ªå®šä¹‰${E}è¡Œè¡¨æ ¼)`,detail:"è¾“å…¥xåç»§ç»­æŒ‡å®šåˆ—æ•°",kind:e.languages.CompletionItemKind.Function,insertText:`table${E}x`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:k}))}else h.type==="basic"&&S.push({label:"/table (nè¡Œmåˆ—è¡¨æ ¼)",detail:"å¦‚ /table3 æˆ– /table3x5",kind:e.languages.CompletionItemKind.Function,insertText:"table",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:k});if(S.length>0)return{suggestions:S}}}if(!vn(u)&&c.column===2)return{suggestions:[{label:"/code (ä»£ç å—)",detail:"æ’å…¥ä¸€æ®µä»£ç å—",kind:e.languages.CompletionItemKind.Function,insertText:"\n```${1:js}\n${2:}\n```\n",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:y},{label:"/image (å›¾ç‰‡)",detail:"æ’å…¥å›¾ç‰‡",kind:e.languages.CompletionItemKind.Function,insertText:`![${pe().advanced.imageSettings.basicStyle}\${1:}](\${2:})`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:y},{label:"/table (nè¡Œmåˆ—è¡¨æ ¼)",detail:"å¦‚ /table3 æˆ– /table3x5",kind:e.languages.CompletionItemKind.Function,insertText:"table",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:y},{label:"/latex-block (å…¬å¼å—)",detail:"åˆ›å»ºä¸€ä¸ªLaTexå…¬å¼å—",kind:e.languages.CompletionItemKind.Field,sortText:"4",range:y,insertText:`$$
\${1:}
$$
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/list-in-order (æœ‰åºåˆ—è¡¨)",detail:"åˆ›å»ºæœ‰åºåˆ—è¡¨",kind:e.languages.CompletionItemKind.Function,sortText:"5",range:y,insertText:`
1. \${1:}
2. \${2:}
3. \${3:}
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/page-breaker (åˆ†é¡µç¬¦)",detail:"æ’å…¥ä¸€ä¸ªåˆ†é¡µç¬¦",kind:e.languages.CompletionItemKind.Function,sortText:"6",range:y,insertText:`
|---|
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-flowChart (æµç¨‹å›¾)",detail:"æ’å…¥mermaidæµç¨‹å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"7",range:y,insertText:"\n```mermaid\nflowchart TB\nStart --> Stop\n```\n",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-pie-chart (é¥¼å›¾)",detail:"æ’å…¥mermaidé¥¼å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"8",range:y,insertText:'\n```mermaid\npie title ${1:Pets adopted by volunteers}\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n```\n',insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-mind-map (æ€ç»´å¯¼å›¾)",detail:"æ’å…¥mermaidæ€ç»´å¯¼å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"9",range:y,insertText:`
\`\`\`mermaid
mindmap
Root
    A
      B
      C
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-time-line (æ—¶é—´çº¿å›¾)",detail:"æ’å…¥mermaidæ—¶é—´çº¿å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"a1",range:y,insertText:`
\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : Youtube
    2006 : Twitter
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-sequence (åºåˆ—å›¾)",detail:"æ’å…¥mermaidåºåˆ—å›¾",kind:e.languages.CompletionItemKind.Function,sortText:"a2",range:y,insertText:`
\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!
\`\`\`
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-font-size-text (ä»»æ„å¤§å°æ–‡å­—)",detail:"ä½ èƒ½ä»»æ„æŒæ§å¤§å°çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a3",range:y,insertText:'\n<p style="font-size:${1:16}px">${2:}</p>\n',insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-center-text (å±…ä¸­æ–‡æœ¬)",detail:"ä½ èƒ½ä»»æ„æŒæ§ä½ç½®çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a4",range:y,insertText:`
<p style="text-align:center">\${1:}</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-color-text (ä»»æ„é¢œè‰²æ–‡æœ¬)",detail:"ä½ èƒ½ä»»æ„æŒæ§é¢œè‰²çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a5",range:y,insertText:`
<p style="color:red">\${1:}</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/any-text (ä»»æ„æ–‡æœ¬)",detail:"ä½ èƒ½ä»»æ„æŒæ§çš„æ–‡å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a6",range:y,insertText:`
<p style="font-size:16px;text-align:center;color:black;font-weight:bold;font-style:italic;">
\${1:}
</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/title-text (å›¾è¡¨é¢˜æ³¨é‡Šæ–‡æœ¬)",detail:"å›¾ç‰‡ã€è¡¨æ ¼ä¸‹çš„å°å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a6",range:y,insertText:`
<p style="font-size:16px;text-align:center;font-style:italic;">
\${1:}
</p>
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/cover (å°é¢ï¼Œç§’äº†)",detail:"å›¾ç‰‡ã€è¡¨æ ¼ä¸‹çš„å°å­—",kind:e.languages.CompletionItemKind.Function,sortText:"a7",range:y,insertText:`
<br>
<br>
<br>

![#w70%#c](https://www.nus.edu.sg/images/default-source/identity-images/NUS_logo_full-horizontal.jpg)
<br>
<div>
 <center>
      <h1>\${1:Title}</h1><br><br><br><br><br><br><br><br>
      <p style="font-size:17px;">
        <b>
        \${2:Name}<br>
        \${3:[INFO]}<br>
        \${4:${wc()}}
        </b>
      </p>
 </center>
</div>

|---|
`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/prettier-ignore (å¿½ç•¥æ ¼å¼åŒ–è¡Œ)",detail:"ä¸‹ä¸€è¡Œä¸è¿›è¡Œprettieræ ¼å¼åŒ–",kind:e.languages.CompletionItemKind.Function,insertText:"<!-- prettier-ignore -->",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:y,sortText:"b1"},{label:"/prettier-ignore-block (å¿½ç•¥æ ¼å¼åŒ–å—)",detail:"å¿½ç•¥prettieræ ¼å¼åŒ–å—",kind:e.languages.CompletionItemKind.Function,insertText:`<!-- prettier-ignore-start -->
\${1:}
<!-- prettier-ignore-end -->`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:y,sortText:"b2"}]}}});class n{children;isEndOfWord;constructor(){this.children={},this.isEndOfWord=!1}}class r{root;constructor(){this.root=new n}insert(c){let d=this.root;for(let u of c)d.children[u]||(d.children[u]=new n),d=d.children[u];d.isEndOfWord=!0}search(c){let d=this.root;for(let u of c){if(!d.children[u])return[];d=d.children[u]}return this._findAllWords(d,c)}_findAllWords(c,d){let u=[];c.isEndOfWord&&u.push(d);for(let g in c.children)u=u.concat(this._findAllWords(c.children[g],d+g));return u}}const o=new r;e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:"abcdefghijklmnopqrstuvwxyz".split(""),provideCompletionItems:async(l,c)=>{const d=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});let u=await ti("spelling_data_json");u&&u.forEach(x=>o.insert(x));const g=u?d.split(/\s+/).pop():"";let y;return u?y=o.search(g.toLowerCase()).map(x=>({label:x,kind:e.languages.CompletionItemKind.Text,insertText:x,detail:`Suggested word: ${x}`})):y=[],{suggestions:y}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["\\"],provideCompletionItems:(l,c,d)=>{const u=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});if(xc(e,l,u,c)){const g=Array.from([...Pl,...zl,..._l,...Bl,...ql,...Hl,...Ul,...Jl,...Gl,...Xl,...Ql,...Yl,...tc,...ac,...oc,...ic,...uc,...gc,...fc,...hc,...pc],(w,k)=>({label:`\\${w}`,kind:e.languages.CompletionItemKind.Function,insertText:w,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(w[0])?"1":"0"})),y=Array.from([...Fl,...Nl,...Ol,...Wl,...Kl,...Vl,...nc,...rc,...sc,...mc,...lc,...cc],(w,k)=>({label:`\\${w}`,kind:e.languages.CompletionItemKind.Function,insertText:`${w}{$1}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(w[0])?"1":"0"})),x=Array.from([...jl,...ec,...Zl,...dc],(w,k)=>({label:`\\${w}`,kind:e.languages.CompletionItemKind.Function,insertText:`${w}{$1}{$2}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(w[0])?"1":"0"})),h=[{label:"\\begin",kind:e.languages.CompletionItemKind.Function,insertText:"begin{${1|"+yc.join(",")+`|}}
	$2
\\end{$1}`,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}];return{suggestions:[...g,...y,...x,...h]}}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["^"],provideCompletionItems:(l,c,d)=>{const u=l.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});if(Ec(u))return{suggestions:[{label:"RED",kind:e.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."},{label:"PINK",kind:e.languages.CompletionItemKind.Function,insertText:"PINK",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"PINK..."}]}}}),e.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:async(l,c,d)=>{const u=l.getValueInRange({startLineNumber:c.lineNumber,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column});let y=new Ge().topDirectoryArray;if(Cc(e,l,u)){const x=u.match(/!\[.*?\]\(\.\/([^\/)]+(?:\/[^\/)]+)*)\/?$/);if(u.slice(-2)==="./"&&!x)return{suggestions:s(y,e)};if(console.log(x),x){const w=x[1].split("/");console.log(w);const k=a(y,w);if(k&&k.fileType==="folder"&&k.children)return{suggestions:s(k.children,e)};{const S=w.slice(0,-1),E=w[w.length-1],P=a(y,S);if(P&&P.fileType==="folder"&&P.children)return{suggestions:P.children.filter(D=>D.label.startsWith(E)).map(D=>({label:D.label,kind:D.fileType==="folder"?e.languages.CompletionItemKind.Folder:e.languages.CompletionItemKind.File,insertText:D.label,detail:D.fileType==="folder"?"Folder":"File",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet}))}}}}return{suggestions:[]}}});function a(l,c){if(c.length===0)return{children:l};let d=null,u=[...c];return d=l.find(g=>g.label===u[0]&&g.fileType==="folder"),d?(u.shift(),u.length===0?d:d.children?a(d.children,u):null):null}function s(l,c){return l.map(d=>({label:d.label,kind:d.fileType==="folder"?c.languages.CompletionItemKind.Folder:c.languages.CompletionItemKind.File,insertText:d.label,detail:d.fileType==="folder"?"Folder":"File",insertTextRules:c.languages.CompletionItemInsertTextRule.InsertAsSnippet}))}}function xc(t,e,n,r){return!!(n[n.length-1]==="\\"&&(vn(n)||kc(e,r)))}function Cc(t,e,n,r){const o=/!\[.*?\]\((\.\/[^)]*)$/;return!!n.match(o)}function vn(t){return t.match(/\$\$/g)?t.match(/\$\$/g).length%2===1:!1}function kc(t,e,n){const r=t.getLineContent(e.lineNumber),o=/\$(?!\s)((\\\$|[^\$\n])*?)(?<!\s)\$/g;if(r.match(o)){const a=r,l=window.editor.getPosition().column-1,c=[];let d;for(;(d=o.exec(a))!==null;){const g=d.index+1,y=o.lastIndex-1;c.push({startIndex:g,endIndex:y})}return c.some(g=>l>g.startIndex&&l<=g.endIndex)}else return!1}function Ec(t){return t[t.length-1]==="^"}function Cr(t,e){if(t<=0||e<=0)return"";let n=`
`,r="|";for(let a=0;a<e;a++)r+=`\${${a+1}:}    |`;n+=r+`
`;let o="|";for(let a=0;a<e;a++)o+="--- |";n+=o+`
`;for(let a=1;a<t;a++){let s="|";for(let l=0;l<e;l++)s+=`\${${e+a*e+l+1}:}    |`;n+=s+`
`}return n}function vc(t,e){e.languages.registerDocumentFormattingEditProvider("markdown",{async provideDocumentFormattingEdits(n){let r=n.getValue();var o=t.getPosition();try{const a=await Ue(()=>import("./prettier-8105477d.js").then(c=>c.s),["./prettier-8105477d.js","./@babel-518c05f7.js"],import.meta.url),s=await Ue(()=>import("./prettier-8105477d.js").then(c=>c.m),["./prettier-8105477d.js","./@babel-518c05f7.js"],import.meta.url),l=await a.format(r,{parser:"markdown",plugins:[s.default]});Zr(window.monaco,t,l),t.setPosition(o)}catch(a){console.error("Prettier formatting failed:",a)}return[]}})}function Sc(){const t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;return t/e>=1?"PC":"mobile"}function Tc(t,e){let n,r={posx:50,posy:50};function o(a){Ke({unmemorable:{promptPanelState:!1,selectEndPos:r}})}document.addEventListener("mouseup",a=>{a.clientX,a.clientY,a.target.closest(".prompt-panel-content")||(r={posx:a.clientX,posy:a.clientY},Ke({unmemorable:{mouseUpPos:r}}))}),t.onDidChangeCursorSelection(a=>{const s=t.getSelection();clearTimeout(n),s&&!s.isEmpty()&&(n=setTimeout(()=>{o()},700))}),t.onContextMenu(a=>{bs({posx:a.event.posx,posy:a.event.posy})})}function Ic(t,e){t.onDidFocusEditorWidget(()=>{window._deco.clear()})}function Dc(t){const e=()=>{t(Math.floor(window.innerHeight*.9))};window.addEventListener("resize",e)}function Mc(t,e){const n=Br(()=>{Lc(t)},20);t.onDidScrollChange(n)}function Lc(t,e){if(pe().basic.syncScroll){const n=t.getVisibleRanges();if(n.length>0){const o=n[0].startLineNumber;Rc(o-1)}}}function Rc(t){const e=document.getElementById("view-area");if(!e)return;if(t===0){e.scrollTo({top:0,behavior:"smooth"});return}const n=document.querySelectorAll("#view-area [data-line]");let r=null,o=null,a=1/0,s=1/0,l=null;if(n.forEach(c=>{const u=parseInt(c.getAttribute("data-line")||"0",10)-t;u==0?l=c:(u<0&&Math.abs(u)<a&&(a=Math.abs(u),r=c),u>0&&u<s&&(s=u,o=c))}),l){e.scrollTo({top:l.offsetTop,behavior:"smooth"});return}if(!o){e.scrollTo({top:r.offsetTop,behavior:"smooth"});return}if(r&&o){const c=r.offsetTop,d=o.offsetTop,u=(t-(t-a))/(s+a),g=(d-c)*u+c;e.scrollTo({top:g,behavior:"smooth"})}}function $c(t,e){const n=t.getContainerDomNode();if(!n)return;n.addEventListener("dragover",o=>{o.preventDefault();const a=o.dataTransfer?.types||[];a.includes("text/html")||a.includes("text/plain"),o.dataTransfer.dropEffect="copy"});const r=o=>{o.preventDefault(),o.stopPropagation(),window._setIsDragging(!1),o.dataTransfer.dropEffect="none"};window.addEventListener("dragend",r,!0),n.addEventListener("drop",o=>{if(window._setIsDragging(!1),o.dataTransfer){let a=o.dataTransfer.getData("text/html"),s=!1;if(a)s=!0;else{const c=o.dataTransfer.getData("text/plain");if(c)try{const d=JSON.parse(c);if(d.itemId&&d.path)if(d.fileType==="file")a=`./${d.path}`;else return;else a=c}catch{a=c}}const l=t.getTargetAtClientPoint(o.clientX,o.clientY);if(l&&a){const{position:c}=l;t.executeEdits(null,[{range:new ya(c.lineNumber,c.column,c.lineNumber,c.column),text:a,forceMoveMarkers:!0}]),t.setPosition({lineNumber:c.lineNumber,column:c.column+a.length}),t.focus()}o.dataTransfer.dropEffect="none",console.log("Dropped data:",a,"isImageDrop:",s)}},!0)}Po.config({paths:{vs:"https://cdn.jsdmirror.com/npm/monaco-editor@0.45.0/min/vs"}});const Ac={"index.py":{name:"index.py",language:"python",value:""},"index.js":{name:"index.js",language:"javascript",value:"nihao"},"index.md":{name:"index.md",language:"markdown",value:""}},Fc=Fe(function({setMarkdownViewerWidth:e}){const n=m.useRef(null),[r,o]=i.useState("index.md"),a=Ac[r],[s,l]=m.useState(640),[c,d]=m.useState(800),[u,g]=i.useState(!1),[y,x]=i.useState({fontSize:16,wordWrap:pe().basic.editorAutoWrap?"on":"off",formatOnType:!0,formatOnPaste:!1,stickyScroll:{enabled:!0,defaultModel:"outlineModel",maxLineCount:5},quickSuggestions:!0,fontLigatures:!0,autoSurround:"quotes",autoClosingQuotes:"always",smoothScrolling:!0,codeLens:!1,pasteAs:{enabled:!1,showPasteSelector:"never"},peekWidgetDefaultFocus:"tree",cursorSmoothCaretAnimation:"explicit",colorDecorators:!0,minimap:{enabled:!0},unicodeHighlight:{nonBasicASCII:!1,ambiguousCharacters:!1},dragAndDrop:!0}),h=()=>{document.body.style.userSelect="none",document.body.style.cursor="col-resize"},w=()=>{document.body.style.userSelect="auto",document.body.style.cursor="default"},k=j=>{},S=()=>{g(!0),h(),document.getElementsByClassName("react-resizable-handle")[0].style.backgroundColor="#90caf9"},E=()=>{g(!1),w(),document.getElementsByClassName("react-resizable-handle")[0].style.backgroundColor="",setTimeout(()=>{x(j=>({...j,minimap:{enabled:!0}}))},300)},P=(j,R)=>{const J=document.getElementsByClassName("pdf-preview"),ne=document.getElementById("editor").clientWidth-R.size.width-20+"px";Array.from(J).forEach(Z=>{Z.style.width=ne}),x(Z=>({...Z,minimap:{enabled:!1}})),l(j.x)};function $(j,R){Sc()=="PC"&&l(document.getElementById("editor").clientWidth/2),d(document.getElementById("editor").clientHeight),R.languages.setLanguageConfiguration("markdown",{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/*",close:"*/",notIn:["string"]},{open:"ï¼Ÿ",close:"ï¼Ÿ",notIn:["string","comment"]}]}),R.languages.setMonarchTokensProvider("markdown",{tokenizer:{root:[[/\b(function|return|var)\b/,"keyword"],[/\|\|/,"string"],[/>>/,"string"],[/[{}]/,"delimiter"],[/[a-z_$][\w$]*/,"identifier"],[/"[^"]*"/,"string"],[/\d+/,"number"],[/[$$$$]/,"keyword"]]}}),R.languages.registerFoldingRangeProvider("markdown",{provideFoldingRanges(J,Y,ne){const Z=J.getLineCount(),W=[];let we=!1;for(let re=1;re<=Z;re++){const F=J.getLineContent(re).trim();if(/^```/.test(F)){we=!we;continue}if(!we){const q=/^(#{1,6})\s+/.exec(F);if(q){const X=q[1].length;W.push({level:X,line:re})}}}const ee=[];for(let re=0;re<W.length;re++){const{level:F,line:q}=W[re];let X=Z;for(let _=re+1;_<W.length;_++)if(W[_].level<=F){X=W[_].line-1;break}for(;X>q&&J.getLineContent(X).trim()==="";)X--;X>q&&ee.push({start:q,end:X})}return ee}})}function D(){}function O(j,R){window.editor=j,window.monaco=R,j.onDidChangeModelContent(J=>{if(Ri()){console.log("è·³è¿‡å˜åŒ–äº‹ä»¶ - æ­£åœ¨å†™å…¥Monaco");return}Br(()=>{zi(),xl(2)},150)()}),Gr(["markdownitIncrementalDOM","katex","IncrementalDOM"]).then(()=>{hs(j,R),$(j,R),wl(j),Al(j,R),bc(j,R),vc(j,R),Tc(j),Ic(j),Mc(j),$c(j),Dc(d)})}return m.useEffect(()=>{},[]),m.createElement(m.Fragment,null,m.createElement("div",{ref:n,id:"monaco-editor",style:{width:s,height:"100%"}},m.createElement($n,{sx:{backgroundColor:"transparent",color:"#fff",zIndex:9999},open:u}),m.createElement(Bo,{className:"custom-resizable",width:s,height:c,draggableOpts:{grid:[2,5]},onResizeStart:S,onResizeStop:E,onResize:P,axis:"x"},m.createElement(zo,{className:"monaco-editor-inner",height:"100%",width:s,theme:ge()==="light"?"vs-light":"vs-dark",path:a.name,defaultLanguage:a.language,defaultValue:a.value,onMount:O,onChange:k,options:y,beforeMount:D}))))});function Pc({setMarkdownViewerWidth:t}){return m.createElement(m.Fragment,null,m.createElement(Fc,{setMarkdownViewerWidth:t}))}const zc=m.lazy(()=>Ue(()=>import("./AIPanel-0bf62751.js"),["./AIPanel-0bf62751.js","./react-0d9c9f23.js","./@babel-518c05f7.js","./mobx-react-49086c1a.js","./mobx-890d6d9e.js","./mobx-react-lite-64872c2a.js","./react-dom-b710246a.js","./scheduler-765c72db.js","./use-sync-external-store-3bf5d15d.js","./gsap-cf87e9ff.js","./@mui-06dd8f5f.js","./clsx-29d81c80.js","./@emotion-c98c060d.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-transition-group-5217f7e1.js","./@popperjs-61ffd834.js","./prop-types-c01d55b3.js","./react-is-11039b32.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./i18next-2edfafb0.js","./@dnd-kit-b0134b90.js","./markdown-it-multimd-table-766322c9.js","./markdown-it-github-toc-d2e55c92.js","./uslug-b4eaf0e7.js","./unorm-1228fe77.js","./markdown-it-task-lists-4fbe77b0.js","./markdown-it-emoji-66d1da7f.js","./react-i18next-093df503.js","./@monaco-editor-41149cb1.js","./state-local-dd516420.js","./html2canvas-a81bcda4.js","./react-resizable-44dc0d2e.js","./react-draggable-4a1d91b3.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-953d2d0b.js"],import.meta.url)),_c=m.lazy(()=>Ue(()=>import("./VoiceTrans-a77525f1.js"),["./VoiceTrans-a77525f1.js","./react-0d9c9f23.js","./@babel-518c05f7.js","./mobx-react-49086c1a.js","./mobx-890d6d9e.js","./mobx-react-lite-64872c2a.js","./react-dom-b710246a.js","./scheduler-765c72db.js","./use-sync-external-store-3bf5d15d.js","./@mui-06dd8f5f.js","./clsx-29d81c80.js","./@emotion-c98c060d.js","./hoist-non-react-statics-3f8ebaa8.js","./stylis-79144faa.js","./react-transition-group-5217f7e1.js","./@popperjs-61ffd834.js","./prop-types-c01d55b3.js","./react-is-11039b32.js","./monaco-editor-5cf1114e.js","..\\c42cf3c5.monaco-editor.css","..\\6ae42fb7.style.css","./gsap-cf87e9ff.js","./i18next-2edfafb0.js","./@dnd-kit-b0134b90.js","./markdown-it-multimd-table-766322c9.js","./markdown-it-github-toc-d2e55c92.js","./uslug-b4eaf0e7.js","./unorm-1228fe77.js","./markdown-it-task-lists-4fbe77b0.js","./markdown-it-emoji-66d1da7f.js","./react-i18next-093df503.js","./@monaco-editor-41149cb1.js","./state-local-dd516420.js","./html2canvas-a81bcda4.js","./react-resizable-44dc0d2e.js","./react-draggable-4a1d91b3.js","..\\f65e29ed.react-resizable.css","./i18next-browser-languagedetector-953d2d0b.js"],import.meta.url)),Bc=Fe(function(){const e=m.useRef(null),[n,r]=m.useState("100%");return m.useEffect(()=>{pl()},[]),m.createElement(m.Fragment,null,m.createElement("div",{style:{marginTop:"1.3vh"},id:"bodyTopBox"},m.createElement("div",{id:"editor",className:`${ge()=="light"?"theme-light":"theme-dark"} FLEX ROW`},m.createElement(Pc,{setMarkdownViewerWidth:r}),m.createElement("article",{id:"view-area-hidden",className:"hidden-pre"}),m.createElement("article",{ref:e,id:"view-area",style:{fontFamily:pe().basic.fontFamily,width:n,padding:tt().unmemorable.previewMode?"0px 5px":"26px 38px"},className:`uniform-scroller markdown-body ${ge()==="light"?"markdown-body-light":"markdown-body-dark"}`})),m.createElement(i.Suspense,null,m.createElement(zc,{open:tt().unmemorable.aiPanelState})),m.createElement(i.Suspense,null,m.createElement(_c,{open:tt().unmemorable.voicePanelState}))))});function ca(t){const e=["#7FFFD4","#98D8C8","#6ECEB2","#5BBEA0","#8FD8D2"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]}function da(t){if(!t)return"?";if(/[\u4e00-\u9fa5]/.test(t))return t.charAt(0);const e=t.trim().split(/\s+/);return e.length>=2?(e[0].charAt(0)+e[1].charAt(0)).toUpperCase():t.charAt(0).toUpperCase()}const Nc=Fe(({message:t,themeStyles:e,tempText:n,isLast:r})=>{const{t:o}=ye(),a=ca(t.speaker),s=da(t.speaker),l=e.background==="#1e1e1e";return i.createElement(I,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"flex-start"}},i.createElement(lt,{sx:{bgcolor:a,color:"#000",fontWeight:"bold",width:40,height:40,fontSize:"1rem"}},s),i.createElement(I,{sx:{flex:1,minWidth:0}},i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5}},i.createElement(U,{variant:"body2",sx:{fontWeight:"bold",color:e.color}},t.speaker),i.createElement(U,{variant:"caption",sx:{color:l?"#888":"#666"}},new Date(t.timestamp).toLocaleTimeString("zh-CN"))),i.createElement(nt,{elevation:1,sx:{p:1.5,bgcolor:l?"#2d2d30":"#f5f5f5",color:e.color,borderRadius:2,mb:t.translatedText?1:0}},i.createElement(U,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},t.text,r&&n&&i.createElement("span",{style:{color:l?"#888":"#999",fontStyle:"italic"}},n," ..."))),t.translatedText&&i.createElement(nt,{elevation:1,sx:{p:1.5,bgcolor:l?"#1a3a2e":"#e8f5e9",color:e.color,borderRadius:2,borderLeft:`3px solid ${a}`}},i.createElement(U,{variant:"caption",sx:{color:l?"#7FFFD4":"#2e7d32",fontWeight:"bold",mb:.5,display:"block"}},o("t-ai-meeting-translation")),i.createElement(U,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},t.translatedText))))}),Hc=Fe(({themeStyles:t})=>{const e=xt(),{t:n}=ye(),r=i.useRef(null);return i.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[e.messages.length,e.tempTranscript]),i.createElement(I,{sx:{display:"flex",flexDirection:"column",height:"100%"}},i.createElement(I,{sx:{p:2,background:t.headerBg,borderBottom:`1px solid ${t.divider}`}},i.createElement(U,{variant:"h6",sx:{fontWeight:"bold",fontSize:"1rem"}},n("t-ai-meeting-transcript-title"))),i.createElement(I,{ref:r,className:"uniform-scroller",sx:{flex:1,overflowY:"auto",p:2}},e.messages.length===0&&!e.tempTranscript?i.createElement(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.color,opacity:.5}},i.createElement(U,{variant:"body1"},n("t-ai-meeting-transcript-placeholder"))):i.createElement(i.Fragment,null,e.messages.map((o,a)=>i.createElement(Nc,{key:o.id,message:o,themeStyles:t,tempText:a===e.messages.length-1?e.tempTranscript:void 0,isLast:a===e.messages.length-1})),e.messages.length===0&&e.tempTranscript&&i.createElement(I,{sx:{display:"flex",gap:1.5,mb:2,alignItems:"flex-start"}},i.createElement(lt,{sx:{bgcolor:ca(e.currentSpeaker),color:"#000",fontWeight:"bold",width:40,height:40,fontSize:"1rem"}},da(e.currentSpeaker)),i.createElement(I,{sx:{flex:1,minWidth:0}},i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5}},i.createElement(U,{variant:"body2",sx:{fontWeight:"bold",color:t.color}},e.currentSpeaker),i.createElement(U,{variant:"caption",sx:{color:t.background==="#1e1e1e"?"#888":"#666"}},new Date().toLocaleTimeString("zh-CN"))),i.createElement(nt,{elevation:1,sx:{p:1.5,bgcolor:t.background==="#1e1e1e"?"#2d2d30":"#f5f5f5",color:t.background==="#1e1e1e"?"#888":"#999",borderRadius:2,fontStyle:"italic"}},i.createElement(U,{variant:"body2",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},e.tempTranscript," ...")))))))}),kr="4f0f9e54e52e43faadbf24c9a7754b00.Xon9PmRyJShYVVJ7",Oc="https://open.bigmodel.cn/api/paas/v4/chat/completions";class jc{static token=kr;abortController=null;abortCurrentRequest(){this.abortController&&(this.abortController.abort(),this.abortController=null)}async askAI(e,n,r,o,a,s){const l=()=>s?[{type:"image_url",image_url:{url:s}},{type:"text",text:e}]:e,c={model:s?"GLM-4V-Plus-0111":"GLM-4-flash",tool:"web-search-pro",stream:!0,messages:[{role:"system",content:"ä½ æ˜¯ä¸“ä¸šçš„Markdownå†™ä½œåŠ©æ‰‹ï¼Œæä¾›ç®€æ´å‡†ç¡®çš„å†…å®¹ï¼Œç›´æ¥è¾“å‡ºå¯ç”¨çš„Markdownæ ¼å¼æ–‡æœ¬ï¼Œä¸ç”¨ä»£ç å—åŒ…è£¹ã€‚"},{role:"system",content:"æ ¼å¼è§„èŒƒï¼šæ•°å­¦å…¬å¼ç”¨$åŒ…è£¹ï¼ˆè¡Œå†…ï¼‰æˆ–$$åŒ…è£¹ï¼ˆå—çº§ï¼‰ï¼›å›¾è¡¨ç”¨æ­£ç¡®çš„mermaidè¯­æ³•ï¼›ä¿æŒå±‚æ¬¡æ¸…æ™°ã€‚"},{role:"system",content:n?`ç”¨æˆ·é€‰ä¸­æ–‡æœ¬ï¼š"${n}"ï¼Œè¯·æ ¹æ®è¦æ±‚å¤„ç†æ­¤æ–‡æœ¬ï¼ˆä¿®æ”¹/æ‰©å†™/ä¼˜åŒ–ç­‰ï¼‰ï¼ŒæœªæŒ‡æ˜åˆ™é»˜è®¤ä¼˜åŒ–ã€‚`:"æ ¹æ®ç”¨æˆ·é—®é¢˜æä¾›ç›¸åº”çš„Markdownå†…å®¹ã€‚"},{role:"user",content:l()}]};try{this.abortController=new AbortController;const d=await fetch(Oc,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`${kr}`},body:JSON.stringify(c),signal:this.abortController.signal});if(!d.body)throw new Error("ReadableStream not supported in this browser.");const u=d.body.getReader(),g=new TextDecoder("utf-8");let y=!1,x="";for(;!y;){if(this.abortController.signal.aborted){o(x);return}const{value:h,done:w}=await u.read();if(y=w,h){const S=g.decode(h,{stream:!0}).split(`
`).filter(E=>E.trim()!=="");for(const E of S)if(E.startsWith("data:")){const P=E.replace("data:","").trim();if(P==="[DONE]"){o(x),this.abortController=null;return}try{const O=JSON.parse(P).choices[0].delta?.content;O&&(x+=O,r(O))}catch($){console.error("JSON parse error:",$),a($)}}}}this.abortController=null}catch(d){if(this.abortController=null,d.name==="AbortError"){o("å›ç­”å·²ä¸­æ–­");return}console.error("Error:",d),a(d)}}}const Er=new jc;function vr(t){const{children:e,value:n,index:r,...o}=t;return i.createElement(I,{role:"tabpanel",hidden:n!==r,id:`meeting-tabpanel-${r}`,"aria-labelledby":`meeting-tab-${r}`,sx:{flex:1,display:n===r?"flex":"none",flexDirection:"column",overflow:"hidden",height:"100%"},...o},n===r&&e)}const Wc=Fe(({themeStyles:t})=>{const e=xt(),{t:n}=ye(),[r,o]=i.useState(0),[a,s]=i.useState(""),[l,c]=i.useState(!1),[d,u]=i.useState([]),[g,y]=i.useState(!1),[x,h]=i.useState("ä¼šè®®"),w=t.background==="#1e1e1e",k=async()=>{if(e.messages.length===0){A(n("t-ai-meeting-no-content-to-summarize"),2e3);return}c(!0),s("");try{const O=`è¯·æ€»ç»“ä»¥ä¸‹ä¼šè®®å†…å®¹ï¼Œæç‚¼å‡ºå…³é”®è¦ç‚¹ã€å†³ç­–å’Œè¡ŒåŠ¨é¡¹ã€‚ç”¨æ¸…æ™°çš„Markdownæ ¼å¼è¾“å‡ºï¼ŒåŒ…æ‹¬ï¼š
1. ä¼šè®®æ¦‚è¿°
2. å…³é”®è®¨è®ºç‚¹
3. é‡è¦å†³ç­–
4. å¾…åŠäº‹é¡¹/è¡ŒåŠ¨é¡¹

ä¼šè®®å†…å®¹ï¼š
${e.messages.filter(R=>R.isFinal).map(R=>`${R.speaker}: ${R.text}`).join(`
`)}`;let j="";await Er.askAI(O,"",R=>{j+=R,s(j)},R=>{s(R),e.setMeetingSummary(R),c(!1),A(n("t-ai-meeting-summary-generated"),2e3)},R=>{console.error("ç”Ÿæˆæ€»ç»“å¤±è´¥:",R),A(n("t-ai-meeting-summary-failed"),3e3),c(!1)},"")}catch(D){console.error("ç”Ÿæˆæ€»ç»“å¤±è´¥:",D),A(n("t-ai-meeting-summary-failed"),3e3),c(!1)}},S=()=>{if(!a){A(n("t-ai-meeting-no-summary-to-export"),2e3);return}try{const D=new Date().toLocaleString("zh-CN"),O=`

## ${n("t-ai-meeting-summary-tab")} - ${D}

${a}

`;ot(O,!0),A(n("t-ai-meeting-exported-to-editor"),2e3)}catch(D){console.error("å¯¼å‡ºå¤±è´¥:",D),A(n("t-ai-meeting-export-failed"),3e3)}},E=async()=>{if(!e.currentMeeting){A(n("t-ai-meeting-no-meeting-to-save"),2e3);return}try{await e.autoSaveMeeting(),A(n("t-ai-meeting-saved"),2e3)}catch(D){console.error("ä¿å­˜å¤±è´¥:",D),A(n("t-ai-meeting-save-failed"),3e3)}};i.useEffect(()=>{e.currentMeeting?.summary?s(e.currentMeeting.summary):s("")},[e.currentMeeting?.id,e.currentMeeting?.summary]);const P=async()=>{if(e.messages.length===0){A(n("t-ai-meeting-no-content-to-analyze"),2e3);return}y(!0),u([]);try{const D=e.messages.slice(-20).map(R=>`${R.speaker}: ${R.text}`).join(`
`),O=`ä½œä¸ºæˆ‘çš„å®æ—¶${x}åŠ©æ‰‹ï¼Œè¯·æ ¹æ®ä»¥ä¸‹æœ€è¿‘çš„å¯¹è¯å†…å®¹ï¼Œæä¾›3-5ä¸ªç®€çŸ­çš„å»ºè®®æˆ–å‘è¨€æ€è·¯ã€‚
å»ºè®®åº”åŒ…æ‹¬ï¼š
1. æˆ‘å¯ä»¥æå‡ºçš„é—®é¢˜
2. æˆ‘å¯ä»¥è¡¥å……çš„è§‚ç‚¹
3. éœ€è¦æ³¨æ„çš„æ½œåœ¨é—®é¢˜
è¯·ç›´æ¥åˆ—å‡ºå»ºè®®ç‚¹ï¼Œä¸è¦åºŸè¯ã€‚

æœ€è¿‘å¯¹è¯ï¼š
${D}`;let j="";await Er.askAI(O,"",R=>{j+=R},R=>{const J=R.split(`
`).map(Y=>Y.trim()).filter(Y=>Y.length>0&&(Y.startsWith("-")||Y.startsWith("*")||/^\d+\./.test(Y))).map(Y=>Y.replace(/^[-*\d\.]+\s*/,""));J.length>0?u(J):u([R]),y(!1)},R=>{console.error("ç”Ÿæˆå»ºè®®å¤±è´¥:",R),A(n("t-ai-meeting-summary-failed"),3e3),y(!1)},"")}catch(D){console.error("ç”Ÿæˆå»ºè®®å¤±è´¥:",D),A(n("t-ai-meeting-summary-failed"),3e3),y(!1)}},$=D=>{navigator.clipboard.writeText(D),A(n("t-ai-meeting-copied-to-clipboard"),1e3)};return i.createElement(I,{sx:{display:"flex",flexDirection:"column",height:"100%",bgcolor:t.background}},i.createElement(I,{sx:{borderBottom:1,borderColor:"divider",bgcolor:t.headerBg}},i.createElement(oo,{value:r,onChange:(D,O)=>o(O),textColor:"primary",indicatorColor:"primary",variant:"fullWidth"},i.createElement(Xn,{label:n("t-ai-meeting-summary-tab"),icon:i.createElement(an,{fontSize:"small"}),iconPosition:"start"}),i.createElement(Xn,{label:n("t-ai-meeting-assistant-tab"),icon:i.createElement(on,{fontSize:"small"}),iconPosition:"start"}))),i.createElement(vr,{value:r,index:0},i.createElement(I,{sx:{p:2,display:"flex",gap:1,justifyContent:"flex-end",borderBottom:`1px solid ${t.divider}`}},i.createElement(me,{size:"small",variant:"contained",startIcon:l?i.createElement(Dt,{size:16,color:"inherit"}):i.createElement(an,null),onClick:k,disabled:l||e.messages.length===0},n("t-ai-meeting-generate-summary")),i.createElement(me,{size:"small",variant:"outlined",startIcon:i.createElement(io,null),onClick:S,disabled:!a},n("t-ai-meeting-export")),i.createElement(me,{size:"small",variant:"outlined",startIcon:i.createElement(so,null),onClick:E,disabled:!e.currentMeeting},n("t-ai-meeting-save"))),i.createElement(I,{className:"uniform-scroller",sx:{flex:1,p:2,overflowY:"auto"}},i.createElement(nt,{elevation:0,sx:{p:2,bgcolor:w?"#2d2d30":"#f9f9f9",border:`1px solid ${t.divider}`,minHeight:"100%",display:"flex",flexDirection:"column"}},l?i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center",height:"100%"}},i.createElement(Dt,{size:24}),i.createElement(U,{variant:"body2",sx:{color:t.color}},n("t-ai-meeting-summary-generating"))):a?i.createElement(wt,{multiline:!0,fullWidth:!0,value:a,onChange:D=>s(D.target.value),variant:"standard",InputProps:{disableUnderline:!0,sx:{color:t.color,fontSize:"0.9rem",lineHeight:1.6}}}):i.createElement(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.color,opacity:.7,flexDirection:"column",gap:2}},i.createElement(I,{sx:{p:3,borderRadius:"50%",bgcolor:w?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",display:"flex"}},i.createElement(an,{sx:{fontSize:48,opacity:.8}})),i.createElement(U,{variant:"body1",align:"center",sx:{fontWeight:500}},n("t-ai-meeting-summary-placeholder-title")),i.createElement(U,{variant:"body2",align:"center",sx:{opacity:.7}},n("t-ai-meeting-summary-placeholder-desc")))))),i.createElement(vr,{value:r,index:1},i.createElement(I,{sx:{p:2,borderBottom:`1px solid ${t.divider}`}},i.createElement(I,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"}},[{key:"ä¼šè®®",label:n("t-ai-meeting-context-meeting")},{key:"é¢è¯•",label:n("t-ai-meeting-context-interview")},{key:"è°ˆåˆ¤",label:n("t-ai-meeting-context-negotiation")},{key:"å¤´è„‘é£æš´",label:n("t-ai-meeting-context-brainstorming")}].map(D=>i.createElement(lo,{key:D.key,label:D.label,onClick:()=>h(D.key),color:x===D.key?"primary":"default",variant:x===D.key?"filled":"outlined",size:"small",clickable:!0}))),i.createElement(me,{fullWidth:!0,variant:"contained",startIcon:g?i.createElement(Dt,{size:16,color:"inherit"}):i.createElement(co,null),onClick:P,disabled:g||e.messages.length===0},n("t-ai-meeting-get-suggestions"))),i.createElement(I,{className:"uniform-scroller",sx:{flex:1,p:2,overflowY:"auto"}},g?i.createElement(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"}},i.createElement(Dt,{size:24}),i.createElement(U,{variant:"body2",sx:{ml:2,color:t.color}},n("t-ai-meeting-suggestions-generating"))):d.length>0?i.createElement(An,null,d.map((D,O)=>i.createElement(nt,{key:O,elevation:1,sx:{mb:2,bgcolor:w?"#2d2d30":"#fff",border:`1px solid ${t.divider}`,transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:3}}},i.createElement(st,{alignItems:"flex-start",secondaryAction:i.createElement(le,{edge:"end","aria-label":"copy",onClick:()=>$(D)},i.createElement(uo,{fontSize:"small"}))},i.createElement(mo,{sx:{minWidth:36,mt:.5}},i.createElement(on,{color:"warning",fontSize:"small"})),i.createElement(ct,{primary:i.createElement(U,{variant:"body2",sx:{color:t.color,lineHeight:1.6}},D)}))))):i.createElement(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:t.color,opacity:.7,flexDirection:"column",gap:2}},i.createElement(I,{sx:{p:3,borderRadius:"50%",bgcolor:w?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",display:"flex"}},i.createElement(on,{sx:{fontSize:48,opacity:.8}})),i.createElement(U,{variant:"body1",align:"center",sx:{fontWeight:500}},n("t-ai-meeting-suggestions-placeholder-title")),i.createElement(U,{variant:"body2",align:"center",sx:{opacity:.7}},n("t-ai-meeting-suggestions-placeholder-desc"))))))}),qc="https://trans-mpcjmvtlut.cn-hangzhou.fcapp.run",Sr={"zh-CN":"zh","en-US":"en","ja-JP":"jp","fr-FR":"fra","de-DE":"de","es-ES":"spa","it-IT":"it","ko-KR":"kor","pt-PT":"pt","ru-RU":"ru","th-TH":"th","ar-SA":"ara"};async function Kc(t){try{const{text:e,sourceLang:n="auto",targetLang:r}=t;if(!e||e.trim().length===0)return"";const o=await fetch(qc,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,sourceLang:n,targetLang:r})});if(!o.ok)throw new Error(`äº‘å‡½æ•°è¯·æ±‚å¤±è´¥: ${o.status} ${o.statusText}`);const a=await o.json();if(!a.success||a.error)throw new Error(a.error||"ç¿»è¯‘å¤±è´¥");return a.translatedText||""}catch(e){throw console.error("ç™¾åº¦ç¿»è¯‘é”™è¯¯:",e),e}}async function Tr(t,e,n="auto"){return Kc({text:t,targetLang:e,sourceLang:n})}const Uc=Fe(({themeStyles:t})=>{const e=xt(),{t:n}=ye(),[r,o]=i.useState(null),[a,s]=i.useState(""),l=()=>{if(e.isRecording)r&&(r.recognition.stopRecognition(),o(null)),e.clearTempTranscript(),e.stopRecording(),A(n("t-ai-meeting-recording-stopped"),2e3);else{if(!e.currentMeeting){A(n("t-ai-meeting-please-start-meeting-first"),2e3);return}try{const g=ia(e.sourceLanguage,!0,async(y,x)=>{const h=window._speechData.speechResult;if(h)if(x){e.clearTempTranscript();const w=e.messages.length>0?e.messages[e.messages.length-1]:null;if(w&&w.isFinal&&w.speaker===e.currentSpeaker&&w.text.length<130&&w){const S=w.text+h;if(e.updateFinalMessage(w.id,S),e.enableRealtimeTranslation&&e.targetLanguage)try{const E=Sr[e.sourceLanguage]||"auto",P=await Tr(S,e.targetLanguage,E);e.updateMessageTranslation(w.id,P)}catch(E){console.error("ç¿»è¯‘å¤±è´¥:",E)}}else{const S=`msg_${Date.now()}`,E={id:S,speaker:e.currentSpeaker,text:h,timestamp:Date.now(),isFinal:!0,language:e.sourceLanguage};if(e.addMessage(E),e.enableRealtimeTranslation&&e.targetLanguage)try{const P=Sr[e.sourceLanguage]||"auto",$=await Tr(h,e.targetLanguage,P);e.updateMessageTranslation(S,$)}catch(P){console.error("ç¿»è¯‘å¤±è´¥:",P)}}}else e.setTempTranscript(h)});o(g),e.startRecording(),A(n("t-ai-meeting-recording-started"),2e3)}catch(g){console.error("å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥:",g),A(n("t-ai-meeting-recognition-failed"),3e3)}}},c=async()=>{await e.startNewMeeting(e.sourceLanguage,e.targetLanguage,a.trim()),s(""),A(n("t-ai-meeting-meeting-created"),2e3),setTimeout(()=>{l()},300)},d=async()=>{r&&(r.recognition.stopRecognition(),o(null)),await e.endMeeting(),A(n("t-ai-meeting-meeting-ended"),2e3)},u=()=>{e.displayHistory()};return i.createElement(I,{sx:{p:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",background:t.background}},i.createElement(me,{variant:"contained",color:"primary",onClick:c,disabled:!!e.currentMeeting&&!e.currentMeeting.endTime},n("t-ai-meeting-new-meeting")),i.createElement(wt,{size:"small",label:n("t-ai-meeting-meeting-name"),value:a,onChange:g=>s(g.target.value),placeholder:n("t-ai-meeting-meeting-name-placeholder"),disabled:!!e.currentMeeting&&!e.currentMeeting.endTime,sx:{width:200},onKeyPress:g=>{g.key==="Enter"&&(!e.currentMeeting||e.currentMeeting.endTime)&&c()}}),i.createElement(me,{variant:"outlined",color:"secondary",onClick:d,disabled:!e.currentMeeting||!!e.currentMeeting.endTime},n("t-ai-meeting-end-meeting")),i.createElement(Ie,{title:e.isRecording?n("t-ai-meeting-stop-recording"):n("t-ai-meeting-start-recording")},i.createElement(le,{onClick:l,disabled:!e.currentMeeting||!!e.currentMeeting.endTime,sx:{bgcolor:e.isRecording?"error.main":"primary.main",color:"white","&:hover":{bgcolor:e.isRecording?"error.dark":"primary.dark"}}},e.isRecording?i.createElement(Pr,null):i.createElement(go,null))),i.createElement(Ie,{title:n("t-ai-meeting-history")},i.createElement(le,{onClick:u},i.createElement(fo,null))),i.createElement(I,{sx:{flex:1}}),i.createElement(wt,{size:"small",label:n("t-ai-meeting-speaker"),value:e.currentSpeaker,onChange:g=>e.setSpeaker(g.target.value),disabled:e.isRecording,sx:{width:120},InputProps:{startAdornment:i.createElement(ho,{sx:{mr:.5,fontSize:18}})}}),i.createElement(Yn,{size:"small",sx:{minWidth:120}},i.createElement(Zn,null,n("t-ai-meeting-source-language")),i.createElement(Qn,{value:e.sourceLanguage,label:n("t-ai-meeting-source-language"),onChange:g=>e.setSourceLanguage(g.target.value),disabled:e.isRecording},hl.map(([g,y])=>i.createElement(Re,{key:g,value:g},y)))),i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},i.createElement(po,{sx:{fontSize:20,opacity:.7}}),i.createElement(Qr,{checked:e.enableRealtimeTranslation,onChange:()=>e.toggleRealtimeTranslation()})),i.createElement(Yn,{size:"small",sx:{minWidth:120}},i.createElement(Zn,null,n("t-ai-meeting-translate-to")),i.createElement(Qn,{value:e.targetLanguage,label:n("t-ai-meeting-translate-to"),onChange:g=>e.setTargetLanguage(g.target.value),disabled:!e.enableRealtimeTranslation},i.createElement(Re,{value:"zh"},"ä¸­æ–‡"),i.createElement(Re,{value:"en"},"English"),i.createElement(Re,{value:"jp"},"æ—¥æœ¬èª"),i.createElement(Re,{value:"fra"},"FranÃ§ais"),i.createElement(Re,{value:"de"},"Deutsch"),i.createElement(Re,{value:"spa"},"EspaÃ±ol"),i.createElement(Re,{value:"it"},"Italiano"),i.createElement(Re,{value:"kor"},"í•œå›½ì–´"),i.createElement(Re,{value:"pt"},"PortuguÃªs"),i.createElement(Re,{value:"ru"},"Ğ ÑƒÑÑĞºĞ¸Ğ¹"),i.createElement(Re,{value:"th"},"à¹„à¸—à¸¢"),i.createElement(Re,{value:"ara"},"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))))}),Vc=Fe(()=>{const t=xt(),{t:e}=ye(),[n,r]=i.useState({width:window.innerWidth*.8,height:window.innerHeight*.9}),[o,a]=i.useState({x:window.innerWidth*.1,y:window.innerHeight*.05}),[s,l]=i.useState(!1),[c,d]=i.useState(!1),[u,g]=i.useState(!1),y=i.useRef({offsetX:0,offsetY:0}),x=ge()==="dark",h={background:x?"#1e1e1e":"#ffffff",color:x?"#d8d8d8":"#000000",border:x?"1px solid #404040":"1px solid #e0e0e0",headerBg:x?"#2d2d30":"#f5f5f5",divider:x?"#404040":"#e0e0e0"},w=()=>{t.hidden()},k=$=>{s||(d(!0),y.current={offsetX:$.clientX-o.x,offsetY:$.clientY-o.y})},S=$=>{if(!c)return;const D=window.innerWidth-n.width,O=window.innerHeight-n.height,j=Math.max(0,Math.min(D,$.clientX-y.current.offsetX)),R=Math.max(0,Math.min(O,$.clientY-y.current.offsetY));a({x:j,y:R})},E=()=>{d(!1)};i.useEffect(()=>{if(c)return document.addEventListener("mousemove",S),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E)}},[c,n]);const P=()=>{l(!s)};return i.createElement(bt,{hideBackdrop:!1,fullScreen:!1,maxWidth:!1,open:t.displayState,onClose:w,PaperProps:{style:{position:"fixed",left:s?0:o.x,top:s?0:o.y,width:s?"100vw":n.width,height:s?"100vh":n.height,margin:0,maxWidth:"none",maxHeight:"none",background:h.background,boxShadow:"0 8px 16px rgba(0, 0, 0, 0.3)",overflow:"hidden",transition:c||u?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}}},i.createElement(I,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative"}},i.createElement(I,{onMouseDown:k,sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",background:h.headerBg,borderBottom:`1px solid ${h.divider}`,cursor:c?"grabbing":s?"default":"grab",userSelect:"none"}},i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1}},i.createElement(_r,{sx:{fontSize:28}}),i.createElement(U,{variant:"h6",sx:{fontWeight:"bold"}},e("t-ai-meeting-title"))),i.createElement(I,{sx:{display:"flex",gap:.5,position:"relative",zIndex:1e3}},i.createElement(le,{onClick:P,size:"small"},i.createElement(yo,{fontSize:"small"})),i.createElement(le,{onClick:w,size:"small"},i.createElement(Ut,{fontSize:"small"})))),i.createElement(Uc,{themeStyles:h}),i.createElement(Kt,{sx:{bgcolor:h.divider}}),i.createElement(I,{sx:{flex:1,display:"flex",overflow:"hidden",gap:1,p:2}},i.createElement(I,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",border:`1px solid ${h.divider}`,borderRadius:1}},i.createElement(Hc,{themeStyles:h})),i.createElement(I,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",border:`1px solid ${h.divider}`,borderRadius:1}},i.createElement(Wc,{themeStyles:h}))),(c||u)&&i.createElement(I,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:999,cursor:c?"grabbing":"default",background:"transparent"}}),!s&&i.createElement(i.Fragment,null,i.createElement(I,{sx:{position:"absolute",right:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:$=>{$.preventDefault(),g(!0);const D=$.clientX,O=n.width,j=J=>{const Y=Math.max(600,Math.min(window.innerWidth,O+(J.clientX-D)));r(ne=>({...ne,width:Y}))},R=()=>{g(!1),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",R)}}),i.createElement(I,{sx:{position:"absolute",bottom:-8,left:0,width:"100%",height:16,cursor:"ns-resize",zIndex:1e3},onMouseDown:$=>{$.preventDefault(),g(!0);const D=$.clientY,O=n.height,j=J=>{const Y=Math.max(400,Math.min(window.innerHeight,O+(J.clientY-D)));r(ne=>({...ne,height:Y}))},R=()=>{g(!1),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",R)}}),i.createElement(I,{sx:{position:"absolute",bottom:-8,right:-8,width:20,height:20,cursor:"nwse-resize",zIndex:1001},onMouseDown:$=>{$.preventDefault(),g(!0);const D=$.clientX,O=$.clientY,j=n.width,R=n.height,J=ne=>{const Z=Math.max(600,Math.min(window.innerWidth,j+(ne.clientX-D))),W=Math.max(400,Math.min(window.innerHeight,R+(ne.clientY-O)));r({width:Z,height:W})},Y=()=>{g(!1),document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",Y)};document.addEventListener("mousemove",J),document.addEventListener("mouseup",Y)}}))))}),Jc="MarkdownOL_Meeting",Gc=1,Ae="meetings";function zt(){return new Promise((t,e)=>{const n=indexedDB.open(Jc,Gc);n.onerror=()=>{e(new Error("æ— æ³•æ‰“å¼€ä¼šè®®æ•°æ®åº“"))},n.onsuccess=()=>{t(n.result)},n.onupgradeneeded=r=>{const o=r.target.result;if(!o.objectStoreNames.contains(Ae)){const a=o.createObjectStore(Ae,{keyPath:"id"});a.createIndex("startTime","startTime",{unique:!1}),a.createIndex("title","title",{unique:!1})}}})}async function Nn(t){try{const e=await zt(),n=e.transaction([Ae],"readwrite"),r=n.objectStore(Ae);return new Promise((o,a)=>{const s=r.put(t);s.onsuccess=()=>{o()},s.onerror=()=>{a(new Error("ä¿å­˜ä¼šè®®è®°å½•å¤±è´¥"))},n.oncomplete=()=>{e.close()}})}catch(e){throw console.error("ä¿å­˜ä¼šè®®è®°å½•é”™è¯¯:",e),e}}async function nn(){try{const t=await zt(),e=t.transaction([Ae],"readonly"),n=e.objectStore(Ae);return new Promise((r,o)=>{const a=n.getAll();a.onsuccess=()=>{const s=a.result;s.sort((l,c)=>c.startTime-l.startTime),r(s)},a.onerror=()=>{o(new Error("è·å–ä¼šè®®è®°å½•å¤±è´¥"))},e.oncomplete=()=>{t.close()}})}catch(t){throw console.error("è·å–ä¼šè®®è®°å½•é”™è¯¯:",t),t}}async function ua(t){try{const e=await zt(),n=e.transaction([Ae],"readonly"),r=n.objectStore(Ae);return new Promise((o,a)=>{const s=r.get(t);s.onsuccess=()=>{o(s.result||null)},s.onerror=()=>{a(new Error("è·å–ä¼šè®®è®°å½•å¤±è´¥"))},n.oncomplete=()=>{e.close()}})}catch(e){throw console.error("è·å–ä¼šè®®è®°å½•é”™è¯¯:",e),e}}async function Hn(t){try{const e=await zt(),n=e.transaction([Ae],"readwrite"),r=n.objectStore(Ae);return new Promise((o,a)=>{const s=r.delete(t);s.onsuccess=()=>{o()},s.onerror=()=>{a(new Error("åˆ é™¤ä¼šè®®è®°å½•å¤±è´¥"))},n.oncomplete=()=>{e.close()}})}catch(e){throw console.error("åˆ é™¤ä¼šè®®è®°å½•é”™è¯¯:",e),e}}async function ma(t){return Nn(t)}async function ga(){try{const t=await zt(),e=t.transaction([Ae],"readwrite"),n=e.objectStore(Ae);return new Promise((r,o)=>{const a=n.clear();a.onsuccess=()=>{r()},a.onerror=()=>{o(new Error("æ¸…ç©ºä¼šè®®è®°å½•å¤±è´¥"))},e.oncomplete=()=>{t.close()}})}catch(t){throw console.error("æ¸…ç©ºä¼šè®®è®°å½•é”™è¯¯:",t),t}}async function On(t){try{const e=await nn(),n=t.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(n)||r.summary?.toLowerCase().includes(n)||r.messages.some(o=>o.text.toLowerCase().includes(n)))}catch(e){throw console.error("æœç´¢ä¼šè®®è®°å½•é”™è¯¯:",e),e}}const Xc={saveMeetingRecord:Nn,getAllMeetingRecords:nn,getMeetingRecordById:ua,deleteMeetingRecord:Hn,updateMeetingRecord:ma,clearAllMeetingRecords:ga,searchMeetingRecords:On},Yc=Object.freeze(Object.defineProperty({__proto__:null,clearAllMeetingRecords:ga,default:Xc,deleteMeetingRecord:Hn,getAllMeetingRecords:nn,getMeetingRecordById:ua,saveMeetingRecord:Nn,searchMeetingRecords:On,updateMeetingRecord:ma},Symbol.toStringTag,{value:"Module"})),Zc=Fe(()=>{const t=xt(),[e,n]=i.useState([]),[r,o]=i.useState(""),[a,s]=i.useState(!1),l=ge()==="dark",c={background:l?"#1e1e1e":"#ffffff",color:l?"#d8d8d8":"#000000",border:l?"1px solid #404040":"1px solid #e0e0e0",headerBg:l?"#2d2d30":"#f5f5f5",divider:l?"#404040":"#e0e0e0",itemHover:l?"#2d2d30":"#f5f5f5"},d=async()=>{s(!0);try{const h=await nn();n(h)}catch(h){console.error("åŠ è½½ä¼šè®®è®°å½•å¤±è´¥:",h),A("åŠ è½½ä¼šè®®è®°å½•å¤±è´¥",3e3)}finally{s(!1)}},u=async()=>{if(!r.trim()){d();return}s(!0);try{const h=await On(r);n(h)}catch(h){console.error("æœç´¢å¤±è´¥:",h),A("æœç´¢å¤±è´¥",3e3)}finally{s(!1)}},g=h=>{t.loadMeeting(h),t.hiddenHistory(),A("å·²åŠ è½½ä¼šè®®è®°å½•",2e3)},y=async(h,w)=>{if(h.stopPropagation(),!!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡ä¼šè®®è®°å½•å—ï¼Ÿ"))try{await Hn(w),A("å·²åˆ é™¤ä¼šè®®è®°å½•",2e3),d()}catch(k){console.error("åˆ é™¤å¤±è´¥:",k),A("åˆ é™¤å¤±è´¥",3e3)}},x=h=>{if(!h.endTime)return"è¿›è¡Œä¸­";const w=h.endTime-h.startTime,k=Math.floor(w/6e4),S=Math.floor(k/60);return S>0?`${S}å°æ—¶${k%60}åˆ†é’Ÿ`:`${k}åˆ†é’Ÿ`};return i.useEffect(()=>{t.historyDisplayState&&d()},[t.historyDisplayState]),i.createElement(bt,{open:t.historyDisplayState,onClose:()=>t.hiddenHistory(),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:c.background,color:c.color,minHeight:"70vh"}}},i.createElement(I,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",background:c.headerBg,borderBottom:`1px solid ${c.divider}`}},i.createElement(U,{variant:"h6",sx:{fontWeight:"bold"}},"ğŸ“š ä¼šè®®å†å²è®°å½•"),i.createElement(le,{onClick:()=>t.hiddenHistory(),size:"small"},i.createElement(Ut,null))),i.createElement(I,{sx:{p:2}},i.createElement(wt,{fullWidth:!0,size:"small",placeholder:"æœç´¢ä¼šè®®æ ‡é¢˜ã€å†…å®¹æˆ–æ€»ç»“...",value:r,onChange:h=>o(h.target.value),onKeyPress:h=>{h.key==="Enter"&&u()},InputProps:{startAdornment:i.createElement(er,{position:"start"},i.createElement(wo,null)),endAdornment:r&&i.createElement(er,{position:"end"},i.createElement(le,{size:"small",onClick:()=>{o(""),d()}},i.createElement(Ut,{fontSize:"small"})))}})),i.createElement(Kt,{sx:{bgcolor:c.divider}}),i.createElement(I,{sx:{flex:1,overflowY:"auto",minHeight:"400px","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:c.background},"&::-webkit-scrollbar-thumb":{background:c.divider,borderRadius:"4px"}}},a?i.createElement(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px"}},i.createElement(U,{variant:"body2",sx:{color:c.color}},"åŠ è½½ä¸­...")):e.length===0?i.createElement(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:c.color,opacity:.5}},i.createElement(U,{variant:"body1"},r?"æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¼šè®®":"è¿˜æ²¡æœ‰ä¼šè®®è®°å½•")):i.createElement(An,{sx:{p:0}},e.map((h,w)=>i.createElement(i.Fragment,{key:h.id},i.createElement(st,{disablePadding:!0,secondaryAction:i.createElement(le,{edge:"end",onClick:k=>y(k,h.id),sx:{color:"error.main"}},i.createElement(Ln,null))},i.createElement(It,{onClick:()=>g(h),sx:{"&:hover":{bgcolor:c.itemHover}}},i.createElement(ct,{primary:i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5}},i.createElement(U,{variant:"subtitle1",sx:{fontWeight:"bold"}},h.title),!h.endTime&&i.createElement(U,{variant:"caption",sx:{bgcolor:"success.main",color:"white",px:1,py:.25,borderRadius:1}},"è¿›è¡Œä¸­")),secondary:i.createElement(I,{sx:{mt:.5}},i.createElement(I,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5}},i.createElement(bo,{sx:{fontSize:14,opacity:.6}}),i.createElement(U,{variant:"caption",sx:{opacity:.8}},new Date(h.startTime).toLocaleString("zh-CN")),i.createElement(U,{variant:"caption",sx:{opacity:.6,mx:.5}},"â€¢"),i.createElement(U,{variant:"caption",sx:{opacity:.8}},x(h)),i.createElement(U,{variant:"caption",sx:{opacity:.6,mx:.5}},"â€¢"),i.createElement(U,{variant:"caption",sx:{opacity:.8}},h.messages.length," æ¡æ¶ˆæ¯")),h.summary&&i.createElement(U,{variant:"caption",sx:{display:"block",opacity:.7,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},"æ€»ç»“: ",h.summary.substring(0,100),"..."))}))),w<e.length-1&&i.createElement(Kt,{sx:{bgcolor:c.divider}}))))),i.createElement(I,{sx:{p:2,borderTop:`1px solid ${c.divider}`,display:"flex",justifyContent:"flex-end"}},i.createElement(me,{onClick:()=>t.hiddenHistory(),variant:"outlined"},"å…³é—­")))}),Qc=(await ke("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,ed=()=>{Qc.addStyle(`
::selection {
border-radius: 5px;
background-color: ${ge()==="light"?"#add6ff":"#636363"};
}

    `)},fa={zIndex:{drawer:1300,modal:1200,appBar:1200}},td=Sn({...fa,palette:{primary:{main:bn[200],contrastText:"#fff378"},secondary:{main:"#EEEEEE",contrastText:"#ffc0cb"},info:{main:bn[200],contrastText:"#8B8A8A"},mode:"light"}}),nd=Sn({...fa,palette:{primary:{main:bn[400],contrastText:"#f5deb3"},secondary:{main:tr[700],contrastText:"#f5deb3"},info:{main:tr[600],contrastText:"#8B8A8A"},mode:"dark"}}),rd=Fe(()=>(m.useEffect(()=>{ed()},[]),m.createElement(m.Fragment,null,m.createElement(Mr,{theme:ge()==="light"?td:nd},m.createElement(zr,null),m.createElement(I,{className:"FLEX COL App-top"},m.createElement(gl,null),m.createElement(Bc,null),m.createElement($n,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:tt().unmemorable.loading,onClick:()=>{Ke({unmemorable:{loading:!1}})}},m.createElement(Dt,{color:"inherit"}))),m.createElement(Vc,null),m.createElement(Zc,null))))),ad={en:{translation:{"t-more":"More","t-about":"Help","t-home":"Home","t-image-manager":"Image Manager","t-file-manager":"File Manager","t-file-manager-open-file":"Open File ","t-file-manager-open-folder":"Open Folder ","t-file-manager-saveAs":"Save As","t-file-manager-pinned":"Pinned!","t-file-manager-syncLocal":"Sync File To Local","t-export":"Export","t-share":"Share (Dev)","t-collaborative-office":"Realtime Office","t-settings":"Settings","t-more-coming-soon":"More (Coming Soon)","t-export-pdf":"Export as PDF","t-export-image":"Export as Image (Beta1.0)","t-export-markdown":"Export as Markdown","t-basic-settings":"Basic Settings","t-theme-settings":"Theme Settings","t-language-settings":"Language Settings","t-editor-settings":"Editor Settings","t-speech-to-text":"Speech to Text","t-advanced-settings":"Advanced Settings","t-export-settings":"Export Settings","t-mermaid-settings":"Mermaid Settings","t-image-settings":"Image Settings","t-reset-initialization":"Reset & Initialization","t-basic-settings-title":"Basic Settings","t-advanced-settings-title":"Advanced Settings (Under Construction)","t-theme-description":"Change editor theme","t-language-description":"Change editor language","t-editor-settings-title":"Editor Settings","t-font-size-description":"Change rendered text font size","t-font-family-description":"Change rendered text font","t-sync-scroll-description":"Sync scrolling between left editor and preview area","t-auto-wrap-description":"Enable editor auto line wrap","t-speech-language-description":"Select speech-to-text recognition language","t-export-settings-description":"Change export settings (under construction)","t-mermaid-theme-description":"Mermaid flowchart theme","t-image-settings-title":"Image Settings","t-image-storage-preference":"Image Storage Mode Preference (Pasting)","t-image-storage-description":"Choose to prioritize storing pasted images in browser/folder","t-image-storage-folder":"Local Folder (Prefer In Local Folder)","t-image-storage-browser":"Browser (Prefer In Browser)","t-default-image-style":"Default Image Style","t-default-image-style-description":"Default image style, size, position etc. w=width, c=center, s=shadow","t-basic-style":"Basic Style","t-default-stored-path":"Default Stored Path","t-default-stored-path-description":"Default path for pasted image uploads. If set to 'images', images will be uploaded to an 'images' folder in the root directory. If empty, defaults to 'images' folder","t-image-store-path":"Image Storage Path","t-reset-settings-title":"Reset & Initialization Settings","t-reset-data-description":"Clear all saved text data, including images, settings, cache and restore to initial state","t-reset-button":"Reset All Data","t-reset-success":"Data cleared successfully, page will refresh in 3 seconds to complete reset...","t-reset-warning":"Some data has been cleared, page will refresh to complete reset","t-reset-confirm-title":"âš ï¸ Confirm Reset All Data","t-reset-confirm-description":"This operation will <strong>permanently delete</strong> the following data:","t-reset-confirm-list":"â€¢ All saved drafts and images<br/>â€¢ User settings and preferences<br/>â€¢ Browser cache","t-reset-confirm-warning":"âš ï¸ This operation cannot be undone, please ensure you have backed up important data!","t-cancel":"Cancel","t-confirm-reset":"Confirm Reset","t-chinese":"Chinese","t-english":"English","t-default":"Default","t-on":"On","t-off":"Off","t-image-manager-title":"Image Manager","t-image-manager-tooltip-title":"Manage pasted and uploaded images","t-image-manager-tooltip-ctrl-click":"Hold Ctrl and click image to insert","t-image-manager-tooltip-double-click":"Double-click image to preview","t-image-manager-tooltip-alt-click":"Hold Alt and click image to copy","t-image-manager-tooltip-delete-all":"Delete all images and stored text","t-image-manager-tooltip-delete-single":"Delete this image","t-image-manager-delete-all-title":"Ready to delete all the images?","t-image-manager-delete-all-content":"Once you have clicked the 'yes' button, all your pictures  will be deleted!","t-image-manager-confirm-yes":"YES","t-image-manager-confirm-no":"NO","t-image-manager-no-images-title":"No Images","t-image-manager-no-images-description":"Please paste images into the editor, and they will be automatically saved here","t-lab-title":"Frontend Lab","t-lab-card-spelling-association-title":"Spelling Association","t-lab-card-spelling-association-desc":"Spelling completion (English only)","t-lab-card-spelling-check-title":"Spelling Check","t-lab-card-spelling-check-desc":"Spell checking, insufficient funds, let's not use it!","t-lab-button-install":"Install","t-lab-button-uninstall":"Uninstall","t-lab-button-enable":"Enable","t-lab-button-disable":"Disable","t-lab-install-success":"Dictionary installed successfully!","t-file-manager-new-file":"New File","t-file-manager-new-folder":"New Folder","t-file-manager-rename":"Rename","t-file-manager-delete":"Delete","t-file-manager-move":"Move","t-file-manager-copy":"Copy","t-file-manager-empty-folder":"This folder is empty","t-file-manager-empty-folder-desc":"Right-click to create new files or folders","t-file-manager-confirm-delete":"Confirm Delete","t-file-manager-confirm-delete-file":"Are you sure you want to delete '{{name}}'?","t-file-manager-confirm-delete-folder":"Are you sure you want to delete folder '{{name}}' and all its contents?","t-file-manager-new-file-name":"Enter file name","t-file-manager-new-folder-name":"Enter folder name","t-file-manager-rename-name":"Enter new name","t-file-manager-create-success":"Created successfully!","t-file-manager-delete-success":"Deleted successfully!","t-file-manager-rename-success":"Renamed successfully!","t-file-manager-operation-failed":"Operation failed","t-file-manager-open-success":"Successfully opened","t-file-manager-move-success":"Moved successfully!","t-file-manager-invalid-move":"Cannot move parent folder into child folder","t-file-manager-already-in-root":"File is already in root directory","t-file-manager-loading":"Loading...","t-file-manager-load-more":"Click to load more","t-file-format-not-supported":"File format '.{{extension}}' is not supported","t-ai-meeting-button":"AI Meeting","t-ai-meeting-title":"AI Meeting - Real-time Transcription & Translation & Minutes","t-ai-meeting-new-meeting":"New Meeting","t-ai-meeting-end-meeting":"End Meeting","t-ai-meeting-meeting-name":"Meeting Name (Optional)","t-ai-meeting-meeting-name-placeholder":"Leave blank for auto-generation","t-ai-meeting-speaker":"Speaker","t-ai-meeting-source-language":"Source Language","t-ai-meeting-translate-to":"Translate To","t-ai-meeting-start-recording":"Start Recording","t-ai-meeting-stop-recording":"Stop Recording","t-ai-meeting-history":"History","t-ai-meeting-transcript-title":"ğŸ“ Meeting Transcript & Translation","t-ai-meeting-transcript-placeholder":"Click the microphone button to start recording, real-time transcription and translation will be displayed here","t-ai-meeting-summary-tab":"Meeting Summary","t-ai-meeting-assistant-tab":"Real-time Assistant","t-ai-meeting-generate-summary":"Generate Summary","t-ai-meeting-export":"Export","t-ai-meeting-save":"Save","t-ai-meeting-summary-placeholder-title":"Click 'Generate Summary' button above","t-ai-meeting-summary-placeholder-desc":"AI will extract key points from the meeting","t-ai-meeting-summary-generating":"Analyzing meeting content...","t-ai-meeting-get-suggestions":"Get Real-time Suggestions / Speaking Ideas","t-ai-meeting-suggestions-placeholder-title":"Select a scenario and click 'Get Suggestions'","t-ai-meeting-suggestions-placeholder-desc":"AI will provide speaking ideas based on recent conversation","t-ai-meeting-suggestions-generating":"Thinking...","t-ai-meeting-context-meeting":"Meeting","t-ai-meeting-context-interview":"Interview","t-ai-meeting-context-negotiation":"Negotiation","t-ai-meeting-context-brainstorming":"Brainstorming","t-ai-meeting-translation":"Translation","t-ai-meeting-no-content-to-summarize":"No meeting content to summarize","t-ai-meeting-no-content-to-analyze":"No meeting content to analyze","t-ai-meeting-no-summary-to-export":"No summary content to export","t-ai-meeting-no-meeting-to-save":"No meeting record to save","t-ai-meeting-summary-generated":"Meeting summary generated","t-ai-meeting-summary-failed":"Failed to generate summary","t-ai-meeting-exported-to-editor":"Exported to editor","t-ai-meeting-export-failed":"Export failed","t-ai-meeting-saved":"Meeting record saved","t-ai-meeting-save-failed":"Save failed","t-ai-meeting-copied-to-clipboard":"Copied to clipboard","t-ai-meeting-recording-stopped":"Recording stopped","t-ai-meeting-please-start-meeting-first":"Please start a new meeting first","t-ai-meeting-recording-started":"Recording started...","t-ai-meeting-recognition-failed":"Speech recognition failed","t-ai-meeting-meeting-created":"New meeting created, starting recording...","t-ai-meeting-meeting-ended":"Meeting ended and saved","t-preview-mode-error":"Preview mode is enabled, can't save. Open another file!","t-save-success-local":"Saved locally! ğŸ‰","t-save-success-browser-no-local":"Saved to browser! ğŸ‰ (No local file opened)","t-save-success-browser":"Saved to browser! ğŸ‰","t-rejection-error":"How dare you refuse me.","t-updated-to-latest-version":"Updated to the latest version","t-current-version":"Current version: {{version}}","t-new-features-current-version":"New features in the current version","t-no-file-selected":"Looking around, living in a fantasy?","t-opening-file":"Opening local file, hold on a bit ğŸ˜…","t-error-opening-file":"An error occurred ğŸ¤£","t-error-opening-folder":"Failed to open folder","t-update-notification-do-not-show-again":"Don't show again","directory.preface.title":"Preface","directory.basic.title":"1. Basic Operations Guide","directory.basic.paragraph":"Paragraphs","directory.basic.lineBreak":"Line Breaks","directory.basic.bold":"Bold","directory.basic.italic":"Italic","directory.basic.center":"Center Alignment","directory.basic.customText":"Custom Text","directory.basic.exportPdf":"Export PDF","directory.advanced.title":"2. Advanced Features Guide","directory.advanced.speechToText":"Speech to Text","directory.advanced.aiAssistant":"âœ¨AI Smart Assistant","directory.advanced.autoFormat":"Auto Formatting","directory.advanced.fileManager":"File Manager","directory.advanced.imageUpload":"Image Upload","directory.advanced.syncScroll":"Synchronized Scrolling","directory.advanced.emojiMarket":"Emoji Market","directory.advanced.collaboration":"Collaborative Office","directory.advanced.tableBuilder":"Table Builder","directory.advanced.mindMap":"Mind Maps","directory.advanced.doubleClick":"Double-click Positioning","directory.smart.title":"3. Smart Features Guide","directory.smart.latex":"LaTeX Math Formulas","directory.smart.autoComplete":"Smart Suggestions","directory.smart.settings":"Settings Interface",featuresList:{startExperience:{title:"Start Experience",description:"Click to start and explore more features."},smartEditor:{title:`Markdown
Plus AI`,description:"A smart, dual-pane editor with live scrolling preview, integrated with smart completions and comprehensive shortcuts. Press Ctrl+J to summon the GPT-4 assistant, enhancing your creativity."},codeDisplay:{title:`Mind Maps
All-Inclusive`,description:"Supports syntax highlighting for over 30 programming languages and offers Mermaid flowcharts and mind maps in various themes, adding vibrance to your creation."},multiDeviceSync:{title:`Advanced
File System`,description:"A clear folder directory, one-click sync to local files, and easy clipboard image pasting, freeing your creative worries."},flexibleExport:{title:`Flexible
Export Options`,description:"Export effortlessly in formats like PDF, Markdown, and JPG, making content management a breeze."}}}},zh:{translation:{"t-more":"æ›´å¤š","t-about":"å¸®åŠ©","t-home":"é¦–é¡µ","t-image-manager":"å›¾ç‰‡ç®¡ç†å™¨ (æµè§ˆå™¨)","t-file-manager":"æ–‡ä»¶ç®¡ç†å™¨âœ¨","t-file-manager-open-file":"æ‰“å¼€æ–‡ä»¶ ","t-file-manager-open-folder":"æ‰“å¼€æ–‡ä»¶å¤¹ ","t-file-manager-saveAs":"å¦å­˜ä¸º ","t-file-manager-pinned":"å›ºå®šï¼","t-file-manager-syncLocal":"åŒæ­¥æœ¬åœ°ç¼–è¾‘","t-export":"å¯¼å‡º","t-share":"åˆ†äº« (å¼€å‘ä¸­)","t-collaborative-office":"ååŒåŠå…¬ (å¼€å‘ä¸­)","t-settings":"è®¾ç½®","t-more-coming-soon":"æ›´å¤š (æ•¬è¯·æœŸå¾…)","t-export-pdf":"å¯¼å‡ºä¸º PDF","t-export-image":"å¯¼å‡ºä¸ºå›¾ç‰‡ (Beta1.0)","t-export-markdown":"å¯¼å‡ºä¸º Markdown","t-basic-settings":"åŸºç¡€è®¾ç½®","t-theme-settings":"ä¸»é¢˜è®¾ç½®","t-language-settings":"è¯­è¨€è®¾ç½®","t-editor-settings":"ç¼–è¾‘å™¨è®¾ç½®","t-speech-to-text":"è¯­éŸ³è½¬æ–‡å­—","t-advanced-settings":"é«˜çº§è®¾ç½®","t-export-settings":"å¯¼å‡ºè®¾ç½®","t-mermaid-settings":"Mermaidè®¾ç½®","t-image-settings":"å›¾ç‰‡è®¾ç½®","t-reset-initialization":"é‡ç½®ä¸åˆå§‹åŒ–","t-basic-settings-title":"åŸºç¡€è®¾ç½®","t-advanced-settings-title":"é«˜çº§è®¾ç½®ï¼ˆæ–½å·¥ä¸­ï¼‰","t-theme-description":"æ›´æ”¹ç¼–è¾‘å™¨çš„ä¸»é¢˜","t-language-description":"æ›´æ”¹ç¼–è¾‘å™¨çš„è¯­è¨€","t-editor-settings-title":"ç¼–è¾‘å™¨è®¾ç½®","t-font-size-description":"æ›´æ”¹æ¸²æŸ“åæ–‡å­—å­—ä½“å¤§å°","t-font-family-description":"æ›´æ”¹æ¸²æŸ“åæ–‡å­—å­—ä½“","t-sync-scroll-description":"åŒæ­¥æ»šåŠ¨å·¦è¾¹ç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŸŸ","t-auto-wrap-description":"æ˜¯å¦å¼€å¯ç¼–è¾‘å™¨è‡ªåŠ¨æ¢è¡Œ","t-speech-language-description":"é€‰æ‹©è¯­éŸ³è½¬æ–‡å­—çš„è¯†åˆ«è¯­è¨€","t-export-settings-description":"æ›´æ”¹å¯¼å‡ºè®¾ç½®(æ–½å·¥ä¸­)","t-mermaid-theme-description":"Mermaidæµç¨‹å›¾ä¸»é¢˜","t-image-settings-title":"å›¾ç‰‡è®¾ç½®","t-image-storage-preference":"å›¾ç‰‡å­˜å‚¨æ¨¡å¼åå¥½ (ç²˜è´´)","t-image-storage-description":"é€‰æ‹©ä¼˜å…ˆå°†ç²˜è´´å›¾ç‰‡å­˜å‚¨åœ¨æµè§ˆå™¨/æ–‡ä»¶å¤¹","t-image-storage-folder":"æœ¬åœ°æ–‡ä»¶å¤¹ (Prefer In Local Folder)","t-image-storage-browser":"æµè§ˆå™¨ (Prefer In Browser)","t-default-image-style":"é»˜è®¤å›¾ç‰‡æ ·å¼","t-default-image-style-description":"é»˜è®¤å¡«å……çš„å›¾ç‰‡æ ·å¼ï¼Œå¤§å°ï¼Œä½ç½®ç­‰,wè¡¨ç¤ºå¤§å°, cè¡¨ç¤ºcenter, sè¡¨ç¤ºshadow","t-basic-style":"åŸºæœ¬æ ·å¼","t-default-stored-path":"é»˜è®¤å­˜å‚¨è·¯å¾„","t-default-stored-path-description":'é»˜è®¤ç²˜è´´å›¾ç‰‡ä¸Šä¼ çš„è·¯å¾„ï¼Œå¦‚è®¾ç½®ä¸º"images"ï¼Œåˆ™å›¾ç‰‡ä¼šä¸Šä¼ åˆ°æ ¹ç›®å½•çš„ä¸€ä¸ªä¸º"images"çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚è¯¥é¡¹ä¸ºç©ºï¼Œåˆ™ä¿æŒé»˜è®¤çš„"images"æ–‡ä»¶å¤¹',"t-image-store-path":"å›¾ç‰‡å­˜å‚¨è·¯å¾„","t-reset-settings-title":"é‡ç½®ä¸åˆå§‹åŒ–è®¾ç½®","t-reset-data-description":"æ¸…é™¤æ‰€æœ‰ä¿å­˜æ–‡æœ¬æ•°æ®ï¼ŒåŒ…æ‹¬å›¾ç‰‡ï¼Œè®¾ç½®ï¼Œç¼“å­˜å¹¶æ¢å¤åˆå§‹çŠ¶æ€","t-reset-button":"é‡ç½®æ‰€æœ‰æ•°æ®","t-reset-success":"æ•°æ®æ¸…é™¤å®Œæˆï¼Œé¡µé¢å°†åœ¨3ç§’ååˆ·æ–°ä»¥å®Œæˆé‡ç½®...","t-reset-warning":"éƒ¨åˆ†æ•°æ®å·²æ¸…é™¤ï¼Œé¡µé¢å°†åˆ·æ–°ä»¥å®Œæˆé‡ç½®","t-reset-confirm-title":"âš ï¸ ç¡®è®¤é‡ç½®æ‰€æœ‰æ•°æ®","t-reset-confirm-description":"æ­¤æ“ä½œå°†<strong>æ°¸ä¹…åˆ é™¤</strong>ä»¥ä¸‹æ•°æ®ï¼š","t-reset-confirm-list":"â€¢ æ‰€æœ‰ä¿å­˜çš„è‰ç¨¿å’Œå›¾ç‰‡<br/>â€¢ ç”¨æˆ·è®¾ç½®å’Œåå¥½<br/>â€¢ æµè§ˆå™¨ç¼“å­˜","t-reset-confirm-warning":"âš ï¸ æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œè¯·ç¡®ä¿æ‚¨å·²å¤‡ä»½é‡è¦æ•°æ®ï¼","t-cancel":"å–æ¶ˆ","t-confirm-reset":"ç¡®è®¤é‡ç½®","t-chinese":"ä¸­æ–‡","t-english":"English","t-default":"é»˜è®¤","t-on":"å¼€å¯","t-off":"å…³é—­","t-image-manager-title":"å›¾ç‰‡ç®¡ç†å™¨","t-image-manager-tooltip-title":"ç®¡ç†ç²˜è´´ä¸Šä¼ çš„å›¾ç‰‡","t-image-manager-tooltip-ctrl-click":"æŒ‰ä½Ctrlç‚¹å‡»å›¾ç‰‡æ’å…¥","t-image-manager-tooltip-double-click":"åŒå‡»å›¾ç‰‡æ”¾å¤§é¢„è§ˆ","t-image-manager-tooltip-alt-click":"æŒ‰ä½Altç‚¹å‡»å›¾ç‰‡å¤åˆ¶å›¾ç‰‡","t-image-manager-tooltip-delete-all":"åˆ é™¤å…¨éƒ¨å›¾ç‰‡å’Œå‚¨å­˜çš„æ–‡å­—","t-image-manager-tooltip-delete-single":"åˆ é™¤æ­¤å›¾ç‰‡","t-image-manager-delete-all-title":"ç¡®å®šè¦åˆ é™¤æ‰€æœ‰å›¾ç‰‡å—ï¼Ÿ","t-image-manager-delete-all-content":'ä¸€æ—¦ç‚¹å‡»"ç¡®å®š"æŒ‰é’®ï¼Œæ‚¨çš„å…¨éƒ¨å›¾ç‰‡å°†è¢«åˆ é™¤ï¼',"t-image-manager-confirm-yes":"ç¡®å®š","t-image-manager-confirm-no":"å–æ¶ˆ","t-image-manager-no-images-title":"æš‚æ— å›¾ç‰‡","t-image-manager-no-images-description":"è¯·ç²˜è´´å›¾ç‰‡åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œå›¾ç‰‡å°†è‡ªåŠ¨ä¿å­˜åˆ°æ­¤å¤„","t-lab-title":"å‰ç«¯å®éªŒå®¤","t-lab-card-spelling-association-title":"æ‹¼å†™è”æƒ³","t-lab-card-spelling-association-desc":"æ‹¼å†™è¡¥å…¨(åªæ”¯æŒè‹±æ–‡),å®‰è£…ä¼šåœ¨æœ¬åœ°ä¸‹è½½è¯å…¸","t-lab-card-spelling-check-title":"æ‹¼å†™æ£€æŸ¥","t-lab-card-spelling-check-desc":"æ‹¼å†™æ£€æŸ¥,ç»è´¹ä¸è¶³,å’±ä¸ç”¨äº†ï¼","t-lab-button-install":"å®‰è£…","t-lab-button-uninstall":"å¸è½½","t-lab-button-enable":"å¯ç”¨","t-lab-button-disable":"ç¦ç”¨","t-lab-install-success":"æˆåŠŸå®‰è£…å­—å…¸ï¼","t-file-manager-new-file":"æ–°å»ºæ–‡ä»¶","t-file-manager-new-folder":"æ–°å»ºæ–‡ä»¶å¤¹","t-file-manager-rename":"é‡å‘½å","t-file-manager-delete":"åˆ é™¤","t-file-manager-move":"ç§»åŠ¨","t-file-manager-copy":"å¤åˆ¶","t-file-manager-empty-folder":"æ­¤æ–‡ä»¶å¤¹ä¸ºç©º","t-file-manager-empty-folder-desc":"å³é”®ç‚¹å‡»åˆ›å»ºæ–°æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹","t-file-manager-confirm-delete":"ç¡®è®¤åˆ é™¤","t-file-manager-confirm-delete-file":"ç¡®å®šè¦åˆ é™¤ '{{name}}' å—ï¼Ÿ","t-file-manager-confirm-delete-folder":"ç¡®å®šè¦åˆ é™¤æ–‡ä»¶å¤¹ '{{name}}' åŠå…¶æ‰€æœ‰å†…å®¹å—ï¼Ÿ","t-file-manager-new-file-name":"è¯·è¾“å…¥æ–‡ä»¶å","t-file-manager-new-folder-name":"è¯·è¾“å…¥æ–‡ä»¶å¤¹å","t-file-manager-rename-name":"è¯·è¾“å…¥æ–°åç§°","t-file-manager-create-success":"åˆ›å»ºæˆåŠŸï¼","t-file-manager-delete-success":"åˆ é™¤æˆåŠŸï¼","t-file-manager-rename-success":"é‡å‘½åæˆåŠŸï¼","t-file-manager-operation-failed":"æ“ä½œå¤±è´¥","t-file-manager-open-success":"æˆåŠŸæ‰“å¼€","t-file-manager-move-success":"ç§»åŠ¨æˆåŠŸï¼","t-file-manager-invalid-move":"ä¸èƒ½å°†çˆ¶æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å­æ–‡ä»¶å¤¹ä¸­","t-file-manager-already-in-root":"æ–‡ä»¶å·²åœ¨æ ¹ç›®å½•","t-file-manager-loading":"åŠ è½½ä¸­...","t-file-manager-load-more":"ç‚¹å‡»åŠ è½½æ›´å¤š","t-file-format-not-supported":"ä¸æ”¯æŒ '.{{extension}}' æ–‡ä»¶æ ¼å¼","t-ai-meeting-button":"AI ä¼šè®®","t-ai-meeting-title":"AI ä¼šè®® - å®æ—¶è½¬å½• & ç¿»è¯‘ & ä¼šè®®çºªè¦","t-ai-meeting-new-meeting":"æ–°å»ºä¼šè®®","t-ai-meeting-end-meeting":"ç»“æŸä¼šè®®","t-ai-meeting-meeting-name":"ä¼šè®®åç§°ï¼ˆå¯é€‰ï¼‰","t-ai-meeting-meeting-name-placeholder":"ç•™ç©ºåˆ™è‡ªåŠ¨ç”Ÿæˆ","t-ai-meeting-speaker":"å‘è¨€äºº","t-ai-meeting-source-language":"æºè¯­è¨€","t-ai-meeting-translate-to":"ç¿»è¯‘ä¸º","t-ai-meeting-start-recording":"å¼€å§‹å½•éŸ³","t-ai-meeting-stop-recording":"åœæ­¢å½•éŸ³","t-ai-meeting-history":"å†å²è®°å½•","t-ai-meeting-transcript-title":"ğŸ“ ä¼šè®®è½¬å½• & ç¿»è¯‘","t-ai-meeting-transcript-placeholder":"ç‚¹å‡»éº¦å…‹é£æŒ‰é’®å¼€å§‹å½•éŸ³ï¼Œå®æ—¶è½¬å½•å’Œç¿»è¯‘ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ","t-ai-meeting-summary-tab":"ä¼šè®®æ€»ç»“","t-ai-meeting-assistant-tab":"å®æ—¶åŠ©æ‰‹","t-ai-meeting-generate-summary":"ç”Ÿæˆæ€»ç»“","t-ai-meeting-export":"å¯¼å‡º","t-ai-meeting-save":"ä¿å­˜","t-ai-meeting-summary-placeholder-title":'ç‚¹å‡»ä¸Šæ–¹"ç”Ÿæˆæ€»ç»“"æŒ‰é’®',"t-ai-meeting-summary-placeholder-desc":"AIå°†ä¸ºæ‚¨æç‚¼ä¼šè®®è¦ç‚¹","t-ai-meeting-summary-generating":"æ­£åœ¨åˆ†æä¼šè®®å†…å®¹...","t-ai-meeting-get-suggestions":"è·å–å®æ—¶å»ºè®® / å‘è¨€æ€è·¯","t-ai-meeting-suggestions-placeholder-title":'é€‰æ‹©åœºæ™¯å¹¶ç‚¹å‡»"è·å–å»ºè®®"',"t-ai-meeting-suggestions-placeholder-desc":"AIå°†æ ¹æ®æœ€è¿‘çš„å¯¹è¯æä¾›å‘è¨€æ€è·¯","t-ai-meeting-suggestions-generating":"æ­£åœ¨æ€è€ƒä¸­...","t-ai-meeting-context-meeting":"ä¼šè®®","t-ai-meeting-context-interview":"é¢è¯•","t-ai-meeting-context-negotiation":"è°ˆåˆ¤","t-ai-meeting-context-brainstorming":"å¤´è„‘é£æš´","t-ai-meeting-translation":"ç¿»è¯‘","t-ai-meeting-no-content-to-summarize":"æ²¡æœ‰ä¼šè®®å†…å®¹å¯ä»¥æ€»ç»“","t-ai-meeting-no-content-to-analyze":"æ²¡æœ‰ä¼šè®®å†…å®¹å¯ä»¥åˆ†æ","t-ai-meeting-no-summary-to-export":"æ²¡æœ‰æ€»ç»“å†…å®¹å¯ä»¥å¯¼å‡º","t-ai-meeting-no-meeting-to-save":"æ²¡æœ‰ä¼šè®®è®°å½•å¯ä»¥ä¿å­˜","t-ai-meeting-summary-generated":"ä¼šè®®æ€»ç»“ç”Ÿæˆå®Œæˆ","t-ai-meeting-summary-failed":"ç”Ÿæˆæ€»ç»“å¤±è´¥","t-ai-meeting-exported-to-editor":"å·²å¯¼å‡ºåˆ°ç¼–è¾‘å™¨","t-ai-meeting-export-failed":"å¯¼å‡ºå¤±è´¥","t-ai-meeting-saved":"ä¼šè®®è®°å½•å·²ä¿å­˜","t-ai-meeting-save-failed":"ä¿å­˜å¤±è´¥","t-ai-meeting-copied-to-clipboard":"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿","t-ai-meeting-recording-stopped":"å½•éŸ³å·²åœæ­¢","t-ai-meeting-please-start-meeting-first":"è¯·å…ˆå¼€å§‹æ–°ä¼šè®®","t-ai-meeting-recording-started":"å¼€å§‹å½•éŸ³...","t-ai-meeting-recognition-failed":"è¯­éŸ³è¯†åˆ«å¯åŠ¨å¤±è´¥","t-ai-meeting-meeting-created":"æ–°ä¼šè®®å·²åˆ›å»ºï¼Œå¼€å§‹å½•éŸ³...","t-ai-meeting-meeting-ended":"ä¼šè®®å·²ç»“æŸå¹¶ä¿å­˜","t-preview-mode-error":"é¢„è§ˆæ¨¡å¼ä½ ä¿å­˜ä¸ªå±ï¼Œå¼€å¦ä¸€ä¸ªæ–‡ä»¶ï¼","t-save-success-local":"æˆåŠŸä¿å­˜åˆ°æœ¬åœ°ï¼ğŸ‰","t-save-success-browser-no-local":"æˆåŠŸä¿å­˜åˆ°æµè§ˆå™¨ï¼ğŸ‰(æœªæ‰“å¼€æœ¬åœ°æ–‡ä»¶)","t-save-success-browser":"æˆåŠŸä¿å­˜åˆ°æµè§ˆå™¨ï¼ğŸ‰","t-rejection-error":"ä½ ç«Ÿæ•¢æ‹’ç»æˆ‘ã€‚","t-updated-to-latest-version":"å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬","t-current-version":"å½“å‰ç‰ˆæœ¬: {{version}}","t-new-features-current-version":"å½“å‰ç‰ˆæœ¬æ–°å¢ç‰¹æ€§","t-no-file-selected":"å·¦é¡¾å³ç›¼ï¼Œæ´»åœ¨æ¢¦å¹»?","t-opening-file":"æ­£åœ¨æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œåˆ«æ€¥ï¼Œä½ ç»™æˆ‘ç­‰ä¼šğŸ˜…","t-error-opening-file":"å°¼ç›çš„æŠ¥é”™ä¹ğŸ¤£","t-error-opening-folder":"æ‰“å¼€æ–‡ä»¶å¤¹å¤±è´¥","t-update-notification-do-not-show-again":"ä¸å†æ˜¾ç¤º","directory.preface.title":"å‰è¨€","directory.basic.title":"1.åŸºç¡€æ“ä½œæŒ‡å—","directory.basic.paragraph":"æ®µè½","directory.basic.lineBreak":"æ¢è¡Œ","directory.basic.bold":"åŠ ç²—","directory.basic.italic":"æ–œä½“","directory.basic.center":"å±…ä¸­","directory.basic.customText":"ä»»æ„æ–‡æœ¬","directory.basic.exportPdf":"å¯¼å‡ºPDF","directory.advanced.title":"2.é»‘ç§‘æŠ€æŒ‡å—","directory.advanced.speechToText":"è¯­éŸ³è½¬æ–‡å­—","directory.advanced.aiAssistant":"âœ¨AIæ™ºèƒ½åŠ©æ‰‹","directory.advanced.autoFormat":"è‡ªåŠ¨æ’ç‰ˆ","directory.advanced.fileManager":"æ–‡ä»¶ç®¡ç†å™¨","directory.advanced.imageUpload":"å›¾ç‰‡ä¸Šä¼ ","directory.advanced.syncScroll":"åŒæ­¥æ»šåŠ¨","directory.advanced.emojiMarket":"è¡¨æƒ…åŒ…è¶…å¸‚","directory.advanced.collaboration":"ååŒåŠå…¬","directory.advanced.tableBuilder":"è¡¨æ ¼é€Ÿå»º","directory.advanced.mindMap":"æ€ç»´å¯¼å›¾","directory.advanced.doubleClick":"åŒå‡»å®šä½","directory.smart.title":"3.æ™ºèƒ½æç¤ºæŒ‡å—","directory.smart.latex":"LaTexæ•°å­¦å…¬å¼","directory.smart.autoComplete":"æ™ºèƒ½æç¤º","directory.smart.settings":"è®¾ç½®ç•Œé¢",featuresList:{startExperience:{title:"å¼€å§‹ä½“éªŒ",description:"ç‚¹å‡»å¼€å§‹ï¼Œæ¢ç´¢æ›´å¤šåŠŸèƒ½ã€‚"},smartEditor:{title:`Markdown
+ AI`,description:"æ™ºèƒ½åŒæ ç¼–è¾‘å™¨ï¼Œå®æ—¶æ»šåŠ¨é¢„è§ˆï¼Œé›†æˆæ™ºèƒ½è¡¥å…¨å’Œå…¨é¢å¿«æ·é”®ã€‚æŒ‰ Ctrl+J å¬å”¤ GPT-4 åŠ©æ‰‹ï¼Œå¢å¼ºæ‚¨çš„åˆ›é€ åŠ›ã€‚"},codeDisplay:{title:`æ€ç»´å¯¼å›¾
å…¨åŒ…å«`,description:"æ”¯æŒ 30+ ç¼–ç¨‹è¯­è¨€è¯­æ³•é«˜äº®ï¼Œæä¾›å¤šä¸»é¢˜ Mermaid æµç¨‹å›¾å’Œæ€ç»´å¯¼å›¾ï¼Œä¸ºæ‚¨çš„åˆ›ä½œå¢è‰²ã€‚"},multiDeviceSync:{title:`é«˜çº§
æ–‡ä»¶ç³»ç»Ÿ`,description:"æ¸…æ™°çš„æ–‡ä»¶å¤¹ç›®å½•ï¼Œä¸€é”®åŒæ­¥æœ¬åœ°æ–‡ä»¶ï¼Œè½»æ¾å‰ªè´´æ¿å›¾ç‰‡ç²˜è´´ï¼Œè§£æ”¾æ‚¨çš„åˆ›ä½œçƒ¦æ¼ã€‚"},flexibleExport:{title:`çµæ´»
å¯¼å‡ºé€‰é¡¹`,description:"è½»æ¾å¯¼å‡º PDFã€Markdownã€JPG ç­‰æ ¼å¼ï¼Œè®©å†…å®¹ç®¡ç†å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚"}}}}},od=()=>{const t=navigator.language;return t==="zh-CN"?"zh":"en"},id=()=>{const t=localStorage.getItem("i18nextLng")||od();Zt({basic:{language:t}}),Qe.use(No).use(Fo).init({debug:!1,lng:t,fallbackLng:"zh",interpolation:{escapeValue:!1},react:{useSuspense:!0},resources:ad})};id();Gr(["markdownitIncrementalDOM","katex","IncrementalDOM"]).then(()=>{const t=document.getElementById("root"),e=document.getElementById("app-loading");if(!t||!e){console.error("Fatal Error: #root or #app-loading element not found.");return}pa.createRoot(t).render(m.createElement(i.Suspense,{fallback:m.createElement("div",null,"Loading...")},m.createElement(rd,null))),setTimeout(()=>{t.style.opacity="1",e.classList.add("hidden"),e.addEventListener("transitionend",()=>{const r=window;typeof r.clearLoadingInterval=="function"&&r.clearLoadingInterval(),e.remove()},{once:!0})},150)});export{ot as A,Ke as B,Nt as C,tt as D,Qr as I,Jd as S,ge as a,pe as b,qd as c,Kd as d,El as e,Zt as f,At as g,Ud as h,ke as i,Vd as j,yt as k,A as l,kn as m,cr as n,ti as o,Wd as p,rt as q,jd as r,hl as s,Bn as t,fl as u,Qt as v,Yr as w,Ks as x,Er as y,Uo as z};
