import{d as Fe,a as Zd,b as Jd,c as tf}from"./dayjs-d153d5d6.js";import{d as Dr}from"./@braintree-f19cff0e.js";import"./d3-transition-dcb2c4ce.js";import"./d3-zoom-a2c53521.js";import{p as jr}from"./dompurify-4851c8ad.js";import{d as yt,e as dh}from"./d3-selection-de98f9a2.js";import{w as ji,G as Ji,l as Qs,a as fh,r as ef,b as rf,i as tr,c as ph}from"./dagre-d3-es-57771b5d.js";import{a as Zs,b as sf,d as nf,e as af,f as of,g as lf,h as cf,i as hf,j as uf,k as df,m as ff,n as pf,c as ti,o as gf,p as yf,q as mf,r as xf,s as bf,t as kf,u as _f,l as fr,v as Qr,w as Tf}from"./d3-shape-c15df95d.js";import{l as Ct,a as J,i as kt,r as _s,d as At,b as Nr,c as Cf}from"./khroma-dc7cc5cc.js";import{v as Ef}from"./uuid-55471c42.js";import{t as vf,l as Ls,o as gh,b as Hl}from"./d3-scale-20fecb82.js";import{m as Sf,e as wf}from"./d3-array-58f6faf7.js";import{g as Af}from"./d3-interpolate-23596b47.js";import{a as Lf,b as Bf}from"./d3-axis-8d489beb.js";import{t as Gl}from"./d3-time-format-0d1ca8ac.js";import{d as jl,b as Xl,a as $l,t as Kl,s as Ql,n as Zl,i as If,o as Ff,p as Rf,j as Df,q as Nf,r as Of,c as Pf}from"./d3-time-ff8162d9.js";import{E as Mf}from"./elkjs-08d28d76.js";import{d as yh}from"./ts-dedent-356e4a49.js";import{f as mh}from"./mdast-util-from-markdown-32388d6f.js";import{c as xh}from"./cytoscape-8e2ca392.js";import{c as Vf}from"./cytoscape-cose-bilkent-68bb3488.js";import{H as Po,A as qf,d as Da}from"./lodash-es-82f45aac.js";import{S as zf,s as Wf,l as Yf,r as Uf,c as Hf,j as Gf}from"./d3-sankey-15198533.js";import{s as jf}from"./d3-scale-chromatic-1b767f5e.js";const Xf="modulepreload",$f=function(t,e){return new URL(t,e).href},Jl={},ce=function(e,i,r){if(!i||i.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(i.map(n=>{if(n=$f(n,r),n in Jl)return;Jl[n]=!0;const a=n.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const f=s[u];if(f.href===n&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":Xf,a||(h.as="script",h.crossOrigin=""),h.href=n,document.head.appendChild(h),a)return new Promise((u,f)=>{h.addEventListener("load",u),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n})};var bh="comm",kh="rule",_h="decl",Kf="@import",Qf="@keyframes",Zf="@layer",Th=Math.abs,Mo=String.fromCharCode;function Ch(t){return t.trim()}function xn(t,e,i){return t.replace(e,i)}function Jf(t,e,i){return t.indexOf(e,i)}function Bs(t,e){return t.charCodeAt(e)|0}function Is(t,e,i){return t.slice(e,i)}function Ui(t){return t.length}function t2(t){return t.length}function un(t,e){return e.push(t),t}var oa=1,Zr=1,Eh=0,di=0,fe=0,us="";function Vo(t,e,i,r,s,n,a,o){return{value:t,root:e,parent:i,type:r,props:s,children:n,line:oa,column:Zr,length:a,return:"",siblings:o}}function e2(){return fe}function i2(){return fe=di>0?Bs(us,--di):0,Zr--,fe===10&&(Zr=1,oa--),fe}function ki(){return fe=di<Eh?Bs(us,di++):0,Zr++,fe===10&&(Zr=1,oa++),fe}function Er(){return Bs(us,di)}function bn(){return di}function la(t,e){return Is(us,t,e)}function Ha(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function r2(t){return oa=Zr=1,Eh=Ui(us=t),di=0,[]}function s2(t){return us="",t}function Na(t){return Ch(la(di-1,Ga(t===91?t+2:t===40?t+1:t)))}function n2(t){for(;(fe=Er())&&fe<33;)ki();return Ha(t)>2||Ha(fe)>3?"":" "}function a2(t,e){for(;--e&&ki()&&!(fe<48||fe>102||fe>57&&fe<65||fe>70&&fe<97););return la(t,bn()+(e<6&&Er()==32&&ki()==32))}function Ga(t){for(;ki();)switch(fe){case t:return di;case 34:case 39:t!==34&&t!==39&&Ga(fe);break;case 40:t===41&&Ga(t);break;case 92:ki();break}return di}function o2(t,e){for(;ki()&&t+fe!==47+10;)if(t+fe===42+42&&Er()===47)break;return"/*"+la(e,di-1)+"*"+Mo(t===47?t:ki())}function l2(t){for(;!Ha(Er());)ki();return la(t,di)}function c2(t){return s2(kn("",null,null,null,[""],t=r2(t),0,[0],t))}function kn(t,e,i,r,s,n,a,o,l){for(var h=0,u=0,f=a,d=0,p=0,y=0,x=1,_=1,C=1,k=0,R="",F=s,L=n,E=r,I=R;_;)switch(y=k,k=ki()){case 40:if(y!=108&&Bs(I,f-1)==58){Jf(I+=xn(Na(k),"&","&\f"),"&\f",Th(h?o[h-1]:0))!=-1&&(C=-1);break}case 34:case 39:case 91:I+=Na(k);break;case 9:case 10:case 13:case 32:I+=n2(y);break;case 92:I+=a2(bn()-1,7);continue;case 47:switch(Er()){case 42:case 47:un(h2(o2(ki(),bn()),e,i,l),l);break;default:I+="/"}break;case 123*x:o[h++]=Ui(I)*C;case 125*x:case 59:case 0:switch(k){case 0:case 125:_=0;case 59+u:C==-1&&(I=xn(I,/\f/g,"")),p>0&&Ui(I)-f&&un(p>32?ec(I+";",r,i,f-1,l):ec(xn(I," ","")+";",r,i,f-2,l),l);break;case 59:I+=";";default:if(un(E=tc(I,e,i,h,u,s,o,R,F=[],L=[],f,n),n),k===123)if(u===0)kn(I,e,E,E,F,n,f,o,L);else switch(d===99&&Bs(I,3)===110?100:d){case 100:case 108:case 109:case 115:kn(t,E,E,r&&un(tc(t,E,E,0,0,s,o,R,s,F=[],f,L),L),s,L,f,o,r?F:L);break;default:kn(I,E,E,E,[""],L,0,o,L)}}h=u=p=0,x=C=1,R=I="",f=a;break;case 58:f=1+Ui(I),p=y;default:if(x<1){if(k==123)--x;else if(k==125&&x++==0&&i2()==125)continue}switch(I+=Mo(k),k*x){case 38:C=u>0?1:(I+="\f",-1);break;case 44:o[h++]=(Ui(I)-1)*C,C=1;break;case 64:Er()===45&&(I+=Na(ki())),d=Er(),u=f=Ui(R=I+=l2(bn())),k++;break;case 45:y===45&&Ui(I)==2&&(x=0)}}return n}function tc(t,e,i,r,s,n,a,o,l,h,u,f){for(var d=s-1,p=s===0?n:[""],y=t2(p),x=0,_=0,C=0;x<r;++x)for(var k=0,R=Is(t,d+1,d=Th(_=a[x])),F=t;k<y;++k)(F=Ch(_>0?p[k]+" "+R:xn(R,/&\f/g,p[k])))&&(l[C++]=F);return Vo(t,e,i,s===0?kh:o,l,h,u,f)}function h2(t,e,i,r){return Vo(t,e,i,bh,Mo(e2()),Is(t,2,-2),0,r)}function ec(t,e,i,r,s){return Vo(t,e,i,_h,Is(t,0,r),Is(t,r+1,-1),r,s)}function ja(t,e){for(var i="",r=0;r<t.length;r++)i+=e(t[r],r,t,e)||"";return i}function u2(t,e,i,r){switch(t.type){case Zf:if(t.children.length)break;case Kf:case _h:return t.return=t.return||t.value;case bh:return"";case Qf:return t.return=t.value+"{"+ja(t.children,r)+"}";case kh:if(!Ui(t.value=t.props.join(",")))return""}return Ui(i=ja(t.children,r))?t.return=t.value+"{"+i+"}":""}const zi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},A={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},qo=function(t="fatal"){let e=zi.fatal;typeof t=="string"?(t=t.toLowerCase(),t in zi&&(e=zi[t])):typeof t=="number"&&(e=t),A.trace=()=>{},A.debug=()=>{},A.info=()=>{},A.warn=()=>{},A.error=()=>{},A.fatal=()=>{},e<=zi.fatal&&(A.fatal=console.error?console.error.bind(console,ni("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",ni("FATAL"))),e<=zi.error&&(A.error=console.error?console.error.bind(console,ni("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",ni("ERROR"))),e<=zi.warn&&(A.warn=console.warn?console.warn.bind(console,ni("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",ni("WARN"))),e<=zi.info&&(A.info=console.info?console.info.bind(console,ni("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",ni("INFO"))),e<=zi.debug&&(A.debug=console.debug?console.debug.bind(console,ni("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ni("DEBUG"))),e<=zi.trace&&(A.trace=console.debug?console.debug.bind(console,ni("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ni("TRACE")))},ni=t=>`%c${Fe().format("ss.SSS")} : ${t} : `,Js=/<br\s*\/?>/gi,d2=t=>t?Sh(t).replace(/\\n/g,"#br#").split("#br#"):[""],vh=t=>{const e="data-temp-href-target";jr.addHook("beforeSanitizeAttributes",r=>{r.tagName==="A"&&r.hasAttribute("target")&&r.setAttribute(e,r.getAttribute("target")||"")});const i=jr.sanitize(t);return jr.addHook("afterSanitizeAttributes",r=>{r.tagName==="A"&&r.hasAttribute(e)&&(r.setAttribute("target",r.getAttribute(e)||""),r.removeAttribute(e),r.getAttribute("target")==="_blank"&&r.setAttribute("rel","noopener"))}),i},ic=(t,e)=>{var i;if(((i=e.flowchart)==null?void 0:i.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=vh(t):r!=="loose"&&(t=Sh(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=y2(t))}return t},ve=(t,e)=>t&&(e.dompurifyConfig?t=jr.sanitize(ic(t,e),e.dompurifyConfig).toString():t=jr.sanitize(ic(t,e),{FORBID_TAGS:["style"]}).toString(),t),f2=(t,e)=>typeof t=="string"?ve(t,e):t.flat().map(i=>ve(i,e)),p2=t=>Js.test(t),g2=t=>t.split(Js),y2=t=>t.replace(/#br#/g,"<br/>"),Sh=t=>t.replace(Js,"#br#"),m2=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},ke=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),x2=function(...t){const e=t.filter(i=>!isNaN(i));return Math.max(...e)},b2=function(...t){const e=t.filter(i=>!isNaN(i));return Math.min(...e)},Ts=function(t){const e=t.split(/(,)/),i=[];for(let r=0;r<e.length;r++){let s=e[r];if(s===","&&r>0&&r+1<e.length){const n=e[r-1],a=e[r+1];k2(n,a)&&(s=n+","+a,r++,i.pop())}i.push(_2(s))}return i.join("")},Xa=(t,e)=>Math.max(0,t.split(e).length-1),k2=(t,e)=>{const i=Xa(t,"~"),r=Xa(e,"~");return i===1&&r===1},_2=t=>{const e=Xa(t,"~");let i=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),i=!0);const r=[...t];let s=r.indexOf("~"),n=r.lastIndexOf("~");for(;s!==-1&&n!==-1&&s!==n;)r[s]="<",r[n]=">",s=r.indexOf("~"),n=r.lastIndexOf("~");return i&&r.unshift("~"),r.join("")},mt={getRows:d2,sanitizeText:ve,sanitizeTextOrArray:f2,hasBreaks:p2,splitBreaks:g2,lineBreakRegex:Js,removeScript:vh,getUrl:m2,evaluate:ke,getMax:x2,getMin:b2},Me=(t,e)=>e?J(t,{s:-40,l:10}):J(t,{s:-40,l:-10}),ca="#ffffff",ha="#f2f2f2";let T2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var e,i,r,s,n,a,o,l,h,u,f;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||J(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||J(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Me(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Me(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Me(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Me(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||kt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||kt(this.tertiaryColor),this.lineColor=this.lineColor||kt(this.background),this.arrowheadColor=this.arrowheadColor||kt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||At(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||kt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ct(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330}),this.darkMode)for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=At(this["cScale"+p],75);else for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=At(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||kt(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||Ct(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||At(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;const d=this.darkMode?-4:-1;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||J(this.mainBkg,{h:180,s:-15,l:d*(5+p*3)}),this["surfacePeer"+p]=this["surfacePeer"+p]||J(this.mainBkg,{h:180,s:-15,l:d*(8+p*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||J(this.primaryColor,{h:64}),this.fillType3=this.fillType3||J(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||J(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||J(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||J(this.primaryColor,{h:128}),this.fillType7=this.fillType7||J(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||J(this.primaryColor,{l:-10}),this.pie5=this.pie5||J(this.secondaryColor,{l:-10}),this.pie6=this.pie6||J(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||J(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||J(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||J(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||J(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||J(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||J(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Nr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||J(this.primaryColor,{h:-30}),this.git4=this.git4||J(this.primaryColor,{h:-60}),this.git5=this.git5||J(this.primaryColor,{h:-90}),this.git6=this.git6||J(this.primaryColor,{h:60}),this.git7=this.git7||J(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ca,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ha}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const C2=t=>{const e=new T2;return e.calculate(t),e};let E2=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ct(this.primaryColor,16),this.tertiaryColor=J(this.primaryColor,{h:-160}),this.primaryBorderColor=kt(this.background),this.secondaryBorderColor=Me(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Me(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ct(kt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=_s(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=At("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=At(this.sectionBkgColor,10),this.taskBorderColor=_s(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=_s(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,i,r,s,n,a,o,l,h,u,f;this.secondBkg=Ct(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ct(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ct(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||J(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||J(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Nr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ct(this.secondaryColor,20),this.git1=Ct(this.pie2||this.secondaryColor,20),this.git2=Ct(this.pie3||this.tertiaryColor,20),this.git3=Ct(this.pie4||J(this.primaryColor,{h:-30}),20),this.git4=Ct(this.pie5||J(this.primaryColor,{h:-60}),20),this.git5=Ct(this.pie6||J(this.primaryColor,{h:-90}),10),this.git6=Ct(this.pie7||J(this.primaryColor,{h:60}),10),this.git7=Ct(this.pie8||J(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ct(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ct(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const v2=t=>{const e=new E2;return e.calculate(t),e};let S2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=J(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=J(this.primaryColor,{h:-160}),this.primaryBorderColor=Me(this.primaryColor,this.darkMode),this.secondaryBorderColor=Me(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Me(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=_s(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,i,r,s,n,a,o,l,h,u,f;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||J(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||J(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||J(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||kt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||kt(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||J(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||J(this.primaryColor,{l:-10}),this.pie5=this.pie5||J(this.secondaryColor,{l:-30}),this.pie6=this.pie6||J(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||J(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||J(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||J(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||J(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||J(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||J(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Nr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||J(this.primaryColor,{h:-30}),this.git4=this.git4||J(this.primaryColor,{h:-60}),this.git5=this.git5||J(this.primaryColor,{h:-90}),this.git6=this.git6||J(this.primaryColor,{h:60}),this.git7=this.git7||J(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||At(kt(this.git0),25),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ca,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ha}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const zo=t=>{const e=new S2;return e.calculate(t),e};let w2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ct("#cde498",10),this.primaryBorderColor=Me(this.primaryColor,this.darkMode),this.secondaryBorderColor=Me(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Me(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.primaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,f;this.actorBorder=At(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||J(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||J(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||J(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||J(this.primaryColor,{l:-30}),this.pie5=this.pie5||J(this.secondaryColor,{l:-30}),this.pie6=this.pie6||J(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||J(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||J(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||J(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||J(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||J(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||J(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Nr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||J(this.primaryColor,{h:-30}),this.git4=this.git4||J(this.primaryColor,{h:-60}),this.git5=this.git5||J(this.primaryColor,{h:-90}),this.git6=this.git6||J(this.primaryColor,{h:60}),this.git7=this.git7||J(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ca,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ha}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const A2=t=>{const e=new w2;return e.calculate(t),e};class L2{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ct(this.contrast,55),this.background="#ffffff",this.tertiaryColor=J(this.primaryColor,{h:-160}),this.primaryBorderColor=Me(this.primaryColor,this.darkMode),this.secondaryBorderColor=Me(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Me(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,f;this.secondBkg=Ct(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||J(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||J(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ct(this.contrast,30),this.sectionBkgColor2=Ct(this.contrast,30),this.taskBorderColor=At(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ct(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=At(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Nr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=At(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||J(this.primaryColor,{h:-30}),this.git4=this.pie5||J(this.primaryColor,{h:-60}),this.git5=this.pie6||J(this.primaryColor,{h:-90}),this.git6=this.pie7||J(this.primaryColor,{h:60}),this.git7=this.pie8||J(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ca,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ha}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}}const B2=t=>{const e=new L2;return e.calculate(t),e},Ki={base:{getThemeVariables:C2},dark:{getThemeVariables:v2},default:{getThemeVariables:zo},forest:{getThemeVariables:A2},neutral:{getThemeVariables:B2}},Wi={flowchart:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],deterministicIds:!1,fontSize:16},wh={...Wi,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:Ki.default.getThemeVariables(),sequence:{...Wi.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Wi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Wi.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Wi.pie,useWidth:984},xyChart:{...Wi.xyChart,useWidth:void 0},requirement:{...Wi.requirement,useWidth:void 0},gitGraph:{...Wi.gitGraph,useMaxWidth:!1},sankey:{...Wi.sankey,useMaxWidth:!1}},Ah=(t,e="")=>Object.keys(t).reduce((i,r)=>Array.isArray(t[r])?i:typeof t[r]=="object"&&t[r]!==null?[...i,e+r,...Ah(t[r],"")]:[...i,e+r],[]),I2=new Set(Ah(wh,"")),ae=wh,Bn=t=>{if(A.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Bn(e));return}for(const e of Object.keys(t)){if(A.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!I2.has(e)||t[e]==null){A.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){A.debug("sanitizing object",e),Bn(t[e]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const r of i)e.includes(r)&&(A.debug("sanitizing css option",e),t[e]=F2(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const i=t.themeVariables[e];i?.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}A.debug("After sanitization",t)}},F2=t=>{let e=0,i=0;for(const r of t){if(e<i)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&i++}return e!==i?"{ /* ERROR: Unbalanced CSS */ }":t},Lh=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Cs=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,R2=/\s*%%.*\n/gm;class Bh extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}}const Jr={},ua=function(t,e){t=t.replace(Lh,"").replace(Cs,"").replace(R2,`
`);for(const[i,{detector:r}]of Object.entries(Jr))if(r(t,e))return i;throw new Bh(`No diagram type detected matching given configuration for text: ${t}`)},Ih=(...t)=>{for(const{id:e,detector:i,loader:r}of t)Fh(e,i,r)},Fh=(t,e,i)=>{Jr[t]?A.error(`Detector with key ${t} already exists`):Jr[t]={detector:e,loader:i},A.debug(`Detector with key ${t} added${i?" with loader":""}`)},D2=t=>Jr[t].loader,$a=(t,e,{depth:i=2,clobber:r=!1}={})=>{const s={depth:i,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(n=>$a(t,n,s)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(n=>{t.includes(n)||t.push(n)}),t):t===void 0||i<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(n=>{typeof e[n]=="object"&&(t[n]===void 0||typeof t[n]=="object")?(t[n]===void 0&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=$a(t[n],e[n],{depth:i-1,clobber:r})):(r||typeof t[n]!="object"&&typeof e[n]!="object")&&(t[n]=e[n])}),t)},Ee=$a,Rh="",N2={curveBasis:Zs,curveBasisClosed:sf,curveBasisOpen:nf,curveBumpX:af,curveBumpY:of,curveBundle:lf,curveCardinalClosed:cf,curveCardinalOpen:hf,curveCardinal:uf,curveCatmullRomClosed:df,curveCatmullRomOpen:ff,curveCatmullRom:pf,curveLinear:ti,curveLinearClosed:gf,curveMonotoneX:yf,curveMonotoneY:mf,curveNatural:xf,curveStep:bf,curveStepAfter:kf,curveStepBefore:_f},O2=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,P2=function(t,e){const i=Dh(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(i)){const a=i.map(o=>o.args);Bn(a),r=Ee(r,[...a])}else r=i.args;if(!r)return;let s=ua(t,e);const n="config";return r[n]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),r[s]=r[n],delete r[n]),r},Dh=function(t,e=null){try{const i=new RegExp(`[%]{2}(?![{]${O2.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),A.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const s=[];for(;(r=Cs.exec(t))!==null;)if(r.index===Cs.lastIndex&&Cs.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const n=r[1]?r[1]:r[2],a=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;s.push({type:n,args:a})}return s.length===0?{type:t,args:null}:s.length===1?s[0]:s}catch(i){return A.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},M2=function(t){return t.replace(Cs,"")},V2=function(t,e){for(const[i,r]of e.entries())if(r.match(t))return i;return-1};function hi(t,e){if(!t)return e;const i=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return N2[i]??e}function q2(t,e){const i=t.trim();if(i)return e.securityLevel!=="loose"?Dr.sanitizeUrl(i):i}const z2=(t,...e)=>{const i=t.split("."),r=i.length-1,s=i[r];let n=window;for(let a=0;a<r;a++)if(n=n[i[a]],!n){A.error(`Function name: ${t} not found in window`);return}n[s](...e)};function Nh(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function W2(t){let e,i=0;t.forEach(s=>{i+=Nh(s,e),e=s});const r=i/2;return Wo(t,r)}function Y2(t){return t.length===1?t[0]:W2(t)}const rc=(t,e=2)=>{const i=Math.pow(10,e);return Math.round(t*i)/i},Wo=(t,e)=>{let i,r=e;for(const s of t){if(i){const n=Nh(s,i);if(n<r)r-=n;else{const a=r/n;if(a<=0)return i;if(a>=1)return{x:s.x,y:s.y};if(a>0&&a<1)return{x:rc((1-a)*i.x+a*s.x,5),y:rc((1-a)*i.y+a*s.y,5)}}}i=s}throw new Error("Could not find a suitable point for the given distance")},U2=(t,e,i)=>{A.info(`our points ${JSON.stringify(e)}`),e[0]!==i&&(e=e.reverse());const s=Wo(e,25),n=t?10:5,a=Math.atan2(e[0].y-s.y,e[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(a)*n+(e[0].x+s.x)/2,o.y=-Math.cos(a)*n+(e[0].y+s.y)/2,o};function H2(t,e,i){const r=structuredClone(i);A.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const s=25+t,n=Wo(r,s),a=10+t*.5,o=Math.atan2(r[0].y-n.y,r[0].x-n.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+n.y)/2):e==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+n.y)/2-5):e==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2),l}function fi(t){let e="",i="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":e=e+r+";");return{style:e,labelStyle:i}}let sc=0;const Oh=()=>(sc++,"id-"+Math.random().toString(36).substr(2,12)+"-"+sc);function G2(t){let e="";const i="0123456789abcdef",r=i.length;for(let s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*r));return e}const Ph=t=>G2(t.length),j2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},X2=function(t,e){const i=e.text.replace(mt.lineBreakRegex," "),[,r]=ds(e.fontSize),s=t.append("text");s.attr("x",e.x),s.attr("y",e.y),s.style("text-anchor",e.anchor),s.style("font-family",e.fontFamily),s.style("font-size",r),s.style("font-weight",e.fontWeight),s.attr("fill",e.fill),e.class!==void 0&&s.attr("class",e.class);const n=s.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.attr("fill",e.fill),n.text(i),s},Mh=Po((t,e,i)=>{if(!t||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),mt.lineBreakRegex.test(t)))return t;const r=t.split(" "),s=[];let n="";return r.forEach((a,o)=>{const l=wi(`${a} `,i),h=wi(n,i);if(l>e){const{hyphenatedStrings:d,remainingWord:p}=$2(a,e,"-",i);s.push(n,...d),n=p}else h+l>=e?(s.push(n),n=a):n=[n,a].filter(Boolean).join(" ");o+1===r.length&&s.push(n)}),s.filter(a=>a!=="").join(i.joinWith)},(t,e,i)=>`${t}${e}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),$2=Po((t,e,i="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const s=[...t],n=[];let a="";return s.forEach((o,l)=>{const h=`${a}${o}`;if(wi(h,r)>=e){const f=l+1,d=s.length===f,p=`${h}${i}`;n.push(d?h:p),a=""}else a=h}),{hyphenatedStrings:n,remainingWord:a}},(t,e,i="-",r)=>`${t}${e}${i}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function Ka(t,e){return Yo(t,e).height}function wi(t,e){return Yo(t,e).width}const Yo=Po((t,e)=>{const{fontSize:i=12,fontFamily:r="Arial",fontWeight:s=400}=e;if(!t)return{width:0,height:0};const[,n]=ds(i),a=["sans-serif",r],o=t.split(mt.lineBreakRegex),l=[],h=yt("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const d of a){let p=0;const y={width:0,height:0,lineHeight:0};for(const x of o){const _=j2();_.text=x||Rh;const C=X2(u,_).style("font-size",n).style("font-weight",s).style("font-family",d),k=(C._groups||C)[0][0].getBBox();if(k.width===0&&k.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,k.width)),p=Math.round(k.height),y.height+=p,y.lineHeight=Math.round(Math.max(y.lineHeight,p))}l.push(y)}u.remove();const f=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[f]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`);class K2{constructor(e=!1,i){this.count=0,this.count=i?i.length:0,this.next=e?()=>this.count++:()=>Date.now()}}let dn;const Q2=function(t){return dn=dn||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),dn.innerHTML=t,unescape(dn.textContent)};function Vh(t){return"str"in t}const Z2=(t,e,i,r)=>{var s;if(!r)return;const n=(s=t.node())==null?void 0:s.getBBox();n&&t.append("text").text(r).attr("x",n.x+n.width/2).attr("y",-i).attr("class",e)},ds=t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]};function tn(t,e){return qf({},t,e)}const Rt={assignWithDepth:Ee,wrapLabel:Mh,calculateTextHeight:Ka,calculateTextWidth:wi,calculateTextDimensions:Yo,cleanAndMerge:tn,detectInit:P2,detectDirective:Dh,isSubstringInArray:V2,interpolateToCurve:hi,calcLabelPosition:Y2,calcCardinalityPosition:U2,calcTerminalLabelPosition:H2,formatUrl:q2,getStylesFromArray:fi,generateId:Oh,random:Ph,runFunc:z2,entityDecode:Q2,insertTitle:Z2,parseFontSize:ds,InitIDGenerator:K2},J2=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/#\w+;/g,function(i){const r=i.substring(1,i.length-1);return/^\+?\d+$/.test(r)?""+r+"":""+r+""}),e},Fs=function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},nc="10.7.0",ts=Object.freeze(ae);let Xe=Ee({},ts),qh,es=[],Es=Ee({},ts);const da=(t,e)=>{let i=Ee({},t),r={};for(const s of e)Yh(s),r=Ee(r,s);if(i=Ee(i,r),r.theme&&r.theme in Ki){const s=Ee({},qh),n=Ee(s.themeVariables||{},r.themeVariables);i.theme&&i.theme in Ki&&(i.themeVariables=Ki[i.theme].getThemeVariables(n))}return Es=i,Uh(Es),Es},tp=t=>(Xe=Ee({},ts),Xe=Ee(Xe,t),t.theme&&Ki[t.theme]&&(Xe.themeVariables=Ki[t.theme].getThemeVariables(t.themeVariables)),da(Xe,es),Xe),ep=t=>{qh=Ee({},t)},ip=t=>(Xe=Ee(Xe,t),da(Xe,es),Xe),zh=()=>Ee({},Xe),Wh=t=>(Uh(t),Ee(Es,t),Ae()),Ae=()=>Ee({},Es),Yh=t=>{t&&(["secure",...Xe.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(A.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&Yh(t[e])}))},rp=t=>{Bn(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),es.push(t),da(Xe,es)},In=(t=Xe)=>{es=[],da(t,es)},sp={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},ac={},np=t=>{ac[t]||(A.warn(sp[t]),ac[t]=!0)},Uh=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&np("LAZY_LOAD_DEPRECATED")},Hh="c4",ap=t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),op=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>C4),void 0,import.meta.url);return{id:Hh,diagram:t}},lp={id:Hh,detector:ap,loader:op},cp=lp,Gh="flowchart",hp=(t,e)=>{var i,r;return((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"||((r=e?.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},up=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>ob),void 0,import.meta.url);return{id:Gh,diagram:t}},dp={id:Gh,detector:hp,loader:up},fp=dp,jh="flowchart-v2",pp=(t,e)=>{var i,r,s;return((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="dagre-d3"||((r=e?.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)&&((s=e?.flowchart)==null?void 0:s.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)},gp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>cb),void 0,import.meta.url);return{id:jh,diagram:t}},yp={id:jh,detector:pp,loader:gp},mp=yp,Xh="er",xp=t=>/^\s*erDiagram/.test(t),bp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>Db),void 0,import.meta.url);return{id:Xh,diagram:t}},kp={id:Xh,detector:xp,loader:bp},_p=kp,$h="gitGraph",Tp=t=>/^\s*gitGraph/.test(t),Cp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>h5),void 0,import.meta.url);return{id:$h,diagram:t}},Ep={id:$h,detector:Tp,loader:Cp},vp=Ep,Kh="gantt",Sp=t=>/^\s*gantt/.test(t),wp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>tk),void 0,import.meta.url);return{id:Kh,diagram:t}},Ap={id:Kh,detector:Sp,loader:wp},Lp=Ap,Qh="info",Bp=t=>/^\s*info/.test(t),Ip=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>ck),void 0,import.meta.url);return{id:Qh,diagram:t}},Fp={id:Qh,detector:Bp,loader:Ip},Zh="pie",Rp=t=>/^\s*pie/.test(t),Dp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>Sk),void 0,import.meta.url);return{id:Zh,diagram:t}},Np={id:Zh,detector:Rp,loader:Dp},Jh="quadrantChart",Op=t=>/^\s*quadrantChart/.test(t),Pp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>jk),void 0,import.meta.url);return{id:Jh,diagram:t}},Mp={id:Jh,detector:Op,loader:Pp},Vp=Mp,t1="xychart",qp=t=>/^\s*xychart-beta/.test(t),zp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>T6),void 0,import.meta.url);return{id:t1,diagram:t}},Wp={id:t1,detector:qp,loader:zp},Yp=Wp,e1="requirement",Up=t=>/^\s*requirement(Diagram)?/.test(t),Hp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>t_),void 0,import.meta.url);return{id:e1,diagram:t}},Gp={id:e1,detector:Up,loader:Hp},jp=Gp,i1="sequence",Xp=t=>/^\s*sequenceDiagram/.test(t),$p=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>c7),void 0,import.meta.url);return{id:i1,diagram:t}},Kp={id:i1,detector:Xp,loader:$p},Qp=Kp,r1="class",Zp=(t,e)=>{var i;return((i=e?.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},Jp=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>U7),void 0,import.meta.url);return{id:r1,diagram:t}},tg={id:r1,detector:Zp,loader:Jp},eg=tg,s1="classDiagram",ig=(t,e)=>{var i;return/^\s*classDiagram/.test(t)&&((i=e?.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},rg=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>Z7),void 0,import.meta.url);return{id:s1,diagram:t}},sg={id:s1,detector:ig,loader:rg},ng=sg,n1="state",ag=(t,e)=>{var i;return((i=e?.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},og=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>WT),void 0,import.meta.url);return{id:n1,diagram:t}},lg={id:n1,detector:ag,loader:og},cg=lg,a1="stateDiagram",hg=(t,e)=>{var i;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((i=e?.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper")},ug=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>p8),void 0,import.meta.url);return{id:a1,diagram:t}},dg={id:a1,detector:hg,loader:ug},fg=dg,o1="journey",pg=t=>/^\s*journey/.test(t),gg=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>P8),void 0,import.meta.url);return{id:o1,diagram:t}},yg={id:o1,detector:pg,loader:gg},mg=yg,xg=function(t,e){for(let i of e)t.attr(i[0],i[1])},bg=function(t,e,i){let r=new Map;return i?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},ze=function(t,e,i,r){const s=bg(e,i,r);xg(t,s)},yr=function(t,e,i,r){const s=e.node().getBBox(),n=s.width,a=s.height;A.info(`SVG bounds: ${n}x${a}`,s);let o=0,l=0;A.info(`Graph bounds: ${o}x${l}`,t),o=n+i*2,l=a+i*2,A.info(`Calculated bounds: ${o}x${l}`),ze(e,l,o,r);const h=`${s.x-i} ${s.y-i} ${s.width+2*i} ${s.height+2*i}`;e.attr("viewBox",h)},_n={},kg=(t,e,i)=>{let r="";return t in _n&&_n[t]?r=_n[t](i):A.warn(`No theme found for ${t}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${e}
`},_g=(t,e)=>{e!==void 0&&(_n[t]=e)},Tg=kg;let Uo="",Ho="",Go="";const jo=t=>ve(t,Ae()),We=()=>{Uo="",Go="",Ho=""},Ne=t=>{Uo=jo(t).replace(/^\s+/g,"")},Ye=()=>Uo,Ue=t=>{Go=jo(t).replace(/\n\s+/g,`
`)},He=()=>Go,ei=t=>{Ho=jo(t)},Ge=()=>Ho,l1=Object.freeze(Object.defineProperty({__proto__:null,clear:We,getAccDescription:He,getAccTitle:Ye,getDiagramTitle:Ge,setAccDescription:Ue,setAccTitle:Ne,setDiagramTitle:ei},Symbol.toStringTag,{value:"Module"})),Cg=A,Eg=qo,Y=Ae,vg=Wh,c1=ts,Sg=t=>ve(t,Y()),h1=yr,wg=()=>l1,Fn={},Rn=(t,e,i)=>{var r;if(Fn[t])throw new Error(`Diagram ${t} already registered.`);Fn[t]=e,i&&Fh(t,i),_g(t,e.styles),(r=e.injectUtils)==null||r.call(e,Cg,Eg,Y,Sg,h1,wg(),()=>{})},Xo=t=>{if(t in Fn)return Fn[t];throw new Ag(t)};class Ag extends Error{constructor(e){super(`Diagram ${e} not found.`)}}const fa=t=>{var e;const{securityLevel:i}=Y();let r=yt("body");if(i==="sandbox"){const a=((e=yt(`#i${t}`).node())==null?void 0:e.contentDocument)??document;r=yt(a.body)}return r.select(`#${t}`)},Lg=(t,e,i)=>{A.debug(`renering svg for syntax error
`);const r=fa(e);r.attr("viewBox","0 0 2412 512"),ze(r,100,512,!0);const s=r.append("g");s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},u1={draw:Lg},Bg=u1,Ig={db:{},renderer:u1,parser:{parser:{yy:{}},parse:()=>{}}},Fg=Ig,d1="flowchart-elk",Rg=(t,e)=>{var i;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="elk")},Dg=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>tC),void 0,import.meta.url);return{id:d1,diagram:t}},Ng={id:d1,detector:Rg,loader:Dg},Og=Ng,f1="timeline",Pg=t=>/^\s*timeline/.test(t),Mg=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>CC),void 0,import.meta.url);return{id:f1,diagram:t}},Vg={id:f1,detector:Pg,loader:Mg},qg=Vg,p1="mindmap",zg=t=>/^\s*mindmap/.test(t),Wg=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>eE),void 0,import.meta.url);return{id:p1,diagram:t}},Yg={id:p1,detector:zg,loader:Wg},Ug=Yg,g1="sankey",Hg=t=>/^\s*sankey-beta/.test(t),Gg=async()=>{const{diagram:t}=await ce(()=>Promise.resolve().then(()=>mE),void 0,import.meta.url);return{id:g1,diagram:t}},jg={id:g1,detector:Hg,loader:Gg},Xg=jg;let oc=!1;const $o=()=>{oc||(oc=!0,Rn("error",Fg,t=>t.toLowerCase().trim()==="error"),Rn("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),Ih(cp,ng,eg,_p,Lp,Fp,Np,jp,Qp,Og,mp,fp,Ug,qg,vp,fg,cg,mg,Vp,Xg,Yp))};class y1{constructor(e,i={}){this.text=e,this.metadata=i,this.type="graph",this.text=J2(e),this.text+=`
`;const r=Ae();try{this.type=ua(e,r)}catch(n){this.type="error",this.detectError=n}const s=Xo(this.type);A.debug("Type "+this.type),this.db=s.db,this.renderer=s.renderer,this.parser=s.parser,this.parser.parser.yy=this.db,this.init=s.init,this.parse()}parse(){var e,i,r,s,n;if(this.detectError)throw this.detectError;(i=(e=this.db).clear)==null||i.call(e);const a=Ae();(r=this.init)==null||r.call(this,a),this.metadata.title&&((n=(s=this.db).setDiagramTitle)==null||n.call(s,this.metadata.title)),this.parser.parse(this.text)}async render(e,i){await this.renderer.draw(this.text,e,i,this)}getParser(){return this.parser}getType(){return this.type}}const $g=async(t,e={})=>{const i=ua(t,Ae());try{Xo(i)}catch{const s=D2(i);if(!s)throw new Bh(`Diagram ${i} not found.`);const{id:n,diagram:a}=await s();Rn(n,a)}return new y1(t,e)};let Qa=[];const Kg=t=>{Qa.push(t)},Qg=()=>{Qa.forEach(t=>{t()}),Qa=[]},Zg="graphics-document document";function Jg(t,e){t.attr("role",Zg),e!==""&&t.attr("aria-roledescription",e)}function ty(t,e,i,r){if(t.insert!==void 0){if(i){const s=`chart-desc-${r}`;t.attr("aria-describedby",s),t.insert("desc",":first-child").attr("id",s).text(i)}if(e){const s=`chart-title-${r}`;t.attr("aria-labelledby",s),t.insert("title",":first-child").attr("id",s).text(e)}}}const ey=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function m1(t){return typeof t>"u"||t===null}function iy(t){return typeof t=="object"&&t!==null}function ry(t){return Array.isArray(t)?t:m1(t)?[]:[t]}function sy(t,e){var i,r,s,n;if(e)for(n=Object.keys(e),i=0,r=n.length;i<r;i+=1)s=n[i],t[s]=e[s];return t}function ny(t,e){var i="",r;for(r=0;r<e;r+=1)i+=t;return i}function ay(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var oy=m1,ly=iy,cy=ry,hy=ny,uy=ay,dy=sy,Pe={isNothing:oy,isObject:ly,toArray:cy,repeat:hy,isNegativeZero:uy,extend:dy};function x1(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function Rs(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=x1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Rs.prototype=Object.create(Error.prototype);Rs.prototype.constructor=Rs;Rs.prototype.toString=function(e){return this.name+": "+x1(this,e)};var Hi=Rs;function Oa(t,e,i,r,s){var n="",a="",o=Math.floor(s/2)-1;return r-e>o&&(n=" ... ",e=r-o+n.length),i-r>o&&(a=" ...",i=r+o-a.length),{str:n+t.slice(e,i).replace(/\t/g,"")+a,pos:r-e+n.length}}function Pa(t,e){return Pe.repeat(" ",e-t.length)+t}function fy(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],s=[],n,a=-1;n=i.exec(t.buffer);)s.push(n.index),r.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,h,u=Math.min(t.line+e.linesAfter,s.length).toString().length,f=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)h=Oa(t.buffer,r[a-l],s[a-l],t.position-(r[a]-r[a-l]),f),o=Pe.repeat(" ",e.indent)+Pa((t.line-l+1).toString(),u)+" | "+h.str+`
`+o;for(h=Oa(t.buffer,r[a],s[a],t.position,f),o+=Pe.repeat(" ",e.indent)+Pa((t.line+1).toString(),u)+" | "+h.str+`
`,o+=Pe.repeat("-",e.indent+u+3+h.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=s.length);l++)h=Oa(t.buffer,r[a+l],s[a+l],t.position-(r[a]-r[a+l]),f),o+=Pe.repeat(" ",e.indent)+Pa((t.line+l+1).toString(),u)+" | "+h.str+`
`;return o.replace(/\n$/,"")}var py=fy,gy=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],yy=["scalar","sequence","mapping"];function my(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){e[String(r)]=i})}),e}function xy(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(gy.indexOf(i)===-1)throw new Hi('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=my(e.styleAliases||null),yy.indexOf(this.kind)===-1)throw new Hi('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var De=xy;function lc(t,e){var i=[];return t[e].forEach(function(r){var s=i.length;i.forEach(function(n,a){n.tag===r.tag&&n.kind===r.kind&&n.multi===r.multi&&(s=a)}),i[s]=r}),i}function by(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function r(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(r);return t}function Za(t){return this.extend(t)}Za.prototype.extend=function(e){var i=[],r=[];if(e instanceof De)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Hi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(n){if(!(n instanceof De))throw new Hi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Hi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Hi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(n){if(!(n instanceof De))throw new Hi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Za.prototype);return s.implicit=(this.implicit||[]).concat(i),s.explicit=(this.explicit||[]).concat(r),s.compiledImplicit=lc(s,"implicit"),s.compiledExplicit=lc(s,"explicit"),s.compiledTypeMap=by(s.compiledImplicit,s.compiledExplicit),s};var ky=Za,_y=new De("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Ty=new De("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Cy=new De("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Ey=new ky({explicit:[_y,Ty,Cy]});function vy(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Sy(){return null}function wy(t){return t===null}var Ay=new De("tag:yaml.org,2002:null",{kind:"scalar",resolve:vy,construct:Sy,predicate:wy,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Ly(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function By(t){return t==="true"||t==="True"||t==="TRUE"}function Iy(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Fy=new De("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Ly,construct:By,predicate:Iy,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Ry(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Dy(t){return 48<=t&&t<=55}function Ny(t){return 48<=t&&t<=57}function Oy(t){if(t===null)return!1;var e=t.length,i=0,r=!1,s;if(!e)return!1;if(s=t[i],(s==="-"||s==="+")&&(s=t[++i]),s==="0"){if(i+1===e)return!0;if(s=t[++i],s==="b"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(s!=="0"&&s!=="1")return!1;r=!0}return r&&s!=="_"}if(s==="x"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!Ry(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}if(s==="o"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!Dy(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}}if(s==="_")return!1;for(;i<e;i++)if(s=t[i],s!=="_"){if(!Ny(t.charCodeAt(i)))return!1;r=!0}return!(!r||s==="_")}function Py(t){var e=t,i=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function My(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Pe.isNegativeZero(t)}var Vy=new De("tag:yaml.org,2002:int",{kind:"scalar",resolve:Oy,construct:Py,predicate:My,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),qy=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function zy(t){return!(t===null||!qy.test(t)||t[t.length-1]==="_")}function Wy(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var Yy=/^[-+]?[0-9]+e/;function Uy(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pe.isNegativeZero(t))return"-0.0";return i=t.toString(10),Yy.test(i)?i.replace("e",".e"):i}function Hy(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Pe.isNegativeZero(t))}var Gy=new De("tag:yaml.org,2002:float",{kind:"scalar",resolve:zy,construct:Wy,predicate:Hy,represent:Uy,defaultStyle:"lowercase"}),b1=Ey.extend({implicit:[Ay,Fy,Vy,Gy]}),jy=b1,k1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Xy(t){return t===null?!1:k1.exec(t)!==null||_1.exec(t)!==null}function $y(t){var e,i,r,s,n,a,o,l=0,h=null,u,f,d;if(e=k1.exec(t),e===null&&(e=_1.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(i,r,s));if(n=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],f=+(e[11]||0),h=(u*60+f)*6e4,e[9]==="-"&&(h=-h)),d=new Date(Date.UTC(i,r,s,n,a,o,l)),h&&d.setTime(d.getTime()-h),d}function Ky(t){return t.toISOString()}var Qy=new De("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Xy,construct:$y,instanceOf:Date,represent:Ky});function Zy(t){return t==="<<"||t===null}var Jy=new De("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Zy}),Ko=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function t3(t){if(t===null)return!1;var e,i,r=0,s=t.length,n=Ko;for(i=0;i<s;i++)if(e=n.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function e3(t){var e,i,r=t.replace(/[\r\n=]/g,""),s=r.length,n=Ko,a=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|n.indexOf(r.charAt(e));return i=s%4*6,i===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):i===18?(o.push(a>>10&255),o.push(a>>2&255)):i===12&&o.push(a>>4&255),new Uint8Array(o)}function i3(t){var e="",i=0,r,s,n=t.length,a=Ko;for(r=0;r<n;r++)r%3===0&&r&&(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]),i=(i<<8)+t[r];return s=n%3,s===0?(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]):s===2?(e+=a[i>>10&63],e+=a[i>>4&63],e+=a[i<<2&63],e+=a[64]):s===1&&(e+=a[i>>2&63],e+=a[i<<4&63],e+=a[64],e+=a[64]),e}function r3(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var s3=new De("tag:yaml.org,2002:binary",{kind:"scalar",resolve:t3,construct:e3,predicate:r3,represent:i3}),n3=Object.prototype.hasOwnProperty,a3=Object.prototype.toString;function o3(t){if(t===null)return!0;var e=[],i,r,s,n,a,o=t;for(i=0,r=o.length;i<r;i+=1){if(s=o[i],a=!1,a3.call(s)!=="[object Object]")return!1;for(n in s)if(n3.call(s,n))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(n)===-1)e.push(n);else return!1}return!0}function l3(t){return t!==null?t:[]}var c3=new De("tag:yaml.org,2002:omap",{kind:"sequence",resolve:o3,construct:l3}),h3=Object.prototype.toString;function u3(t){if(t===null)return!0;var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1){if(r=a[e],h3.call(r)!=="[object Object]"||(s=Object.keys(r),s.length!==1))return!1;n[e]=[s[0],r[s[0]]]}return!0}function d3(t){if(t===null)return[];var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1)r=a[e],s=Object.keys(r),n[e]=[s[0],r[s[0]]];return n}var f3=new De("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:u3,construct:d3}),p3=Object.prototype.hasOwnProperty;function g3(t){if(t===null)return!0;var e,i=t;for(e in i)if(p3.call(i,e)&&i[e]!==null)return!1;return!0}function y3(t){return t!==null?t:{}}var m3=new De("tag:yaml.org,2002:set",{kind:"mapping",resolve:g3,construct:y3}),x3=jy.extend({implicit:[Qy,Jy],explicit:[s3,c3,f3,m3]}),pr=Object.prototype.hasOwnProperty,Dn=1,T1=2,C1=3,Nn=4,Ma=1,b3=2,cc=3,k3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_3=/[\x85\u2028\u2029]/,T3=/[,\[\]\{\}]/,E1=/^(?:!|!!|![a-z\-]+!)$/i,v1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function hc(t){return Object.prototype.toString.call(t)}function Ai(t){return t===10||t===13}function vr(t){return t===9||t===32}function Qe(t){return t===9||t===32||t===10||t===13}function Yr(t){return t===44||t===91||t===93||t===123||t===125}function C3(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function E3(t){return t===120?2:t===117?4:t===85?8:0}function v3(t){return 48<=t&&t<=57?t-48:-1}function uc(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function S3(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var S1=new Array(256),w1=new Array(256);for(var zr=0;zr<256;zr++)S1[zr]=uc(zr)?1:0,w1[zr]=uc(zr);function w3(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||x3,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function A1(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=py(i),new Hi(e,i)}function St(t,e){throw A1(t,e)}function On(t,e){t.onWarning&&t.onWarning.call(null,A1(t,e))}var dc={YAML:function(e,i,r){var s,n,a;e.version!==null&&St(e,"duplication of %YAML directive"),r.length!==1&&St(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),s===null&&St(e,"ill-formed argument of the YAML directive"),n=parseInt(s[1],10),a=parseInt(s[2],10),n!==1&&St(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&On(e,"unsupported YAML version of the document")},TAG:function(e,i,r){var s,n;r.length!==2&&St(e,"TAG directive accepts exactly two arguments"),s=r[0],n=r[1],E1.test(s)||St(e,"ill-formed tag handle (first argument) of the TAG directive"),pr.call(e.tagMap,s)&&St(e,'there is a previously declared suffix for "'+s+'" tag handle'),v1.test(n)||St(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{St(e,"tag prefix is malformed: "+n)}e.tagMap[s]=n}};function hr(t,e,i,r){var s,n,a,o;if(e<i){if(o=t.input.slice(e,i),r)for(s=0,n=o.length;s<n;s+=1)a=o.charCodeAt(s),a===9||32<=a&&a<=1114111||St(t,"expected valid JSON character");else k3.test(o)&&St(t,"the stream contains non-printable characters");t.result+=o}}function fc(t,e,i,r){var s,n,a,o;for(Pe.isObject(i)||St(t,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(i),a=0,o=s.length;a<o;a+=1)n=s[a],pr.call(e,n)||(e[n]=i[n],r[n]=!0)}function Ur(t,e,i,r,s,n,a,o,l){var h,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,u=s.length;h<u;h+=1)Array.isArray(s[h])&&St(t,"nested arrays are not supported inside keys"),typeof s=="object"&&hc(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&hc(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(h=0,u=n.length;h<u;h+=1)fc(t,e,n[h],i);else fc(t,e,n,i);else!t.json&&!pr.call(i,s)&&pr.call(e,s)&&(t.line=a||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,St(t,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[s]=n,delete i[s];return e}function Qo(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):St(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ge(t,e,i){for(var r=0,s=t.input.charCodeAt(t.position);s!==0;){for(;vr(s);)s===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(e&&s===35)do s=t.input.charCodeAt(++t.position);while(s!==10&&s!==13&&s!==0);if(Ai(s))for(Qo(t),s=t.input.charCodeAt(t.position),r++,t.lineIndent=0;s===32;)t.lineIndent++,s=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&On(t,"deficient indentation"),r}function pa(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||Qe(i)))}function Zo(t,e){e===1?t.result+=" ":e>1&&(t.result+=Pe.repeat(`
`,e-1))}function A3(t,e,i){var r,s,n,a,o,l,h,u,f=t.kind,d=t.result,p;if(p=t.input.charCodeAt(t.position),Qe(p)||Yr(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(s=t.input.charCodeAt(t.position+1),Qe(s)||i&&Yr(s)))return!1;for(t.kind="scalar",t.result="",n=a=t.position,o=!1;p!==0;){if(p===58){if(s=t.input.charCodeAt(t.position+1),Qe(s)||i&&Yr(s))break}else if(p===35){if(r=t.input.charCodeAt(t.position-1),Qe(r))break}else{if(t.position===t.lineStart&&pa(t)||i&&Yr(p))break;if(Ai(p))if(l=t.line,h=t.lineStart,u=t.lineIndent,ge(t,!1,-1),t.lineIndent>=e){o=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=h,t.lineIndent=u;break}}o&&(hr(t,n,a,!1),Zo(t,t.line-l),n=a=t.position,o=!1),vr(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return hr(t,n,a,!1),t.result?!0:(t.kind=f,t.result=d,!1)}function L3(t,e){var i,r,s;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=s=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(hr(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,s=t.position;else return!0;else Ai(i)?(hr(t,r,s,!0),Zo(t,ge(t,!1,e)),r=s=t.position):t.position===t.lineStart&&pa(t)?St(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);St(t,"unexpected end of the stream within a single quoted scalar")}function B3(t,e){var i,r,s,n,a,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return hr(t,i,t.position,!0),t.position++,!0;if(o===92){if(hr(t,i,t.position,!0),o=t.input.charCodeAt(++t.position),Ai(o))ge(t,!1,e);else if(o<256&&S1[o])t.result+=w1[o],t.position++;else if((a=E3(o))>0){for(s=a,n=0;s>0;s--)o=t.input.charCodeAt(++t.position),(a=C3(o))>=0?n=(n<<4)+a:St(t,"expected hexadecimal character");t.result+=S3(n),t.position++}else St(t,"unknown escape sequence");i=r=t.position}else Ai(o)?(hr(t,i,r,!0),Zo(t,ge(t,!1,e)),i=r=t.position):t.position===t.lineStart&&pa(t)?St(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}St(t,"unexpected end of the stream within a double quoted scalar")}function I3(t,e){var i=!0,r,s,n,a=t.tag,o,l=t.anchor,h,u,f,d,p,y=Object.create(null),x,_,C,k;if(k=t.input.charCodeAt(t.position),k===91)u=93,p=!1,o=[];else if(k===123)u=125,p=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),k=t.input.charCodeAt(++t.position);k!==0;){if(ge(t,!0,e),k=t.input.charCodeAt(t.position),k===u)return t.position++,t.tag=a,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=o,!0;i?k===44&&St(t,"expected the node content, but found ','"):St(t,"missed comma between flow collection entries"),_=x=C=null,f=d=!1,k===63&&(h=t.input.charCodeAt(t.position+1),Qe(h)&&(f=d=!0,t.position++,ge(t,!0,e))),r=t.line,s=t.lineStart,n=t.position,is(t,e,Dn,!1,!0),_=t.tag,x=t.result,ge(t,!0,e),k=t.input.charCodeAt(t.position),(d||t.line===r)&&k===58&&(f=!0,k=t.input.charCodeAt(++t.position),ge(t,!0,e),is(t,e,Dn,!1,!0),C=t.result),p?Ur(t,o,y,_,x,C,r,s,n):f?o.push(Ur(t,null,y,_,x,C,r,s,n)):o.push(x),ge(t,!0,e),k=t.input.charCodeAt(t.position),k===44?(i=!0,k=t.input.charCodeAt(++t.position)):i=!1}St(t,"unexpected end of the stream within a flow collection")}function F3(t,e){var i,r,s=Ma,n=!1,a=!1,o=e,l=0,h=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Ma===s?s=f===43?cc:b3:St(t,"repeat of a chomping mode identifier");else if((u=v3(f))>=0)u===0?St(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?St(t,"repeat of an indentation width identifier"):(o=e+u-1,a=!0);else break;if(vr(f)){do f=t.input.charCodeAt(++t.position);while(vr(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Ai(f)&&f!==0)}for(;f!==0;){for(Qo(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!a||t.lineIndent<o)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>o&&(o=t.lineIndent),Ai(f)){l++;continue}if(t.lineIndent<o){s===cc?t.result+=Pe.repeat(`
`,n?1+l:l):s===Ma&&n&&(t.result+=`
`);break}for(r?vr(f)?(h=!0,t.result+=Pe.repeat(`
`,n?1+l:l)):h?(h=!1,t.result+=Pe.repeat(`
`,l+1)):l===0?n&&(t.result+=" "):t.result+=Pe.repeat(`
`,l):t.result+=Pe.repeat(`
`,n?1+l:l),n=!0,a=!0,l=0,i=t.position;!Ai(f)&&f!==0;)f=t.input.charCodeAt(++t.position);hr(t,i,t.position,!1)}return!0}function pc(t,e){var i,r=t.tag,s=t.anchor,n=[],a,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=n),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,St(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!Qe(a))));){if(o=!0,t.position++,ge(t,!0,-1)&&t.lineIndent<=e){n.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,is(t,e,C1,!1,!0),n.push(t.result),ge(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)St(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=r,t.anchor=s,t.kind="sequence",t.result=n,!0):!1}function R3(t,e,i){var r,s,n,a,o,l,h=t.tag,u=t.anchor,f={},d=Object.create(null),p=null,y=null,x=null,_=!1,C=!1,k;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),k=t.input.charCodeAt(t.position);k!==0;){if(!_&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,St(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),n=t.line,(k===63||k===58)&&Qe(r))k===63?(_&&(Ur(t,f,d,p,y,null,a,o,l),p=y=x=null),C=!0,_=!0,s=!0):_?(_=!1,s=!0):St(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,k=r;else{if(a=t.line,o=t.lineStart,l=t.position,!is(t,i,T1,!1,!0))break;if(t.line===n){for(k=t.input.charCodeAt(t.position);vr(k);)k=t.input.charCodeAt(++t.position);if(k===58)k=t.input.charCodeAt(++t.position),Qe(k)||St(t,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Ur(t,f,d,p,y,null,a,o,l),p=y=x=null),C=!0,_=!1,s=!1,p=t.tag,y=t.result;else if(C)St(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(C)St(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===n||t.lineIndent>e)&&(_&&(a=t.line,o=t.lineStart,l=t.position),is(t,e,Nn,!0,s)&&(_?y=t.result:x=t.result),_||(Ur(t,f,d,p,y,x,a,o,l),p=y=x=null),ge(t,!0,-1),k=t.input.charCodeAt(t.position)),(t.line===n||t.lineIndent>e)&&k!==0)St(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return _&&Ur(t,f,d,p,y,null,a,o,l),C&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=f),C}function D3(t){var e,i=!1,r=!1,s,n,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&St(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(i=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,s="!!",a=t.input.charCodeAt(++t.position)):s="!",e=t.position,i){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(n=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):St(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Qe(a);)a===33&&(r?St(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(e-1,t.position+1),E1.test(s)||St(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),T3.test(n)&&St(t,"tag suffix cannot contain flow indicator characters")}n&&!v1.test(n)&&St(t,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{St(t,"tag name is malformed: "+n)}return i?t.tag=n:pr.call(t.tagMap,s)?t.tag=t.tagMap[s]+n:s==="!"?t.tag="!"+n:s==="!!"?t.tag="tag:yaml.org,2002:"+n:St(t,'undeclared tag handle "'+s+'"'),!0}function N3(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&St(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Qe(i)&&!Yr(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&St(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function O3(t){var e,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Qe(r)&&!Yr(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&St(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),pr.call(t.anchorMap,i)||St(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],ge(t,!0,-1),!0}function is(t,e,i,r,s){var n,a,o,l=1,h=!1,u=!1,f,d,p,y,x,_;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,n=a=o=Nn===i||C1===i,r&&ge(t,!0,-1)&&(h=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;D3(t)||N3(t);)ge(t,!0,-1)?(h=!0,o=n,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=h||s),(l===1||Nn===i)&&(Dn===i||T1===i?x=e:x=e+1,_=t.position-t.lineStart,l===1?o&&(pc(t,_)||R3(t,_,x))||I3(t,x)?u=!0:(a&&F3(t,x)||L3(t,x)||B3(t,x)?u=!0:O3(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&St(t,"alias node should not have any properties")):A3(t,x,Dn===i)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&pc(t,_))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&St(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,d=t.implicitTypes.length;f<d;f+=1)if(y=t.implicitTypes[f],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(pr.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,d=p.length;f<d;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){y=p[f];break}y||St(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&St(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):St(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function P3(t){var e=t.position,i,r,s,n=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(ge(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(n=!0,a=t.input.charCodeAt(++t.position),i=t.position;a!==0&&!Qe(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),s=[],r.length<1&&St(t,"directive name must not be less than one character in length");a!==0;){for(;vr(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Ai(a));break}if(Ai(a))break;for(i=t.position;a!==0&&!Qe(a);)a=t.input.charCodeAt(++t.position);s.push(t.input.slice(i,t.position))}a!==0&&Qo(t),pr.call(dc,r)?dc[r](t,r,s):On(t,'unknown document directive "'+r+'"')}if(ge(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ge(t,!0,-1)):n&&St(t,"directives end mark is expected"),is(t,t.lineIndent-1,Nn,!1,!0),ge(t,!0,-1),t.checkLineBreaks&&_3.test(t.input.slice(e,t.position))&&On(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&pa(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ge(t,!0,-1));return}if(t.position<t.length-1)St(t,"end of the stream or a document separator is expected");else return}function L1(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new w3(t,e),r=t.indexOf("\0");for(r!==-1&&(i.position=r,St(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)P3(i);return i.documents}function M3(t,e,i){e!==null&&typeof e=="object"&&typeof i>"u"&&(i=e,e=null);var r=L1(t,i);if(typeof e!="function")return r;for(var s=0,n=r.length;s<n;s+=1)e(r[s])}function V3(t,e){var i=L1(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new Hi("expected a single document in the stream, but found more")}}var q3=M3,z3=V3,W3={loadAll:q3,load:z3},Y3=b1,U3=W3.load;function H3(t){const e=t.match(Lh);if(!e)return{text:t,metadata:{}};let i=U3(e[1],{schema:Y3})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const r={};return i.displayMode&&(r.displayMode=i.displayMode.toString()),i.title&&(r.title=i.title.toString()),i.config&&(r.config=i.config),{text:t.slice(e[0].length),metadata:r}}const G3=t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,i,r)=>"<"+i+r.replace(/="([^"]*)"/g,"='$1'")+">"),j3=t=>{const{text:e,metadata:i}=H3(t),{displayMode:r,title:s,config:n={}}=i;return r&&(n.gantt||(n.gantt={}),n.gantt.displayMode=r),{title:s,config:n,text:e}},X3=t=>{const e=Rt.detectInit(t)??{},i=Rt.detectDirective(t,"wrap");return Array.isArray(i)?e.wrap=i.some(({type:r})=>{}):i?.type==="wrap"&&(e.wrap=!0),{text:M2(t),directive:e}};function B1(t){const e=G3(t),i=j3(e),r=X3(i.text),s=tn(i.config,r.directive);return t=ey(r.text),{code:t,title:i.title,config:s}}const $3=5e4,K3="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Q3="sandbox",Z3="loose",J3="http://www.w3.org/2000/svg",tm="http://www.w3.org/1999/xlink",em="http://www.w3.org/1999/xhtml",im="100%",rm="100%",sm="border:0;margin:0;",nm="margin:0",am="allow-top-navigation-by-user-activation allow-popups",om='The "iframe" tag is not supported by your browser.',lm=["foreignobject"],cm=["dominant-baseline"];function I1(t){const e=B1(t);return In(),rp(e.config??{}),e}async function hm(t,e){$o(),t=I1(t).code;try{await Jo(t)}catch(i){if(e?.suppressErrors)return!1;throw i}return!0}const gc=(t,e,i=[])=>`
.${t} ${e} { ${i.join(" !important; ")} !important; }`,um=(t,e={})=>{var i;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!Da(e)){const o=t.htmlLabels||((i=t.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in e){const h=e[l];Da(h.styles)||o.forEach(u=>{r+=gc(h.id,u,h.styles)}),Da(h.textStyles)||(r+=gc(h.id,"tspan",h.textStyles))}}return r},dm=(t,e,i,r)=>{const s=um(t,i),n=Tg(e,s,t.themeVariables);return ja(c2(`${r}{${n}}`),u2)},fm=(t="",e,i)=>{let r=t;return!i&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=Fs(r),r=r.replace(/<br>/g,"<br/>"),r},pm=(t="",e)=>{var i,r;const s=(r=(i=e?.viewBox)==null?void 0:i.baseVal)!=null&&r.height?e.viewBox.baseVal.height+"px":rm,n=btoa('<body style="'+nm+'">'+t+"</body>");return`<iframe style="width:${im};height:${s};${sm}" src="data:text/html;base64,${n}" sandbox="${am}">
  ${om}
</iframe>`},yc=(t,e,i,r,s)=>{const n=t.append("div");n.attr("id",i),r&&n.attr("style",r);const a=n.append("svg").attr("id",e).attr("width","100%").attr("xmlns",J3);return s&&a.attr("xmlns:xlink",s),a.append("g"),t};function mc(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const gm=(t,e,i,r)=>{var s,n,a;(s=t.getElementById(e))==null||s.remove(),(n=t.getElementById(i))==null||n.remove(),(a=t.getElementById(r))==null||a.remove()},ym=async function(t,e,i){var r,s,n,a,o,l;$o();const h=I1(e);e=h.code;const u=Ae();A.debug(u),e.length>(u?.maxTextSize??$3)&&(e=K3);const f="#"+t,d="i"+t,p="#"+d,y="d"+t,x="#"+y;let _=yt("body");const C=u.securityLevel===Q3,k=u.securityLevel===Z3,R=u.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),C){const B=mc(yt(i),d);_=yt(B.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt(i);yc(_,t,y,`font-family: ${R}`,tm)}else{if(gm(document,t,y,d),C){const B=mc(yt("body"),d);_=yt(B.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt("body");yc(_,t,y)}let F,L;try{F=await Jo(e,{title:h.title})}catch(B){F=new y1("error"),L=B}const E=_.select(x).node(),I=F.type,S=E.firstChild,b=S.firstChild,T=(s=(r=F.renderer).getClasses)==null?void 0:s.call(r,e,F),g=dm(u,I,T,f),w=document.createElement("style");w.innerHTML=g,S.insertBefore(w,b);try{await F.renderer.draw(e,t,nc,F)}catch(B){throw Bg.draw(e,t,nc),B}const m=_.select(`${x} svg`),P=(a=(n=F.db).getAccTitle)==null?void 0:a.call(n),j=(l=(o=F.db).getAccDescription)==null?void 0:l.call(o);xm(I,m,P,j),_.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",em);let N=_.select(x).node().innerHTML;if(A.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),N=fm(N,C,ke(u.arrowMarkerAbsolute)),C){const B=_.select(x+" svg").node();N=pm(N,B)}else k||(N=jr.sanitize(N,{ADD_TAGS:lm,ADD_ATTR:cm}));if(Qg(),L)throw L;const D=yt(C?p:x).node();return D&&"remove"in D&&D.remove(),{svg:N,bindFunctions:F.db.bindFunctions}};function mm(t={}){var e;t?.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),ep(t),t?.theme&&t.theme in Ki?t.themeVariables=Ki[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Ki.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?tp(t):zh();qo(i.logLevel),$o()}const Jo=(t,e={})=>{const{code:i}=B1(t);return $g(i,e)};function xm(t,e,i,r){Jg(e,t),ty(e,i,r,e.attr("id"))}const wr=Object.freeze({render:ym,parse:hm,getDiagramFromText:Jo,initialize:mm,getConfig:Ae,setConfig:Wh,getSiteConfig:zh,updateSiteConfig:ip,reset:()=>{In()},globalReset:()=>{In(ts)},defaultConfig:ts});qo(Ae().logLevel);In(Ae());const bm=async()=>{A.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(Jr).map(async([i,{detector:r,loader:s}])=>{if(s)try{Xo(i)}catch{try{const{diagram:a,id:o}=await s();Rn(o,a,r)}catch(a){throw A.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete Jr[i],a}}}))).filter(i=>i.status==="rejected");if(e.length>0){A.error(`Failed to load ${e.length} external diagrams`);for(const i of e)A.error(i);throw new Error(`Failed to load ${e.length} external diagrams`)}},km=(t,e,i)=>{A.warn(t),Vh(t)?(i&&i(t.str,t.hash),e.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},F1=async function(t={querySelector:".mermaid"}){try{await _m(t)}catch(e){if(Vh(e)&&A.error(e.str),Li.parseError&&Li.parseError(e),!t.suppressErrors)throw A.error("Use the suppressErrors option to suppress these errors"),e}},_m=async function({postRenderCallback:t,querySelector:e,nodes:i}={querySelector:".mermaid"}){const r=wr.getConfig();A.debug(`${t?"":"No "}Callback function found`);let s;if(i)s=i;else if(e)s=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");A.debug(`Found ${s.length} diagrams`),r?.startOnLoad!==void 0&&(A.debug("Start On Load: "+r?.startOnLoad),wr.updateSiteConfig({startOnLoad:r?.startOnLoad}));const n=new Rt.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(s)){A.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const h=`mermaid-${n.next()}`;a=l.innerHTML,a=yh(Rt.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Rt.detectInit(a);u&&A.debug("Detected early reinit: ",u);try{const{svg:f,bindFunctions:d}=await O1(h,a,l);l.innerHTML=f,t&&await t(h),d&&d(l)}catch(f){km(f,o,Li.parseError)}}if(o.length>0)throw o[0]},R1=function(t){wr.initialize(t)},Tm=async function(t,e,i){A.warn("mermaid.init is deprecated. Please use run instead."),t&&R1(t);const r={postRenderCallback:i,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await F1(r)},Cm=async(t,{lazyLoad:e=!0}={})=>{Ih(...t),e===!1&&await bm()},D1=function(){if(Li.startOnLoad){const{startOnLoad:t}=wr.getConfig();t&&Li.run().catch(e=>A.error("Mermaid failed to initialize",e))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",D1,!1)}const Em=function(t){Li.parseError=t},Pn=[];let Va=!1;const N1=async()=>{if(!Va){for(Va=!0;Pn.length>0;){const t=Pn.shift();if(t)try{await t()}catch(e){A.error("Error executing queue",e)}}Va=!1}},vm=async(t,e)=>new Promise((i,r)=>{const s=()=>new Promise((n,a)=>{wr.parse(t,e).then(o=>{n(o),i(o)},o=>{var l;A.error("Error parsing",o),(l=Li.parseError)==null||l.call(Li,o),a(o),r(o)})});Pn.push(s),N1().catch(r)}),O1=(t,e,i)=>new Promise((r,s)=>{const n=()=>new Promise((a,o)=>{wr.render(t,e,i).then(l=>{a(l),r(l)},l=>{var h;A.error("Error parsing",l),(h=Li.parseError)==null||h.call(Li,l),o(l),s(l)})});Pn.push(n),N1().catch(s)}),Li={startOnLoad:!0,mermaidAPI:wr,parse:vm,render:O1,init:Tm,run:F1,registerExternalDiagrams:Cm,initialize:R1,parseError:void 0,contentLoaded:D1,setParseErrorHandler:Em,detectType:ua},ga=(t,e)=>{const i=t.append("rect");if(i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),e.rx!==void 0&&i.attr("rx",e.rx),e.ry!==void 0&&i.attr("ry",e.ry),e.attrs!==void 0)for(const r in e.attrs)i.attr(r,e.attrs[r]);return e.class!==void 0&&i.attr("class",e.class),i},P1=(t,e)=>{const i={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};ga(t,i).lower()},Sm=(t,e)=>{const i=e.text.replace(Js," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},wm=(t,e,i,r)=>{const s=t.append("image");s.attr("x",e),s.attr("y",i);const n=Dr.sanitizeUrl(r);s.attr("xlink:href",n)},Am=(t,e,i,r)=>{const s=t.append("use");s.attr("x",e),s.attr("y",i);const n=Dr.sanitizeUrl(r);s.attr("xlink:href",`#${n}`)},Or=()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),tl=()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0});var Mn=function(){var t=function(pt,ut,ot,lt){for(ot=ot||{},lt=pt.length;lt--;ot[pt[lt]]=ut);return ot},e=[1,24],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,63],o=[1,64],l=[1,65],h=[1,66],u=[1,67],f=[1,68],d=[1,69],p=[1,29],y=[1,30],x=[1,31],_=[1,32],C=[1,33],k=[1,34],R=[1,35],F=[1,36],L=[1,37],E=[1,38],I=[1,39],S=[1,40],b=[1,41],T=[1,42],g=[1,43],w=[1,44],m=[1,45],P=[1,46],j=[1,47],N=[1,48],v=[1,50],D=[1,51],B=[1,52],z=[1,53],q=[1,54],st=[1,55],$=[1,56],ft=[1,57],Q=[1,58],H=[1,59],it=[1,60],nt=[14,42],Z=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],tt=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],O=[1,82],at=[1,83],W=[1,84],dt=[1,85],M=[12,14,42],wt=[12,14,33,42],G=[12,14,33,42,76,77,79,80],vt=[12,33],bt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Mt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:function(ut,ot,lt,ht,X,rt,et){var ct=rt.length-1;switch(X){case 3:ht.setDirection("TB");break;case 4:ht.setDirection("BT");break;case 5:ht.setDirection("RL");break;case 6:ht.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:ht.setC4Type(rt[ct-3]);break;case 19:ht.setTitle(rt[ct].substring(6)),this.$=rt[ct].substring(6);break;case 20:ht.setAccDescription(rt[ct].substring(15)),this.$=rt[ct].substring(15);break;case 21:this.$=rt[ct].trim(),ht.setTitle(this.$);break;case 22:case 23:this.$=rt[ct].trim(),ht.setAccDescription(this.$);break;case 28:case 29:rt[ct].splice(2,0,"ENTERPRISE"),ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 30:ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 31:rt[ct].splice(2,0,"CONTAINER"),ht.addContainerBoundary(...rt[ct]),this.$=rt[ct];break;case 32:ht.addDeploymentNode("node",...rt[ct]),this.$=rt[ct];break;case 33:ht.addDeploymentNode("nodeL",...rt[ct]),this.$=rt[ct];break;case 34:ht.addDeploymentNode("nodeR",...rt[ct]),this.$=rt[ct];break;case 35:ht.popBoundaryParseStack();break;case 39:ht.addPersonOrSystem("person",...rt[ct]),this.$=rt[ct];break;case 40:ht.addPersonOrSystem("external_person",...rt[ct]),this.$=rt[ct];break;case 41:ht.addPersonOrSystem("system",...rt[ct]),this.$=rt[ct];break;case 42:ht.addPersonOrSystem("system_db",...rt[ct]),this.$=rt[ct];break;case 43:ht.addPersonOrSystem("system_queue",...rt[ct]),this.$=rt[ct];break;case 44:ht.addPersonOrSystem("external_system",...rt[ct]),this.$=rt[ct];break;case 45:ht.addPersonOrSystem("external_system_db",...rt[ct]),this.$=rt[ct];break;case 46:ht.addPersonOrSystem("external_system_queue",...rt[ct]),this.$=rt[ct];break;case 47:ht.addContainer("container",...rt[ct]),this.$=rt[ct];break;case 48:ht.addContainer("container_db",...rt[ct]),this.$=rt[ct];break;case 49:ht.addContainer("container_queue",...rt[ct]),this.$=rt[ct];break;case 50:ht.addContainer("external_container",...rt[ct]),this.$=rt[ct];break;case 51:ht.addContainer("external_container_db",...rt[ct]),this.$=rt[ct];break;case 52:ht.addContainer("external_container_queue",...rt[ct]),this.$=rt[ct];break;case 53:ht.addComponent("component",...rt[ct]),this.$=rt[ct];break;case 54:ht.addComponent("component_db",...rt[ct]),this.$=rt[ct];break;case 55:ht.addComponent("component_queue",...rt[ct]),this.$=rt[ct];break;case 56:ht.addComponent("external_component",...rt[ct]),this.$=rt[ct];break;case 57:ht.addComponent("external_component_db",...rt[ct]),this.$=rt[ct];break;case 58:ht.addComponent("external_component_queue",...rt[ct]),this.$=rt[ct];break;case 60:ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 61:ht.addRel("birel",...rt[ct]),this.$=rt[ct];break;case 62:ht.addRel("rel_u",...rt[ct]),this.$=rt[ct];break;case 63:ht.addRel("rel_d",...rt[ct]),this.$=rt[ct];break;case 64:ht.addRel("rel_l",...rt[ct]),this.$=rt[ct];break;case 65:ht.addRel("rel_r",...rt[ct]),this.$=rt[ct];break;case 66:ht.addRel("rel_b",...rt[ct]),this.$=rt[ct];break;case 67:rt[ct].splice(0,1),ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 68:ht.updateElStyle("update_el_style",...rt[ct]),this.$=rt[ct];break;case 69:ht.updateRelStyle("update_rel_style",...rt[ct]),this.$=rt[ct];break;case 70:ht.updateLayoutConfig("update_layout_config",...rt[ct]),this.$=rt[ct];break;case 71:this.$=[rt[ct]];break;case 72:rt[ct].unshift(rt[ct-1]),this.$=rt[ct];break;case 73:case 75:this.$=rt[ct].trim();break;case 74:let te={};te[rt[ct-1].trim()]=rt[ct].trim(),this.$=te;break;case 76:this.$="";break}},table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it},{13:70,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it},{13:71,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it},{13:72,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it},{13:73,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it},{14:[1,74]},t(nt,[2,13],{43:23,29:49,30:61,32:62,20:75,34:a,36:o,37:l,38:h,39:u,40:f,41:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it}),t(nt,[2,14]),t(Z,[2,16],{12:[1,76]}),t(nt,[2,36],{12:[1,77]}),t(tt,[2,19]),t(tt,[2,20]),{25:[1,78]},{27:[1,79]},t(tt,[2,23]),{35:80,75:81,76:O,77:at,79:W,80:dt},{35:86,75:81,76:O,77:at,79:W,80:dt},{35:87,75:81,76:O,77:at,79:W,80:dt},{35:88,75:81,76:O,77:at,79:W,80:dt},{35:89,75:81,76:O,77:at,79:W,80:dt},{35:90,75:81,76:O,77:at,79:W,80:dt},{35:91,75:81,76:O,77:at,79:W,80:dt},{35:92,75:81,76:O,77:at,79:W,80:dt},{35:93,75:81,76:O,77:at,79:W,80:dt},{35:94,75:81,76:O,77:at,79:W,80:dt},{35:95,75:81,76:O,77:at,79:W,80:dt},{35:96,75:81,76:O,77:at,79:W,80:dt},{35:97,75:81,76:O,77:at,79:W,80:dt},{35:98,75:81,76:O,77:at,79:W,80:dt},{35:99,75:81,76:O,77:at,79:W,80:dt},{35:100,75:81,76:O,77:at,79:W,80:dt},{35:101,75:81,76:O,77:at,79:W,80:dt},{35:102,75:81,76:O,77:at,79:W,80:dt},{35:103,75:81,76:O,77:at,79:W,80:dt},{35:104,75:81,76:O,77:at,79:W,80:dt},t(M,[2,59]),{35:105,75:81,76:O,77:at,79:W,80:dt},{35:106,75:81,76:O,77:at,79:W,80:dt},{35:107,75:81,76:O,77:at,79:W,80:dt},{35:108,75:81,76:O,77:at,79:W,80:dt},{35:109,75:81,76:O,77:at,79:W,80:dt},{35:110,75:81,76:O,77:at,79:W,80:dt},{35:111,75:81,76:O,77:at,79:W,80:dt},{35:112,75:81,76:O,77:at,79:W,80:dt},{35:113,75:81,76:O,77:at,79:W,80:dt},{35:114,75:81,76:O,77:at,79:W,80:dt},{35:115,75:81,76:O,77:at,79:W,80:dt},{20:116,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it},{12:[1,118],33:[1,117]},{35:119,75:81,76:O,77:at,79:W,80:dt},{35:120,75:81,76:O,77:at,79:W,80:dt},{35:121,75:81,76:O,77:at,79:W,80:dt},{35:122,75:81,76:O,77:at,79:W,80:dt},{35:123,75:81,76:O,77:at,79:W,80:dt},{35:124,75:81,76:O,77:at,79:W,80:dt},{35:125,75:81,76:O,77:at,79:W,80:dt},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(nt,[2,15]),t(Z,[2,17],{21:22,19:130,22:e,23:i,24:r,26:s,28:n}),t(nt,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:i,24:r,26:s,28:n,34:a,36:o,37:l,38:h,39:u,40:f,41:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R,51:F,52:L,53:E,54:I,55:S,56:b,57:T,58:g,59:w,60:m,61:P,62:j,63:N,64:v,65:D,66:B,67:z,68:q,69:st,70:$,71:ft,72:Q,73:H,74:it}),t(tt,[2,21]),t(tt,[2,22]),t(M,[2,39]),t(wt,[2,71],{75:81,35:132,76:O,77:at,79:W,80:dt}),t(G,[2,73]),{78:[1,133]},t(G,[2,75]),t(G,[2,76]),t(M,[2,40]),t(M,[2,41]),t(M,[2,42]),t(M,[2,43]),t(M,[2,44]),t(M,[2,45]),t(M,[2,46]),t(M,[2,47]),t(M,[2,48]),t(M,[2,49]),t(M,[2,50]),t(M,[2,51]),t(M,[2,52]),t(M,[2,53]),t(M,[2,54]),t(M,[2,55]),t(M,[2,56]),t(M,[2,57]),t(M,[2,58]),t(M,[2,60]),t(M,[2,61]),t(M,[2,62]),t(M,[2,63]),t(M,[2,64]),t(M,[2,65]),t(M,[2,66]),t(M,[2,67]),t(M,[2,68]),t(M,[2,69]),t(M,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(vt,[2,28]),t(vt,[2,29]),t(vt,[2,30]),t(vt,[2,31]),t(vt,[2,32]),t(vt,[2,33]),t(vt,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(Z,[2,18]),t(nt,[2,38]),t(wt,[2,72]),t(G,[2,74]),t(M,[2,24]),t(M,[2,35]),t(bt,[2,25]),t(bt,[2,26],{12:[1,138]}),t(bt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:function(ut,ot){if(ot.recoverable)this.trace(ut);else{var lt=new Error(ut);throw lt.hash=ot,lt}},parse:function(ut){var ot=this,lt=[0],ht=[],X=[null],rt=[],et=this.table,ct="",te=0,Qt=0,ue=2,Vt=1,jt=rt.slice.call(arguments,1),zt=Object.create(this.lexer),_e={yy:{}};for(var de in this.yy)Object.prototype.hasOwnProperty.call(this.yy,de)&&(_e.yy[de]=this.yy[de]);zt.setInput(ut,_e.yy),_e.yy.lexer=zt,_e.yy.parser=this,typeof zt.yylloc>"u"&&(zt.yylloc={});var sr=zt.yylloc;rt.push(sr);var Mr=zt.options&&zt.options.ranges;typeof _e.yy.parseError=="function"?this.parseError=_e.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ye(){var Be;return Be=ht.pop()||zt.lex()||Vt,typeof Be!="number"&&(Be instanceof Array&&(ht=Be,Be=ht.pop()),Be=ot.symbols_[Be]||Be),Be}for(var Xt,ee,Nt,Zt,Ft={},Yt,Ut,Ot,Dt;;){if(ee=lt[lt.length-1],this.defaultActions[ee]?Nt=this.defaultActions[ee]:((Xt===null||typeof Xt>"u")&&(Xt=ye()),Nt=et[ee]&&et[ee][Xt]),typeof Nt>"u"||!Nt.length||!Nt[0]){var It="";Dt=[];for(Yt in et[ee])this.terminals_[Yt]&&Yt>ue&&Dt.push("'"+this.terminals_[Yt]+"'");zt.showPosition?It="Parse error on line "+(te+1)+`:
`+zt.showPosition()+`
Expecting `+Dt.join(", ")+", got '"+(this.terminals_[Xt]||Xt)+"'":It="Parse error on line "+(te+1)+": Unexpected "+(Xt==Vt?"end of input":"'"+(this.terminals_[Xt]||Xt)+"'"),this.parseError(It,{text:zt.match,token:this.terminals_[Xt]||Xt,line:zt.yylineno,loc:sr,expected:Dt})}if(Nt[0]instanceof Array&&Nt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ee+", token: "+Xt);switch(Nt[0]){case 1:lt.push(Xt),X.push(zt.yytext),rt.push(zt.yylloc),lt.push(Nt[1]),Xt=null,Qt=zt.yyleng,ct=zt.yytext,te=zt.yylineno,sr=zt.yylloc;break;case 2:if(Ut=this.productions_[Nt[1]][1],Ft.$=X[X.length-Ut],Ft._$={first_line:rt[rt.length-(Ut||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(Ut||1)].first_column,last_column:rt[rt.length-1].last_column},Mr&&(Ft._$.range=[rt[rt.length-(Ut||1)].range[0],rt[rt.length-1].range[1]]),Zt=this.performAction.apply(Ft,[ct,Qt,te,_e.yy,Nt[1],X,rt].concat(jt)),typeof Zt<"u")return Zt;Ut&&(lt=lt.slice(0,-1*Ut*2),X=X.slice(0,-1*Ut),rt=rt.slice(0,-1*Ut)),lt.push(this.productions_[Nt[1]][0]),X.push(Ft.$),rt.push(Ft._$),Ot=et[lt[lt.length-2]][lt[lt.length-1]],lt.push(Ot);break;case 3:return!0}}return!0}},Bt=function(){var pt={EOF:1,parseError:function(ot,lt){if(this.yy.parser)this.yy.parser.parseError(ot,lt);else throw new Error(ot)},setInput:function(ut,ot){return this.yy=ot||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var ot=ut.match(/(?:\r\n?|\n).*/g);return ot?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},unput:function(ut){var ot=ut.length,lt=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ot),this.offset-=ot;var ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lt.length-1&&(this.yylineno-=lt.length-1);var X=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lt?(lt.length===ht.length?this.yylloc.first_column:0)+ht[ht.length-lt.length].length-lt[0].length:this.yylloc.first_column-ot},this.options.ranges&&(this.yylloc.range=[X[0],X[0]+this.yyleng-ot]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ut){this.unput(this.match.slice(ut))},pastInput:function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ut=this.pastInput(),ot=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+ot+"^"},test_match:function(ut,ot){var lt,ht,X;if(this.options.backtrack_lexer&&(X={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(X.yylloc.range=this.yylloc.range.slice(0))),ht=ut[0].match(/(?:\r\n?|\n).*/g),ht&&(this.yylineno+=ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ht?ht[ht.length-1].length-ht[ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],lt=this.performAction.call(this,this.yy,this,ot,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),lt)return lt;if(this._backtrack){for(var rt in X)this[rt]=X[rt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,ot,lt,ht;this._more||(this.yytext="",this.match="");for(var X=this._currentRules(),rt=0;rt<X.length;rt++)if(lt=this._input.match(this.rules[X[rt]]),lt&&(!ot||lt[0].length>ot[0].length)){if(ot=lt,ht=rt,this.options.backtrack_lexer){if(ut=this.test_match(lt,X[rt]),ut!==!1)return ut;if(this._backtrack){ot=!1;continue}else return!1}else if(!this.options.flex)break}return ot?(ut=this.test_match(ot,X[ht]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ot=this.next();return ot||this.lex()},begin:function(ot){this.conditionStack.push(ot)},popState:function(){var ot=this.conditionStack.length-1;return ot>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ot){return ot=this.conditionStack.length-1-Math.abs(ot||0),ot>=0?this.conditionStack[ot]:"INITIAL"},pushState:function(ot){this.begin(ot)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ot,lt,ht,X){switch(ht){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return pt}();Mt.lexer=Bt;function Wt(){this.yy={}}return Wt.prototype=Mt,Mt.Parser=Wt,new Wt}();Mn.parser=Mn;const Lm=Mn;let Ti=[],ur=[""],Ve="global",_i="",Bi=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ds=[],el="",il=!1,Vn=4,qn=2;var M1;const Bm=function(){return M1},Im=function(t){M1=ve(t,Y())},Fm=function(t,e,i,r,s,n,a,o,l){if(t==null||e===void 0||e===null||i===void 0||i===null||r===void 0||r===null)return;let h={};const u=Ds.find(f=>f.from===e&&f.to===i);if(u?h=u:Ds.push(h),h.type=t,h.from=e,h.to=i,h.label={text:r},s==null)h.techn={text:""};else if(typeof s=="object"){let[f,d]=Object.entries(s)[0];h[f]={text:d}}else h.techn={text:s};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[f,d]=Object.entries(n)[0];h[f]={text:d}}else h.descr={text:n};if(typeof a=="object"){let[f,d]=Object.entries(a)[0];h[f]=d}else h.sprite=a;if(typeof o=="object"){let[f,d]=Object.entries(o)[0];h[f]=d}else h.tags=o;if(typeof l=="object"){let[f,d]=Object.entries(l)[0];h[f]=d}else h.link=l;h.wrap=mr()},Rm=function(t,e,i,r,s,n,a){if(e===null||i===null)return;let o={};const l=Ti.find(h=>h.alias===e);if(l&&e===l.alias?o=l:(o.alias=e,Ti.push(o)),i==null?o.label={text:""}:o.label={text:i},r==null)o.descr={text:""};else if(typeof r=="object"){let[h,u]=Object.entries(r)[0];o[h]={text:u}}else o.descr={text:r};if(typeof s=="object"){let[h,u]=Object.entries(s)[0];o[h]=u}else o.sprite=s;if(typeof n=="object"){let[h,u]=Object.entries(n)[0];o[h]=u}else o.tags=n;if(typeof a=="object"){let[h,u]=Object.entries(a)[0];o[h]=u}else o.link=a;o.typeC4Shape={text:t},o.parentBoundary=Ve,o.wrap=mr()},Dm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Ti.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ti.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,f]=Object.entries(r)[0];l[u]={text:f}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,f]=Object.entries(s)[0];l[u]={text:f}}else l.descr={text:s};if(typeof n=="object"){let[u,f]=Object.entries(n)[0];l[u]=f}else l.sprite=n;if(typeof a=="object"){let[u,f]=Object.entries(a)[0];l[u]=f}else l.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];l[u]=f}else l.link=o;l.wrap=mr(),l.typeC4Shape={text:t},l.parentBoundary=Ve},Nm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Ti.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ti.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,f]=Object.entries(r)[0];l[u]={text:f}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,f]=Object.entries(s)[0];l[u]={text:f}}else l.descr={text:s};if(typeof n=="object"){let[u,f]=Object.entries(n)[0];l[u]=f}else l.sprite=n;if(typeof a=="object"){let[u,f]=Object.entries(a)[0];l[u]=f}else l.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];l[u]=f}else l.link=o;l.wrap=mr(),l.typeC4Shape={text:t},l.parentBoundary=Ve},Om=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Bi.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Bi.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"system"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=Ve,n.wrap=mr(),_i=Ve,Ve=t,ur.push(_i)},Pm=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Bi.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Bi.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"container"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=Ve,n.wrap=mr(),_i=Ve,Ve=t,ur.push(_i)},Mm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Bi.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Bi.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.type={text:"node"};else if(typeof r=="object"){let[u,f]=Object.entries(r)[0];l[u]={text:f}}else l.type={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,f]=Object.entries(s)[0];l[u]={text:f}}else l.descr={text:s};if(typeof a=="object"){let[u,f]=Object.entries(a)[0];l[u]=f}else l.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];l[u]=f}else l.link=o;l.nodeType=t,l.parentBoundary=Ve,l.wrap=mr(),_i=Ve,Ve=e,ur.push(_i)},Vm=function(){Ve=_i,ur.pop(),_i=ur.pop(),ur.push(_i)},qm=function(t,e,i,r,s,n,a,o,l,h,u){let f=Ti.find(d=>d.alias===e);if(!(f===void 0&&(f=Bi.find(d=>d.alias===e),f===void 0))){if(i!=null)if(typeof i=="object"){let[d,p]=Object.entries(i)[0];f[d]=p}else f.bgColor=i;if(r!=null)if(typeof r=="object"){let[d,p]=Object.entries(r)[0];f[d]=p}else f.fontColor=r;if(s!=null)if(typeof s=="object"){let[d,p]=Object.entries(s)[0];f[d]=p}else f.borderColor=s;if(n!=null)if(typeof n=="object"){let[d,p]=Object.entries(n)[0];f[d]=p}else f.shadowing=n;if(a!=null)if(typeof a=="object"){let[d,p]=Object.entries(a)[0];f[d]=p}else f.shape=a;if(o!=null)if(typeof o=="object"){let[d,p]=Object.entries(o)[0];f[d]=p}else f.sprite=o;if(l!=null)if(typeof l=="object"){let[d,p]=Object.entries(l)[0];f[d]=p}else f.techn=l;if(h!=null)if(typeof h=="object"){let[d,p]=Object.entries(h)[0];f[d]=p}else f.legendText=h;if(u!=null)if(typeof u=="object"){let[d,p]=Object.entries(u)[0];f[d]=p}else f.legendSprite=u}},zm=function(t,e,i,r,s,n,a){const o=Ds.find(l=>l.from===e&&l.to===i);if(o!==void 0){if(r!=null)if(typeof r=="object"){let[l,h]=Object.entries(r)[0];o[l]=h}else o.textColor=r;if(s!=null)if(typeof s=="object"){let[l,h]=Object.entries(s)[0];o[l]=h}else o.lineColor=s;if(n!=null)if(typeof n=="object"){let[l,h]=Object.entries(n)[0];o[l]=parseInt(h)}else o.offsetX=parseInt(n);if(a!=null)if(typeof a=="object"){let[l,h]=Object.entries(a)[0];o[l]=parseInt(h)}else o.offsetY=parseInt(a)}},Wm=function(t,e,i){let r=Vn,s=qn;if(typeof e=="object"){const n=Object.values(e)[0];r=parseInt(n)}else r=parseInt(e);if(typeof i=="object"){const n=Object.values(i)[0];s=parseInt(n)}else s=parseInt(i);r>=1&&(Vn=r),s>=1&&(qn=s)},Ym=function(){return Vn},Um=function(){return qn},Hm=function(){return Ve},Gm=function(){return _i},V1=function(t){return t==null?Ti:Ti.filter(e=>e.parentBoundary===t)},jm=function(t){return Ti.find(e=>e.alias===t)},Xm=function(t){return Object.keys(V1(t))},$m=function(t){return t==null?Bi:Bi.filter(e=>e.parentBoundary===t)},Km=function(){return Ds},Qm=function(){return el},Zm=function(t){il=t},mr=function(){return il},Jm=function(){Ti=[],Bi=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],_i="",Ve="global",ur=[""],Ds=[],ur=[""],el="",il=!1,Vn=4,qn=2},t4={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},e4={FILLED:0,OPEN:1},i4={LEFTOF:0,RIGHTOF:1,OVER:2},r4=function(t){el=ve(t,Y())},Ja={addPersonOrSystem:Rm,addPersonOrSystemBoundary:Om,addContainer:Dm,addContainerBoundary:Pm,addComponent:Nm,addDeploymentNode:Mm,popBoundaryParseStack:Vm,addRel:Fm,updateElStyle:qm,updateRelStyle:zm,updateLayoutConfig:Wm,autoWrap:mr,setWrap:Zm,getC4ShapeArray:V1,getC4Shape:jm,getC4ShapeKeys:Xm,getBoundarys:$m,getCurrentBoundaryParse:Hm,getParentBoundaryParse:Gm,getRels:Km,getTitle:Qm,getC4Type:Bm,getC4ShapeInRow:Ym,getC4BoundaryInRow:Um,setAccTitle:Ne,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,getConfig:()=>Y().c4,clear:Jm,LINETYPE:t4,ARROWTYPE:e4,PLACEMENT:i4,setTitle:r4,setC4Type:Im},rl=function(t,e){return ga(t,e)},q1=function(t,e,i,r,s,n){const a=t.append("image");a.attr("width",e),a.attr("height",i),a.attr("x",r),a.attr("y",s);let o=n.startsWith("data:image/png;base64")?n:Dr.sanitizeUrl(n);a.attr("xlink:href",o)},s4=(t,e,i)=>{const r=t.append("g");let s=0;for(let n of e){let a=n.textColor?n.textColor:"#444444",o=n.lineColor?n.lineColor:"#444444",l=n.offsetX?parseInt(n.offsetX):0,h=n.offsetY?parseInt(n.offsetY):0,u="";if(s===0){let d=r.append("line");d.attr("x1",n.startPoint.x),d.attr("y1",n.startPoint.y),d.attr("x2",n.endPoint.x),d.attr("y2",n.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",o),d.style("fill","none"),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)"),s=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)")}let f=i.messageFont();Xi(i)(n.label.text,r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+h,n.label.width,n.label.height,{fill:a},f),n.techn&&n.techn.text!==""&&(f=i.messageFont(),Xi(i)("["+n.techn.text+"]",r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+i.messageFontSize+5+h,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:a,"font-style":"italic"},f))}},n4=function(t,e,i){const r=t.append("g");let s=e.bgColor?e.bgColor:"none",n=e.borderColor?e.borderColor:"#444444",a=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:s,stroke:n,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};rl(r,l);let h=i.boundaryFont();h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,Xi(i)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},h),e.type&&e.type.text!==""&&(h=i.boundaryFont(),h.fontColor=a,Xi(i)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},h)),e.descr&&e.descr.text!==""&&(h=i.boundaryFont(),h.fontSize=h.fontSize-2,h.fontColor=a,Xi(i)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},h))},a4=function(t,e,i){var r;let s=e.bgColor?e.bgColor:i[e.typeC4Shape.text+"_bg_color"],n=e.borderColor?e.borderColor:i[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const l=t.append("g");l.attr("class","person-man");const h=Or();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=e.x,h.y=e.y,h.fill=s,h.width=e.width,h.height=e.height,h.stroke=n,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},rl(l,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=g4(i,e.typeC4Shape.text);switch(l.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":q1(l,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let f=i[e.typeC4Shape.text+"Font"]();return f.fontWeight="bold",f.fontSize=f.fontSize+2,f.fontColor=a,Xi(i)(e.label.text,l,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},f),f=i[e.typeC4Shape.text+"Font"](),f.fontColor=a,e.techn&&((r=e.techn)==null?void 0:r.text)!==""?Xi(i)(e.techn.text,l,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},f):e.type&&e.type.text!==""&&Xi(i)(e.type.text,l,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},f),e.descr&&e.descr.text!==""&&(f=i.personFont(),f.fontColor=a,Xi(i)(e.descr.text,l,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},f)),e.height},o4=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},l4=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},c4=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},h4=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},u4=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},d4=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},f4=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},p4=function(t){const i=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);i.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),i.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},g4=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Xi=function(){function t(s,n,a,o,l,h,u){const f=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(s);r(f,u)}function e(s,n,a,o,l,h,u,f){const{fontSize:d,fontFamily:p,fontWeight:y}=f,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const C=_*d-d*(x.length-1)/2,k=n.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",y).style("font-family",p);k.append("tspan").attr("dy",C).text(x[_]).attr("alignment-baseline","mathematical"),r(k,u)}}function i(s,n,a,o,l,h,u,f){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,f),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),vi={drawRect:rl,drawBoundary:n4,drawC4Shape:a4,drawRels:s4,drawImage:q1,insertArrowHead:h4,insertArrowEnd:u4,insertArrowFilledHead:d4,insertDynamicNumber:f4,insertArrowCrossHead:p4,insertDatabaseIcon:o4,insertComputerIcon:l4,insertClockIcon:c4};let zn=0,Wn=0,z1=4,to=2;Mn.yy=Ja;let Tt={};class W1{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,eo(e.db.getConfig())}setData(e,i,r,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=i,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=s}updateVal(e,i,r,s){e[i]===void 0?e[i]=r:e[i]=s(r,e[i])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let i=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=i+e.width,s=this.nextData.starty+e.margin*2,n=s+e.height;(i>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>z1)&&(i=this.nextData.startx+e.margin+Tt.nextLinePaddingX,s=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=i+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=s+e.height,this.nextData.cnt=1),e.x=i,e.y=s,this.updateVal(this.data,"startx",i,Math.min),this.updateVal(this.data,"starty",s,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",i,Math.min),this.updateVal(this.nextData,"starty",s,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},eo(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const eo=function(t){Ee(Tt,t),t.fontFamily&&(Tt.personFontFamily=Tt.systemFontFamily=Tt.messageFontFamily=t.fontFamily),t.fontSize&&(Tt.personFontSize=Tt.systemFontSize=Tt.messageFontSize=t.fontSize),t.fontWeight&&(Tt.personFontWeight=Tt.systemFontWeight=Tt.messageFontWeight=t.fontWeight)},gs=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Tn=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),y4=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function mi(t,e,i,r,s){if(!e[t].width)if(i)e[t].text=Mh(e[t].text,s,r),e[t].textLines=e[t].text.split(mt.lineBreakRegex).length,e[t].width=s,e[t].height=Ka(e[t].text,r);else{let n=e[t].text.split(mt.lineBreakRegex);e[t].textLines=n.length;let a=0;e[t].height=0,e[t].width=0;for(const o of n)e[t].width=Math.max(wi(o,r),e[t].width),a=Ka(o,r),e[t].height=e[t].height+a}}const Y1=function(t,e,i){e.x=i.data.startx,e.y=i.data.starty,e.width=i.data.stopx-i.data.startx,e.height=i.data.stopy-i.data.starty,e.label.y=Tt.c4ShapeMargin-35;let r=e.wrap&&Tt.wrap,s=Tn(Tt);s.fontSize=s.fontSize+2,s.fontWeight="bold";let n=wi(e.label.text,s);mi("label",e,r,s,n),vi.drawBoundary(t,e,Tt)},U1=function(t,e,i,r){let s=0;for(const n of r){s=0;const a=i[n];let o=gs(Tt,a.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,a.typeC4Shape.width=wi(""+a.typeC4Shape.text+"",o),a.typeC4Shape.height=o.fontSize+2,a.typeC4Shape.Y=Tt.c4ShapePadding,s=a.typeC4Shape.Y+a.typeC4Shape.height-4,a.image={width:0,height:0,Y:0},a.typeC4Shape.text){case"person":case"external_person":a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height;break}a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height);let l=a.wrap&&Tt.wrap,h=Tt.width-Tt.c4ShapePadding*2,u=gs(Tt,a.typeC4Shape.text);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",mi("label",a,l,u,h),a.label.Y=s+8,s=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let p=gs(Tt,a.typeC4Shape.text);mi("type",a,l,p,h),a.type.Y=s+5,s=a.type.Y+a.type.height}else if(a.techn&&a.techn.text!==""){a.techn.text="["+a.techn.text+"]";let p=gs(Tt,a.techn.text);mi("techn",a,l,p,h),a.techn.Y=s+5,s=a.techn.Y+a.techn.height}let f=s,d=a.label.width;if(a.descr&&a.descr.text!==""){let p=gs(Tt,a.typeC4Shape.text);mi("descr",a,l,p,h),a.descr.Y=s+20,s=a.descr.Y+a.descr.height,d=Math.max(a.label.width,a.descr.width),f=s-a.descr.textLines*5}d=d+Tt.c4ShapePadding,a.width=Math.max(a.width||Tt.width,d,Tt.width),a.height=Math.max(a.height||Tt.height,f,Tt.height),a.margin=a.margin||Tt.c4ShapeMargin,t.insert(a),vi.drawC4Shape(e,a,Tt)}t.bumpLastMargin(Tt.c4ShapeMargin)};class ai{constructor(e,i){this.x=e,this.y=i}}let xc=function(t,e){let i=t.x,r=t.y,s=e.x,n=e.y,a=i+t.width/2,o=r+t.height/2,l=Math.abs(i-s),h=Math.abs(r-n),u=h/l,f=t.height/t.width,d=null;return r==n&&i<s?d=new ai(i+t.width,o):r==n&&i>s?d=new ai(i,o):i==s&&r<n?d=new ai(a,r+t.height):i==s&&r>n&&(d=new ai(a,r)),i>s&&r<n?f>=u?d=new ai(i,o+u*t.width/2):d=new ai(a-l/h*t.height/2,r+t.height):i<s&&r<n?f>=u?d=new ai(i+t.width,o+u*t.width/2):d=new ai(a+l/h*t.height/2,r+t.height):i<s&&r>n?f>=u?d=new ai(i+t.width,o-u*t.width/2):d=new ai(a+t.height/2*l/h,r):i>s&&r>n&&(f>=u?d=new ai(i,o-t.width/2*u):d=new ai(a-t.height/2*l/h,r)),d},m4=function(t,e){let i={x:0,y:0};i.x=e.x+e.width/2,i.y=e.y+e.height/2;let r=xc(t,i);i.x=t.x+t.width/2,i.y=t.y+t.height/2;let s=xc(e,i);return{startPoint:r,endPoint:s}};const x4=function(t,e,i,r){let s=0;for(let n of e){s=s+1;let a=n.wrap&&Tt.wrap,o=y4(Tt);r.db.getC4Type()==="C4Dynamic"&&(n.label.text=s+": "+n.label.text);let h=wi(n.label.text,o);mi("label",n,a,o,h),n.techn&&n.techn.text!==""&&(h=wi(n.techn.text,o),mi("techn",n,a,o,h)),n.descr&&n.descr.text!==""&&(h=wi(n.descr.text,o),mi("descr",n,a,o,h));let u=i(n.from),f=i(n.to),d=m4(u,f);n.startPoint=d.startPoint,n.endPoint=d.endPoint}vi.drawRels(t,e,Tt)};function H1(t,e,i,r,s){let n=new W1(s);n.data.widthLimit=i.data.widthLimit/Math.min(to,r.length);for(let[a,o]of r.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let h=o.wrap&&Tt.wrap,u=Tn(Tt);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",mi("label",o,h,u,n.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=Tn(Tt);mi("type",o,h,y,n.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=Tn(Tt);y.fontSize=y.fontSize-2,mi("descr",o,h,y,n.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(a==0||a%to===0){let y=i.data.startx+Tt.diagramMarginX,x=i.data.stopy+Tt.diagramMarginY+l;n.setData(y,y,x,x)}else{let y=n.data.stopx!==n.data.startx?n.data.stopx+Tt.diagramMarginX:n.data.startx,x=n.data.starty;n.setData(y,y,x,x)}n.name=o.alias;let f=s.db.getC4ShapeArray(o.alias),d=s.db.getC4ShapeKeys(o.alias);d.length>0&&U1(n,t,f,d),e=o.alias;let p=s.db.getBoundarys(e);p.length>0&&H1(t,e,n,p,s),o.alias!=="global"&&Y1(t,o,n),i.data.stopy=Math.max(n.data.stopy+Tt.c4ShapeMargin,i.data.stopy),i.data.stopx=Math.max(n.data.stopx+Tt.c4ShapeMargin,i.data.stopx),zn=Math.max(zn,i.data.stopx),Wn=Math.max(Wn,i.data.stopy)}}const b4=function(t,e,i,r){Tt=Y().c4;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body");let o=r.db;r.db.setWrap(Tt.wrap),z1=o.getC4ShapeInRow(),to=o.getC4BoundaryInRow(),A.debug(`C:${JSON.stringify(Tt,null,2)}`);const l=s==="sandbox"?a.select(`[id="${e}"]`):yt(`[id="${e}"]`);vi.insertComputerIcon(l),vi.insertDatabaseIcon(l),vi.insertClockIcon(l);let h=new W1(r);h.setData(Tt.diagramMarginX,Tt.diagramMarginX,Tt.diagramMarginY,Tt.diagramMarginY),h.data.widthLimit=screen.availWidth,zn=Tt.diagramMarginX,Wn=Tt.diagramMarginY;const u=r.db.getTitle();let f=r.db.getBoundarys("");H1(l,"",h,f,r),vi.insertArrowHead(l),vi.insertArrowEnd(l),vi.insertArrowCrossHead(l),vi.insertArrowFilledHead(l),x4(l,r.db.getRels(),r.db.getC4Shape,r),h.data.stopx=zn,h.data.stopy=Wn;const d=h.data;let y=d.stopy-d.starty+2*Tt.diagramMarginY;const _=d.stopx-d.startx+2*Tt.diagramMarginX;u&&l.append("text").text(u).attr("x",(d.stopx-d.startx)/2-4*Tt.diagramMarginX).attr("y",d.starty+Tt.diagramMarginY),ze(l,y,_,Tt.useMaxWidth);const C=u?60:0;l.attr("viewBox",d.startx-Tt.diagramMarginX+" -"+(Tt.diagramMarginY+C)+" "+_+" "+(y+C)),A.debug("models:",d)},bc={drawPersonOrSystemArray:U1,drawBoundary:Y1,setConf:eo,draw:b4},k4=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,_4=k4,T4={parser:Lm,db:Ja,renderer:bc,styles:_4,init:({c4:t,wrap:e})=>{bc.setConf(t),Ja.setWrap(e)}},C4=Object.freeze(Object.defineProperty({__proto__:null,diagram:T4},Symbol.toStringTag,{value:"Module"}));var io=function(){var t=function(ar,Et,Lt,Pt){for(Lt=Lt||{},Pt=ar.length;Pt--;Lt[ar[Pt]]=Et);return Lt},e=[1,4],i=[1,3],r=[1,5],s=[1,8,9,10,11,27,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],n=[2,2],a=[1,13],o=[1,14],l=[1,15],h=[1,16],u=[1,23],f=[1,25],d=[1,26],p=[1,27],y=[1,49],x=[1,48],_=[1,29],C=[1,30],k=[1,31],R=[1,32],F=[1,33],L=[1,44],E=[1,46],I=[1,42],S=[1,47],b=[1,43],T=[1,50],g=[1,45],w=[1,51],m=[1,52],P=[1,34],j=[1,35],N=[1,36],v=[1,37],D=[1,57],B=[1,8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],z=[1,61],q=[1,60],st=[1,62],$=[8,9,11,73,75],ft=[1,88],Q=[1,93],H=[1,92],it=[1,89],nt=[1,85],Z=[1,91],tt=[1,87],O=[1,94],at=[1,90],W=[1,95],dt=[1,86],M=[8,9,10,11,73,75],wt=[8,9,10,11,44,73,75],G=[8,9,10,11,29,42,44,46,48,50,52,54,56,58,61,63,65,66,68,73,75,86,99,102,103,106,108,111,112,113],vt=[8,9,11,42,58,73,75,86,99,102,103,106,108,111,112,113],bt=[42,58,86,99,102,103,106,108,111,112,113],Mt=[1,121],Bt=[1,120],Wt=[1,128],pt=[1,142],ut=[1,143],ot=[1,144],lt=[1,145],ht=[1,130],X=[1,132],rt=[1,136],et=[1,137],ct=[1,138],te=[1,139],Qt=[1,140],ue=[1,141],Vt=[1,146],jt=[1,147],zt=[1,126],_e=[1,127],de=[1,134],sr=[1,129],Mr=[1,133],ye=[1,131],Xt=[8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],ee=[1,149],Nt=[8,9,11],Zt=[8,9,10,11,14,42,58,86,102,103,106,108,111,112,113],Ft=[1,169],Yt=[1,165],Ut=[1,166],Ot=[1,170],Dt=[1,167],It=[1,168],Be=[75,113,116],$t=[8,9,10,11,12,14,27,29,32,42,58,73,81,82,83,84,85,86,87,102,106,108,111,112,113],ql=[10,103],nr=[31,47,49,51,53,55,60,62,64,65,67,69,113,114,115],Ii=[1,235],Fi=[1,233],Ri=[1,237],Di=[1,231],Ni=[1,232],Oi=[1,234],Pi=[1,236],Mi=[1,238],Vr=[1,255],zl=[8,9,11,103],Ci=[8,9,10,11,58,81,102,103,106,107,108,109],Aa={trace:function(){},yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeperator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,verticeStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,link:39,node:40,styledVertex:41,AMP:42,vertex:43,STYLE_SEPARATOR:44,idString:45,DOUBLECIRCLESTART:46,DOUBLECIRCLEEND:47,PS:48,PE:49,"(-":50,"-)":51,STADIUMSTART:52,STADIUMEND:53,SUBROUTINESTART:54,SUBROUTINEEND:55,VERTEX_WITH_PROPS_START:56,"NODE_STRING[field]":57,COLON:58,"NODE_STRING[value]":59,PIPE:60,CYLINDERSTART:61,CYLINDEREND:62,DIAMOND_START:63,DIAMOND_STOP:64,TAGEND:65,TRAPSTART:66,TRAPEND:67,INVTRAPSTART:68,INVTRAPEND:69,linkStatement:70,arrowText:71,TESTSTR:72,START_LINK:73,edgeText:74,LINK:75,edgeTextToken:76,STR:77,MD_STR:78,textToken:79,keywords:80,STYLE:81,LINKSTYLE:82,CLASSDEF:83,CLASS:84,CLICK:85,DOWN:86,UP:87,textNoTagsToken:88,stylesOpt:89,"idString[vertex]":90,"idString[class]":91,CALLBACKNAME:92,CALLBACKARGS:93,HREF:94,LINK_TARGET:95,"STR[link]":96,"STR[tooltip]":97,alphaNum:98,DEFAULT:99,numList:100,INTERPOLATE:101,NUM:102,COMMA:103,style:104,styleComponent:105,NODE_STRING:106,UNIT:107,BRKT:108,PCT:109,idStringToken:110,MINUS:111,MULT:112,UNICODE_TEXT:113,TEXT:114,TAGSTART:115,EDGE_TEXT:116,alphaNumToken:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",42:"AMP",44:"STYLE_SEPARATOR",46:"DOUBLECIRCLESTART",47:"DOUBLECIRCLEEND",48:"PS",49:"PE",50:"(-",51:"-)",52:"STADIUMSTART",53:"STADIUMEND",54:"SUBROUTINESTART",55:"SUBROUTINEEND",56:"VERTEX_WITH_PROPS_START",57:"NODE_STRING[field]",58:"COLON",59:"NODE_STRING[value]",60:"PIPE",61:"CYLINDERSTART",62:"CYLINDEREND",63:"DIAMOND_START",64:"DIAMOND_STOP",65:"TAGEND",66:"TRAPSTART",67:"TRAPEND",68:"INVTRAPSTART",69:"INVTRAPEND",72:"TESTSTR",73:"START_LINK",75:"LINK",77:"STR",78:"MD_STR",81:"STYLE",82:"LINKSTYLE",83:"CLASSDEF",84:"CLASS",85:"CLICK",86:"DOWN",87:"UP",90:"idString[vertex]",91:"idString[class]",92:"CALLBACKNAME",93:"CALLBACKARGS",94:"HREF",95:"LINK_TARGET",96:"STR[link]",97:"STR[tooltip]",99:"DEFAULT",101:"INTERPOLATE",102:"NUM",103:"COMMA",106:"NODE_STRING",107:"UNIT",108:"BRKT",109:"PCT",111:"MINUS",112:"MULT",113:"UNICODE_TEXT",114:"TEXT",115:"TAGSTART",116:"EDGE_TEXT",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[20,3],[20,4],[20,2],[20,1],[40,1],[40,5],[41,1],[41,3],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,8],[43,4],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,4],[43,4],[43,1],[39,2],[39,3],[39,3],[39,1],[39,3],[74,1],[74,2],[74,1],[74,1],[70,1],[71,3],[30,1],[30,2],[30,1],[30,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[100,1],[100,3],[89,1],[89,3],[104,1],[104,2],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[79,1],[79,1],[79,1],[79,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[76,1],[76,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[45,1],[45,2],[98,1],[98,2],[33,1],[33,1],[33,1],[33,1]],performAction:function(Et,Lt,Pt,xt,ie,V,ps){var U=V.length-1;switch(ie){case 2:this.$=[];break;case 3:(!Array.isArray(V[U])||V[U].length>0)&&V[U-1].push(V[U]),this.$=V[U-1];break;case 4:case 176:this.$=V[U];break;case 11:xt.setDirection("TB"),this.$="TB";break;case 12:xt.setDirection(V[U-1]),this.$=V[U-1];break;case 27:this.$=V[U-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=xt.addSubGraph(V[U-6],V[U-1],V[U-4]);break;case 34:this.$=xt.addSubGraph(V[U-3],V[U-1],V[U-3]);break;case 35:this.$=xt.addSubGraph(void 0,V[U-1],void 0);break;case 37:this.$=V[U].trim(),xt.setAccTitle(this.$);break;case 38:case 39:this.$=V[U].trim(),xt.setAccDescription(this.$);break;case 43:xt.addLink(V[U-2].stmt,V[U],V[U-1]),this.$={stmt:V[U],nodes:V[U].concat(V[U-2].nodes)};break;case 44:xt.addLink(V[U-3].stmt,V[U-1],V[U-2]),this.$={stmt:V[U-1],nodes:V[U-1].concat(V[U-3].nodes)};break;case 45:this.$={stmt:V[U-1],nodes:V[U-1]};break;case 46:this.$={stmt:V[U],nodes:V[U]};break;case 47:this.$=[V[U]];break;case 48:this.$=V[U-4].concat(V[U]);break;case 49:this.$=V[U];break;case 50:this.$=V[U-2],xt.setClass(V[U-2],V[U]);break;case 51:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"square");break;case 52:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"doublecircle");break;case 53:this.$=V[U-5],xt.addVertex(V[U-5],V[U-2],"circle");break;case 54:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"ellipse");break;case 55:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"stadium");break;case 56:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"subroutine");break;case 57:this.$=V[U-7],xt.addVertex(V[U-7],V[U-1],"rect",void 0,void 0,void 0,Object.fromEntries([[V[U-5],V[U-3]]]));break;case 58:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"cylinder");break;case 59:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"round");break;case 60:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"diamond");break;case 61:this.$=V[U-5],xt.addVertex(V[U-5],V[U-2],"hexagon");break;case 62:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"odd");break;case 63:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"trapezoid");break;case 64:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"inv_trapezoid");break;case 65:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"lean_right");break;case 66:this.$=V[U-3],xt.addVertex(V[U-3],V[U-1],"lean_left");break;case 67:this.$=V[U],xt.addVertex(V[U]);break;case 68:V[U-1].text=V[U],this.$=V[U-1];break;case 69:case 70:V[U-2].text=V[U-1],this.$=V[U-2];break;case 71:this.$=V[U];break;case 72:var ri=xt.destructLink(V[U],V[U-2]);this.$={type:ri.type,stroke:ri.stroke,length:ri.length,text:V[U-1]};break;case 73:this.$={text:V[U],type:"text"};break;case 74:this.$={text:V[U-1].text+""+V[U],type:V[U-1].type};break;case 75:this.$={text:V[U],type:"string"};break;case 76:this.$={text:V[U],type:"markdown"};break;case 77:var ri=xt.destructLink(V[U]);this.$={type:ri.type,stroke:ri.stroke,length:ri.length};break;case 78:this.$=V[U-1];break;case 79:this.$={text:V[U],type:"text"};break;case 80:this.$={text:V[U-1].text+""+V[U],type:V[U-1].type};break;case 81:this.$={text:V[U],type:"string"};break;case 82:case 97:this.$={text:V[U],type:"markdown"};break;case 94:this.$={text:V[U],type:"text"};break;case 95:this.$={text:V[U-1].text+""+V[U],type:V[U-1].type};break;case 96:this.$={text:V[U],type:"text"};break;case 98:this.$=V[U-4],xt.addClass(V[U-2],V[U]);break;case 99:this.$=V[U-4],xt.setClass(V[U-2],V[U]);break;case 100:case 108:this.$=V[U-1],xt.setClickEvent(V[U-1],V[U]);break;case 101:case 109:this.$=V[U-3],xt.setClickEvent(V[U-3],V[U-2]),xt.setTooltip(V[U-3],V[U]);break;case 102:this.$=V[U-2],xt.setClickEvent(V[U-2],V[U-1],V[U]);break;case 103:this.$=V[U-4],xt.setClickEvent(V[U-4],V[U-3],V[U-2]),xt.setTooltip(V[U-4],V[U]);break;case 104:this.$=V[U-2],xt.setLink(V[U-2],V[U]);break;case 105:this.$=V[U-4],xt.setLink(V[U-4],V[U-2]),xt.setTooltip(V[U-4],V[U]);break;case 106:this.$=V[U-4],xt.setLink(V[U-4],V[U-2],V[U]);break;case 107:this.$=V[U-6],xt.setLink(V[U-6],V[U-4],V[U]),xt.setTooltip(V[U-6],V[U-2]);break;case 110:this.$=V[U-1],xt.setLink(V[U-1],V[U]);break;case 111:this.$=V[U-3],xt.setLink(V[U-3],V[U-2]),xt.setTooltip(V[U-3],V[U]);break;case 112:this.$=V[U-3],xt.setLink(V[U-3],V[U-2],V[U]);break;case 113:this.$=V[U-5],xt.setLink(V[U-5],V[U-4],V[U]),xt.setTooltip(V[U-5],V[U-2]);break;case 114:this.$=V[U-4],xt.addVertex(V[U-2],void 0,void 0,V[U]);break;case 115:this.$=V[U-4],xt.updateLink([V[U-2]],V[U]);break;case 116:this.$=V[U-4],xt.updateLink(V[U-2],V[U]);break;case 117:this.$=V[U-8],xt.updateLinkInterpolate([V[U-6]],V[U-2]),xt.updateLink([V[U-6]],V[U]);break;case 118:this.$=V[U-8],xt.updateLinkInterpolate(V[U-6],V[U-2]),xt.updateLink(V[U-6],V[U]);break;case 119:this.$=V[U-6],xt.updateLinkInterpolate([V[U-4]],V[U]);break;case 120:this.$=V[U-6],xt.updateLinkInterpolate(V[U-4],V[U]);break;case 121:case 123:this.$=[V[U]];break;case 122:case 124:V[U-2].push(V[U]),this.$=V[U-2];break;case 126:this.$=V[U-1]+V[U];break;case 174:this.$=V[U];break;case 175:this.$=V[U-1]+""+V[U];break;case 177:this.$=V[U-1]+""+V[U];break;case 178:this.$={stmt:"dir",value:"TB"};break;case 179:this.$={stmt:"dir",value:"BT"};break;case 180:this.$={stmt:"dir",value:"RL"};break;case 181:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,9:e,10:i,12:r},{1:[3]},t(s,n,{5:6}),{4:7,9:e,10:i,12:r},{4:8,9:e,10:i,12:r},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:C,83:k,84:R,85:F,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m,118:P,119:j,120:N,121:v},t(s,[2,9]),t(s,[2,10]),t(s,[2,11]),{8:[1,54],9:[1,55],10:D,15:53,18:56},t(B,[2,3]),t(B,[2,4]),t(B,[2,5]),t(B,[2,6]),t(B,[2,7]),t(B,[2,8]),{8:z,9:q,11:st,21:58,39:59,70:63,73:[1,64],75:[1,65]},{8:z,9:q,11:st,21:66},{8:z,9:q,11:st,21:67},{8:z,9:q,11:st,21:68},{8:z,9:q,11:st,21:69},{8:z,9:q,11:st,21:70},{8:z,9:q,10:[1,71],11:st,21:72},t(B,[2,36]),{35:[1,73]},{37:[1,74]},t(B,[2,39]),t($,[2,46],{18:75,10:D}),{10:[1,76]},{10:[1,77]},{10:[1,78]},{10:[1,79]},{14:ft,42:Q,58:H,77:[1,83],86:it,92:[1,80],94:[1,81],98:82,102:nt,103:Z,106:tt,108:O,111:at,112:W,113:dt,117:84},t(B,[2,178]),t(B,[2,179]),t(B,[2,180]),t(B,[2,181]),t(M,[2,47]),t(M,[2,49],{44:[1,96]}),t(wt,[2,67],{110:109,29:[1,97],42:y,46:[1,98],48:[1,99],50:[1,100],52:[1,101],54:[1,102],56:[1,103],58:x,61:[1,104],63:[1,105],65:[1,106],66:[1,107],68:[1,108],86:L,99:E,102:I,103:S,106:b,108:T,111:g,112:w,113:m}),t(G,[2,174]),t(G,[2,135]),t(G,[2,136]),t(G,[2,137]),t(G,[2,138]),t(G,[2,139]),t(G,[2,140]),t(G,[2,141]),t(G,[2,142]),t(G,[2,143]),t(G,[2,144]),t(G,[2,145]),t(s,[2,12]),t(s,[2,18]),t(s,[2,19]),{9:[1,110]},t(vt,[2,26],{18:111,10:D}),t(B,[2,27]),{40:112,41:38,42:y,43:39,45:40,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},t(B,[2,40]),t(B,[2,41]),t(B,[2,42]),t(bt,[2,71],{71:113,60:[1,115],72:[1,114]}),{74:116,76:117,77:[1,118],78:[1,119],113:Mt,116:Bt},t([42,58,60,72,86,99,102,103,106,108,111,112,113],[2,77]),t(B,[2,28]),t(B,[2,29]),t(B,[2,30]),t(B,[2,31]),t(B,[2,32]),{10:Wt,12:pt,14:ut,27:ot,28:122,32:lt,42:ht,58:X,73:rt,77:[1,124],78:[1,125],80:135,81:et,82:ct,83:te,84:Qt,85:ue,86:Vt,87:jt,88:123,102:zt,106:_e,108:de,111:sr,112:Mr,113:ye},t(Xt,n,{5:148}),t(B,[2,37]),t(B,[2,38]),t($,[2,45],{42:ee}),{42:y,45:150,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},{99:[1,151],100:152,102:[1,153]},{42:y,45:154,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},{42:y,45:155,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},t(Nt,[2,100],{10:[1,156],93:[1,157]}),{77:[1,158]},t(Nt,[2,108],{117:160,10:[1,159],14:ft,42:Q,58:H,86:it,102:nt,103:Z,106:tt,108:O,111:at,112:W,113:dt}),t(Nt,[2,110],{10:[1,161]}),t(Zt,[2,176]),t(Zt,[2,163]),t(Zt,[2,164]),t(Zt,[2,165]),t(Zt,[2,166]),t(Zt,[2,167]),t(Zt,[2,168]),t(Zt,[2,169]),t(Zt,[2,170]),t(Zt,[2,171]),t(Zt,[2,172]),t(Zt,[2,173]),{42:y,45:162,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},{30:163,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:171,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:173,48:[1,172],65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:174,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:175,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:176,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{106:[1,177]},{30:178,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:179,63:[1,180],65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:181,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:182,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{30:183,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},t(G,[2,175]),t(s,[2,20]),t(vt,[2,25]),t($,[2,43],{18:184,10:D}),t(bt,[2,68],{10:[1,185]}),{10:[1,186]},{30:187,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{75:[1,188],76:189,113:Mt,116:Bt},t(Be,[2,73]),t(Be,[2,75]),t(Be,[2,76]),t(Be,[2,161]),t(Be,[2,162]),{8:z,9:q,10:Wt,11:st,12:pt,14:ut,21:191,27:ot,29:[1,190],32:lt,42:ht,58:X,73:rt,80:135,81:et,82:ct,83:te,84:Qt,85:ue,86:Vt,87:jt,88:192,102:zt,106:_e,108:de,111:sr,112:Mr,113:ye},t($t,[2,94]),t($t,[2,96]),t($t,[2,97]),t($t,[2,150]),t($t,[2,151]),t($t,[2,152]),t($t,[2,153]),t($t,[2,154]),t($t,[2,155]),t($t,[2,156]),t($t,[2,157]),t($t,[2,158]),t($t,[2,159]),t($t,[2,160]),t($t,[2,83]),t($t,[2,84]),t($t,[2,85]),t($t,[2,86]),t($t,[2,87]),t($t,[2,88]),t($t,[2,89]),t($t,[2,90]),t($t,[2,91]),t($t,[2,92]),t($t,[2,93]),{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,193],33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:C,83:k,84:R,85:F,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m,118:P,119:j,120:N,121:v},{10:D,18:194},{10:[1,195],42:y,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:109,111:g,112:w,113:m},{10:[1,196]},{10:[1,197],103:[1,198]},t(ql,[2,121]),{10:[1,199],42:y,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:109,111:g,112:w,113:m},{10:[1,200],42:y,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:109,111:g,112:w,113:m},{77:[1,201]},t(Nt,[2,102],{10:[1,202]}),t(Nt,[2,104],{10:[1,203]}),{77:[1,204]},t(Zt,[2,177]),{77:[1,205],95:[1,206]},t(M,[2,50],{110:109,42:y,58:x,86:L,99:E,102:I,103:S,106:b,108:T,111:g,112:w,113:m}),{31:[1,207],65:Ft,79:208,113:Ot,114:Dt,115:It},t(nr,[2,79]),t(nr,[2,81]),t(nr,[2,82]),t(nr,[2,146]),t(nr,[2,147]),t(nr,[2,148]),t(nr,[2,149]),{47:[1,209],65:Ft,79:208,113:Ot,114:Dt,115:It},{30:210,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{49:[1,211],65:Ft,79:208,113:Ot,114:Dt,115:It},{51:[1,212],65:Ft,79:208,113:Ot,114:Dt,115:It},{53:[1,213],65:Ft,79:208,113:Ot,114:Dt,115:It},{55:[1,214],65:Ft,79:208,113:Ot,114:Dt,115:It},{58:[1,215]},{62:[1,216],65:Ft,79:208,113:Ot,114:Dt,115:It},{64:[1,217],65:Ft,79:208,113:Ot,114:Dt,115:It},{30:218,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},{31:[1,219],65:Ft,79:208,113:Ot,114:Dt,115:It},{65:Ft,67:[1,220],69:[1,221],79:208,113:Ot,114:Dt,115:It},{65:Ft,67:[1,223],69:[1,222],79:208,113:Ot,114:Dt,115:It},t($,[2,44],{42:ee}),t(bt,[2,70]),t(bt,[2,69]),{60:[1,224],65:Ft,79:208,113:Ot,114:Dt,115:It},t(bt,[2,72]),t(Be,[2,74]),{30:225,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},t(Xt,n,{5:226}),t($t,[2,95]),t(B,[2,35]),{41:227,42:y,43:39,45:40,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},{10:Ii,58:Fi,81:Ri,89:228,102:Di,104:229,105:230,106:Ni,107:Oi,108:Pi,109:Mi},{10:Ii,58:Fi,81:Ri,89:239,101:[1,240],102:Di,104:229,105:230,106:Ni,107:Oi,108:Pi,109:Mi},{10:Ii,58:Fi,81:Ri,89:241,101:[1,242],102:Di,104:229,105:230,106:Ni,107:Oi,108:Pi,109:Mi},{102:[1,243]},{10:Ii,58:Fi,81:Ri,89:244,102:Di,104:229,105:230,106:Ni,107:Oi,108:Pi,109:Mi},{42:y,45:245,58:x,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m},t(Nt,[2,101]),{77:[1,246]},{77:[1,247],95:[1,248]},t(Nt,[2,109]),t(Nt,[2,111],{10:[1,249]}),t(Nt,[2,112]),t(wt,[2,51]),t(nr,[2,80]),t(wt,[2,52]),{49:[1,250],65:Ft,79:208,113:Ot,114:Dt,115:It},t(wt,[2,59]),t(wt,[2,54]),t(wt,[2,55]),t(wt,[2,56]),{106:[1,251]},t(wt,[2,58]),t(wt,[2,60]),{64:[1,252],65:Ft,79:208,113:Ot,114:Dt,115:It},t(wt,[2,62]),t(wt,[2,63]),t(wt,[2,65]),t(wt,[2,64]),t(wt,[2,66]),t([10,42,58,86,99,102,103,106,108,111,112,113],[2,78]),{31:[1,253],65:Ft,79:208,113:Ot,114:Dt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,254],33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:C,83:k,84:R,85:F,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m,118:P,119:j,120:N,121:v},t(M,[2,48]),t(Nt,[2,114],{103:Vr}),t(zl,[2,123],{105:256,10:Ii,58:Fi,81:Ri,102:Di,106:Ni,107:Oi,108:Pi,109:Mi}),t(Ci,[2,125]),t(Ci,[2,127]),t(Ci,[2,128]),t(Ci,[2,129]),t(Ci,[2,130]),t(Ci,[2,131]),t(Ci,[2,132]),t(Ci,[2,133]),t(Ci,[2,134]),t(Nt,[2,115],{103:Vr}),{10:[1,257]},t(Nt,[2,116],{103:Vr}),{10:[1,258]},t(ql,[2,122]),t(Nt,[2,98],{103:Vr}),t(Nt,[2,99],{110:109,42:y,58:x,86:L,99:E,102:I,103:S,106:b,108:T,111:g,112:w,113:m}),t(Nt,[2,103]),t(Nt,[2,105],{10:[1,259]}),t(Nt,[2,106]),{95:[1,260]},{49:[1,261]},{60:[1,262]},{64:[1,263]},{8:z,9:q,11:st,21:264},t(B,[2,34]),{10:Ii,58:Fi,81:Ri,102:Di,104:265,105:230,106:Ni,107:Oi,108:Pi,109:Mi},t(Ci,[2,126]),{14:ft,42:Q,58:H,86:it,98:266,102:nt,103:Z,106:tt,108:O,111:at,112:W,113:dt,117:84},{14:ft,42:Q,58:H,86:it,98:267,102:nt,103:Z,106:tt,108:O,111:at,112:W,113:dt,117:84},{95:[1,268]},t(Nt,[2,113]),t(wt,[2,53]),{30:269,65:Ft,77:Yt,78:Ut,79:164,113:Ot,114:Dt,115:It},t(wt,[2,61]),t(Xt,n,{5:270}),t(zl,[2,124],{105:256,10:Ii,58:Fi,81:Ri,102:Di,106:Ni,107:Oi,108:Pi,109:Mi}),t(Nt,[2,119],{117:160,10:[1,271],14:ft,42:Q,58:H,86:it,102:nt,103:Z,106:tt,108:O,111:at,112:W,113:dt}),t(Nt,[2,120],{117:160,10:[1,272],14:ft,42:Q,58:H,86:it,102:nt,103:Z,106:tt,108:O,111:at,112:W,113:dt}),t(Nt,[2,107]),{31:[1,273],65:Ft,79:208,113:Ot,114:Dt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,274],33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:C,83:k,84:R,85:F,86:L,99:E,102:I,103:S,106:b,108:T,110:41,111:g,112:w,113:m,118:P,119:j,120:N,121:v},{10:Ii,58:Fi,81:Ri,89:275,102:Di,104:229,105:230,106:Ni,107:Oi,108:Pi,109:Mi},{10:Ii,58:Fi,81:Ri,89:276,102:Di,104:229,105:230,106:Ni,107:Oi,108:Pi,109:Mi},t(wt,[2,57]),t(B,[2,33]),t(Nt,[2,117],{103:Vr}),t(Nt,[2,118],{103:Vr})],defaultActions:{},parseError:function(Et,Lt){if(Lt.recoverable)this.trace(Et);else{var Pt=new Error(Et);throw Pt.hash=Lt,Pt}},parse:function(Et){var Lt=this,Pt=[0],xt=[],ie=[null],V=[],ps=this.table,U="",ri=0,Wl=0,Xd=2,Yl=1,$d=V.slice.call(arguments,1),Te=Object.create(this.lexer),xr={yy:{}};for(var Ba in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ba)&&(xr.yy[Ba]=this.yy[Ba]);Te.setInput(Et,xr.yy),xr.yy.lexer=Te,xr.yy.parser=this,typeof Te.yylloc>"u"&&(Te.yylloc={});var Ia=Te.yylloc;V.push(Ia);var Kd=Te.options&&Te.options.ranges;typeof xr.yy.parseError=="function"?this.parseError=xr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Qd(){var qi;return qi=xt.pop()||Te.lex()||Yl,typeof qi!="number"&&(qi instanceof Array&&(xt=qi,qi=xt.pop()),qi=Lt.symbols_[qi]||qi),qi}for(var je,br,si,Fa,qr={},cn,Vi,Ul,hn;;){if(br=Pt[Pt.length-1],this.defaultActions[br]?si=this.defaultActions[br]:((je===null||typeof je>"u")&&(je=Qd()),si=ps[br]&&ps[br][je]),typeof si>"u"||!si.length||!si[0]){var Ra="";hn=[];for(cn in ps[br])this.terminals_[cn]&&cn>Xd&&hn.push("'"+this.terminals_[cn]+"'");Te.showPosition?Ra="Parse error on line "+(ri+1)+`:
`+Te.showPosition()+`
Expecting `+hn.join(", ")+", got '"+(this.terminals_[je]||je)+"'":Ra="Parse error on line "+(ri+1)+": Unexpected "+(je==Yl?"end of input":"'"+(this.terminals_[je]||je)+"'"),this.parseError(Ra,{text:Te.match,token:this.terminals_[je]||je,line:Te.yylineno,loc:Ia,expected:hn})}if(si[0]instanceof Array&&si.length>1)throw new Error("Parse Error: multiple actions possible at state: "+br+", token: "+je);switch(si[0]){case 1:Pt.push(je),ie.push(Te.yytext),V.push(Te.yylloc),Pt.push(si[1]),je=null,Wl=Te.yyleng,U=Te.yytext,ri=Te.yylineno,Ia=Te.yylloc;break;case 2:if(Vi=this.productions_[si[1]][1],qr.$=ie[ie.length-Vi],qr._$={first_line:V[V.length-(Vi||1)].first_line,last_line:V[V.length-1].last_line,first_column:V[V.length-(Vi||1)].first_column,last_column:V[V.length-1].last_column},Kd&&(qr._$.range=[V[V.length-(Vi||1)].range[0],V[V.length-1].range[1]]),Fa=this.performAction.apply(qr,[U,Wl,ri,xr.yy,si[1],ie,V].concat($d)),typeof Fa<"u")return Fa;Vi&&(Pt=Pt.slice(0,-1*Vi*2),ie=ie.slice(0,-1*Vi),V=V.slice(0,-1*Vi)),Pt.push(this.productions_[si[1]][0]),ie.push(qr.$),V.push(qr._$),Ul=ps[Pt[Pt.length-2]][Pt[Pt.length-1]],Pt.push(Ul);break;case 3:return!0}}return!0}},jd=function(){var ar={EOF:1,parseError:function(Lt,Pt){if(this.yy.parser)this.yy.parser.parseError(Lt,Pt);else throw new Error(Lt)},setInput:function(Et,Lt){return this.yy=Lt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var Lt=Et.match(/(?:\r\n?|\n).*/g);return Lt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var Lt=Et.length,Pt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Lt),this.offset-=Lt;var xt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Pt.length-1&&(this.yylineno-=Pt.length-1);var ie=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Pt?(Pt.length===xt.length?this.yylloc.first_column:0)+xt[xt.length-Pt.length].length-Pt[0].length:this.yylloc.first_column-Lt},this.options.ranges&&(this.yylloc.range=[ie[0],ie[0]+this.yyleng-Lt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),Lt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+Lt+"^"},test_match:function(Et,Lt){var Pt,xt,ie;if(this.options.backtrack_lexer&&(ie={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ie.yylloc.range=this.yylloc.range.slice(0))),xt=Et[0].match(/(?:\r\n?|\n).*/g),xt&&(this.yylineno+=xt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xt?xt[xt.length-1].length-xt[xt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Pt=this.performAction.call(this,this.yy,this,Lt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Pt)return Pt;if(this._backtrack){for(var V in ie)this[V]=ie[V];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,Lt,Pt,xt;this._more||(this.yytext="",this.match="");for(var ie=this._currentRules(),V=0;V<ie.length;V++)if(Pt=this._input.match(this.rules[ie[V]]),Pt&&(!Lt||Pt[0].length>Lt[0].length)){if(Lt=Pt,xt=V,this.options.backtrack_lexer){if(Et=this.test_match(Pt,ie[V]),Et!==!1)return Et;if(this._backtrack){Lt=!1;continue}else return!1}else if(!this.options.flex)break}return Lt?(Et=this.test_match(Lt,ie[xt]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Lt=this.next();return Lt||this.lex()},begin:function(Lt){this.conditionStack.push(Lt)},popState:function(){var Lt=this.conditionStack.length-1;return Lt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Lt){return Lt=this.conditionStack.length-1-Math.abs(Lt||0),Lt>=0?this.conditionStack[Lt]:"INITIAL"},pushState:function(Lt){this.begin(Lt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Lt,Pt,xt,ie){switch(xt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:this.begin("callbackname");break;case 8:this.popState();break;case 9:this.popState(),this.begin("callbackargs");break;case 10:return 92;case 11:this.popState();break;case 12:return 93;case 13:return"MD_STR";case 14:this.popState();break;case 15:this.begin("md_string");break;case 16:return"STR";case 17:this.popState();break;case 18:this.pushState("string");break;case 19:return 81;case 20:return 99;case 21:return 82;case 22:return 101;case 23:return 83;case 24:return 84;case 25:return 94;case 26:this.begin("click");break;case 27:this.popState();break;case 28:return 85;case 29:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 30:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 31:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 32:return 27;case 33:return 32;case 34:return 95;case 35:return 95;case 36:return 95;case 37:return 95;case 38:return this.popState(),13;case 39:return this.popState(),14;case 40:return this.popState(),14;case 41:return this.popState(),14;case 42:return this.popState(),14;case 43:return this.popState(),14;case 44:return this.popState(),14;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return 118;case 50:return 119;case 51:return 120;case 52:return 121;case 53:return 102;case 54:return 108;case 55:return 44;case 56:return 58;case 57:return 42;case 58:return 8;case 59:return 103;case 60:return 112;case 61:return this.popState(),75;case 62:return this.pushState("edgeText"),73;case 63:return 116;case 64:return this.popState(),75;case 65:return this.pushState("thickEdgeText"),73;case 66:return 116;case 67:return this.popState(),75;case 68:return this.pushState("dottedEdgeText"),73;case 69:return 116;case 70:return 75;case 71:return this.popState(),51;case 72:return"TEXT";case 73:return this.pushState("ellipseText"),50;case 74:return this.popState(),53;case 75:return this.pushState("text"),52;case 76:return this.popState(),55;case 77:return this.pushState("text"),54;case 78:return 56;case 79:return this.pushState("text"),65;case 80:return this.popState(),62;case 81:return this.pushState("text"),61;case 82:return this.popState(),47;case 83:return this.pushState("text"),46;case 84:return this.popState(),67;case 85:return this.popState(),69;case 86:return 114;case 87:return this.pushState("trapText"),66;case 88:return this.pushState("trapText"),68;case 89:return 115;case 90:return 65;case 91:return 87;case 92:return"SEP";case 93:return 86;case 94:return 112;case 95:return 108;case 96:return 42;case 97:return 106;case 98:return 111;case 99:return 113;case 100:return this.popState(),60;case 101:return this.pushState("text"),60;case 102:return this.popState(),49;case 103:return this.pushState("text"),48;case 104:return this.popState(),31;case 105:return this.pushState("text"),29;case 106:return this.popState(),64;case 107:return this.pushState("text"),63;case 108:return"TEXT";case 109:return"QUOTE";case 110:return 9;case 111:return 10;case 112:return 11}},rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{callbackargs:{rules:[11,12,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},callbackname:{rules:[8,9,10,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},href:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},click:{rules:[15,18,27,28,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dottedEdgeText:{rules:[15,18,67,69,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},thickEdgeText:{rules:[15,18,64,66,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},edgeText:{rules:[15,18,61,63,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},trapText:{rules:[15,18,70,73,75,77,81,83,84,85,86,87,88,101,103,105,107],inclusive:!1},ellipseText:{rules:[15,18,70,71,72,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},text:{rules:[15,18,70,73,74,75,76,77,80,81,82,83,87,88,100,101,102,103,104,105,106,107,108],inclusive:!1},vertex:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dir:{rules:[15,18,38,39,40,41,42,43,44,45,46,47,48,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr_multiline:{rules:[5,6,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr:{rules:[3,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_title:{rules:[1,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},md_string:{rules:[13,14,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},string:{rules:[15,16,17,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},INITIAL:{rules:[0,2,4,7,15,18,19,20,21,22,23,24,25,26,29,30,31,32,33,34,35,36,37,49,50,51,52,53,54,55,56,57,58,59,60,61,62,64,65,67,68,70,73,75,77,78,79,81,83,87,88,89,90,91,92,93,94,95,96,97,98,99,101,103,105,107,109,110,111,112],inclusive:!0}}};return ar}();Aa.lexer=jd;function La(){this.yy={}}return La.prototype=Aa,Aa.Parser=La,new La}();io.parser=io;const sl=io,E4="flowchart-";let kc=0,rs=Y(),Kt={},xi=[],Hr={},Zi=[],Yn={},Un={},Cn=0,ro=!0,oi,ya,ma=[];const xa=t=>mt.sanitizeText(t,rs),en=function(t){const e=Object.keys(Kt);for(const i of e)if(Kt[i].id===t)return Kt[i].domId;return t},G1=function(t,e,i,r,s,n,a={}){let o,l=t;l!==void 0&&l.trim().length!==0&&(Kt[l]===void 0&&(Kt[l]={id:l,labelType:"text",domId:E4+l+"-"+kc,styles:[],classes:[]}),kc++,e!==void 0?(rs=Y(),o=xa(e.text.trim()),Kt[l].labelType=e.type,o[0]==='"'&&o[o.length-1]==='"'&&(o=o.substring(1,o.length-1)),Kt[l].text=o):Kt[l].text===void 0&&(Kt[l].text=t),i!==void 0&&(Kt[l].type=i),r?.forEach(function(h){Kt[l].styles.push(h)}),s?.forEach(function(h){Kt[l].classes.push(h)}),n!==void 0&&(Kt[l].dir=n),Kt[l].props===void 0?Kt[l].props=a:a!==void 0&&Object.assign(Kt[l].props,a))},j1=function(t,e,i){const n={start:t,end:e,type:void 0,text:"",labelType:"text"};A.info("abc78 Got edge...",n);const a=i.text;if(a!==void 0&&(n.text=xa(a.text.trim()),n.text[0]==='"'&&n.text[n.text.length-1]==='"'&&(n.text=n.text.substring(1,n.text.length-1)),n.labelType=a.type),i!==void 0&&(n.type=i.type,n.stroke=i.stroke,n.length=i.length),n?.length>10&&(n.length=10),xi.length<(rs.maxEdges??500))A.info("abc78 pushing edge..."),xi.push(n);else throw new Error(`Edge limit exceeded. ${xi.length} edges found, but the limit is ${rs.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges. 
You cannot set this config via configuration inside the diagram as it is a secure config. 
You have to call mermaid.initialize.`)},X1=function(t,e,i){A.info("addLink (abc78)",t,e,i);let r,s;for(r=0;r<t.length;r++)for(s=0;s<e.length;s++)j1(t[r],e[s],i)},$1=function(t,e){t.forEach(function(i){i==="default"?xi.defaultInterpolate=e:xi[i].interpolate=e})},K1=function(t,e){t.forEach(function(i){if(i>=xi.length)throw new Error(`The index ${i} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${xi.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);i==="default"?xi.defaultStyle=e:(Rt.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),xi[i].style=e)})},Q1=function(t,e){t.split(",").forEach(function(i){Hr[i]===void 0&&(Hr[i]={id:i,styles:[],textStyles:[]}),e?.forEach(function(r){if(r.match("color")){const s=r.replace("fill","bgFill").replace("color","fill");Hr[i].textStyles.push(s)}Hr[i].styles.push(r)})})},Z1=function(t){oi=t,oi.match(/.*</)&&(oi="RL"),oi.match(/.*\^/)&&(oi="BT"),oi.match(/.*>/)&&(oi="LR"),oi.match(/.*v/)&&(oi="TB"),oi==="TD"&&(oi="TB")},ba=function(t,e){t.split(",").forEach(function(i){let r=i;Kt[r]!==void 0&&Kt[r].classes.push(e),Yn[r]!==void 0&&Yn[r].classes.push(e)})},v4=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Un[ya==="gen-1"?en(i):i]=xa(e))})},S4=function(t,e,i){let r=en(t);if(Y().securityLevel!=="loose"||e===void 0)return;let s=[];if(typeof i=="string"){s=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<s.length;n++){let a=s[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),s[n]=a}}s.length===0&&s.push(t),Kt[t]!==void 0&&(Kt[t].haveCallback=!0,ma.push(function(){const n=document.querySelector(`[id="${r}"]`);n!==null&&n.addEventListener("click",function(){Rt.runFunc(e,...s)},!1)}))},J1=function(t,e,i){t.split(",").forEach(function(r){Kt[r]!==void 0&&(Kt[r].link=Rt.formatUrl(e,rs),Kt[r].linkTarget=i)}),ba(t,"clickable")},tu=function(t){if(Un.hasOwnProperty(t))return Un[t]},eu=function(t,e,i){t.split(",").forEach(function(r){S4(r,e,i)}),ba(t,"clickable")},iu=function(t){ma.forEach(function(e){e(t)})},ru=function(){return oi.trim()},su=function(){return Kt},nu=function(){return xi},au=function(){return Hr},ou=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.bottom+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};ma.push(ou);const lu=function(t="gen-1"){Kt={},Hr={},xi=[],ma=[ou],Zi=[],Yn={},Cn=0,Un={},ro=!0,ya=t,rs=Y(),We()},cu=t=>{ya=t||"gen-2"},hu=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},uu=function(t,e,i){let r=t.text.trim(),s=i.text;t===i&&i.text.match(/\s/)&&(r=void 0);function n(u){const f={boolean:{},number:{},string:{}},d=[];let p;return{nodeList:u.filter(function(x){const _=typeof x;return x.stmt&&x.stmt==="dir"?(p=x.value,!1):x.trim()===""?!1:_ in f?f[_].hasOwnProperty(x)?!1:f[_][x]=!0:d.includes(x)?!1:d.push(x)}),dir:p}}let a=[];const{nodeList:o,dir:l}=n(a.concat.apply(a,e));if(a=o,ya==="gen-1")for(let u=0;u<a.length;u++)a[u]=en(a[u]);r=r||"subGraph"+Cn,s=s||"",s=xa(s),Cn=Cn+1;const h={id:r,nodes:a,title:s.trim(),classes:[],dir:l,labelType:i.type};return A.info("Adding",h.id,h.nodes,h.dir),h.nodes=ku(h,Zi).nodes,Zi.push(h),Yn[r]=h,r},w4=function(t){for(const[e,i]of Zi.entries())if(i.id===t)return e;return-1};let ms=-1;const du=[],fu=function(t,e){const i=Zi[e].nodes;if(ms=ms+1,ms>2e3)return;if(du[ms]=e,Zi[e].id===t)return{result:!0,count:0};let r=0,s=1;for(;r<i.length;){const n=w4(i[r]);if(n>=0){const a=fu(t,n);if(a.result)return{result:!0,count:s+a.count};s=s+a.count}r=r+1}return{result:!1,count:s}},pu=function(t){return du[t]},gu=function(){ms=-1,Zi.length>0&&fu("none",Zi.length-1)},yu=function(){return Zi},mu=()=>ro?(ro=!1,!0):!1,A4=t=>{let e=t.trim(),i="arrow_open";switch(e[0]){case"<":i="arrow_point",e=e.slice(1);break;case"x":i="arrow_cross",e=e.slice(1);break;case"o":i="arrow_circle",e=e.slice(1);break}let r="normal";return e.includes("=")&&(r="thick"),e.includes(".")&&(r="dotted"),{type:i,stroke:r}},L4=(t,e)=>{const i=e.length;let r=0;for(let s=0;s<i;++s)e[s]===t&&++r;return r},B4=t=>{const e=t.trim();let i=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,i=i.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,i=i.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,i=i.slice(1));break}let s="normal",n=i.length-1;i[0]==="="&&(s="thick"),i[0]==="~"&&(s="invisible");let a=L4(".",i);return a&&(s="dotted",n=a),{type:r,stroke:s,length:n}},xu=(t,e)=>{const i=B4(t);let r;if(e){if(r=A4(e),r.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=i.type;else{if(r.type!==i.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=i.length,r}return i},bu=(t,e)=>{let i=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(i=!0)}),i},ku=(t,e)=>{const i=[];return t.nodes.forEach((r,s)=>{bu(e,r)||i.push(t.nodes[s])}),{nodes:i}},_u={firstGraph:mu},Sr={defaultConfig:()=>c1.flowchart,setAccTitle:Ne,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,addVertex:G1,lookUpDomId:en,addLink:X1,updateLinkInterpolate:$1,updateLink:K1,addClass:Q1,setDirection:Z1,setClass:ba,setTooltip:v4,getTooltip:tu,setClickEvent:eu,setLink:J1,bindFunctions:iu,getDirection:ru,getVertices:su,getEdges:nu,getClasses:au,clear:lu,setGen:cu,defaultStyle:hu,addSubGraph:uu,getDepthFirstPos:pu,indexNodes:gu,getSubGraphs:yu,destructLink:xu,lex:_u,exists:bu,makeUniq:ku,setDiagramTitle:ei,getDiagramTitle:Ge},I4=Object.freeze(Object.defineProperty({__proto__:null,addClass:Q1,addLink:X1,addSingleLink:j1,addSubGraph:uu,addVertex:G1,bindFunctions:iu,clear:lu,default:Sr,defaultStyle:hu,destructLink:xu,firstGraph:mu,getClasses:au,getDepthFirstPos:pu,getDirection:ru,getEdges:nu,getSubGraphs:yu,getTooltip:tu,getVertices:su,indexNodes:gu,lex:_u,lookUpDomId:en,setClass:ba,setClickEvent:eu,setDirection:Z1,setGen:cu,setLink:J1,updateLink:K1,updateLinkInterpolate:$1},Symbol.toStringTag,{value:"Module"}));function F4(t){const e=t.replace(/\n{2,}/g,`
`);return yh(e)}function R4(t){const e=F4(t),{children:i}=mh(e),r=[[]];let s=0;function n(a,o="normal"){a.type==="text"?a.value.split(`
`).forEach((h,u)=>{u!==0&&(s++,r.push([])),h.split(" ").forEach(f=>{f&&r[s].push({content:f,type:o})})}):(a.type==="strong"||a.type==="emphasis")&&a.children.forEach(l=>{n(l,a.type)})}return i.forEach(a=>{a.type==="paragraph"&&a.children.forEach(o=>{n(o)})}),r}function D4(t){const{children:e}=mh(t);function i(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(i).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(i).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(i).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(i).join("")}function N4(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}function O4(t,e){const i=N4(e.content);return Tu(t,[],i,e.type)}function Tu(t,e,i,r){if(i.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[s,...n]=i,a=[...e,s];return t([{content:a.join(""),type:r}])?Tu(t,a,n,r):(e.length===0&&s&&(e.push(s),i.shift()),[{content:e.join(""),type:r},{content:i.join(""),type:r}])}function P4(t,e){if(t.some(({content:i})=>i.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return so(t,e)}function so(t,e,i=[],r=[]){if(t.length===0)return r.length>0&&i.push(r),i.length>0?i:[];let s="";t[0].content===" "&&(s=" ",t.shift());const n=t.shift()??{content:" ",type:"normal"},a=[...r];if(s!==""&&a.push({content:s,type:"normal"}),a.push(n),e(a))return so(t,e,i,a);if(r.length>0)i.push(r),t.unshift(n);else if(n.content){const[o,l]=O4(e,n);i.push([o]),l.content&&t.unshift(l)}return so(t,e,i)}function M4(t,e){e&&t.attr("style",e)}function V4(t,e,i,r,s=!1){const n=t.append("foreignObject"),a=n.append("xhtml:div"),o=e.label,l=e.isNode?"nodeLabel":"edgeLabel";a.html(`
    <span class="${l} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>"),M4(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",i+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&a.attr("class","labelBkg");let h=a.node().getBoundingClientRect();return h.width===i&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",i+"px"),h=a.node().getBoundingClientRect()),n.style("width",h.width),n.style("height",h.height),n.node()}function nl(t,e,i){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*i-.1+"em").attr("dy",i+"em")}function q4(t,e,i){const r=t.append("text"),s=nl(r,1,e);al(s,i);const n=s.node().getComputedTextLength();return r.remove(),n}function z4(t,e,i){var r;const s=t.append("text"),n=nl(s,1,e);al(n,[{content:i,type:"normal"}]);const a=(r=n.node())==null?void 0:r.getBoundingClientRect();return a&&s.remove(),a}function W4(t,e,i,r=!1){const n=e.append("g"),a=n.insert("rect").attr("class","background"),o=n.append("text").attr("y","-10.1");let l=0;for(const h of i){const u=d=>q4(n,1.1,d)<=t,f=u(h)?[h]:P4(h,u);for(const d of f){const p=nl(o,l,1.1);al(p,d),l++}}if(r){const h=o.node().getBBox(),u=2;return a.attr("x",-u).attr("y",-u).attr("width",h.width+2*u).attr("height",h.height+2*u),n.node()}else return o.node()}function al(t,e){t.text(""),e.forEach((i,r)=>{const s=t.append("tspan").attr("font-style",i.type==="emphasis"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",i.type==="strong"?"bold":"normal");r===0?s.text(i.content):s.text(" "+i.content)})}const ka=(t,e="",{style:i="",isTitle:r=!1,classes:s="",useHtmlLabels:n=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={})=>{if(A.info("createText",e,i,r,s,n,a,l),n){const h=D4(e),u={isNode:a,label:Fs(h).replace(/fa[blrs]?:fa-[\w-]+/g,d=>`<i class='${d.replace(":"," ")}'></i>`),labelStyle:i.replace("fill:","color:")};return V4(t,u,o,s,l)}else{const h=R4(e);return W4(o,t,h,l)}},Y4=(t,e,i,r)=>{e.forEach(s=>{J4[s](t,i,r)})},U4=(t,e,i)=>{A.trace("Making markers for ",i),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},H4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},G4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},j4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},X4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},$4=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},K4=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Q4=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},Z4=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},J4={extension:U4,composition:H4,aggregation:G4,dependency:j4,lollipop:X4,point:$4,circle:K4,cross:Q4,barb:Z4},Cu=Y4;function tx(t,e){e&&t.attr("style",e)}function ex(t){const e=yt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=e.append("xhtml:div"),r=t.label,s=t.isNode?"nodeLabel":"edgeLabel";return i.html('<span class="'+s+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),tx(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const ix=(t,e,i,r)=>{let s=t||"";if(typeof s=="object"&&(s=s[0]),ke(Y().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),A.info("vertexText"+s);const n={isNode:r,label:Fs(s).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return ex(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",e.replace("color:","fill:"));let a=[];typeof s=="string"?a=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?a=s:a=[];for(const o of a){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),i?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),n.appendChild(l)}return n}},$e=ix,Le=async(t,e,i,r)=>{let s;const n=e.useHtmlLabels||ke(Y().flowchart.htmlLabels);i?s=i:s="node default";const a=t.insert("g").attr("class",s).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let l;e.labelText===void 0?l="":l=typeof e.labelText=="string"?e.labelText:e.labelText[0];const h=o.node();let u;e.labelType==="markdown"?u=ka(o,ve(Fs(l),Y()),{useHtmlLabels:n,width:e.width||Y().flowchart.wrappingWidth,classes:"markdown-node-label"}):u=h.appendChild($e(ve(Fs(l),Y()),e.labelStyle,!1,r));let f=u.getBBox();const d=e.padding/2;if(ke(Y().flowchart.htmlLabels)){const p=u.children[0],y=yt(u),x=p.getElementsByTagName("img");if(x){const _=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...x].map(C=>new Promise(k=>{function R(){if(C.style.display="flex",C.style.flexDirection="column",_){const F=Y().fontSize?Y().fontSize:window.getComputedStyle(document.body).fontSize,L=5,E=parseInt(F,10)*L+"px";C.style.minWidth=E,C.style.maxWidth=E}else C.style.width="100%";k(C)}setTimeout(()=>{C.complete&&R()}),C.addEventListener("error",R),C.addEventListener("load",R)})))}f=p.getBoundingClientRect(),y.attr("width",f.width),y.attr("height",f.height)}return n?o.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"):o.attr("transform","translate(0, "+-f.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:a,bbox:f,halfPadding:d,label:o}},he=(t,e)=>{const i=e.node().getBBox();t.width=i.width,t.height=i.height};function er(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+i/2+")")}function rx(t,e){return t.intersect(e)}function Eu(t,e,i,r){var s=t.x,n=t.y,a=s-r.x,o=n-r.y,l=Math.sqrt(e*e*o*o+i*i*a*a),h=Math.abs(e*i*a/l);r.x<s&&(h=-h);var u=Math.abs(e*i*o/l);return r.y<n&&(u=-u),{x:s+h,y:n+u}}function sx(t,e,i){return Eu(t,e,e,i)}function nx(t,e,i,r){var s,n,a,o,l,h,u,f,d,p,y,x,_,C,k;if(s=e.y-t.y,a=t.x-e.x,l=e.x*t.y-t.x*e.y,d=s*i.x+a*i.y+l,p=s*r.x+a*r.y+l,!(d!==0&&p!==0&&_c(d,p))&&(n=r.y-i.y,o=i.x-r.x,h=r.x*i.y-i.x*r.y,u=n*t.x+o*t.y+h,f=n*e.x+o*e.y+h,!(u!==0&&f!==0&&_c(u,f))&&(y=s*o-n*a,y!==0)))return x=Math.abs(y/2),_=a*h-o*l,C=_<0?(_-x)/y:(_+x)/y,_=n*l-s*h,k=_<0?(_-x)/y:(_+x)/y,{x:C,y:k}}function _c(t,e){return t*e>0}function ax(t,e,i){var r=t.x,s=t.y,n=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(y){a=Math.min(a,y.x),o=Math.min(o,y.y)}):(a=Math.min(a,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-a,h=s-t.height/2-o,u=0;u<e.length;u++){var f=e[u],d=e[u<e.length-1?u+1:0],p=nx(t,i,{x:l+f.x,y:h+f.y},{x:l+d.x,y:h+d.y});p&&n.push(p)}return n.length?(n.length>1&&n.sort(function(y,x){var _=y.x-i.x,C=y.y-i.y,k=Math.sqrt(_*_+C*C),R=x.x-i.x,F=x.y-i.y,L=Math.sqrt(R*R+F*F);return k<L?-1:k===L?0:1}),n[0]):t}const ox=(t,e)=>{var i=t.x,r=t.y,s=e.x-i,n=e.y-r,a=t.width/2,o=t.height/2,l,h;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),l=n===0?0:o*s/n,h=o):(s<0&&(a=-a),l=a,h=s===0?0:a*n/s),{x:i+l,y:r+h}},rn=ox,se={node:rx,circle:sx,ellipse:Eu,polygon:ax,rect:rn},lx=async(t,e)=>{e.useHtmlLabels||Y().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:s,halfPadding:n}=await Le(t,e,"node "+e.classes,!0);A.info("Classes = ",e.classes);const a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-s.width/2-n).attr("y",-s.height/2-n).attr("width",s.width+e.padding).attr("height",s.height+e.padding),he(e,a),e.intersect=function(o){return se.rect(e,o)},r},cx=lx,Tc=t=>t?" "+t:"",ii=(t,e)=>`${e||"node default"}${Tc(t.classes)} ${Tc(t.class)}`,Cc=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=s+n,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];A.info("Question main (Circle)");const l=er(i,a,a,o);return l.attr("style",e.style),he(e,l),e.intersect=function(h){return A.warn("Intersect called"),se.polygon(e,o,h)},i},hx=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,s=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return i.insert("polygon",":first-child").attr("points",s.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return se.circle(e,14,a)},i},ux=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=4,n=r.height+e.padding,a=n/s,o=r.width+2*a+e.padding,l=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],h=er(i,o,n,l);return h.attr("style",e.style),he(e,h),e.intersect=function(u){return se.polygon(e,l,u)},i},dx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return er(i,s,n,a).attr("style",e.style),e.width=s+n,e.height=n,e.intersect=function(l){return se.polygon(e,a,l)},i},fx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],o=er(i,s,n,a);return o.attr("style",e.style),he(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},px=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],o=er(i,s,n,a);return o.attr("style",e.style),he(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},gx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],o=er(i,s,n,a);return o.attr("style",e.style),he(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},yx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],o=er(i,s,n,a);return o.attr("style",e.style),he(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},mx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],o=er(i,s,n,a);return o.attr("style",e.style),he(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},xx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=s/2,a=n/(2.5+s/50),o=r.height+a+e.padding,l="M 0,"+a+" a "+n+","+a+" 0,0,0 "+s+" 0 a "+n+","+a+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+a+" 0,0,0 "+s+" 0 l 0,"+-o,h=i.attr("label-offset-y",a).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-s/2+","+-(o/2+a)+")");return he(e,h),e.intersect=function(u){const f=se.rect(e,u),d=f.x-e.x;if(n!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(f.y-e.y)>e.height/2-a)){let p=a*a*(1-d*d/(n*n));p!=0&&(p=Math.sqrt(p)),p=a-p,u.y-e.y>0&&(p=-p),f.y+=p}return f},i},bx=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Le(t,e,"node "+e.classes+" "+e.class,!0),n=i.insert("rect",":first-child"),a=r.width+e.padding,o=r.height+e.padding;if(n.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-s).attr("y",-r.height/2-s).attr("width",a).attr("height",o),e.props){const l=new Set(Object.keys(e.props));e.props.borders&&(vu(n,e.props.borders,a,o),l.delete("borders")),l.forEach(h=>{A.warn(`Unknown node property ${h}`)})}return he(e,n),e.intersect=function(l){return se.rect(e,l)},i},kx=async(t,e)=>{const{shapeSvg:i}=await Le(t,e,"label",!0);A.trace("Classes = ",e.class);const r=i.insert("rect",":first-child"),s=0,n=0;if(r.attr("width",s).attr("height",n),i.attr("class","label edgeLabel"),e.props){const a=new Set(Object.keys(e.props));e.props.borders&&(vu(r,e.props.borders,s,n),a.delete("borders")),a.forEach(o=>{A.warn(`Unknown node property ${o}`)})}return he(e,r),e.intersect=function(a){return se.rect(e,a)},i};function vu(t,e,i,r){const s=[],n=o=>{s.push(o,0)},a=o=>{s.push(0,o)};e.includes("t")?(A.debug("add top border"),n(i)):a(i),e.includes("r")?(A.debug("add right border"),n(r)):a(r),e.includes("b")?(A.debug("add bottom border"),n(i)):a(i),e.includes("l")?(A.debug("add left border"),n(r)):a(r),t.attr("stroke-dasharray",s.join(" "))}const _x=(t,e)=>{let i;e.classes?i="node "+e.classes:i="node default";const r=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=r.insert("rect",":first-child"),n=r.insert("line"),a=r.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof o=="object"?l=o[0]:l=o,A.info("Label text abc79",l,o,typeof o=="object");const h=a.node().appendChild($e(l,e.labelStyle,!0,!0));let u={width:0,height:0};if(ke(Y().flowchart.htmlLabels)){const x=h.children[0],_=yt(h);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}A.info("Text 2",o);const f=o.slice(1,o.length);let d=h.getBBox();const p=a.node().appendChild($e(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0));if(ke(Y().flowchart.htmlLabels)){const x=p.children[0],_=yt(p);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}const y=e.padding/2;return yt(p).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),yt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")"),s.attr("class","outer title-state").attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+e.padding).attr("height",u.height+e.padding),n.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y),he(e,s),e.intersect=function(x){return se.rect(e,x)},r},Tx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.height+e.padding,n=r.width+s/4+e.padding,a=i.insert("rect",":first-child").attr("style",e.style).attr("rx",s/2).attr("ry",s/2).attr("x",-n/2).attr("y",-s/2).attr("width",n).attr("height",s);return he(e,a),e.intersect=function(o){return se.rect(e,o)},i},Cx=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Le(t,e,ii(e,void 0),!0),n=i.insert("circle",":first-child");return n.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),A.info("Circle main"),he(e,n),e.intersect=function(a){return A.info("Circle intersect",e,r.width/2+s,a),se.circle(e,r.width/2+s,a)},i},Ex=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Le(t,e,ii(e,void 0),!0),n=5,a=i.insert("g",":first-child"),o=a.insert("circle"),l=a.insert("circle");return a.attr("class",e.class),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s+n).attr("width",r.width+e.padding+n*2).attr("height",r.height+e.padding+n*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),A.info("DoubleCircle main"),he(e,o),e.intersect=function(h){return A.info("DoubleCircle intersect",e,r.width/2+s+n,h),se.circle(e,r.width/2+s+n,h)},i},vx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Le(t,e,ii(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s,y:0},{x:s,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],o=er(i,s,n,a);return o.attr("style",e.style),he(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},Sx=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),he(e,r),e.intersect=function(s){return se.circle(e,7,s)},i},Ec=(t,e,i)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s=70,n=10;i==="LR"&&(s=10,n=70);const a=r.append("rect").attr("x",-1*s/2).attr("y",-1*n/2).attr("width",s).attr("height",n).attr("class","fork-join");return he(e,a),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return se.rect(e,o)},r},wx=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child"),s=i.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),he(e,s),e.intersect=function(n){return se.circle(e,7,n)},i},Ax=(t,e)=>{const i=e.padding/2,r=4,s=8;let n;e.classes?n="node "+e.classes:n="node default";const a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=a.insert("rect",":first-child"),l=a.insert("line"),h=a.insert("line");let u=0,f=r;const d=a.insert("g").attr("class","label");let p=0;const y=e.classData.annotations&&e.classData.annotations[0],x=e.classData.annotations[0]?""+e.classData.annotations[0]+"":"",_=d.node().appendChild($e(x,e.labelStyle,!0,!0));let C=_.getBBox();if(ke(Y().flowchart.htmlLabels)){const S=_.children[0],b=yt(_);C=S.getBoundingClientRect(),b.attr("width",C.width),b.attr("height",C.height)}e.classData.annotations[0]&&(f+=C.height+r,u+=C.width);let k=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(Y().flowchart.htmlLabels?k+="&lt;"+e.classData.type+"&gt;":k+="<"+e.classData.type+">");const R=d.node().appendChild($e(k,e.labelStyle,!0,!0));yt(R).attr("class","classTitle");let F=R.getBBox();if(ke(Y().flowchart.htmlLabels)){const S=R.children[0],b=yt(R);F=S.getBoundingClientRect(),b.attr("width",F.width),b.attr("height",F.height)}f+=F.height+r,F.width>u&&(u=F.width);const L=[];e.classData.members.forEach(S=>{const b=S.getDisplayDetails();let T=b.displayText;Y().flowchart.htmlLabels&&(T=T.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const g=d.node().appendChild($e(T,b.cssStyle?b.cssStyle:e.labelStyle,!0,!0));let w=g.getBBox();if(ke(Y().flowchart.htmlLabels)){const m=g.children[0],P=yt(g);w=m.getBoundingClientRect(),P.attr("width",w.width),P.attr("height",w.height)}w.width>u&&(u=w.width),f+=w.height+r,L.push(g)}),f+=s;const E=[];if(e.classData.methods.forEach(S=>{const b=S.getDisplayDetails();let T=b.displayText;Y().flowchart.htmlLabels&&(T=T.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const g=d.node().appendChild($e(T,b.cssStyle?b.cssStyle:e.labelStyle,!0,!0));let w=g.getBBox();if(ke(Y().flowchart.htmlLabels)){const m=g.children[0],P=yt(g);w=m.getBoundingClientRect(),P.attr("width",w.width),P.attr("height",w.height)}w.width>u&&(u=w.width),f+=w.height+r,E.push(g)}),f+=s,y){let S=(u-C.width)/2;yt(_).attr("transform","translate( "+(-1*u/2+S)+", "+-1*f/2+")"),p=C.height+r}let I=(u-F.width)/2;return yt(R).attr("transform","translate( "+(-1*u/2+I)+", "+(-1*f/2+p)+")"),p+=F.height+r,l.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-f/2-i+s+p).attr("y2",-f/2-i+s+p),p+=s,L.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*f/2+p+s/2)+")");const b=S?.getBBox();p+=(b?.height??0)+r}),p+=s,h.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-f/2-i+s+p).attr("y2",-f/2-i+s+p),p+=s,E.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*f/2+p)+")");const b=S?.getBBox();p+=(b?.height??0)+r}),o.attr("style",e.style).attr("class","outer title-state").attr("x",-u/2-i).attr("y",-(f/2)-i).attr("width",u+e.padding).attr("height",f+e.padding),he(e,o),e.intersect=function(S){return se.rect(e,S)},a},vc={rhombus:Cc,question:Cc,rect:bx,labelRect:kx,rectWithTitle:_x,choice:hx,circle:Cx,doublecircle:Ex,stadium:Tx,hexagon:ux,rect_left_inv_arrow:dx,lean_right:fx,lean_left:px,trapezoid:gx,inv_trapezoid:yx,rect_right_inv_arrow:mx,cylinder:xx,start:Sx,end:wx,note:cx,subroutine:vx,fork:Ec,join:Ec,class_box:Ax};let Xr={};const Su=async(t,e,i)=>{let r,s;if(e.link){let n;Y().securityLevel==="sandbox"?n="_top":e.linkTarget&&(n=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",n),s=await vc[e.shape](r,e,i)}else s=await vc[e.shape](t,e,i),r=s;return e.tooltip&&s.attr("title",e.tooltip),e.class&&s.attr("class","node default "+e.class),Xr[e.id]=r,e.haveCallback&&Xr[e.id].attr("class",Xr[e.id].attr("class")+" clickable"),r},Lx=(t,e)=>{Xr[e.id]=t},Bx=()=>{Xr={}},Sc=t=>{const e=Xr[t.id];A.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const i=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-i)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},or={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function fn(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=Hn(t),e=Hn(e);const[i,r]=[t.x,t.y],[s,n]=[e.x,e.y],a=s-i,o=n-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}const Hn=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,wu=t=>({x:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(or,t.arrowTypeStart)){const{angle:n,deltaX:a}=fn(r[0],r[1]);s=or[t.arrowTypeStart]*Math.cos(n)*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(or,t.arrowTypeEnd)){const{angle:n,deltaX:a}=fn(r[r.length-1],r[r.length-2]);s=or[t.arrowTypeEnd]*Math.cos(n)*(a>=0?1:-1)}return Hn(e).x+s},y:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(or,t.arrowTypeStart)){const{angle:n,deltaY:a}=fn(r[0],r[1]);s=or[t.arrowTypeStart]*Math.abs(Math.sin(n))*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(or,t.arrowTypeEnd)){const{angle:n,deltaY:a}=fn(r[r.length-1],r[r.length-2]);s=or[t.arrowTypeEnd]*Math.abs(Math.sin(n))*(a>=0?1:-1)}return Hn(e).y+s}}),Au=(t,e,i,r,s)=>{e.arrowTypeStart&&wc(t,"start",e.arrowTypeStart,i,r,s),e.arrowTypeEnd&&wc(t,"end",e.arrowTypeEnd,i,r,s)},Ix={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},wc=(t,e,i,r,s,n)=>{const a=Ix[i];if(!a){A.warn(`Unknown arrow type: ${i}`);return}const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${r}#${s}_${n}-${a}${o})`)};let Gn={},Se={};const Fx=()=>{Gn={},Se={}},Lu=(t,e)=>{const i=ke(Y().flowchart.htmlLabels),r=e.labelType==="markdown"?ka(t,e.label,{style:e.labelStyle,useHtmlLabels:i,addSvgBackground:!0}):$e(e.label,e.labelStyle);A.info("abc82",e,e.labelType);const s=t.insert("g").attr("class","edgeLabel"),n=s.insert("g").attr("class","label");n.node().appendChild(r);let a=r.getBBox();if(i){const l=r.children[0],h=yt(r);a=l.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),Gn[e.id]=s,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const l=$e(e.startLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),Se[e.id]||(Se[e.id]={}),Se[e.id].startLeft=h,pn(o,e.startLabelLeft)}if(e.startLabelRight){const l=$e(e.startLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=h.node().appendChild(l),u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),Se[e.id]||(Se[e.id]={}),Se[e.id].startRight=h,pn(o,e.startLabelRight)}if(e.endLabelLeft){const l=$e(e.endLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(l),Se[e.id]||(Se[e.id]={}),Se[e.id].endLeft=h,pn(o,e.endLabelLeft)}if(e.endLabelRight){const l=$e(e.endLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(l),Se[e.id]||(Se[e.id]={}),Se[e.id].endRight=h,pn(o,e.endLabelRight)}return r};function pn(t,e){Y().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const Rx=(t,e)=>{A.info("Moving label abc78 ",t.id,t.label,Gn[t.id]);let i=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const r=Gn[t.id];let s=t.x,n=t.y;if(i){const a=Rt.calcLabelPosition(i);A.info("Moving label "+t.label+" from (",s,",",n,") to (",a.x,",",a.y,") abc78"),e.updatedPath&&(s=a.x,n=a.y)}r.attr("transform","translate("+s+", "+n+")")}if(t.startLabelLeft){const r=Se[t.id].startLeft;let s=t.x,n=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",i);s=a.x,n=a.y}r.attr("transform","translate("+s+", "+n+")")}if(t.startLabelRight){const r=Se[t.id].startRight;let s=t.x,n=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",i);s=a.x,n=a.y}r.attr("transform","translate("+s+", "+n+")")}if(t.endLabelLeft){const r=Se[t.id].endLeft;let s=t.x,n=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",i);s=a.x,n=a.y}r.attr("transform","translate("+s+", "+n+")")}if(t.endLabelRight){const r=Se[t.id].endRight;let s=t.x,n=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",i);s=a.x,n=a.y}r.attr("transform","translate("+s+", "+n+")")}},Dx=(t,e)=>{const i=t.x,r=t.y,s=Math.abs(e.x-i),n=Math.abs(e.y-r),a=t.width/2,o=t.height/2;return s>=a||n>=o},Nx=(t,e,i)=>{A.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,s=t.y,n=Math.abs(r-i.x),a=t.width/2;let o=i.x<e.x?a-n:a+n;const l=t.height/2,h=Math.abs(e.y-i.y),u=Math.abs(e.x-i.x);if(Math.abs(s-e.y)*a>Math.abs(r-e.x)*l){let f=i.y<e.y?e.y-l-s:s-l-e.y;o=u*f/h;const d={x:i.x<e.x?i.x+o:i.x-u+o,y:i.y<e.y?i.y+h-f:i.y-h+f};return o===0&&(d.x=e.x,d.y=e.y),u===0&&(d.x=e.x),h===0&&(d.y=e.y),A.warn(`abc89 topp/bott calc, Q ${h}, q ${f}, R ${u}, r ${o}`,d),d}else{i.x<e.x?o=e.x-a-r:o=r-a-e.x;let f=h*o/u,d=i.x<e.x?i.x+u-o:i.x-u+o,p=i.y<e.y?i.y+f:i.y-f;return A.warn(`sides calc abc89, Q ${h}, q ${f}, R ${u}, r ${o}`,{_x:d,_y:p}),o===0&&(d=e.x,p=e.y),u===0&&(d=e.x),h===0&&(p=e.y),{x:d,y:p}}},Ac=(t,e)=>{A.warn("abc88 cutPathAtIntersect",t,e);let i=[],r=t[0],s=!1;return t.forEach(n=>{if(A.info("abc88 checking point",n,e),!Dx(e,n)&&!s){const a=Nx(e,r,n);A.warn("abc88 inside",n,r,a),A.warn("abc88 intersection",a);let o=!1;i.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),i.some(l=>l.x===a.x&&l.y===a.y)?A.warn("abc88 no intersect",a,i):i.push(a),s=!0}else A.warn("abc88 outside",n,r),r=n,s||i.push(n)}),A.warn("abc88 returning points",i),i},Ox=function(t,e,i,r,s,n,a){let o=i.points,l=!1;const h=n.node(e.v);var u=n.node(e.w);A.info("abc88 InsertEdge: ",i),u.intersect&&h.intersect&&(o=o.slice(1,i.points.length-1),o.unshift(h.intersect(o[0])),A.info("Last point",o[o.length-1],u,u.intersect(o[o.length-1])),o.push(u.intersect(o[o.length-1]))),i.toCluster&&(A.info("to cluster abc88",r[i.toCluster]),o=Ac(i.points,r[i.toCluster].node),l=!0),i.fromCluster&&(A.info("from cluster abc88",r[i.fromCluster]),o=Ac(o.reverse(),r[i.fromCluster].node).reverse(),l=!0);const f=o.filter(F=>!Number.isNaN(F.y));let d=Zs;i.curve&&(s==="graph"||s==="flowchart")&&(d=i.curve);const{x:p,y}=wu(i),x=fr().x(p).y(y).curve(d);let _;switch(i.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-thick";break;default:_=""}switch(i.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break}const C=t.append("path").attr("d",x(f)).attr("id",i.id).attr("class"," "+_+(i.classes?" "+i.classes:"")).attr("style",i.style);let k="";(Y().flowchart.arrowMarkerAbsolute||Y().state.arrowMarkerAbsolute)&&(k=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,k=k.replace(/\(/g,"\\("),k=k.replace(/\)/g,"\\)")),A.info("arrowTypeStart",i.arrowTypeStart),A.info("arrowTypeEnd",i.arrowTypeEnd),Au(C,i,k,a,s);let R={};return l&&(R.updatedPath=o),R.originalPath=i.points,R};let qt={},bi={},Bu={};const Px=()=>{bi={},Bu={},qt={}},jn=(t,e)=>(A.trace("In isDecendant",e," ",t," = ",bi[e].includes(t)),!!bi[e].includes(t)),Mx=(t,e)=>(A.info("Decendants of ",e," is ",bi[e]),A.info("Edge is ",t),t.v===e||t.w===e?!1:bi[e]?bi[e].includes(t.v)||jn(t.v,e)||jn(t.w,e)||bi[e].includes(t.w):(A.debug("Tilt, ",e,",not in decendants"),!1)),Iu=(t,e,i,r)=>{A.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const s=e.children(t)||[];t!==r&&s.push(t),A.warn("Copying (nodes) clusterId",t,"nodes",s),s.forEach(n=>{if(e.children(n).length>0)Iu(n,e,i,r);else{const a=e.node(n);A.info("cp ",n," to ",r," with parent ",t),i.setNode(n,a),r!==e.parent(n)&&(A.warn("Setting parent",n,e.parent(n)),i.setParent(n,e.parent(n))),t!==r&&n!==t?(A.debug("Setting parent",n,t),i.setParent(n,t)):(A.info("In copy ",t,"root",r,"data",e.node(t),r),A.debug("Not Setting parent for node=",n,"cluster!==rootId",t!==r,"node!==clusterId",n!==t));const o=e.edges(n);A.debug("Copying Edges",o),o.forEach(l=>{A.info("Edge",l);const h=e.edge(l.v,l.w,l.name);A.info("Edge data",h,r);try{Mx(l,r)?(A.info("Copying as ",l.v,l.w,h,l.name),i.setEdge(l.v,l.w,h,l.name),A.info("newGraph edges ",i.edges(),i.edge(i.edges()[0]))):A.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(u){A.error(u)}})}A.debug("Removing node",n),e.removeNode(n)})},Fu=(t,e)=>{const i=e.children(t);let r=[...i];for(const s of i)Bu[s]=t,r=[...r,...Fu(s,e)];return r},Ns=(t,e)=>{A.trace("Searching",t);const i=e.children(t);if(A.trace("Searching children of id ",t,i),i.length<1)return A.trace("This is a valid node",t),t;for(const r of i){const s=Ns(r,e);if(s)return A.trace("Found replacement for",t," => ",s),s}},gn=t=>!qt[t]||!qt[t].externalConnections?t:qt[t]?qt[t].id:t,Vx=(t,e)=>{if(!t||e>10){A.debug("Opting out, no graph ");return}else A.debug("Opting in, graph ");t.nodes().forEach(function(i){t.children(i).length>0&&(A.warn("Cluster identified",i," Replacement id in edges: ",Ns(i,t)),bi[i]=Fu(i,t),qt[i]={id:Ns(i,t),clusterData:t.node(i)})}),t.nodes().forEach(function(i){const r=t.children(i),s=t.edges();r.length>0?(A.debug("Cluster identified",i,bi),s.forEach(n=>{if(n.v!==i&&n.w!==i){const a=jn(n.v,i),o=jn(n.w,i);a^o&&(A.warn("Edge: ",n," leaves cluster ",i),A.warn("Decendants of XXX ",i,": ",bi[i]),qt[i].externalConnections=!0)}})):A.debug("Not a cluster ",i,bi)}),t.edges().forEach(function(i){const r=t.edge(i);A.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(i)),A.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(t.edge(i)));let s=i.v,n=i.w;if(A.warn("Fix XXX",qt,"ids:",i.v,i.w,"Translating: ",qt[i.v]," --- ",qt[i.w]),qt[i.v]&&qt[i.w]&&qt[i.v]===qt[i.w]){A.warn("Fixing and trixing link to self - removing XXX",i.v,i.w,i.name),A.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=gn(i.v),n=gn(i.w),t.removeEdge(i.v,i.w,i.name);const a=i.w+"---"+i.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const o=structuredClone(r),l=structuredClone(r);o.label="",o.arrowTypeEnd="none",l.label="",o.fromCluster=i.v,l.toCluster=i.v,t.setEdge(s,a,o,i.name+"-cyclic-special"),t.setEdge(a,n,l,i.name+"-cyclic-special")}else(qt[i.v]||qt[i.w])&&(A.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=gn(i.v),n=gn(i.w),t.removeEdge(i.v,i.w,i.name),s!==i.v&&(r.fromCluster=i.v),n!==i.w&&(r.toCluster=i.w),A.warn("Fix Replacing with XXX",s,n,i.name),t.setEdge(s,n,r,i.name))}),A.warn("Adjusted Graph",ji(t)),Ru(t,0),A.trace(qt)},Ru=(t,e)=>{if(A.warn("extractor - ",e,ji(t),t.children("D")),e>10){A.error("Bailing out");return}let i=t.nodes(),r=!1;for(const s of i){const n=t.children(s);r=r||n.length>0}if(!r){A.debug("Done, no node has children",t.nodes());return}A.debug("Nodes = ",i,e);for(const s of i)if(A.debug("Extracting node",s,qt,qt[s]&&!qt[s].externalConnections,!t.parent(s),t.node(s),t.children("D")," Depth ",e),!qt[s])A.debug("Not a cluster",s,e);else if(!qt[s].externalConnections&&t.children(s)&&t.children(s).length>0){A.warn("Cluster without external connections, without a parent and with children",s,e);let a=t.graph().rankdir==="TB"?"LR":"TB";qt[s]&&qt[s].clusterData&&qt[s].clusterData.dir&&(a=qt[s].clusterData.dir,A.warn("Fixing dir",qt[s].clusterData.dir,a));const o=new Ji({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});A.warn("Old graph before copy",ji(t)),Iu(s,t,o,s),t.setNode(s,{clusterNode:!0,id:s,clusterData:qt[s].clusterData,labelText:qt[s].labelText,graph:o}),A.warn("New graph after copy node: (",s,")",ji(o)),A.debug("Old graph after copy",ji(t))}else A.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!qt[s].externalConnections," no parent: ",!t.parent(s)," children ",t.children(s)&&t.children(s).length>0,t.children("D"),e),A.debug(qt);i=t.nodes(),A.warn("New list of nodes",i);for(const s of i){const n=t.node(s);A.warn(" Now next level",s,n),n.clusterNode&&Ru(n.graph,e+1)}},Du=(t,e)=>{if(e.length===0)return[];let i=Object.assign(e);return e.forEach(r=>{const s=t.children(r),n=Du(t,s);i=[...i,...n]}),i},qx=t=>Du(t,t.children()),zx=(t,e)=>{A.info("Creating subgraph rect for ",e.id,e);const i=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=i.insert("rect",":first-child"),s=ke(Y().flowchart.htmlLabels),n=i.insert("g").attr("class","cluster-label"),a=e.labelType==="markdown"?ka(n,e.labelText,{style:e.labelStyle,useHtmlLabels:s}):n.node().appendChild($e(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();if(ke(Y().flowchart.htmlLabels)){const d=a.children[0],p=yt(a);o=d.getBoundingClientRect(),p.attr("width",o.width),p.attr("height",o.height)}const l=0*e.padding,h=l/2,u=e.width<=o.width+l?o.width+l:e.width;e.width<=o.width+l?e.diff=(o.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,A.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-u/2).attr("y",e.y-e.height/2-h).attr("width",u).attr("height",e.height+l),s?n.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2)+")"):n.attr("transform","translate("+e.x+", "+(e.y-e.height/2)+")");const f=r.node().getBBox();return e.width=f.width,e.height=f.height,e.intersect=function(d){return rn(e,d)},i},Wx=(t,e)=>{const i=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+s).attr("height",e.height+s).attr("fill","none");const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.intersect=function(o){return rn(e,o)},i},Yx=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),s=i.insert("g").attr("class","cluster-label"),n=i.append("rect"),a=s.node().appendChild($e(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();if(ke(Y().flowchart.htmlLabels)){const d=a.children[0],p=yt(a);o=d.getBoundingClientRect(),p.attr("width",o.width),p.attr("height",o.height)}o=a.getBBox();const l=0*e.padding,h=l/2,u=e.width<=o.width+e.padding?o.width+e.padding:e.width;e.width<=o.width+e.padding?e.diff=(o.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-u/2-h).attr("y",e.y-e.height/2-h).attr("width",u+l).attr("height",e.height+l),n.attr("class","inner").attr("x",e.x-u/2-h).attr("y",e.y-e.height/2-h+o.height-1).attr("width",u+l).attr("height",e.height+l-o.height-3),s.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2-e.padding/3+(ke(Y().flowchart.htmlLabels)?5:3))+")");const f=r.node().getBBox();return e.height=f.height,e.intersect=function(d){return rn(e,d)},i},Ux=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("class","divider").attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2).attr("width",e.width+s).attr("height",e.height+s);const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.diff=-e.padding/2,e.intersect=function(o){return rn(e,o)},i},Hx={rect:zx,roundedWithTitle:Yx,noteGroup:Wx,divider:Ux};let Nu={};const Gx=(t,e)=>{A.trace("Inserting cluster");const i=e.shape||"rect";Nu[e.id]=Hx[i](t,e)},jx=()=>{Nu={}},Ou=async(t,e,i,r,s)=>{A.info("Graph in recursive render: XXX",ji(e),s);const n=e.graph().rankdir;A.trace("Dir in recursive render - dir:",n);const a=t.insert("g").attr("class","root");e.nodes()?A.info("Recursive render XXX",e.nodes()):A.info("No nodes found for",e),e.edges().length>0&&A.trace("Recursive edges",e.edge(e.edges()[0]));const o=a.insert("g").attr("class","clusters"),l=a.insert("g").attr("class","edgePaths"),h=a.insert("g").attr("class","edgeLabels"),u=a.insert("g").attr("class","nodes");await Promise.all(e.nodes().map(async function(d){const p=e.node(d);if(s!==void 0){const y=JSON.parse(JSON.stringify(s.clusterData));A.info("Setting data for cluster XXX (",d,") ",y,s),e.setNode(s.id,y),e.parent(d)||(A.trace("Setting parent",d,s.id),e.setParent(d,s.id,y))}if(A.info("(Insert) Node XXX"+d+": "+JSON.stringify(e.node(d))),p&&p.clusterNode){A.info("Cluster identified",d,p.width,e.node(d));const y=await Ou(u,p.graph,i,r,e.node(d)),x=y.elem;he(p,x),p.diff=y.diff||0,A.info("Node bounds (abc123)",d,p,p.width,p.x,p.y),Lx(x,p),A.warn("Recursive render complete ",x,p)}else e.children(d).length>0?(A.info("Cluster - the non recursive path XXX",d,p.id,p,e),A.info(Ns(p.id,e)),qt[p.id]={id:Ns(p.id,e),node:p}):(A.info("Node - the non recursive path",d,p.id,p),await Su(u,e.node(d),n))})),e.edges().forEach(function(d){const p=e.edge(d.v,d.w,d.name);A.info("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(d)),A.info("Edge "+d.v+" -> "+d.w+": ",d," ",JSON.stringify(e.edge(d))),A.info("Fix",qt,"ids:",d.v,d.w,"Translateing: ",qt[d.v],qt[d.w]),Lu(h,p)}),e.edges().forEach(function(d){A.info("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(d))}),A.info("#############################################"),A.info("###                Layout                 ###"),A.info("#############################################"),A.info(e),Qs(e),A.info("Graph after layout:",ji(e));let f=0;return qx(e).forEach(function(d){const p=e.node(d);A.info("Position "+d+": "+JSON.stringify(e.node(d))),A.info("Position "+d+": ("+p.x,","+p.y,") width: ",p.width," height: ",p.height),p&&p.clusterNode?Sc(p):e.children(d).length>0?(Gx(o,p),qt[p.id].node=p):Sc(p)}),e.edges().forEach(function(d){const p=e.edge(d);A.info("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(p),p);const y=Ox(l,d,p,qt,i,e,r);Rx(p,y)}),e.nodes().forEach(function(d){const p=e.node(d);A.info(d,p.type,p.diff),p.type==="group"&&(f=p.diff)}),{elem:a,diff:f}},ol=async(t,e,i,r,s)=>{Cu(t,i,r,s),Bx(),Fx(),jx(),Px(),A.warn("Graph at first:",JSON.stringify(ji(e))),Vx(e),A.warn("Graph after:",JSON.stringify(ji(e))),await Ou(t,e,r,s)},Pu={},Xx=function(t){const e=Object.keys(t);for(const i of e)Pu[i]=t[i]},Mu=function(t,e,i,r,s,n){const a=r.select(`[id="${i}"]`);Object.keys(t).forEach(function(l){const h=t[l];let u="default";h.classes.length>0&&(u=h.classes.join(" ")),u=u+" flowchart-label";const f=fi(h.styles);let d=h.text!==void 0?h.text:h.id,p;if(A.info("vertex",h,h.labelType),h.labelType==="markdown")A.info("vertex",h,h.labelType);else if(ke(Y().flowchart.htmlLabels)){const _={label:d.replace(/fa[blrs]?:fa-[\w-]+/g,C=>`<i class='${C.replace(":"," ")}'></i>`)};p=fh(a,_).node(),p.parentNode.removeChild(p)}else{const _=s.createElementNS("http://www.w3.org/2000/svg","text");_.setAttribute("style",f.labelStyle.replace("color:","fill:"));const C=d.split(mt.lineBreakRegex);for(const k of C){const R=s.createElementNS("http://www.w3.org/2000/svg","tspan");R.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),R.setAttribute("dy","1em"),R.setAttribute("x","1"),R.textContent=k,_.appendChild(R)}p=_}let y=0,x="";switch(h.type){case"round":y=5,x="rect";break;case"square":x="rect";break;case"diamond":x="question";break;case"hexagon":x="hexagon";break;case"odd":x="rect_left_inv_arrow";break;case"lean_right":x="lean_right";break;case"lean_left":x="lean_left";break;case"trapezoid":x="trapezoid";break;case"inv_trapezoid":x="inv_trapezoid";break;case"odd_right":x="rect_left_inv_arrow";break;case"circle":x="circle";break;case"ellipse":x="ellipse";break;case"stadium":x="stadium";break;case"subroutine":x="subroutine";break;case"cylinder":x="cylinder";break;case"group":x="rect";break;case"doublecircle":x="doublecircle";break;default:x="rect"}e.setNode(h.id,{labelStyle:f.labelStyle,shape:x,labelText:d,labelType:h.labelType,rx:y,ry:y,class:u,style:f.style,id:h.id,link:h.link,linkTarget:h.linkTarget,tooltip:n.db.getTooltip(h.id)||"",domId:n.db.lookUpDomId(h.id),haveCallback:h.haveCallback,width:h.type==="group"?500:void 0,dir:h.dir,type:h.type,props:h.props,padding:Y().flowchart.padding}),A.info("setNode",{labelStyle:f.labelStyle,labelType:h.labelType,shape:x,labelText:d,rx:y,ry:y,class:u,style:f.style,id:h.id,domId:n.db.lookUpDomId(h.id),width:h.type==="group"?500:void 0,type:h.type,dir:h.dir,props:h.props,padding:Y().flowchart.padding})})},Vu=function(t,e,i){A.info("abc78 edges = ",t);let r=0,s={},n,a;if(t.defaultStyle!==void 0){const o=fi(t.defaultStyle);n=o.style,a=o.labelStyle}t.forEach(function(o){r++;const l="L-"+o.start+"-"+o.end;s[l]===void 0?(s[l]=0,A.info("abc78 new entry",l,s[l])):(s[l]++,A.info("abc78 new entry",l,s[l]));let h=l+"-"+s[l];A.info("abc78 new link id to be used is",l,h,s[l]);const u="LS-"+o.start,f="LE-"+o.end,d={style:"",labelStyle:""};switch(d.minlen=o.length||1,o.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",o.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let p="",y="";switch(o.stroke){case"normal":p="fill:none;",n!==void 0&&(p=n),a!==void 0&&(y=a),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(o.style!==void 0){const x=fi(o.style);p=x.style,y=x.labelStyle}d.style=d.style+=p,d.labelStyle=d.labelStyle+=y,o.interpolate!==void 0?d.curve=hi(o.interpolate,ti):t.defaultInterpolate!==void 0?d.curve=hi(t.defaultInterpolate,ti):d.curve=hi(Pu.curve,ti),o.text===void 0?o.style!==void 0&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType=o.labelType,d.label=o.text.replace(mt.lineBreakRegex,`
`),o.style===void 0&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=h,d.classes="flowchart-link "+u+" "+f,e.setEdge(o.start,o.end,d,r)})},$x=function(t,e){return e.db.getClasses()},Kx=async function(t,e,i,r){A.info("Drawing flowchart");let s=r.db.getDirection();s===void 0&&(s="TD");const{securityLevel:n,flowchart:a}=Y(),o=a.nodeSpacing||50,l=a.rankSpacing||50;let h;n==="sandbox"&&(h=yt("#i"+e));const u=n==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body"),f=n==="sandbox"?h.nodes()[0].contentDocument:document,d=new Ji({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:o,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let p;const y=r.db.getSubGraphs();A.info("Subgraphs - ",y);for(let L=y.length-1;L>=0;L--)p=y[L],A.info("Subgraph - ",p),r.db.addVertex(p.id,{text:p.title,type:p.labelType},"group",void 0,p.classes,p.dir);const x=r.db.getVertices(),_=r.db.getEdges();A.info("Edges",_);let C=0;for(C=y.length-1;C>=0;C--){p=y[C],dh("cluster").append("text");for(let L=0;L<p.nodes.length;L++)A.info("Setting up subgraphs",p.nodes[L],p.id),d.setParent(p.nodes[L],p.id)}Mu(x,d,e,u,f,r),Vu(_,d);const k=u.select(`[id="${e}"]`),R=u.select("#"+e+" g");if(await ol(R,d,["point","circle","cross"],"flowchart",e),Rt.insertTitle(k,"flowchartTitleText",a.titleTopMargin,r.db.getDiagramTitle()),yr(d,k,a.diagramPadding,a.useMaxWidth),r.db.indexNodes("subGraph"+C),!a.htmlLabels){const L=f.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const E of L){const I=E.getBBox(),S=f.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",I.width),S.setAttribute("height",I.height),E.insertBefore(S,E.firstChild)}}Object.keys(x).forEach(function(L){const E=x[L];if(E.link){const I=yt("#"+e+' [id="'+L+'"]');if(I){const S=f.createElementNS("http://www.w3.org/2000/svg","a");S.setAttributeNS("http://www.w3.org/2000/svg","class",E.classes.join(" ")),S.setAttributeNS("http://www.w3.org/2000/svg","href",E.link),S.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),n==="sandbox"?S.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):E.linkTarget&&S.setAttributeNS("http://www.w3.org/2000/svg","target",E.linkTarget);const b=I.insert(function(){return S},":first-child"),T=I.select(".label-container");T&&b.append(function(){return T.node()});const g=I.select(".label");g&&b.append(function(){return g.node()})}}})},no={setConf:Xx,addVertices:Mu,addEdges:Vu,getClasses:$x,draw:Kx},Qx=(t,e)=>{const i=Cf,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return _s(r,s,n,e)},Zx=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }

  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${Qx(t.edgeLabelBackground,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,qu=Zx;function zu(t,e,i){const r=e.width,s=e.height,n=(r+s)*.9,a=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],o=ir(t,n,n,a);return i.intersect=function(l){return tr(i,a,l)},o}function Wu(t,e,i){const s=e.height,n=s/4,a=e.width+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-s/2},{x:a-n,y:-s},{x:n,y:-s},{x:0,y:-s/2}],l=ir(t,a,s,o);return i.intersect=function(h){return tr(i,o,h)},l}function Yu(t,e,i){const r=e.width,s=e.height,n=[{x:-s/2,y:0},{x:r,y:0},{x:r,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Uu(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Hu(t,e,i){const r=e.width,s=e.height,n=[{x:2*s/6,y:0},{x:r+s/6,y:0},{x:r-2*s/6,y:-s},{x:-s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Gu(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r+2*s/6,y:0},{x:r-s/6,y:-s},{x:s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function ju(t,e,i){const r=e.width,s=e.height,n=[{x:s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:-2*s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Xu(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r+s/2,y:0},{x:r,y:-s/2},{x:r+s/2,y:-s},{x:0,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function $u(t,e,i){const r=e.height,s=e.width+r/4,n=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-s/2).attr("y",-r/2).attr("width",s).attr("height",r);return i.intersect=function(a){return ph(i,a)},n}function Ku(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r,y:0},{x:r,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],a=ir(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Qu(t,e,i){const r=e.width,s=r/2,n=s/(2.5+r/50),a=e.height+n,o="M 0,"+n+" a "+s+","+n+" 0,0,0 "+r+" 0 a "+s+","+n+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+s+","+n+" 0,0,0 "+r+" 0 l 0,"+-a,l=t.attr("label-offset-y",n).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(a/2+n)+")");return i.intersect=function(h){const u=ph(i,h),f=u.x-i.x;if(s!=0&&(Math.abs(f)<i.width/2||Math.abs(f)==i.width/2&&Math.abs(u.y-i.y)>i.height/2-n)){let d=n*n*(1-f*f/(s*s));d!=0&&(d=Math.sqrt(d)),d=n-d,h.y-i.y>0&&(d=-d),u.y+=d}return u},l}function Jx(t){t.shapes().question=zu,t.shapes().hexagon=Wu,t.shapes().stadium=$u,t.shapes().subroutine=Ku,t.shapes().cylinder=Qu,t.shapes().rect_left_inv_arrow=Yu,t.shapes().lean_right=Uu,t.shapes().lean_left=Hu,t.shapes().trapezoid=Gu,t.shapes().inv_trapezoid=ju,t.shapes().rect_right_inv_arrow=Xu}function tb(t){t({question:zu}),t({hexagon:Wu}),t({stadium:$u}),t({subroutine:Ku}),t({cylinder:Qu}),t({rect_left_inv_arrow:Yu}),t({lean_right:Uu}),t({lean_left:Hu}),t({trapezoid:Gu}),t({inv_trapezoid:ju}),t({rect_right_inv_arrow:Xu})}function ir(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("transform","translate("+-e/2+","+i/2+")")}const eb={addToRender:Jx,addToRenderV2:tb},Zu={},ib=function(t){const e=Object.keys(t);for(const i of e)Zu[i]=t[i]},Ju=function(t,e,i,r,s,n){const a=r?r.select(`[id="${i}"]`):yt(`[id="${i}"]`),o=s||document;Object.keys(t).forEach(function(h){const u=t[h];let f="default";u.classes.length>0&&(f=u.classes.join(" "));const d=fi(u.styles);let p=u.text!==void 0?u.text:u.id,y;if(ke(Y().flowchart.htmlLabels)){const C={label:p.replace(/fa[blrs]?:fa-[\w-]+/g,k=>`<i class='${k.replace(":"," ")}'></i>`)};y=fh(a,C).node(),y.parentNode.removeChild(y)}else{const C=o.createElementNS("http://www.w3.org/2000/svg","text");C.setAttribute("style",d.labelStyle.replace("color:","fill:"));const k=p.split(mt.lineBreakRegex);for(const R of k){const F=o.createElementNS("http://www.w3.org/2000/svg","tspan");F.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),F.setAttribute("dy","1em"),F.setAttribute("x","1"),F.textContent=R,C.appendChild(F)}y=C}let x=0,_="";switch(u.type){case"round":x=5,_="rect";break;case"square":_="rect";break;case"diamond":_="question";break;case"hexagon":_="hexagon";break;case"odd":_="rect_left_inv_arrow";break;case"lean_right":_="lean_right";break;case"lean_left":_="lean_left";break;case"trapezoid":_="trapezoid";break;case"inv_trapezoid":_="inv_trapezoid";break;case"odd_right":_="rect_left_inv_arrow";break;case"circle":_="circle";break;case"ellipse":_="ellipse";break;case"stadium":_="stadium";break;case"subroutine":_="subroutine";break;case"cylinder":_="cylinder";break;case"group":_="rect";break;default:_="rect"}A.warn("Adding node",u.id,u.domId),e.setNode(n.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:d.labelStyle,shape:_,label:y,rx:x,ry:x,class:f,style:d.style,id:n.db.lookUpDomId(u.id)})})},t0=function(t,e,i){let r=0,s,n;if(t.defaultStyle!==void 0){const a=fi(t.defaultStyle);s=a.style,n=a.labelStyle}t.forEach(function(a){r++;const o="L-"+a.start+"-"+a.end,l="LS-"+a.start,h="LE-"+a.end,u={};a.type==="arrow_open"?u.arrowhead="none":u.arrowhead="normal";let f="",d="";if(a.style!==void 0){const p=fi(a.style);f=p.style,d=p.labelStyle}else switch(a.stroke){case"normal":f="fill:none",s!==void 0&&(f=s),n!==void 0&&(d=n);break;case"dotted":f="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f=" stroke-width: 3.5px;fill:none";break}u.style=f,u.labelStyle=d,a.interpolate!==void 0?u.curve=hi(a.interpolate,ti):t.defaultInterpolate!==void 0?u.curve=hi(t.defaultInterpolate,ti):u.curve=hi(Zu.curve,ti),a.text===void 0?a.style!==void 0&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",ke(Y().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${o}" class="edgeLabel L-${l}' L-${h}" style="${u.labelStyle}">${a.text.replace(/fa[blrs]?:fa-[\w-]+/g,p=>`<i class='${p.replace(":"," ")}'></i>`)}</span>`):(u.labelType="text",u.label=a.text.replace(mt.lineBreakRegex,`
`),a.style===void 0&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=o,u.class=l+" "+h,u.minlen=a.length||1,e.setEdge(i.db.lookUpDomId(a.start),i.db.lookUpDomId(a.end),u,r)})},rb=function(t,e){return A.info("Extracting classes"),e.db.getClasses()},sb=function(t,e,i,r){A.info("Drawing flowchart");const{securityLevel:s,flowchart:n}=Y();let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;let h=r.db.getDirection();h===void 0&&(h="TD");const u=n.nodeSpacing||50,f=n.rankSpacing||50,d=new Ji({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:u,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let p;const y=r.db.getSubGraphs();for(let E=y.length-1;E>=0;E--)p=y[E],r.db.addVertex(p.id,p.title,"group",void 0,p.classes);const x=r.db.getVertices();A.warn("Get vertices",x);const _=r.db.getEdges();let C=0;for(C=y.length-1;C>=0;C--){p=y[C],dh("cluster").append("text");for(let E=0;E<p.nodes.length;E++)A.warn("Setting subgraph",p.nodes[E],r.db.lookUpDomId(p.nodes[E]),r.db.lookUpDomId(p.id)),d.setParent(r.db.lookUpDomId(p.nodes[E]),r.db.lookUpDomId(p.id))}Ju(x,d,e,o,l,r),t0(_,d,r);const k=new ef;eb.addToRender(k),k.arrows().none=function(I,S,b,T){const w=I.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");rf(w,b[T+"Style"])},k.arrows().normal=function(I,S){I.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const R=o.select(`[id="${e}"]`),F=o.select("#"+e+" g");for(k(F,d),F.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+C),C=0;C<y.length;C++)if(p=y[C],p.title!=="undefined"){const E=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"] rect'),I=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"]'),S=E[0].x.baseVal.value,b=E[0].y.baseVal.value,T=E[0].width.baseVal.value,w=yt(I[0]).select(".label");w.attr("transform",`translate(${S+T/2}, ${b+14})`),w.attr("id",e+"Text");for(let m=0;m<p.classes.length;m++)I[0].classList.add(p.classes[m])}if(!n.htmlLabels){const E=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const I of E){const S=I.getBBox(),b=l.createElementNS("http://www.w3.org/2000/svg","rect");b.setAttribute("rx",0),b.setAttribute("ry",0),b.setAttribute("width",S.width),b.setAttribute("height",S.height),I.insertBefore(b,I.firstChild)}}yr(d,R,n.diagramPadding,n.useMaxWidth),Object.keys(x).forEach(function(E){const I=x[E];if(I.link){const S=o.select("#"+e+' [id="'+r.db.lookUpDomId(E)+'"]');if(S){const b=l.createElementNS("http://www.w3.org/2000/svg","a");b.setAttributeNS("http://www.w3.org/2000/svg","class",I.classes.join(" ")),b.setAttributeNS("http://www.w3.org/2000/svg","href",I.link),b.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),s==="sandbox"?b.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):I.linkTarget&&b.setAttributeNS("http://www.w3.org/2000/svg","target",I.linkTarget);const T=S.insert(function(){return b},":first-child"),g=S.select(".label-container");g&&T.append(function(){return g.node()});const w=S.select(".label");w&&T.append(function(){return w.node()})}}})},nb={setConf:ib,addVertices:Ju,addEdges:t0,getClasses:rb,draw:sb},ab={parser:sl,db:Sr,renderer:no,styles:qu,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,nb.setConf(t.flowchart),Sr.clear(),Sr.setGen("gen-1")}},ob=Object.freeze(Object.defineProperty({__proto__:null,diagram:ab},Symbol.toStringTag,{value:"Module"})),lb={parser:sl,db:Sr,renderer:no,styles:qu,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,vg({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),no.setConf(t.flowchart),Sr.clear(),Sr.setGen("gen-2")}},cb=Object.freeze(Object.defineProperty({__proto__:null,diagram:lb},Symbol.toStringTag,{value:"Module"}));var ao=function(){var t=function(S,b,T,g){for(T=T||{},g=S.length;g--;T[S[g]]=b);return T},e=[6,8,10,20,22,24,26,27,28],i=[1,10],r=[1,11],s=[1,12],n=[1,13],a=[1,14],o=[1,15],l=[1,21],h=[1,22],u=[1,23],f=[1,24],d=[1,25],p=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],y=[1,34],x=[27,28,46,47],_=[41,42,43,44,45],C=[17,34],k=[1,54],R=[1,53],F=[17,34,36,38],L={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:function(b,T,g,w,m,P,j){var N=P.length-1;switch(m){case 1:break;case 2:this.$=[];break;case 3:P[N-1].push(P[N]),this.$=P[N-1];break;case 4:case 5:this.$=P[N];break;case 6:case 7:this.$=[];break;case 8:w.addEntity(P[N-4]),w.addEntity(P[N-2]),w.addRelationship(P[N-4],P[N],P[N-2],P[N-3]);break;case 9:w.addEntity(P[N-3]),w.addAttributes(P[N-3],P[N-1]);break;case 10:w.addEntity(P[N-2]);break;case 11:w.addEntity(P[N]);break;case 12:w.addEntity(P[N-6],P[N-4]),w.addAttributes(P[N-6],P[N-1]);break;case 13:w.addEntity(P[N-5],P[N-3]);break;case 14:w.addEntity(P[N-3],P[N-1]);break;case 15:case 16:this.$=P[N].trim(),w.setAccTitle(this.$);break;case 17:case 18:this.$=P[N].trim(),w.setAccDescription(this.$);break;case 19:case 43:this.$=P[N];break;case 20:case 41:case 42:this.$=P[N].replace(/"/g,"");break;case 21:case 29:this.$=[P[N]];break;case 22:P[N].push(P[N-1]),this.$=P[N];break;case 23:this.$={attributeType:P[N-1],attributeName:P[N]};break;case 24:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeKeyTypeList:P[N]};break;case 25:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeComment:P[N]};break;case 26:this.$={attributeType:P[N-3],attributeName:P[N-2],attributeKeyTypeList:P[N-1],attributeComment:P[N]};break;case 27:case 28:case 31:this.$=P[N];break;case 30:P[N-2].push(P[N]),this.$=P[N-2];break;case 32:this.$=P[N].replace(/"/g,"");break;case 33:this.$={cardA:P[N],relType:P[N-1],cardB:P[N-2]};break;case 34:this.$=w.Cardinality.ZERO_OR_ONE;break;case 35:this.$=w.Cardinality.ZERO_OR_MORE;break;case 36:this.$=w.Cardinality.ONE_OR_MORE;break;case 37:this.$=w.Cardinality.ONLY_ONE;break;case 38:this.$=w.Cardinality.MD_PARENT;break;case 39:this.$=w.Identification.NON_IDENTIFYING;break;case 40:this.$=w.Identification.IDENTIFYING;break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:16,11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:l,42:h,43:u,44:f,45:d}),{21:[1,26]},{23:[1,27]},{25:[1,28]},t(e,[2,18]),t(p,[2,19]),t(p,[2,20]),t(e,[2,4]),{11:29,27:a,28:o},{16:30,17:[1,31],29:32,30:33,34:y},{11:35,27:a,28:o},{40:36,46:[1,37],47:[1,38]},t(x,[2,34]),t(x,[2,35]),t(x,[2,36]),t(x,[2,37]),t(x,[2,38]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),{13:[1,39]},{17:[1,40]},t(e,[2,10]),{16:41,17:[2,21],29:32,30:33,34:y},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:l,42:h,43:u,44:f,45:d},t(_,[2,39]),t(_,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},t(e,[2,9]),{17:[2,22]},t(C,[2,23],{32:50,33:51,35:52,37:k,38:R}),t([17,34,37,38],[2,28]),t(e,[2,14],{15:[1,55]}),t([27,28],[2,33]),t(e,[2,8]),t(e,[2,41]),t(e,[2,42]),t(e,[2,43]),t(C,[2,24],{33:56,36:[1,57],38:R}),t(C,[2,25]),t(F,[2,29]),t(C,[2,32]),t(F,[2,31]),{16:58,17:[1,59],29:32,30:33,34:y},t(C,[2,26]),{35:60,37:k},{17:[1,61]},t(e,[2,13]),t(F,[2,30]),t(e,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:function(b,T){if(T.recoverable)this.trace(b);else{var g=new Error(b);throw g.hash=T,g}},parse:function(b){var T=this,g=[0],w=[],m=[null],P=[],j=this.table,N="",v=0,D=0,B=2,z=1,q=P.slice.call(arguments,1),st=Object.create(this.lexer),$={yy:{}};for(var ft in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ft)&&($.yy[ft]=this.yy[ft]);st.setInput(b,$.yy),$.yy.lexer=st,$.yy.parser=this,typeof st.yylloc>"u"&&(st.yylloc={});var Q=st.yylloc;P.push(Q);var H=st.options&&st.options.ranges;typeof $.yy.parseError=="function"?this.parseError=$.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function it(){var vt;return vt=w.pop()||st.lex()||z,typeof vt!="number"&&(vt instanceof Array&&(w=vt,vt=w.pop()),vt=T.symbols_[vt]||vt),vt}for(var nt,Z,tt,O,at={},W,dt,M,wt;;){if(Z=g[g.length-1],this.defaultActions[Z]?tt=this.defaultActions[Z]:((nt===null||typeof nt>"u")&&(nt=it()),tt=j[Z]&&j[Z][nt]),typeof tt>"u"||!tt.length||!tt[0]){var G="";wt=[];for(W in j[Z])this.terminals_[W]&&W>B&&wt.push("'"+this.terminals_[W]+"'");st.showPosition?G="Parse error on line "+(v+1)+`:
`+st.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":G="Parse error on line "+(v+1)+": Unexpected "+(nt==z?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(G,{text:st.match,token:this.terminals_[nt]||nt,line:st.yylineno,loc:Q,expected:wt})}if(tt[0]instanceof Array&&tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Z+", token: "+nt);switch(tt[0]){case 1:g.push(nt),m.push(st.yytext),P.push(st.yylloc),g.push(tt[1]),nt=null,D=st.yyleng,N=st.yytext,v=st.yylineno,Q=st.yylloc;break;case 2:if(dt=this.productions_[tt[1]][1],at.$=m[m.length-dt],at._$={first_line:P[P.length-(dt||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(dt||1)].first_column,last_column:P[P.length-1].last_column},H&&(at._$.range=[P[P.length-(dt||1)].range[0],P[P.length-1].range[1]]),O=this.performAction.apply(at,[N,D,v,$.yy,tt[1],m,P].concat(q)),typeof O<"u")return O;dt&&(g=g.slice(0,-1*dt*2),m=m.slice(0,-1*dt),P=P.slice(0,-1*dt)),g.push(this.productions_[tt[1]][0]),m.push(at.$),P.push(at._$),M=j[g[g.length-2]][g[g.length-1]],g.push(M);break;case 3:return!0}}return!0}},E=function(){var S={EOF:1,parseError:function(T,g){if(this.yy.parser)this.yy.parser.parseError(T,g);else throw new Error(T)},setInput:function(b,T){return this.yy=T||this.yy||{},this._input=b,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var b=this._input[0];this.yytext+=b,this.yyleng++,this.offset++,this.match+=b,this.matched+=b;var T=b.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),b},unput:function(b){var T=b.length,g=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var w=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),g.length-1&&(this.yylineno-=g.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:g?(g.length===w.length?this.yylloc.first_column:0)+w[w.length-g.length].length-g[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(b.length>20?"...":"")+b.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var b=this.match;return b.length<20&&(b+=this._input.substr(0,20-b.length)),(b.substr(0,20)+(b.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),T=new Array(b.length+1).join("-");return b+this.upcomingInput()+`
`+T+"^"},test_match:function(b,T){var g,w,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),w=b[0].match(/(?:\r\n?|\n).*/g),w&&(this.yylineno+=w.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:w?w[w.length-1].length-w[w.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],g=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),g)return g;if(this._backtrack){for(var P in m)this[P]=m[P];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,T,g,w;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),P=0;P<m.length;P++)if(g=this._input.match(this.rules[m[P]]),g&&(!T||g[0].length>T[0].length)){if(T=g,w=P,this.options.backtrack_lexer){if(b=this.test_match(g,m[P]),b!==!1)return b;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(b=this.test_match(T,m[w]),b!==!1?b:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(T,g,w,m){switch(w){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return g.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return g.yytext[0];case 55:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return S}();L.lexer=E;function I(){this.yy={}}return I.prototype=L,L.Parser=I,new I}();ao.parser=ao;const hb=ao;let lr={},ll=[];const ub={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},db={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},e0=function(t,e=void 0){return lr[t]===void 0?(lr[t]={attributes:[],alias:e},A.info("Added new entity :",t)):lr[t]&&!lr[t].alias&&e&&(lr[t].alias=e,A.info(`Add alias '${e}' to entity '${t}'`)),lr[t]},fb=()=>lr,pb=function(t,e){let i=e0(t),r;for(r=e.length-1;r>=0;r--)i.attributes.push(e[r]),A.debug("Added attribute ",e[r].attributeName)},gb=function(t,e,i,r){let s={entityA:t,roleA:e,entityB:i,relSpec:r};ll.push(s),A.debug("Added new relationship :",s)},yb=()=>ll,mb=function(){lr={},ll=[],We()},xb={Cardinality:ub,Identification:db,getConfig:()=>Y().er,addEntity:e0,addAttributes:pb,getEntities:fb,addRelationship:gb,getRelationships:yb,clear:mb,setAccTitle:Ne,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,setDiagramTitle:ei,getDiagramTitle:Ge},pi={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},bb=function(t,e){let i;t.append("defs").append("marker").attr("id",pi.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",pi.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",pi.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",pi.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",pi.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",pi.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},gi={ERMarkers:pi,insertMarkers:bb},kb=/[^\dA-Za-z](\W)*/g;let xe={},Os=new Map;const _b=function(t){const e=Object.keys(t);for(const i of e)xe[i]=t[i]},Tb=(t,e,i)=>{const r=xe.entityPadding/3,s=xe.entityPadding/3,n=xe.fontSize*.85,a=e.node().getBBox(),o=[];let l=!1,h=!1,u=0,f=0,d=0,p=0,y=a.height+r*2,x=1;i.forEach(R=>{R.attributeKeyTypeList!==void 0&&R.attributeKeyTypeList.length>0&&(l=!0),R.attributeComment!==void 0&&(h=!0)}),i.forEach(R=>{const F=`${e.node().id}-attr-${x}`;let L=0;const E=Ts(R.attributeType),I=t.append("text").classed("er entityLabel",!0).attr("id",`${F}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(E),S=t.append("text").classed("er entityLabel",!0).attr("id",`${F}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(R.attributeName),b={};b.tn=I,b.nn=S;const T=I.node().getBBox(),g=S.node().getBBox();if(u=Math.max(u,T.width),f=Math.max(f,g.width),L=Math.max(T.height,g.height),l){const w=R.attributeKeyTypeList!==void 0?R.attributeKeyTypeList.join(","):"",m=t.append("text").classed("er entityLabel",!0).attr("id",`${F}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(w);b.kn=m;const P=m.node().getBBox();d=Math.max(d,P.width),L=Math.max(L,P.height)}if(h){const w=t.append("text").classed("er entityLabel",!0).attr("id",`${F}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(R.attributeComment||"");b.cn=w;const m=w.node().getBBox();p=Math.max(p,m.width),L=Math.max(L,m.height)}b.height=L,o.push(b),y+=L+r*2,x+=1});let _=4;l&&(_+=2),h&&(_+=2);const C=u+f+d+p,k={width:Math.max(xe.minEntityWidth,Math.max(a.width+xe.entityPadding*2,C+s*_)),height:i.length>0?y:Math.max(xe.minEntityHeight,a.height+xe.entityPadding*2)};if(i.length>0){const R=Math.max(0,(k.width-C-s*_)/(_/2));e.attr("transform","translate("+k.width/2+","+(r+a.height/2)+")");let F=a.height+r*2,L="attributeBoxOdd";o.forEach(E=>{const I=F+r+E.height/2;E.tn.attr("transform","translate("+s+","+I+")");const S=t.insert("rect","#"+E.tn.node().id).classed(`er ${L}`,!0).attr("x",0).attr("y",F).attr("width",u+s*2+R).attr("height",E.height+r*2),b=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));E.nn.attr("transform","translate("+(b+s)+","+I+")");const T=t.insert("rect","#"+E.nn.node().id).classed(`er ${L}`,!0).attr("x",b).attr("y",F).attr("width",f+s*2+R).attr("height",E.height+r*2);let g=parseFloat(T.attr("x"))+parseFloat(T.attr("width"));if(l){E.kn.attr("transform","translate("+(g+s)+","+I+")");const w=t.insert("rect","#"+E.kn.node().id).classed(`er ${L}`,!0).attr("x",g).attr("y",F).attr("width",d+s*2+R).attr("height",E.height+r*2);g=parseFloat(w.attr("x"))+parseFloat(w.attr("width"))}h&&(E.cn.attr("transform","translate("+(g+s)+","+I+")"),t.insert("rect","#"+E.cn.node().id).classed(`er ${L}`,"true").attr("x",g).attr("y",F).attr("width",p+s*2+R).attr("height",E.height+r*2)),F+=E.height+r*2,L=L==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else k.height=Math.max(xe.minEntityHeight,y),e.attr("transform","translate("+k.width/2+","+k.height/2+")");return k},Cb=function(t,e,i){const r=Object.keys(e);let s;return r.forEach(function(n){const a=Lb(n,"entity");Os.set(n,a);const o=t.append("g").attr("id",a);s=s===void 0?a:s;const l="text-"+a,h=o.append("text").classed("er entityLabel",!0).attr("id",l).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",Y().fontFamily).style("font-size",xe.fontSize+"px").text(e[n].alias??n),{width:u,height:f}=Tb(o,h,e[n].attributes),p=o.insert("rect","#"+l).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",f).node().getBBox();i.setNode(a,{width:p.width,height:p.height,shape:"rect",id:a})}),s},Eb=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )")})},i0=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},vb=function(t,e){return t.forEach(function(i){e.setEdge(Os.get(i.entityA),Os.get(i.entityB),{relationship:i},i0(i))}),t};let Lc=0;const Sb=function(t,e,i,r,s){Lc++;const n=i.edge(Os.get(e.entityA),Os.get(e.entityB),i0(e)),a=fr().x(function(y){return y.x}).y(function(y){return y.y}).curve(Zs),o=t.insert("path","#"+r).classed("er relationshipLine",!0).attr("d",a(n.points)).style("stroke",xe.stroke).style("fill","none");e.relSpec.relType===s.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let l="";switch(xe.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ZERO_OR_ONE_END+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ZERO_OR_MORE_END+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ONE_OR_MORE_END+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ONLY_ONE_END+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.MD_PARENT_END+")");break}switch(e.relSpec.cardB){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ZERO_OR_ONE_START+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ZERO_OR_MORE_START+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ONE_OR_MORE_START+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ONLY_ONE_START+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.MD_PARENT_START+")");break}const h=o.node().getTotalLength(),u=o.node().getPointAtLength(h*.5),f="rel"+Lc,p=t.append("text").classed("er relationshipLabel",!0).attr("id",f).attr("x",u.x).attr("y",u.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",Y().fontFamily).style("font-size",xe.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+f).classed("er relationshipLabelBox",!0).attr("x",u.x-p.width/2).attr("y",u.y-p.height/2).attr("width",p.width).attr("height",p.height)},wb=function(t,e,i,r){xe=Y().er,A.info("Drawing ER diagram");const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);gi.insertMarkers(o,xe);let l;l=new Ji({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:xe.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const h=Cb(o,r.db.getEntities(),l),u=vb(r.db.getRelationships(),l);Qs(l),Eb(o,l),u.forEach(function(x){Sb(o,x,l,h,r)});const f=xe.diagramPadding;Rt.insertTitle(o,"entityTitleText",xe.titleTopMargin,r.db.getDiagramTitle());const d=o.node().getBBox(),p=d.width+f*2,y=d.height+f*2;ze(o,y,p,xe.useMaxWidth),o.attr("viewBox",`${d.x-f} ${d.y-f} ${p} ${y}`)},Ab="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function Lb(t="",e=""){const i=t.replace(kb,"");return`${Bc(e)}${Bc(i)}${Ef(t,Ab)}`}function Bc(t=""){return t.length>0?`${t}-`:""}const Bb={setConf:_b,draw:wb},Ib=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  
`,Fb=Ib,Rb={parser:hb,db:xb,renderer:Bb,styles:Fb},Db=Object.freeze(Object.defineProperty({__proto__:null,diagram:Rb},Symbol.toStringTag,{value:"Module"}));var oo=function(){var t=function(L,E,I,S){for(I=I||{},S=L.length;S--;I[L[S]]=E);return I},e=[1,3],i=[1,6],r=[1,4],s=[1,5],n=[2,5],a=[1,12],o=[5,7,13,19,21,23,24,26,28,31,37,40,47],l=[7,13,19,21,23,24,26,28,31,37,40],h=[7,12,13,19,21,23,24,26,28,31,37,40],u=[7,13,47],f=[1,42],d=[1,41],p=[7,13,29,32,35,38,47],y=[1,55],x=[1,56],_=[1,57],C=[7,13,32,35,42,47],k={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,GG:5,document:6,EOF:7,":":8,DIR:9,options:10,body:11,OPT:12,NL:13,line:14,statement:15,commitStatement:16,mergeStatement:17,cherryPickStatement:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,section:24,branchStatement:25,CHECKOUT:26,ref:27,BRANCH:28,ORDER:29,NUM:30,CHERRY_PICK:31,COMMIT_ID:32,STR:33,PARENT_COMMIT:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,ID:46,";":47,$accept:0,$end:1},terminals_:{2:"error",5:"GG",7:"EOF",8:":",9:"DIR",12:"OPT",13:"NL",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"section",26:"CHECKOUT",28:"BRANCH",29:"ORDER",30:"NUM",31:"CHERRY_PICK",32:"COMMIT_ID",33:"STR",34:"PARENT_COMMIT",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",46:"ID",47:";"},productions_:[0,[3,2],[3,3],[3,4],[3,5],[6,0],[6,2],[10,2],[10,1],[11,0],[11,2],[14,2],[14,1],[15,1],[15,1],[15,1],[15,2],[15,2],[15,1],[15,1],[15,1],[15,2],[25,2],[25,4],[18,3],[18,5],[18,5],[18,7],[18,7],[18,5],[18,5],[18,5],[18,7],[18,7],[18,7],[18,7],[17,2],[17,4],[17,4],[17,4],[17,6],[17,6],[17,6],[17,6],[17,6],[17,6],[17,8],[17,8],[17,8],[17,8],[17,8],[17,8],[16,2],[16,3],[16,3],[16,5],[16,5],[16,3],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,3],[16,5],[16,5],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[41,0],[41,1],[39,1],[39,1],[39,1],[27,1],[27,1],[4,1],[4,1],[4,1]],performAction:function(E,I,S,b,T,g,w){var m=g.length-1;switch(T){case 2:return g[m];case 3:return g[m-1];case 4:return b.setDirection(g[m-3]),g[m-1];case 6:b.setOptions(g[m-1]),this.$=g[m];break;case 7:g[m-1]+=g[m],this.$=g[m-1];break;case 9:this.$=[];break;case 10:g[m-1].push(g[m]),this.$=g[m-1];break;case 11:this.$=g[m-1];break;case 16:this.$=g[m].trim(),b.setAccTitle(this.$);break;case 17:case 18:this.$=g[m].trim(),b.setAccDescription(this.$);break;case 19:b.addSection(g[m].substr(8)),this.$=g[m].substr(8);break;case 21:b.checkout(g[m]);break;case 22:b.branch(g[m]);break;case 23:b.branch(g[m-2],g[m]);break;case 24:b.cherryPick(g[m],"",void 0);break;case 25:b.cherryPick(g[m-2],"",void 0,g[m]);break;case 26:b.cherryPick(g[m-2],"",g[m]);break;case 27:b.cherryPick(g[m-4],"",g[m],g[m-2]);break;case 28:b.cherryPick(g[m-4],"",g[m-2],g[m]);break;case 29:b.cherryPick(g[m],"",g[m-2]);break;case 30:b.cherryPick(g[m],"","");break;case 31:b.cherryPick(g[m-2],"","");break;case 32:b.cherryPick(g[m-4],"","",g[m-2]);break;case 33:b.cherryPick(g[m-4],"","",g[m]);break;case 34:b.cherryPick(g[m-2],"",g[m-4],g[m]);break;case 35:b.cherryPick(g[m-2],"","",g[m]);break;case 36:b.merge(g[m],"","","");break;case 37:b.merge(g[m-2],g[m],"","");break;case 38:b.merge(g[m-2],"",g[m],"");break;case 39:b.merge(g[m-2],"","",g[m]);break;case 40:b.merge(g[m-4],g[m],"",g[m-2]);break;case 41:b.merge(g[m-4],"",g[m],g[m-2]);break;case 42:b.merge(g[m-4],"",g[m-2],g[m]);break;case 43:b.merge(g[m-4],g[m-2],g[m],"");break;case 44:b.merge(g[m-4],g[m-2],"",g[m]);break;case 45:b.merge(g[m-4],g[m],g[m-2],"");break;case 46:b.merge(g[m-6],g[m-4],g[m-2],g[m]);break;case 47:b.merge(g[m-6],g[m],g[m-4],g[m-2]);break;case 48:b.merge(g[m-6],g[m-4],g[m],g[m-2]);break;case 49:b.merge(g[m-6],g[m-2],g[m-4],g[m]);break;case 50:b.merge(g[m-6],g[m],g[m-2],g[m-4]);break;case 51:b.merge(g[m-6],g[m-2],g[m],g[m-4]);break;case 52:b.commit(g[m]);break;case 53:b.commit("","",b.commitType.NORMAL,g[m]);break;case 54:b.commit("","",g[m],"");break;case 55:b.commit("","",g[m],g[m-2]);break;case 56:b.commit("","",g[m-2],g[m]);break;case 57:b.commit("",g[m],b.commitType.NORMAL,"");break;case 58:b.commit("",g[m-2],b.commitType.NORMAL,g[m]);break;case 59:b.commit("",g[m],b.commitType.NORMAL,g[m-2]);break;case 60:b.commit("",g[m-2],g[m],"");break;case 61:b.commit("",g[m],g[m-2],"");break;case 62:b.commit("",g[m-4],g[m-2],g[m]);break;case 63:b.commit("",g[m-4],g[m],g[m-2]);break;case 64:b.commit("",g[m-2],g[m-4],g[m]);break;case 65:b.commit("",g[m],g[m-4],g[m-2]);break;case 66:b.commit("",g[m],g[m-2],g[m-4]);break;case 67:b.commit("",g[m-2],g[m],g[m-4]);break;case 68:b.commit(g[m],"",b.commitType.NORMAL,"");break;case 69:b.commit(g[m],"",b.commitType.NORMAL,g[m-2]);break;case 70:b.commit(g[m-2],"",b.commitType.NORMAL,g[m]);break;case 71:b.commit(g[m-2],"",g[m],"");break;case 72:b.commit(g[m],"",g[m-2],"");break;case 73:b.commit(g[m],g[m-2],b.commitType.NORMAL,"");break;case 74:b.commit(g[m-2],g[m],b.commitType.NORMAL,"");break;case 75:b.commit(g[m-4],"",g[m-2],g[m]);break;case 76:b.commit(g[m-4],"",g[m],g[m-2]);break;case 77:b.commit(g[m-2],"",g[m-4],g[m]);break;case 78:b.commit(g[m],"",g[m-4],g[m-2]);break;case 79:b.commit(g[m],"",g[m-2],g[m-4]);break;case 80:b.commit(g[m-2],"",g[m],g[m-4]);break;case 81:b.commit(g[m-4],g[m],g[m-2],"");break;case 82:b.commit(g[m-4],g[m-2],g[m],"");break;case 83:b.commit(g[m-2],g[m],g[m-4],"");break;case 84:b.commit(g[m],g[m-2],g[m-4],"");break;case 85:b.commit(g[m],g[m-4],g[m-2],"");break;case 86:b.commit(g[m-2],g[m-4],g[m],"");break;case 87:b.commit(g[m-4],g[m],b.commitType.NORMAL,g[m-2]);break;case 88:b.commit(g[m-4],g[m-2],b.commitType.NORMAL,g[m]);break;case 89:b.commit(g[m-2],g[m],b.commitType.NORMAL,g[m-4]);break;case 90:b.commit(g[m],g[m-2],b.commitType.NORMAL,g[m-4]);break;case 91:b.commit(g[m],g[m-4],b.commitType.NORMAL,g[m-2]);break;case 92:b.commit(g[m-2],g[m-4],b.commitType.NORMAL,g[m]);break;case 93:b.commit(g[m-6],g[m-4],g[m-2],g[m]);break;case 94:b.commit(g[m-6],g[m-4],g[m],g[m-2]);break;case 95:b.commit(g[m-6],g[m-2],g[m-4],g[m]);break;case 96:b.commit(g[m-6],g[m],g[m-4],g[m-2]);break;case 97:b.commit(g[m-6],g[m-2],g[m],g[m-4]);break;case 98:b.commit(g[m-6],g[m],g[m-2],g[m-4]);break;case 99:b.commit(g[m-4],g[m-6],g[m-2],g[m]);break;case 100:b.commit(g[m-4],g[m-6],g[m],g[m-2]);break;case 101:b.commit(g[m-2],g[m-6],g[m-4],g[m]);break;case 102:b.commit(g[m],g[m-6],g[m-4],g[m-2]);break;case 103:b.commit(g[m-2],g[m-6],g[m],g[m-4]);break;case 104:b.commit(g[m],g[m-6],g[m-2],g[m-4]);break;case 105:b.commit(g[m],g[m-4],g[m-2],g[m-6]);break;case 106:b.commit(g[m-2],g[m-4],g[m],g[m-6]);break;case 107:b.commit(g[m],g[m-2],g[m-4],g[m-6]);break;case 108:b.commit(g[m-2],g[m],g[m-4],g[m-6]);break;case 109:b.commit(g[m-4],g[m-2],g[m],g[m-6]);break;case 110:b.commit(g[m-4],g[m],g[m-2],g[m-6]);break;case 111:b.commit(g[m-2],g[m-4],g[m-6],g[m]);break;case 112:b.commit(g[m],g[m-4],g[m-6],g[m-2]);break;case 113:b.commit(g[m-2],g[m],g[m-6],g[m-4]);break;case 114:b.commit(g[m],g[m-2],g[m-6],g[m-4]);break;case 115:b.commit(g[m-4],g[m-2],g[m-6],g[m]);break;case 116:b.commit(g[m-4],g[m],g[m-6],g[m-2]);break;case 117:this.$="";break;case 118:this.$=g[m];break;case 119:this.$=b.commitType.NORMAL;break;case 120:this.$=b.commitType.REVERSE;break;case 121:this.$=b.commitType.HIGHLIGHT;break}},table:[{3:1,4:2,5:e,7:i,13:r,47:s},{1:[3]},{3:7,4:2,5:e,7:i,13:r,47:s},{6:8,7:n,8:[1,9],9:[1,10],10:11,13:a},t(o,[2,124]),t(o,[2,125]),t(o,[2,126]),{1:[2,1]},{7:[1,13]},{6:14,7:n,10:11,13:a},{8:[1,15]},t(l,[2,9],{11:16,12:[1,17]}),t(h,[2,8]),{1:[2,2]},{7:[1,18]},{6:19,7:n,10:11,13:a},{7:[2,6],13:[1,22],14:20,15:21,16:23,17:24,18:25,19:[1,26],21:[1,27],23:[1,28],24:[1,29],25:30,26:[1,31],28:[1,35],31:[1,34],37:[1,33],40:[1,32]},t(h,[2,7]),{1:[2,3]},{7:[1,36]},t(l,[2,10]),{4:37,7:i,13:r,47:s},t(l,[2,12]),t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),{20:[1,38]},{22:[1,39]},t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),{27:40,33:f,46:d},t(u,[2,117],{41:43,32:[1,46],33:[1,48],35:[1,44],38:[1,45],42:[1,47]}),{27:49,33:f,46:d},{32:[1,50],35:[1,51]},{27:52,33:f,46:d},{1:[2,4]},t(l,[2,11]),t(u,[2,16]),t(u,[2,17]),t(u,[2,21]),t(p,[2,122]),t(p,[2,123]),t(u,[2,52]),{33:[1,53]},{39:54,43:y,44:x,45:_},{33:[1,58]},{33:[1,59]},t(u,[2,118]),t(u,[2,36],{32:[1,60],35:[1,62],38:[1,61]}),{33:[1,63]},{33:[1,64],36:[1,65]},t(u,[2,22],{29:[1,66]}),t(u,[2,53],{32:[1,68],38:[1,67],42:[1,69]}),t(u,[2,54],{32:[1,71],35:[1,70],42:[1,72]}),t(C,[2,119]),t(C,[2,120]),t(C,[2,121]),t(u,[2,57],{35:[1,73],38:[1,74],42:[1,75]}),t(u,[2,68],{32:[1,78],35:[1,76],38:[1,77]}),{33:[1,79]},{39:80,43:y,44:x,45:_},{33:[1,81]},t(u,[2,24],{34:[1,82],35:[1,83]}),{32:[1,84]},{32:[1,85]},{30:[1,86]},{39:87,43:y,44:x,45:_},{33:[1,88]},{33:[1,89]},{33:[1,90]},{33:[1,91]},{33:[1,92]},{33:[1,93]},{39:94,43:y,44:x,45:_},{33:[1,95]},{33:[1,96]},{39:97,43:y,44:x,45:_},{33:[1,98]},t(u,[2,37],{35:[1,100],38:[1,99]}),t(u,[2,38],{32:[1,102],35:[1,101]}),t(u,[2,39],{32:[1,103],38:[1,104]}),{33:[1,105]},{33:[1,106],36:[1,107]},{33:[1,108]},{33:[1,109]},t(u,[2,23]),t(u,[2,55],{32:[1,110],42:[1,111]}),t(u,[2,59],{38:[1,112],42:[1,113]}),t(u,[2,69],{32:[1,115],38:[1,114]}),t(u,[2,56],{32:[1,116],42:[1,117]}),t(u,[2,61],{35:[1,118],42:[1,119]}),t(u,[2,72],{32:[1,121],35:[1,120]}),t(u,[2,58],{38:[1,122],42:[1,123]}),t(u,[2,60],{35:[1,124],42:[1,125]}),t(u,[2,73],{35:[1,127],38:[1,126]}),t(u,[2,70],{32:[1,129],38:[1,128]}),t(u,[2,71],{32:[1,131],35:[1,130]}),t(u,[2,74],{35:[1,133],38:[1,132]}),{39:134,43:y,44:x,45:_},{33:[1,135]},{33:[1,136]},{33:[1,137]},{33:[1,138]},{39:139,43:y,44:x,45:_},t(u,[2,25],{35:[1,140]}),t(u,[2,26],{34:[1,141]}),t(u,[2,31],{34:[1,142]}),t(u,[2,29],{34:[1,143]}),t(u,[2,30],{34:[1,144]}),{33:[1,145]},{33:[1,146]},{39:147,43:y,44:x,45:_},{33:[1,148]},{39:149,43:y,44:x,45:_},{33:[1,150]},{33:[1,151]},{33:[1,152]},{33:[1,153]},{33:[1,154]},{33:[1,155]},{33:[1,156]},{39:157,43:y,44:x,45:_},{33:[1,158]},{33:[1,159]},{33:[1,160]},{39:161,43:y,44:x,45:_},{33:[1,162]},{39:163,43:y,44:x,45:_},{33:[1,164]},{33:[1,165]},{33:[1,166]},{39:167,43:y,44:x,45:_},{33:[1,168]},t(u,[2,43],{35:[1,169]}),t(u,[2,44],{38:[1,170]}),t(u,[2,42],{32:[1,171]}),t(u,[2,45],{35:[1,172]}),t(u,[2,40],{38:[1,173]}),t(u,[2,41],{32:[1,174]}),{33:[1,175],36:[1,176]},{33:[1,177]},{33:[1,178]},{33:[1,179]},{33:[1,180]},t(u,[2,66],{42:[1,181]}),t(u,[2,79],{32:[1,182]}),t(u,[2,67],{42:[1,183]}),t(u,[2,90],{38:[1,184]}),t(u,[2,80],{32:[1,185]}),t(u,[2,89],{38:[1,186]}),t(u,[2,65],{42:[1,187]}),t(u,[2,78],{32:[1,188]}),t(u,[2,64],{42:[1,189]}),t(u,[2,84],{35:[1,190]}),t(u,[2,77],{32:[1,191]}),t(u,[2,83],{35:[1,192]}),t(u,[2,63],{42:[1,193]}),t(u,[2,91],{38:[1,194]}),t(u,[2,62],{42:[1,195]}),t(u,[2,85],{35:[1,196]}),t(u,[2,86],{35:[1,197]}),t(u,[2,92],{38:[1,198]}),t(u,[2,76],{32:[1,199]}),t(u,[2,87],{38:[1,200]}),t(u,[2,75],{32:[1,201]}),t(u,[2,81],{35:[1,202]}),t(u,[2,82],{35:[1,203]}),t(u,[2,88],{38:[1,204]}),{33:[1,205]},{39:206,43:y,44:x,45:_},{33:[1,207]},{33:[1,208]},{39:209,43:y,44:x,45:_},{33:[1,210]},t(u,[2,27]),t(u,[2,32]),t(u,[2,28]),t(u,[2,33]),t(u,[2,34]),t(u,[2,35]),{33:[1,211]},{33:[1,212]},{33:[1,213]},{39:214,43:y,44:x,45:_},{33:[1,215]},{39:216,43:y,44:x,45:_},{33:[1,217]},{33:[1,218]},{33:[1,219]},{33:[1,220]},{33:[1,221]},{33:[1,222]},{33:[1,223]},{39:224,43:y,44:x,45:_},{33:[1,225]},{33:[1,226]},{33:[1,227]},{39:228,43:y,44:x,45:_},{33:[1,229]},{39:230,43:y,44:x,45:_},{33:[1,231]},{33:[1,232]},{33:[1,233]},{39:234,43:y,44:x,45:_},t(u,[2,46]),t(u,[2,48]),t(u,[2,47]),t(u,[2,49]),t(u,[2,51]),t(u,[2,50]),t(u,[2,107]),t(u,[2,108]),t(u,[2,105]),t(u,[2,106]),t(u,[2,110]),t(u,[2,109]),t(u,[2,114]),t(u,[2,113]),t(u,[2,112]),t(u,[2,111]),t(u,[2,116]),t(u,[2,115]),t(u,[2,104]),t(u,[2,103]),t(u,[2,102]),t(u,[2,101]),t(u,[2,99]),t(u,[2,100]),t(u,[2,98]),t(u,[2,97]),t(u,[2,96]),t(u,[2,95]),t(u,[2,93]),t(u,[2,94])],defaultActions:{7:[2,1],13:[2,2],18:[2,3],36:[2,4]},parseError:function(E,I){if(I.recoverable)this.trace(E);else{var S=new Error(E);throw S.hash=I,S}},parse:function(E){var I=this,S=[0],b=[],T=[null],g=[],w=this.table,m="",P=0,j=0,N=2,v=1,D=g.slice.call(arguments,1),B=Object.create(this.lexer),z={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(z.yy[q]=this.yy[q]);B.setInput(E,z.yy),z.yy.lexer=B,z.yy.parser=this,typeof B.yylloc>"u"&&(B.yylloc={});var st=B.yylloc;g.push(st);var $=B.options&&B.options.ranges;typeof z.yy.parseError=="function"?this.parseError=z.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ft(){var M;return M=b.pop()||B.lex()||v,typeof M!="number"&&(M instanceof Array&&(b=M,M=b.pop()),M=I.symbols_[M]||M),M}for(var Q,H,it,nt,Z={},tt,O,at,W;;){if(H=S[S.length-1],this.defaultActions[H]?it=this.defaultActions[H]:((Q===null||typeof Q>"u")&&(Q=ft()),it=w[H]&&w[H][Q]),typeof it>"u"||!it.length||!it[0]){var dt="";W=[];for(tt in w[H])this.terminals_[tt]&&tt>N&&W.push("'"+this.terminals_[tt]+"'");B.showPosition?dt="Parse error on line "+(P+1)+`:
`+B.showPosition()+`
Expecting `+W.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":dt="Parse error on line "+(P+1)+": Unexpected "+(Q==v?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(dt,{text:B.match,token:this.terminals_[Q]||Q,line:B.yylineno,loc:st,expected:W})}if(it[0]instanceof Array&&it.length>1)throw new Error("Parse Error: multiple actions possible at state: "+H+", token: "+Q);switch(it[0]){case 1:S.push(Q),T.push(B.yytext),g.push(B.yylloc),S.push(it[1]),Q=null,j=B.yyleng,m=B.yytext,P=B.yylineno,st=B.yylloc;break;case 2:if(O=this.productions_[it[1]][1],Z.$=T[T.length-O],Z._$={first_line:g[g.length-(O||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(O||1)].first_column,last_column:g[g.length-1].last_column},$&&(Z._$.range=[g[g.length-(O||1)].range[0],g[g.length-1].range[1]]),nt=this.performAction.apply(Z,[m,j,P,z.yy,it[1],T,g].concat(D)),typeof nt<"u")return nt;O&&(S=S.slice(0,-1*O*2),T=T.slice(0,-1*O),g=g.slice(0,-1*O)),S.push(this.productions_[it[1]][0]),T.push(Z.$),g.push(Z._$),at=w[S[S.length-2]][S[S.length-1]],S.push(at);break;case 3:return!0}}return!0}},R=function(){var L={EOF:1,parseError:function(I,S){if(this.yy.parser)this.yy.parser.parseError(I,S);else throw new Error(I)},setInput:function(E,I){return this.yy=I||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var E=this._input[0];this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E;var I=E.match(/(?:\r\n?|\n).*/g);return I?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},unput:function(E){var I=E.length,S=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-I),this.offset-=I;var b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var T=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===b.length?this.yylloc.first_column:0)+b[b.length-S.length].length-S[0].length:this.yylloc.first_column-I},this.options.ranges&&(this.yylloc.range=[T[0],T[0]+this.yyleng-I]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(E){this.unput(this.match.slice(E))},pastInput:function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var E=this.pastInput(),I=new Array(E.length+1).join("-");return E+this.upcomingInput()+`
`+I+"^"},test_match:function(E,I){var S,b,T;if(this.options.backtrack_lexer&&(T={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(T.yylloc.range=this.yylloc.range.slice(0))),b=E[0].match(/(?:\r\n?|\n).*/g),b&&(this.yylineno+=b.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],S=this.performAction.call(this,this.yy,this,I,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var g in T)this[g]=T[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var E,I,S,b;this._more||(this.yytext="",this.match="");for(var T=this._currentRules(),g=0;g<T.length;g++)if(S=this._input.match(this.rules[T[g]]),S&&(!I||S[0].length>I[0].length)){if(I=S,b=g,this.options.backtrack_lexer){if(E=this.test_match(S,T[g]),E!==!1)return E;if(this._backtrack){I=!1;continue}else return!1}else if(!this.options.flex)break}return I?(E=this.test_match(I,T[b]),E!==!1?E:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var I=this.next();return I||this.lex()},begin:function(I){this.conditionStack.push(I)},popState:function(){var I=this.conditionStack.length-1;return I>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(I){return I=this.conditionStack.length-1-Math.abs(I||0),I>=0?this.conditionStack[I]:"INITIAL"},pushState:function(I){this.begin(I)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(I,S,b,T){switch(b){case 0:return this.begin("acc_title"),19;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),21;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 13;case 8:break;case 9:break;case 10:return 5;case 11:return 40;case 12:return 32;case 13:return 38;case 14:return 42;case 15:return 43;case 16:return 44;case 17:return 45;case 18:return 35;case 19:return 28;case 20:return 29;case 21:return 37;case 22:return 31;case 23:return 34;case 24:return 26;case 25:return 9;case 26:return 9;case 27:return 8;case 28:return"CARET";case 29:this.begin("options");break;case 30:this.popState();break;case 31:return 12;case 32:return 36;case 33:this.begin("string");break;case 34:this.popState();break;case 35:return 33;case 36:return 30;case 37:return 46;case 38:return 7}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:parent:)/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:TB\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},options:{rules:[30,31],inclusive:!1},string:{rules:[34,35],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32,33,36,37,38,39],inclusive:!0}}};return L}();k.lexer=R;function F(){this.yy={}}return F.prototype=k,k.Parser=F,new F}();oo.parser=oo;const Nb=oo;let Xn=Y().gitGraph.mainBranchName,Ob=Y().gitGraph.mainBranchOrder,be={},qe=null,Ps={};Ps[Xn]={name:Xn,order:Ob};let pe={};pe[Xn]=qe;let Ce=Xn,r0="LR",Ar=0;function cl(){return Ph({length:7})}function Pb(t,e){const i=Object.create(null);return t.reduce((r,s)=>{const n=e(s);return i[n]||(i[n]=!0,r.push(s)),r},[])}const Mb=function(t){r0=t};let s0={};const Vb=function(t){A.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{s0=JSON.parse(t)}catch(e){A.error("error while parsing gitGraph options",e.message)}},qb=function(){return s0},zb=function(t,e,i,r){A.debug("Entering commit:",t,e,i,r),e=mt.sanitizeText(e,Y()),t=mt.sanitizeText(t,Y()),r=mt.sanitizeText(r,Y());const s={id:e||Ar+"-"+cl(),message:t,seq:Ar++,type:i||$r.NORMAL,tag:r||"",parents:qe==null?[]:[qe.id],branch:Ce};qe=s,be[s.id]=s,pe[Ce]=s.id,A.debug("in pushCommit "+s.id)},Wb=function(t,e){if(t=mt.sanitizeText(t,Y()),pe[t]===void 0)pe[t]=qe!=null?qe.id:null,Ps[t]={name:t,order:e?parseInt(e,10):null},n0(t),A.debug("in createBranch");else{let i=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw i.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},i}},Yb=function(t,e,i,r){t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y());const s=be[pe[Ce]],n=be[pe[t]];if(Ce===t){let o=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(s===void 0||!s){let o=new Error('Incorrect usage of "merge". Current branch ('+Ce+")has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},o}else if(pe[t]===void 0){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},o}else if(n===void 0||!n){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},o}else if(s===n){let o=new Error('Incorrect usage of "merge". Both branches have same head');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(e&&be[e]!==void 0){let o=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw o.hash={text:"merge "+t+e+i+r,token:"merge "+t+e+i+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+i+" "+r]},o}const a={id:e||Ar+"-"+cl(),message:"merged branch "+t+" into "+Ce,seq:Ar++,parents:[qe==null?null:qe.id,pe[t]],branch:Ce,type:$r.MERGE,customType:i,customId:!!e,tag:r||""};qe=a,be[a.id]=a,pe[Ce]=a.id,A.debug(pe),A.debug("in mergeBranch")},Ub=function(t,e,i,r){if(A.debug("Entering cherryPick:",t,e,i),t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y()),i=mt.sanitizeText(i,Y()),r=mt.sanitizeText(r,Y()),!t||be[t]===void 0){let a=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}let s=be[t],n=s.branch;if(r&&!(Array.isArray(s.parents)&&s.parents.includes(r)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");if(s.type===$r.MERGE&&!r)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!e||be[e]===void 0){if(n===Ce){let l=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const a=be[pe[Ce]];if(a===void 0||!a){let l=new Error('Incorrect usage of "cherry-pick". Current branch ('+Ce+")has no commits");throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const o={id:Ar+"-"+cl(),message:"cherry-picked "+s+" into "+Ce,seq:Ar++,parents:[qe==null?null:qe.id,s.id],branch:Ce,type:$r.CHERRY_PICK,tag:i??`cherry-pick:${s.id}${s.type===$r.MERGE?`|parent:${r}`:""}`};qe=o,be[o.id]=o,pe[Ce]=o.id,A.debug(pe),A.debug("in cherryPick")}},n0=function(t){if(t=mt.sanitizeText(t,Y()),pe[t]===void 0){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{Ce=t;const e=pe[Ce];qe=be[e]}};function Ic(t,e,i){const r=t.indexOf(e);r===-1?t.push(i):t.splice(r,1,i)}function a0(t){const e=t.reduce((s,n)=>s.seq>n.seq?s:n,t[0]);let i="";t.forEach(function(s){s===e?i+="	*":i+="	|"});const r=[i,e.id,e.seq];for(let s in pe)pe[s]===e.id&&r.push(s);if(A.debug(r.join(" ")),e.parents&&e.parents.length==2){const s=be[e.parents[0]];Ic(t,e,s),t.push(be[e.parents[1]])}else{if(e.parents.length==0)return;{const s=be[e.parents];Ic(t,e,s)}}t=Pb(t,s=>s.id),a0(t)}const Hb=function(){A.debug(be);const t=o0()[0];a0([t])},Gb=function(){be={},qe=null;let t=Y().gitGraph.mainBranchName,e=Y().gitGraph.mainBranchOrder;pe={},pe[t]=null,Ps={},Ps[t]={name:t,order:e},Ce=t,Ar=0,We()},jb=function(){return Object.values(Ps).map((e,i)=>e.order!==null?e:{...e,order:parseFloat(`0.${i}`,10)}).sort((e,i)=>e.order-i.order).map(({name:e})=>({name:e}))},Xb=function(){return pe},$b=function(){return be},o0=function(){const t=Object.keys(be).map(function(e){return be[e]});return t.forEach(function(e){A.debug(e.id)}),t.sort((e,i)=>e.seq-i.seq),t},Kb=function(){return Ce},Qb=function(){return r0},Zb=function(){return qe},$r={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Jb={getConfig:()=>Y().gitGraph,setDirection:Mb,setOptions:Vb,getOptions:qb,commit:zb,branch:Wb,merge:Yb,cherryPick:Ub,checkout:n0,prettyPrint:Hb,clear:Gb,getBranchesAsObjArray:jb,getBranches:Xb,getCommits:$b,getCommitsArray:o0,getCurrentBranch:Kb,getDirection:Qb,getHead:Zb,setAccTitle:Ne,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,setDiagramTitle:ei,getDiagramTitle:Ge,commitType:$r};let xs={};const Ze={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},kr=8;let le={},Ms={},$n=[],Vs=0,we="LR";const t5=()=>{le={},Ms={},xs={},Vs=0,$n=[],we="LR"},l0=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let i=[];typeof t=="string"?i=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?i=t:i=[];for(const r of i){const s=document.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","0"),s.setAttribute("class","row"),s.textContent=r.trim(),e.appendChild(s)}return e},Fc=(t,e,i)=>{const r=Y().gitGraph,s=t.append("g").attr("class","commit-bullets"),n=t.append("g").attr("class","commit-labels");let a=0;we==="TB"&&(a=30),Object.keys(e).sort((h,u)=>e[h].seq-e[u].seq).forEach(h=>{const u=e[h],f=we==="TB"?a+10:le[u.branch].pos,d=we==="TB"?le[u.branch].pos:a+10;if(i){let p,y=u.customType!==void 0&&u.customType!==""?u.customType:u.type;switch(y){case Ze.NORMAL:p="commit-normal";break;case Ze.REVERSE:p="commit-reverse";break;case Ze.HIGHLIGHT:p="commit-highlight";break;case Ze.MERGE:p="commit-merge";break;case Ze.CHERRY_PICK:p="commit-cherry-pick";break;default:p="commit-normal"}if(y===Ze.HIGHLIGHT){const x=s.append("rect");x.attr("x",d-10),x.attr("y",f-10),x.attr("height",20),x.attr("width",20),x.attr("class",`commit ${u.id} commit-highlight${le[u.branch].index%kr} ${p}-outer`),s.append("rect").attr("x",d-6).attr("y",f-6).attr("height",12).attr("width",12).attr("class",`commit ${u.id} commit${le[u.branch].index%kr} ${p}-inner`)}else if(y===Ze.CHERRY_PICK)s.append("circle").attr("cx",d).attr("cy",f).attr("r",10).attr("class",`commit ${u.id} ${p}`),s.append("circle").attr("cx",d-3).attr("cy",f+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${u.id} ${p}`),s.append("circle").attr("cx",d+3).attr("cy",f+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${u.id} ${p}`),s.append("line").attr("x1",d+3).attr("y1",f+1).attr("x2",d).attr("y2",f-5).attr("stroke","#fff").attr("class",`commit ${u.id} ${p}`),s.append("line").attr("x1",d-3).attr("y1",f+1).attr("x2",d).attr("y2",f-5).attr("stroke","#fff").attr("class",`commit ${u.id} ${p}`);else{const x=s.append("circle");if(x.attr("cx",d),x.attr("cy",f),x.attr("r",u.type===Ze.MERGE?9:10),x.attr("class",`commit ${u.id} commit${le[u.branch].index%kr}`),y===Ze.MERGE){const _=s.append("circle");_.attr("cx",d),_.attr("cy",f),_.attr("r",6),_.attr("class",`commit ${p} ${u.id} commit${le[u.branch].index%kr}`)}y===Ze.REVERSE&&s.append("path").attr("d",`M ${d-5},${f-5}L${d+5},${f+5}M${d-5},${f+5}L${d+5},${f-5}`).attr("class",`commit ${p} ${u.id} commit${le[u.branch].index%kr}`)}}if(we==="TB"?Ms[u.id]={x:d,y:a+10}:Ms[u.id]={x:a+10,y:f},i){if(u.type!==Ze.CHERRY_PICK&&(u.customId&&u.type===Ze.MERGE||u.type!==Ze.MERGE)&&r.showCommitLabel){const x=n.append("g"),_=x.insert("rect").attr("class","commit-label-bkg"),C=x.append("text").attr("x",a).attr("y",f+25).attr("class","commit-label").text(u.id);let k=C.node().getBBox();if(_.attr("x",a+10-k.width/2-2).attr("y",f+13.5).attr("width",k.width+2*2).attr("height",k.height+2*2),we==="TB"&&(_.attr("x",d-(k.width+4*4+5)).attr("y",f-12),C.attr("x",d-(k.width+4*4)).attr("y",f+k.height-12)),we!=="TB"&&C.attr("x",a+10-k.width/2),r.rotateCommitLabel)if(we==="TB")C.attr("transform","rotate(-45, "+d+", "+f+")"),_.attr("transform","rotate(-45, "+d+", "+f+")");else{let R=-7.5-(k.width+10)/25*9.5,F=10+k.width/25*8.5;x.attr("transform","translate("+R+", "+F+") rotate(-45, "+a+", "+f+")")}}if(u.tag){const x=n.insert("polygon"),_=n.append("circle"),C=n.append("text").attr("y",f-16).attr("class","tag-label").text(u.tag);let k=C.node().getBBox();C.attr("x",a+10-k.width/2);const R=k.height/2,F=f-19.2;x.attr("class","tag-label-bkg").attr("points",`
          ${a-k.width/2-4/2},${F+2}
          ${a-k.width/2-4/2},${F-2}
          ${a+10-k.width/2-4},${F-R-2}
          ${a+10+k.width/2+4},${F-R-2}
          ${a+10+k.width/2+4},${F+R+2}
          ${a+10-k.width/2-4},${F+R+2}`),_.attr("cx",a-k.width/2+4/2).attr("cy",F).attr("r",1.5).attr("class","tag-hole"),we==="TB"&&(x.attr("class","tag-label-bkg").attr("points",`
            ${d},${a+2}
            ${d},${a-2}
            ${d+10},${a-R-2}
            ${d+10+k.width+4},${a-R-2}
            ${d+10+k.width+4},${a+R+2}
            ${d+10},${a+R+2}`).attr("transform","translate(12,12) rotate(45, "+d+","+a+")"),_.attr("cx",d+4/2).attr("cy",a).attr("transform","translate(12,12) rotate(45, "+d+","+a+")"),C.attr("x",d+5).attr("y",a+3).attr("transform","translate(14,14) rotate(45, "+d+","+a+")"))}}a+=50,a>Vs&&(Vs=a)})},e5=(t,e,i,r,s)=>{const a=(we==="TB"?i.x<r.x:i.y<r.y)?e.branch:t.branch,o=h=>h.branch===a,l=h=>h.seq>t.seq&&h.seq<e.seq;return Object.values(s).some(h=>l(h)&&o(h))},bs=(t,e,i=0)=>{const r=t+Math.abs(t-e)/2;if(i>5)return r;if($n.every(a=>Math.abs(a-r)>=10))return $n.push(r),r;const n=Math.abs(t-e);return bs(t,e-n/5,i+1)},i5=(t,e,i,r)=>{const s=Ms[e.id],n=Ms[i.id],a=e5(e,i,s,n,r);let o="",l="",h=0,u=0,f=le[i.branch].index,d;if(a){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",h=10,u=10;const p=s.y<n.y?bs(s.y,n.y):bs(n.y,s.y),y=s.x<n.x?bs(s.x,n.x):bs(n.x,s.x);we==="TB"?s.x<n.x?(f=le[i.branch].index,d=`M ${s.x} ${s.y} L ${y-h} ${s.y} ${l} ${y} ${s.y+u} L ${y} ${n.y-h} ${o} ${y+u} ${n.y} L ${n.x} ${n.y}`):(f=le[e.branch].index,d=`M ${s.x} ${s.y} L ${y+h} ${s.y} ${o} ${y} ${s.y+u} L ${y} ${n.y-h} ${l} ${y-u} ${n.y} L ${n.x} ${n.y}`):s.y<n.y?(f=le[i.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${p-h} ${o} ${s.x+u} ${p} L ${n.x-h} ${p} ${l} ${n.x} ${p+u} L ${n.x} ${n.y}`):(f=le[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${p+h} ${l} ${s.x+u} ${p} L ${n.x-h} ${p} ${o} ${n.x} ${p-u} L ${n.x} ${n.y}`)}else we==="TB"?(s.x<n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,f=le[i.branch].index,d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${l} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x>n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,f=le[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${l} ${s.x-u} ${n.y} L ${n.x} ${n.y}`),s.x===n.x&&(f=le[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x+h} ${s.y} ${o} ${s.x+u} ${n.y+h} L ${n.x} ${n.y}`)):(s.y<n.y&&(o="A 20 20, 0, 0, 0,",h=20,u=20,f=le[i.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y>n.y&&(o="A 20 20, 0, 0, 0,",h=20,u=20,f=le[e.branch].index,d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`),s.y===n.y&&(f=le[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`));t.append("path").attr("d",d).attr("class","arrow arrow"+f%kr)},r5=(t,e)=>{const i=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const s=e[r];s.parents&&s.parents.length>0&&s.parents.forEach(n=>{i5(i,e[n],s,e)})})},s5=(t,e)=>{const i=Y().gitGraph,r=t.append("g");e.forEach((s,n)=>{const a=n%kr,o=le[s.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",o),l.attr("x2",Vs),l.attr("y2",o),l.attr("class","branch branch"+a),we==="TB"&&(l.attr("y1",30),l.attr("x1",o),l.attr("y2",Vs),l.attr("x2",o)),$n.push(o);let h=s.name;const u=l0(h),f=r.insert("rect"),p=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);p.node().appendChild(u);let y=u.getBBox();f.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-y.width-4-(i.rotateCommitLabel===!0?30:0)).attr("y",-y.height/2+8).attr("width",y.width+18).attr("height",y.height+4),p.attr("transform","translate("+(-y.width-14-(i.rotateCommitLabel===!0?30:0))+", "+(o-y.height/2-1)+")"),we==="TB"&&(f.attr("x",o-y.width/2-10).attr("y",0),p.attr("transform","translate("+(o-y.width/2-5)+", 0)")),we!=="TB"&&f.attr("transform","translate(-19, "+(o-y.height/2)+")")})},n5=function(t,e,i,r){t5();const s=Y(),n=s.gitGraph;A.debug("in gitgraph renderer",t+`
`,"id:",e,i),xs=r.db.getCommits();const a=r.db.getBranchesAsObjArray();we=r.db.getDirection();const o=yt(`[id="${e}"]`);let l=0;a.forEach((h,u)=>{const f=l0(h.name),d=o.append("g"),p=d.insert("g").attr("class","branchLabel"),y=p.insert("g").attr("class","label branch-label");y.node().appendChild(f);let x=f.getBBox();le[h.name]={pos:l,index:u},l+=50+(n.rotateCommitLabel?40:0)+(we==="TB"?x.width/2:0),y.remove(),p.remove(),d.remove()}),Fc(o,xs,!1),n.showBranches&&s5(o,a),r5(o,xs),Fc(o,xs,!0),Rt.insertTitle(o,"gitTitleText",n.titleTopMargin,r.db.getDiagramTitle()),h1(void 0,o,n.diagramPadding,n.useMaxWidth??s.useMaxWidth)},a5={draw:n5},o5=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,l5=o5,c5={parser:Nb,db:Jb,renderer:a5,styles:l5},h5=Object.freeze(Object.defineProperty({__proto__:null,diagram:c5},Symbol.toStringTag,{value:"Module"}));var lo=function(){var t=function(g,w,m,P){for(m=m||{},P=g.length;P--;m[g[P]]=w);return m},e=[6,8,10,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,30,32,33,35,37],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,29],o=[1,30],l=[1,31],h=[1,9],u=[1,10],f=[1,11],d=[1,12],p=[1,13],y=[1,14],x=[1,15],_=[1,16],C=[1,18],k=[1,19],R=[1,20],F=[1,21],L=[1,22],E=[1,24],I=[1,32],S={trace:function(){},yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,dateFormat:19,inclusiveEndDates:20,topAxis:21,axisFormat:22,tickInterval:23,excludes:24,includes:25,todayMarker:26,title:27,acc_title:28,acc_title_value:29,acc_descr:30,acc_descr_value:31,acc_descr_multiline_value:32,section:33,clickStatement:34,taskTxt:35,taskData:36,click:37,callbackname:38,callbackargs:39,href:40,clickStatementDebug:41,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",19:"dateFormat",20:"inclusiveEndDates",21:"topAxis",22:"axisFormat",23:"tickInterval",24:"excludes",25:"includes",26:"todayMarker",27:"title",28:"acc_title",29:"acc_title_value",30:"acc_descr",31:"acc_descr_value",32:"acc_descr_multiline_value",33:"section",35:"taskTxt",36:"taskData",37:"click",38:"callbackname",39:"callbackargs",40:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[34,2],[34,3],[34,3],[34,4],[34,3],[34,4],[34,2],[41,2],[41,3],[41,3],[41,4],[41,3],[41,4],[41,2]],performAction:function(w,m,P,j,N,v,D){var B=v.length-1;switch(N){case 1:return v[B-1];case 2:this.$=[];break;case 3:v[B-1].push(v[B]),this.$=v[B-1];break;case 4:case 5:this.$=v[B];break;case 6:case 7:this.$=[];break;case 8:j.setWeekday("monday");break;case 9:j.setWeekday("tuesday");break;case 10:j.setWeekday("wednesday");break;case 11:j.setWeekday("thursday");break;case 12:j.setWeekday("friday");break;case 13:j.setWeekday("saturday");break;case 14:j.setWeekday("sunday");break;case 15:j.setDateFormat(v[B].substr(11)),this.$=v[B].substr(11);break;case 16:j.enableInclusiveEndDates(),this.$=v[B].substr(18);break;case 17:j.TopAxis(),this.$=v[B].substr(8);break;case 18:j.setAxisFormat(v[B].substr(11)),this.$=v[B].substr(11);break;case 19:j.setTickInterval(v[B].substr(13)),this.$=v[B].substr(13);break;case 20:j.setExcludes(v[B].substr(9)),this.$=v[B].substr(9);break;case 21:j.setIncludes(v[B].substr(9)),this.$=v[B].substr(9);break;case 22:j.setTodayMarker(v[B].substr(12)),this.$=v[B].substr(12);break;case 24:j.setDiagramTitle(v[B].substr(6)),this.$=v[B].substr(6);break;case 25:this.$=v[B].trim(),j.setAccTitle(this.$);break;case 26:case 27:this.$=v[B].trim(),j.setAccDescription(this.$);break;case 28:j.addSection(v[B].substr(8)),this.$=v[B].substr(8);break;case 30:j.addTask(v[B-1],v[B]),this.$="task";break;case 31:this.$=v[B-1],j.setClickEvent(v[B-1],v[B],null);break;case 32:this.$=v[B-2],j.setClickEvent(v[B-2],v[B-1],v[B]);break;case 33:this.$=v[B-2],j.setClickEvent(v[B-2],v[B-1],null),j.setLink(v[B-2],v[B]);break;case 34:this.$=v[B-3],j.setClickEvent(v[B-3],v[B-2],v[B-1]),j.setLink(v[B-3],v[B]);break;case 35:this.$=v[B-2],j.setClickEvent(v[B-2],v[B],null),j.setLink(v[B-2],v[B-1]);break;case 36:this.$=v[B-3],j.setClickEvent(v[B-3],v[B-1],v[B]),j.setLink(v[B-3],v[B-2]);break;case 37:this.$=v[B-1],j.setLink(v[B-1],v[B]);break;case 38:case 44:this.$=v[B-1]+" "+v[B];break;case 39:case 40:case 42:this.$=v[B-2]+" "+v[B-1]+" "+v[B];break;case 41:case 43:this.$=v[B-3]+" "+v[B-2]+" "+v[B-1]+" "+v[B];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:f,22:d,23:p,24:y,25:x,26:_,27:C,28:k,30:R,32:F,33:L,34:23,35:E,37:I},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:33,11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:f,22:d,23:p,24:y,25:x,26:_,27:C,28:k,30:R,32:F,33:L,34:23,35:E,37:I},t(e,[2,5]),t(e,[2,6]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),{29:[1,34]},{31:[1,35]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),{36:[1,36]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),{38:[1,37],40:[1,38]},t(e,[2,4]),t(e,[2,25]),t(e,[2,26]),t(e,[2,30]),t(e,[2,31],{39:[1,39],40:[1,40]}),t(e,[2,37],{38:[1,41]}),t(e,[2,32],{40:[1,42]}),t(e,[2,33]),t(e,[2,35],{39:[1,43]}),t(e,[2,34]),t(e,[2,36])],defaultActions:{},parseError:function(w,m){if(m.recoverable)this.trace(w);else{var P=new Error(w);throw P.hash=m,P}},parse:function(w){var m=this,P=[0],j=[],N=[null],v=[],D=this.table,B="",z=0,q=0,st=2,$=1,ft=v.slice.call(arguments,1),Q=Object.create(this.lexer),H={yy:{}};for(var it in this.yy)Object.prototype.hasOwnProperty.call(this.yy,it)&&(H.yy[it]=this.yy[it]);Q.setInput(w,H.yy),H.yy.lexer=Q,H.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var nt=Q.yylloc;v.push(nt);var Z=Q.options&&Q.options.ranges;typeof H.yy.parseError=="function"?this.parseError=H.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function tt(){var Bt;return Bt=j.pop()||Q.lex()||$,typeof Bt!="number"&&(Bt instanceof Array&&(j=Bt,Bt=j.pop()),Bt=m.symbols_[Bt]||Bt),Bt}for(var O,at,W,dt,M={},wt,G,vt,bt;;){if(at=P[P.length-1],this.defaultActions[at]?W=this.defaultActions[at]:((O===null||typeof O>"u")&&(O=tt()),W=D[at]&&D[at][O]),typeof W>"u"||!W.length||!W[0]){var Mt="";bt=[];for(wt in D[at])this.terminals_[wt]&&wt>st&&bt.push("'"+this.terminals_[wt]+"'");Q.showPosition?Mt="Parse error on line "+(z+1)+`:
`+Q.showPosition()+`
Expecting `+bt.join(", ")+", got '"+(this.terminals_[O]||O)+"'":Mt="Parse error on line "+(z+1)+": Unexpected "+(O==$?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError(Mt,{text:Q.match,token:this.terminals_[O]||O,line:Q.yylineno,loc:nt,expected:bt})}if(W[0]instanceof Array&&W.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+O);switch(W[0]){case 1:P.push(O),N.push(Q.yytext),v.push(Q.yylloc),P.push(W[1]),O=null,q=Q.yyleng,B=Q.yytext,z=Q.yylineno,nt=Q.yylloc;break;case 2:if(G=this.productions_[W[1]][1],M.$=N[N.length-G],M._$={first_line:v[v.length-(G||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(G||1)].first_column,last_column:v[v.length-1].last_column},Z&&(M._$.range=[v[v.length-(G||1)].range[0],v[v.length-1].range[1]]),dt=this.performAction.apply(M,[B,q,z,H.yy,W[1],N,v].concat(ft)),typeof dt<"u")return dt;G&&(P=P.slice(0,-1*G*2),N=N.slice(0,-1*G),v=v.slice(0,-1*G)),P.push(this.productions_[W[1]][0]),N.push(M.$),v.push(M._$),vt=D[P[P.length-2]][P[P.length-1]],P.push(vt);break;case 3:return!0}}return!0}},b=function(){var g={EOF:1,parseError:function(m,P){if(this.yy.parser)this.yy.parser.parseError(m,P);else throw new Error(m)},setInput:function(w,m){return this.yy=m||this.yy||{},this._input=w,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var w=this._input[0];this.yytext+=w,this.yyleng++,this.offset++,this.match+=w,this.matched+=w;var m=w.match(/(?:\r\n?|\n).*/g);return m?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),w},unput:function(w){var m=w.length,P=w.split(/(?:\r\n?|\n)/g);this._input=w+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-m),this.offset-=m;var j=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var N=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===j.length?this.yylloc.first_column:0)+j[j.length-P.length].length-P[0].length:this.yylloc.first_column-m},this.options.ranges&&(this.yylloc.range=[N[0],N[0]+this.yyleng-m]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(w){this.unput(this.match.slice(w))},pastInput:function(){var w=this.matched.substr(0,this.matched.length-this.match.length);return(w.length>20?"...":"")+w.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var w=this.match;return w.length<20&&(w+=this._input.substr(0,20-w.length)),(w.substr(0,20)+(w.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var w=this.pastInput(),m=new Array(w.length+1).join("-");return w+this.upcomingInput()+`
`+m+"^"},test_match:function(w,m){var P,j,N;if(this.options.backtrack_lexer&&(N={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(N.yylloc.range=this.yylloc.range.slice(0))),j=w[0].match(/(?:\r\n?|\n).*/g),j&&(this.yylineno+=j.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:j?j[j.length-1].length-j[j.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+w[0].length},this.yytext+=w[0],this.match+=w[0],this.matches=w,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(w[0].length),this.matched+=w[0],P=this.performAction.call(this,this.yy,this,m,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var v in N)this[v]=N[v];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var w,m,P,j;this._more||(this.yytext="",this.match="");for(var N=this._currentRules(),v=0;v<N.length;v++)if(P=this._input.match(this.rules[N[v]]),P&&(!m||P[0].length>m[0].length)){if(m=P,j=v,this.options.backtrack_lexer){if(w=this.test_match(P,N[v]),w!==!1)return w;if(this._backtrack){m=!1;continue}else return!1}else if(!this.options.flex)break}return m?(w=this.test_match(m,N[j]),w!==!1?w:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var m=this.next();return m||this.lex()},begin:function(m){this.conditionStack.push(m)},popState:function(){var m=this.conditionStack.length-1;return m>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(m){return m=this.conditionStack.length-1-Math.abs(m||0),m>=0?this.conditionStack[m]:"INITIAL"},pushState:function(m){this.begin(m)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(m,P,j,N){switch(j){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),28;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),30;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:break;case 15:this.begin("href");break;case 16:this.popState();break;case 17:return 40;case 18:this.begin("callbackname");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callbackargs");break;case 21:return 38;case 22:this.popState();break;case 23:return 39;case 24:this.begin("click");break;case 25:this.popState();break;case 26:return 37;case 27:return 4;case 28:return 19;case 29:return 20;case 30:return 21;case 31:return 22;case 32:return 23;case 33:return 25;case 34:return 24;case 35:return 26;case 36:return 12;case 37:return 13;case 38:return 14;case 39:return 15;case 40:return 16;case 41:return 17;case 42:return 18;case 43:return"date";case 44:return 27;case 45:return"accDescription";case 46:return 33;case 47:return 35;case 48:return 36;case 49:return":";case 50:return 6;case 51:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[22,23],inclusive:!1},callbackname:{rules:[19,20,21],inclusive:!1},href:{rules:[16,17],inclusive:!1},click:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,18,24,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return g}();S.lexer=b;function T(){this.yy={}}return T.prototype=S,S.Parser=T,new T}();lo.parser=lo;const u5=lo;Fe.extend(Zd);Fe.extend(Jd);Fe.extend(tf);let Si="",hl="",ul,dl="",sn=[],nn=[],fl={},pl=[],Kn=[],ss="",gl="";const c0=["active","done","crit","milestone"];let yl=[],an=!1,ml=!1,xl="sunday",co=0;const d5=function(){pl=[],Kn=[],ss="",yl=[],En=0,uo=void 0,vn=void 0,me=[],Si="",hl="",gl="",ul=void 0,dl="",sn=[],nn=[],an=!1,ml=!1,co=0,fl={},We(),xl="sunday"},f5=function(t){hl=t},p5=function(){return hl},g5=function(t){ul=t},y5=function(){return ul},m5=function(t){dl=t},x5=function(){return dl},b5=function(t){Si=t},k5=function(){an=!0},_5=function(){return an},T5=function(){ml=!0},C5=function(){return ml},E5=function(t){gl=t},v5=function(){return gl},S5=function(){return Si},w5=function(t){sn=t.toLowerCase().split(/[\s,]+/)},A5=function(){return sn},L5=function(t){nn=t.toLowerCase().split(/[\s,]+/)},B5=function(){return nn},I5=function(){return fl},F5=function(t){ss=t,pl.push(t)},R5=function(){return pl},D5=function(){let t=Rc();const e=10;let i=0;for(;!t&&i<e;)t=Rc(),i++;return Kn=me,Kn},h0=function(t,e,i,r){return r.includes(t.format(e.trim()))?!1:t.isoWeekday()>=6&&i.includes("weekends")||i.includes(t.format("dddd").toLowerCase())?!0:i.includes(t.format(e.trim()))},N5=function(t){xl=t},O5=function(){return xl},u0=function(t,e,i,r){if(!i.length||t.manualEndTime)return;let s;t.startTime instanceof Date?s=Fe(t.startTime):s=Fe(t.startTime,e,!0),s=s.add(1,"d");let n;t.endTime instanceof Date?n=Fe(t.endTime):n=Fe(t.endTime,e,!0);const[a,o]=P5(s,n,e,i,r);t.endTime=a.toDate(),t.renderEndTime=o},P5=function(t,e,i,r,s){let n=!1,a=null;for(;t<=e;)n||(a=e.toDate()),n=h0(t,i,r,s),n&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,a]},ho=function(t,e,i){i=i.trim();const s=/^after\s+([\d\w- ]+)/.exec(i.trim());if(s!==null){let a=null;if(s[1].split(" ").forEach(function(o){let l=fs(o);l!==void 0&&(a?l.endTime>a.endTime&&(a=l):a=l)}),a)return a.endTime;{const o=new Date;return o.setHours(0,0,0,0),o}}let n=Fe(i,e.trim(),!0);if(n.isValid())return n.toDate();{A.debug("Invalid date:"+i),A.debug("With date format:"+e.trim());const a=new Date(i);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+i);return a}},d0=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},f0=function(t,e,i,r=!1){i=i.trim();let s=Fe(i,e.trim(),!0);if(s.isValid())return r&&(s=s.add(1,"d")),s.toDate();let n=Fe(t);const[a,o]=d0(i);if(!Number.isNaN(a)){const l=n.add(a,o);l.isValid()&&(n=l)}return n.toDate()};let En=0;const Kr=function(t){return t===void 0?(En=En+1,"task"+En):t},M5=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};m0(r,s,c0);for(let a=0;a<r.length;a++)r[a]=r[a].trim();let n="";switch(r.length){case 1:s.id=Kr(),s.startTime=t.endTime,n=r[0];break;case 2:s.id=Kr(),s.startTime=ho(void 0,Si,r[0]),n=r[1];break;case 3:s.id=Kr(r[0]),s.startTime=ho(void 0,Si,r[1]),n=r[2];break}return n&&(s.endTime=f0(s.startTime,Si,n,an),s.manualEndTime=Fe(n,"YYYY-MM-DD",!0).isValid(),u0(s,Si,nn,sn)),s},V5=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};m0(r,s,c0);for(let n=0;n<r.length;n++)r[n]=r[n].trim();switch(r.length){case 1:s.id=Kr(),s.startTime={type:"prevTaskEnd",id:t},s.endTime={data:r[0]};break;case 2:s.id=Kr(),s.startTime={type:"getStartDate",startData:r[0]},s.endTime={data:r[1]};break;case 3:s.id=Kr(r[0]),s.startTime={type:"getStartDate",startData:r[1]},s.endTime={data:r[2]};break}return s};let uo,vn,me=[];const p0={},q5=function(t,e){const i={section:ss,type:ss,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=V5(vn,e);i.raw.startTime=r.startTime,i.raw.endTime=r.endTime,i.id=r.id,i.prevTaskId=vn,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,i.order=co,co++;const s=me.push(i);vn=i.id,p0[i.id]=s-1},fs=function(t){const e=p0[t];return me[e]},z5=function(t,e){const i={section:ss,type:ss,description:t,task:t,classes:[]},r=M5(uo,e);i.startTime=r.startTime,i.endTime=r.endTime,i.id=r.id,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,uo=i,Kn.push(i)},Rc=function(){const t=function(i){const r=me[i];let s="";switch(me[i].raw.startTime.type){case"prevTaskEnd":{const n=fs(r.prevTaskId);r.startTime=n.endTime;break}case"getStartDate":s=ho(void 0,Si,me[i].raw.startTime.startData),s&&(me[i].startTime=s);break}return me[i].startTime&&(me[i].endTime=f0(me[i].startTime,Si,me[i].raw.endTime.data,an),me[i].endTime&&(me[i].processed=!0,me[i].manualEndTime=Fe(me[i].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),u0(me[i],Si,nn,sn))),me[i].processed};let e=!0;for(const[i,r]of me.entries())t(i),e=e&&r.processed;return e},W5=function(t,e){let i=e;Y().securityLevel!=="loose"&&(i=Dr.sanitizeUrl(e)),t.split(",").forEach(function(r){fs(r)!==void 0&&(y0(r,()=>{window.open(i,"_self")}),fl[r]=i)}),g0(t,"clickable")},g0=function(t,e){t.split(",").forEach(function(i){let r=fs(i);r!==void 0&&r.classes.push(e)})},Y5=function(t,e,i){if(Y().securityLevel!=="loose"||e===void 0)return;let r=[];if(typeof i=="string"){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<r.length;n++){let a=r[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[n]=a}}r.length===0&&r.push(t),fs(t)!==void 0&&y0(t,()=>{Rt.runFunc(e,...r)})},y0=function(t,e){yl.push(function(){const i=document.querySelector(`[id="${t}"]`);i!==null&&i.addEventListener("click",function(){e()})},function(){const i=document.querySelector(`[id="${t}-text"]`);i!==null&&i.addEventListener("click",function(){e()})})},U5=function(t,e,i){t.split(",").forEach(function(r){Y5(r,e,i)}),g0(t,"clickable")},H5=function(t){yl.forEach(function(e){e(t)})},G5={getConfig:()=>Y().gantt,clear:d5,setDateFormat:b5,getDateFormat:S5,enableInclusiveEndDates:k5,endDatesAreInclusive:_5,enableTopAxis:T5,topAxisEnabled:C5,setAxisFormat:f5,getAxisFormat:p5,setTickInterval:g5,getTickInterval:y5,setTodayMarker:m5,getTodayMarker:x5,setAccTitle:Ne,getAccTitle:Ye,setDiagramTitle:ei,getDiagramTitle:Ge,setDisplayMode:E5,getDisplayMode:v5,setAccDescription:Ue,getAccDescription:He,addSection:F5,getSections:R5,getTasks:D5,addTask:q5,findTaskById:fs,addTaskOrg:z5,setIncludes:w5,getIncludes:A5,setExcludes:L5,getExcludes:B5,setClickEvent:U5,setLink:W5,getLinks:I5,bindFunctions:H5,parseDuration:d0,isInvalidDate:h0,setWeekday:N5,getWeekday:O5};function m0(t,e,i){let r=!0;for(;r;)r=!1,i.forEach(function(s){const n="^\\s*"+s+"\\s*$",a=new RegExp(n);t[0].match(a)&&(e[s]=!0,t.shift(1),r=!0)})}const j5=function(){A.debug("Something is calling, setConf, remove the call")},Dc={monday:If,tuesday:Ff,wednesday:Rf,thursday:Df,friday:Nf,saturday:Of,sunday:Pf},X5=(t,e)=>{let i=[...t].map(()=>-1/0),r=[...t].sort((n,a)=>n.startTime-a.startTime||n.order-a.order),s=0;for(const n of r)for(let a=0;a<i.length;a++)if(n.startTime>=i[a]){i[a]=n.endTime,n.order=a+e,a>s&&(s=a);break}return s};let Yi;const $5=function(t,e,i,r){const s=Y().gantt,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=n==="sandbox"?a.nodes()[0].contentDocument:document,h=l.getElementById(e);Yi=h.parentElement.offsetWidth,Yi===void 0&&(Yi=1200),s.useWidth!==void 0&&(Yi=s.useWidth);const u=r.db.getTasks();let f=[];for(const S of u)f.push(S.type);f=I(f);const d={};let p=2*s.topPadding;if(r.db.getDisplayMode()==="compact"||s.displayMode==="compact"){const S={};for(const T of u)S[T.section]===void 0?S[T.section]=[T]:S[T.section].push(T);let b=0;for(const T of Object.keys(S)){const g=X5(S[T],b)+1;b+=g,p+=g*(s.barHeight+s.barGap),d[T]=g}}else{p+=u.length*(s.barHeight+s.barGap);for(const S of f)d[S]=u.filter(b=>b.type===S).length}h.setAttribute("viewBox","0 0 "+Yi+" "+p);const y=o.select(`[id="${e}"]`),x=vf().domain([Sf(u,function(S){return S.startTime}),wf(u,function(S){return S.endTime})]).rangeRound([0,Yi-s.leftPadding-s.rightPadding]);function _(S,b){const T=S.startTime,g=b.startTime;let w=0;return T>g?w=1:T<g&&(w=-1),w}u.sort(_),C(u,Yi,p),ze(y,p,Yi,s.useMaxWidth),y.append("text").text(r.db.getDiagramTitle()).attr("x",Yi/2).attr("y",s.titleTopMargin).attr("class","titleText");function C(S,b,T){const g=s.barHeight,w=g+s.barGap,m=s.topPadding,P=s.leftPadding,j=Ls().domain([0,f.length]).range(["#00B9FA","#F95002"]).interpolate(Af);R(w,m,P,b,T,S,r.db.getExcludes(),r.db.getIncludes()),F(P,m,b,T),k(S,w,m,P,g,j,b),L(w,m),E(P,m,b,T)}function k(S,b,T,g,w,m,P){const N=[...new Set(S.map(z=>z.order))].map(z=>S.find(q=>q.order===z));y.append("g").selectAll("rect").data(N).enter().append("rect").attr("x",0).attr("y",function(z,q){return q=z.order,q*b+T-2}).attr("width",function(){return P-s.rightPadding/2}).attr("height",b).attr("class",function(z){for(const[q,st]of f.entries())if(z.type===st)return"section section"+q%s.numberSectionStyles;return"section section0"});const v=y.append("g").selectAll("rect").data(S).enter(),D=r.db.getLinks();if(v.append("rect").attr("id",function(z){return z.id}).attr("rx",3).attr("ry",3).attr("x",function(z){return z.milestone?x(z.startTime)+g+.5*(x(z.endTime)-x(z.startTime))-.5*w:x(z.startTime)+g}).attr("y",function(z,q){return q=z.order,q*b+T}).attr("width",function(z){return z.milestone?w:x(z.renderEndTime||z.endTime)-x(z.startTime)}).attr("height",w).attr("transform-origin",function(z,q){return q=z.order,(x(z.startTime)+g+.5*(x(z.endTime)-x(z.startTime))).toString()+"px "+(q*b+T+.5*w).toString()+"px"}).attr("class",function(z){const q="task";let st="";z.classes.length>0&&(st=z.classes.join(" "));let $=0;for(const[Q,H]of f.entries())z.type===H&&($=Q%s.numberSectionStyles);let ft="";return z.active?z.crit?ft+=" activeCrit":ft=" active":z.done?z.crit?ft=" doneCrit":ft=" done":z.crit&&(ft+=" crit"),ft.length===0&&(ft=" task"),z.milestone&&(ft=" milestone "+ft),ft+=$,ft+=" "+st,q+ft}),v.append("text").attr("id",function(z){return z.id+"-text"}).text(function(z){return z.task}).attr("font-size",s.fontSize).attr("x",function(z){let q=x(z.startTime),st=x(z.renderEndTime||z.endTime);z.milestone&&(q+=.5*(x(z.endTime)-x(z.startTime))-.5*w),z.milestone&&(st=q+w);const $=this.getBBox().width;return $>st-q?st+$+1.5*s.leftPadding>P?q+g-5:st+g+5:(st-q)/2+q+g}).attr("y",function(z,q){return q=z.order,q*b+s.barHeight/2+(s.fontSize/2-2)+T}).attr("text-height",w).attr("class",function(z){const q=x(z.startTime);let st=x(z.endTime);z.milestone&&(st=q+w);const $=this.getBBox().width;let ft="";z.classes.length>0&&(ft=z.classes.join(" "));let Q=0;for(const[it,nt]of f.entries())z.type===nt&&(Q=it%s.numberSectionStyles);let H="";return z.active&&(z.crit?H="activeCritText"+Q:H="activeText"+Q),z.done?z.crit?H=H+" doneCritText"+Q:H=H+" doneText"+Q:z.crit&&(H=H+" critText"+Q),z.milestone&&(H+=" milestoneText"),$>st-q?st+$+1.5*s.leftPadding>P?ft+" taskTextOutsideLeft taskTextOutside"+Q+" "+H:ft+" taskTextOutsideRight taskTextOutside"+Q+" "+H+" width-"+$:ft+" taskText taskText"+Q+" "+H+" width-"+$}),Y().securityLevel==="sandbox"){let z;z=yt("#i"+e);const q=z.nodes()[0].contentDocument;v.filter(function(st){return D[st.id]!==void 0}).each(function(st){var $=q.querySelector("#"+st.id),ft=q.querySelector("#"+st.id+"-text");const Q=$.parentNode;var H=q.createElement("a");H.setAttribute("xlink:href",D[st.id]),H.setAttribute("target","_top"),Q.appendChild(H),H.appendChild($),H.appendChild(ft)})}}function R(S,b,T,g,w,m,P,j){if(P.length===0&&j.length===0)return;let N,v;for(const{startTime:$,endTime:ft}of m)(N===void 0||$<N)&&(N=$),(v===void 0||ft>v)&&(v=ft);if(!N||!v)return;if(Fe(v).diff(Fe(N),"year")>5){A.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const D=r.db.getDateFormat(),B=[];let z=null,q=Fe(N);for(;q.valueOf()<=v;)r.db.isInvalidDate(q,D,P,j)?z?z.end=q:z={start:q,end:q}:z&&(B.push(z),z=null),q=q.add(1,"d");y.append("g").selectAll("rect").data(B).enter().append("rect").attr("id",function($){return"exclude-"+$.start.format("YYYY-MM-DD")}).attr("x",function($){return x($.start)+T}).attr("y",s.gridLineStartPadding).attr("width",function($){const ft=$.end.add(1,"day");return x(ft)-x($.start)}).attr("height",w-b-s.gridLineStartPadding).attr("transform-origin",function($,ft){return(x($.start)+T+.5*(x($.end)-x($.start))).toString()+"px "+(ft*S+.5*w).toString()+"px"}).attr("class","exclude-range")}function F(S,b,T,g){let w=Lf(x).tickSize(-g+b+s.gridLineStartPadding).tickFormat(Gl(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));const P=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||s.tickInterval);if(P!==null){const j=P[1],N=P[2],v=r.db.getWeekday()||s.weekday;switch(N){case"millisecond":w.ticks(Zl.every(j));break;case"second":w.ticks(Ql.every(j));break;case"minute":w.ticks(Kl.every(j));break;case"hour":w.ticks($l.every(j));break;case"day":w.ticks(Xl.every(j));break;case"week":w.ticks(Dc[v].every(j));break;case"month":w.ticks(jl.every(j));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+S+", "+(g-50)+")").call(w).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||s.topAxis){let j=Bf(x).tickSize(-g+b+s.gridLineStartPadding).tickFormat(Gl(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));if(P!==null){const N=P[1],v=P[2],D=r.db.getWeekday()||s.weekday;switch(v){case"millisecond":j.ticks(Zl.every(N));break;case"second":j.ticks(Ql.every(N));break;case"minute":j.ticks(Kl.every(N));break;case"hour":j.ticks($l.every(N));break;case"day":j.ticks(Xl.every(N));break;case"week":j.ticks(Dc[D].every(N));break;case"month":j.ticks(jl.every(N));break}}y.append("g").attr("class","grid").attr("transform","translate("+S+", "+b+")").call(j).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function L(S,b){let T=0;const g=Object.keys(d).map(w=>[w,d[w]]);y.append("g").selectAll("text").data(g).enter().append(function(w){const m=w[0].split(mt.lineBreakRegex),P=-(m.length-1)/2,j=l.createElementNS("http://www.w3.org/2000/svg","text");j.setAttribute("dy",P+"em");for(const[N,v]of m.entries()){const D=l.createElementNS("http://www.w3.org/2000/svg","tspan");D.setAttribute("alignment-baseline","central"),D.setAttribute("x","10"),N>0&&D.setAttribute("dy","1em"),D.textContent=v,j.appendChild(D)}return j}).attr("x",10).attr("y",function(w,m){if(m>0)for(let P=0;P<m;P++)return T+=g[m-1][1],w[1]*S/2+T*S+b;else return w[1]*S/2+b}).attr("font-size",s.sectionFontSize).attr("class",function(w){for(const[m,P]of f.entries())if(w[0]===P)return"sectionTitle sectionTitle"+m%s.numberSectionStyles;return"sectionTitle"})}function E(S,b,T,g){const w=r.db.getTodayMarker();if(w==="off")return;const m=y.append("g").attr("class","today"),P=new Date,j=m.append("line");j.attr("x1",x(P)+S).attr("x2",x(P)+S).attr("y1",s.titleTopMargin).attr("y2",g-s.titleTopMargin).attr("class","today"),w!==""&&j.attr("style",w.replace(/,/g,";"))}function I(S){const b={},T=[];for(let g=0,w=S.length;g<w;++g)Object.prototype.hasOwnProperty.call(b,S[g])||(b[S[g]]=!0,T.push(S[g]));return T}},K5={setConf:j5,draw:$5},Q5=t=>`
  .mermaid-main-font {
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${t.fontFamily};
    fill: ${t.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.titleColor||t.textColor};
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }
`,Z5=Q5,J5={parser:u5,db:G5,renderer:K5,styles:Z5},tk=Object.freeze(Object.defineProperty({__proto__:null,diagram:J5},Symbol.toStringTag,{value:"Module"}));var fo=function(){var t=function(n,a,o,l){for(o=o||{},l=n.length;l--;o[n[l]]=a);return o},e=[6,9,10],i={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,l,h,u,f,d){switch(f.length-1,u){case 1:return h;case 4:break;case 6:h.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var l=new Error(a);throw l.hash=o,l}},parse:function(a){var o=this,l=[0],h=[],u=[null],f=[],d=this.table,p="",y=0,x=0,_=2,C=1,k=f.slice.call(arguments,1),R=Object.create(this.lexer),F={yy:{}};for(var L in this.yy)Object.prototype.hasOwnProperty.call(this.yy,L)&&(F.yy[L]=this.yy[L]);R.setInput(a,F.yy),F.yy.lexer=R,F.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var E=R.yylloc;f.push(E);var I=R.options&&R.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function S(){var B;return B=h.pop()||R.lex()||C,typeof B!="number"&&(B instanceof Array&&(h=B,B=h.pop()),B=o.symbols_[B]||B),B}for(var b,T,g,w,m={},P,j,N,v;;){if(T=l[l.length-1],this.defaultActions[T]?g=this.defaultActions[T]:((b===null||typeof b>"u")&&(b=S()),g=d[T]&&d[T][b]),typeof g>"u"||!g.length||!g[0]){var D="";v=[];for(P in d[T])this.terminals_[P]&&P>_&&v.push("'"+this.terminals_[P]+"'");R.showPosition?D="Parse error on line "+(y+1)+`:
`+R.showPosition()+`
Expecting `+v.join(", ")+", got '"+(this.terminals_[b]||b)+"'":D="Parse error on line "+(y+1)+": Unexpected "+(b==C?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(D,{text:R.match,token:this.terminals_[b]||b,line:R.yylineno,loc:E,expected:v})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+T+", token: "+b);switch(g[0]){case 1:l.push(b),u.push(R.yytext),f.push(R.yylloc),l.push(g[1]),b=null,x=R.yyleng,p=R.yytext,y=R.yylineno,E=R.yylloc;break;case 2:if(j=this.productions_[g[1]][1],m.$=u[u.length-j],m._$={first_line:f[f.length-(j||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(j||1)].first_column,last_column:f[f.length-1].last_column},I&&(m._$.range=[f[f.length-(j||1)].range[0],f[f.length-1].range[1]]),w=this.performAction.apply(m,[p,x,y,F.yy,g[1],u,f].concat(k)),typeof w<"u")return w;j&&(l=l.slice(0,-1*j*2),u=u.slice(0,-1*j),f=f.slice(0,-1*j)),l.push(this.productions_[g[1]][0]),u.push(m.$),f.push(m._$),N=d[l[l.length-2]][l[l.length-1]],l.push(N);break;case 3:return!0}}return!0}},r=function(){var n={EOF:1,parseError:function(o,l){if(this.yy.parser)this.yy.parser.parseError(o,l);else throw new Error(o)},setInput:function(a,o){return this.yy=o||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var o=a.match(/(?:\r\n?|\n).*/g);return o?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var o=a.length,l=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-o),this.offset-=o;var h=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var u=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===h.length?this.yylloc.first_column:0)+h[h.length-l.length].length-l[0].length:this.yylloc.first_column-o},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-o]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),o=new Array(a.length+1).join("-");return a+this.upcomingInput()+`
`+o+"^"},test_match:function(a,o){var l,h,u;if(this.options.backtrack_lexer&&(u={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(u.yylloc.range=this.yylloc.range.slice(0))),h=a[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],l=this.performAction.call(this,this.yy,this,o,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var f in u)this[f]=u[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,o,l,h;this._more||(this.yytext="",this.match="");for(var u=this._currentRules(),f=0;f<u.length;f++)if(l=this._input.match(this.rules[u[f]]),l&&(!o||l[0].length>o[0].length)){if(o=l,h=f,this.options.backtrack_lexer){if(a=this.test_match(l,u[f]),a!==!1)return a;if(this._backtrack){o=!1;continue}else return!1}else if(!this.options.flex)break}return o?(a=this.test_match(o,u[h]),a!==!1?a:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,l,h,u){switch(h){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return n}();i.lexer=r;function s(){this.yy={}}return s.prototype=i,i.Parser=s,new s}();fo.parser=fo;const ek=fo,x0={info:!1};let bl=x0.info;const ik=t=>{bl=t},rk=()=>bl,sk=()=>{bl=x0.info},nk={clear:sk,setInfo:ik,getInfo:rk},ak=(t,e,i)=>{A.debug(`rendering info diagram
`+t);const r=fa(e);ze(r,100,400,!0),r.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${i}`)},ok={draw:ak},lk={parser:ek,db:nk,renderer:ok},ck=Object.freeze(Object.defineProperty({__proto__:null,diagram:lk},Symbol.toStringTag,{value:"Module"}));var po=function(){var t=function(R,F,L,E){for(L=L||{},E=R.length;E--;L[R[E]]=F);return L},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,10,12,14,16,18,19,20,21,22],a=[2,4],o=[1,5,10,12,14,16,18,19,20,21,22],l=[20,21,22],h=[2,7],u=[1,12],f=[1,13],d=[1,14],p=[1,15],y=[1,16],x=[1,17],_={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,PIE:5,document:6,showData:7,line:8,statement:9,txt:10,value:11,title:12,title_value:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,section:19,NEWLINE:20,";":21,EOF:22,$accept:0,$end:1},terminals_:{2:"error",5:"PIE",7:"showData",10:"txt",11:"value",12:"title",13:"title_value",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"section",20:"NEWLINE",21:";",22:"EOF"},productions_:[0,[3,2],[3,2],[3,3],[6,0],[6,2],[8,2],[9,0],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[4,1],[4,1],[4,1]],performAction:function(F,L,E,I,S,b,T){var g=b.length-1;switch(S){case 3:I.setShowData(!0);break;case 6:this.$=b[g-1];break;case 8:I.addSection(b[g-1],I.cleanupValue(b[g]));break;case 9:this.$=b[g].trim(),I.setDiagramTitle(this.$);break;case 10:this.$=b[g].trim(),I.setAccTitle(this.$);break;case 11:case 12:this.$=b[g].trim(),I.setAccDescription(this.$);break;case 13:I.addSection(b[g].substr(8)),this.$=b[g].substr(8);break}},table:[{3:1,4:2,5:e,20:i,21:r,22:s},{1:[3]},{3:7,4:2,5:e,20:i,21:r,22:s},t(n,a,{6:8,7:[1,9]}),t(o,[2,14]),t(o,[2,15]),t(o,[2,16]),{1:[2,1]},t(l,h,{8:10,9:11,1:[2,2],10:u,12:f,14:d,16:p,18:y,19:x}),t(n,a,{6:18}),t(n,[2,5]),{4:19,20:i,21:r,22:s},{11:[1,20]},{13:[1,21]},{15:[1,22]},{17:[1,23]},t(l,[2,12]),t(l,[2,13]),t(l,h,{8:10,9:11,1:[2,3],10:u,12:f,14:d,16:p,18:y,19:x}),t(n,[2,6]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11])],defaultActions:{7:[2,1]},parseError:function(F,L){if(L.recoverable)this.trace(F);else{var E=new Error(F);throw E.hash=L,E}},parse:function(F){var L=this,E=[0],I=[],S=[null],b=[],T=this.table,g="",w=0,m=0,P=2,j=1,N=b.slice.call(arguments,1),v=Object.create(this.lexer),D={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(D.yy[B]=this.yy[B]);v.setInput(F,D.yy),D.yy.lexer=v,D.yy.parser=this,typeof v.yylloc>"u"&&(v.yylloc={});var z=v.yylloc;b.push(z);var q=v.options&&v.options.ranges;typeof D.yy.parseError=="function"?this.parseError=D.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=I.pop()||v.lex()||j,typeof W!="number"&&(W instanceof Array&&(I=W,W=I.pop()),W=L.symbols_[W]||W),W}for(var $,ft,Q,H,it={},nt,Z,tt,O;;){if(ft=E[E.length-1],this.defaultActions[ft]?Q=this.defaultActions[ft]:(($===null||typeof $>"u")&&($=st()),Q=T[ft]&&T[ft][$]),typeof Q>"u"||!Q.length||!Q[0]){var at="";O=[];for(nt in T[ft])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");v.showPosition?at="Parse error on line "+(w+1)+`:
`+v.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[$]||$)+"'":at="Parse error on line "+(w+1)+": Unexpected "+($==j?"end of input":"'"+(this.terminals_[$]||$)+"'"),this.parseError(at,{text:v.match,token:this.terminals_[$]||$,line:v.yylineno,loc:z,expected:O})}if(Q[0]instanceof Array&&Q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ft+", token: "+$);switch(Q[0]){case 1:E.push($),S.push(v.yytext),b.push(v.yylloc),E.push(Q[1]),$=null,m=v.yyleng,g=v.yytext,w=v.yylineno,z=v.yylloc;break;case 2:if(Z=this.productions_[Q[1]][1],it.$=S[S.length-Z],it._$={first_line:b[b.length-(Z||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(Z||1)].first_column,last_column:b[b.length-1].last_column},q&&(it._$.range=[b[b.length-(Z||1)].range[0],b[b.length-1].range[1]]),H=this.performAction.apply(it,[g,m,w,D.yy,Q[1],S,b].concat(N)),typeof H<"u")return H;Z&&(E=E.slice(0,-1*Z*2),S=S.slice(0,-1*Z),b=b.slice(0,-1*Z)),E.push(this.productions_[Q[1]][0]),S.push(it.$),b.push(it._$),tt=T[E[E.length-2]][E[E.length-1]],E.push(tt);break;case 3:return!0}}return!0}},C=function(){var R={EOF:1,parseError:function(L,E){if(this.yy.parser)this.yy.parser.parseError(L,E);else throw new Error(L)},setInput:function(F,L){return this.yy=L||this.yy||{},this._input=F,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var F=this._input[0];this.yytext+=F,this.yyleng++,this.offset++,this.match+=F,this.matched+=F;var L=F.match(/(?:\r\n?|\n).*/g);return L?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),F},unput:function(F){var L=F.length,E=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-L),this.offset-=L;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),E.length-1&&(this.yylineno-=E.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:E?(E.length===I.length?this.yylloc.first_column:0)+I[I.length-E.length].length-E[0].length:this.yylloc.first_column-L},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-L]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(F){this.unput(this.match.slice(F))},pastInput:function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var F=this.match;return F.length<20&&(F+=this._input.substr(0,20-F.length)),(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var F=this.pastInput(),L=new Array(F.length+1).join("-");return F+this.upcomingInput()+`
`+L+"^"},test_match:function(F,L){var E,I,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),I=F[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+F[0].length},this.yytext+=F[0],this.match+=F[0],this.matches=F,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(F[0].length),this.matched+=F[0],E=this.performAction.call(this,this.yy,this,L,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),E)return E;if(this._backtrack){for(var b in S)this[b]=S[b];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var F,L,E,I;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),b=0;b<S.length;b++)if(E=this._input.match(this.rules[S[b]]),E&&(!L||E[0].length>L[0].length)){if(L=E,I=b,this.options.backtrack_lexer){if(F=this.test_match(E,S[b]),F!==!1)return F;if(this._backtrack){L=!1;continue}else return!1}else if(!this.options.flex)break}return L?(F=this.test_match(L,S[I]),F!==!1?F:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var L=this.next();return L||this.lex()},begin:function(L){this.conditionStack.push(L)},popState:function(){var L=this.conditionStack.length-1;return L>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(L){return L=this.conditionStack.length-1-Math.abs(L||0),L>=0?this.conditionStack[L]:"INITIAL"},pushState:function(L){this.begin(L)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(L,E,I,S){switch(I){case 0:break;case 1:break;case 2:return 20;case 3:break;case 4:break;case 5:return this.begin("title"),12;case 6:return this.popState(),"title_value";case 7:return this.begin("acc_title"),14;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),16;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"txt";case 17:return 5;case 18:return 7;case 19:return"value";case 20:return 22}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[6],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,7,9,11,14,17,18,19,20],inclusive:!0}}};return R}();_.lexer=C;function k(){this.yy={}}return k.prototype=_,_.Parser=k,new k}();po.parser=po;const hk=po,b0=ae.pie,Qn={sections:{},showData:!1,config:b0};let Zn=Qn.sections,kl=Qn.showData;const uk=structuredClone(b0),dk=()=>structuredClone(uk),fk=()=>{Zn=structuredClone(Qn.sections),kl=Qn.showData,We()},pk=(t,e)=>{t=ve(t,Y()),Zn[t]===void 0&&(Zn[t]=e,A.debug(`added new section: ${t}, with value: ${e}`))},gk=()=>Zn,yk=t=>(t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())),mk=t=>{kl=t},xk=()=>kl,bk={getConfig:dk,clear:fk,setDiagramTitle:ei,getDiagramTitle:Ge,setAccTitle:Ne,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addSection:pk,getSections:gk,cleanupValue:yk,setShowData:mk,getShowData:xk},kk=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,_k=kk,Tk=t=>{const e=Object.entries(t).map(r=>({label:r[0],value:r[1]})).sort((r,s)=>s.value-r.value);return Tf().value(r=>r.value)(e)},Ck=(t,e,i,r)=>{A.debug(`rendering pie chart
`+t);const s=r.db,n=Y(),a=tn(s.getConfig(),n.pie),o=40,l=18,h=4,u=450,f=u,d=fa(e),p=d.append("g"),y=s.getSections();p.attr("transform","translate("+f/2+","+u/2+")");const{themeVariables:x}=n;let[_]=ds(x.pieOuterStrokeWidth);_??(_=2);const C=a.textPosition,k=Math.min(f,u)/2-o,R=Qr().innerRadius(0).outerRadius(k),F=Qr().innerRadius(k*C).outerRadius(k*C);p.append("circle").attr("cx",0).attr("cy",0).attr("r",k+_/2).attr("class","pieOuterCircle");const L=Tk(y),E=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],I=gh(E);p.selectAll("mySlices").data(L).enter().append("path").attr("d",R).attr("fill",w=>I(w.data.label)).attr("class","pieCircle");let S=0;Object.keys(y).forEach(w=>{S+=y[w]}),p.selectAll("mySlices").data(L).enter().append("text").text(w=>(w.data.value/S*100).toFixed(0)+"%").attr("transform",w=>"translate("+F.centroid(w)+")").style("text-anchor","middle").attr("class","slice"),p.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-(u-50)/2).attr("class","pieTitleText");const b=p.selectAll(".legend").data(I.domain()).enter().append("g").attr("class","legend").attr("transform",(w,m)=>{const P=l+h,j=P*I.domain().length/2,N=12*l,v=m*P-j;return"translate("+N+","+v+")"});b.append("rect").attr("width",l).attr("height",l).style("fill",I).style("stroke",I),b.data(L).append("text").attr("x",l+h).attr("y",l-h).text(w=>{const{label:m,value:P}=w.data;return s.getShowData()?`${m} [${P}]`:m});const T=Math.max(...b.selectAll("text").nodes().map(w=>w?.getBoundingClientRect().width??0)),g=f+o+l+h+T;d.attr("viewBox",`0 0 ${g} ${u}`),ze(d,u,g,a.useMaxWidth)},Ek={draw:Ck},vk={parser:hk,db:bk,renderer:Ek,styles:_k},Sk=Object.freeze(Object.defineProperty({__proto__:null,diagram:vk},Symbol.toStringTag,{value:"Module"}));var go=function(){var t=function(Q,H,it,nt){for(it=it||{},nt=Q.length;nt--;it[Q[nt]]=H);return it},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,7],a=[1,5,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],o=[1,5,6,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],l=[32,33,34],h=[2,7],u=[1,13],f=[1,17],d=[1,18],p=[1,19],y=[1,20],x=[1,21],_=[1,22],C=[1,23],k=[1,24],R=[1,25],F=[1,26],L=[1,27],E=[1,30],I=[1,31],S=[1,32],b=[1,33],T=[1,34],g=[1,35],w=[1,36],m=[1,37],P=[1,38],j=[1,39],N=[1,40],v=[1,41],D=[1,42],B=[1,57],z=[1,58],q=[5,22,26,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51],st={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,SPACE:5,QUADRANT:6,document:7,line:8,statement:9,axisDetails:10,quadrantDetails:11,points:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,text:21,point_start:22,point_x:23,point_y:24,"X-AXIS":25,"AXIS-TEXT-DELIMITER":26,"Y-AXIS":27,QUADRANT_1:28,QUADRANT_2:29,QUADRANT_3:30,QUADRANT_4:31,NEWLINE:32,SEMI:33,EOF:34,alphaNumToken:35,textNoTagsToken:36,STR:37,MD_STR:38,alphaNum:39,PUNCTUATION:40,AMP:41,NUM:42,ALPHA:43,COMMA:44,PLUS:45,EQUALS:46,MULT:47,DOT:48,BRKT:49,UNDERSCORE:50,MINUS:51,$accept:0,$end:1},terminals_:{2:"error",5:"SPACE",6:"QUADRANT",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",22:"point_start",23:"point_x",24:"point_y",25:"X-AXIS",26:"AXIS-TEXT-DELIMITER",27:"Y-AXIS",28:"QUADRANT_1",29:"QUADRANT_2",30:"QUADRANT_3",31:"QUADRANT_4",32:"NEWLINE",33:"SEMI",34:"EOF",37:"STR",38:"MD_STR",40:"PUNCTUATION",41:"AMP",42:"NUM",43:"ALPHA",44:"COMMA",45:"PLUS",46:"EQUALS",47:"MULT",48:"DOT",49:"BRKT",50:"UNDERSCORE",51:"MINUS"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[9,0],[9,2],[9,1],[9,1],[9,1],[9,2],[9,2],[9,2],[9,1],[9,1],[12,4],[10,4],[10,3],[10,2],[10,4],[10,3],[10,2],[11,2],[11,2],[11,2],[11,2],[4,1],[4,1],[4,1],[21,1],[21,2],[21,1],[21,1],[39,1],[39,2],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[36,1],[36,1]],performAction:function(H,it,nt,Z,tt,O,at){var W=O.length-1;switch(tt){case 12:this.$=O[W].trim(),Z.setDiagramTitle(this.$);break;case 13:this.$=O[W].trim(),Z.setAccTitle(this.$);break;case 14:case 15:this.$=O[W].trim(),Z.setAccDescription(this.$);break;case 16:Z.addSection(O[W].substr(8)),this.$=O[W].substr(8);break;case 17:Z.addPoint(O[W-3],O[W-1],O[W]);break;case 18:Z.setXAxisLeftText(O[W-2]),Z.setXAxisRightText(O[W]);break;case 19:O[W-1].text+="  ",Z.setXAxisLeftText(O[W-1]);break;case 20:Z.setXAxisLeftText(O[W]);break;case 21:Z.setYAxisBottomText(O[W-2]),Z.setYAxisTopText(O[W]);break;case 22:O[W-1].text+="  ",Z.setYAxisBottomText(O[W-1]);break;case 23:Z.setYAxisBottomText(O[W]);break;case 24:Z.setQuadrant1Text(O[W]);break;case 25:Z.setQuadrant2Text(O[W]);break;case 26:Z.setQuadrant3Text(O[W]);break;case 27:Z.setQuadrant4Text(O[W]);break;case 31:this.$={text:O[W],type:"text"};break;case 32:this.$={text:O[W-1].text+""+O[W],type:O[W-1].type};break;case 33:this.$={text:O[W],type:"text"};break;case 34:this.$={text:O[W],type:"markdown"};break;case 35:this.$=O[W];break;case 36:this.$=O[W-1]+""+O[W];break}},table:[{3:1,4:2,5:e,6:i,32:r,33:s,34:n},{1:[3]},{3:8,4:2,5:e,6:i,32:r,33:s,34:n},{3:9,4:2,5:e,6:i,32:r,33:s,34:n},t(a,[2,4],{7:10}),t(o,[2,28]),t(o,[2,29]),t(o,[2,30]),{1:[2,1]},{1:[2,2]},t(l,h,{8:11,9:12,10:14,11:15,12:16,21:28,35:29,1:[2,3],5:u,13:f,15:d,17:p,19:y,20:x,25:_,27:C,28:k,29:R,30:F,31:L,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D}),t(a,[2,5]),{4:43,32:r,33:s,34:n},t(l,h,{10:14,11:15,12:16,21:28,35:29,9:44,5:u,13:f,15:d,17:p,19:y,20:x,25:_,27:C,28:k,29:R,30:F,31:L,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D}),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),{14:[1,45]},{16:[1,46]},{18:[1,47]},t(l,[2,15]),t(l,[2,16]),{21:48,35:29,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D},{21:49,35:29,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D},{21:50,35:29,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D},{21:51,35:29,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D},{21:52,35:29,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D},{21:53,35:29,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D},{5:B,22:[1,54],35:56,36:55,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z},t(q,[2,31]),t(q,[2,33]),t(q,[2,34]),t(q,[2,37]),t(q,[2,38]),t(q,[2,39]),t(q,[2,40]),t(q,[2,41]),t(q,[2,42]),t(q,[2,43]),t(q,[2,44]),t(q,[2,45]),t(q,[2,46]),t(q,[2,47]),t(a,[2,6]),t(l,[2,8]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,20],{36:55,35:56,5:B,26:[1,59],40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,23],{36:55,35:56,5:B,26:[1,60],40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,24],{36:55,35:56,5:B,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,25],{36:55,35:56,5:B,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,26],{36:55,35:56,5:B,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,27],{36:55,35:56,5:B,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),{23:[1,61]},t(q,[2,32]),t(q,[2,48]),t(q,[2,49]),t(q,[2,50]),t(l,[2,19],{35:29,21:62,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D}),t(l,[2,22],{35:29,21:63,37:E,38:I,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D}),{24:[1,64]},t(l,[2,18],{36:55,35:56,5:B,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,21],{36:55,35:56,5:B,40:S,41:b,42:T,43:g,44:w,45:m,46:P,47:j,48:N,49:v,50:D,51:z}),t(l,[2,17])],defaultActions:{8:[2,1],9:[2,2]},parseError:function(H,it){if(it.recoverable)this.trace(H);else{var nt=new Error(H);throw nt.hash=it,nt}},parse:function(H){var it=this,nt=[0],Z=[],tt=[null],O=[],at=this.table,W="",dt=0,M=0,wt=2,G=1,vt=O.slice.call(arguments,1),bt=Object.create(this.lexer),Mt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Mt.yy[Bt]=this.yy[Bt]);bt.setInput(H,Mt.yy),Mt.yy.lexer=bt,Mt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Mt.yy.parseError=="function"?this.parseError=Mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var Vt;return Vt=Z.pop()||bt.lex()||G,typeof Vt!="number"&&(Vt instanceof Array&&(Z=Vt,Vt=Z.pop()),Vt=it.symbols_[Vt]||Vt),Vt}for(var ot,lt,ht,X,rt={},et,ct,te,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var ue="";Qt=[];for(et in at[lt])this.terminals_[et]&&et>wt&&Qt.push("'"+this.terminals_[et]+"'");bt.showPosition?ue="Parse error on line "+(dt+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":ue="Parse error on line "+(dt+1)+": Unexpected "+(ot==G?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(ue,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),tt.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,M=bt.yyleng,W=bt.yytext,dt=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=tt[tt.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),X=this.performAction.apply(rt,[W,M,dt,Mt.yy,ht[1],tt,O].concat(vt)),typeof X<"u")return X;ct&&(nt=nt.slice(0,-1*ct*2),tt=tt.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),tt.push(rt.$),O.push(rt._$),te=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(te);break;case 3:return!0}}return!0}},$=function(){var Q={EOF:1,parseError:function(it,nt){if(this.yy.parser)this.yy.parser.parseError(it,nt);else throw new Error(it)},setInput:function(H,it){return this.yy=it||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var H=this._input[0];this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H;var it=H.match(/(?:\r\n?|\n).*/g);return it?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},unput:function(H){var it=H.length,nt=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-it),this.offset-=it;var Z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var tt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Z.length?this.yylloc.first_column:0)+Z[Z.length-nt.length].length-nt[0].length:this.yylloc.first_column-it},this.options.ranges&&(this.yylloc.range=[tt[0],tt[0]+this.yyleng-it]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(H){this.unput(this.match.slice(H))},pastInput:function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var H=this.pastInput(),it=new Array(H.length+1).join("-");return H+this.upcomingInput()+`
`+it+"^"},test_match:function(H,it){var nt,Z,tt;if(this.options.backtrack_lexer&&(tt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(tt.yylloc.range=this.yylloc.range.slice(0))),Z=H[0].match(/(?:\r\n?|\n).*/g),Z&&(this.yylineno+=Z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Z?Z[Z.length-1].length-Z[Z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],nt=this.performAction.call(this,this.yy,this,it,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in tt)this[O]=tt[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var H,it,nt,Z;this._more||(this.yytext="",this.match="");for(var tt=this._currentRules(),O=0;O<tt.length;O++)if(nt=this._input.match(this.rules[tt[O]]),nt&&(!it||nt[0].length>it[0].length)){if(it=nt,Z=O,this.options.backtrack_lexer){if(H=this.test_match(nt,tt[O]),H!==!1)return H;if(this._backtrack){it=!1;continue}else return!1}else if(!this.options.flex)break}return it?(H=this.test_match(it,tt[Z]),H!==!1?H:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var it=this.next();return it||this.lex()},begin:function(it){this.conditionStack.push(it)},popState:function(){var it=this.conditionStack.length-1;return it>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(it){return it=this.conditionStack.length-1-Math.abs(it||0),it>=0?this.conditionStack[it]:"INITIAL"},pushState:function(it){this.begin(it)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(it,nt,Z,tt){switch(Z){case 0:break;case 1:break;case 2:return 32;case 3:break;case 4:return this.begin("title"),13;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),15;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),17;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 25;case 14:return 27;case 15:return 26;case 16:return 28;case 17:return 29;case 18:return 30;case 19:return 31;case 20:this.begin("md_string");break;case 21:return"MD_STR";case 22:this.popState();break;case 23:this.begin("string");break;case 24:this.popState();break;case 25:return"STR";case 26:return this.begin("point_start"),22;case 27:return this.begin("point_x"),23;case 28:this.popState();break;case 29:this.popState(),this.begin("point_y");break;case 30:return this.popState(),24;case 31:return 6;case 32:return 43;case 33:return"COLON";case 34:return 45;case 35:return 44;case 36:return 46;case 37:return 46;case 38:return 47;case 39:return 49;case 40:return 50;case 41:return 48;case 42:return 41;case 43:return 51;case 44:return 42;case 45:return 5;case 46:return 33;case 47:return 40;case 48:return 34}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{point_y:{rules:[30],inclusive:!1},point_x:{rules:[29],inclusive:!1},point_start:{rules:[27,28],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[21,22],inclusive:!1},string:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,23,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return Q}();st.lexer=$;function ft(){this.yy={}}return ft.prototype=st,st.Parser=ft,new ft}();go.parser=go;const wk=go,Oe=zo();class Ak{constructor(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var e,i,r,s,n,a,o,l,h,u,f,d,p,y,x,_,C,k;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((e=ae.quadrantChart)==null?void 0:e.chartWidth)||500,chartWidth:((i=ae.quadrantChart)==null?void 0:i.chartHeight)||500,titlePadding:((r=ae.quadrantChart)==null?void 0:r.titlePadding)||10,titleFontSize:((s=ae.quadrantChart)==null?void 0:s.titleFontSize)||20,quadrantPadding:((n=ae.quadrantChart)==null?void 0:n.quadrantPadding)||5,xAxisLabelPadding:((a=ae.quadrantChart)==null?void 0:a.xAxisLabelPadding)||5,yAxisLabelPadding:((o=ae.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=ae.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((h=ae.quadrantChart)==null?void 0:h.yAxisLabelFontSize)||16,quadrantLabelFontSize:((u=ae.quadrantChart)==null?void 0:u.quadrantLabelFontSize)||16,quadrantTextTopPadding:((f=ae.quadrantChart)==null?void 0:f.quadrantTextTopPadding)||5,pointTextPadding:((d=ae.quadrantChart)==null?void 0:d.pointTextPadding)||5,pointLabelFontSize:((p=ae.quadrantChart)==null?void 0:p.pointLabelFontSize)||12,pointRadius:((y=ae.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((x=ae.quadrantChart)==null?void 0:x.xAxisPosition)||"top",yAxisPosition:((_=ae.quadrantChart)==null?void 0:_.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((C=ae.quadrantChart)==null?void 0:C.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((k=ae.quadrantChart)==null?void 0:k.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:Oe.quadrant1Fill,quadrant2Fill:Oe.quadrant2Fill,quadrant3Fill:Oe.quadrant3Fill,quadrant4Fill:Oe.quadrant4Fill,quadrant1TextFill:Oe.quadrant1TextFill,quadrant2TextFill:Oe.quadrant2TextFill,quadrant3TextFill:Oe.quadrant3TextFill,quadrant4TextFill:Oe.quadrant4TextFill,quadrantPointFill:Oe.quadrantPointFill,quadrantPointTextFill:Oe.quadrantPointTextFill,quadrantXAxisTextFill:Oe.quadrantXAxisTextFill,quadrantYAxisTextFill:Oe.quadrantYAxisTextFill,quadrantTitleFill:Oe.quadrantTitleFill,quadrantInternalBorderStrokeFill:Oe.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Oe.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),A.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}setConfig(e){A.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){A.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,i,r,s){const n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:e==="top"&&i?n:0,bottom:e==="bottom"&&i?n:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&r?o:0,right:this.config.yAxisPosition==="right"&&r?o:0},h=this.config.titleFontSize+this.config.titlePadding*2,u={top:s?h:0},f=this.config.quadrantPadding+l.left,d=this.config.quadrantPadding+a.top+u.top,p=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,y=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-u.top,x=p/2,_=y/2;return{xAxisSpace:a,yAxisSpace:l,titleSpace:u,quadrantSpace:{quadrantLeft:f,quadrantTop:d,quadrantWidth:p,quadrantHalfWidth:x,quadrantHeight:y,quadrantHalfHeight:_}}}getAxisLabels(e,i,r,s){const{quadrantSpace:n,titleSpace:a}=s,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:h,quadrantHalfWidth:u,quadrantTop:f,quadrantWidth:d}=n,p=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,x=[];return this.data.xAxisLeftText&&i&&x.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(p?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+f+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&i&&x.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+u+(p?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+f+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&x.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:f+l-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&x.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:f+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),x}getQuadrants(e){const{quadrantSpace:i}=e,{quadrantHalfHeight:r,quadrantLeft:s,quadrantHalfWidth:n,quadrantTop:a}=i,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a,width:n,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a,width:n,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:i}=e,{quadrantHeight:r,quadrantLeft:s,quadrantTop:n,quadrantWidth:a}=i,o=Ls().domain([0,1]).range([s,a+s]),l=Ls().domain([0,1]).range([r+n,n]);return this.data.points.map(u=>({x:o(u.x),y:l(u.y),fill:this.themeConfig.quadrantPointFill,radius:this.config.pointRadius,text:{text:u.text,fill:this.themeConfig.quadrantPointTextFill,x:o(u.x),y:l(u.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0}}))}getBorders(e){const i=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=e,{quadrantHalfHeight:s,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:h}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l,x2:a+h+i,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+h,y1:l+i,x2:a+h,y2:l+n-i},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l+n,x2:a+h+i,y2:l+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:l+i,x2:a,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+o,y1:l+i,x2:a+o,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+i,y1:l+s,x2:a+h-i,y2:l+s}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),i=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,s=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(s,e,i,r);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(s,e,i,n),borderLines:this.getBorders(n),title:this.getTitle(r)}}}const Lk=Y();function rr(t){return ve(t.trim(),Lk)}const Re=new Ak;function Bk(t){Re.setData({quadrant1Text:rr(t.text)})}function Ik(t){Re.setData({quadrant2Text:rr(t.text)})}function Fk(t){Re.setData({quadrant3Text:rr(t.text)})}function Rk(t){Re.setData({quadrant4Text:rr(t.text)})}function Dk(t){Re.setData({xAxisLeftText:rr(t.text)})}function Nk(t){Re.setData({xAxisRightText:rr(t.text)})}function Ok(t){Re.setData({yAxisTopText:rr(t.text)})}function Pk(t){Re.setData({yAxisBottomText:rr(t.text)})}function Mk(t,e,i){Re.addPoints([{x:e,y:i,text:rr(t.text)}])}function Vk(t){Re.setConfig({chartWidth:t})}function qk(t){Re.setConfig({chartHeight:t})}function zk(){const t=Y(),{themeVariables:e,quadrantChart:i}=t;return i&&Re.setConfig(i),Re.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),Re.setData({titleText:Ge()}),Re.build()}const Wk=function(){Re.clear(),We()},Yk={setWidth:Vk,setHeight:qk,setQuadrant1Text:Bk,setQuadrant2Text:Ik,setQuadrant3Text:Fk,setQuadrant4Text:Rk,setXAxisLeftText:Dk,setXAxisRightText:Nk,setYAxisTopText:Ok,setYAxisBottomText:Pk,addPoint:Mk,getQuadrantData:zk,clear:Wk,setAccTitle:Ne,getAccTitle:Ye,setDiagramTitle:ei,getDiagramTitle:Ge,getAccDescription:He,setAccDescription:Ue},Uk=(t,e,i,r)=>{var s,n,a;function o(g){return g==="top"?"hanging":"middle"}function l(g){return g==="left"?"start":"middle"}function h(g){return`translate(${g.x}, ${g.y}) rotate(${g.rotation||0})`}const u=Y();A.debug(`Rendering quadrant chart
`+t);const f=u.securityLevel;let d;f==="sandbox"&&(d=yt("#i"+e));const y=(f==="sandbox"?yt(d.nodes()[0].contentDocument.body):yt("body")).select(`[id="${e}"]`),x=y.append("g").attr("class","main"),_=((s=u.quadrantChart)==null?void 0:s.chartWidth)||500,C=((n=u.quadrantChart)==null?void 0:n.chartHeight)||500;ze(y,C,_,((a=u.quadrantChart)==null?void 0:a.useMaxWidth)||!0),y.attr("viewBox","0 0 "+_+" "+C),r.db.setHeight(C),r.db.setWidth(_);const k=r.db.getQuadrantData(),R=x.append("g").attr("class","quadrants"),F=x.append("g").attr("class","border"),L=x.append("g").attr("class","data-points"),E=x.append("g").attr("class","labels"),I=x.append("g").attr("class","title");k.title&&I.append("text").attr("x",0).attr("y",0).attr("fill",k.title.fill).attr("font-size",k.title.fontSize).attr("dominant-baseline",o(k.title.horizontalPos)).attr("text-anchor",l(k.title.verticalPos)).attr("transform",h(k.title)).text(k.title.text),k.borderLines&&F.selectAll("line").data(k.borderLines).enter().append("line").attr("x1",g=>g.x1).attr("y1",g=>g.y1).attr("x2",g=>g.x2).attr("y2",g=>g.y2).style("stroke",g=>g.strokeFill).style("stroke-width",g=>g.strokeWidth);const S=R.selectAll("g.quadrant").data(k.quadrants).enter().append("g").attr("class","quadrant");S.append("rect").attr("x",g=>g.x).attr("y",g=>g.y).attr("width",g=>g.width).attr("height",g=>g.height).attr("fill",g=>g.fill),S.append("text").attr("x",0).attr("y",0).attr("fill",g=>g.text.fill).attr("font-size",g=>g.text.fontSize).attr("dominant-baseline",g=>o(g.text.horizontalPos)).attr("text-anchor",g=>l(g.text.verticalPos)).attr("transform",g=>h(g.text)).text(g=>g.text.text),E.selectAll("g.label").data(k.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(g=>g.text).attr("fill",g=>g.fill).attr("font-size",g=>g.fontSize).attr("dominant-baseline",g=>o(g.horizontalPos)).attr("text-anchor",g=>l(g.verticalPos)).attr("transform",g=>h(g));const T=L.selectAll("g.data-point").data(k.points).enter().append("g").attr("class","data-point");T.append("circle").attr("cx",g=>g.x).attr("cy",g=>g.y).attr("r",g=>g.radius).attr("fill",g=>g.fill),T.append("text").attr("x",0).attr("y",0).text(g=>g.text.text).attr("fill",g=>g.text.fill).attr("font-size",g=>g.text.fontSize).attr("dominant-baseline",g=>o(g.text.horizontalPos)).attr("text-anchor",g=>l(g.text.verticalPos)).attr("transform",g=>h(g.text))},Hk={draw:Uk},Gk={parser:wk,db:Yk,renderer:Hk,styles:()=>""},jk=Object.freeze(Object.defineProperty({__proto__:null,diagram:Gk},Symbol.toStringTag,{value:"Module"}));var yo=function(){var t=function(j,N,v,D){for(v=v||{},D=j.length;D--;v[j[D]]=N);return v},e=[1,10,12,14,16,18,19,21,23],i=[2,6],r=[1,3],s=[1,5],n=[1,6],a=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],h=[1,26],u=[1,28],f=[1,29],d=[1,30],p=[1,31],y=[1,32],x=[1,33],_=[1,34],C=[1,35],k=[1,36],R=[1,37],F=[1,43],L=[1,42],E=[1,47],I=[1,50],S=[1,10,12,14,16,18,19,21,23,34,35,36],b=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],T=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],g=[1,64],w={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:function(N,v,D,B,z,q,st){var $=q.length-1;switch(z){case 5:B.setOrientation(q[$]);break;case 9:B.setDiagramTitle(q[$].text.trim());break;case 12:B.setLineData({text:"",type:"text"},q[$]);break;case 13:B.setLineData(q[$-1],q[$]);break;case 14:B.setBarData({text:"",type:"text"},q[$]);break;case 15:B.setBarData(q[$-1],q[$]);break;case 16:this.$=q[$].trim(),B.setAccTitle(this.$);break;case 17:case 18:this.$=q[$].trim(),B.setAccDescription(this.$);break;case 19:this.$=q[$-1];break;case 20:this.$=[Number(q[$-2]),...q[$]];break;case 21:this.$=[Number(q[$])];break;case 22:B.setXAxisTitle(q[$]);break;case 23:B.setXAxisTitle(q[$-1]);break;case 24:B.setXAxisTitle({type:"text",text:""});break;case 25:B.setXAxisBand(q[$]);break;case 26:B.setXAxisRangeData(Number(q[$-2]),Number(q[$]));break;case 27:this.$=q[$-1];break;case 28:this.$=[q[$-2],...q[$]];break;case 29:this.$=[q[$]];break;case 30:B.setYAxisTitle(q[$]);break;case 31:B.setYAxisTitle(q[$-1]);break;case 32:B.setYAxisTitle({type:"text",text:""});break;case 33:B.setYAxisRangeData(Number(q[$-2]),Number(q[$]));break;case 37:this.$={text:q[$],type:"text"};break;case 38:this.$={text:q[$],type:"text"};break;case 39:this.$={text:q[$],type:"markdown"};break;case 40:this.$=q[$];break;case 41:this.$=q[$-1]+""+q[$];break}},table:[t(e,i,{3:1,4:2,7:4,5:r,34:s,35:n,36:a}),{1:[3]},t(e,i,{4:2,7:4,3:8,5:r,34:s,35:n,36:a}),t(e,i,{4:2,7:4,6:9,3:10,5:r,8:[1,11],34:s,35:n,36:a}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,i,{4:2,7:4,3:21,5:r,34:s,35:n,36:a}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:s,35:n,36:a}),{11:23,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},{11:39,13:38,24:F,27:L,29:40,30:41,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},{11:45,15:44,27:E,33:46,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},{11:49,17:48,24:I,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},{11:52,17:51,24:I,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},{20:[1,53]},{22:[1,54]},t(S,[2,18]),{1:[2,2]},t(S,[2,8]),t(S,[2,9]),t(b,[2,37],{40:55,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R}),t(b,[2,38]),t(b,[2,39]),t(T,[2,40]),t(T,[2,42]),t(T,[2,43]),t(T,[2,44]),t(T,[2,45]),t(T,[2,46]),t(T,[2,47]),t(T,[2,48]),t(T,[2,49]),t(T,[2,50]),t(T,[2,51]),t(S,[2,10]),t(S,[2,22],{30:41,29:56,24:F,27:L}),t(S,[2,24]),t(S,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},t(S,[2,11]),t(S,[2,30],{33:60,27:E}),t(S,[2,32]),{31:[1,61]},t(S,[2,12]),{17:62,24:I},{25:63,27:g},t(S,[2,14]),{17:65,24:I},t(S,[2,16]),t(S,[2,17]),t(T,[2,41]),t(S,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(S,[2,31]),{27:[1,69]},t(S,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(S,[2,15]),t(S,[2,26]),t(S,[2,27]),{11:59,32:72,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:x,47:_,48:C,49:k,50:R},t(S,[2,33]),t(S,[2,19]),{25:73,27:g},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:function(N,v){if(v.recoverable)this.trace(N);else{var D=new Error(N);throw D.hash=v,D}},parse:function(N){var v=this,D=[0],B=[],z=[null],q=[],st=this.table,$="",ft=0,Q=0,H=2,it=1,nt=q.slice.call(arguments,1),Z=Object.create(this.lexer),tt={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(tt.yy[O]=this.yy[O]);Z.setInput(N,tt.yy),tt.yy.lexer=Z,tt.yy.parser=this,typeof Z.yylloc>"u"&&(Z.yylloc={});var at=Z.yylloc;q.push(at);var W=Z.options&&Z.options.ranges;typeof tt.yy.parseError=="function"?this.parseError=tt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function dt(){var ot;return ot=B.pop()||Z.lex()||it,typeof ot!="number"&&(ot instanceof Array&&(B=ot,ot=B.pop()),ot=v.symbols_[ot]||ot),ot}for(var M,wt,G,vt,bt={},Mt,Bt,Wt,pt;;){if(wt=D[D.length-1],this.defaultActions[wt]?G=this.defaultActions[wt]:((M===null||typeof M>"u")&&(M=dt()),G=st[wt]&&st[wt][M]),typeof G>"u"||!G.length||!G[0]){var ut="";pt=[];for(Mt in st[wt])this.terminals_[Mt]&&Mt>H&&pt.push("'"+this.terminals_[Mt]+"'");Z.showPosition?ut="Parse error on line "+(ft+1)+`:
`+Z.showPosition()+`
Expecting `+pt.join(", ")+", got '"+(this.terminals_[M]||M)+"'":ut="Parse error on line "+(ft+1)+": Unexpected "+(M==it?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(ut,{text:Z.match,token:this.terminals_[M]||M,line:Z.yylineno,loc:at,expected:pt})}if(G[0]instanceof Array&&G.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wt+", token: "+M);switch(G[0]){case 1:D.push(M),z.push(Z.yytext),q.push(Z.yylloc),D.push(G[1]),M=null,Q=Z.yyleng,$=Z.yytext,ft=Z.yylineno,at=Z.yylloc;break;case 2:if(Bt=this.productions_[G[1]][1],bt.$=z[z.length-Bt],bt._$={first_line:q[q.length-(Bt||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(Bt||1)].first_column,last_column:q[q.length-1].last_column},W&&(bt._$.range=[q[q.length-(Bt||1)].range[0],q[q.length-1].range[1]]),vt=this.performAction.apply(bt,[$,Q,ft,tt.yy,G[1],z,q].concat(nt)),typeof vt<"u")return vt;Bt&&(D=D.slice(0,-1*Bt*2),z=z.slice(0,-1*Bt),q=q.slice(0,-1*Bt)),D.push(this.productions_[G[1]][0]),z.push(bt.$),q.push(bt._$),Wt=st[D[D.length-2]][D[D.length-1]],D.push(Wt);break;case 3:return!0}}return!0}},m=function(){var j={EOF:1,parseError:function(v,D){if(this.yy.parser)this.yy.parser.parseError(v,D);else throw new Error(v)},setInput:function(N,v){return this.yy=v||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var v=N.match(/(?:\r\n?|\n).*/g);return v?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var v=N.length,D=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-v),this.offset-=v;var B=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),D.length-1&&(this.yylineno-=D.length-1);var z=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:D?(D.length===B.length?this.yylloc.first_column:0)+B[B.length-D.length].length-D[0].length:this.yylloc.first_column-v},this.options.ranges&&(this.yylloc.range=[z[0],z[0]+this.yyleng-v]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),v=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+v+"^"},test_match:function(N,v){var D,B,z;if(this.options.backtrack_lexer&&(z={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(z.yylloc.range=this.yylloc.range.slice(0))),B=N[0].match(/(?:\r\n?|\n).*/g),B&&(this.yylineno+=B.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:B?B[B.length-1].length-B[B.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],D=this.performAction.call(this,this.yy,this,v,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),D)return D;if(this._backtrack){for(var q in z)this[q]=z[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,v,D,B;this._more||(this.yytext="",this.match="");for(var z=this._currentRules(),q=0;q<z.length;q++)if(D=this._input.match(this.rules[z[q]]),D&&(!v||D[0].length>v[0].length)){if(v=D,B=q,this.options.backtrack_lexer){if(N=this.test_match(D,z[q]),N!==!1)return N;if(this._backtrack){v=!1;continue}else return!1}else if(!this.options.flex)break}return v?(N=this.test_match(v,z[B]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var v=this.next();return v||this.lex()},begin:function(v){this.conditionStack.push(v)},popState:function(){var v=this.conditionStack.length-1;return v>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(v){return v=this.conditionStack.length-1-Math.abs(v||0),v>=0?this.conditionStack[v]:"INITIAL"},pushState:function(v){this.begin(v)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(v,D,B,z){switch(B){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return j}();w.lexer=m;function P(){this.yy={}}return P.prototype=w,w.Parser=P,new P}();yo.parser=yo;const Xk=yo;function Nc(t){return t.type==="bar"}function k0(t){return t.type==="band"}function vs(t){return t.type==="linear"}class _0{constructor(e){this.parentGroup=e}getMaxDimension(e,i){if(!this.parentGroup)return{width:e.reduce((n,a)=>Math.max(a.length,n),0)*i,height:i};const r={width:0,height:0},s=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",i);for(const n of e){const a=z4(s,1,n),o=a?a.width:n.length*i,l=a?a.height:i;r.width=Math.max(r.width,o),r.height=Math.max(r.height,l)}return s.remove(),r}}const Oc=.7,Pc=.2;class T0{constructor(e,i,r,s){this.axisConfig=e,this.title=i,this.textDimensionCalculator=r,this.axisThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){Oc*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(Oc*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let i=e.height;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=Pc*e.width;this.outerPadding=Math.min(r.width/2,s);const n=r.height+this.axisConfig.labelPadding*2;this.labelTextHeight=r.height,n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-i}calculateSpaceIfDrawnVertical(e){let i=e.width;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=Pc*e.height;this.outerPadding=Math.min(r.height/2,s);const n=r.width+this.axisConfig.labelPadding*2;n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width-i,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${i},${this.boundingRect.y} L ${i},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(i),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const i=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${i},${this.getScaleValue(r)} L ${i-this.axisConfig.tickLength},${this.getScaleValue(r)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i} L ${this.getScaleValue(r)},${i+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(r)},${i+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}}class $k extends T0{constructor(e,i,r,s,n){super(e,s,n,i),this.categories=r,this.scale=Hl().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=Hl().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),A.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)||this.getRange()[0]}}class Kk extends T0{constructor(e,i,r,s,n){super(e,s,n,i),this.domain=r,this.scale=Ls().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=Ls().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}}function Mc(t,e,i,r){const s=new _0(r);return k0(t)?new $k(e,i,t.categories,t.title,s):new Kk(e,i,[t.min,t.max],t.title,s)}class Qk{constructor(e,i,r,s){this.textDimensionCalculator=e,this.chartConfig=i,this.chartData=r,this.chartThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const i=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(i.width,e.width),s=i.height+2*this.chartConfig.titlePadding;return i.width<=r&&i.height<=s&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=s,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}}function Zk(t,e,i,r){const s=new _0(r);return new Qk(s,t,e,i)}class Jk{constructor(e,i,r,s,n){this.plotData=e,this.xAxis=i,this.yAxis=r,this.orientation=s,this.plotIndex=n}getDrawableElement(){const e=this.plotData.data.map(r=>[this.xAxis.getScaleValue(r[0]),this.yAxis.getScaleValue(r[1])]);let i;return this.orientation==="horizontal"?i=fr().y(r=>r[0]).x(r=>r[1])(e):i=fr().x(r=>r[0]).y(r=>r[1])(e),i?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:i,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}class t6{constructor(e,i,r,s,n,a){this.barData=e,this.boundingRect=i,this.xAxis=r,this.yAxis=s,this.orientation=n,this.plotIndex=a}getDrawableElement(){const e=this.barData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]),i=.05,r=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-i),s=r/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:this.boundingRect.x,y:n[0]-s,height:r,width:n[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:n[0]-s,y:n[1],width:r,height:this.boundingRect.y+this.boundingRect.height-n[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}}class e6{constructor(e,i,r){this.chartConfig=e,this.chartData=i,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,i){this.xAxis=e,this.yAxis=i}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const e=[];for(const[i,r]of this.chartData.plots.entries())switch(r.type){case"line":{const s=new Jk(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break;case"bar":{const s=new t6(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break}return e}}function i6(t,e,i){return new e6(t,e,i)}class r6{constructor(e,i,r,s){this.chartConfig=e,this.chartData=i,this.componentStore={title:Zk(e,i,r,s),plot:i6(e,i,r),xAxis:Mc(i.xAxis,e.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},s),yAxis:Mc(i.yAxis,e.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},s)}}calculateVerticalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:n,height:a});e-=o.width,i-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),s=o.height,i-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:i}),i-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:i}),r=o.width,e-=o.width,e>0&&(n+=e,e=0),i>0&&(a+=i,i=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:s}),this.componentStore.xAxis.setRange([r,r+n]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:s+a}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(l=>Nc(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizonatalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:a,height:o});e-=l.width,i-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),r=l.height,i-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:e,height:i}),e-=l.width,s=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:e,height:i}),i-=l.height,n=r+l.height,e>0&&(a+=e,e=0),i>0&&(o+=i,i=0),this.componentStore.plot.calculateSpace({width:a,height:o}),this.componentStore.plot.setBoundingBoxXY({x:s,y:n}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:s,y:r}),this.componentStore.xAxis.setRange([n,n+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(h=>Nc(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizonatalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const i of Object.values(this.componentStore))e.push(...i.getDrawableElements());return e}}class s6{static build(e,i,r,s){return new r6(e,i,r,s).getDrawableElement()}}let qs=0,C0,zs=v0(),Ws=E0(),Ht=S0(),mo=Ws.plotColorPalette.split(",").map(t=>t.trim()),_a=!1,_l=!1;function E0(){const t=zo(),e=Ae();return tn(t.xyChart,e.themeVariables.xyChart)}function v0(){const t=Ae();return tn(ae.xyChart,t.xyChart)}function S0(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function Tl(t){const e=Ae();return ve(t.trim(),e)}function n6(t){C0=t}function a6(t){t==="horizontal"?zs.chartOrientation="horizontal":zs.chartOrientation="vertical"}function o6(t){Ht.xAxis.title=Tl(t.text)}function w0(t,e){Ht.xAxis={type:"linear",title:Ht.xAxis.title,min:t,max:e},_a=!0}function l6(t){Ht.xAxis={type:"band",title:Ht.xAxis.title,categories:t.map(e=>Tl(e.text))},_a=!0}function c6(t){Ht.yAxis.title=Tl(t.text)}function h6(t,e){Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:t,max:e},_l=!0}function u6(t){const e=Math.min(...t),i=Math.max(...t),r=vs(Ht.yAxis)?Ht.yAxis.min:1/0,s=vs(Ht.yAxis)?Ht.yAxis.max:-1/0;Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:Math.min(r,e),max:Math.max(s,i)}}function A0(t){let e=[];if(t.length===0)return e;if(!_a){const i=vs(Ht.xAxis)?Ht.xAxis.min:1/0,r=vs(Ht.xAxis)?Ht.xAxis.max:-1/0;w0(Math.min(i,1),Math.max(r,t.length))}if(_l||u6(t),k0(Ht.xAxis)&&(e=Ht.xAxis.categories.map((i,r)=>[i,t[r]])),vs(Ht.xAxis)){const i=Ht.xAxis.min,r=Ht.xAxis.max,s=(r-i+1)/t.length,n=[];for(let a=i;a<=r;a+=s)n.push(`${a}`);e=n.map((a,o)=>[a,t[o]])}return e}function L0(t){return mo[t===0?0:t%mo.length]}function d6(t,e){const i=A0(e);Ht.plots.push({type:"line",strokeFill:L0(qs),strokeWidth:2,data:i}),qs++}function f6(t,e){const i=A0(e);Ht.plots.push({type:"bar",fill:L0(qs),data:i}),qs++}function p6(){if(Ht.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Ht.title=Ge(),s6.build(zs,Ht,Ws,C0)}function g6(){return Ws}function y6(){return zs}const m6=function(){We(),qs=0,zs=v0(),Ht=S0(),Ws=E0(),mo=Ws.plotColorPalette.split(",").map(t=>t.trim()),_a=!1,_l=!1},x6={getDrawableElem:p6,clear:m6,setAccTitle:Ne,getAccTitle:Ye,setDiagramTitle:ei,getDiagramTitle:Ge,getAccDescription:He,setAccDescription:Ue,setOrientation:a6,setXAxisTitle:o6,setXAxisRangeData:w0,setXAxisBand:l6,setYAxisTitle:c6,setYAxisRangeData:h6,setLineData:d6,setBarData:f6,setTmpSVGG:n6,getChartThemeConfig:g6,getChartConfig:y6},b6=(t,e,i,r)=>{const s=r.db,n=s.getChartThemeConfig(),a=s.getChartConfig();function o(_){return _==="top"?"text-before-edge":"middle"}function l(_){return _==="left"?"start":_==="right"?"end":"middle"}function h(_){return`translate(${_.x}, ${_.y}) rotate(${_.rotation||0})`}A.debug(`Rendering xychart chart
`+t);const u=fa(e),f=u.append("g").attr("class","main"),d=f.append("rect").attr("width",a.width).attr("height",a.height).attr("class","background");ze(u,a.height,a.width,!0),u.attr("viewBox",`0 0 ${a.width} ${a.height}`),d.attr("fill",n.backgroundColor),s.setTmpSVGG(u.append("g").attr("class","mermaid-tmp-group"));const p=s.getDrawableElem(),y={};function x(_){let C=f,k="";for(const[R]of _.entries()){let F=f;R>0&&y[k]&&(F=y[k]),k+=_[R],C=y[k],C||(C=y[k]=F.append("g").attr("class",_[R]))}return C}for(const _ of p){if(_.data.length===0)continue;const C=x(_.groupTexts);switch(_.type){case"rect":C.selectAll("rect").data(_.data).enter().append("rect").attr("x",k=>k.x).attr("y",k=>k.y).attr("width",k=>k.width).attr("height",k=>k.height).attr("fill",k=>k.fill).attr("stroke",k=>k.strokeFill).attr("stroke-width",k=>k.strokeWidth);break;case"text":C.selectAll("text").data(_.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",k=>k.fill).attr("font-size",k=>k.fontSize).attr("dominant-baseline",k=>o(k.verticalPos)).attr("text-anchor",k=>l(k.horizontalPos)).attr("transform",k=>h(k)).text(k=>k.text);break;case"path":C.selectAll("path").data(_.data).enter().append("path").attr("d",k=>k.path).attr("fill",k=>k.fill?k.fill:"none").attr("stroke",k=>k.strokeFill).attr("stroke-width",k=>k.strokeWidth);break}}},k6={draw:b6},_6={parser:Xk,db:x6,renderer:k6},T6=Object.freeze(Object.defineProperty({__proto__:null,diagram:_6},Symbol.toStringTag,{value:"Module"}));var xo=function(){var t=function(Q,H,it,nt){for(it=it||{},nt=Q.length;nt--;it[Q[nt]]=H);return it},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],a=[1,18],o=[2,7],l=[1,22],h=[1,23],u=[1,24],f=[1,25],d=[1,26],p=[1,27],y=[1,20],x=[1,28],_=[1,29],C=[62,63],k=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],R=[1,47],F=[1,48],L=[1,49],E=[1,50],I=[1,51],S=[1,52],b=[1,53],T=[53,54],g=[1,64],w=[1,60],m=[1,61],P=[1,62],j=[1,63],N=[1,65],v=[1,69],D=[1,70],B=[1,67],z=[1,68],q=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],st={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:function(H,it,nt,Z,tt,O,at){var W=O.length-1;switch(tt){case 4:this.$=O[W].trim(),Z.setAccTitle(this.$);break;case 5:case 6:this.$=O[W].trim(),Z.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:Z.addRequirement(O[W-3],O[W-4]);break;case 14:Z.setNewReqId(O[W-2]);break;case 15:Z.setNewReqText(O[W-2]);break;case 16:Z.setNewReqRisk(O[W-2]);break;case 17:Z.setNewReqVerifyMethod(O[W-2]);break;case 20:this.$=Z.RequirementType.REQUIREMENT;break;case 21:this.$=Z.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=Z.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=Z.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=Z.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=Z.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=Z.RiskLevel.LOW_RISK;break;case 27:this.$=Z.RiskLevel.MED_RISK;break;case 28:this.$=Z.RiskLevel.HIGH_RISK;break;case 29:this.$=Z.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=Z.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=Z.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=Z.VerifyType.VERIFY_TEST;break;case 33:Z.addElement(O[W-3]);break;case 34:Z.setNewElementType(O[W-2]);break;case 35:Z.setNewElementDocRef(O[W-2]);break;case 38:Z.addRelationship(O[W-2],O[W],O[W-4]);break;case 39:Z.addRelationship(O[W-2],O[W-4],O[W]);break;case 40:this.$=Z.Relationships.CONTAINS;break;case 41:this.$=Z.Relationships.COPIES;break;case 42:this.$=Z.Relationships.DERIVES;break;case 43:this.$=Z.Relationships.SATISFIES;break;case 44:this.$=Z.Relationships.VERIFIES;break;case 45:this.$=Z.Relationships.REFINES;break;case 46:this.$=Z.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:i,11:r,13:s},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:i,11:r,13:s},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(n,[2,6]),{3:12,4:2,6:e,9:i,11:r,13:s},{1:[2,2]},{4:17,5:a,7:13,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:x,63:_},t(n,[2,4]),t(n,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:a,7:31,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:x,63:_},{4:17,5:a,7:32,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:x,63:_},{4:17,5:a,7:33,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:x,63:_},{4:17,5:a,7:34,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:x,63:_},{4:17,5:a,7:35,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:x,63:_},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},t(C,[2,20]),t(C,[2,21]),t(C,[2,22]),t(C,[2,23]),t(C,[2,24]),t(C,[2,25]),t(k,[2,49]),t(k,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:R,56:F,57:L,58:E,59:I,60:S,61:b},{52:54,55:R,56:F,57:L,58:E,59:I,60:S,61:b},{5:[1,55]},{5:[1,56]},{53:[1,57]},t(T,[2,40]),t(T,[2,41]),t(T,[2,42]),t(T,[2,43]),t(T,[2,44]),t(T,[2,45]),t(T,[2,46]),{54:[1,58]},{5:g,20:59,21:w,24:m,26:P,28:j,30:N},{5:v,30:D,46:66,47:B,49:z},{23:71,62:x,63:_},{23:72,62:x,63:_},t(q,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:g,20:77,21:w,24:m,26:P,28:j,30:N},t(q,[2,19]),t(q,[2,33]),{22:[1,78]},{22:[1,79]},{5:v,30:D,46:80,47:B,49:z},t(q,[2,37]),t(q,[2,38]),t(q,[2,39]),{23:81,62:x,63:_},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},t(q,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},t(q,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:g,20:106,21:w,24:m,26:P,28:j,30:N},{5:g,20:107,21:w,24:m,26:P,28:j,30:N},{5:g,20:108,21:w,24:m,26:P,28:j,30:N},{5:g,20:109,21:w,24:m,26:P,28:j,30:N},{5:v,30:D,46:110,47:B,49:z},{5:v,30:D,46:111,47:B,49:z},t(q,[2,14]),t(q,[2,15]),t(q,[2,16]),t(q,[2,17]),t(q,[2,34]),t(q,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:function(H,it){if(it.recoverable)this.trace(H);else{var nt=new Error(H);throw nt.hash=it,nt}},parse:function(H){var it=this,nt=[0],Z=[],tt=[null],O=[],at=this.table,W="",dt=0,M=0,wt=2,G=1,vt=O.slice.call(arguments,1),bt=Object.create(this.lexer),Mt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Mt.yy[Bt]=this.yy[Bt]);bt.setInput(H,Mt.yy),Mt.yy.lexer=bt,Mt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Mt.yy.parseError=="function"?this.parseError=Mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var Vt;return Vt=Z.pop()||bt.lex()||G,typeof Vt!="number"&&(Vt instanceof Array&&(Z=Vt,Vt=Z.pop()),Vt=it.symbols_[Vt]||Vt),Vt}for(var ot,lt,ht,X,rt={},et,ct,te,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var ue="";Qt=[];for(et in at[lt])this.terminals_[et]&&et>wt&&Qt.push("'"+this.terminals_[et]+"'");bt.showPosition?ue="Parse error on line "+(dt+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":ue="Parse error on line "+(dt+1)+": Unexpected "+(ot==G?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(ue,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),tt.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,M=bt.yyleng,W=bt.yytext,dt=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=tt[tt.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),X=this.performAction.apply(rt,[W,M,dt,Mt.yy,ht[1],tt,O].concat(vt)),typeof X<"u")return X;ct&&(nt=nt.slice(0,-1*ct*2),tt=tt.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),tt.push(rt.$),O.push(rt._$),te=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(te);break;case 3:return!0}}return!0}},$=function(){var Q={EOF:1,parseError:function(it,nt){if(this.yy.parser)this.yy.parser.parseError(it,nt);else throw new Error(it)},setInput:function(H,it){return this.yy=it||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var H=this._input[0];this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H;var it=H.match(/(?:\r\n?|\n).*/g);return it?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},unput:function(H){var it=H.length,nt=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-it),this.offset-=it;var Z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var tt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Z.length?this.yylloc.first_column:0)+Z[Z.length-nt.length].length-nt[0].length:this.yylloc.first_column-it},this.options.ranges&&(this.yylloc.range=[tt[0],tt[0]+this.yyleng-it]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(H){this.unput(this.match.slice(H))},pastInput:function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var H=this.pastInput(),it=new Array(H.length+1).join("-");return H+this.upcomingInput()+`
`+it+"^"},test_match:function(H,it){var nt,Z,tt;if(this.options.backtrack_lexer&&(tt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(tt.yylloc.range=this.yylloc.range.slice(0))),Z=H[0].match(/(?:\r\n?|\n).*/g),Z&&(this.yylineno+=Z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Z?Z[Z.length-1].length-Z[Z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],nt=this.performAction.call(this,this.yy,this,it,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in tt)this[O]=tt[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var H,it,nt,Z;this._more||(this.yytext="",this.match="");for(var tt=this._currentRules(),O=0;O<tt.length;O++)if(nt=this._input.match(this.rules[tt[O]]),nt&&(!it||nt[0].length>it[0].length)){if(it=nt,Z=O,this.options.backtrack_lexer){if(H=this.test_match(nt,tt[O]),H!==!1)return H;if(this._backtrack){it=!1;continue}else return!1}else if(!this.options.flex)break}return it?(H=this.test_match(it,tt[Z]),H!==!1?H:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var it=this.next();return it||this.lex()},begin:function(it){this.conditionStack.push(it)},popState:function(){var it=this.conditionStack.length-1;return it>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(it){return it=this.conditionStack.length-1-Math.abs(it||0),it>=0?this.conditionStack[it]:"INITIAL"},pushState:function(it){this.begin(it)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(it,nt,Z,tt){switch(Z){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return nt.yytext=nt.yytext.trim(),62}},rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return Q}();st.lexer=$;function ft(){this.yy={}}return ft.prototype=st,st.Parser=ft,new ft}();xo.parser=xo;const C6=xo;let Cl=[],Ke={},Ss={},dr={},ws={};const E6={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},v6={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},S6={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},w6={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},A6=(t,e)=>(Ss[t]===void 0&&(Ss[t]={name:t,type:e,id:Ke.id,text:Ke.text,risk:Ke.risk,verifyMethod:Ke.verifyMethod}),Ke={},Ss[t]),L6=()=>Ss,B6=t=>{Ke!==void 0&&(Ke.id=t)},I6=t=>{Ke!==void 0&&(Ke.text=t)},F6=t=>{Ke!==void 0&&(Ke.risk=t)},R6=t=>{Ke!==void 0&&(Ke.verifyMethod=t)},D6=t=>(ws[t]===void 0&&(ws[t]={name:t,type:dr.type,docRef:dr.docRef},A.info("Added new requirement: ",t)),dr={},ws[t]),N6=()=>ws,O6=t=>{dr!==void 0&&(dr.type=t)},P6=t=>{dr!==void 0&&(dr.docRef=t)},M6=(t,e,i)=>{Cl.push({type:t,src:e,dst:i})},V6=()=>Cl,q6=()=>{Cl=[],Ke={},Ss={},dr={},ws={},We()},z6={RequirementType:E6,RiskLevel:v6,VerifyType:S6,Relationships:w6,getConfig:()=>Y().req,addRequirement:A6,getRequirements:L6,setNewReqId:B6,setNewReqText:I6,setNewReqRisk:F6,setNewReqVerifyMethod:R6,setAccTitle:Ne,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addElement:D6,getElements:N6,setNewElementType:O6,setNewElementDocRef:P6,addRelationship:M6,getRelationships:V6,clear:q6},W6=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,Y6=W6,bo={CONTAINS:"contains",ARROW:"arrow"},U6=(t,e)=>{let i=t.append("defs").append("marker").attr("id",bo.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");i.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),i.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),i.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",bo.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},B0={ReqMarkers:bo,insertLineEndings:U6};let re={},Vc=0;const I0=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",re.rect_min_width+"px").attr("height",re.rect_min_height+"px"),F0=(t,e,i)=>{let r=re.rect_min_width/2,s=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",re.rect_padding).attr("dominant-baseline","hanging"),n=0;i.forEach(h=>{n==0?s.append("tspan").attr("text-anchor","middle").attr("x",re.rect_min_width/2).attr("dy",0).text(h):s.append("tspan").attr("text-anchor","middle").attr("x",re.rect_min_width/2).attr("dy",re.line_height*.75).text(h),n++});let a=1.5*re.rect_padding,o=n*re.line_height*.75,l=a+o;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",re.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:s,y:l}},R0=(t,e,i,r)=>{let s=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",re.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),n=0;const a=30;let o=[];return i.forEach(l=>{let h=l.length;for(;h>a&&n<3;){let u=l.substring(0,a);l=l.substring(a,l.length),h=l.length,o[o.length]=u,n++}if(n==3){let u=o[o.length-1];o[o.length-1]=u.substring(0,u.length-4)+"..."}else o[o.length]=l;n=0}),o.forEach(l=>{s.append("tspan").attr("x",re.rect_padding).attr("dy",re.line_height).text(l)}),s},H6=(t,e,i,r)=>{const s=e.node().getTotalLength(),n=e.node().getPointAtLength(s*.5),a="rel"+Vc;Vc++;const l=t.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",n.x).attr("y",n.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",n.x-l.width/2).attr("y",n.y-l.height/2).attr("width",l.width).attr("height",l.height).attr("fill","white").attr("fill-opacity","85%")},G6=function(t,e,i,r,s){const n=i.edge(ns(e.src),ns(e.dst)),a=fr().x(function(l){return l.x}).y(function(l){return l.y}),o=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",a(n.points)).attr("fill","none");e.type==s.db.Relationships.CONTAINS?o.attr("marker-start","url("+mt.getUrl(re.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+mt.getUrl(re.arrowMarkerAbsolute)+"#"+B0.ReqMarkers.ARROW+"_line_ending)")),H6(t,o,re,`<<${e.type}>>`)},j6=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];r=ns(r),A.info("Added new requirement: ",r);const n=i.append("g").attr("id",r),a="req-"+r,o=I0(n,a);let l=F0(n,r+"_title",[`<<${s.type}>>`,`${s.name}`]);R0(n,r+"_body",[`Id: ${s.id}`,`Text: ${s.text}`,`Risk: ${s.risk}`,`Verification: ${s.verifyMethod}`],l.y);const h=o.node().getBBox();e.setNode(r,{width:h.width,height:h.height,shape:"rect",id:r})})},X6=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];const n=ns(r),a=i.append("g").attr("id",n),o="element-"+n,l=I0(a,o);let h=F0(a,o+"_title",["<<Element>>",`${r}`]);R0(a,o+"_body",[`Type: ${s.type||"Not Specified"}`,`Doc Ref: ${s.docRef||"None"}`],h.y);const u=l.node().getBBox();e.setNode(n,{width:u.width,height:u.height,shape:"rect",id:n})})},$6=(t,e)=>(t.forEach(function(i){let r=ns(i.src),s=ns(i.dst);e.setEdge(r,s,{relationship:i})}),t),K6=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&(t.select("#"+i),t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )"))})},ns=t=>t.replace(/\s/g,"").replace(/\./g,"_"),Q6=(t,e,i,r)=>{re=Y().requirement;const s=re.securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);B0.insertLineEndings(o,re);const l=new Ji({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:re.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=r.db.getRequirements(),u=r.db.getElements(),f=r.db.getRelationships();j6(h,l,o),X6(u,l,o),$6(f,l),Qs(l),K6(o,l),f.forEach(function(_){G6(o,_,l,e,r)});const d=re.rect_padding,p=o.node().getBBox(),y=p.width+d*2,x=p.height+d*2;ze(o,x,y,re.useMaxWidth),o.attr("viewBox",`${p.x-d} ${p.y-d} ${y} ${x}`)},Z6={draw:Q6},J6={parser:C6,db:z6,renderer:Z6,styles:Y6},t_=Object.freeze(Object.defineProperty({__proto__:null,diagram:J6},Symbol.toStringTag,{value:"Module"}));var ko=function(){var t=function(Z,tt,O,at){for(O=O||{},at=Z.length;at--;O[Z[at]]=tt);return O},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,13],l=[1,14],h=[1,16],u=[1,17],f=[1,18],d=[1,24],p=[1,25],y=[1,26],x=[1,27],_=[1,28],C=[1,29],k=[1,30],R=[1,31],F=[1,32],L=[1,33],E=[1,34],I=[1,35],S=[1,36],b=[1,37],T=[1,38],g=[1,39],w=[1,41],m=[1,42],P=[1,43],j=[1,44],N=[1,45],v=[1,46],D=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],B=[4,5,16,50,52,53],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],q=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],st=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],$=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],ft=[68,69,70],Q=[1,120],H={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,DOTTED_ARROW:74,SOLID_CROSS:75,DOTTED_CROSS:76,SOLID_POINT:77,DOTTED_POINT:78,TXT:79,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"DOTTED_ARROW",75:"SOLID_CROSS",76:"DOTTED_CROSS",77:"SOLID_POINT",78:"DOTTED_POINT",79:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:function(tt,O,at,W,dt,M,wt){var G=M.length-1;switch(dt){case 3:return W.apply(M[G]),M[G];case 4:case 9:this.$=[];break;case 5:case 10:M[G-1].push(M[G]),this.$=M[G-1];break;case 6:case 7:case 11:case 12:this.$=M[G];break;case 8:case 13:this.$=[];break;case 15:M[G].type="createParticipant",this.$=M[G];break;case 16:M[G-1].unshift({type:"boxStart",boxData:W.parseBoxData(M[G-2])}),M[G-1].push({type:"boxEnd",boxText:M[G-2]}),this.$=M[G-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(M[G-2]),sequenceIndexStep:Number(M[G-1]),sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(M[G-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:W.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:M[G-1]};break;case 23:this.$={type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:M[G-1]};break;case 29:W.setDiagramTitle(M[G].substring(6)),this.$=M[G].substring(6);break;case 30:W.setDiagramTitle(M[G].substring(7)),this.$=M[G].substring(7);break;case 31:this.$=M[G].trim(),W.setAccTitle(this.$);break;case 32:case 33:this.$=M[G].trim(),W.setAccDescription(this.$);break;case 34:M[G-1].unshift({type:"loopStart",loopText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.LOOP_START}),M[G-1].push({type:"loopEnd",loopText:M[G-2],signalType:W.LINETYPE.LOOP_END}),this.$=M[G-1];break;case 35:M[G-1].unshift({type:"rectStart",color:W.parseMessage(M[G-2]),signalType:W.LINETYPE.RECT_START}),M[G-1].push({type:"rectEnd",color:W.parseMessage(M[G-2]),signalType:W.LINETYPE.RECT_END}),this.$=M[G-1];break;case 36:M[G-1].unshift({type:"optStart",optText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.OPT_START}),M[G-1].push({type:"optEnd",optText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.OPT_END}),this.$=M[G-1];break;case 37:M[G-1].unshift({type:"altStart",altText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.ALT_START}),M[G-1].push({type:"altEnd",signalType:W.LINETYPE.ALT_END}),this.$=M[G-1];break;case 38:M[G-1].unshift({type:"parStart",parText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.PAR_START}),M[G-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=M[G-1];break;case 39:M[G-1].unshift({type:"parStart",parText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.PAR_OVER_START}),M[G-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=M[G-1];break;case 40:M[G-1].unshift({type:"criticalStart",criticalText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.CRITICAL_START}),M[G-1].push({type:"criticalEnd",signalType:W.LINETYPE.CRITICAL_END}),this.$=M[G-1];break;case 41:M[G-1].unshift({type:"breakStart",breakText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.BREAK_START}),M[G-1].push({type:"breakEnd",optText:W.parseMessage(M[G-2]),signalType:W.LINETYPE.BREAK_END}),this.$=M[G-1];break;case 43:this.$=M[G-3].concat([{type:"option",optionText:W.parseMessage(M[G-1]),signalType:W.LINETYPE.CRITICAL_OPTION},M[G]]);break;case 45:this.$=M[G-3].concat([{type:"and",parText:W.parseMessage(M[G-1]),signalType:W.LINETYPE.PAR_AND},M[G]]);break;case 47:this.$=M[G-3].concat([{type:"else",altText:W.parseMessage(M[G-1]),signalType:W.LINETYPE.ALT_ELSE},M[G]]);break;case 48:M[G-3].draw="participant",M[G-3].type="addParticipant",M[G-3].description=W.parseMessage(M[G-1]),this.$=M[G-3];break;case 49:M[G-1].draw="participant",M[G-1].type="addParticipant",this.$=M[G-1];break;case 50:M[G-3].draw="actor",M[G-3].type="addParticipant",M[G-3].description=W.parseMessage(M[G-1]),this.$=M[G-3];break;case 51:M[G-1].draw="actor",M[G-1].type="addParticipant",this.$=M[G-1];break;case 52:M[G-1].type="destroyParticipant",this.$=M[G-1];break;case 53:this.$=[M[G-1],{type:"addNote",placement:M[G-2],actor:M[G-1].actor,text:M[G]}];break;case 54:M[G-2]=[].concat(M[G-1],M[G-1]).slice(0,2),M[G-2][0]=M[G-2][0].actor,M[G-2][1]=M[G-2][1].actor,this.$=[M[G-1],{type:"addNote",placement:W.PLACEMENT.OVER,actor:M[G-2].slice(0,2),text:M[G]}];break;case 55:this.$=[M[G-1],{type:"addLinks",actor:M[G-1].actor,text:M[G]}];break;case 56:this.$=[M[G-1],{type:"addALink",actor:M[G-1].actor,text:M[G]}];break;case 57:this.$=[M[G-1],{type:"addProperties",actor:M[G-1].actor,text:M[G]}];break;case 58:this.$=[M[G-1],{type:"addDetails",actor:M[G-1].actor,text:M[G]}];break;case 61:this.$=[M[G-2],M[G]];break;case 62:this.$=M[G];break;case 63:this.$=W.PLACEMENT.LEFTOF;break;case 64:this.$=W.PLACEMENT.RIGHTOF;break;case 65:this.$=[M[G-4],M[G-1],{type:"addMessage",from:M[G-4].actor,to:M[G-1].actor,signalType:M[G-3],msg:M[G],activate:!0},{type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:M[G-1]}];break;case 66:this.$=[M[G-4],M[G-1],{type:"addMessage",from:M[G-4].actor,to:M[G-1].actor,signalType:M[G-3],msg:M[G]},{type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:M[G-4]}];break;case 67:this.$=[M[G-3],M[G-1],{type:"addMessage",from:M[G-3].actor,to:M[G-1].actor,signalType:M[G-2],msg:M[G]}];break;case 68:this.$={type:"addParticipant",actor:M[G]};break;case 69:this.$=W.LINETYPE.SOLID_OPEN;break;case 70:this.$=W.LINETYPE.DOTTED_OPEN;break;case 71:this.$=W.LINETYPE.SOLID;break;case 72:this.$=W.LINETYPE.DOTTED;break;case 73:this.$=W.LINETYPE.SOLID_CROSS;break;case 74:this.$=W.LINETYPE.DOTTED_CROSS;break;case 75:this.$=W.LINETYPE.SOLID_POINT;break;case 76:this.$=W.LINETYPE.DOTTED_POINT;break;case 77:this.$=W.parseMessage(M[G].trim().substring(1));break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},t(D,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},t(D,[2,7]),t(D,[2,8]),t(D,[2,14]),{12:48,50:b,52:T,53:g},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:v},{22:55,70:v},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(D,[2,29]),t(D,[2,30]),{32:[1,61]},{34:[1,62]},t(D,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:v},{22:72,70:v},{22:73,70:v},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82]},{55:83,57:[1,84],65:[1,85],66:[1,86]},{22:87,70:v},{22:88,70:v},{22:89,70:v},{22:90,70:v},t([5,51,64,71,72,73,74,75,76,77,78,79],[2,68]),t(D,[2,6]),t(D,[2,15]),t(B,[2,9],{10:91}),t(D,[2,17]),{5:[1,93],19:[1,92]},{5:[1,94]},t(D,[2,21]),{5:[1,95]},{5:[1,96]},t(D,[2,24]),t(D,[2,25]),t(D,[2,26]),t(D,[2,27]),t(D,[2,28]),t(D,[2,31]),t(D,[2,32]),t(z,s,{7:97}),t(z,s,{7:98}),t(z,s,{7:99}),t(q,s,{40:100,7:101}),t(st,s,{42:102,7:103}),t(st,s,{7:103,42:104}),t($,s,{45:105,7:106}),t(z,s,{7:107}),{5:[1,109],51:[1,108]},{5:[1,111],51:[1,110]},{5:[1,112]},{22:115,68:[1,113],69:[1,114],70:v},t(ft,[2,69]),t(ft,[2,70]),t(ft,[2,71]),t(ft,[2,72]),t(ft,[2,73]),t(ft,[2,74]),t(ft,[2,75]),t(ft,[2,76]),{22:116,70:v},{22:118,58:117,70:v},{70:[2,63]},{70:[2,64]},{56:119,79:Q},{56:121,79:Q},{56:122,79:Q},{56:123,79:Q},{4:[1,126],5:[1,128],11:125,12:127,16:[1,124],50:b,52:T,53:g},{5:[1,129]},t(D,[2,19]),t(D,[2,20]),t(D,[2,22]),t(D,[2,23]),{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,130],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,131],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{16:[1,133]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,49:[1,134],50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{16:[1,135]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,48:[1,136],50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{16:[1,137]},{16:[1,138]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,47:[1,139],50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,140],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:x,35:_,36:C,37:k,38:R,39:F,41:L,43:E,44:I,46:S,50:b,52:T,53:g,54:w,59:m,60:P,61:j,62:N,70:v},{15:[1,141]},t(D,[2,49]),{15:[1,142]},t(D,[2,51]),t(D,[2,52]),{22:143,70:v},{22:144,70:v},{56:145,79:Q},{56:146,79:Q},{56:147,79:Q},{64:[1,148],79:[2,62]},{5:[2,55]},{5:[2,77]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(D,[2,16]),t(B,[2,10]),{12:149,50:b,52:T,53:g},t(B,[2,12]),t(B,[2,13]),t(D,[2,18]),t(D,[2,34]),t(D,[2,35]),t(D,[2,36]),t(D,[2,37]),{15:[1,150]},t(D,[2,38]),{15:[1,151]},t(D,[2,39]),t(D,[2,40]),{15:[1,152]},t(D,[2,41]),{5:[1,153]},{5:[1,154]},{56:155,79:Q},{56:156,79:Q},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:157,70:v},t(B,[2,11]),t(q,s,{7:101,40:158}),t(st,s,{7:103,42:159}),t($,s,{7:106,45:160}),t(D,[2,48]),t(D,[2,50]),{5:[2,65]},{5:[2,66]},{79:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],85:[2,63],86:[2,64],119:[2,55],120:[2,77],121:[2,56],122:[2,57],123:[2,58],145:[2,67],146:[2,53],147:[2,54],155:[2,65],156:[2,66],157:[2,61],158:[2,47],159:[2,45],160:[2,43]},parseError:function(tt,O){if(O.recoverable)this.trace(tt);else{var at=new Error(tt);throw at.hash=O,at}},parse:function(tt){var O=this,at=[0],W=[],dt=[null],M=[],wt=this.table,G="",vt=0,bt=0,Mt=2,Bt=1,Wt=M.slice.call(arguments,1),pt=Object.create(this.lexer),ut={yy:{}};for(var ot in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ot)&&(ut.yy[ot]=this.yy[ot]);pt.setInput(tt,ut.yy),ut.yy.lexer=pt,ut.yy.parser=this,typeof pt.yylloc>"u"&&(pt.yylloc={});var lt=pt.yylloc;M.push(lt);var ht=pt.options&&pt.options.ranges;typeof ut.yy.parseError=="function"?this.parseError=ut.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function X(){var de;return de=W.pop()||pt.lex()||Bt,typeof de!="number"&&(de instanceof Array&&(W=de,de=W.pop()),de=O.symbols_[de]||de),de}for(var rt,et,ct,te,Qt={},ue,Vt,jt,zt;;){if(et=at[at.length-1],this.defaultActions[et]?ct=this.defaultActions[et]:((rt===null||typeof rt>"u")&&(rt=X()),ct=wt[et]&&wt[et][rt]),typeof ct>"u"||!ct.length||!ct[0]){var _e="";zt=[];for(ue in wt[et])this.terminals_[ue]&&ue>Mt&&zt.push("'"+this.terminals_[ue]+"'");pt.showPosition?_e="Parse error on line "+(vt+1)+`:
`+pt.showPosition()+`
Expecting `+zt.join(", ")+", got '"+(this.terminals_[rt]||rt)+"'":_e="Parse error on line "+(vt+1)+": Unexpected "+(rt==Bt?"end of input":"'"+(this.terminals_[rt]||rt)+"'"),this.parseError(_e,{text:pt.match,token:this.terminals_[rt]||rt,line:pt.yylineno,loc:lt,expected:zt})}if(ct[0]instanceof Array&&ct.length>1)throw new Error("Parse Error: multiple actions possible at state: "+et+", token: "+rt);switch(ct[0]){case 1:at.push(rt),dt.push(pt.yytext),M.push(pt.yylloc),at.push(ct[1]),rt=null,bt=pt.yyleng,G=pt.yytext,vt=pt.yylineno,lt=pt.yylloc;break;case 2:if(Vt=this.productions_[ct[1]][1],Qt.$=dt[dt.length-Vt],Qt._$={first_line:M[M.length-(Vt||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(Vt||1)].first_column,last_column:M[M.length-1].last_column},ht&&(Qt._$.range=[M[M.length-(Vt||1)].range[0],M[M.length-1].range[1]]),te=this.performAction.apply(Qt,[G,bt,vt,ut.yy,ct[1],dt,M].concat(Wt)),typeof te<"u")return te;Vt&&(at=at.slice(0,-1*Vt*2),dt=dt.slice(0,-1*Vt),M=M.slice(0,-1*Vt)),at.push(this.productions_[ct[1]][0]),dt.push(Qt.$),M.push(Qt._$),jt=wt[at[at.length-2]][at[at.length-1]],at.push(jt);break;case 3:return!0}}return!0}},it=function(){var Z={EOF:1,parseError:function(O,at){if(this.yy.parser)this.yy.parser.parseError(O,at);else throw new Error(O)},setInput:function(tt,O){return this.yy=O||this.yy||{},this._input=tt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var tt=this._input[0];this.yytext+=tt,this.yyleng++,this.offset++,this.match+=tt,this.matched+=tt;var O=tt.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),tt},unput:function(tt){var O=tt.length,at=tt.split(/(?:\r\n?|\n)/g);this._input=tt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var W=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),at.length-1&&(this.yylineno-=at.length-1);var dt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:at?(at.length===W.length?this.yylloc.first_column:0)+W[W.length-at.length].length-at[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[dt[0],dt[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(tt){this.unput(this.match.slice(tt))},pastInput:function(){var tt=this.matched.substr(0,this.matched.length-this.match.length);return(tt.length>20?"...":"")+tt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var tt=this.match;return tt.length<20&&(tt+=this._input.substr(0,20-tt.length)),(tt.substr(0,20)+(tt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var tt=this.pastInput(),O=new Array(tt.length+1).join("-");return tt+this.upcomingInput()+`
`+O+"^"},test_match:function(tt,O){var at,W,dt;if(this.options.backtrack_lexer&&(dt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(dt.yylloc.range=this.yylloc.range.slice(0))),W=tt[0].match(/(?:\r\n?|\n).*/g),W&&(this.yylineno+=W.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-W[W.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+tt[0].length},this.yytext+=tt[0],this.match+=tt[0],this.matches=tt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(tt[0].length),this.matched+=tt[0],at=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),at)return at;if(this._backtrack){for(var M in dt)this[M]=dt[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var tt,O,at,W;this._more||(this.yytext="",this.match="");for(var dt=this._currentRules(),M=0;M<dt.length;M++)if(at=this._input.match(this.rules[dt[M]]),at&&(!O||at[0].length>O[0].length)){if(O=at,W=M,this.options.backtrack_lexer){if(tt=this.test_match(at,dt[M]),tt!==!1)return tt;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(tt=this.test_match(O,dt[W]),tt!==!1?tt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var O=this.next();return O||this.lex()},begin:function(O){this.conditionStack.push(O)},popState:function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},pushState:function(O){this.begin(O)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(O,at,W,dt){switch(W){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return at.yytext=at.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return at.yytext=at.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 71;case 56:return 72;case 57:return 75;case 58:return 76;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 68;case 63:return 69;case 64:return 5;case 65:return"INVALID"}},rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],inclusive:!0}}};return Z}();H.lexer=it;function nt(){this.yy={}}return nt.prototype=H,H.Parser=nt,new nt}();ko.parser=ko;const e_=ko;class i_{constructor(e){this.init=e,this.records=this.init()}reset(){this.records=this.init()}}const _t=new i_(()=>({prevActor:void 0,actors:{},createdActors:{},destroyedActors:{},boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),r_=function(t){_t.records.boxes.push({name:t.text,wrap:t.wrap===void 0&&Lr()||!!t.wrap,fill:t.color,actorKeys:[]}),_t.records.currentBox=_t.records.boxes.slice(-1)[0]},_o=function(t,e,i,r){let s=_t.records.currentBox;const n=_t.records.actors[t];if(n){if(_t.records.currentBox&&n.box&&_t.records.currentBox!==n.box)throw new Error("A same participant should only be defined in one Box: "+n.name+" can't be in '"+n.box.name+"' and in '"+_t.records.currentBox.name+"' at the same time.");if(s=n.box?n.box:_t.records.currentBox,n.box=s,n&&e===n.name&&i==null)return}(i==null||i.text==null)&&(i={text:e,wrap:null,type:r}),(r==null||i.text==null)&&(i={text:e,wrap:null,type:r}),_t.records.actors[t]={box:s,name:e,description:i.text,wrap:i.wrap===void 0&&Lr()||!!i.wrap,prevActor:_t.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},_t.records.prevActor&&_t.records.actors[_t.records.prevActor]&&(_t.records.actors[_t.records.prevActor].nextActor=t),_t.records.currentBox&&_t.records.currentBox.actorKeys.push(t),_t.records.prevActor=t},s_=t=>{let e,i=0;for(e=0;e<_t.records.messages.length;e++)_t.records.messages[e].type===Ys.ACTIVE_START&&_t.records.messages[e].from.actor===t&&i++,_t.records.messages[e].type===Ys.ACTIVE_END&&_t.records.messages[e].from.actor===t&&i--;return i},n_=function(t,e,i,r){_t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Lr()||!!i.wrap,answer:r})},ne=function(t,e,i={text:void 0,wrap:void 0},r,s=!1){if(r===Ys.ACTIVE_END&&s_(t.actor)<1){let a=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw a.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return _t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Lr()||!!i.wrap,type:r,activate:s}),!0},a_=function(){return _t.records.boxes.length>0},o_=function(){return _t.records.boxes.some(t=>t.name)},l_=function(){return _t.records.messages},c_=function(){return _t.records.boxes},h_=function(){return _t.records.actors},u_=function(){return _t.records.createdActors},d_=function(){return _t.records.destroyedActors},on=function(t){return _t.records.actors[t]},f_=function(){return Object.keys(_t.records.actors)},p_=function(){_t.records.sequenceNumbersEnabled=!0},g_=function(){_t.records.sequenceNumbersEnabled=!1},y_=()=>_t.records.sequenceNumbersEnabled,m_=function(t){_t.records.wrapEnabled=t},Lr=()=>_t.records.wrapEnabled!==void 0?_t.records.wrapEnabled:Y().sequence.wrap,x_=function(){_t.reset(),We()},b_=function(t){const e=t.trim(),i={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:e.match(/^:?wrap:/)!==null?!0:e.match(/^:?nowrap:/)!==null?!1:void 0};return A.debug("parseMessage:",i),i},k_=function(t){const e=t.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let i=e!=null&&e[1]?e[1].trim():"transparent",r=e!=null&&e[2]?e[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",i)||(i="transparent",r=t.trim());else{const s=new Option().style;s.color=i,s.color!==i&&(i="transparent",r=t.trim())}return{color:i,text:r!==void 0?ve(r.replace(/^:?(?:no)?wrap:/,""),Y()):void 0,wrap:r!==void 0?r.match(/^:?wrap:/)!==null?!0:r.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},Ys={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32},__={FILLED:0,OPEN:1},T_={LEFTOF:0,RIGHTOF:1,OVER:2},D0=function(t,e,i){const r={actor:t,placement:e,message:i.text,wrap:i.wrap===void 0&&Lr()||!!i.wrap},s=[].concat(t,t);_t.records.notes.push(r),_t.records.messages.push({from:s[0],to:s[1],message:i.text,wrap:i.wrap===void 0&&Lr()||!!i.wrap,type:Ys.NOTE,placement:e})},N0=function(t,e){const i=on(t);try{let r=ve(e.text,Y());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const s=JSON.parse(r);El(i,s)}catch(r){A.error("error while parsing actor link text",r)}},C_=function(t,e){const i=on(t);try{const a={};let o=ve(e.text,Y());var r=o.indexOf("@");o=o.replace(/&amp;/g,"&"),o=o.replace(/&equals;/g,"=");var s=o.slice(0,r-1).trim(),n=o.slice(r+1).trim();a[s]=n,El(i,a)}catch(a){A.error("error while parsing actor link text",a)}};function El(t,e){if(t.links==null)t.links=e;else for(let i in e)t.links[i]=e[i]}const O0=function(t,e){const i=on(t);try{let r=ve(e.text,Y());const s=JSON.parse(r);P0(i,s)}catch(r){A.error("error while parsing actor properties text",r)}};function P0(t,e){if(t.properties==null)t.properties=e;else for(let i in e)t.properties[i]=e[i]}function E_(){_t.records.currentBox=void 0}const M0=function(t,e){const i=on(t),r=document.getElementById(e.text);try{const s=r.innerHTML,n=JSON.parse(s);n.properties&&P0(i,n.properties),n.links&&El(i,n.links)}catch(s){A.error("error while parsing actor details text",s)}},v_=function(t,e){if(t!==void 0&&t.properties!==void 0)return t.properties[e]},V0=function(t){if(Array.isArray(t))t.forEach(function(e){V0(e)});else switch(t.type){case"sequenceIndex":_t.records.messages.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":_o(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(_t.records.actors[t.actor])throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");_t.records.lastCreated=t.actor,_o(t.actor,t.actor,t.description,t.draw),_t.records.createdActors[t.actor]=_t.records.messages.length;break;case"destroyParticipant":_t.records.lastDestroyed=t.actor,_t.records.destroyedActors[t.actor]=_t.records.messages.length;break;case"activeStart":ne(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":ne(t.actor,void 0,void 0,t.signalType);break;case"addNote":D0(t.actor,t.placement,t.text);break;case"addLinks":N0(t.actor,t.text);break;case"addALink":C_(t.actor,t.text);break;case"addProperties":O0(t.actor,t.text);break;case"addDetails":M0(t.actor,t.text);break;case"addMessage":if(_t.records.lastCreated){if(t.to!==_t.records.lastCreated)throw new Error("The created participant "+_t.records.lastCreated+" does not have an associated creating message after its declaration. Please check the sequence diagram.");_t.records.lastCreated=void 0}else if(_t.records.lastDestroyed){if(t.to!==_t.records.lastDestroyed&&t.from!==_t.records.lastDestroyed)throw new Error("The destroyed participant "+_t.records.lastDestroyed+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");_t.records.lastDestroyed=void 0}ne(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":r_(t.boxData);break;case"boxEnd":E_();break;case"loopStart":ne(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":ne(void 0,void 0,void 0,t.signalType);break;case"rectStart":ne(void 0,void 0,t.color,t.signalType);break;case"rectEnd":ne(void 0,void 0,void 0,t.signalType);break;case"optStart":ne(void 0,void 0,t.optText,t.signalType);break;case"optEnd":ne(void 0,void 0,void 0,t.signalType);break;case"altStart":ne(void 0,void 0,t.altText,t.signalType);break;case"else":ne(void 0,void 0,t.altText,t.signalType);break;case"altEnd":ne(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Ne(t.text);break;case"parStart":ne(void 0,void 0,t.parText,t.signalType);break;case"and":ne(void 0,void 0,t.parText,t.signalType);break;case"parEnd":ne(void 0,void 0,void 0,t.signalType);break;case"criticalStart":ne(void 0,void 0,t.criticalText,t.signalType);break;case"option":ne(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":ne(void 0,void 0,void 0,t.signalType);break;case"breakStart":ne(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":ne(void 0,void 0,void 0,t.signalType);break}},qc={addActor:_o,addMessage:n_,addSignal:ne,addLinks:N0,addDetails:M0,addProperties:O0,autoWrap:Lr,setWrap:m_,enableSequenceNumbers:p_,disableSequenceNumbers:g_,showSequenceNumbers:y_,getMessages:l_,getActors:h_,getCreatedActors:u_,getDestroyedActors:d_,getActor:on,getActorKeys:f_,getActorProperty:v_,getAccTitle:Ye,getBoxes:c_,getDiagramTitle:Ge,setDiagramTitle:ei,getConfig:()=>Y().sequence,clear:x_,parseMessage:b_,parseBoxData:k_,LINETYPE:Ys,ARROWTYPE:__,PLACEMENT:T_,addNote:D0,setAccTitle:Ne,apply:V0,setAccDescription:Ue,getAccDescription:He,hasAtLeastOneBox:a_,hasAtLeastOneBoxWithTitle:o_},S_=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,w_=S_,Cr=18*2,vl=function(t,e){return ga(t,e)},q0=(t,e)=>{Kg(()=>{const i=document.querySelectorAll(t);i.length!==0&&(i[0].addEventListener("mouseover",function(){I_("actor"+e+"_popup")}),i[0].addEventListener("mouseout",function(){F_("actor"+e+"_popup")}))})},A_=function(t,e,i,r,s){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const n=e.links,a=e.actorCnt,o=e.rectData;var l="none";s&&(l="block !important");const h=t.append("g");h.attr("id","actor"+a+"_popup"),h.attr("class","actorPopupMenu"),h.attr("display",l),q0("#actor"+a+"_popup",a);var u="";o.class!==void 0&&(u=" "+o.class);let f=o.width>i?o.width:i;const d=h.append("rect");if(d.attr("class","actorPopupMenuPanel"+u),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",f),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),n!=null){var p=20;for(let _ in n){var y=h.append("a"),x=Dr.sanitizeUrl(n[_]);y.attr("xlink:href",x),y.attr("target","_blank"),X_(r)(_,y,o.x+10,o.height+p,f,20,{class:"actor"},r),p+=30}}return d.attr("height",p),{height:o.height+p,width:f}},L_=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},B_=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},I_=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="block")},F_=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="none")},as=function(t,e){let i=0,r=0;const s=e.text.split(mt.lineBreakRegex),[n,a]=ds(e.fontSize);let o=[],l=0,h=()=>e.y;if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":h=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":h=()=>Math.round(e.y+(i+r+e.textMargin)/2);break;case"bottom":case"end":h=()=>Math.round(e.y+(i+r+2*e.textMargin)-e.textMargin);break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[u,f]of s.entries()){e.textMargin!==void 0&&e.textMargin===0&&n!==void 0&&(l=u*n);const d=t.append("text");d.attr("x",e.x),d.attr("y",h()),e.anchor!==void 0&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&d.style("font-family",e.fontFamily),a!==void 0&&d.style("font-size",a),e.fontWeight!==void 0&&d.style("font-weight",e.fontWeight),e.fill!==void 0&&d.attr("fill",e.fill),e.class!==void 0&&d.attr("class",e.class),e.dy!==void 0?d.attr("dy",e.dy):l!==0&&d.attr("dy",l);const p=f||Rh;if(e.tspan){const y=d.append("tspan");y.attr("x",e.x),e.fill!==void 0&&y.attr("fill",e.fill),y.text(p)}else d.text(p);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,i=r),o.push(d)}return o},z0=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");return r.attr("points",i(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,as(t,e),r};let yi=-1;const W0=(t,e,i,r)=>{t.select&&i.forEach(s=>{const n=e[s],a=t.select("#actor"+n.actorCnt);!r.mirrorActors&&n.stopy?a.attr("y2",n.stopy+n.height/2):r.mirrorActors&&a.attr("y2",n.stopy)})},R_=function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+5,o=t.append("g").lower();var l=o;r||(yi++,l.append("line").attr("id","actor"+yi).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),l=o.append("g"),e.actorCnt=yi,e.links!=null&&(l.attr("id","root-"+yi),q0("#root-"+yi,yi)));const h=Or();var u="actor";e.properties!=null&&e.properties.class?u=e.properties.class:h.fill="#eaeaea",h.x=e.x,h.y=s,h.width=e.width,h.height=e.height,h.class=u,h.rx=3,h.ry=3;const f=vl(l,h);if(e.rectData=h,e.properties!=null&&e.properties.icon){const p=e.properties.icon.trim();p.charAt(0)==="@"?Am(l,h.x+h.width-20,h.y+10,p.substr(1)):wm(l,h.x+h.width-20,h.y+10,p)}Sl(i)(e.description,l,h.x,h.y,h.width,h.height,{class:"actor"},i);let d=e.height;if(f.node){const p=f.node().getBBox();e.height=p.height,d=p.height}return d},D_=function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+80;t.lower(),r||(yi++,t.append("line").attr("id","actor"+yi).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),e.actorCnt=yi);const o=t.append("g");o.attr("class","actor-man");const l=Or();l.x=e.x,l.y=s,l.fill="#eaeaea",l.width=e.width,l.height=e.height,l.class="actor",l.rx=3,l.ry=3,o.append("line").attr("id","actor-man-torso"+yi).attr("x1",n).attr("y1",s+25).attr("x2",n).attr("y2",s+45),o.append("line").attr("id","actor-man-arms"+yi).attr("x1",n-Cr/2).attr("y1",s+33).attr("x2",n+Cr/2).attr("y2",s+33),o.append("line").attr("x1",n-Cr/2).attr("y1",s+60).attr("x2",n).attr("y2",s+45),o.append("line").attr("x1",n).attr("y1",s+45).attr("x2",n+Cr/2-2).attr("y2",s+60);const h=o.append("circle");h.attr("cx",e.x+e.width/2),h.attr("cy",s+10),h.attr("r",15),h.attr("width",e.width),h.attr("height",e.height);const u=o.node().getBBox();return e.height=u.height,Sl(i)(e.description,o,l.x,l.y+35,l.width,l.height,{class:"actor"},i),e.height},N_=function(t,e,i,r){switch(e.type){case"actor":return D_(t,e,i,r);case"participant":return R_(t,e,i,r)}},O_=function(t,e,i){const s=t.append("g");Y0(s,e),e.name&&Sl(i)(e.name,s,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},i),s.lower()},P_=function(t){return t.append("g")},M_=function(t,e,i,r,s){const n=Or(),a=e.anchored;n.x=e.startx,n.y=e.starty,n.class="activation"+s%3,n.width=e.stopx-e.startx,n.height=i-e.starty,vl(a,n)},V_=function(t,e,i,r){const{boxMargin:s,boxTextMargin:n,labelBoxHeight:a,labelBoxWidth:o,messageFontFamily:l,messageFontSize:h,messageFontWeight:u}=r,f=t.append("g"),d=function(x,_,C,k){return f.append("line").attr("x1",x).attr("y1",_).attr("x2",C).attr("y2",k).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach(function(x){d(e.startx,x.y,e.stopx,x.y).style("stroke-dasharray","3, 3")});let p=tl();p.text=i,p.x=e.startx,p.y=e.starty,p.fontFamily=l,p.fontSize=h,p.fontWeight=u,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=o||50,p.height=a||20,p.textMargin=n,p.class="labelText",z0(f,p),p=U0(),p.text=e.title,p.x=e.startx+o/2+(e.stopx-e.startx)/2,p.y=e.starty+s+n,p.anchor="middle",p.valign="middle",p.textMargin=n,p.class="loopText",p.fontFamily=l,p.fontSize=h,p.fontWeight=u,p.wrap=!0;let y=as(f,p);return e.sectionTitles!==void 0&&e.sectionTitles.forEach(function(x,_){if(x.message){p.text=x.message,p.x=e.startx+(e.stopx-e.startx)/2,p.y=e.sections[_].y+s+n,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=l,p.fontSize=h,p.fontWeight=u,p.wrap=e.wrap,y=as(f,p);let C=Math.round(y.map(k=>(k._groups||k)[0][0].getBBox().height).reduce((k,R)=>k+R));e.sections[_].height+=C-(s+n)}}),e.height=Math.round(e.stopy-e.starty),f},Y0=function(t,e){P1(t,e)},q_=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},z_=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},W_=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},Y_=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},U_=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},H_=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},G_=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},U0=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},j_=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},Sl=function(){function t(s,n,a,o,l,h,u){const f=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(s);r(f,u)}function e(s,n,a,o,l,h,u,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:y}=f,[x,_]=ds(d),C=s.split(mt.lineBreakRegex);for(let k=0;k<C.length;k++){const R=k*x-x*(C.length-1)/2,F=n.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").style("font-size",_).style("font-weight",y).style("font-family",p);F.append("tspan").attr("x",a+l/2).attr("dy",R).text(C[k]),F.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(F,u)}}function i(s,n,a,o,l,h,u,f){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,f),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),X_=function(){function t(s,n,a,o,l,h,u){const f=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").text(s);r(f,u)}function e(s,n,a,o,l,h,u,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:y}=f,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const C=_*d-d*(x.length-1)/2,k=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").style("font-size",d).style("font-weight",y).style("font-family",p);k.append("tspan").attr("x",a).attr("dy",C).text(x[_]),k.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,u)}}function i(s,n,a,o,l,h,u,f){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,f),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),oe={drawRect:vl,drawText:as,drawLabel:z0,drawActor:N_,drawBox:O_,drawPopup:A_,anchorElement:P_,drawActivation:M_,drawLoop:V_,drawBackgroundRect:Y0,insertArrowHead:Y_,insertArrowFilledHead:U_,insertSequenceNumber:H_,insertArrowCrossHead:G_,insertDatabaseIcon:q_,insertComputerIcon:z_,insertClockIcon:W_,getTextObj:U0,getNoteRect:j_,popupMenu:L_,popdownMenu:B_,fixLifeLineHeights:W0,sanitizeUrl:Dr.sanitizeUrl};let K={};const gt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(t){this.boxes.push(t)},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,G0(Y())},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=this;let n=0;function a(o){return function(h){n++;const u=s.sequenceItems.length-n+1;s.updateVal(h,"starty",e-u*K.boxMargin,Math.min),s.updateVal(h,"stopy",r+u*K.boxMargin,Math.max),s.updateVal(gt.data,"startx",t-u*K.boxMargin,Math.min),s.updateVal(gt.data,"stopx",i+u*K.boxMargin,Math.max),o!=="activation"&&(s.updateVal(h,"startx",t-u*K.boxMargin,Math.min),s.updateVal(h,"stopx",i+u*K.boxMargin,Math.max),s.updateVal(gt.data,"starty",e-u*K.boxMargin,Math.min),s.updateVal(gt.data,"stopy",r+u*K.boxMargin,Math.max))}}this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},insert:function(t,e,i,r){const s=mt.getMin(t,i),n=mt.getMax(t,i),a=mt.getMin(e,r),o=mt.getMax(e,r);this.updateVal(gt.data,"startx",s,Math.min),this.updateVal(gt.data,"starty",a,Math.min),this.updateVal(gt.data,"stopx",n,Math.max),this.updateVal(gt.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},newActivation:function(t,e,i){const r=i[t.from.actor],s=Ta(t.from.actor).length||0,n=r.x+r.width/2+(s-1)*K.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+K.activationWidth,stopy:void 0,actor:t.from.actor,anchored:oe.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(i){return i.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},isLoopOverlap:function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:gt.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},saveVerticalPos:function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},resetVerticalPos:function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=mt.getMax(this.data.stopy,this.verticalPos)},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},$_=function(t,e){gt.bumpVerticalPos(K.boxMargin),e.height=K.boxMargin,e.starty=gt.getVerticalPos();const i=Or();i.x=e.startx,i.y=e.starty,i.width=e.width||K.width,i.class="note";const r=t.append("g"),s=oe.drawRect(r,i),n=tl();n.x=e.startx,n.y=e.starty,n.width=i.width,n.dy="1em",n.text=e.message,n.class="noteText",n.fontFamily=K.noteFontFamily,n.fontSize=K.noteFontSize,n.fontWeight=K.noteFontWeight,n.anchor=K.noteAlign,n.textMargin=K.noteMargin,n.valign="center";const a=as(r,n),o=Math.round(a.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,h)=>l+h));s.attr("height",o+2*K.noteMargin),e.height+=o+2*K.noteMargin,gt.bumpVerticalPos(o+2*K.noteMargin),e.stopy=e.starty+o+2*K.noteMargin,e.stopx=e.startx+i.width,gt.insert(e.startx,e.starty,e.stopx,e.stopy),gt.models.addNote(e)},Br=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),Wr=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),To=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});function K_(t,e){gt.bumpVerticalPos(10);const{startx:i,stopx:r,message:s}=e,n=mt.splitBreaks(s).length,a=Rt.calculateTextDimensions(s,Br(K)),o=a.height/n;e.height+=o,gt.bumpVerticalPos(o);let l,h=a.height-10;const u=a.width;if(i===r){l=gt.getVerticalPos()+h,K.rightAngles||(h+=K.boxMargin,l=gt.getVerticalPos()+h),h+=30;const f=mt.getMax(u/2,K.width/2);gt.insert(i-f,gt.getVerticalPos()-10+h,r+f,gt.getVerticalPos()+30+h)}else h+=K.boxMargin,l=gt.getVerticalPos()+h,gt.insert(i,l-10,r,l);return gt.bumpVerticalPos(h),e.height+=h,e.stopy=e.starty+e.height,gt.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}const Q_=function(t,e,i,r){const{startx:s,stopx:n,starty:a,message:o,type:l,sequenceIndex:h,sequenceVisible:u}=e,f=Rt.calculateTextDimensions(o,Br(K)),d=tl();d.x=s,d.y=a+10,d.width=n-s,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=K.messageFontFamily,d.fontSize=K.messageFontSize,d.fontWeight=K.messageFontWeight,d.anchor=K.messageAlign,d.valign="center",d.textMargin=K.wrapPadding,d.tspan=!1,as(t,d);const p=f.width;let y;s===n?K.rightAngles?y=t.append("path").attr("d",`M  ${s},${i} H ${s+mt.getMax(K.width/2,p/2)} V ${i+25} H ${s}`):y=t.append("path").attr("d","M "+s+","+i+" C "+(s+60)+","+(i-10)+" "+(s+60)+","+(i+30)+" "+s+","+(i+20)):(y=t.append("line"),y.attr("x1",s),y.attr("y1",i),y.attr("x2",n),y.attr("y2",i)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let x="";K.arrowMarkerAbsolute&&(x=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,x=x.replace(/\(/g,"\\("),x=x.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+x+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+x+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+x+"#crosshead)"),(u||K.showSequenceNumbers)&&(y.attr("marker-start","url("+x+"#sequencenumber)"),t.append("text").attr("x",s).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))},Z_=function(t,e,i,r,s,n,a){let o=0,l=0,h,u=0;for(const f of r){const d=e[f],p=d.box;h&&h!=p&&(a||gt.models.addBox(h),l+=K.boxMargin+h.margin),p&&p!=h&&(a||(p.x=o+l,p.y=s),l+=p.margin),d.width=d.width||K.width,d.height=mt.getMax(d.height||K.height,K.height),d.margin=d.margin||K.actorMargin,u=mt.getMax(u,d.height),i[d.name]&&(l+=d.width/2),d.x=o+l,d.starty=gt.getVerticalPos(),gt.insert(d.x,s,d.x+d.width,d.height),o+=d.width+l,d.box&&(d.box.width=o+p.margin-d.box.x),l=d.margin,h=d.box,gt.models.addActor(d)}h&&!a&&gt.models.addBox(h),gt.bumpVerticalPos(u)},Co=function(t,e,i,r){if(r){let s=0;gt.bumpVerticalPos(K.boxMargin*2);for(const n of i){const a=e[n];a.stopy||(a.stopy=gt.getVerticalPos());const o=oe.drawActor(t,a,K,!0);s=mt.getMax(s,o)}gt.bumpVerticalPos(s+K.boxMargin)}else for(const s of i){const n=e[s];oe.drawActor(t,n,K,!1)}},H0=function(t,e,i,r){let s=0,n=0;for(const a of i){const o=e[a],l=i7(o),h=oe.drawPopup(t,o,l,K,K.forceMenus,r);h.height>s&&(s=h.height),h.width+o.x>n&&(n=h.width+o.x)}return{maxHeight:s,maxWidth:n}},G0=function(t){Ee(K,t),t.fontFamily&&(K.actorFontFamily=K.noteFontFamily=K.messageFontFamily=t.fontFamily),t.fontSize&&(K.actorFontSize=K.noteFontSize=K.messageFontSize=t.fontSize),t.fontWeight&&(K.actorFontWeight=K.noteFontWeight=K.messageFontWeight=t.fontWeight)},Ta=function(t){return gt.activations.filter(function(e){return e.actor===t})},zc=function(t,e){const i=e[t],r=Ta(t),s=r.reduce(function(a,o){return mt.getMin(a,o.startx)},i.x+i.width/2-1),n=r.reduce(function(a,o){return mt.getMax(a,o.stopx)},i.x+i.width/2+1);return[s,n]};function Ei(t,e,i,r,s){gt.bumpVerticalPos(i);let n=r;if(e.id&&e.message&&t[e.id]){const a=t[e.id].width,o=Br(K);e.message=Rt.wrapLabel(`[${e.message}]`,a-2*K.wrapPadding,o),e.width=a,e.wrap=!0;const l=Rt.calculateTextDimensions(e.message,o),h=mt.getMax(l.height,K.labelBoxHeight);n=r+h,A.debug(`${h} - ${e.message}`)}s(e),gt.bumpVerticalPos(n)}function J_(t,e,i,r,s,n,a){function o(h,u){h.x<s[t.from].x?(gt.insert(e.stopx-u,e.starty,e.startx,e.stopy+h.height/2+K.noteMargin),e.stopx=e.stopx+u):(gt.insert(e.startx,e.starty,e.stopx+u,e.stopy+h.height/2+K.noteMargin),e.stopx=e.stopx-u)}function l(h,u){h.x<s[t.to].x?(gt.insert(e.startx-u,e.starty,e.stopx,e.stopy+h.height/2+K.noteMargin),e.startx=e.startx+u):(gt.insert(e.stopx,e.starty,e.startx+u,e.stopy+h.height/2+K.noteMargin),e.startx=e.startx-u)}if(n[t.to]==r){const h=s[t.to],u=h.type=="actor"?Cr/2+3:h.width/2+3;o(h,u),h.starty=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.from]==r){const h=s[t.from];if(K.mirrorActors){const u=h.type=="actor"?Cr/2:h.width/2;l(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.to]==r){const h=s[t.to];if(K.mirrorActors){const u=h.type=="actor"?Cr/2+3:h.width/2+3;o(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}}const t7=function(t,e,i,r){const{securityLevel:s,sequence:n}=Y();K=n;let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;gt.init(),A.debug(r.db);const h=s==="sandbox"?o.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=r.db.getActors(),f=r.db.getCreatedActors(),d=r.db.getDestroyedActors(),p=r.db.getBoxes();let y=r.db.getActorKeys();const x=r.db.getMessages(),_=r.db.getDiagramTitle(),C=r.db.hasAtLeastOneBox(),k=r.db.hasAtLeastOneBoxWithTitle(),R=e7(u,x,r);if(K.height=r7(u,R,p),oe.insertComputerIcon(h),oe.insertDatabaseIcon(h),oe.insertClockIcon(h),C&&(gt.bumpVerticalPos(K.boxMargin),k&&gt.bumpVerticalPos(p[0].textMaxHeight)),K.hideUnusedParticipants===!0){const v=new Set;x.forEach(D=>{v.add(D.from),v.add(D.to)}),y=y.filter(D=>v.has(D))}Z_(h,u,f,y,0,x,!1);const F=a7(x,u,R,r);oe.insertArrowHead(h),oe.insertArrowCrossHead(h),oe.insertArrowFilledHead(h),oe.insertSequenceNumber(h);function L(v,D){const B=gt.endActivation(v);B.starty+18>D&&(B.starty=D-6,D+=12),oe.drawActivation(h,B,D,K,Ta(v.from.actor).length),gt.insert(B.startx,D-10,B.stopx,D)}let E=1,I=1;const S=[],b=[];x.forEach(function(v,D){let B,z,q;switch(v.type){case r.db.LINETYPE.NOTE:gt.resetVerticalPos(),z=v.noteModel,$_(h,z);break;case r.db.LINETYPE.ACTIVE_START:gt.newActivation(v,h,u);break;case r.db.LINETYPE.ACTIVE_END:L(v,gt.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:Ei(F,v,K.boxMargin,K.boxMargin+K.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.LOOP_END:B=gt.endLoop(),oe.drawLoop(h,B,"loop",K),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos()),gt.models.addLoop(B);break;case r.db.LINETYPE.RECT_START:Ei(F,v,K.boxMargin,K.boxMargin,st=>gt.newLoop(void 0,st.message));break;case r.db.LINETYPE.RECT_END:B=gt.endLoop(),b.push(B),gt.models.addLoop(B),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos());break;case r.db.LINETYPE.OPT_START:Ei(F,v,K.boxMargin,K.boxMargin+K.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.OPT_END:B=gt.endLoop(),oe.drawLoop(h,B,"opt",K),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos()),gt.models.addLoop(B);break;case r.db.LINETYPE.ALT_START:Ei(F,v,K.boxMargin,K.boxMargin+K.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.ALT_ELSE:Ei(F,v,K.boxMargin+K.boxTextMargin,K.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.ALT_END:B=gt.endLoop(),oe.drawLoop(h,B,"alt",K),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos()),gt.models.addLoop(B);break;case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:Ei(F,v,K.boxMargin,K.boxMargin+K.boxTextMargin,st=>gt.newLoop(st)),gt.saveVerticalPos();break;case r.db.LINETYPE.PAR_AND:Ei(F,v,K.boxMargin+K.boxTextMargin,K.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.PAR_END:B=gt.endLoop(),oe.drawLoop(h,B,"par",K),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos()),gt.models.addLoop(B);break;case r.db.LINETYPE.AUTONUMBER:E=v.message.start||E,I=v.message.step||I,v.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:Ei(F,v,K.boxMargin,K.boxMargin+K.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.CRITICAL_OPTION:Ei(F,v,K.boxMargin+K.boxTextMargin,K.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.CRITICAL_END:B=gt.endLoop(),oe.drawLoop(h,B,"critical",K),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos()),gt.models.addLoop(B);break;case r.db.LINETYPE.BREAK_START:Ei(F,v,K.boxMargin,K.boxMargin+K.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.BREAK_END:B=gt.endLoop(),oe.drawLoop(h,B,"break",K),gt.bumpVerticalPos(B.stopy-gt.getVerticalPos()),gt.models.addLoop(B);break;default:try{q=v.msgModel,q.starty=gt.getVerticalPos(),q.sequenceIndex=E,q.sequenceVisible=r.db.showSequenceNumbers();const st=K_(h,q);J_(v,q,st,D,u,f,d),S.push({messageModel:q,lineStartY:st}),gt.models.addMessage(q)}catch(st){A.error("error while drawing message",st)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(v.type)&&(E=E+I)}),A.debug("createdActors",f),A.debug("destroyedActors",d),Co(h,u,y,!1),S.forEach(v=>Q_(h,v.messageModel,v.lineStartY,r)),K.mirrorActors&&Co(h,u,y,!0),b.forEach(v=>oe.drawBackgroundRect(h,v)),W0(h,u,y,K),gt.models.boxes.forEach(function(v){v.height=gt.getVerticalPos()-v.y,gt.insert(v.x,v.y,v.x+v.width,v.height),v.startx=v.x,v.starty=v.y,v.stopx=v.startx+v.width,v.stopy=v.starty+v.height,v.stroke="rgb(0,0,0, 0.5)",oe.drawBox(h,v,K)}),C&&gt.bumpVerticalPos(K.boxMargin);const T=H0(h,u,y,l),{bounds:g}=gt.getBounds();let w=g.stopy-g.starty;w<T.maxHeight&&(w=T.maxHeight);let m=w+2*K.diagramMarginY;K.mirrorActors&&(m=m-K.boxMargin+K.bottomMarginAdj);let P=g.stopx-g.startx;P<T.maxWidth&&(P=T.maxWidth);const j=P+2*K.diagramMarginX;_&&h.append("text").text(_).attr("x",(g.stopx-g.startx)/2-2*K.diagramMarginX).attr("y",-25),ze(h,m,j,K.useMaxWidth);const N=_?40:0;h.attr("viewBox",g.startx-K.diagramMarginX+" -"+(K.diagramMarginY+N)+" "+j+" "+(m+N)),A.debug("models:",gt.models)};function e7(t,e,i){const r={};return e.forEach(function(s){if(t[s.to]&&t[s.from]){const n=t[s.to];if(s.placement===i.db.PLACEMENT.LEFTOF&&!n.prevActor||s.placement===i.db.PLACEMENT.RIGHTOF&&!n.nextActor)return;const a=s.placement!==void 0,o=!a,l=a?Wr(K):Br(K),h=s.wrap?Rt.wrapLabel(s.message,K.width-2*K.wrapPadding,l):s.message,f=Rt.calculateTextDimensions(h,l).width+2*K.wrapPadding;o&&s.from===n.nextActor?r[s.to]=mt.getMax(r[s.to]||0,f):o&&s.from===n.prevActor?r[s.from]=mt.getMax(r[s.from]||0,f):o&&s.from===s.to?(r[s.from]=mt.getMax(r[s.from]||0,f/2),r[s.to]=mt.getMax(r[s.to]||0,f/2)):s.placement===i.db.PLACEMENT.RIGHTOF?r[s.from]=mt.getMax(r[s.from]||0,f):s.placement===i.db.PLACEMENT.LEFTOF?r[n.prevActor]=mt.getMax(r[n.prevActor]||0,f):s.placement===i.db.PLACEMENT.OVER&&(n.prevActor&&(r[n.prevActor]=mt.getMax(r[n.prevActor]||0,f/2)),n.nextActor&&(r[s.from]=mt.getMax(r[s.from]||0,f/2)))}}),A.debug("maxMessageWidthPerActor:",r),r}const i7=function(t){let e=0;const i=To(K);for(const r in t.links){const n=Rt.calculateTextDimensions(r,i).width+2*K.wrapPadding+2*K.boxMargin;e<n&&(e=n)}return e};function r7(t,e,i){let r=0;Object.keys(t).forEach(n=>{const a=t[n];a.wrap&&(a.description=Rt.wrapLabel(a.description,K.width-2*K.wrapPadding,To(K)));const o=Rt.calculateTextDimensions(a.description,To(K));a.width=a.wrap?K.width:mt.getMax(K.width,o.width+2*K.wrapPadding),a.height=a.wrap?mt.getMax(o.height,K.height):K.height,r=mt.getMax(r,a.height)});for(const n in e){const a=t[n];if(!a)continue;const o=t[a.nextActor];if(!o){const f=e[n]+K.actorMargin-a.width/2;a.margin=mt.getMax(f,K.actorMargin);continue}const h=e[n]+K.actorMargin-a.width/2-o.width/2;a.margin=mt.getMax(h,K.actorMargin)}let s=0;return i.forEach(n=>{const a=Br(K);let o=n.actorKeys.reduce((u,f)=>u+=t[f].width+(t[f].margin||0),0);o-=2*K.boxTextMargin,n.wrap&&(n.name=Rt.wrapLabel(n.name,o-2*K.wrapPadding,a));const l=Rt.calculateTextDimensions(n.name,a);s=mt.getMax(l.height,s);const h=mt.getMax(o,l.width+2*K.wrapPadding);if(n.margin=K.boxTextMargin,o<h){const u=(h-o)/2;n.margin+=u}}),i.forEach(n=>n.textMaxHeight=s),mt.getMax(r,K.height)}const s7=function(t,e,i){const r=e[t.from].x,s=e[t.to].x,n=t.wrap&&t.message;let a=Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,K.width,Wr(K)):t.message,Wr(K));const o={width:n?K.width:mt.getMax(K.width,a.width+2*K.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===i.db.PLACEMENT.RIGHTOF?(o.width=n?mt.getMax(K.width,a.width):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*K.noteMargin),o.startx=r+(e[t.from].width+K.actorMargin)/2):t.placement===i.db.PLACEMENT.LEFTOF?(o.width=n?mt.getMax(K.width,a.width+2*K.noteMargin):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*K.noteMargin),o.startx=r-o.width+(e[t.from].width-K.actorMargin)/2):t.to===t.from?(a=Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,mt.getMax(K.width,e[t.from].width),Wr(K)):t.message,Wr(K)),o.width=n?mt.getMax(K.width,e[t.from].width):mt.getMax(e[t.from].width,K.width,a.width+2*K.noteMargin),o.startx=r+(e[t.from].width-o.width)/2):(o.width=Math.abs(r+e[t.from].width/2-(s+e[t.to].width/2))+K.actorMargin,o.startx=r<s?r+e[t.from].width/2-K.actorMargin/2:s+e[t.to].width/2-K.actorMargin/2),n&&(o.message=Rt.wrapLabel(t.message,o.width-2*K.wrapPadding,Wr(K))),A.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},n7=function(t,e,i){if(![i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT].includes(t.type))return{};const[r,s]=zc(t.from,e),[n,a]=zc(t.to,e),o=r<=n,l=o?s:r;let h=o?n:a;const u=Math.abs(n-a)>2,f=x=>o?-x:x;t.from===t.to?h=l:(t.activate&&!u&&(h+=f(K.activationWidth/2-1)),[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(h+=f(3)));const d=[r,s,n,a],p=Math.abs(l-h);t.wrap&&t.message&&(t.message=Rt.wrapLabel(t.message,mt.getMax(p+2*K.wrapPadding,K.width),Br(K)));const y=Rt.calculateTextDimensions(t.message,Br(K));return{width:mt.getMax(t.wrap?0:y.width+2*K.wrapPadding,p+2*K.wrapPadding,K.width),height:0,startx:l,stopx:h,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}},a7=function(t,e,i,r){const s={},n=[];let a,o,l;return t.forEach(function(h){switch(h.id=Rt.random({length:10}),h.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:n.push({id:h.id,msg:h.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:h.message&&(a=n.pop(),s[a.id]=a,s[h.id]=a,n.push(a));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:a=n.pop(),s[a.id]=a;break;case r.db.LINETYPE.ACTIVE_START:{const f=e[h.from?h.from.actor:h.to.actor],d=Ta(h.from?h.from.actor:h.to.actor).length,p=f.x+f.width/2+(d-1)*K.activationWidth/2,y={startx:p,stopx:p+K.activationWidth,actor:h.from.actor,enabled:!0};gt.activations.push(y)}break;case r.db.LINETYPE.ACTIVE_END:{const f=gt.activations.map(d=>d.actor).lastIndexOf(h.from.actor);delete gt.activations.splice(f,1)[0]}break}h.placement!==void 0?(o=s7(h,e,r),h.noteModel=o,n.forEach(f=>{a=f,a.from=mt.getMin(a.from,o.startx),a.to=mt.getMax(a.to,o.startx+o.width),a.width=mt.getMax(a.width,Math.abs(a.from-a.to))-K.labelBoxWidth})):(l=n7(h,e,r),h.msgModel=l,l.startx&&l.stopx&&n.length>0&&n.forEach(f=>{if(a=f,l.startx===l.stopx){const d=e[h.from],p=e[h.to];a.from=mt.getMin(d.x-l.width/2,d.x-d.width/2,a.from),a.to=mt.getMax(p.x+l.width/2,p.x+d.width/2,a.to),a.width=mt.getMax(a.width,Math.abs(a.to-a.from))-K.labelBoxWidth}else a.from=mt.getMin(l.startx,a.from),a.to=mt.getMax(l.stopx,a.to),a.width=mt.getMax(a.width,l.width)-K.labelBoxWidth}))}),gt.activations=[],A.debug("Loop type widths:",s),s},o7={bounds:gt,drawActors:Co,drawActorsPopup:H0,setConf:G0,draw:t7},l7={parser:e_,db:qc,renderer:o7,styles:w_,init:({wrap:t})=>{qc.setWrap(t)}},c7=Object.freeze(Object.defineProperty({__proto__:null,diagram:l7},Symbol.toStringTag,{value:"Module"}));var Eo=function(){var t=function(Wt,pt,ut,ot){for(ut=ut||{},ot=Wt.length;ot--;ut[Wt[ot]]=pt);return ut},e=[1,17],i=[1,18],r=[1,19],s=[1,39],n=[1,40],a=[1,25],o=[1,23],l=[1,24],h=[1,31],u=[1,32],f=[1,33],d=[1,34],p=[1,35],y=[1,36],x=[1,26],_=[1,27],C=[1,28],k=[1,29],R=[1,43],F=[1,30],L=[1,42],E=[1,44],I=[1,41],S=[1,45],b=[1,9],T=[1,8,9],g=[1,56],w=[1,57],m=[1,58],P=[1,59],j=[1,60],N=[1,61],v=[1,62],D=[1,8,9,39],B=[1,74],z=[1,8,9,12,13,21,37,39,42,59,60,61,62,63,64,65,70,72],q=[1,8,9,12,13,19,21,37,39,42,46,59,60,61,62,63,64,65,70,72,74,80,95,97,98],st=[13,74,80,95,97,98],$=[13,64,65,74,80,95,97,98],ft=[13,59,60,61,62,63,74,80,95,97,98],Q=[1,93],H=[1,110],it=[1,108],nt=[1,102],Z=[1,103],tt=[1,104],O=[1,105],at=[1,106],W=[1,107],dt=[1,109],M=[1,8,9,37,39,42],wt=[1,8,9,21],G=[1,8,9,78],vt=[1,8,9,21,73,74,78,80,81,82,83,84,85],bt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,className:17,classLiteralName:18,GENERICTYPE:19,relationStatement:20,LABEL:21,namespaceStatement:22,classStatement:23,memberStatement:24,annotationStatement:25,clickStatement:26,styleStatement:27,cssClassStatement:28,noteStatement:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,namespaceIdentifier:36,STRUCT_START:37,classStatements:38,STRUCT_STOP:39,NAMESPACE:40,classIdentifier:41,STYLE_SEPARATOR:42,members:43,CLASS:44,ANNOTATION_START:45,ANNOTATION_END:46,MEMBER:47,SEPARATOR:48,relation:49,NOTE_FOR:50,noteText:51,NOTE:52,direction_tb:53,direction_bt:54,direction_rl:55,direction_lr:56,relationType:57,lineType:58,AGGREGATION:59,EXTENSION:60,COMPOSITION:61,DEPENDENCY:62,LOLLIPOP:63,LINE:64,DOTTED_LINE:65,CALLBACK:66,LINK:67,LINK_TARGET:68,CLICK:69,CALLBACK_NAME:70,CALLBACK_ARGS:71,HREF:72,STYLE:73,ALPHA:74,stylesOpt:75,CSSCLASS:76,style:77,COMMA:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,commentToken:86,textToken:87,graphCodeTokens:88,textNoTagsToken:89,TAGSTART:90,TAGEND:91,"==":92,"--":93,DEFAULT:94,MINUS:95,keywords:96,UNICODE_TEXT:97,BQUOTE_STR:98,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",19:"GENERICTYPE",21:"LABEL",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",37:"STRUCT_START",39:"STRUCT_STOP",40:"NAMESPACE",42:"STYLE_SEPARATOR",44:"CLASS",45:"ANNOTATION_START",46:"ANNOTATION_END",47:"MEMBER",48:"SEPARATOR",50:"NOTE_FOR",52:"NOTE",53:"direction_tb",54:"direction_bt",55:"direction_rl",56:"direction_lr",59:"AGGREGATION",60:"EXTENSION",61:"COMPOSITION",62:"DEPENDENCY",63:"LOLLIPOP",64:"LINE",65:"DOTTED_LINE",66:"CALLBACK",67:"LINK",68:"LINK_TARGET",69:"CLICK",70:"CALLBACK_NAME",71:"CALLBACK_ARGS",72:"HREF",73:"STYLE",74:"ALPHA",76:"CSSCLASS",78:"COMMA",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",88:"graphCodeTokens",90:"TAGSTART",91:"TAGEND",92:"==",93:"--",94:"DEFAULT",95:"MINUS",96:"keywords",97:"UNICODE_TEXT",98:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,2],[17,1],[17,1],[17,2],[17,2],[17,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[22,4],[22,5],[36,2],[38,1],[38,2],[38,3],[23,1],[23,3],[23,4],[23,6],[41,2],[41,3],[25,4],[43,1],[43,2],[24,1],[24,2],[24,1],[24,1],[20,3],[20,4],[20,4],[20,5],[29,3],[29,2],[30,1],[30,1],[30,1],[30,1],[49,3],[49,2],[49,2],[49,1],[57,1],[57,1],[57,1],[57,1],[57,1],[58,1],[58,1],[26,3],[26,4],[26,3],[26,4],[26,4],[26,5],[26,3],[26,4],[26,4],[26,5],[26,4],[26,5],[26,5],[26,6],[27,3],[28,3],[75,1],[75,3],[77,1],[77,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[86,1],[86,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[89,1],[89,1],[89,1],[89,1],[16,1],[16,1],[16,1],[16,1],[18,1],[51,1]],performAction:function(pt,ut,ot,lt,ht,X,rt){var et=X.length-1;switch(ht){case 8:this.$=X[et-1];break;case 9:case 11:case 12:this.$=X[et];break;case 10:case 13:this.$=X[et-1]+X[et];break;case 14:case 15:this.$=X[et-1]+"~"+X[et]+"~";break;case 16:lt.addRelation(X[et]);break;case 17:X[et-1].title=lt.cleanupLabel(X[et]),lt.addRelation(X[et-1]);break;case 27:this.$=X[et].trim(),lt.setAccTitle(this.$);break;case 28:case 29:this.$=X[et].trim(),lt.setAccDescription(this.$);break;case 30:lt.addClassesToNamespace(X[et-3],X[et-1]);break;case 31:lt.addClassesToNamespace(X[et-4],X[et-1]);break;case 32:this.$=X[et],lt.addNamespace(X[et]);break;case 33:this.$=[X[et]];break;case 34:this.$=[X[et-1]];break;case 35:X[et].unshift(X[et-2]),this.$=X[et];break;case 37:lt.setCssClass(X[et-2],X[et]);break;case 38:lt.addMembers(X[et-3],X[et-1]);break;case 39:lt.setCssClass(X[et-5],X[et-3]),lt.addMembers(X[et-5],X[et-1]);break;case 40:this.$=X[et],lt.addClass(X[et]);break;case 41:this.$=X[et-1],lt.addClass(X[et-1]),lt.setClassLabel(X[et-1],X[et]);break;case 42:lt.addAnnotation(X[et],X[et-2]);break;case 43:this.$=[X[et]];break;case 44:X[et].push(X[et-1]),this.$=X[et];break;case 45:break;case 46:lt.addMember(X[et-1],lt.cleanupLabel(X[et]));break;case 47:break;case 48:break;case 49:this.$={id1:X[et-2],id2:X[et],relation:X[et-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:X[et-3],id2:X[et],relation:X[et-1],relationTitle1:X[et-2],relationTitle2:"none"};break;case 51:this.$={id1:X[et-3],id2:X[et],relation:X[et-2],relationTitle1:"none",relationTitle2:X[et-1]};break;case 52:this.$={id1:X[et-4],id2:X[et],relation:X[et-2],relationTitle1:X[et-3],relationTitle2:X[et-1]};break;case 53:lt.addNote(X[et],X[et-1]);break;case 54:lt.addNote(X[et]);break;case 55:lt.setDirection("TB");break;case 56:lt.setDirection("BT");break;case 57:lt.setDirection("RL");break;case 58:lt.setDirection("LR");break;case 59:this.$={type1:X[et-2],type2:X[et],lineType:X[et-1]};break;case 60:this.$={type1:"none",type2:X[et],lineType:X[et-1]};break;case 61:this.$={type1:X[et-1],type2:"none",lineType:X[et]};break;case 62:this.$={type1:"none",type2:"none",lineType:X[et]};break;case 63:this.$=lt.relationType.AGGREGATION;break;case 64:this.$=lt.relationType.EXTENSION;break;case 65:this.$=lt.relationType.COMPOSITION;break;case 66:this.$=lt.relationType.DEPENDENCY;break;case 67:this.$=lt.relationType.LOLLIPOP;break;case 68:this.$=lt.lineType.LINE;break;case 69:this.$=lt.lineType.DOTTED_LINE;break;case 70:case 76:this.$=X[et-2],lt.setClickEvent(X[et-1],X[et]);break;case 71:case 77:this.$=X[et-3],lt.setClickEvent(X[et-2],X[et-1]),lt.setTooltip(X[et-2],X[et]);break;case 72:this.$=X[et-2],lt.setLink(X[et-1],X[et]);break;case 73:this.$=X[et-3],lt.setLink(X[et-2],X[et-1],X[et]);break;case 74:this.$=X[et-3],lt.setLink(X[et-2],X[et-1]),lt.setTooltip(X[et-2],X[et]);break;case 75:this.$=X[et-4],lt.setLink(X[et-3],X[et-2],X[et]),lt.setTooltip(X[et-3],X[et-1]);break;case 78:this.$=X[et-3],lt.setClickEvent(X[et-2],X[et-1],X[et]);break;case 79:this.$=X[et-4],lt.setClickEvent(X[et-3],X[et-2],X[et-1]),lt.setTooltip(X[et-3],X[et]);break;case 80:this.$=X[et-3],lt.setLink(X[et-2],X[et]);break;case 81:this.$=X[et-4],lt.setLink(X[et-3],X[et-1],X[et]);break;case 82:this.$=X[et-4],lt.setLink(X[et-3],X[et-1]),lt.setTooltip(X[et-3],X[et]);break;case 83:this.$=X[et-5],lt.setLink(X[et-4],X[et-2],X[et]),lt.setTooltip(X[et-4],X[et-1]);break;case 84:this.$=X[et-2],lt.setCssStyle(X[et-1],X[et]);break;case 85:lt.setCssClass(X[et-1],X[et]);break;case 86:this.$=[X[et]];break;case 87:X[et-2].push(X[et]),this.$=X[et-2];break;case 89:this.$=X[et-1]+X[et];break}},table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:f,54:d,55:p,56:y,66:x,67:_,69:C,73:k,74:R,76:F,80:L,95:E,97:I,98:S},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(b,[2,5],{8:[1,46]}),{8:[1,47]},t(T,[2,16],{21:[1,48]}),t(T,[2,18]),t(T,[2,19]),t(T,[2,20]),t(T,[2,21]),t(T,[2,22]),t(T,[2,23]),t(T,[2,24]),t(T,[2,25]),t(T,[2,26]),{32:[1,49]},{34:[1,50]},t(T,[2,29]),t(T,[2,45],{49:51,57:54,58:55,13:[1,52],21:[1,53],59:g,60:w,61:m,62:P,63:j,64:N,65:v}),{37:[1,63]},t(D,[2,36],{37:[1,65],42:[1,64]}),t(T,[2,47]),t(T,[2,48]),{16:66,74:R,80:L,95:E,97:I},{16:37,17:67,18:38,74:R,80:L,95:E,97:I,98:S},{16:37,17:68,18:38,74:R,80:L,95:E,97:I,98:S},{16:37,17:69,18:38,74:R,80:L,95:E,97:I,98:S},{74:[1,70]},{13:[1,71]},{16:37,17:72,18:38,74:R,80:L,95:E,97:I,98:S},{13:B,51:73},t(T,[2,55]),t(T,[2,56]),t(T,[2,57]),t(T,[2,58]),t(z,[2,11],{16:37,18:38,17:75,19:[1,76],74:R,80:L,95:E,97:I,98:S}),t(z,[2,12],{19:[1,77]}),{15:78,16:79,74:R,80:L,95:E,97:I},{16:37,17:80,18:38,74:R,80:L,95:E,97:I,98:S},t(q,[2,112]),t(q,[2,113]),t(q,[2,114]),t(q,[2,115]),t([1,8,9,12,13,19,21,37,39,42,59,60,61,62,63,64,65,70,72],[2,116]),t(b,[2,6],{10:5,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,17:20,36:21,41:22,16:37,18:38,5:81,31:e,33:i,35:r,40:s,44:n,45:a,47:o,48:l,50:h,52:u,53:f,54:d,55:p,56:y,66:x,67:_,69:C,73:k,74:R,76:F,80:L,95:E,97:I,98:S}),{5:82,10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:f,54:d,55:p,56:y,66:x,67:_,69:C,73:k,74:R,76:F,80:L,95:E,97:I,98:S},t(T,[2,17]),t(T,[2,27]),t(T,[2,28]),{13:[1,84],16:37,17:83,18:38,74:R,80:L,95:E,97:I,98:S},{49:85,57:54,58:55,59:g,60:w,61:m,62:P,63:j,64:N,65:v},t(T,[2,46]),{58:86,64:N,65:v},t(st,[2,62],{57:87,59:g,60:w,61:m,62:P,63:j}),t($,[2,63]),t($,[2,64]),t($,[2,65]),t($,[2,66]),t($,[2,67]),t(ft,[2,68]),t(ft,[2,69]),{8:[1,89],23:90,38:88,41:22,44:n},{16:91,74:R,80:L,95:E,97:I},{43:92,47:Q},{46:[1,94]},{13:[1,95]},{13:[1,96]},{70:[1,97],72:[1,98]},{21:H,73:it,74:nt,75:99,77:100,79:101,80:Z,81:tt,82:O,83:at,84:W,85:dt},{74:[1,111]},{13:B,51:112},t(T,[2,54]),t(T,[2,117]),t(z,[2,13]),t(z,[2,14]),t(z,[2,15]),{37:[2,32]},{15:113,16:79,37:[2,9],74:R,80:L,95:E,97:I},t(M,[2,40],{11:114,12:[1,115]}),t(b,[2,7]),{9:[1,116]},t(wt,[2,49]),{16:37,17:117,18:38,74:R,80:L,95:E,97:I,98:S},{13:[1,119],16:37,17:118,18:38,74:R,80:L,95:E,97:I,98:S},t(st,[2,61],{57:120,59:g,60:w,61:m,62:P,63:j}),t(st,[2,60]),{39:[1,121]},{23:90,38:122,41:22,44:n},{8:[1,123],39:[2,33]},t(D,[2,37],{37:[1,124]}),{39:[1,125]},{39:[2,43],43:126,47:Q},{16:37,17:127,18:38,74:R,80:L,95:E,97:I,98:S},t(T,[2,70],{13:[1,128]}),t(T,[2,72],{13:[1,130],68:[1,129]}),t(T,[2,76],{13:[1,131],71:[1,132]}),{13:[1,133]},t(T,[2,84],{78:[1,134]}),t(G,[2,86],{79:135,21:H,73:it,74:nt,80:Z,81:tt,82:O,83:at,84:W,85:dt}),t(vt,[2,88]),t(vt,[2,90]),t(vt,[2,91]),t(vt,[2,92]),t(vt,[2,93]),t(vt,[2,94]),t(vt,[2,95]),t(vt,[2,96]),t(vt,[2,97]),t(vt,[2,98]),t(T,[2,85]),t(T,[2,53]),{37:[2,10]},t(M,[2,41]),{13:[1,136]},{1:[2,4]},t(wt,[2,51]),t(wt,[2,50]),{16:37,17:137,18:38,74:R,80:L,95:E,97:I,98:S},t(st,[2,59]),t(T,[2,30]),{39:[1,138]},{23:90,38:139,39:[2,34],41:22,44:n},{43:140,47:Q},t(D,[2,38]),{39:[2,44]},t(T,[2,42]),t(T,[2,71]),t(T,[2,73]),t(T,[2,74],{68:[1,141]}),t(T,[2,77]),t(T,[2,78],{13:[1,142]}),t(T,[2,80],{13:[1,144],68:[1,143]}),{21:H,73:it,74:nt,77:145,79:101,80:Z,81:tt,82:O,83:at,84:W,85:dt},t(vt,[2,89]),{14:[1,146]},t(wt,[2,52]),t(T,[2,31]),{39:[2,35]},{39:[1,147]},t(T,[2,75]),t(T,[2,79]),t(T,[2,81]),t(T,[2,82],{68:[1,148]}),t(G,[2,87],{79:135,21:H,73:it,74:nt,80:Z,81:tt,82:O,83:at,84:W,85:dt}),t(M,[2,8]),t(D,[2,39]),t(T,[2,83])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],78:[2,32],113:[2,10],116:[2,4],126:[2,44],139:[2,35]},parseError:function(pt,ut){if(ut.recoverable)this.trace(pt);else{var ot=new Error(pt);throw ot.hash=ut,ot}},parse:function(pt){var ut=this,ot=[0],lt=[],ht=[null],X=[],rt=this.table,et="",ct=0,te=0,Qt=2,ue=1,Vt=X.slice.call(arguments,1),jt=Object.create(this.lexer),zt={yy:{}};for(var _e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_e)&&(zt.yy[_e]=this.yy[_e]);jt.setInput(pt,zt.yy),zt.yy.lexer=jt,zt.yy.parser=this,typeof jt.yylloc>"u"&&(jt.yylloc={});var de=jt.yylloc;X.push(de);var sr=jt.options&&jt.options.ranges;typeof zt.yy.parseError=="function"?this.parseError=zt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Mr(){var It;return It=lt.pop()||jt.lex()||ue,typeof It!="number"&&(It instanceof Array&&(lt=It,It=lt.pop()),It=ut.symbols_[It]||It),It}for(var ye,Xt,ee,Nt,Zt={},Ft,Yt,Ut,Ot;;){if(Xt=ot[ot.length-1],this.defaultActions[Xt]?ee=this.defaultActions[Xt]:((ye===null||typeof ye>"u")&&(ye=Mr()),ee=rt[Xt]&&rt[Xt][ye]),typeof ee>"u"||!ee.length||!ee[0]){var Dt="";Ot=[];for(Ft in rt[Xt])this.terminals_[Ft]&&Ft>Qt&&Ot.push("'"+this.terminals_[Ft]+"'");jt.showPosition?Dt="Parse error on line "+(ct+1)+`:
`+jt.showPosition()+`
Expecting `+Ot.join(", ")+", got '"+(this.terminals_[ye]||ye)+"'":Dt="Parse error on line "+(ct+1)+": Unexpected "+(ye==ue?"end of input":"'"+(this.terminals_[ye]||ye)+"'"),this.parseError(Dt,{text:jt.match,token:this.terminals_[ye]||ye,line:jt.yylineno,loc:de,expected:Ot})}if(ee[0]instanceof Array&&ee.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xt+", token: "+ye);switch(ee[0]){case 1:ot.push(ye),ht.push(jt.yytext),X.push(jt.yylloc),ot.push(ee[1]),ye=null,te=jt.yyleng,et=jt.yytext,ct=jt.yylineno,de=jt.yylloc;break;case 2:if(Yt=this.productions_[ee[1]][1],Zt.$=ht[ht.length-Yt],Zt._$={first_line:X[X.length-(Yt||1)].first_line,last_line:X[X.length-1].last_line,first_column:X[X.length-(Yt||1)].first_column,last_column:X[X.length-1].last_column},sr&&(Zt._$.range=[X[X.length-(Yt||1)].range[0],X[X.length-1].range[1]]),Nt=this.performAction.apply(Zt,[et,te,ct,zt.yy,ee[1],ht,X].concat(Vt)),typeof Nt<"u")return Nt;Yt&&(ot=ot.slice(0,-1*Yt*2),ht=ht.slice(0,-1*Yt),X=X.slice(0,-1*Yt)),ot.push(this.productions_[ee[1]][0]),ht.push(Zt.$),X.push(Zt._$),Ut=rt[ot[ot.length-2]][ot[ot.length-1]],ot.push(Ut);break;case 3:return!0}}return!0}},Mt=function(){var Wt={EOF:1,parseError:function(ut,ot){if(this.yy.parser)this.yy.parser.parseError(ut,ot);else throw new Error(ut)},setInput:function(pt,ut){return this.yy=ut||this.yy||{},this._input=pt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var pt=this._input[0];this.yytext+=pt,this.yyleng++,this.offset++,this.match+=pt,this.matched+=pt;var ut=pt.match(/(?:\r\n?|\n).*/g);return ut?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),pt},unput:function(pt){var ut=pt.length,ot=pt.split(/(?:\r\n?|\n)/g);this._input=pt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ut),this.offset-=ut;var lt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ot.length-1&&(this.yylineno-=ot.length-1);var ht=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ot?(ot.length===lt.length?this.yylloc.first_column:0)+lt[lt.length-ot.length].length-ot[0].length:this.yylloc.first_column-ut},this.options.ranges&&(this.yylloc.range=[ht[0],ht[0]+this.yyleng-ut]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(pt){this.unput(this.match.slice(pt))},pastInput:function(){var pt=this.matched.substr(0,this.matched.length-this.match.length);return(pt.length>20?"...":"")+pt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var pt=this.match;return pt.length<20&&(pt+=this._input.substr(0,20-pt.length)),(pt.substr(0,20)+(pt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pt=this.pastInput(),ut=new Array(pt.length+1).join("-");return pt+this.upcomingInput()+`
`+ut+"^"},test_match:function(pt,ut){var ot,lt,ht;if(this.options.backtrack_lexer&&(ht={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ht.yylloc.range=this.yylloc.range.slice(0))),lt=pt[0].match(/(?:\r\n?|\n).*/g),lt&&(this.yylineno+=lt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lt?lt[lt.length-1].length-lt[lt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+pt[0].length},this.yytext+=pt[0],this.match+=pt[0],this.matches=pt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(pt[0].length),this.matched+=pt[0],ot=this.performAction.call(this,this.yy,this,ut,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ot)return ot;if(this._backtrack){for(var X in ht)this[X]=ht[X];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var pt,ut,ot,lt;this._more||(this.yytext="",this.match="");for(var ht=this._currentRules(),X=0;X<ht.length;X++)if(ot=this._input.match(this.rules[ht[X]]),ot&&(!ut||ot[0].length>ut[0].length)){if(ut=ot,lt=X,this.options.backtrack_lexer){if(pt=this.test_match(ot,ht[X]),pt!==!1)return pt;if(this._backtrack){ut=!1;continue}else return!1}else if(!this.options.flex)break}return ut?(pt=this.test_match(ut,ht[lt]),pt!==!1?pt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ut=this.next();return ut||this.lex()},begin:function(ut){this.conditionStack.push(ut)},popState:function(){var ut=this.conditionStack.length-1;return ut>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ut){return ut=this.conditionStack.length-1-Math.abs(ut||0),ut>=0?this.conditionStack[ut]:"INITIAL"},pushState:function(ut){this.begin(ut)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ut,ot,lt,ht){switch(lt){case 0:return 53;case 1:return 54;case 2:return 55;case 3:return 56;case 4:break;case 5:break;case 6:return this.begin("acc_title"),31;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),33;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 70;case 22:this.popState();break;case 23:return 71;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 73;case 28:return this.begin("namespace"),40;case 29:return this.popState(),8;case 30:break;case 31:return this.begin("namespace-body"),37;case 32:return this.popState(),39;case 33:return"EOF_IN_STRUCT";case 34:return 8;case 35:break;case 36:return"EDGE_STATE";case 37:return this.begin("class"),44;case 38:return this.popState(),8;case 39:break;case 40:return this.popState(),this.popState(),39;case 41:return this.begin("class-body"),37;case 42:return this.popState(),39;case 43:return"EOF_IN_STRUCT";case 44:return"EDGE_STATE";case 45:return"OPEN_IN_STRUCT";case 46:break;case 47:return"MEMBER";case 48:return 76;case 49:return 66;case 50:return 67;case 51:return 69;case 52:return 50;case 53:return 52;case 54:return 45;case 55:return 46;case 56:return 72;case 57:this.popState();break;case 58:return"GENERICTYPE";case 59:this.begin("generic");break;case 60:this.popState();break;case 61:return"BQUOTE_STR";case 62:this.begin("bqstring");break;case 63:return 68;case 64:return 68;case 65:return 68;case 66:return 68;case 67:return 60;case 68:return 60;case 69:return 62;case 70:return 62;case 71:return 61;case 72:return 59;case 73:return 63;case 74:return 64;case 75:return 65;case 76:return 21;case 77:return 42;case 78:return 95;case 79:return"DOT";case 80:return"PLUS";case 81:return 81;case 82:return 78;case 83:return 84;case 84:return 84;case 85:return 85;case 86:return"EQUALS";case 87:return"EQUALS";case 88:return 74;case 89:return 12;case 90:return 14;case 91:return"PUNCTUATION";case 92:return 80;case 93:return 97;case 94:return 83;case 95:return 83;case 96:return 9}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,32,33,34,35,36,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},namespace:{rules:[26,28,29,30,31,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},"class-body":{rules:[26,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},class:{rules:[26,38,39,40,41,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr:{rules:[9,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_title:{rules:[7,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_args:{rules:[22,23,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_name:{rules:[19,20,21,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},href:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},struct:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},generic:{rules:[26,48,49,50,51,52,53,54,55,56,57,58,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},bqstring:{rules:[26,48,49,50,51,52,53,54,55,56,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},string:{rules:[24,25,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],inclusive:!0}}};return Wt}();bt.lexer=Mt;function Bt(){this.yy={}}return Bt.prototype=bt,bt.Parser=Bt,new Bt}();Eo.parser=Eo;const j0=Eo,Wc=["#","+","~","-",""];class Yc{constructor(e,i){this.memberType=i,this.visibility="",this.classifier="";const r=ve(e,Y());this.parseMember(r)}getDisplayDetails(){let e=this.visibility+Ts(this.id);this.memberType==="method"&&(e+=`(${Ts(this.parameters.trim())})`,this.returnType&&(e+=" : "+Ts(this.returnType))),e=e.trim();const i=this.parseClassifier();return{displayText:e,cssStyle:i}}parseMember(e){let i="";if(this.memberType==="method"){const r=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/,s=e.match(r);if(s){const n=s[1]?s[1].trim():"";if(Wc.includes(n)&&(this.visibility=n),this.id=s[2].trim(),this.parameters=s[3]?s[3].trim():"",i=s[4]?s[4].trim():"",this.returnType=s[5]?s[5].trim():"",i===""){const a=this.returnType.substring(this.returnType.length-1);a.match(/[$*]/)&&(i=a,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const r=e.length,s=e.substring(0,1),n=e.substring(r-1);Wc.includes(s)&&(this.visibility=s),n.match(/[$*]/)&&(i=n),this.id=e.substring(this.visibility===""?0:1,i===""?r:r-1)}this.classifier=i}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}const Ca="classId-";let wl=[],Jt={},Jn=[],Uc=0,gr={},vo=0,Us=[];const Ir=t=>mt.sanitizeText(t,Y()),Fr=function(t){const e=mt.sanitizeText(t,Y());let i="",r=e;if(e.indexOf("~")>0){const s=e.split("~");r=Ir(s[0]),i=Ir(s[1])}return{className:r,type:i}},h7=function(t,e){const i=mt.sanitizeText(t,Y());e&&(e=Ir(e));const{className:r}=Fr(i);Jt[r].label=e},ta=function(t){const e=mt.sanitizeText(t,Y()),{className:i,type:r}=Fr(e);if(Object.hasOwn(Jt,i))return;const s=mt.sanitizeText(i,Y());Jt[s]={id:s,type:r,label:s,cssClasses:[],methods:[],members:[],annotations:[],styles:[],domId:Ca+s+"-"+Uc},Uc++},X0=function(t){const e=mt.sanitizeText(t,Y());if(e in Jt)return Jt[e].domId;throw new Error("Class not found: "+e)},u7=function(){wl=[],Jt={},Jn=[],Us=[],Us.push(K0),gr={},vo=0,We()},d7=function(t){return Jt[t]},f7=function(){return Jt},p7=function(){return wl},g7=function(){return Jn},y7=function(t){A.debug("Adding relation: "+JSON.stringify(t)),ta(t.id1),ta(t.id2),t.id1=Fr(t.id1).className,t.id2=Fr(t.id2).className,t.relationTitle1=mt.sanitizeText(t.relationTitle1.trim(),Y()),t.relationTitle2=mt.sanitizeText(t.relationTitle2.trim(),Y()),wl.push(t)},m7=function(t,e){const i=Fr(t).className;Jt[i].annotations.push(e)},$0=function(t,e){ta(t);const i=Fr(t).className,r=Jt[i];if(typeof e=="string"){const s=e.trim();s.startsWith("<<")&&s.endsWith(">>")?r.annotations.push(Ir(s.substring(2,s.length-2))):s.indexOf(")")>0?r.methods.push(new Yc(s,"method")):s&&r.members.push(new Yc(s,"attribute"))}},x7=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(i=>$0(t,i)))},b7=function(t,e){const i={id:`note${Jn.length}`,class:e,text:t};Jn.push(i)},k7=function(t){return t.startsWith(":")&&(t=t.substring(1)),Ir(t.trim())},Al=function(t,e){t.split(",").forEach(function(i){let r=i;i[0].match(/\d/)&&(r=Ca+r),Jt[r]!==void 0&&Jt[r].cssClasses.push(e)})},_7=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Jt[i].tooltip=Ir(e))})},T7=function(t,e){return e?gr[e].classes[t].tooltip:Jt[t].tooltip},C7=function(t,e,i){const r=Y();t.split(",").forEach(function(s){let n=s;s[0].match(/\d/)&&(n=Ca+n),Jt[n]!==void 0&&(Jt[n].link=Rt.formatUrl(e,r),r.securityLevel==="sandbox"?Jt[n].linkTarget="_top":typeof i=="string"?Jt[n].linkTarget=Ir(i):Jt[n].linkTarget="_blank")}),Al(t,"clickable")},E7=function(t,e,i){t.split(",").forEach(function(r){v7(r,e,i),Jt[r].haveCallback=!0}),Al(t,"clickable")},v7=function(t,e,i){const r=mt.sanitizeText(t,Y());if(Y().securityLevel!=="loose"||e===void 0)return;const n=r;if(Jt[n]!==void 0){const a=X0(n);let o=[];if(typeof i=="string"){o=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let l=0;l<o.length;l++){let h=o[l].trim();h.charAt(0)==='"'&&h.charAt(h.length-1)==='"'&&(h=h.substr(1,h.length-2)),o[l]=h}}o.length===0&&o.push(a),Us.push(function(){const l=document.querySelector(`[id="${a}"]`);l!==null&&l.addEventListener("click",function(){Rt.runFunc(e,...o)},!1)})}},S7=function(t){Us.forEach(function(e){e(t)})},w7={LINE:0,DOTTED_LINE:1},A7={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},K0=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};Us.push(K0);let Q0="TB";const L7=()=>Q0,B7=t=>{Q0=t},I7=function(t){gr[t]===void 0&&(gr[t]={id:t,classes:{},children:{},domId:Ca+t+"-"+vo},vo++)},F7=function(t){return gr[t]},R7=function(){return gr},D7=function(t,e){if(gr[t]!==void 0)for(const i of e){const{className:r}=Fr(i);Jt[r].parent=t,gr[t].classes[r]=Jt[r]}},N7=function(t,e){const i=Jt[t];if(!(!e||!i))for(const r of e)r.includes(",")?i.styles.push(...r.split(",")):i.styles.push(r)},ea={setAccTitle:Ne,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,getConfig:()=>Y().class,addClass:ta,bindFunctions:S7,clear:u7,getClass:d7,getClasses:f7,getNotes:g7,addAnnotation:m7,addNote:b7,getRelations:p7,addRelation:y7,getDirection:L7,setDirection:B7,addMember:$0,addMembers:x7,cleanupLabel:k7,lineType:w7,relationType:A7,setClickEvent:E7,setCssClass:Al,setLink:C7,getTooltip:T7,setTooltip:_7,lookUpDomId:X0,setDiagramTitle:ei,getDiagramTitle:Ge,setClassLabel:h7,addNamespace:I7,addClassesToNamespace:D7,getNamespace:F7,getNamespaces:R7,setCssStyle:N7},O7=t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,Z0=O7;let Hc=0;const P7=function(t,e,i,r,s){const n=function(k){switch(k){case s.db.relationType.AGGREGATION:return"aggregation";case s.db.relationType.EXTENSION:return"extension";case s.db.relationType.COMPOSITION:return"composition";case s.db.relationType.DEPENDENCY:return"dependency";case s.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(k=>!Number.isNaN(k.y));const a=e.points,o=fr().x(function(k){return k.x}).y(function(k){return k.y}).curve(Zs),l=t.append("path").attr("d",o(a)).attr("id","edge"+Hc).attr("class","relation");let h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),i.relation.lineType==1&&l.attr("class","relation dashed-line"),i.relation.lineType==10&&l.attr("class","relation dotted-line"),i.relation.type1!=="none"&&l.attr("marker-start","url("+h+"#"+n(i.relation.type1)+"Start)"),i.relation.type2!=="none"&&l.attr("marker-end","url("+h+"#"+n(i.relation.type2)+"End)");let u,f;const d=e.points.length;let p=Rt.calcLabelPosition(e.points);u=p.x,f=p.y;let y,x,_,C;if(d%2!==0&&d>1){let k=Rt.calcCardinalityPosition(i.relation.type1!=="none",e.points,e.points[0]),R=Rt.calcCardinalityPosition(i.relation.type2!=="none",e.points,e.points[d-1]);A.debug("cardinality_1_point "+JSON.stringify(k)),A.debug("cardinality_2_point "+JSON.stringify(R)),y=k.x,x=k.y,_=R.x,C=R.y}if(i.title!==void 0){const k=t.append("g").attr("class","classLabel"),R=k.append("text").attr("class","label").attr("x",u).attr("y",f).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=R;const F=R.node().getBBox();k.insert("rect",":first-child").attr("class","box").attr("x",F.x-r.padding/2).attr("y",F.y-r.padding/2).attr("width",F.width+r.padding).attr("height",F.height+r.padding)}A.info("Rendering relation "+JSON.stringify(i)),i.relationTitle1!==void 0&&i.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",y).attr("y",x).attr("fill","black").attr("font-size","6").text(i.relationTitle1),i.relationTitle2!==void 0&&i.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",_).attr("y",C).attr("fill","black").attr("font-size","6").text(i.relationTitle2),Hc++},M7=function(t,e,i,r){A.debug("Rendering class ",e,i);const s=e.id,n={id:s,label:e.id,width:0,height:0},a=t.append("g").attr("id",r.db.lookUpDomId(s)).attr("class","classGroup");let o;e.link?o=a.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let l=!0;e.annotations.forEach(function(R){const F=o.append("tspan").text(""+R+"");l||F.attr("dy",i.textHeight),l=!1});let h=J0(e);const u=o.append("tspan").text(h).attr("class","title");l||u.attr("dy",i.textHeight);const f=o.node().getBBox().height;let d,p,y;if(e.members.length>0){d=a.append("line").attr("x1",0).attr("y1",i.padding+f+i.dividerMargin/2).attr("y2",i.padding+f+i.dividerMargin/2);const R=a.append("text").attr("x",i.padding).attr("y",f+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(F){Gc(R,F,l,i),l=!1}),p=R.node().getBBox()}if(e.methods.length>0){y=a.append("line").attr("x1",0).attr("y1",i.padding+f+i.dividerMargin+p.height).attr("y2",i.padding+f+i.dividerMargin+p.height);const R=a.append("text").attr("x",i.padding).attr("y",f+2*i.dividerMargin+p.height+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(F){Gc(R,F,l,i),l=!1})}const x=a.node().getBBox();var _=" ";e.cssClasses.length>0&&(_=_+e.cssClasses.join(" "));const k=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",x.width+2*i.padding).attr("height",x.height+i.padding+.5*i.dividerMargin).attr("class",_).node().getBBox().width;return o.node().childNodes.forEach(function(R){R.setAttribute("x",(k-R.getBBox().width)/2)}),e.tooltip&&o.insert("title").text(e.tooltip),d&&d.attr("x2",k),y&&y.attr("x2",k),n.width=k,n.height=x.height+i.padding+.5*i.dividerMargin,n},J0=function(t){let e=t.id;return t.type&&(e+="<"+Ts(t.type)+">"),e},V7=function(t,e,i,r){A.debug("Rendering note ",e,i);const s=e.id,n={id:s,text:e.text,width:0,height:0},a=t.append("g").attr("id",s).attr("class","classGroup");let o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split(`
`);l.forEach(function(d){A.debug(`Adding line: ${d}`),o.append("tspan").text(d).attr("class","title").attr("dy",i.textHeight)});const h=a.node().getBBox(),f=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",h.width+2*i.padding).attr("height",h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return o.node().childNodes.forEach(function(d){d.setAttribute("x",(f-d.getBBox().width)/2)}),n.width=f,n.height=h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin,n},Gc=function(t,e,i,r){const{displayText:s,cssStyle:n}=e.getDisplayDetails(),a=t.append("tspan").attr("x",r.padding).text(s);n!==""&&a.attr("style",e.cssStyle),i||a.attr("dy",r.textHeight)},qa={getClassTitleString:J0,drawClass:M7,drawEdge:P7,drawNote:V7};let Sn={};const yn=20,ys=function(t){const e=Object.entries(Sn).find(i=>i[1].label===t);if(e)return e[0]},q7=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},z7=function(t,e,i,r){const s=Y().class;Sn={},A.info("Rendering diagram "+t);const n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=o.select(`[id='${e}']`);q7(l);const h=new Ji({multigraph:!0});h.setGraph({isMultiGraph:!0}),h.setDefaultEdgeLabel(function(){return{}});const u=r.db.getClasses(),f=Object.keys(u);for(const k of f){const R=u[k],F=qa.drawClass(l,R,s,r);Sn[F.id]=F,h.setNode(F.id,F),A.info("Org height: "+F.height)}r.db.getRelations().forEach(function(k){A.info("tjoho"+ys(k.id1)+ys(k.id2)+JSON.stringify(k)),h.setEdge(ys(k.id1),ys(k.id2),{relation:k},k.title||"DEFAULT")}),r.db.getNotes().forEach(function(k){A.debug(`Adding note: ${JSON.stringify(k)}`);const R=qa.drawNote(l,k,s,r);Sn[R.id]=R,h.setNode(R.id,R),k.class&&k.class in u&&h.setEdge(k.id,ys(k.class),{relation:{id1:k.id,id2:k.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),Qs(h),h.nodes().forEach(function(k){k!==void 0&&h.node(k)!==void 0&&(A.debug("Node "+k+": "+JSON.stringify(h.node(k))),o.select("#"+(r.db.lookUpDomId(k)||k)).attr("transform","translate("+(h.node(k).x-h.node(k).width/2)+","+(h.node(k).y-h.node(k).height/2)+" )"))}),h.edges().forEach(function(k){k!==void 0&&h.edge(k)!==void 0&&(A.debug("Edge "+k.v+" -> "+k.w+": "+JSON.stringify(h.edge(k))),qa.drawEdge(l,h.edge(k),h.edge(k).relation,s,r))});const y=l.node().getBBox(),x=y.width+yn*2,_=y.height+yn*2;ze(l,_,x,s.useMaxWidth);const C=`${y.x-yn} ${y.y-yn} ${x} ${_}`;A.debug(`viewBox ${C}`),l.attr("viewBox",C)},W7={draw:z7},Y7={parser:j0,db:ea,renderer:W7,styles:Z0,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ea.clear()}},U7=Object.freeze(Object.defineProperty({__proto__:null,diagram:Y7},Symbol.toStringTag,{value:"Module"})),Ll=t=>mt.sanitizeText(t,Y());let So={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const H7=function(t,e,i,r){const s=Object.keys(t);A.info("keys:",s),A.info(t),s.forEach(function(n){var a,o;const l=t[n],u={shape:"rect",id:l.id,domId:l.domId,labelText:Ll(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};e.setNode(l.id,u),td(l.classes,e,i,r,l.id),A.info("setNode",u)})},td=function(t,e,i,r,s){const n=Object.keys(t);A.info("keys:",n),A.info(t),n.filter(a=>t[a].parent==s).forEach(function(a){var o,l;const h=t[a],u=h.cssClasses.join(" "),f=fi(h.styles),d=h.label??h.id,p=0,y="class_box",x={labelStyle:f.labelStyle,shape:y,labelText:Ll(d),classData:h,rx:p,ry:p,class:u,style:f.style,id:h.id,domId:h.domId,tooltip:r.db.getTooltip(h.id,s)||"",haveCallback:h.haveCallback,link:h.link,width:h.type==="group"?500:void 0,type:h.type,padding:((o=Y().flowchart)==null?void 0:o.padding)??((l=Y().class)==null?void 0:l.padding)};e.setNode(h.id,x),s&&e.setParent(h.id,s),A.info("setNode",x)})},G7=function(t,e,i,r){A.info(t),t.forEach(function(s,n){var a,o;const l=s,h="",u={labelStyle:"",style:""},f=l.text,d=0,p="note",y={labelStyle:u.labelStyle,shape:p,labelText:Ll(f),noteData:l,rx:d,ry:d,class:h,style:u.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};if(e.setNode(l.id,y),A.info("setNode",y),!l.class||!(l.class in r))return;const x=i+n,_={id:`edgeNote${x}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:hi(So.curve,ti)};e.setEdge(l.id,l.class,_,x)})},j7=function(t,e){const i=Y().flowchart;let r=0;t.forEach(function(s){var n;r++;const a={classes:"relation",pattern:s.relation.lineType==1?"dashed":"solid",id:`id_${s.id1}_${s.id2}_${r}`,arrowhead:s.type==="arrow_open"?"none":"normal",startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowTypeStart:jc(s.relation.type1),arrowTypeEnd:jc(s.relation.type2),style:"fill:none",labelStyle:"",curve:hi(i?.curve,ti)};if(A.info(a,s),s.style!==void 0){const o=fi(s.style);a.style=o.style,a.labelStyle=o.labelStyle}s.text=s.title,s.text===void 0?s.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",((n=Y().flowchart)==null?void 0:n.htmlLabels)??Y().htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+s.text+"</span>"):(a.labelType="text",a.label=s.text.replace(mt.lineBreakRegex,`
`),s.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(s.id1,s.id2,a,r)})},X7=function(t){So={...So,...t}},$7=async function(t,e,i,r){A.info("Drawing class - ",e);const s=Y().flowchart??Y().class,n=Y().securityLevel;A.info("config:",s);const a=s?.nodeSpacing??50,o=s?.rankSpacing??50,l=new Ji({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=r.db.getNamespaces(),u=r.db.getClasses(),f=r.db.getRelations(),d=r.db.getNotes();A.info(f),H7(h,l,e,r),td(u,l,e,r),j7(f,l),G7(d,l,f.length+1,u);let p;n==="sandbox"&&(p=yt("#i"+e));const y=n==="sandbox"?yt(p.nodes()[0].contentDocument.body):yt("body"),x=y.select(`[id="${e}"]`),_=y.select("#"+e+" g");if(await ol(_,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Rt.insertTitle(x,"classTitleText",s?.titleTopMargin??5,r.db.getDiagramTitle()),yr(l,x,s?.diagramPadding,s?.useMaxWidth),!s?.htmlLabels){const C=n==="sandbox"?p.nodes()[0].contentDocument:document,k=C.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const R of k){const F=R.getBBox(),L=C.createElementNS("http://www.w3.org/2000/svg","rect");L.setAttribute("rx",0),L.setAttribute("ry",0),L.setAttribute("width",F.width),L.setAttribute("height",F.height),R.insertBefore(L,R.firstChild)}}};function jc(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const K7={setConf:X7,draw:$7},Q7={parser:j0,db:ea,renderer:K7,styles:Z0,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ea.clear()}},Z7=Object.freeze(Object.defineProperty({__proto__:null,diagram:Q7},Symbol.toStringTag,{value:"Module"}));var wo=function(){var t=function(v,D,B,z){for(B=B||{},z=v.length;z--;B[v[z]]=D);return B},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,15],l=[1,16],h=[1,17],u=[1,18],f=[1,30],d=[1,19],p=[1,20],y=[1,21],x=[1,22],_=[1,23],C=[1,25],k=[1,26],R=[1,27],F=[1,28],L=[1,29],E=[1,32],I=[1,33],S=[1,34],b=[1,35],T=[1,31],g=[1,4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],w=[1,4,5,13,14,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],m=[4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],P={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,cssClassStatement:11,idStatement:12,DESCR:13,"-->":14,HIDE_EMPTY:15,scale:16,WIDTH:17,COMPOSIT_STATE:18,STRUCT_START:19,STRUCT_STOP:20,STATE_DESCR:21,AS:22,ID:23,FORK:24,JOIN:25,CHOICE:26,CONCURRENT:27,note:28,notePosition:29,NOTE_TEXT:30,direction:31,acc_title:32,acc_title_value:33,acc_descr:34,acc_descr_value:35,acc_descr_multiline_value:36,classDef:37,CLASSDEF_ID:38,CLASSDEF_STYLEOPTS:39,DEFAULT:40,class:41,CLASSENTITY_IDS:42,STYLECLASS:43,direction_tb:44,direction_bt:45,direction_rl:46,direction_lr:47,eol:48,";":49,EDGE_STATE:50,STYLE_SEPARATOR:51,left_of:52,right_of:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",13:"DESCR",14:"-->",15:"HIDE_EMPTY",16:"scale",17:"WIDTH",18:"COMPOSIT_STATE",19:"STRUCT_START",20:"STRUCT_STOP",21:"STATE_DESCR",22:"AS",23:"ID",24:"FORK",25:"JOIN",26:"CHOICE",27:"CONCURRENT",28:"note",30:"NOTE_TEXT",32:"acc_title",33:"acc_title_value",34:"acc_descr",35:"acc_descr_value",36:"acc_descr_multiline_value",37:"classDef",38:"CLASSDEF_ID",39:"CLASSDEF_STYLEOPTS",40:"DEFAULT",41:"class",42:"CLASSENTITY_IDS",43:"STYLECLASS",44:"direction_tb",45:"direction_bt",46:"direction_rl",47:"direction_lr",49:";",50:"EDGE_STATE",51:"STYLE_SEPARATOR",52:"left_of",53:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[31,1],[31,1],[31,1],[31,1],[48,1],[48,1],[12,1],[12,1],[12,3],[12,3],[29,1],[29,1]],performAction:function(D,B,z,q,st,$,ft){var Q=$.length-1;switch(st){case 3:return q.setRootDoc($[Q]),$[Q];case 4:this.$=[];break;case 5:$[Q]!="nl"&&($[Q-1].push($[Q]),this.$=$[Q-1]);break;case 6:case 7:this.$=$[Q];break;case 8:this.$="nl";break;case 11:this.$=$[Q];break;case 12:const Z=$[Q-1];Z.description=q.trimColon($[Q]),this.$=Z;break;case 13:this.$={stmt:"relation",state1:$[Q-2],state2:$[Q]};break;case 14:const tt=q.trimColon($[Q]);this.$={stmt:"relation",state1:$[Q-3],state2:$[Q-1],description:tt};break;case 18:this.$={stmt:"state",id:$[Q-3],type:"default",description:"",doc:$[Q-1]};break;case 19:var H=$[Q],it=$[Q-2].trim();if($[Q].match(":")){var nt=$[Q].split(":");H=nt[0],it=[it,nt[1]]}this.$={stmt:"state",id:H,type:"default",description:it};break;case 20:this.$={stmt:"state",id:$[Q-3],type:"default",description:$[Q-5],doc:$[Q-1]};break;case 21:this.$={stmt:"state",id:$[Q],type:"fork"};break;case 22:this.$={stmt:"state",id:$[Q],type:"join"};break;case 23:this.$={stmt:"state",id:$[Q],type:"choice"};break;case 24:this.$={stmt:"state",id:q.getDividerId(),type:"divider"};break;case 25:this.$={stmt:"state",id:$[Q-1].trim(),note:{position:$[Q-2].trim(),text:$[Q].trim()}};break;case 28:this.$=$[Q].trim(),q.setAccTitle(this.$);break;case 29:case 30:this.$=$[Q].trim(),q.setAccDescription(this.$);break;case 31:case 32:this.$={stmt:"classDef",id:$[Q-1].trim(),classes:$[Q].trim()};break;case 33:this.$={stmt:"applyClass",id:$[Q-1].trim(),styleClass:$[Q].trim()};break;case 34:q.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 35:q.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 36:q.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 37:q.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 40:case 41:this.$={stmt:"state",id:$[Q].trim(),type:"default",description:""};break;case 42:this.$={stmt:"state",id:$[Q-2].trim(),classes:[$[Q].trim()],type:"default",description:""};break;case 43:this.$={stmt:"state",id:$[Q-2].trim(),classes:[$[Q].trim()],type:"default",description:""};break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,15,16,18,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:f,24:d,25:p,26:y,27:x,28:_,31:24,32:C,34:k,36:R,37:F,41:L,44:E,45:I,46:S,47:b,50:T},t(g,[2,5]),{9:36,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:f,24:d,25:p,26:y,27:x,28:_,31:24,32:C,34:k,36:R,37:F,41:L,44:E,45:I,46:S,47:b,50:T},t(g,[2,7]),t(g,[2,8]),t(g,[2,9]),t(g,[2,10]),t(g,[2,11],{13:[1,37],14:[1,38]}),t(g,[2,15]),{17:[1,39]},t(g,[2,17],{19:[1,40]}),{22:[1,41]},t(g,[2,21]),t(g,[2,22]),t(g,[2,23]),t(g,[2,24]),{29:42,30:[1,43],52:[1,44],53:[1,45]},t(g,[2,27]),{33:[1,46]},{35:[1,47]},t(g,[2,30]),{38:[1,48],40:[1,49]},{42:[1,50]},t(w,[2,40],{51:[1,51]}),t(w,[2,41],{51:[1,52]}),t(g,[2,34]),t(g,[2,35]),t(g,[2,36]),t(g,[2,37]),t(g,[2,6]),t(g,[2,12]),{12:53,23:f,50:T},t(g,[2,16]),t(m,s,{7:54}),{23:[1,55]},{23:[1,56]},{22:[1,57]},{23:[2,44]},{23:[2,45]},t(g,[2,28]),t(g,[2,29]),{39:[1,58]},{39:[1,59]},{43:[1,60]},{23:[1,61]},{23:[1,62]},t(g,[2,13],{13:[1,63]}),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,64],21:u,23:f,24:d,25:p,26:y,27:x,28:_,31:24,32:C,34:k,36:R,37:F,41:L,44:E,45:I,46:S,47:b,50:T},t(g,[2,19],{19:[1,65]}),{30:[1,66]},{23:[1,67]},t(g,[2,31]),t(g,[2,32]),t(g,[2,33]),t(w,[2,42]),t(w,[2,43]),t(g,[2,14]),t(g,[2,18]),t(m,s,{7:68}),t(g,[2,25]),t(g,[2,26]),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,69],21:u,23:f,24:d,25:p,26:y,27:x,28:_,31:24,32:C,34:k,36:R,37:F,41:L,44:E,45:I,46:S,47:b,50:T},t(g,[2,20])],defaultActions:{5:[2,1],6:[2,2],44:[2,44],45:[2,45]},parseError:function(D,B){if(B.recoverable)this.trace(D);else{var z=new Error(D);throw z.hash=B,z}},parse:function(D){var B=this,z=[0],q=[],st=[null],$=[],ft=this.table,Q="",H=0,it=0,nt=2,Z=1,tt=$.slice.call(arguments,1),O=Object.create(this.lexer),at={yy:{}};for(var W in this.yy)Object.prototype.hasOwnProperty.call(this.yy,W)&&(at.yy[W]=this.yy[W]);O.setInput(D,at.yy),at.yy.lexer=O,at.yy.parser=this,typeof O.yylloc>"u"&&(O.yylloc={});var dt=O.yylloc;$.push(dt);var M=O.options&&O.options.ranges;typeof at.yy.parseError=="function"?this.parseError=at.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function wt(){var ht;return ht=q.pop()||O.lex()||Z,typeof ht!="number"&&(ht instanceof Array&&(q=ht,ht=q.pop()),ht=B.symbols_[ht]||ht),ht}for(var G,vt,bt,Mt,Bt={},Wt,pt,ut,ot;;){if(vt=z[z.length-1],this.defaultActions[vt]?bt=this.defaultActions[vt]:((G===null||typeof G>"u")&&(G=wt()),bt=ft[vt]&&ft[vt][G]),typeof bt>"u"||!bt.length||!bt[0]){var lt="";ot=[];for(Wt in ft[vt])this.terminals_[Wt]&&Wt>nt&&ot.push("'"+this.terminals_[Wt]+"'");O.showPosition?lt="Parse error on line "+(H+1)+`:
`+O.showPosition()+`
Expecting `+ot.join(", ")+", got '"+(this.terminals_[G]||G)+"'":lt="Parse error on line "+(H+1)+": Unexpected "+(G==Z?"end of input":"'"+(this.terminals_[G]||G)+"'"),this.parseError(lt,{text:O.match,token:this.terminals_[G]||G,line:O.yylineno,loc:dt,expected:ot})}if(bt[0]instanceof Array&&bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+vt+", token: "+G);switch(bt[0]){case 1:z.push(G),st.push(O.yytext),$.push(O.yylloc),z.push(bt[1]),G=null,it=O.yyleng,Q=O.yytext,H=O.yylineno,dt=O.yylloc;break;case 2:if(pt=this.productions_[bt[1]][1],Bt.$=st[st.length-pt],Bt._$={first_line:$[$.length-(pt||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(pt||1)].first_column,last_column:$[$.length-1].last_column},M&&(Bt._$.range=[$[$.length-(pt||1)].range[0],$[$.length-1].range[1]]),Mt=this.performAction.apply(Bt,[Q,it,H,at.yy,bt[1],st,$].concat(tt)),typeof Mt<"u")return Mt;pt&&(z=z.slice(0,-1*pt*2),st=st.slice(0,-1*pt),$=$.slice(0,-1*pt)),z.push(this.productions_[bt[1]][0]),st.push(Bt.$),$.push(Bt._$),ut=ft[z[z.length-2]][z[z.length-1]],z.push(ut);break;case 3:return!0}}return!0}},j=function(){var v={EOF:1,parseError:function(B,z){if(this.yy.parser)this.yy.parser.parseError(B,z);else throw new Error(B)},setInput:function(D,B){return this.yy=B||this.yy||{},this._input=D,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var D=this._input[0];this.yytext+=D,this.yyleng++,this.offset++,this.match+=D,this.matched+=D;var B=D.match(/(?:\r\n?|\n).*/g);return B?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),D},unput:function(D){var B=D.length,z=D.split(/(?:\r\n?|\n)/g);this._input=D+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-B),this.offset-=B;var q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),z.length-1&&(this.yylineno-=z.length-1);var st=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:z?(z.length===q.length?this.yylloc.first_column:0)+q[q.length-z.length].length-z[0].length:this.yylloc.first_column-B},this.options.ranges&&(this.yylloc.range=[st[0],st[0]+this.yyleng-B]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(D){this.unput(this.match.slice(D))},pastInput:function(){var D=this.matched.substr(0,this.matched.length-this.match.length);return(D.length>20?"...":"")+D.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var D=this.match;return D.length<20&&(D+=this._input.substr(0,20-D.length)),(D.substr(0,20)+(D.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var D=this.pastInput(),B=new Array(D.length+1).join("-");return D+this.upcomingInput()+`
`+B+"^"},test_match:function(D,B){var z,q,st;if(this.options.backtrack_lexer&&(st={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(st.yylloc.range=this.yylloc.range.slice(0))),q=D[0].match(/(?:\r\n?|\n).*/g),q&&(this.yylineno+=q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:q?q[q.length-1].length-q[q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+D[0].length},this.yytext+=D[0],this.match+=D[0],this.matches=D,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(D[0].length),this.matched+=D[0],z=this.performAction.call(this,this.yy,this,B,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),z)return z;if(this._backtrack){for(var $ in st)this[$]=st[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var D,B,z,q;this._more||(this.yytext="",this.match="");for(var st=this._currentRules(),$=0;$<st.length;$++)if(z=this._input.match(this.rules[st[$]]),z&&(!B||z[0].length>B[0].length)){if(B=z,q=$,this.options.backtrack_lexer){if(D=this.test_match(z,st[$]),D!==!1)return D;if(this._backtrack){B=!1;continue}else return!1}else if(!this.options.flex)break}return B?(D=this.test_match(B,st[q]),D!==!1?D:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var B=this.next();return B||this.lex()},begin:function(B){this.conditionStack.push(B)},popState:function(){var B=this.conditionStack.length-1;return B>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(B){return B=this.conditionStack.length-1-Math.abs(B||0),B>=0?this.conditionStack[B]:"INITIAL"},pushState:function(B){this.begin(B)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(B,z,q,st){switch(q){case 0:return 40;case 1:return 44;case 2:return 45;case 3:return 46;case 4:return 47;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),16;case 13:return 17;case 14:this.popState();break;case 15:return this.begin("acc_title"),32;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),34;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),37;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),38;case 25:return this.popState(),39;case 26:return this.pushState("CLASS"),41;case 27:return this.popState(),this.pushState("CLASS_STYLE"),42;case 28:return this.popState(),43;case 29:return this.pushState("SCALE"),16;case 30:return 17;case 31:this.popState();break;case 32:this.pushState("STATE");break;case 33:return this.popState(),z.yytext=z.yytext.slice(0,-8).trim(),24;case 34:return this.popState(),z.yytext=z.yytext.slice(0,-8).trim(),25;case 35:return this.popState(),z.yytext=z.yytext.slice(0,-10).trim(),26;case 36:return this.popState(),z.yytext=z.yytext.slice(0,-8).trim(),24;case 37:return this.popState(),z.yytext=z.yytext.slice(0,-8).trim(),25;case 38:return this.popState(),z.yytext=z.yytext.slice(0,-10).trim(),26;case 39:return 44;case 40:return 45;case 41:return 46;case 42:return 47;case 43:this.pushState("STATE_STRING");break;case 44:return this.pushState("STATE_ID"),"AS";case 45:return this.popState(),"ID";case 46:this.popState();break;case 47:return"STATE_DESCR";case 48:return 18;case 49:this.popState();break;case 50:return this.popState(),this.pushState("struct"),19;case 51:break;case 52:return this.popState(),20;case 53:break;case 54:return this.begin("NOTE"),28;case 55:return this.popState(),this.pushState("NOTE_ID"),52;case 56:return this.popState(),this.pushState("NOTE_ID"),53;case 57:this.popState(),this.pushState("FLOATING_NOTE");break;case 58:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 59:break;case 60:return"NOTE_TEXT";case 61:return this.popState(),"ID";case 62:return this.popState(),this.pushState("NOTE_TEXT"),23;case 63:return this.popState(),z.yytext=z.yytext.substr(2).trim(),30;case 64:return this.popState(),z.yytext=z.yytext.slice(0,-8).trim(),30;case 65:return 6;case 66:return 6;case 67:return 15;case 68:return 50;case 69:return 23;case 70:return z.yytext=z.yytext.trim(),13;case 71:return 14;case 72:return 27;case 73:return 51;case 74:return 5;case 75:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,32,39,40,41,42,51,52,53,54,68,69,70,71,72],inclusive:!1},FLOATING_NOTE_ID:{rules:[61],inclusive:!1},FLOATING_NOTE:{rules:[58,59,60],inclusive:!1},NOTE_TEXT:{rules:[63,64],inclusive:!1},NOTE_ID:{rules:[62],inclusive:!1},NOTE:{rules:[55,56,57],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,30,31],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[45],inclusive:!1},STATE_STRING:{rules:[46,47],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,33,34,35,36,37,38,43,44,48,49,50],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,50,54,65,66,67,68,69,70,71,73,74,75],inclusive:!0}}};return v}();P.lexer=j;function N(){this.yy={}}return N.prototype=P,P.Parser=N,new N}();wo.parser=wo;const ed=wo,J7="LR",tT="TB",ia="state",Bl="relation",eT="classDef",iT="applyClass",ln="default",id="divider",Il="[*]",rd="start",sd=Il,nd="end",Xc="color",$c="fill",rT="bgFill",sT=",";function ad(){return{}}let od=J7,ra=[],As=ad();const ld=()=>({relations:[],states:{},documents:{}});let sa={root:ld()},Ie=sa.root,Hs=0,Kc=0;const nT={LINE:0,DOTTED_LINE:1},aT={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},mn=t=>JSON.parse(JSON.stringify(t)),oT=t=>{A.info("Setting root doc",t),ra=t},lT=()=>ra,wn=(t,e,i)=>{if(e.stmt===Bl)wn(t,e.state1,!0),wn(t,e.state2,!1);else if(e.stmt===ia&&(e.id==="[*]"?(e.id=i?t.id+"_start":t.id+"_end",e.start=i):e.id=e.id.trim()),e.doc){const r=[];let s=[],n;for(n=0;n<e.doc.length;n++)if(e.doc[n].type===id){const a=mn(e.doc[n]);a.doc=mn(s),r.push(a),s=[]}else s.push(e.doc[n]);if(r.length>0&&s.length>0){const a={stmt:ia,id:Oh(),type:"divider",doc:mn(s)};r.push(mn(a)),e.doc=r}e.doc.forEach(a=>wn(e,a,!0))}},cT=()=>(wn({id:"root"},{id:"root",doc:ra},!0),{id:"root",doc:ra}),hT=t=>{let e;t.doc?e=t.doc:e=t,A.info(e),cd(!0),A.info("Extract",e),e.forEach(i=>{switch(i.stmt){case ia:Rr(i.id.trim(),i.type,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles);break;case Bl:hd(i.state1,i.state2,i.description);break;case eT:ud(i.id.trim(),i.classes);break;case iT:Fl(i.id.trim(),i.styleClass);break}})},Rr=function(t,e=ln,i=null,r=null,s=null,n=null,a=null,o=null){const l=t?.trim();Ie.states[l]===void 0?(A.info("Adding state ",l,r),Ie.states[l]={id:l,descriptions:[],type:e,doc:i,note:s,classes:[],styles:[],textStyles:[]}):(Ie.states[l].doc||(Ie.states[l].doc=i),Ie.states[l].type||(Ie.states[l].type=e)),r&&(A.info("Setting state description",l,r),typeof r=="string"&&Bo(l,r.trim()),typeof r=="object"&&r.forEach(h=>Bo(l,h.trim()))),s&&(Ie.states[l].note=s,Ie.states[l].note.text=mt.sanitizeText(Ie.states[l].note.text,Y())),n&&(A.info("Setting state classes",l,n),(typeof n=="string"?[n]:n).forEach(u=>Fl(l,u.trim()))),a&&(A.info("Setting state styles",l,a),(typeof a=="string"?[a]:a).forEach(u=>kT(l,u.trim()))),o&&(A.info("Setting state styles",l,a),(typeof o=="string"?[o]:o).forEach(u=>_T(l,u.trim())))},cd=function(t){sa={root:ld()},Ie=sa.root,Hs=0,As=ad(),t||We()},Gs=function(t){return Ie.states[t]},uT=function(){return Ie.states},dT=function(){A.info("Documents = ",sa)},fT=function(){return Ie.relations};function Ao(t=""){let e=t;return t===Il&&(Hs++,e=`${rd}${Hs}`),e}function Lo(t="",e=ln){return t===Il?rd:e}function pT(t=""){let e=t;return t===sd&&(Hs++,e=`${nd}${Hs}`),e}function gT(t="",e=ln){return t===sd?nd:e}function yT(t,e,i){let r=Ao(t.id.trim()),s=Lo(t.id.trim(),t.type),n=Ao(e.id.trim()),a=Lo(e.id.trim(),e.type);Rr(r,s,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),Rr(n,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),Ie.relations.push({id1:r,id2:n,relationTitle:mt.sanitizeText(i,Y())})}const hd=function(t,e,i){if(typeof t=="object")yT(t,e,i);else{const r=Ao(t.trim()),s=Lo(t),n=pT(e.trim()),a=gT(e);Rr(r,s),Rr(n,a),Ie.relations.push({id1:r,id2:n,title:mt.sanitizeText(i,Y())})}},Bo=function(t,e){const i=Ie.states[t],r=e.startsWith(":")?e.replace(":","").trim():e;i.descriptions.push(mt.sanitizeText(r,Y()))},mT=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},xT=()=>(Kc++,"divider-id-"+Kc),ud=function(t,e=""){As[t]===void 0&&(As[t]={id:t,styles:[],textStyles:[]});const i=As[t];e?.split(sT).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(Xc)){const a=s.replace($c,rT).replace(Xc,$c);i.textStyles.push(a)}i.styles.push(s)})},bT=function(){return As},Fl=function(t,e){t.split(",").forEach(function(i){let r=Gs(i);if(r===void 0){const s=i.trim();Rr(s),r=Gs(s)}r.classes.push(e)})},kT=function(t,e){const i=Gs(t);i!==void 0&&i.textStyles.push(e)},_T=function(t,e){const i=Gs(t);i!==void 0&&i.textStyles.push(e)},TT=()=>od,CT=t=>{od=t},ET=t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),Gi={getConfig:()=>Y().state,addState:Rr,clear:cd,getState:Gs,getStates:uT,getRelations:fT,getClasses:bT,getDirection:TT,addRelation:hd,getDividerId:xT,setDirection:CT,cleanupLabel:mT,lineType:nT,relationType:aT,logDocuments:dT,getRootDoc:lT,setRootDoc:oT,getRootDocV2:cT,extract:hT,trimColon:ET,getAccTitle:Ye,setAccTitle:Ne,getAccDescription:He,setAccDescription:Ue,addStyleClass:ud,setCssClass:Fl,addDescription:Bo,setDiagramTitle:ei,getDiagramTitle:Ge},vT=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,dd=vT,ST=t=>t.append("circle").attr("class","start-state").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit).attr("cy",Y().state.padding+Y().state.sizeUnit),wT=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",Y().state.textHeight).attr("class","divider").attr("x2",Y().state.textHeight*2).attr("y1",0).attr("y2",0),AT=(t,e)=>{const i=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+2*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),r=i.node().getBBox();return t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",r.width+2*Y().state.padding).attr("height",r.height+2*Y().state.padding).attr("rx",Y().state.radius),i},LT=(t,e)=>{const i=function(d,p,y){const x=d.append("tspan").attr("x",2*Y().state.padding).text(p);y||x.attr("dy",Y().state.textHeight)},s=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+1.3*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),n=s.height,a=t.append("text").attr("x",Y().state.padding).attr("y",n+Y().state.padding*.4+Y().state.dividerMargin+Y().state.textHeight).attr("class","state-description");let o=!0,l=!0;e.descriptions.forEach(function(d){o||(i(a,d,l),l=!1),o=!1});const h=t.append("line").attr("x1",Y().state.padding).attr("y1",Y().state.padding+n+Y().state.dividerMargin/2).attr("y2",Y().state.padding+n+Y().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),f=Math.max(u.width,s.width);return h.attr("x2",f+3*Y().state.padding),t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",f+2*Y().state.padding).attr("height",u.height+n+2*Y().state.padding).attr("rx",Y().state.radius),t},BT=(t,e,i)=>{const r=Y().state.padding,s=2*Y().state.padding,n=t.node().getBBox(),a=n.width,o=n.x,l=t.append("text").attr("x",0).attr("y",Y().state.titleShift).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+s;let f=Math.max(u,a);f===a&&(f=f+s);let d;const p=t.node().getBBox();e.doc,d=o-r,u>a&&(d=(a-f)/2+r),Math.abs(o-p.x)<r&&u>a&&(d=o-(u-a)/2);const y=1-Y().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",y).attr("class",i?"alt-composit":"composit").attr("width",f).attr("height",p.height+Y().state.textHeight+Y().state.titleShift+1).attr("rx","0"),l.attr("x",d+r),u<=a&&l.attr("x",o+(f-s)/2-u/2+r),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",f).attr("height",Y().state.textHeight*3).attr("rx",Y().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",f).attr("height",p.height+3+2*Y().state.textHeight).attr("rx",Y().state.radius),t},IT=t=>(t.append("circle").attr("class","end-state-outer").attr("r",Y().state.sizeUnit+Y().state.miniPadding).attr("cx",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding).attr("cy",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit+2).attr("cy",Y().state.padding+Y().state.sizeUnit+2)),FT=(t,e)=>{let i=Y().state.forkWidth,r=Y().state.forkHeight;if(e.parentId){let s=i;i=r,r=s}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",r).attr("x",Y().state.padding).attr("y",Y().state.padding)},RT=(t,e,i,r)=>{let s=0;const n=r.append("text");n.style("text-anchor","start"),n.attr("class","noteText");let a=t.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");const o=a.split(mt.lineBreakRegex);let l=1.25*Y().state.noteMargin;for(const h of o){const u=h.trim();if(u.length>0){const f=n.append("tspan");if(f.text(u),l===0){const d=f.node().getBBox();l+=d.height}s+=l,f.attr("x",e+Y().state.noteMargin),f.attr("y",i+s+1.25*Y().state.noteMargin)}}return{textWidth:n.node().getBBox().width,textHeight:s}},DT=(t,e)=>{e.attr("class","state-note");const i=e.append("rect").attr("x",0).attr("y",Y().state.padding),r=e.append("g"),{textWidth:s,textHeight:n}=RT(t,0,0,r);return i.attr("height",n+2*Y().state.noteMargin),i.attr("width",s+Y().state.noteMargin*2),i},Qc=function(t,e){const i=e.id,r={id:i,label:e.id,width:0,height:0},s=t.append("g").attr("id",i).attr("class","stateGroup");e.type==="start"&&ST(s),e.type==="end"&&IT(s),(e.type==="fork"||e.type==="join")&&FT(s,e),e.type==="note"&&DT(e.note.text,s),e.type==="divider"&&wT(s),e.type==="default"&&e.descriptions.length===0&&AT(s,e),e.type==="default"&&e.descriptions.length>0&&LT(s,e);const n=s.node().getBBox();return r.width=n.width+2*Y().state.padding,r.height=n.height+2*Y().state.padding,r};let Zc=0;const NT=function(t,e,i){const r=function(l){switch(l){case Gi.relationType.AGGREGATION:return"aggregation";case Gi.relationType.EXTENSION:return"extension";case Gi.relationType.COMPOSITION:return"composition";case Gi.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const s=e.points,n=fr().x(function(l){return l.x}).y(function(l){return l.y}).curve(Zs),a=t.append("path").attr("d",n(s)).attr("id","edge"+Zc).attr("class","transition");let o="";if(Y().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),a.attr("marker-end","url("+o+"#"+r(Gi.relationType.DEPENDENCY)+"End)"),i.title!==void 0){const l=t.append("g").attr("class","stateLabel"),{x:h,y:u}=Rt.calcLabelPosition(e.points),f=mt.getRows(i.title);let d=0;const p=[];let y=0,x=0;for(let k=0;k<=f.length;k++){const R=l.append("text").attr("text-anchor","middle").text(f[k]).attr("x",h).attr("y",u+d),F=R.node().getBBox();y=Math.max(y,F.width),x=Math.min(x,F.x),A.info(F.x,h,u+d),d===0&&(d=R.node().getBBox().height,A.info("Title height",d,u)),p.push(R)}let _=d*f.length;if(f.length>1){const k=(f.length-1)*d*.5;p.forEach((R,F)=>R.attr("y",u+F*d-k)),_=d*f.length}const C=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",h-y/2-Y().state.padding/2).attr("y",u-_/2-Y().state.padding/2-3.5).attr("width",y+Y().state.padding).attr("height",_+Y().state.padding),A.info(C)}Zc++};let Je;const za={},OT=function(){},PT=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},MT=function(t,e,i,r){Je=Y().state;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body"),o=s==="sandbox"?n.nodes()[0].contentDocument:document;A.debug("Rendering diagram "+t);const l=a.select(`[id='${e}']`);PT(l);const h=r.db.getRootDoc();fd(h,l,void 0,!1,a,o,r);const u=Je.padding,f=l.node().getBBox(),d=f.width+u*2,p=f.height+u*2,y=d*1.75;ze(l,p,y,Je.useMaxWidth),l.attr("viewBox",`${f.x-Je.padding}  ${f.y-Je.padding} `+d+" "+p)},VT=t=>t?t.length*Je.fontSizeFactor:1,fd=(t,e,i,r,s,n,a)=>{const o=new Ji({compound:!0,multigraph:!0});let l,h=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){h=!1;break}i?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:h?1:Je.edgeLengthFactor,nodeSep:h?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:h?1:Je.edgeLengthFactor,nodeSep:h?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),a.db.extract(t);const u=a.db.getStates(),f=a.db.getRelations(),d=Object.keys(u);for(const C of d){const k=u[C];i&&(k.parentId=i);let R;if(k.doc){let F=e.append("g").attr("id",k.id).attr("class","stateGroup");R=fd(k.doc,F,k.id,!r,s,n,a);{F=BT(F,k,r);let L=F.node().getBBox();R.width=L.width,R.height=L.height+Je.padding/2,za[k.id]={y:Je.compositTitleSize}}}else R=Qc(e,k);if(k.note){const F={descriptions:[],id:k.id+"-note",note:k.note,type:"note"},L=Qc(e,F);k.note.position==="left of"?(o.setNode(R.id+"-note",L),o.setNode(R.id,R)):(o.setNode(R.id,R),o.setNode(R.id+"-note",L)),o.setParent(R.id,R.id+"-group"),o.setParent(R.id+"-note",R.id+"-group")}else o.setNode(R.id,R)}A.debug("Count=",o.nodeCount(),o);let p=0;f.forEach(function(C){p++,A.debug("Setting edge",C),o.setEdge(C.id1,C.id2,{relation:C,width:VT(C.title),height:Je.labelHeight*mt.getRows(C.title).length,labelpos:"c"},"id"+p)}),Qs(o),A.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(C){C!==void 0&&o.node(C)!==void 0?(A.warn("Node "+C+": "+JSON.stringify(o.node(C))),s.select("#"+y.id+" #"+C).attr("transform","translate("+(o.node(C).x-o.node(C).width/2)+","+(o.node(C).y+(za[C]?za[C].y:0)-o.node(C).height/2)+" )"),s.select("#"+y.id+" #"+C).attr("data-x-shift",o.node(C).x-o.node(C).width/2),n.querySelectorAll("#"+y.id+" #"+C+" .divider").forEach(R=>{const F=R.parentElement;let L=0,E=0;F&&(F.parentElement&&(L=F.parentElement.getBBox().width),E=parseInt(F.getAttribute("data-x-shift"),10),Number.isNaN(E)&&(E=0)),R.setAttribute("x1",0-E+8),R.setAttribute("x2",L-E-8)})):A.debug("No Node "+C+": "+JSON.stringify(o.node(C)))});let x=y.getBBox();o.edges().forEach(function(C){C!==void 0&&o.edge(C)!==void 0&&(A.debug("Edge "+C.v+" -> "+C.w+": "+JSON.stringify(o.edge(C))),NT(e,o.edge(C),o.edge(C).relation))}),x=y.getBBox();const _={id:i||"root",label:i||"root",width:0,height:0};return _.width=x.width+2*Je.padding,_.height=x.height+2*Je.padding,A.debug("Doc rendered",_,o),_},qT={setConf:OT,draw:MT},zT={parser:ed,db:Gi,renderer:qT,styles:dd,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Gi.clear()}},WT=Object.freeze(Object.defineProperty({__proto__:null,diagram:zT},Symbol.toStringTag,{value:"Module"})),An="rect",Wa="rectWithTitle",YT="start",UT="end",HT="divider",GT="roundedWithTitle",jT="note",XT="noteGroup",os="statediagram",$T="state",KT=`${os}-${$T}`,pd="transition",QT="note",ZT="note-edge",JT=`${pd} ${ZT}`,t8=`${os}-${QT}`,e8="cluster",i8=`${os}-${e8}`,r8="cluster-alt",s8=`${os}-${r8}`,gd="parent",yd="note",n8="state",Rl="----",a8=`${Rl}${yd}`,Jc=`${Rl}${gd}`,md="fill:none",xd="fill: #333",bd="c",kd="text",_d="normal";let Ln={},cr=0;const o8=function(t){const e=Object.keys(t);for(const i of e)t[i]},l8=function(t,e){return e.db.extract(e.db.getRootDocV2()),e.db.getClasses()};function c8(t){return t==null?"":t.classes?t.classes.join(" "):""}function Ya(t="",e=0,i="",r=Rl){const s=i!==null&&i.length>0?`${r}${i}`:"";return`${n8}-${t}${s}-${e}`}const ks=(t,e,i,r,s,n)=>{const a=i.id,o=c8(r[a]);if(a!=="root"){let l=An;i.start===!0&&(l=YT),i.start===!1&&(l=UT),i.type!==ln&&(l=i.type),Ln[a]||(Ln[a]={id:a,shape:l,description:mt.sanitizeText(a,Y()),classes:`${o} ${KT}`});const h=Ln[a];i.description&&(Array.isArray(h.description)?(h.shape=Wa,h.description.push(i.description)):h.description.length>0?(h.shape=Wa,h.description===a?h.description=[i.description]:h.description=[h.description,i.description]):(h.shape=An,h.description=i.description),h.description=mt.sanitizeTextOrArray(h.description,Y())),h.description.length===1&&h.shape===Wa&&(h.shape=An),!h.type&&i.doc&&(A.info("Setting cluster for ",a,Io(i)),h.type="group",h.dir=Io(i),h.shape=i.type===id?HT:GT,h.classes=h.classes+" "+i8+" "+(n?s8:""));const u={labelStyle:"",shape:h.shape,labelText:h.description,classes:h.classes,style:"",id:a,dir:h.dir,domId:Ya(a,cr),type:h.type,padding:15};if(u.centerLabel=!0,i.note){const f={labelStyle:"",shape:jT,labelText:i.note.text,classes:t8,style:"",id:a+a8+"-"+cr,domId:Ya(a,cr,yd),type:h.type,padding:15},d={labelStyle:"",shape:XT,labelText:i.note.text,classes:h.classes,style:"",id:a+Jc,domId:Ya(a,cr,gd),type:"group",padding:0};cr++;const p=a+Jc;t.setNode(p,d),t.setNode(f.id,f),t.setNode(a,u),t.setParent(a,p),t.setParent(f.id,p);let y=a,x=f.id;i.note.position==="left of"&&(y=f.id,x=a),t.setEdge(y,x,{arrowhead:"none",arrowType:"",style:md,labelStyle:"",classes:JT,arrowheadStyle:xd,labelpos:bd,labelType:kd,thickness:_d})}else t.setNode(a,u)}e&&e.id!=="root"&&(A.trace("Setting node ",a," to be child of its parent ",e.id),t.setParent(a,e.id)),i.doc&&(A.trace("Adding nodes children "),h8(t,i,i.doc,r,s,!n))},h8=(t,e,i,r,s,n)=>{A.trace("items",i),i.forEach(a=>{switch(a.stmt){case ia:ks(t,e,a,r,s,n);break;case ln:ks(t,e,a,r,s,n);break;case Bl:{ks(t,e,a.state1,r,s,n),ks(t,e,a.state2,r,s,n);const o={id:"edge"+cr,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:md,labelStyle:"",label:mt.sanitizeText(a.description,Y()),arrowheadStyle:xd,labelpos:bd,labelType:kd,thickness:_d,classes:pd};t.setEdge(a.state1.id,a.state2.id,o,cr),cr++}break}})},Io=(t,e=tT)=>{let i=e;if(t.doc)for(let r=0;r<t.doc.length;r++){const s=t.doc[r];s.stmt==="dir"&&(i=s.value)}return i},u8=async function(t,e,i,r){A.info("Drawing state diagram (v2)",e),Ln={},r.db.getDirection();const{securityLevel:s,state:n}=Y(),a=n.nodeSpacing||50,o=n.rankSpacing||50;A.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),A.info(r.db.getRootDocV2());const l=r.db.getStates(),h=new Ji({multigraph:!0,compound:!0}).setGraph({rankdir:Io(r.db.getRootDocV2()),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});ks(h,void 0,r.db.getRootDocV2(),l,r.db,!0);let u;s==="sandbox"&&(u=yt("#i"+e));const f=s==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=f.select(`[id="${e}"]`),p=f.select("#"+e+" g");await ol(p,h,["barb"],os,e);const y=8;Rt.insertTitle(d,"statediagramTitleText",n.titleTopMargin,r.db.getDiagramTitle());const x=d.node().getBBox(),_=x.width+y*2,C=x.height+y*2;d.attr("class",os);const k=d.node().getBBox();ze(d,C,_,n.useMaxWidth);const R=`${k.x-y} ${k.y-y} ${_} ${C}`;A.debug(`viewBox ${R}`),d.attr("viewBox",R);const F=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const L of F){const E=L.getBBox(),I=document.createElementNS("http://www.w3.org/2000/svg",An);I.setAttribute("rx",0),I.setAttribute("ry",0),I.setAttribute("width",E.width),I.setAttribute("height",E.height),L.insertBefore(I,L.firstChild)}},d8={setConf:o8,getClasses:l8,draw:u8},f8={parser:ed,db:Gi,renderer:d8,styles:dd,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Gi.clear()}},p8=Object.freeze(Object.defineProperty({__proto__:null,diagram:f8},Symbol.toStringTag,{value:"Module"}));var Fo=function(){var t=function(f,d,p,y){for(p=p||{},y=f.length;y--;p[f[y]]=d);return p},e=[6,8,10,11,12,14,16,17,18],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,14],l={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:function(d,p,y,x,_,C,k){var R=C.length-1;switch(_){case 1:return C[R-1];case 2:this.$=[];break;case 3:C[R-1].push(C[R]),this.$=C[R-1];break;case 4:case 5:this.$=C[R];break;case 6:case 7:this.$=[];break;case 8:x.setDiagramTitle(C[R].substr(6)),this.$=C[R].substr(6);break;case 9:this.$=C[R].trim(),x.setAccTitle(this.$);break;case 10:case 11:this.$=C[R].trim(),x.setAccDescription(this.$);break;case 12:x.addSection(C[R].substr(8)),this.$=C[R].substr(8);break;case 13:x.addTask(C[R-1],C[R]),this.$="task";break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:function(d,p){if(p.recoverable)this.trace(d);else{var y=new Error(d);throw y.hash=p,y}},parse:function(d){var p=this,y=[0],x=[],_=[null],C=[],k=this.table,R="",F=0,L=0,E=2,I=1,S=C.slice.call(arguments,1),b=Object.create(this.lexer),T={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(T.yy[g]=this.yy[g]);b.setInput(d,T.yy),T.yy.lexer=b,T.yy.parser=this,typeof b.yylloc>"u"&&(b.yylloc={});var w=b.yylloc;C.push(w);var m=b.options&&b.options.ranges;typeof T.yy.parseError=="function"?this.parseError=T.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function P(){var Q;return Q=x.pop()||b.lex()||I,typeof Q!="number"&&(Q instanceof Array&&(x=Q,Q=x.pop()),Q=p.symbols_[Q]||Q),Q}for(var j,N,v,D,B={},z,q,st,$;;){if(N=y[y.length-1],this.defaultActions[N]?v=this.defaultActions[N]:((j===null||typeof j>"u")&&(j=P()),v=k[N]&&k[N][j]),typeof v>"u"||!v.length||!v[0]){var ft="";$=[];for(z in k[N])this.terminals_[z]&&z>E&&$.push("'"+this.terminals_[z]+"'");b.showPosition?ft="Parse error on line "+(F+1)+`:
`+b.showPosition()+`
Expecting `+$.join(", ")+", got '"+(this.terminals_[j]||j)+"'":ft="Parse error on line "+(F+1)+": Unexpected "+(j==I?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(ft,{text:b.match,token:this.terminals_[j]||j,line:b.yylineno,loc:w,expected:$})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+j);switch(v[0]){case 1:y.push(j),_.push(b.yytext),C.push(b.yylloc),y.push(v[1]),j=null,L=b.yyleng,R=b.yytext,F=b.yylineno,w=b.yylloc;break;case 2:if(q=this.productions_[v[1]][1],B.$=_[_.length-q],B._$={first_line:C[C.length-(q||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(q||1)].first_column,last_column:C[C.length-1].last_column},m&&(B._$.range=[C[C.length-(q||1)].range[0],C[C.length-1].range[1]]),D=this.performAction.apply(B,[R,L,F,T.yy,v[1],_,C].concat(S)),typeof D<"u")return D;q&&(y=y.slice(0,-1*q*2),_=_.slice(0,-1*q),C=C.slice(0,-1*q)),y.push(this.productions_[v[1]][0]),_.push(B.$),C.push(B._$),st=k[y[y.length-2]][y[y.length-1]],y.push(st);break;case 3:return!0}}return!0}},h=function(){var f={EOF:1,parseError:function(p,y){if(this.yy.parser)this.yy.parser.parseError(p,y);else throw new Error(p)},setInput:function(d,p){return this.yy=p||this.yy||{},this._input=d,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var d=this._input[0];this.yytext+=d,this.yyleng++,this.offset++,this.match+=d,this.matched+=d;var p=d.match(/(?:\r\n?|\n).*/g);return p?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),d},unput:function(d){var p=d.length,y=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-p),this.offset-=p;var x=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var _=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===x.length?this.yylloc.first_column:0)+x[x.length-y.length].length-y[0].length:this.yylloc.first_column-p},this.options.ranges&&(this.yylloc.range=[_[0],_[0]+this.yyleng-p]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(d){this.unput(this.match.slice(d))},pastInput:function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(d.length>20?"...":"")+d.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var d=this.match;return d.length<20&&(d+=this._input.substr(0,20-d.length)),(d.substr(0,20)+(d.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var d=this.pastInput(),p=new Array(d.length+1).join("-");return d+this.upcomingInput()+`
`+p+"^"},test_match:function(d,p){var y,x,_;if(this.options.backtrack_lexer&&(_={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_.yylloc.range=this.yylloc.range.slice(0))),x=d[0].match(/(?:\r\n?|\n).*/g),x&&(this.yylineno+=x.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:x?x[x.length-1].length-x[x.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],y=this.performAction.call(this,this.yy,this,p,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var C in _)this[C]=_[C];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var d,p,y,x;this._more||(this.yytext="",this.match="");for(var _=this._currentRules(),C=0;C<_.length;C++)if(y=this._input.match(this.rules[_[C]]),y&&(!p||y[0].length>p[0].length)){if(p=y,x=C,this.options.backtrack_lexer){if(d=this.test_match(y,_[C]),d!==!1)return d;if(this._backtrack){p=!1;continue}else return!1}else if(!this.options.flex)break}return p?(d=this.test_match(p,_[x]),d!==!1?d:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var p=this.next();return p||this.lex()},begin:function(p){this.conditionStack.push(p)},popState:function(){var p=this.conditionStack.length-1;return p>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(p){return p=this.conditionStack.length-1-Math.abs(p||0),p>=0?this.conditionStack[p]:"INITIAL"},pushState:function(p){this.begin(p)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(p,y,x,_){switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return f}();l.lexer=h;function u(){this.yy={}}return u.prototype=l,l.Parser=u,new u}();Fo.parser=Fo;const g8=Fo;let ls="";const Dl=[],js=[],Xs=[],y8=function(){Dl.length=0,js.length=0,ls="",Xs.length=0,We()},m8=function(t){ls=t,Dl.push(t)},x8=function(){return Dl},b8=function(){let t=th();const e=100;let i=0;for(;!t&&i<e;)t=th(),i++;return js.push(...Xs),js},k8=function(){const t=[];return js.forEach(i=>{i.people&&t.push(...i.people)}),[...new Set(t)].sort()},_8=function(t,e){const i=e.substr(1).split(":");let r=0,s=[];i.length===1?(r=Number(i[0]),s=[]):(r=Number(i[0]),s=i[1].split(","));const n=s.map(o=>o.trim()),a={section:ls,type:ls,people:n,task:t,score:r};Xs.push(a)},T8=function(t){const e={section:ls,type:ls,description:t,task:t,classes:[]};js.push(e)},th=function(){const t=function(i){return Xs[i].processed};let e=!0;for(const[i,r]of Xs.entries())t(i),e=e&&r.processed;return e},C8=function(){return k8()},eh={getConfig:()=>Y().journey,clear:y8,setDiagramTitle:ei,getDiagramTitle:Ge,setAccTitle:Ne,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addSection:m8,getSections:x8,getTasks:b8,addTask:_8,addTaskOrg:T8,getActors:C8},E8=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,v8=E8,Nl=function(t,e){return ga(t,e)},S8=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=Qr().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=Qr().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},Td=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},Cd=function(t,e){return Sm(t,e)},w8=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Cd(t,e)},A8=function(t,e,i){const r=t.append("g"),s=Or();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width*e.taskCount+i.diagramMarginX*(e.taskCount-1),s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,Nl(r,s),Ed(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let ih=-1;const L8=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");ih++;const n=300+5*30;s.append("line").attr("id","task"+ih).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),S8(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Or();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,Nl(s,a);let o=e.x+14;e.people.forEach(l=>{const h=e.actors[l].color,u={cx:o,cy:e.y,r:7,fill:h,stroke:"#000",title:l,pos:e.actors[l].position};Td(s,u),o+=10}),Ed(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},B8=function(t,e){P1(t,e)},Ed=function(){function t(s,n,a,o,l,h,u,f){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",f).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,f,d){const{taskFontSize:p,taskFontFamily:y}=f,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const C=_*p-p*(x.length-1)/2,k=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",p).style("font-family",y);k.append("tspan").attr("x",a+l/2).attr("dy",C).text(x[_]),k.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,u)}}function i(s,n,a,o,l,h,u,f){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,f),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),I8=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},$s={drawRect:Nl,drawCircle:Td,drawSection:A8,drawText:Cd,drawLabel:w8,drawTask:L8,drawBackgroundRect:B8,initGraphics:I8},F8=function(t){Object.keys(t).forEach(function(i){Ea[i]=t[i]})},$i={};function R8(t){const e=Y().journey;let i=60;Object.keys($i).forEach(r=>{const s=$i[r].color,n={cx:20,cy:i,r:7,fill:s,stroke:"#000",pos:$i[r].position};$s.drawCircle(t,n);const a={x:40,y:i+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};$s.drawText(t,a),i+=20})}const Ea=Y().journey,_r=Ea.leftMargin,D8=function(t,e,i,r){const s=Y().journey,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body");ci.init();const l=o.select("#"+e);$s.initGraphics(l);const h=r.db.getTasks(),u=r.db.getDiagramTitle(),f=r.db.getActors();for(const C in $i)delete $i[C];let d=0;f.forEach(C=>{$i[C]={color:s.actorColours[d%s.actorColours.length],position:d},d++}),R8(l),ci.insert(0,0,_r,Object.keys($i).length*50),N8(l,h,0);const p=ci.getBounds();u&&l.append("text").text(u).attr("x",_r).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=p.stopy-p.starty+2*s.diagramMarginY,x=_r+p.stopx+2*s.diagramMarginX;ze(l,y,x,s.useMaxWidth),l.append("line").attr("x1",_r).attr("y1",s.height*4).attr("x2",x-_r-4).attr("y2",s.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const _=u?70:0;l.attr("viewBox",`${p.startx} -25 ${x} ${y+_}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",y+_+25)},ci={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=Y().journey,n=this;let a=0;function o(l){return function(u){a++;const f=n.sequenceItems.length-a+1;n.updateVal(u,"starty",e-f*s.boxMargin,Math.min),n.updateVal(u,"stopy",r+f*s.boxMargin,Math.max),n.updateVal(ci.data,"startx",t-f*s.boxMargin,Math.min),n.updateVal(ci.data,"stopx",i+f*s.boxMargin,Math.max),l!=="activation"&&(n.updateVal(u,"startx",t-f*s.boxMargin,Math.min),n.updateVal(u,"stopx",i+f*s.boxMargin,Math.max),n.updateVal(ci.data,"starty",e-f*s.boxMargin,Math.min),n.updateVal(ci.data,"stopy",r+f*s.boxMargin,Math.max))}}this.sequenceItems.forEach(o())},insert:function(t,e,i,r){const s=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,r),o=Math.max(e,r);this.updateVal(ci.data,"startx",s,Math.min),this.updateVal(ci.data,"starty",a,Math.min),this.updateVal(ci.data,"stopx",n,Math.max),this.updateVal(ci.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},Ua=Ea.sectionFills,rh=Ea.sectionColours,N8=function(t,e,i){const r=Y().journey;let s="";const n=r.height*2+r.diagramMarginY,a=i+n;let o=0,l="#CCC",h="black",u=0;for(const[f,d]of e.entries()){if(s!==d.section){l=Ua[o%Ua.length],u=o%Ua.length,h=rh[o%rh.length];let y=0;const x=d.section;for(let C=f;C<e.length&&e[C].section==x;C++)y=y+1;const _={x:f*r.taskMargin+f*r.width+_r,y:50,text:d.section,fill:l,num:u,colour:h,taskCount:y};$s.drawSection(t,_,r),s=d.section,o++}const p=d.people.reduce((y,x)=>($i[x]&&(y[x]=$i[x]),y),{});d.x=f*r.taskMargin+f*r.width+_r,d.y=a,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=h,d.fill=l,d.num=u,d.actors=p,$s.drawTask(t,d,r),ci.insert(d.x,d.y,d.x+d.width+r.taskMargin,300+5*30)}},sh={setConf:F8,draw:D8},O8={parser:g8,db:eh,renderer:sh,styles:v8,init:t=>{sh.setConf(t.journey),eh.clear()}},P8=Object.freeze(Object.defineProperty({__proto__:null,diagram:O8},Symbol.toStringTag,{value:"Module"})),M8=(t,e,i)=>{const{parentById:r}=i,s=new Set;let n=t;for(;n;){if(s.add(n),n===e)return n;n=r[n]}for(n=e;n;){if(s.has(n))return n;n=r[n]}return"root"},nh=new Mf;let li={};const V8={};let Qi={};const q8=async function(t,e,i,r,s,n,a){const l=i.select(`[id="${e}"]`).insert("g").attr("class","nodes"),h=Object.keys(t);return await Promise.all(h.map(async function(u){const f=t[u];let d="default";f.classes.length>0&&(d=f.classes.join(" ")),d=d+" flowchart-label";const p=fi(f.styles);let y=f.text!==void 0?f.text:f.id;const x={width:0,height:0},_=[{id:f.id+"-west",layoutOptions:{"port.side":"WEST"}},{id:f.id+"-east",layoutOptions:{"port.side":"EAST"}},{id:f.id+"-south",layoutOptions:{"port.side":"SOUTH"}},{id:f.id+"-north",layoutOptions:{"port.side":"NORTH"}}];let C=0,k="",R={};switch(f.type){case"round":C=5,k="rect";break;case"square":k="rect";break;case"diamond":k="question",R={portConstraints:"FIXED_SIDE"};break;case"hexagon":k="hexagon";break;case"odd":k="rect_left_inv_arrow";break;case"lean_right":k="lean_right";break;case"lean_left":k="lean_left";break;case"trapezoid":k="trapezoid";break;case"inv_trapezoid":k="inv_trapezoid";break;case"odd_right":k="rect_left_inv_arrow";break;case"circle":k="circle";break;case"ellipse":k="ellipse";break;case"stadium":k="stadium";break;case"subroutine":k="subroutine";break;case"cylinder":k="cylinder";break;case"group":k="rect";break;case"doublecircle":k="doublecircle";break;default:k="rect"}const F={labelStyle:p.labelStyle,shape:k,labelText:y,labelType:f.labelType,rx:C,ry:C,class:d,style:p.style,id:f.id,link:f.link,linkTarget:f.linkTarget,tooltip:s.db.getTooltip(f.id)||"",domId:s.db.lookUpDomId(f.id),haveCallback:f.haveCallback,width:f.type==="group"?500:void 0,dir:f.dir,type:f.type,props:f.props,padding:Ae().flowchart.padding};let L,E;if(F.type!=="group")E=await Su(l,F,f.dir),L=E.node().getBBox();else{r.createElementNS("http://www.w3.org/2000/svg","text");const{shapeSvg:S,bbox:b}=await Le(l,F,void 0,!0);x.width=b.width,x.wrappingWidth=Ae().flowchart.wrappingWidth,x.height=b.height,x.labelNode=S.node(),F.labelData=x}const I={id:f.id,ports:f.type==="diamond"?_:[],layoutOptions:R,labelText:y,labelData:x,domId:s.db.lookUpDomId(f.id),width:L?.width,height:L?.height,type:f.type,el:E,parent:n.parentById[f.id]};Qi[F.id]=I})),a},ah=(t,e,i)=>{const r={TB:{in:{north:"north"},out:{south:"west",west:"east",east:"south"}},LR:{in:{west:"west"},out:{east:"south",south:"north",north:"east"}},RL:{in:{east:"east"},out:{west:"north",north:"south",south:"west"}},BT:{in:{south:"south"},out:{north:"east",east:"west",west:"north"}}};return r.TD=r.TB,A.info("abc88",i,e,t),r[i][e][t]},oh=(t,e,i)=>{if(A.info("getNextPort abc88",{node:t,edgeDirection:e,graphDirection:i}),!li[t])switch(i){case"TB":case"TD":li[t]={inPosition:"north",outPosition:"south"};break;case"BT":li[t]={inPosition:"south",outPosition:"north"};break;case"RL":li[t]={inPosition:"east",outPosition:"west"};break;case"LR":li[t]={inPosition:"west",outPosition:"east"};break}const r=e==="in"?li[t].inPosition:li[t].outPosition;return e==="in"?li[t].inPosition=ah(li[t].inPosition,e,i):li[t].outPosition=ah(li[t].outPosition,e,i),r},z8=(t,e)=>{let i=t.start,r=t.end;const s=i,n=r,a=Qi[i],o=Qi[r];return!a||!o?{source:i,target:r}:(a.type==="diamond"&&(i=`${i}-${oh(i,"out",e)}`),o.type==="diamond"&&(r=`${r}-${oh(r,"in",e)}`),{source:i,target:r,sourceId:s,targetId:n})},W8=function(t,e,i,r){A.info("abc78 edges = ",t);const s=r.insert("g").attr("class","edgeLabels");let n={},a=e.db.getDirection(),o,l;if(t.defaultStyle!==void 0){const h=fi(t.defaultStyle);o=h.style,l=h.labelStyle}return t.forEach(function(h){const u="L-"+h.start+"-"+h.end;n[u]===void 0?(n[u]=0,A.info("abc78 new entry",u,n[u])):(n[u]++,A.info("abc78 new entry",u,n[u]));let f=u+"-"+n[u];A.info("abc78 new link id to be used is",u,f,n[u]);const d="LS-"+h.start,p="LE-"+h.end,y={style:"",labelStyle:""};switch(y.minlen=h.length||1,h.type==="arrow_open"?y.arrowhead="none":y.arrowhead="normal",y.arrowTypeStart="arrow_open",y.arrowTypeEnd="arrow_open",h.type){case"double_arrow_cross":y.arrowTypeStart="arrow_cross";case"arrow_cross":y.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":y.arrowTypeStart="arrow_point";case"arrow_point":y.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":y.arrowTypeStart="arrow_circle";case"arrow_circle":y.arrowTypeEnd="arrow_circle";break}let x="",_="";switch(h.stroke){case"normal":x="fill:none;",o!==void 0&&(x=o),l!==void 0&&(_=l),y.thickness="normal",y.pattern="solid";break;case"dotted":y.thickness="normal",y.pattern="dotted",y.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":y.thickness="thick",y.pattern="solid",y.style="stroke-width: 3.5px;fill:none;";break}if(h.style!==void 0){const E=fi(h.style);x=E.style,_=E.labelStyle}y.style=y.style+=x,y.labelStyle=y.labelStyle+=_,h.interpolate!==void 0?y.curve=hi(h.interpolate,ti):t.defaultInterpolate!==void 0?y.curve=hi(t.defaultInterpolate,ti):y.curve=hi(V8.curve,ti),h.text===void 0?h.style!==void 0&&(y.arrowheadStyle="fill: #333"):(y.arrowheadStyle="fill: #333",y.labelpos="c"),y.labelType=h.labelType,y.label=h.text.replace(mt.lineBreakRegex,`
`),h.style===void 0&&(y.style=y.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),y.labelStyle=y.labelStyle.replace("color:","fill:"),y.id=f,y.classes="flowchart-link "+d+" "+p;const C=Lu(s,y),{source:k,target:R,sourceId:F,targetId:L}=z8(h,a);A.debug("abc78 source and target",k,R),i.edges.push({id:"e"+h.start+h.end,sources:[k],targets:[R],sourceId:F,targetId:L,labelEl:C,labels:[{width:y.width,height:y.height,orgWidth:y.width,orgHeight:y.height,text:y.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:y})}),i},Y8=function(t,e,i,r,s){let n="";r&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)")),Au(t,e,n,s,i)},U8=function(t,e){return A.info("Extracting classes"),e.db.getClasses()},H8=function(t){const e={parentById:{},childrenById:{}},i=t.getSubGraphs();return A.info("Subgraphs - ",i),i.forEach(function(r){r.nodes.forEach(function(s){e.parentById[s]=r.id,e.childrenById[r.id]===void 0&&(e.childrenById[r.id]=[]),e.childrenById[r.id].push(s)})}),i.forEach(function(r){r.id,e.parentById[r.id]!==void 0&&e.parentById[r.id]}),e},G8=function(t,e,i){const r=M8(t,e,i);if(r===void 0||r==="root")return{x:0,y:0};const s=Qi[r].offset;return{x:s.posX,y:s.posY}},j8=function(t,e,i,r,s,n){const a=G8(e.sourceId,e.targetId,s),o=e.sections[0].startPoint,l=e.sections[0].endPoint,u=(e.sections[0].bendPoints?e.sections[0].bendPoints:[]).map(R=>[R.x+a.x,R.y+a.y]),f=[[o.x+a.x,o.y+a.y],...u,[l.x+a.x,l.y+a.y]],{x:d,y:p}=wu(e.edgeData),y=fr().x(d).y(p).curve(ti),x=t.insert("path").attr("d",y(f)).attr("class","path "+i.classes).attr("fill","none"),_=t.insert("g").attr("class","edgeLabel"),C=yt(_.node().appendChild(e.labelEl)),k=C.node().firstChild.getBoundingClientRect();C.attr("width",k.width),C.attr("height",k.height),_.attr("transform",`translate(${e.labels[0].x+a.x}, ${e.labels[0].y+a.y})`),Y8(x,i,r.type,r.arrowMarkerAbsolute,n)},vd=(t,e)=>{t.forEach(i=>{i.children||(i.children=[]);const r=e.childrenById[i.id];r&&r.forEach(s=>{i.children.push(Qi[s])}),vd(i.children,e)})},X8=async function(t,e,i,r){var s;r.db.clear(),Qi={},li={},r.db.setGen("gen-2"),r.parser.parse(t);const n=yt("body").append("div").attr("style","height:400px").attr("id","cy");let a={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","org.eclipse.elk.padding":"[top=100, left=100, bottom=110, right=110]","elk.layered.spacing.edgeNodeBetweenLayers":"30","elk.direction":"DOWN"},children:[],edges:[]};switch(A.info("Drawing flowchart using v3 renderer",nh),r.db.getDirection()){case"BT":a.layoutOptions["elk.direction"]="UP";break;case"TB":a.layoutOptions["elk.direction"]="DOWN";break;case"LR":a.layoutOptions["elk.direction"]="RIGHT";break;case"RL":a.layoutOptions["elk.direction"]="LEFT";break}const{securityLevel:l,flowchart:h}=Ae();let u;l==="sandbox"&&(u=yt("#i"+e));const f=l==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=l==="sandbox"?u.nodes()[0].contentDocument:document,p=f.select(`[id="${e}"]`);Cu(p,["point","circle","cross"],r.type,e);const x=r.db.getVertices();let _;const C=r.db.getSubGraphs();A.info("Subgraphs - ",C);for(let S=C.length-1;S>=0;S--)_=C[S],r.db.addVertex(_.id,{text:_.title,type:_.labelType},"group",void 0,_.classes,_.dir);const k=p.insert("g").attr("class","subgraphs"),R=H8(r.db);a=await q8(x,e,f,d,r,R,a);const F=p.insert("g").attr("class","edges edgePath"),L=r.db.getEdges();a=W8(L,r,a,p),Object.keys(Qi).forEach(S=>{const b=Qi[S];b.parent||a.children.push(b),R.childrenById[S]!==void 0&&(b.labels=[{text:b.labelText,layoutOptions:{"nodeLabels.placement":"[H_CENTER, V_TOP, INSIDE]"},width:b.labelData.width,height:b.labelData.height}],delete b.x,delete b.y,delete b.width,delete b.height)}),vd(a.children,R),A.info("after layout",JSON.stringify(a,null,2));const I=await nh.layout(a);Sd(0,0,I.children,p,k,r,0),A.info("after layout",I),(s=I.edges)==null||s.map(S=>{j8(F,S,S.edgeData,r,R,e)}),yr({},p,h.diagramPadding,h.useMaxWidth),n.remove()},Sd=(t,e,i,r,s,n,a)=>{i.forEach(function(o){if(o)if(Qi[o.id].offset={posX:o.x+t,posY:o.y+e,x:t,y:e,depth:a,width:o.width,height:o.height},o.type==="group"){const l=s.insert("g").attr("class","subgraph");l.insert("rect").attr("class","subgraph subgraph-lvl-"+a%5+" node").attr("x",o.x+t).attr("y",o.y+e).attr("width",o.width).attr("height",o.height);const h=l.insert("g").attr("class","label"),u=Ae().flowchart.htmlLabels?o.labelData.width/2:0;h.attr("transform",`translate(${o.labels[0].x+t+o.x+u}, ${o.labels[0].y+e+o.y+3})`),h.node().appendChild(o.labelData.labelNode),A.info("Id (UGH)= ",o.type,o.labels)}else A.info("Id (UGH)= ",o.id),o.el.attr("transform",`translate(${o.x+t+o.width/2}, ${o.y+e+o.height/2})`)}),i.forEach(function(o){o&&o.type==="group"&&Sd(t+o.x,e+o.y,o.children,r,s,n,a+1)})},$8={getClasses:U8,draw:X8},K8=t=>{let e="";for(let i=0;i<5;i++)e+=`
      .subgraph-lvl-${i} {
        fill: ${t[`surface${i}`]};
        stroke: ${t[`surfacePeer${i}`]};
      }
    `;return e},Q8=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.85;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
  .subgraph {
    stroke-width:2;
    rx:3;
  }
  // .subgraph-lvl-1 {
  //   fill:#ccc;
  //   // stroke:black;
  // }

  .flowchart-label text {
    text-anchor: middle;
  }

  ${K8(t)}
`,Z8=Q8,J8={db:I4,renderer:$8,parser:sl,styles:Z8},tC=Object.freeze(Object.defineProperty({__proto__:null,diagram:J8},Symbol.toStringTag,{value:"Module"}));var Ro=function(){var t=function(d,p,y,x){for(y=y||{},x=d.length;x--;y[d[x]]=p);return y},e=[6,8,10,11,12,14,16,17,20,21],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,16],l=[1,17],h={trace:function(){},yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:function(p,y,x,_,C,k,R){var F=k.length-1;switch(C){case 1:return k[F-1];case 2:this.$=[];break;case 3:k[F-1].push(k[F]),this.$=k[F-1];break;case 4:case 5:this.$=k[F];break;case 6:case 7:this.$=[];break;case 8:_.getCommonDb().setDiagramTitle(k[F].substr(6)),this.$=k[F].substr(6);break;case 9:this.$=k[F].trim(),_.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=k[F].trim(),_.getCommonDb().setAccDescription(this.$);break;case 12:_.addSection(k[F].substr(8)),this.$=k[F].substr(8);break;case 15:_.addTask(k[F],0,""),this.$=k[F];break;case 16:_.addEvent(k[F].substr(2)),this.$=k[F];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:function(p,y){if(y.recoverable)this.trace(p);else{var x=new Error(p);throw x.hash=y,x}},parse:function(p){var y=this,x=[0],_=[],C=[null],k=[],R=this.table,F="",L=0,E=0,I=2,S=1,b=k.slice.call(arguments,1),T=Object.create(this.lexer),g={yy:{}};for(var w in this.yy)Object.prototype.hasOwnProperty.call(this.yy,w)&&(g.yy[w]=this.yy[w]);T.setInput(p,g.yy),g.yy.lexer=T,g.yy.parser=this,typeof T.yylloc>"u"&&(T.yylloc={});var m=T.yylloc;k.push(m);var P=T.options&&T.options.ranges;typeof g.yy.parseError=="function"?this.parseError=g.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(){var H;return H=_.pop()||T.lex()||S,typeof H!="number"&&(H instanceof Array&&(_=H,H=_.pop()),H=y.symbols_[H]||H),H}for(var N,v,D,B,z={},q,st,$,ft;;){if(v=x[x.length-1],this.defaultActions[v]?D=this.defaultActions[v]:((N===null||typeof N>"u")&&(N=j()),D=R[v]&&R[v][N]),typeof D>"u"||!D.length||!D[0]){var Q="";ft=[];for(q in R[v])this.terminals_[q]&&q>I&&ft.push("'"+this.terminals_[q]+"'");T.showPosition?Q="Parse error on line "+(L+1)+`:
`+T.showPosition()+`
Expecting `+ft.join(", ")+", got '"+(this.terminals_[N]||N)+"'":Q="Parse error on line "+(L+1)+": Unexpected "+(N==S?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(Q,{text:T.match,token:this.terminals_[N]||N,line:T.yylineno,loc:m,expected:ft})}if(D[0]instanceof Array&&D.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+N);switch(D[0]){case 1:x.push(N),C.push(T.yytext),k.push(T.yylloc),x.push(D[1]),N=null,E=T.yyleng,F=T.yytext,L=T.yylineno,m=T.yylloc;break;case 2:if(st=this.productions_[D[1]][1],z.$=C[C.length-st],z._$={first_line:k[k.length-(st||1)].first_line,last_line:k[k.length-1].last_line,first_column:k[k.length-(st||1)].first_column,last_column:k[k.length-1].last_column},P&&(z._$.range=[k[k.length-(st||1)].range[0],k[k.length-1].range[1]]),B=this.performAction.apply(z,[F,E,L,g.yy,D[1],C,k].concat(b)),typeof B<"u")return B;st&&(x=x.slice(0,-1*st*2),C=C.slice(0,-1*st),k=k.slice(0,-1*st)),x.push(this.productions_[D[1]][0]),C.push(z.$),k.push(z._$),$=R[x[x.length-2]][x[x.length-1]],x.push($);break;case 3:return!0}}return!0}},u=function(){var d={EOF:1,parseError:function(y,x){if(this.yy.parser)this.yy.parser.parseError(y,x);else throw new Error(y)},setInput:function(p,y){return this.yy=y||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var y=p.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},unput:function(p){var y=p.length,x=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var _=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===_.length?this.yylloc.first_column:0)+_[_.length-x.length].length-x[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(p){this.unput(this.match.slice(p))},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput(),y=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+y+"^"},test_match:function(p,y){var x,_,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),_=p[0].match(/(?:\r\n?|\n).*/g),_&&(this.yylineno+=_.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_?_[_.length-1].length-_[_.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],x=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var k in C)this[k]=C[k];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,y,x,_;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),k=0;k<C.length;k++)if(x=this._input.match(this.rules[C[k]]),x&&(!y||x[0].length>y[0].length)){if(y=x,_=k,this.options.backtrack_lexer){if(p=this.test_match(x,C[k]),p!==!1)return p;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(p=this.test_match(y,C[_]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,x,_,C){switch(_){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?::\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return d}();h.lexer=u;function f(){this.yy={}}return f.prototype=h,h.Parser=f,new f}();Ro.parser=Ro;const eC=Ro;let cs="",wd=0;const Ol=[],na=[],hs=[],Ad=()=>l1,Ld=function(){Ol.length=0,na.length=0,cs="",hs.length=0,We()},Bd=function(t){cs=t,Ol.push(t)},Id=function(){return Ol},Fd=function(){let t=lh();const e=100;let i=0;for(;!t&&i<e;)t=lh(),i++;return na.push(...hs),na},Rd=function(t,e,i){const r={id:wd++,section:cs,type:cs,task:t,score:e||0,events:i?[i]:[]};hs.push(r)},Dd=function(t){hs.find(i=>i.id===wd-1).events.push(t)},Nd=function(t){const e={section:cs,type:cs,description:t,task:t,classes:[]};na.push(e)},lh=function(){const t=function(i){return hs[i].processed};let e=!0;for(const[i,r]of hs.entries())t(i),e=e&&r.processed;return e},iC={clear:Ld,getCommonDb:Ad,addSection:Bd,getSections:Id,getTasks:Fd,addTask:Rd,addTaskOrg:Nd,addEvent:Dd},rC=Object.freeze(Object.defineProperty({__proto__:null,addEvent:Dd,addSection:Bd,addTask:Rd,addTaskOrg:Nd,clear:Ld,default:iC,getCommonDb:Ad,getSections:Id,getTasks:Fd},Symbol.toStringTag,{value:"Module"})),sC=12,va=function(t,e){const i=t.append("rect");return i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),i.attr("rx",e.rx),i.attr("ry",e.ry),e.class!==void 0&&i.attr("class",e.class),i},nC=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=Qr().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=Qr().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},aC=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},Od=function(t,e){const i=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},oC=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Od(t,e)},lC=function(t,e,i){const r=t.append("g"),s=Pl();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width,s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,va(r,s),Pd(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let ch=-1;const cC=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");ch++;const n=300+5*30;s.append("line").attr("id","task"+ch).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),nC(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Pl();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,va(s,a),e.x+14,Pd(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},hC=function(t,e){va(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},uC=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},Pl=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},Pd=function(){function t(s,n,a,o,l,h,u,f){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",f).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,f,d){const{taskFontSize:p,taskFontFamily:y}=f,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const C=_*p-p*(x.length-1)/2,k=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",p).style("font-family",y);k.append("tspan").attr("x",a+l/2).attr("dy",C).text(x[_]),k.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,u)}}function i(s,n,a,o,l,h,u,f){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,f),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),dC=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")};function Md(t,e){t.each(function(){var i=yt(this),r=i.text().split(/(\s+|<br>)/).reverse(),s,n=[],a=1.1,o=i.attr("y"),l=parseFloat(i.attr("dy")),h=i.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let u=0;u<r.length;u++)s=r[r.length-1-u],n.push(s),h.text(n.join(" ").trim()),(h.node().getComputedTextLength()>e||s==="<br>")&&(n.pop(),h.text(n.join(" ").trim()),s==="<br>"?n=[""]:n=[s],h=i.append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em").text(s))})}const fC=function(t,e,i,r){const s=i%sC-1,n=t.append("g");e.section=s,n.attr("class",(e.class?e.class+" ":"")+"timeline-node "+("section-"+s));const a=n.append("g"),o=n.append("g"),h=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Md,e.width).node().getBBox(),u=r.fontSize&&r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;return e.height=h.height+u*1.1*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),gC(a,e,s),e},pC=function(t,e,i){const r=t.append("g"),n=r.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Md,e.width).node().getBBox(),a=i.fontSize&&i.fontSize.replace?i.fontSize.replace("px",""):i.fontSize;return r.remove(),n.height+a*1.1*.5+e.padding},gC=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},Tr={drawRect:va,drawCircle:aC,drawSection:lC,drawText:Od,drawLabel:oC,drawTask:cC,drawBackgroundRect:hC,getTextObj:uC,getNoteRect:Pl,initGraphics:dC,drawNode:fC,getVirtualNodeHeight:pC},yC=function(t,e,i,r){var s,n;const a=Y(),o=a.leftMargin??50;A.debug("timeline",r.db);const l=a.securityLevel;let h;l==="sandbox"&&(h=yt("#i"+e));const f=(l==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body")).select("#"+e);f.append("g");const d=r.db.getTasks(),p=r.db.getCommonDb().getDiagramTitle();A.debug("task",d),Tr.initGraphics(f);const y=r.db.getSections();A.debug("sections",y);let x=0,_=0,C=0,k=0,R=50+o,F=50;k=50;let L=0,E=!0;y.forEach(function(g){const w={number:L,descr:g,section:L,width:150,padding:20,maxHeight:x},m=Tr.getVirtualNodeHeight(f,w,a);A.debug("sectionHeight before draw",m),x=Math.max(x,m+20)});let I=0,S=0;A.debug("tasks.length",d.length);for(const[g,w]of d.entries()){const m={number:g,descr:w,section:w.section,width:150,padding:20,maxHeight:_},P=Tr.getVirtualNodeHeight(f,m,a);A.debug("taskHeight before draw",P),_=Math.max(_,P+20),I=Math.max(I,w.events.length);let j=0;for(let N=0;N<w.events.length;N++){const D={descr:w.events[N],section:w.section,number:w.section,width:150,padding:20,maxHeight:50};j+=Tr.getVirtualNodeHeight(f,D,a)}S=Math.max(S,j)}A.debug("maxSectionHeight before draw",x),A.debug("maxTaskHeight before draw",_),y&&y.length>0?y.forEach(g=>{const w=d.filter(N=>N.section===g),m={number:L,descr:g,section:L,width:200*Math.max(w.length,1)-50,padding:20,maxHeight:x};A.debug("sectionNode",m);const P=f.append("g"),j=Tr.drawNode(P,m,L,a);A.debug("sectionNode output",j),P.attr("transform",`translate(${R}, ${k})`),F+=x+50,w.length>0&&hh(f,w,L,R,F,_,a,I,S,x,!1),R+=200*Math.max(w.length,1),F=k,L++}):(E=!1,hh(f,d,L,R,F,_,a,I,S,x,!0));const b=f.node().getBBox();A.debug("bounds",b),p&&f.append("text").text(p).attr("x",b.width/2-o).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),C=E?x+_+150:_+100,f.append("g").attr("class","lineWrapper").append("line").attr("x1",o).attr("y1",C).attr("x2",b.width+3*o).attr("y2",C).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),yr(void 0,f,((s=a.timeline)==null?void 0:s.padding)??50,((n=a.timeline)==null?void 0:n.useMaxWidth)??!1)},hh=function(t,e,i,r,s,n,a,o,l,h,u){var f;for(const d of e){const p={descr:d.task,section:i,number:i,width:150,padding:20,maxHeight:n};A.debug("taskNode",p);const y=t.append("g").attr("class","taskWrapper"),_=Tr.drawNode(y,p,i,a).height;if(A.debug("taskHeight after draw",_),y.attr("transform",`translate(${r}, ${s})`),n=Math.max(n,_),d.events){const C=t.append("g").attr("class","lineWrapper");let k=n;s+=100,k=k+mC(t,d.events,i,r,s,a),s-=100,C.append("line").attr("x1",r+190/2).attr("y1",s+n).attr("x2",r+190/2).attr("y2",s+n+(u?n:h)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}r=r+200,u&&!((f=a.timeline)!=null&&f.disableMulticolor)&&i++}s=s-10},mC=function(t,e,i,r,s,n){let a=0;const o=s;s=s+100;for(const l of e){const h={descr:l,section:i,number:i,width:150,padding:20,maxHeight:50};A.debug("eventNode",h);const u=t.append("g").attr("class","eventWrapper"),d=Tr.drawNode(u,h,i,n).height;a=a+d,u.attr("transform",`translate(${r}, ${s})`),s=s+10+d}return s=o,a},xC={setConf:()=>{},draw:yC},bC=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Nr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+i]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},kC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${bC(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,_C=kC,TC={db:rC,renderer:xC,parser:eC,styles:_C},CC=Object.freeze(Object.defineProperty({__proto__:null,diagram:TC},Symbol.toStringTag,{value:"Module"}));var Do=function(){var t=function(F,L,E,I){for(E=E||{},I=F.length;I--;E[F[I]]=L);return E},e=[1,4],i=[1,13],r=[1,12],s=[1,15],n=[1,16],a=[1,20],o=[1,19],l=[6,7,8],h=[1,26],u=[1,24],f=[1,25],d=[6,7,11],p=[1,6,13,15,16,19,22],y=[1,33],x=[1,34],_=[1,6,7,11,13,15,16,19,22],C={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(L,E,I,S,b,T,g){var w=T.length-1;switch(b){case 6:case 7:return S;case 8:S.getLogger().trace("Stop NL ");break;case 9:S.getLogger().trace("Stop EOF ");break;case 11:S.getLogger().trace("Stop NL2 ");break;case 12:S.getLogger().trace("Stop EOF2 ");break;case 15:S.getLogger().info("Node: ",T[w].id),S.addNode(T[w-1].length,T[w].id,T[w].descr,T[w].type);break;case 16:S.getLogger().trace("Icon: ",T[w]),S.decorateNode({icon:T[w]});break;case 17:case 21:S.decorateNode({class:T[w]});break;case 18:S.getLogger().trace("SPACELIST");break;case 19:S.getLogger().trace("Node: ",T[w].id),S.addNode(0,T[w].id,T[w].descr,T[w].type);break;case 20:S.decorateNode({icon:T[w]});break;case 25:S.getLogger().trace("node found ..",T[w-2]),this.$={id:T[w-1],descr:T[w-1],type:S.getType(T[w-2],T[w])};break;case 26:this.$={id:T[w],descr:T[w],type:S.nodeType.DEFAULT};break;case 27:S.getLogger().trace("node found ..",T[w-3]),this.$={id:T[w-3],descr:T[w-1],type:S.getType(T[w-2],T[w])};break}},table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:i,7:[1,10],9:9,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:i,9:22,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:h,7:u,10:23,11:f},t(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:o}),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,23]),t(d,[2,24]),t(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:u,10:32,11:f},{1:[2,7],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(p,[2,14],{7:y,11:x}),t(_,[2,8]),t(_,[2,9]),t(_,[2,10]),t(d,[2,15]),t(d,[2,16]),t(d,[2,17]),{20:[1,35]},{21:[1,36]},t(p,[2,13],{7:y,11:x}),t(_,[2,11]),t(_,[2,12]),{21:[1,37]},t(d,[2,25]),t(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(L,E){if(E.recoverable)this.trace(L);else{var I=new Error(L);throw I.hash=E,I}},parse:function(L){var E=this,I=[0],S=[],b=[null],T=[],g=this.table,w="",m=0,P=0,j=2,N=1,v=T.slice.call(arguments,1),D=Object.create(this.lexer),B={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(B.yy[z]=this.yy[z]);D.setInput(L,B.yy),B.yy.lexer=D,B.yy.parser=this,typeof D.yylloc>"u"&&(D.yylloc={});var q=D.yylloc;T.push(q);var st=D.options&&D.options.ranges;typeof B.yy.parseError=="function"?this.parseError=B.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function $(){var dt;return dt=S.pop()||D.lex()||N,typeof dt!="number"&&(dt instanceof Array&&(S=dt,dt=S.pop()),dt=E.symbols_[dt]||dt),dt}for(var ft,Q,H,it,nt={},Z,tt,O,at;;){if(Q=I[I.length-1],this.defaultActions[Q]?H=this.defaultActions[Q]:((ft===null||typeof ft>"u")&&(ft=$()),H=g[Q]&&g[Q][ft]),typeof H>"u"||!H.length||!H[0]){var W="";at=[];for(Z in g[Q])this.terminals_[Z]&&Z>j&&at.push("'"+this.terminals_[Z]+"'");D.showPosition?W="Parse error on line "+(m+1)+`:
`+D.showPosition()+`
Expecting `+at.join(", ")+", got '"+(this.terminals_[ft]||ft)+"'":W="Parse error on line "+(m+1)+": Unexpected "+(ft==N?"end of input":"'"+(this.terminals_[ft]||ft)+"'"),this.parseError(W,{text:D.match,token:this.terminals_[ft]||ft,line:D.yylineno,loc:q,expected:at})}if(H[0]instanceof Array&&H.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+ft);switch(H[0]){case 1:I.push(ft),b.push(D.yytext),T.push(D.yylloc),I.push(H[1]),ft=null,P=D.yyleng,w=D.yytext,m=D.yylineno,q=D.yylloc;break;case 2:if(tt=this.productions_[H[1]][1],nt.$=b[b.length-tt],nt._$={first_line:T[T.length-(tt||1)].first_line,last_line:T[T.length-1].last_line,first_column:T[T.length-(tt||1)].first_column,last_column:T[T.length-1].last_column},st&&(nt._$.range=[T[T.length-(tt||1)].range[0],T[T.length-1].range[1]]),it=this.performAction.apply(nt,[w,P,m,B.yy,H[1],b,T].concat(v)),typeof it<"u")return it;tt&&(I=I.slice(0,-1*tt*2),b=b.slice(0,-1*tt),T=T.slice(0,-1*tt)),I.push(this.productions_[H[1]][0]),b.push(nt.$),T.push(nt._$),O=g[I[I.length-2]][I[I.length-1]],I.push(O);break;case 3:return!0}}return!0}},k=function(){var F={EOF:1,parseError:function(E,I){if(this.yy.parser)this.yy.parser.parseError(E,I);else throw new Error(E)},setInput:function(L,E){return this.yy=E||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var E=L.match(/(?:\r\n?|\n).*/g);return E?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var E=L.length,I=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-E),this.offset-=E;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===S.length?this.yylloc.first_column:0)+S[S.length-I.length].length-I[0].length:this.yylloc.first_column-E},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-E]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),E=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+E+"^"},test_match:function(L,E){var I,S,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),S=L[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],I=this.performAction.call(this,this.yy,this,E,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var T in b)this[T]=b[T];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,E,I,S;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),T=0;T<b.length;T++)if(I=this._input.match(this.rules[b[T]]),I&&(!E||I[0].length>E[0].length)){if(E=I,S=T,this.options.backtrack_lexer){if(L=this.test_match(I,b[T]),L!==!1)return L;if(this._backtrack){E=!1;continue}else return!1}else if(!this.options.flex)break}return E?(L=this.test_match(E,b[S]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var E=this.next();return E||this.lex()},begin:function(E){this.conditionStack.push(E)},popState:function(){var E=this.conditionStack.length-1;return E>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(E){return E=this.conditionStack.length-1-Math.abs(E||0),E>=0?this.conditionStack[E]:"INITIAL"},pushState:function(E){this.begin(E)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(E,I,S,b){switch(S){case 0:return E.getLogger().trace("Found comment",I.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:E.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return E.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:E.getLogger().trace("end icon"),this.popState();break;case 10:return E.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return E.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return E.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return E.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:E.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return E.getLogger().trace("description:",I.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),E.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),E.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),E.getLogger().trace("node end ...",I.yytext),"NODE_DEND";case 30:return this.popState(),E.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),E.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),E.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),E.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),E.getLogger().trace("node end (("),"NODE_DEND";case 35:return E.getLogger().trace("Long description:",I.yytext),20;case 36:return E.getLogger().trace("Long description:",I.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return F}();C.lexer=k;function R(){this.yy={}}return R.prototype=C,C.Parser=R,new R}();Do.parser=Do;const EC=Do,Ks=t=>ve(t,Y());let ui=[],Vd=0,Ml={};const vC=()=>{ui=[],Vd=0,Ml={}},SC=function(t){for(let e=ui.length-1;e>=0;e--)if(ui[e].level<t)return ui[e];return null},wC=()=>ui.length>0?ui[0]:null,AC=(t,e,i,r)=>{A.info("addNode",t,e,i,r);const s=Y(),n={id:Vd++,nodeId:Ks(e),level:t,descr:Ks(i),type:r,children:[],width:Y().mindmap.maxNodeWidth};switch(n.type){case Gt.ROUNDED_RECT:n.padding=2*s.mindmap.padding;break;case Gt.RECT:n.padding=2*s.mindmap.padding;break;case Gt.HEXAGON:n.padding=2*s.mindmap.padding;break;default:n.padding=s.mindmap.padding}const a=SC(t);if(a)a.children.push(n),ui.push(n);else if(ui.length===0)ui.push(n);else{let o=new Error('There can be only one root. No parent could be found for ("'+n.descr+'")');throw o.hash={text:"branch "+name,token:"branch "+name,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+name+'"']},o}},Gt={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},LC=(t,e)=>{switch(A.debug("In get type",t,e),t){case"[":return Gt.RECT;case"(":return e===")"?Gt.ROUNDED_RECT:Gt.CLOUD;case"((":return Gt.CIRCLE;case")":return Gt.CLOUD;case"))":return Gt.BANG;case"{{":return Gt.HEXAGON;default:return Gt.DEFAULT}},qd=(t,e)=>{Ml[t]=e},BC=t=>{const e=ui[ui.length-1];t&&t.icon&&(e.icon=Ks(t.icon)),t&&t.class&&(e.class=Ks(t.class))},Pr=t=>{switch(t){case Gt.DEFAULT:return"no-border";case Gt.RECT:return"rect";case Gt.ROUNDED_RECT:return"rounded-rect";case Gt.CIRCLE:return"circle";case Gt.CLOUD:return"cloud";case Gt.BANG:return"bang";case Gt.HEXAGON:return"hexgon";default:return"no-border"}};let zd;const IC=t=>{zd=t},FC=()=>A,RC=t=>ui[t],Vl=t=>Ml[t],DC=Object.freeze(Object.defineProperty({__proto__:null,addNode:AC,clear:vC,decorateNode:BC,getElementById:Vl,getLogger:FC,getMindmap:wC,getNodeById:RC,getType:LC,nodeType:Gt,get parseError(){return zd},sanitizeText:Ks,setElementForId:qd,setErrorHandler:IC,type2Str:Pr},Symbol.toStringTag,{value:"Module"})),Wd=12,NC=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+Pr(e.type)).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},OC=function(t,e){t.append("rect").attr("id","node-"+e.id).attr("class","node-bkg node-"+Pr(e.type)).attr("height",e.height).attr("width",e.width)},PC=function(t,e){const i=e.width,r=e.height,s=.15*i,n=.25*i,a=.35*i,o=.2*i;t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+Pr(e.type)).attr("d",`M0 0 a${s},${s} 0 0,1 ${i*.25},${-1*i*.1}
      a${a},${a} 1 0,1 ${i*.4},${-1*i*.1}
      a${n},${n} 1 0,1 ${i*.35},${1*i*.2}

      a${s},${s} 1 0,1 ${i*.15},${1*r*.35}
      a${o},${o} 1 0,1 ${-1*i*.15},${1*r*.65}

      a${n},${s} 1 0,1 ${-1*i*.25},${i*.15}
      a${a},${a} 1 0,1 ${-1*i*.5},0
      a${s},${s} 1 0,1 ${-1*i*.25},${-1*i*.15}

      a${s},${s} 1 0,1 ${-1*i*.1},${-1*r*.35}
      a${o},${o} 1 0,1 ${i*.1},${-1*r*.65}

    H0 V0 Z`)},MC=function(t,e){const i=e.width,r=e.height,s=.15*i;t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+Pr(e.type)).attr("d",`M0 0 a${s},${s} 1 0,0 ${i*.25},${-1*r*.1}
      a${s},${s} 1 0,0 ${i*.25},0
      a${s},${s} 1 0,0 ${i*.25},0
      a${s},${s} 1 0,0 ${i*.25},${1*r*.1}

      a${s},${s} 1 0,0 ${i*.15},${1*r*.33}
      a${s*.8},${s*.8} 1 0,0 0,${1*r*.34}
      a${s},${s} 1 0,0 ${-1*i*.15},${1*r*.33}

      a${s},${s} 1 0,0 ${-1*i*.25},${r*.15}
      a${s},${s} 1 0,0 ${-1*i*.25},0
      a${s},${s} 1 0,0 ${-1*i*.25},0
      a${s},${s} 1 0,0 ${-1*i*.25},${-1*r*.15}

      a${s},${s} 1 0,0 ${-1*i*.1},${-1*r*.33}
      a${s*.8},${s*.8} 1 0,0 0,${-1*r*.34}
      a${s},${s} 1 0,0 ${i*.1},${-1*r*.33}

    H0 V0 Z`)},VC=function(t,e){t.append("circle").attr("id","node-"+e.id).attr("class","node-bkg node-"+Pr(e.type)).attr("r",e.width/2)};function qC(t,e,i,r,s){return t.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("transform","translate("+(s.width-e)/2+", "+i+")")}const zC=function(t,e){const i=e.height,s=i/4,n=e.width-e.padding+2*s,a=[{x:s,y:0},{x:n-s,y:0},{x:n,y:-i/2},{x:n-s,y:-i},{x:s,y:-i},{x:0,y:-i/2}];qC(t,n,i,a,e)},WC=function(t,e){t.append("rect").attr("id","node-"+e.id).attr("class","node-bkg node-"+Pr(e.type)).attr("height",e.height).attr("rx",e.padding).attr("ry",e.padding).attr("width",e.width)},YC=function(t,e,i,r){const s=r.htmlLabels,n=i%(Wd-1),a=t.append("g");e.section=n;let o="section-"+n;n<0&&(o+=" section-root"),a.attr("class",(e.class?e.class+" ":"")+"mindmap-node "+o);const l=a.append("g"),h=a.append("g"),u=e.descr.replace(/(<br\/*>)/g,`
`);ka(h,u,{useHtmlLabels:s,width:e.width,classes:"mindmap-node-label"}),s||h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const f=h.node().getBBox(),d=r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;if(e.height=f.height+d*1.1*.5+e.padding,e.width=f.width+2*e.padding,e.icon)if(e.type===Gt.CIRCLE)e.height+=50,e.width+=50,a.append("foreignObject").attr("height","50px").attr("width",e.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+n+" "+e.icon),h.attr("transform","translate("+e.width/2+", "+(e.height/2-1.5*e.padding)+")");else{e.width+=50;const p=e.height;e.height=Math.max(p,60);const y=Math.abs(e.height-p);a.append("foreignObject").attr("width","60px").attr("height",e.height).attr("style","text-align: center;margin-top:"+y/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+n+" "+e.icon),h.attr("transform","translate("+(25+e.width/2)+", "+(y/2+e.padding/2)+")")}else if(s){const p=(e.width-f.width)/2,y=(e.height-f.height)/2;h.attr("transform","translate("+p+", "+y+")")}else{const p=e.width/2,y=e.padding/2;h.attr("transform","translate("+p+", "+y+")")}switch(e.type){case Gt.DEFAULT:NC(l,e,n);break;case Gt.ROUNDED_RECT:WC(l,e);break;case Gt.RECT:OC(l,e);break;case Gt.CIRCLE:l.attr("transform","translate("+e.width/2+", "+ +e.height/2+")"),VC(l,e);break;case Gt.CLOUD:PC(l,e);break;case Gt.BANG:MC(l,e);break;case Gt.HEXAGON:zC(l,e);break}return qd(e.id,a),e.height},UC=function(e,i,r,s,n){const a=n%(Wd-1),o=r.x+r.width/2,l=r.y+r.height/2,h=i.x+i.width/2,u=i.y+i.height/2,f=h>o?o+Math.abs(o-h)/2:o-Math.abs(o-h)/2,d=u>l?l+Math.abs(l-u)/2:l-Math.abs(l-u)/2,p=h>o?Math.abs(o-f)/2+o:-Math.abs(o-f)/2+o,y=u>l?Math.abs(l-d)/2+l:-Math.abs(l-d)/2+l;e.append("path").attr("d",r.direction==="TB"||r.direction==="BT"?`M${o},${l} Q${o},${y} ${f},${d} T${h},${u}`:`M${o},${l} Q${p},${l} ${f},${d} T${h},${u}`).attr("class","edge section-edge-"+a+" edge-depth-"+s)},HC=function(t){const e=Vl(t.id),i=t.x||0,r=t.y||0;e.attr("transform","translate("+i+","+r+")")},Yd={drawNode:YC,positionNode:HC,drawEdge:UC};xh.use(Vf);function Ud(t,e,i,r){Yd.drawNode(t,e,i,r),e.children&&e.children.forEach((s,n)=>{Ud(t,s,i<0?n:i,r)})}function GC(t,e){e.edges().map((i,r)=>{const s=i.data();if(i[0]._private.bodyBounds){const n=i[0]._private.rscratch;A.trace("Edge: ",r,s),t.insert("path").attr("d",`M ${n.startX},${n.startY} L ${n.midX},${n.midY} L${n.endX},${n.endY} `).attr("class","edge section-edge-"+s.section+" edge-depth-"+s.depth)}})}function Hd(t,e,i,r){e.add({group:"nodes",data:{id:t.id,labelText:t.descr,height:t.height,width:t.width,level:r,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(s=>{Hd(s,e,i,r+1),e.add({group:"edges",data:{id:`${t.id}_${s.id}`,source:t.id,target:s.id,depth:r,section:s.section}})})}function jC(t,e){return new Promise(i=>{const r=yt("body").append("div").attr("id","cy").attr("style","display:none"),s=xh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),Hd(t,s,e,0),s.nodes().forEach(function(n){n.layoutDimensions=()=>{const a=n.data();return{w:a.width,h:a.height}}}),s.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),s.ready(n=>{A.info("Ready",n),i(s)})})}function XC(t){t.nodes().map((e,i)=>{const r=e.data();r.x=e.position().x,r.y=e.position().y,Yd.positionNode(r);const s=Vl(r.nodeId);A.info("Id:",i,"Position: (",e.position().x,", ",e.position().y,")",r),s.attr("transform",`translate(${e.position().x-r.width/2}, ${e.position().y-r.height/2})`),s.attr("attr",`apa-${i})`)})}const $C=async(t,e,i,r)=>{const s=Y();s.htmlLabels=!1,A.debug(`Rendering mindmap diagram
`+t,r.parser);const n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const l=(n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body")).select("#"+e);l.append("g");const h=r.db.getMindmap(),u=l.append("g");u.attr("class","mindmap-edges");const f=l.append("g");f.attr("class","mindmap-nodes"),Ud(f,h,-1,s);const d=await jC(h,s);GC(u,d),XC(d),yr(void 0,l,s.mindmap.padding,s.mindmap.useMaxWidth)},KC={draw:$C},QC=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Nr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},ZC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${QC(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,JC=ZC,tE={db:DC,renderer:KC,parser:EC,styles:JC},eE=Object.freeze(Object.defineProperty({__proto__:null,diagram:tE},Symbol.toStringTag,{value:"Module"}));var No=function(){var t=function(o,l,h,u){for(h=h||{},u=o.length;u--;h[o[u]]=l);return h},e=[1,9],i=[1,10],r=[1,5,10,12],s={trace:function(){},yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:function(l,h,u,f,d,p,y){var x=p.length-1;switch(d){case 7:const _=f.findOrCreateNode(p[x-4].trim().replaceAll('""','"')),C=f.findOrCreateNode(p[x-2].trim().replaceAll('""','"')),k=parseFloat(p[x].trim());f.addLink(_,C,k);break;case 8:case 9:case 11:this.$=p[x];break;case 10:this.$=p[x-1];break}},table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:i},{1:[2,6],7:11,10:[1,12]},t(i,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(r,[2,8]),t(r,[2,9]),{19:[1,16]},t(r,[2,11]),{1:[2,1]},{1:[2,5]},t(i,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:i},{15:18,16:7,17:8,18:e,20:i},{18:[1,19]},t(i,[2,3]),{12:[1,20]},t(r,[2,10]),{15:21,16:7,17:8,18:e,20:i},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:function(l,h){if(h.recoverable)this.trace(l);else{var u=new Error(l);throw u.hash=h,u}},parse:function(l){var h=this,u=[0],f=[],d=[null],p=[],y=this.table,x="",_=0,C=0,k=2,R=1,F=p.slice.call(arguments,1),L=Object.create(this.lexer),E={yy:{}};for(var I in this.yy)Object.prototype.hasOwnProperty.call(this.yy,I)&&(E.yy[I]=this.yy[I]);L.setInput(l,E.yy),E.yy.lexer=L,E.yy.parser=this,typeof L.yylloc>"u"&&(L.yylloc={});var S=L.yylloc;p.push(S);var b=L.options&&L.options.ranges;typeof E.yy.parseError=="function"?this.parseError=E.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function T(){var q;return q=f.pop()||L.lex()||R,typeof q!="number"&&(q instanceof Array&&(f=q,q=f.pop()),q=h.symbols_[q]||q),q}for(var g,w,m,P,j={},N,v,D,B;;){if(w=u[u.length-1],this.defaultActions[w]?m=this.defaultActions[w]:((g===null||typeof g>"u")&&(g=T()),m=y[w]&&y[w][g]),typeof m>"u"||!m.length||!m[0]){var z="";B=[];for(N in y[w])this.terminals_[N]&&N>k&&B.push("'"+this.terminals_[N]+"'");L.showPosition?z="Parse error on line "+(_+1)+`:
`+L.showPosition()+`
Expecting `+B.join(", ")+", got '"+(this.terminals_[g]||g)+"'":z="Parse error on line "+(_+1)+": Unexpected "+(g==R?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(z,{text:L.match,token:this.terminals_[g]||g,line:L.yylineno,loc:S,expected:B})}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+g);switch(m[0]){case 1:u.push(g),d.push(L.yytext),p.push(L.yylloc),u.push(m[1]),g=null,C=L.yyleng,x=L.yytext,_=L.yylineno,S=L.yylloc;break;case 2:if(v=this.productions_[m[1]][1],j.$=d[d.length-v],j._$={first_line:p[p.length-(v||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(v||1)].first_column,last_column:p[p.length-1].last_column},b&&(j._$.range=[p[p.length-(v||1)].range[0],p[p.length-1].range[1]]),P=this.performAction.apply(j,[x,C,_,E.yy,m[1],d,p].concat(F)),typeof P<"u")return P;v&&(u=u.slice(0,-1*v*2),d=d.slice(0,-1*v),p=p.slice(0,-1*v)),u.push(this.productions_[m[1]][0]),d.push(j.$),p.push(j._$),D=y[u[u.length-2]][u[u.length-1]],u.push(D);break;case 3:return!0}}return!0}},n=function(){var o={EOF:1,parseError:function(h,u){if(this.yy.parser)this.yy.parser.parseError(h,u);else throw new Error(h)},setInput:function(l,h){return this.yy=h||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var h=l.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var h=l.length,u=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h),this.offset-=h;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===f.length?this.yylloc.first_column:0)+f[f.length-u.length].length-u[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-h]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),h=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+h+"^"},test_match:function(l,h){var u,f,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))),f=l[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],u=this.performAction.call(this,this.yy,this,h,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),u)return u;if(this._backtrack){for(var p in d)this[p]=d[p];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,h,u,f;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),p=0;p<d.length;p++)if(u=this._input.match(this.rules[d[p]]),u&&(!h||u[0].length>h[0].length)){if(h=u,f=p,this.options.backtrack_lexer){if(l=this.test_match(u,d[p]),l!==!1)return l;if(this._backtrack){h=!1;continue}else return!1}else if(!this.options.flex)break}return h?(l=this.test_match(h,d[f]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var h=this.next();return h||this.lex()},begin:function(h){this.conditionStack.push(h)},popState:function(){var h=this.conditionStack.length-1;return h>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(h){return h=this.conditionStack.length-1-Math.abs(h||0),h>=0?this.conditionStack[h]:"INITIAL"},pushState:function(h){this.begin(h)},stateStackSize:function(){return this.conditionStack.length},options:{easy_keword_rules:!0},performAction:function(h,u,f,d){switch(f){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},rules:[/^(?:sankey-beta\b)/,/^(?:$)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:(\u002C))/,/^(?:(\u0022))/,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/,/^(?:(\u0022)(?!(\u0022)))/,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();s.lexer=n;function a(){this.yy={}}return a.prototype=s,s.Parser=a,new a}();No.parser=No;const aa=No;let Sa=[],wa=[],Gr={};const iE=()=>{Sa=[],wa=[],Gr={},We()};class rE{constructor(e,i,r=0){this.source=e,this.target=i,this.value=r}}const sE=(t,e,i)=>{Sa.push(new rE(t,e,i))};class nE{constructor(e){this.ID=e}}const aE=t=>(t=mt.sanitizeText(t,Y()),Gr[t]||(Gr[t]=new nE(t),wa.push(Gr[t])),Gr[t]),oE=()=>wa,lE=()=>Sa,cE=()=>({nodes:wa.map(t=>({id:t.ID})),links:Sa.map(t=>({source:t.source.ID,target:t.target.ID,value:t.value}))}),hE={nodesMap:Gr,getConfig:()=>Y().sankey,getNodes:oE,getLinks:lE,getGraph:cE,addLink:sE,findOrCreateNode:aE,getAccTitle:Ye,setAccTitle:Ne,getAccDescription:He,setAccDescription:Ue,getDiagramTitle:Ge,setDiagramTitle:ei,clear:iE},Gd=class Oo{static next(e){return new Oo(e+ ++Oo.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}};Gd.count=0;let uh=Gd;const uE={left:Yf,right:Uf,center:Hf,justify:Gf},dE=function(t,e,i,r){const{securityLevel:s,sankey:n}=Y(),a=c1.sankey;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=n?.width??a.width,f=n?.height??a.width,d=n?.useMaxWidth??a.useMaxWidth,p=n?.nodeAlignment??a.nodeAlignment,y=n?.prefix??a.prefix,x=n?.suffix??a.suffix,_=n?.showValues??a.showValues,C=r.db.getGraph(),k=uE[p],R=10;zf().nodeId(T=>T.id).nodeWidth(R).nodePadding(10+(_?15:0)).nodeAlign(k).extent([[0,0],[u,f]])(C);const L=gh(jf);h.append("g").attr("class","nodes").selectAll(".node").data(C.nodes).join("g").attr("class","node").attr("id",T=>(T.uid=uh.next("node-")).id).attr("transform",function(T){return"translate("+T.x0+","+T.y0+")"}).attr("x",T=>T.x0).attr("y",T=>T.y0).append("rect").attr("height",T=>T.y1-T.y0).attr("width",T=>T.x1-T.x0).attr("fill",T=>L(T.id));const E=({id:T,value:g})=>_?`${T}
${y}${Math.round(g*100)/100}${x}`:T;h.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(C.nodes).join("text").attr("x",T=>T.x0<u/2?T.x1+6:T.x0-6).attr("y",T=>(T.y1+T.y0)/2).attr("dy",`${_?"0":"0.35"}em`).attr("text-anchor",T=>T.x0<u/2?"start":"end").text(E);const I=h.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(C.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),S=n?.linkColor||"gradient";if(S==="gradient"){const T=I.append("linearGradient").attr("id",g=>(g.uid=uh.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",g=>g.source.x1).attr("x2",g=>g.target.x0);T.append("stop").attr("offset","0%").attr("stop-color",g=>L(g.source.id)),T.append("stop").attr("offset","100%").attr("stop-color",g=>L(g.target.id))}let b;switch(S){case"gradient":b=T=>T.uid;break;case"source":b=T=>L(T.source.id);break;case"target":b=T=>L(T.target.id);break;default:b=S}I.append("path").attr("d",Wf()).attr("stroke",b).attr("stroke-width",T=>Math.max(1,T.width)),yr(void 0,h,0,d)},fE={draw:dE},pE=t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),gE=aa.parse.bind(aa);aa.parse=t=>gE(pE(t));const yE={parser:aa,db:hE,renderer:fE},mE=Object.freeze(Object.defineProperty({__proto__:null,diagram:yE},Symbol.toStringTag,{value:"Module"}));export{ce as _,Li as m};
