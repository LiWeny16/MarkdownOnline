import{R as e,r as a}from"./react-0d9c9f23.js";import{y as ge,b2 as Ce,a as oe,l as Y,m as G,n as K,b as ke,T as V,p as Q,q as D,b3 as le,aU as g,b4 as ie,b5 as ye,o as pe,aR as fe,B as m,aS as ze,aT as H,a9 as Me,$ as We,b6 as _e,b7 as Re,b8 as Te,b9 as re,ay as Le,ba as Ae,V as s,bb as Ie,S as Be,K as Ee,w as U,bc as De,bd as se,be as ce,ae as Fe,I as me,aY as Pe,x as $e,bf as Oe,bg as Xe,aH as je,bh as He,as as Ye,af as Ne,aa as Ue,bi as qe}from"./@mui-0903014f.js";import{g as xe,i as ne,m as be,e as Ve,n as Je,a as S,b as T,I as de,s as Ge,c as Ke,d as Qe,f as O,h as ue,j as Ze,k as et,l as J,S as tt,o as nt,p as at,q as ot,r as lt,t as it,C as rt,u as st,v as ct,w as mt}from"./index-273466fe.js";import{o as we}from"./mobx-react-49086c1a.js";import{u as N}from"./react-i18next-093df503.js";import"./@babel-518c05f7.js";import"./clsx-29d81c80.js";import"./@emotion-c98c060d.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-transition-group-5217f7e1.js";import"./react-dom-b710246a.js";import"./scheduler-765c72db.js";import"./@popperjs-61ffd834.js";import"./prop-types-c01d55b3.js";import"./react-is-11039b32.js";import"./monaco-editor-5cf1114e.js";/* empty css                      */import"./gsap-cf87e9ff.js";import"./i18next-2edfafb0.js";import"./@dnd-kit-b0134b90.js";import"./markdown-it-multimd-table-766322c9.js";import"./markdown-it-github-toc-d2e55c92.js";import"./uslug-b4eaf0e7.js";import"./unorm-1228fe77.js";import"./markdown-it-task-lists-4fbe77b0.js";import"./markdown-it-emoji-66d1da7f.js";import"./mobx-890d6d9e.js";import"./@monaco-editor-41149cb1.js";import"./state-local-dd516420.js";import"./html2canvas-a81bcda4.js";import"./react-resizable-44dc0d2e.js";import"./react-draggable-4a1d91b3.js";import"./i18next-browser-languagedetector-953d2d0b.js";import"./mobx-react-lite-64872c2a.js";import"./use-sync-external-store-3bf5d15d.js";const ae=ge(i=>e.createElement(Ce,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...i}))(({theme:i})=>({"& .MuiPaper-root":{borderRadius:6,marginTop:i.spacing(1),color:i.palette.mode==="light"?"rgb(55, 65, 81)":i.palette.grey[300],"& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"&:hover":{backgroundColor:i.palette.mode==="light"?oe(i.palette.primary.main,.08):oe(i.palette.primary.main,.15)},"& .MuiSvgIcon-root":{fontSize:20,color:i.palette.mode==="light"?"rgb(55, 65, 81)":i.palette.grey[300],marginRight:i.spacing(1.5)}}}}));function dt(i){const{t}=N();e.useRef();let[M,f]=e.useState(!1);const[w,c]=e.useState("https://bigonion.cn"),[_,v]=e.useState(!1);let I=h=>{f(()=>!1),i.onClick(h)},E=async h=>{xe()};const W=h=>A=>{A.stopPropagation(),window.location.href=h},p=()=>{navigator.clipboard.writeText(w).then(()=>{v(!0),setTimeout(()=>v(!1),2e3)}).catch(h=>{console.error("Failed to copy URL:",h)})};return e.createElement(e.Fragment,null,e.createElement(Y,{fullWidth:!0,maxWidth:"sm",open:M,onClose:I},e.createElement(G,null,"真·分享"),e.createElement(K,null,e.createElement(ke,{title:_?"已复制!":"点击复制"},e.createElement(V,{value:w,variant:"outlined",fullWidth:!0,InputProps:{readOnly:!0},onClick:p}))),e.createElement(Q,null,e.createElement(D,{onClick:E},"创建分享链接"))),e.createElement(le,null),t("t-share"),e.createElement(ae,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:i.anchorEl,open:i.open,onClick:i.onClick},e.createElement(g,{onClick:h=>{h.stopPropagation(),f(!0)},disabled:!0,disableRipple:!0},e.createElement(le,null),"真·分享"),e.createElement(g,{onClick:W("weixin://dl/scan"),disableRipple:!0},e.createElement(ie,null),"WeChat"),e.createElement(g,{onClick:W("tg://"),disableRipple:!0},e.createElement(ie,null),"Telegram"),e.createElement(g,{onClick:W("mailto:bigonion@bigonion.cn?subject=你的主题&body=你的邮件内容"),disableRipple:!0},e.createElement(ye,null),"Email")))}const ut=(await ne("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function ht(){let i=xe()??"";ut.sleep(250).then(()=>{var t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(i),t.download="text.md",t.click()})}function gt(i){const{t}=N();let M=i.closeExportMenu,[f,w]=e.useState(!1),c=p=>{console.log(p),M(p),w(()=>!1)},_=e.useRef();const[v,I]=e.useState(3),E=p=>{p.stopPropagation(),I(p.target.value)};let W=p=>{c(p);let h=_.current.value;Ve(v??4,h??"md_snapshot.png"),i.closeMenu(p),Je("导出成功！","Beta版本",{kind:"info",position:"topRight"})};return e.createElement(e.Fragment,null,e.createElement(Y,{className:"avoid",onClose:c,open:f,fullWidth:!0,maxWidth:"sm"},e.createElement("div",{onClick:p=>{p.stopPropagation()}},e.createElement(G,null,"导出设置"),e.createElement(K,null,e.createElement(pe,null,"请选择图片清晰度"),e.createElement("br",null),e.createElement(fe,{fullWidth:!0},e.createElement(m,null,e.createElement(ze,{id:"demo-simple-select-label"},"图片清晰度"),e.createElement(H,{label:"图片清晰度",defaultValue:"4",defaultChecked:!0,fullWidth:!0,onChange:E},e.createElement(g,{value:"1"},"1 (比较模糊,体积轻巧)"),e.createElement(g,{value:"2"},"2 (有些模糊)"),e.createElement(g,{value:"4"},"3 (默认,适中,推荐)"),e.createElement(g,{value:"6"},"4 (比较清晰,体积稍大)"),e.createElement(g,{value:"10"},"5 (超鸡无敌霹雳霸清晰,体积较大)"))),e.createElement(m,{marginX:"8px"},e.createElement(V,{inputRef:_,margin:"dense",id:"export_img_name",defaultValue:"md_snapshot.png",label:"导出的文件名",type:"text",fullWidth:!0,variant:"standard",placeholder:"md_snapshot.png"})))),e.createElement(Q,null,e.createElement(D,{onClick:c},"取消"),e.createElement(D,{onClick:W},"确认导出")))),e.createElement(Me,null),t("t-export"),e.createElement(ae,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:i.anchorEl,open:i.open,onClick:p=>{M(p)}},e.createElement(g,{onClick:()=>{be()},disableRipple:!0},e.createElement(We,null),t("t-export-pdf")),e.createElement(g,{onClick:p=>{w(!0),M(p)},disableRipple:!0},e.createElement(_e,null),t("t-export-image")),e.createElement(g,{onClick:()=>{ht()},disableRipple:!0},e.createElement(Re,null),t("t-export-markdown"))))}function pt(i){i.preventDefault()}function ft(){return a.createElement(m,{sx:{marginBottom:"5px"},role:"presentation",onClick:pt},a.createElement(Te,{"aria-label":"breadcrumb"},a.createElement(re,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/"},a.createElement(Le,{sx:{mr:.5},fontSize:"inherit"}),"MUI"),a.createElement(re,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/material-ui/getting-started/installation/"},a.createElement(Ae,{sx:{mr:.5},fontSize:"inherit"}),"Basic"),a.createElement(s,{sx:{display:"flex",alignItems:"center"},color:"text.primary"},a.createElement(Ie,{sx:{mr:.5},fontSize:"inherit"}),"Theme")))}let Et=ge(Be)(({theme:i})=>({width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:i.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:i.palette.mode==="dark"?"#003892":"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:i.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:20/2}}));const xt=(await ne("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default,he=(await ne("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,B={transition:"background-color 0.4s ease, box-shadow 0.4s ease",position:"relative",padding:"5px",borderRadius:"3px",display:"flex",flexDirection:"column",mt:"10px",mb:"5px",ml:"0px",pl:"25px",willChange:"background-color, box-shadow","&::before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:4,backgroundColor:"transparent",transition:"background-color 0.2s cubic-bezier(0.5, 0.05, 1, 0.5)"}},L=i=>({"&:hover::before":{backgroundColor:S()==="light"?"#840084":"#d2d2d2"},"&:hover":{backgroundColor:S()==="light"?"#EAEAEA":"#393939",boxShadow:"0px 4px 12px rgba(20, 15, 15, 0.1)"}}),bt=we(function(){const{t,i18n:M}=N();S();const f=Ee(),w={...B,transition:"background-color 2s ease, box-shadow 0.4s ease","&::before":{...B["&::before"],transition:"background-color 0.24s ease 0.1s"}},c={color:f.palette.info.contrastText??"#8B8A8A",fontSize:"0.79rem",fontWeight:500,mb:"5px"},[_,v]=e.useState(!1),[I,E]=e.useState(!1),W=n=>{O({advanced:{imageSettings:{...T().advanced.imageSettings,modePrefer:n.target.value==="folder"?"folder":"vf"}}})},p=n=>{O({advanced:{imageSettings:{...T().advanced.imageSettings,basicStyle:n.target.value}}})},h=n=>{O({advanced:{imageSettings:{...T().advanced.imageSettings,imgStorePath:n.target.value}}})};function A(n,l){const r=document.querySelector(".markdown-body");l?(ue("dark"),v(n.target.checked),r.style.cssText=""):(ue("light"),v(n.target.checked))}function j(n,l){l?O({basic:{syncScroll:!0}}):O({basic:{syncScroll:!1}})}function X(n){O({basic:{speechLanguage:n.target.value}})}function F(n){O({basic:{fontSize:n.target.value}}),document.getElementsByClassName("fontSizeStyle")&&(he.removeAddedStyle(),he.addStyle(`
      .markdown-body p,
      .markdown-body ol,
      .markdown-body li,
      .markdown-body div {
          font-size: ${T().basic.fontSize}px;
      }
        `,"fontSizeStyle"))}function d(n){O({basic:{editorAutoWrap:n.target.value===1}}),window.editor.updateOptions({wordWrap:T().basic.editorAutoWrap?"on":"off"})}function x(n){O({basic:{fontFamily:n.target.value===1?"Times New Roman":'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"'}})}function o(n){let l=n.target.value;M.changeLanguage(n.target.value),document.documentElement.lang=n.target.value,Ze({memorable:{languageChanged:!0}}),O({basic:{language:l}})}function k(n){O({advanced:{mermaidTheme:n.target.value}}),xt.init({theme:n.target.value}),et()}e.useEffect(()=>{v(S()==="dark")},[S()]);const b=async()=>{try{if(localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(n=>{const l=n.indexOf("="),r=l>-1?n.substr(0,l).trim():n.trim();r&&(document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`,document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=${window.location.hostname}`,document.cookie=`${r}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.${window.location.hostname}`)}),"indexedDB"in window)try{const n=await indexedDB.databases();for(const l of n)if(l.name)try{const r=indexedDB.open(l.name);r.onsuccess=()=>{r.result.close()}}catch(r){console.log(`无法关闭数据库 ${l.name}:`,r)}await new Promise(l=>setTimeout(l,100));for(const l of n)if(l.name)try{await new Promise((r,P)=>{const C=indexedDB.deleteDatabase(l.name);let R=!1;const $=setTimeout(()=>{R||(R=!0,console.warn(`删除数据库 ${l.name} 超时，但继续处理`),r())},3e3);C.onsuccess=()=>{R||(R=!0,clearTimeout($),console.log(`成功删除数据库: ${l.name}`),r())},C.onerror=()=>{R||(R=!0,clearTimeout($),console.warn(`删除数据库 ${l.name} 失败，但继续处理:`,C.error),r())},C.onblocked=()=>{console.warn(`数据库 ${l.name} 删除被阻塞，将在页面刷新后清除`),R||(R=!0,clearTimeout($),r())}})}catch(r){console.warn(`删除数据库 ${l.name} 时出错:`,r)}}catch(n){console.warn("清除IndexedDB时出错，但继续处理其他数据:",n)}if("serviceWorker"in navigator&&"caches"in window)try{const n=await caches.keys();await Promise.allSettled(n.map(r=>caches.delete(r)));const l=await navigator.serviceWorker.getRegistrations();await Promise.allSettled(l.map(r=>r.unregister()))}catch(n){console.warn("清除Service Worker缓存时出错:",n)}J(t("t-reset-success"),3e3,{kind:"success"}),setTimeout(()=>{window.location.href=window.location.href},3e3)}catch(n){console.error("重置数据时出错:",n),J(t("t-reset-warning"),3e3,{kind:"warning"}),setTimeout(()=>{window.location.href=window.location.href},3e3)}},y=()=>{E(!0)},z=()=>{E(!1),b()};return e.createElement(e.Fragment,null,e.createElement(m,{className:"transparent-scrollbar",sx:{width:"100%",padding:"1rem",display:"flex",flexDirection:"column",fontSize:"0.89rem",maxHight:"200px",overflowY:"scroll"}},e.createElement(s,{id:"settings_1_x",sx:{fontSize:"30px",fontWeight:"700"}},t("t-basic-settings-title")),e.createElement(U,null),e.createElement(m,{id:"settings_1_1",sx:{...B,...L(S())}},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Theme"),e.createElement(s,{sx:c},t("t-theme-description")),e.createElement(Et,{checked:_,size:"small",inputProps:{"aria-label":"controlled"},onChange:A})),e.createElement(m,{id:"settings_1_2",sx:{...B,...L(S())}},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Language"),e.createElement(s,{sx:c},t("t-language-description")),e.createElement(H,{value:T().basic.language??"zh",defaultChecked:!0,size:"small",color:"primary",onChange:o},e.createElement(g,{value:"zh"},t("t-chinese")),e.createElement(g,{value:"en"},t("t-english")))),e.createElement(te,{id:"settings_1_3",content:t("t-editor-settings-title")}),e.createElement(m,{sx:{...B,...L(S())},id:"settings_1_2"},e.createElement(m,{sx:{...w,...L(S())}},e.createElement(m,{className:"FLEX ROW"},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Font Size")),e.createElement(s,{sx:c},t("t-font-size-description")),e.createElement(H,{value:T().basic.fontSize,defaultChecked:!0,fullWidth:!0,size:"small",onChange:F},[...Array(10).keys()].map(n=>{const l=8+n*2;return e.createElement(g,{key:l,value:l},l," px")}))),e.createElement(m,{sx:{...w,...L(S())}},e.createElement(m,{className:"FLEX ROW"},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Font Family")),e.createElement(s,{sx:c},t("t-font-family-description")),e.createElement(H,{value:T().basic.fontFamily==="Times New Roman"?1:0,defaultChecked:!0,fullWidth:!0,size:"small",onChange:x},e.createElement(g,{value:0},t("t-default")),e.createElement(g,{value:1},"Times New Roman"))),e.createElement(m,{sx:{...B,...L(S())}},e.createElement(m,{className:"FLEX ROW"},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Synchronous Scrolling")),e.createElement(s,{sx:c},t("t-sync-scroll-description")),e.createElement(de,{checked:T().basic.syncScroll,size:"small",inputProps:{"aria-label":"controlled"},onChange:j})),e.createElement(m,{sx:{...B,...L(S())}},e.createElement(m,{className:"FLEX ROW"},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Editor Auto Wrap")),e.createElement(s,{sx:c},t("t-auto-wrap-description")),e.createElement(H,{value:T().basic.editorAutoWrap?1:0,defaultChecked:!0,fullWidth:!0,size:"small",onChange:d},e.createElement(g,{value:1},t("t-on")),e.createElement(g,{value:0},t("t-off"))))),e.createElement(m,{id:"settings_1_4",sx:{...B,...L(S())}},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Speech To Text"),e.createElement(s,{sx:c},t("t-speech-language-description")),e.createElement(H,{value:T().basic.speechLanguage??"zh-CN",defaultChecked:!0,fullWidth:!0,size:"small",onChange:X},Ge.map((n,l)=>e.createElement(g,{key:l,value:n[0]},n[1])))),e.createElement(s,{id:"settings_2_x",sx:{mt:"20px",fontSize:"30px",fontWeight:"700"}},t("t-advanced-settings-title")),e.createElement(U,null),e.createElement(m,{id:"settings_2_1",sx:{...B,...L(S())}},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Export Settings"),e.createElement(s,{sx:c},t("t-export-settings-description")),e.createElement(de,{disabled:!0,size:"small",inputProps:{"aria-label":"controlled"}})),e.createElement(m,{sx:{...B,...L(S())}},e.createElement(s,{id:"settings_2_2",sx:{fontSize:"0.89rem",fontWeight:500}},"Mermaid Theme Configs"),e.createElement(s,{sx:c},t("t-mermaid-theme-description")),e.createElement(H,{value:T().advanced.mermaidTheme??"default",defaultChecked:!0,fullWidth:!0,size:"small",color:"primary",onChange:k},Ke.map((n,l)=>e.createElement(g,{key:l,value:n},Qe[l])))),e.createElement(te,{id:"settings_2_3",content:t("t-image-settings-title")}),e.createElement(m,{sx:{...B,...L(S())}},e.createElement(m,{sx:{...w,...L(S())}},e.createElement(s,{id:"settings_2_3",sx:{fontSize:"0.89rem",fontWeight:500}},t("t-image-storage-preference")),e.createElement(s,{sx:c},t("t-image-storage-description")),e.createElement(fe,{sx:{transition:"inherit"}},e.createElement(De,{value:T().advanced.imageSettings.modePrefer,onChange:W},e.createElement(se,{value:"folder",control:e.createElement(ce,{sx:{"& .MuiSvgIcon-root":{fontSize:22,color:"#65C466"}}}),label:t("t-image-storage-folder")}),e.createElement(se,{value:"vf",control:e.createElement(ce,{sx:{"& .MuiSvgIcon-root":{fontSize:22,color:"#65C466"}}}),label:t("t-image-storage-browser")})))),e.createElement(m,{sx:{...w,...L(S())}},e.createElement(s,{id:"settings_2_4",sx:{fontSize:"0.89rem",fontWeight:500}},t("t-default-image-style")),e.createElement(s,{sx:c},t("t-default-image-style-description")),e.createElement(V,{fullWidth:!0,margin:"normal",name:"basicStyle",label:t("t-basic-style"),value:T().advanced.imageSettings.basicStyle,onChange:p})),e.createElement(m,{sx:{...w,...L(S())}},e.createElement(s,{id:"settings_2_5",sx:{fontSize:"0.89rem",fontWeight:500}},t("t-default-stored-path")),e.createElement(s,{sx:c},t("t-default-stored-path-description")),e.createElement(V,{disabled:T().advanced.imageSettings.modePrefer==="vf",fullWidth:!0,margin:"none",name:"imgStorePath",label:t("t-image-store-path"),value:T().advanced.imageSettings.imgStorePath,onChange:h}))),e.createElement(te,{id:"settings_2_7",content:t("t-reset-settings-title")}),e.createElement(m,{id:"settings_2_8",sx:{...B,...L(S())}},e.createElement(s,{sx:{fontSize:"0.89rem",fontWeight:500}},"Reset All Data"),e.createElement(s,{sx:c},t("t-reset-data-description")),e.createElement(D,{variant:"contained",color:"error",size:"small",onClick:y,sx:{mt:1,backgroundColor:"#d32f2f","&:hover":{backgroundColor:"#b71c1c"}}},t("t-reset-button")))),e.createElement(Y,{open:I,onClose:()=>E(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"sm",fullWidth:!0},e.createElement(G,{id:"alert-dialog-title"},t("t-reset-confirm-title")),e.createElement(K,null,e.createElement(s,{id:"alert-dialog-description",sx:{mb:2},dangerouslySetInnerHTML:{__html:t("t-reset-confirm-description")}}),e.createElement(s,{component:"div",sx:{ml:2,mb:2},dangerouslySetInnerHTML:{__html:t("t-reset-confirm-list")}}),e.createElement(s,{color:"error",sx:{fontWeight:500}},t("t-reset-confirm-warning"))),e.createElement(Q,null,e.createElement(D,{onClick:()=>E(!1),color:"primary"},t("t-cancel")),e.createElement(D,{onClick:z,color:"error",variant:"contained"},t("t-confirm-reset")))))}),te=({content:i,id:t})=>e.createElement(e.Fragment,null,e.createElement(s,{id:t,sx:{mt:"5px",fontSize:"22px",fontWeight:700}},i),e.createElement(U,null));function wt(i){const{t}=N();Ee().palette;const M=S();e.useRef();let[f,w]=e.useState(!1);e.useState("");let c=_=>{w(()=>!1),i.onClick(_),i.closeAll()};return e.createElement(e.Fragment,null,e.createElement(Y,{fullScreen:!1,maxWidth:!1,open:i.open,onClose:c,sx:{height:"100vh"}},e.createElement(m,{sx:{background:M==="light"?"#F8FAFB":"",padding:"1rem",height:{xs:"80vh",sm:"75vh",md:"68vh"},width:{xs:"95vw",sm:"85vw",md:"70vw"},maxWidth:"1200px",maxHeight:"800px"}},e.createElement(ft,null),e.createElement(U,{sx:{my:.5}}),e.createElement(m,{sx:{height:"calc(100% - 40px)",display:"flex",background:M==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRadius:"5px"}},e.createElement(tt,null),e.createElement(bt,null)))),e.createElement(Fe,null),t("t-settings"))}function vt(i){const{t}=N(),M=S(),[f,w]=a.useState({width:400,height:700}),[c,_]=a.useState({x:200,y:50}),[v,I]=a.useState(!1),[E,W]=a.useState(!1),[p,h]=a.useState(!1),A=a.useRef({offsetX:0,offsetY:0}),j=o=>{i.onClick(o),i.closeAll()},X=o=>{W(!0),A.current={offsetX:o.clientX-c.x,offsetY:o.clientY-c.y}},F=o=>{if(!E)return;const k=window.innerWidth-f.width,b=window.innerHeight-f.height,y=Math.max(0,Math.min(k,o.clientX-A.current.offsetX)),z=Math.max(0,Math.min(b,o.clientY-A.current.offsetY));_({x:y,y:z})},d=()=>{W(!1)};e.useEffect(()=>{if(E)return document.addEventListener("mousemove",F),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",d)}},[E,f]);const x=()=>{I(!v)};return e.createElement(e.Fragment,null,e.createElement(Y,{hideBackdrop:!0,fullScreen:!1,maxWidth:!1,open:i.open,onClose:j,PaperProps:{style:{position:"fixed",left:v?0:c.x,top:v?0:c.y,width:v?"100vw":f.width,height:v?"100vh":f.height,margin:0,maxWidth:"none",maxHeight:"none",background:"transparent",boxShadow:"none",overflow:"visible",transition:E||p?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}}},e.createElement(m,{onMouseDown:X,sx:{height:"40px",background:M==="light"?"#F8FAFB":"#2B2B2B",borderRadius:"8px 8px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between",px:2,cursor:E?"grabbing":"grab",borderBottom:`1px solid ${M==="light"?"#e0e0e0":"#404040"}`,userSelect:"none",transition:E||p?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}},e.createElement(s,{variant:"body2",sx:{color:M==="light"?"#666":"#ccc"}},"LetShare - 协作分享"),e.createElement(m,{sx:{display:"flex",gap:.5}},e.createElement(me,{size:"small",onClick:x},e.createElement(Pe,{fontSize:"small"})),e.createElement(me,{size:"small",onClick:j},e.createElement($e,{fontSize:"small"})))),e.createElement(m,{sx:{height:v?"calc(100vh - 40px)":f.height-40,width:"100%",background:"#F8FAFB",borderRadius:"0 0 8px 8px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",overflow:"hidden",position:"relative",transition:E||p?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}},e.createElement("iframe",{src:"https://letshare.fun",style:{width:"100%",height:"100%",border:"none",borderRadius:"0 0 8px 8px",background:"transparent"},title:"Let's Share",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation"}),(E||p)&&e.createElement(m,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:999,cursor:E?"grabbing":"default",background:"transparent"}}),!v&&e.createElement(e.Fragment,null,e.createElement(m,{sx:{position:"absolute",left:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:o=>{o.preventDefault(),h(!0);const k=o.clientX,b=f.width,y=c.x,z=l=>{const r=l.clientX-k,P=Math.max(300,Math.min(window.innerWidth,b-r)),C=b-P,R=Math.max(0,Math.min(window.innerWidth-P,y+C));w($=>({...$,width:P})),_($=>({...$,x:R}))},n=()=>{h(!1),document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",z),document.addEventListener("mouseup",n)}}),e.createElement(m,{sx:{position:"absolute",right:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:o=>{o.preventDefault(),h(!0);const k=o.clientX,b=f.width,y=n=>{const l=Math.max(300,Math.min(window.innerWidth,b+(n.clientX-k)));w(r=>({...r,width:l}))},z=()=>{h(!1),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",z)}}),e.createElement(m,{sx:{position:"absolute",bottom:-8,left:0,width:"100%",height:16,cursor:"ns-resize",zIndex:1e3},onMouseDown:o=>{o.preventDefault(),h(!0);const k=o.clientY,b=f.height,y=n=>{const l=Math.max(600,Math.min(window.innerHeight,b+(n.clientY-k)));w(r=>({...r,height:l}))},z=()=>{h(!1),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",z)}}),e.createElement(m,{sx:{position:"absolute",bottom:-8,left:-8,width:20,height:20,cursor:"ne-resize",zIndex:1001},onMouseDown:o=>{o.preventDefault(),h(!0);const k=o.clientX,b=o.clientY,y=f.width,z=f.height,n=c.x,l=P=>{const C=P.clientX-k,R=Math.max(300,Math.min(window.innerWidth,y-C)),$=Math.max(600,Math.min(window.innerHeight,z+(P.clientY-b))),Z=y-R,ee=Math.max(0,Math.min(window.innerWidth-R,n+Z));w({width:R,height:$}),_(q=>({...q,x:ee}))},r=()=>{h(!1),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",r)}}),e.createElement(m,{sx:{position:"absolute",bottom:-8,right:-8,width:20,height:20,cursor:"nw-resize",zIndex:1001},onMouseDown:o=>{o.preventDefault(),h(!0);const k=o.clientX,b=o.clientY,y=f.width,z=f.height,n=r=>{const P=Math.max(300,Math.min(window.innerWidth,y+(r.clientX-k))),C=Math.max(600,Math.min(window.innerHeight,z+(r.clientY-b)));w({width:P,height:C})},l=()=>{h(!1),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",l)}})))),e.createElement(Oe,null),e.createElement(s,null,t("t-collaborative-office")))}function St(i){const{t}=N(),M=S(),f=d=>{i.onClick(d),i.closeAll()},[w,c]=a.useState({}),[_,v]=a.useState({}),[I,E]=a.useState({});a.useEffect(()=>{F.forEach(async d=>{await nt(d.id)?(c(o=>({...o,[d.id]:"installed"})),E(o=>({...o,[d.id]:!0}))):c(o=>({...o,[d.id]:"not_installed"}))})},[]);const W=(d,x)=>{const o=F[d];if(!o)return;const{url:k,id:b}=o;switch(x){case"install":p(d,k,b);break;case"stop":A(b);break;case"uninstall":j(b);break;case"toggleEnable":X(b);break}},p=(d,x,o)=>{let b=!1;c(n=>({...n,[o]:"downloading"})),v(n=>({...n,[o]:0}));const y=Date.now();at(x,o,n=>{if(n>=0&&v(l=>({...l,[o]:n})),n===100){const l=Date.now()-y;l<2500?setTimeout(()=>{b||(J(t("t-lab-install-success"),2e3,{kind:"success"}),c(r=>({...r,[o]:"installed"})),E(r=>({...r,[o]:!0})))},2500-l):b||(J(t("t-lab-install-success"),2e3,{kind:"success"}),c(r=>({...r,[o]:"installed"})),E(r=>({...r,[o]:!0})))}});const z=()=>{b=!0,A(o)};h[o]=z},h={},A=d=>{h[d]&&(h[d](),delete h[d]),c(x=>({...x,[d]:"not_installed"})),v(x=>({...x,[d]:0}))},j=async d=>{const x=await ot();lt(x,"data",d),c(o=>({...o,[d]:"not_installed"}))},X=d=>{E(x=>({...x,[d]:!x[d]}))},F=[{title:t("t-lab-card-spelling-association-title"),description:t("t-lab-card-spelling-association-desc"),url:`https://${window._cdn.cdn[0]}/npm/an-array-of-english-words@2.0.0/index.json`,id:"spelling_data_json"},{title:t("t-lab-card-spelling-check-title"),description:t("t-lab-card-spelling-check-desc"),url:"https://jsonplaceholder.typicode.com/todos/2",id:"check_spell"}];return e.createElement(e.Fragment,null,e.createElement(Y,{className:"transparent-scrollbar",hideBackdrop:!1,fullScreen:!1,maxWidth:!1,open:i.open,onClose:f,sx:{height:"100svh",width:"100svw",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(m,{className:"transparent-scrollbar",sx:{overflowX:"hidden",height:"50svh",width:"50svw",display:"flex",flexDirection:"column",background:M==="light"?"#F8FAFB":"#2B2B2B",padding:"24px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",alignItems:"center"}},e.createElement(s,{fontSize:30,fontWeight:"bold",textAlign:"center"},t("t-lab-title")),e.createElement(U,{sx:{width:"100%",my:2}}),e.createElement(m,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"24px",width:"100%"}},F.map((d,x)=>{const o=w[d.id]||"not_installed",k=I[d.id]??!0;return e.createElement(Xe,{key:x,sx:{width:"250px",height:"220px",borderRadius:"12px",boxShadow:3,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:2}},e.createElement(m,{sx:{flex:1}},e.createElement(s,{variant:"h6",sx:{fontWeight:"bold"}},d.title),e.createElement(s,{variant:"body2",color:"textSecondary"},d.description)),e.createElement(m,{sx:{display:"flex",justifyContent:"space-between",gap:1}},o==="not_installed"&&e.createElement(D,{variant:"contained",color:"primary",sx:{flex:1,minWidth:"64px",height:"42px"},onClick:()=>W(x,"install")},t("t-lab-button-install")),o==="downloading"&&e.createElement(D,{variant:"contained",color:"error",sx:{flex:1,display:"flex",minWidth:"64px",height:"42px",alignItems:"center",justifyContent:"center"},onClick:()=>W(x,"stop")},e.createElement(je,{size:20,sx:{color:"white",marginRight:1}})),o==="installed"&&e.createElement(e.Fragment,null,e.createElement(D,{variant:"contained",color:"secondary",sx:{flex:1},onClick:()=>W(x,"uninstall")},t("t-lab-button-uninstall")),e.createElement(D,{variant:"contained",color:k?"success":"warning",sx:{flex:1},onClick:()=>W(x,"toggleEnable")},t(k?"t-lab-button-disable":"t-lab-button-enable")))))})))),e.createElement(He,null),e.createElement(s,null,t("t-lab-title")))}const ln=we(()=>{const{t:i}=N(),t=mt(),[M,f]=a.useState(null),[w,c]=a.useState(null),[_,v]=a.useState(null),[I,E]=a.useState(null),[W,p]=a.useState(null),[h,A]=a.useState(null),[j,X]=a.useState(!1),F=!!M,d=!!w,x=!!_,o=!!I,k=!!W,b=!!h,y=u=>{f(u.currentTarget)},z=u=>{c(u.currentTarget),u.stopPropagation()},n=async u=>{await st()?(v(u.target),u.stopPropagation()):(u.stopPropagation(),C(),X(!0))},l=u=>{E(u.currentTarget)},r=u=>{p(u.currentTarget)},P=u=>{A(u.currentTarget)},C=()=>{f(null)},R=u=>{c(null),u.stopPropagation()},$=u=>{v(null),u.stopPropagation()},Z=u=>{E(null),u.stopPropagation()},ee=u=>{p(null),u.stopPropagation()},q=u=>{A(null),u.stopPropagation()},ve=()=>{t.display(),C()},Se=()=>{ct(!0),C()};return a.createElement("div",null,a.createElement(Y,{open:j,onClose:()=>{X(!1)}},a.createElement(G,null,a.createElement(s,{variant:"h6",gutterBottom:!0},"确定导出吗，你还没有保存呢！")),a.createElement(K,null,a.createElement(pe,null,a.createElement(s,{variant:"body1",gutterBottom:!0},'Once you have clicked the "yes" button, your text will be saved.'))),a.createElement(Q,null,a.createElement(D,{onClick:()=>{X(!1),it(),be()}},"是嘟"),a.createElement(D,{onClick:()=>{X(!1)},autoFocus:!0},"达咩"))),a.createElement(rt,{open:F,endIcon:a.createElement(Ye,null),onClick:y},i("t-more")),a.createElement(ae,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:M,open:F,onClose:C},a.createElement(g,{onClick:ve,disableRipple:!0},a.createElement(Ne,null),i("t-image-manager")),a.createElement(g,{onClick:Se,disableRipple:!0},a.createElement(Ue,null),i("t-file-manager")),a.createElement(g,{onClick:u=>{n(u)},disableRipple:!0},a.createElement(gt,{anchorEl:_,open:x,closeMenu:C,closeExportMenu:$})),a.createElement(U,{sx:{my:.5}}),a.createElement(g,{onClick:u=>{z(u)},disableRipple:!0},a.createElement(dt,{closeAll:C,anchorEl:w,open:d,onClick:R})),a.createElement(g,{onClick:u=>{r(u)},disableRipple:!0},a.createElement(vt,{closeAll:C,anchorEl:W,closeMenu:C,open:k,onClick:ee})),a.createElement(g,{onClick:u=>{P(u)},disableRipple:!0},a.createElement(St,{closeAll:C,anchorEl:h,closeMenu:q,open:b,onClick:q})),a.createElement(g,{onClick:u=>{l(u)},disableRipple:!0},a.createElement(wt,{closeAll:C,anchorEl:I,open:o,onClick:Z})),a.createElement(g,{onClick:()=>{C()},disableRipple:!0},a.createElement(qe,null),i("t-more-coming-soon"))))});export{ln as default};
