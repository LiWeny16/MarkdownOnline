import{a as e,r as n}from"./react-35b44ade.js";import{x as ue,aB as Se,k as U,l as Q,m as Z,a as we,T as G,o as ee,p as O,aC as ne,aD as u,aE as ae,aF as Ce,n as he,aG as pe,B as o,aH as ke,aI as H,a7 as ye,Y as ze,aJ as Me,aK as We,aL as _e,aM as le,at as Le,aN as Re,R as r,aO as Ie,S as Ae,G as ge,u as j,aP as Be,aQ as oe,aR as re,ac as Fe,I as ie,aS as Pe,w as Te,aT as De,aU as Oe,aA as Xe,aV as $e,an as Ye,ad as He,a8 as Ne,aW as je}from"./@mui-74c6dac0.js";import{g as fe,m as Ee,e as Ue,n as Ve,a as v,b as L,I as se,s as Ge,c as Je,d as qe,f as F,h as ce,i as Ke,j as Qe,S as Ze,k as et,l as tt,o as nt,p as at,q as me,r as lt,C as ot,t as rt,u as it,v as st}from"./index-f4f07f65.js";import{o as xe}from"./mobx-react-ba460afe.js";import{u as N}from"./react-i18next-2995e720.js";import{k as K}from"./bigonion-kit-f58b431d.js";import{m as ct}from"./mermaid-25af2048.js";import"./dayjs-52a2a022.js";import"./@braintree-f19cff0e.js";import"./d3-transition-dcb2c4ce.js";import"./d3-zoom-a2c53521.js";import"./dompurify-68816782.js";import"./@babel-a8d57c6d.js";import"./clsx-d930028c.js";import"./@emotion-37ac9dfb.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-transition-group-6b117f63.js";import"./react-dom-a9366def.js";import"./scheduler-765c72db.js";import"./@popperjs-61ffd834.js";import"./prop-types-9cd9978a.js";import"./react-is-11039b32.js";import"./highlight.js-1a8a02da.js";import"./gsap-cf87e9ff.js";import"./i18next-2edfafb0.js";import"./markdown-it-467cea12.js";import"./mdurl-d7fdfec3.js";import"./uc.micro-2ff9f57e.js";import"./entities-52510f6e.js";import"./linkify-it-c9428ec8.js";import"./punycode.js-c41da3d1.js";import"./markdown-it-multimd-table-ba40a09e.js";import"./markdown-it-github-toc-5499209a.js";import"./uslug-b4eaf0e7.js";import"./unorm-1228fe77.js";import"./markdown-it-task-lists-93838a7e.js";import"./markdown-it-emoji-66d1da7f.js";import"./mobx-890d6d9e.js";import"./markdown-it-footnote-bb754603.js";import"./@monaco-editor-0dd05a9a.js";import"./state-local-dd516420.js";import"./html2canvas-a81bcda4.js";import"./react-resizable-63341ac4.js";import"./react-draggable-845bf1f5.js";import"./monaco-editor-5c968e0a.js";/* empty css                      */import"./i18next-browser-languagedetector-953d2d0b.js";import"./d3-selection-de98f9a2.js";import"./dagre-d3-es-57771b5d.js";import"./lodash-es-82f45aac.js";import"./d3-shape-c15df95d.js";import"./d3-path-41c4cb36.js";import"./d3-fetch-5dc2c9dc.js";import"./khroma-dc7cc5cc.js";import"./uuid-55471c42.js";import"./d3-scale-20fecb82.js";import"./internmap-7949acc8.js";import"./d3-array-58f6faf7.js";import"./d3-format-ffdb8652.js";import"./d3-interpolate-23596b47.js";import"./d3-color-568b2243.js";import"./d3-time-format-0d1ca8ac.js";import"./d3-time-ff8162d9.js";import"./d3-axis-8d489beb.js";import"./elkjs-af0ec365.js";import"./cytoscape-b0e0a780.js";import"./cytoscape-cose-bilkent-bcaac8aa.js";import"./cose-base-097e4f8d.js";import"./layout-base-6b6bf2ba.js";import"./d3-sankey-15198533.js";import"./d3-scale-chromatic-1b767f5e.js";import"./ts-dedent-356e4a49.js";import"./mdast-util-from-markdown-32388d6f.js";import"./micromark-24282579.js";import"./micromark-util-combine-extensions-34ef5cdc.js";import"./micromark-util-chunked-6f054bfc.js";import"./micromark-factory-space-62b287c8.js";import"./micromark-util-character-b4c2c3b7.js";import"./micromark-core-commonmark-c7408300.js";import"./micromark-util-classify-character-b0dd44a1.js";import"./micromark-util-resolve-all-8a85a8df.js";import"./decode-named-character-reference-29ded5ae.js";import"./micromark-util-subtokenize-d9357da7.js";import"./micromark-factory-destination-cef6acfb.js";import"./micromark-factory-label-01414396.js";import"./micromark-factory-title-1a18636a.js";import"./micromark-factory-whitespace-7a4e1cef.js";import"./micromark-util-normalize-identifier-dfdf0387.js";import"./micromark-util-html-tag-name-eaa6d7c0.js";import"./micromark-util-decode-numeric-character-reference-bd25dc10.js";import"./micromark-util-decode-string-02bf9559.js";import"./unist-util-stringify-position-7b16d8bf.js";import"./mdast-util-to-string-bfd41500.js";import"./d3-dispatch-4199cc96.js";import"./d3-timer-8bbb3adf.js";import"./d3-ease-6a302484.js";import"./mobx-react-lite-b4a93dc6.js";import"./use-sync-external-store-5a80fce3.js";const te=ue(a=>e.createElement(Se,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...a}))(({theme:a})=>({"& .MuiPaper-root":{borderRadius:6,marginTop:a.spacing(1),color:a.palette.mode==="light"?"rgb(55, 65, 81)":a.palette.grey[300],"& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:20,color:a.palette.mode==="light"?"rgb(55, 65, 81)":a.palette.grey[300],marginRight:a.spacing(1.5)}}}}));function mt(a){const{t:m}=N();e.useRef();let[C,p]=e.useState(!1);const[E,l]=e.useState("https://bigonion.cn"),[_,x]=e.useState(!1);let A=d=>{p(()=>!1),a.onClick(d)},b=async d=>{fe()};const k=d=>R=>{R.stopPropagation(),window.location.href=d},h=()=>{navigator.clipboard.writeText(E).then(()=>{x(!0),setTimeout(()=>x(!1),2e3)}).catch(d=>{console.error("Failed to copy URL:",d)})};return e.createElement(e.Fragment,null,e.createElement(U,{fullWidth:!0,maxWidth:"sm",open:C,onClose:A},e.createElement(Q,null,"真·分享"),e.createElement(Z,null,e.createElement(we,{title:_?"已复制!":"点击复制"},e.createElement(G,{value:E,variant:"outlined",fullWidth:!0,InputProps:{readOnly:!0},onClick:h}))),e.createElement(ee,null,e.createElement(O,{onClick:b},"创建分享链接"))),e.createElement(ne,null),m("t-share"),e.createElement(te,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:a.anchorEl,open:a.open,onClick:a.onClick},e.createElement(u,{onClick:d=>{d.stopPropagation(),p(!0)},disabled:!0,disableRipple:!0},e.createElement(ne,null),"真·分享"),e.createElement(u,{onClick:k("weixin://dl/scan"),disableRipple:!0},e.createElement(ae,null),"WeChat"),e.createElement(u,{onClick:k("tg://"),disableRipple:!0},e.createElement(ae,null),"Telegram"),e.createElement(u,{onClick:k("mailto:bigonion@bigonion.cn?subject=你的主题&body=你的邮件内容"),disableRipple:!0},e.createElement(Ce,null),"Email")))}function dt(){let a=fe()??"";K.sleep(250).then(()=>{var m=document.createElement("a");m.href="data:text/plain;charset=utf-8,"+encodeURIComponent(a),m.download="text.md",m.click()})}function ut(a){const{t:m}=N();let C=a.closeExportMenu,[p,E]=e.useState(!1),l=h=>{console.log(h),C(h),E(()=>!1)},_=e.useRef();const[x,A]=e.useState(3),b=h=>{h.stopPropagation(),A(h.target.value)};let k=h=>{l(h);let d=_.current.value;Ue(x??4,d??"md_snapshot.png"),a.closeMenu(h),Ve("导出成功！","Beta版本",{kind:"info",position:"topRight"})};return e.createElement(e.Fragment,null,e.createElement(U,{className:"avoid",onClose:l,open:p,fullWidth:!0,maxWidth:"sm"},e.createElement("div",{onClick:h=>{h.stopPropagation()}},e.createElement(Q,null,"导出设置"),e.createElement(Z,null,e.createElement(he,null,"请选择图片清晰度"),e.createElement("br",null),e.createElement(pe,{fullWidth:!0},e.createElement(o,null,e.createElement(ke,{id:"demo-simple-select-label"},"图片清晰度"),e.createElement(H,{label:"图片清晰度",defaultValue:"4",defaultChecked:!0,fullWidth:!0,onChange:b},e.createElement(u,{value:"1"},"1 (比较模糊,体积轻巧)"),e.createElement(u,{value:"2"},"2 (有些模糊)"),e.createElement(u,{value:"4"},"3 (默认,适中,推荐)"),e.createElement(u,{value:"6"},"4 (比较清晰,体积稍大)"),e.createElement(u,{value:"10"},"5 (超鸡无敌霹雳霸清晰,体积较大)"))),e.createElement(o,{marginX:"8px"},e.createElement(G,{inputRef:_,margin:"dense",id:"export_img_name",defaultValue:"md_snapshot.png",label:"导出的文件名",type:"text",fullWidth:!0,variant:"standard",placeholder:"md_snapshot.png"})))),e.createElement(ee,null,e.createElement(O,{onClick:l},"取消"),e.createElement(O,{onClick:k},"确认导出")))),e.createElement(ye,null),m("t-export"),e.createElement(te,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:a.anchorEl,open:a.open,onClick:h=>{C(h)}},e.createElement(u,{onClick:()=>{Ee()},disableRipple:!0},e.createElement(ze,null),m("t-export-pdf")),e.createElement(u,{onClick:h=>{E(!0),C(h)},disableRipple:!0},e.createElement(Me,null),m("t-export-image")),e.createElement(u,{onClick:()=>{dt()},disableRipple:!0},e.createElement(We,null),m("t-export-markdown"))))}function ht(a){a.preventDefault()}function pt(){return n.createElement(o,{sx:{marginBottom:"5px"},role:"presentation",onClick:ht},n.createElement(_e,{"aria-label":"breadcrumb"},n.createElement(le,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/"},n.createElement(Le,{sx:{mr:.5},fontSize:"inherit"}),"MUI"),n.createElement(le,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/material-ui/getting-started/installation/"},n.createElement(Re,{sx:{mr:.5},fontSize:"inherit"}),"Basic"),n.createElement(r,{sx:{display:"flex",alignItems:"center"},color:"text.primary"},n.createElement(Ie,{sx:{mr:.5},fontSize:"inherit"}),"Theme")))}let gt=ue(Ae)(({theme:a})=>({width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:a.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:a.palette.mode==="dark"?"#003892":"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:a.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:20/2}}));const P={transition:"background-color 0.4s ease, box-shadow 0.4s ease",position:"relative",padding:"5px",borderRadius:"3px",display:"flex",flexDirection:"column",mt:"10px",mb:"5px",ml:"0px",pl:"25px",willChange:"background-color, box-shadow","&::before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:4,backgroundColor:"transparent",transition:"background-color 0.2s cubic-bezier(0.5, 0.05, 1, 0.5)"}},I=a=>({"&:hover::before":{backgroundColor:v()==="light"?"#840084":"#d2d2d2"},"&:hover":{backgroundColor:v()==="light"?"#EAEAEA":"#393939",boxShadow:"0px 4px 12px rgba(20, 15, 15, 0.1)"}}),ft=xe(function(){const{t:m,i18n:C}=N();v();const p=ge(),E={...P,transition:"background-color 2s ease, box-shadow 0.4s ease","&::before":{...P["&::before"],transition:"background-color 0.24s ease 0.1s"}},l={color:p.palette.info.contrastText??"#8B8A8A",fontSize:"0.79rem",fontWeight:500,mb:"5px"},[_,x]=e.useState(!1),A=t=>{F({advanced:{imageSettings:{...L().advanced.imageSettings,modePrefer:t.target.value==="folder"?"folder":"vf"}}})},b=t=>{F({advanced:{imageSettings:{...L().advanced.imageSettings,basicStyle:t.target.value}}})},k=t=>{F({advanced:{imageSettings:{...L().advanced.imageSettings,imgStorePath:t.target.value}}})};function h(t,s){const f=document.querySelector(".markdown-body");s?(ce("dark"),x(t.target.checked),f.style.cssText=""):(ce("light"),x(t.target.checked))}function d(t,s){s?F({basic:{syncScroll:!0}}):F({basic:{syncScroll:!1}})}function R(t){F({basic:{speechLanguage:t.target.value}})}function X(t){F({basic:{fontSize:t.target.value}}),document.getElementsByClassName("fontSizeStyle")&&(K.removeAddedStyle(),K.addStyle(`
      .markdown-body p,
      .markdown-body ol,
      .markdown-body li,
      .markdown-body div {
          font-size: ${L().basic.fontSize}px;
      }
        `,"fontSizeStyle"))}function T(t){F({basic:{editorAutoWrap:t.target.value===1}}),window.editor.updateOptions({wordWrap:L().basic.editorAutoWrap?"on":"off"})}function B(t){F({basic:{fontFamily:t.target.value===1?"Times New Roman":'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"'}})}function i(t){let s=t.target.value;C.changeLanguage(t.target.value),document.documentElement.lang=t.target.value,Ke({memorable:{languageChanged:!0}}),F({basic:{language:s}})}function g(t){F({advanced:{mermaidTheme:t.target.value}}),ct.init({theme:t.target.value}),Qe()}return e.useEffect(()=>{x(v()==="dark")},[v()]),e.createElement(e.Fragment,null,e.createElement(o,{className:"transparent-scrollbar",sx:{width:"100%",padding:"1rem",display:"flex",flexDirection:"column",fontSize:"0.89rem",maxHight:"200px",overflowY:"scroll"}},e.createElement(r,{id:"settings_1_x",sx:{fontSize:"30px",fontWeight:"700"}},"基础设置"),e.createElement(j,null),e.createElement(o,{id:"settings_1_1",sx:{...P,...I(v())}},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Theme"),e.createElement(r,{sx:l},"更改编辑器的主题"),e.createElement(gt,{checked:_,size:"small",inputProps:{"aria-label":"controlled"},onChange:h})),e.createElement(o,{id:"settings_1_2",sx:{...P,...I(v())}},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Language"),e.createElement(r,{sx:l},"更改编辑器的语言"),e.createElement(H,{value:L().basic.language??"zh",defaultChecked:!0,size:"small",color:"primary",onChange:i},e.createElement(u,{value:"zh"},"中文"),e.createElement(u,{value:"en"},"English"))),e.createElement(de,{id:"settings_1_3",content:"编辑器设置"}),e.createElement(o,{sx:{...P,...I(v())},id:"settings_1_2"},e.createElement(o,{sx:{...E,...I(v())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Font Size")),e.createElement(r,{sx:l},"更改渲染后文字字体大小"),e.createElement(H,{value:L().basic.fontSize,defaultChecked:!0,fullWidth:!0,size:"small",onChange:X},[...Array(10).keys()].map(t=>{const s=8+t*2;return e.createElement(u,{key:s,value:s},s," px")}))),e.createElement(o,{sx:{...E,...I(v())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Font Family")),e.createElement(r,{sx:l},"更改渲染后文字字体"),e.createElement(H,{value:L().basic.fontFamily==="Times New Roman"?1:0,defaultChecked:!0,fullWidth:!0,size:"small",onChange:B},e.createElement(u,{value:0},"Defualt"),e.createElement(u,{value:1},"Times New Roman"))),e.createElement(o,{sx:{...P,...I(v())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Synchronous Scrolling")),e.createElement(r,{sx:l},"同步滚动左边编辑区和预览区域。"),e.createElement(se,{checked:L().basic.syncScroll,size:"small",inputProps:{"aria-label":"controlled"},onChange:d})),e.createElement(o,{sx:{...P,...I(v())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Editor Auto Wrap")),e.createElement(r,{sx:l},"是否开启编辑器自动换行"),e.createElement(H,{value:L().basic.editorAutoWrap?1:0,defaultChecked:!0,fullWidth:!0,size:"small",onChange:T},e.createElement(u,{value:1},"On"),e.createElement(u,{value:0},"OFF")))),e.createElement(o,{id:"settings_1_4",sx:{...P,...I(v())}},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Speech To Text"),e.createElement(r,{sx:l},"选择语音转文字的识别语言"),e.createElement(H,{value:L().basic.speechLanguage??"zh-CN",defaultChecked:!0,fullWidth:!0,size:"small",onChange:R},Ge.map((t,s)=>e.createElement(u,{key:s,value:t[0]},t[1])))),e.createElement(r,{id:"settings_2_x",sx:{mt:"20px",fontSize:"30px",fontWeight:"700"}},"高级设置（施工中）"),e.createElement(j,null),e.createElement(o,{id:"settings_2_1",sx:{...P,...I(v())}},e.createElement(r,{sx:{fontSize:"0.89rem",fontWeight:500}},"Export Settings"),e.createElement(r,{sx:l},"更改导出设置(施工中)"),e.createElement(se,{disabled:!0,size:"small",inputProps:{"aria-label":"controlled"}})),e.createElement(o,{sx:{...P,...I(v())}},e.createElement(r,{id:"settings_2_2",sx:{fontSize:"0.89rem",fontWeight:500}},"Mermaid Theme Configs"),e.createElement(r,{sx:l},"Mermaid流程图主题"),e.createElement(H,{value:L().advanced.mermaidTheme??"default",defaultChecked:!0,fullWidth:!0,size:"small",color:"primary",onChange:g},Je.map((t,s)=>e.createElement(u,{key:s,value:t},qe[s])))),e.createElement(de,{id:"settings_2_3",content:"图片设置"}),e.createElement(o,{sx:{...P,...I(v())}},e.createElement(o,{sx:{...E,...I(v())}},e.createElement(r,{id:"settings_2_3",sx:{fontSize:"0.89rem",fontWeight:500}},"Image Storage Mode Preference (Pasting)"),e.createElement(r,{sx:l},"选择粘贴图片优先存储在浏览器/文件夹"),e.createElement(pe,{sx:{transition:"inherit"}},e.createElement(Be,{value:L().advanced.imageSettings.modePrefer,onChange:A},e.createElement(oe,{value:"folder",control:e.createElement(re,{sx:{"& .MuiSvgIcon-root":{fontSize:22,color:"#65C466"}}}),label:"本地文件夹 (Prefer In Local Folder)"}),e.createElement(oe,{value:"vf",control:e.createElement(re,{sx:{"& .MuiSvgIcon-root":{fontSize:22,color:"#65C466"}}}),label:"浏览器 (Prefer In Browser)"})))),e.createElement(o,{sx:{...E,...I(v())}},e.createElement(r,{id:"settings_2_4",sx:{fontSize:"0.89rem",fontWeight:500}},"Default Image Style"),e.createElement(r,{sx:l},"默认填充的图片样式，大小，位置等,w表示大小, c表示center, s表示shadow"),e.createElement(G,{fullWidth:!0,margin:"normal",name:"basicStyle",label:"基本样式",value:L().advanced.imageSettings.basicStyle,onChange:b})),e.createElement(o,{sx:{...E,...I(v())}},e.createElement(r,{id:"settings_2_5",sx:{fontSize:"0.89rem",fontWeight:500}},"Default Stored Path"),e.createElement(r,{sx:l},'默认粘贴图片上传的路径，如设置为"images"，则图片会上传到名根目录的一个为"images"的文件夹下，如该项为空，则保持默认的"images"文件夹'),e.createElement(G,{disabled:L().advanced.imageSettings.modePrefer==="vf",fullWidth:!0,margin:"none",name:"imgStorePath",label:"图片存储路径",value:L().advanced.imageSettings.imgStorePath,onChange:k})))))}),de=({content:a,id:m})=>e.createElement(e.Fragment,null,e.createElement(r,{id:m,sx:{mt:"5px",fontSize:"22px",fontWeight:700}},a),e.createElement(j,null));function Et(a){const{t:m}=N();ge().palette;const C=v();e.useRef();let[p,E]=e.useState(!1);e.useState("");let l=_=>{E(()=>!1),a.onClick(_),a.closeAll()};return e.createElement(e.Fragment,null,e.createElement(U,{fullScreen:!1,maxWidth:!1,open:a.open,onClose:l,sx:{height:"100vh"}},e.createElement(o,{sx:{background:C==="light"?"#F8FAFB":"",padding:"1rem",height:"68vh",width:"70vw"}},e.createElement(pt,null),e.createElement(j,{sx:{my:.5}}),e.createElement(o,{sx:{height:"58vh",display:"flex",background:C==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRradius:"50px",borderRadius:"5px"}},e.createElement(Ze,null),e.createElement(ft,null)))),e.createElement(Fe,null),m("t-settings"))}function xt(a){const{t:m}=N(),C=v(),[p,E]=n.useState({width:400,height:700}),[l,_]=n.useState({x:200,y:50}),[x,A]=n.useState(!1),[b,k]=n.useState(!1),[h,d]=n.useState(!1),R=n.useRef({offsetX:0,offsetY:0}),X=t=>{a.onClick(t),a.closeAll()},T=t=>{k(!0),R.current={offsetX:t.clientX-l.x,offsetY:t.clientY-l.y}},B=t=>{if(!b)return;const s=window.innerWidth-p.width,f=window.innerHeight-p.height,y=Math.max(0,Math.min(s,t.clientX-R.current.offsetX)),z=Math.max(0,Math.min(f,t.clientY-R.current.offsetY));_({x:y,y:z})},i=()=>{k(!1)};e.useEffect(()=>{if(b)return document.addEventListener("mousemove",B),document.addEventListener("mouseup",i),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",i)}},[b,p]);const g=()=>{A(!x)};return e.createElement(e.Fragment,null,e.createElement(U,{hideBackdrop:!0,fullScreen:!1,maxWidth:!1,open:a.open,onClose:X,PaperProps:{style:{position:"fixed",left:x?0:l.x,top:x?0:l.y,width:x?"100vw":p.width,height:x?"100vh":p.height,margin:0,maxWidth:"none",maxHeight:"none",background:"transparent",boxShadow:"none",overflow:"visible",transition:b||h?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}}},e.createElement(o,{onMouseDown:T,sx:{height:"40px",background:C==="light"?"#F8FAFB":"#2B2B2B",borderRadius:"8px 8px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between",px:2,cursor:b?"grabbing":"grab",borderBottom:`1px solid ${C==="light"?"#e0e0e0":"#404040"}`,userSelect:"none",transition:b||h?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}},e.createElement(r,{variant:"body2",sx:{color:C==="light"?"#666":"#ccc"}},"LetShare - 协作分享"),e.createElement(o,{sx:{display:"flex",gap:.5}},e.createElement(ie,{size:"small",onClick:g},e.createElement(Pe,{fontSize:"small"})),e.createElement(ie,{size:"small",onClick:X},e.createElement(Te,{fontSize:"small"})))),e.createElement(o,{sx:{height:x?"calc(100vh - 40px)":p.height-40,width:"100%",background:"#F8FAFB",borderRadius:"0 0 8px 8px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",overflow:"hidden",position:"relative",transition:b||h?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}},e.createElement("iframe",{src:"https://letshare.fun",style:{width:"100%",height:"100%",border:"none",borderRadius:"0 0 8px 8px",background:"transparent"},title:"Let's Share",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation"}),(b||h)&&e.createElement(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:999,cursor:b?"grabbing":"default",background:"transparent"}}),!x&&e.createElement(e.Fragment,null,e.createElement(o,{sx:{position:"absolute",left:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:t=>{t.preventDefault(),d(!0);const s=t.clientX,f=p.width,y=l.x,z=M=>{const w=M.clientX-s,D=Math.max(300,Math.min(window.innerWidth,f-w)),W=f-D,$=Math.max(0,Math.min(window.innerWidth-D,y+W));E(Y=>({...Y,width:D})),_(Y=>({...Y,x:$}))},S=()=>{d(!1),document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",z),document.addEventListener("mouseup",S)}}),e.createElement(o,{sx:{position:"absolute",right:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:t=>{t.preventDefault(),d(!0);const s=t.clientX,f=p.width,y=S=>{const M=Math.max(300,Math.min(window.innerWidth,f+(S.clientX-s)));E(w=>({...w,width:M}))},z=()=>{d(!1),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",z)}}),e.createElement(o,{sx:{position:"absolute",bottom:-8,left:0,width:"100%",height:16,cursor:"ns-resize",zIndex:1e3},onMouseDown:t=>{t.preventDefault(),d(!0);const s=t.clientY,f=p.height,y=S=>{const M=Math.max(600,Math.min(window.innerHeight,f+(S.clientY-s)));E(w=>({...w,height:M}))},z=()=>{d(!1),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",z)}}),e.createElement(o,{sx:{position:"absolute",bottom:-8,left:-8,width:20,height:20,cursor:"ne-resize",zIndex:1001},onMouseDown:t=>{t.preventDefault(),d(!0);const s=t.clientX,f=t.clientY,y=p.width,z=p.height,S=l.x,M=D=>{const W=D.clientX-s,$=Math.max(300,Math.min(window.innerWidth,y-W)),Y=Math.max(600,Math.min(window.innerHeight,z+(D.clientY-f))),J=y-$,q=Math.max(0,Math.min(window.innerWidth-$,S+J));E({width:$,height:Y}),_(V=>({...V,x:q}))},w=()=>{d(!1),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",w)}}),e.createElement(o,{sx:{position:"absolute",bottom:-8,right:-8,width:20,height:20,cursor:"nw-resize",zIndex:1001},onMouseDown:t=>{t.preventDefault(),d(!0);const s=t.clientX,f=t.clientY,y=p.width,z=p.height,S=w=>{const D=Math.max(300,Math.min(window.innerWidth,y+(w.clientX-s))),W=Math.max(600,Math.min(window.innerHeight,z+(w.clientY-f)));E({width:D,height:W})},M=()=>{d(!1),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",M)}})))),e.createElement(De,null),e.createElement(r,null,m("t-collaborative-office")))}function bt(a){const{t:m}=N(),C=v(),p=i=>{a.onClick(i),a.closeAll()},[E,l]=n.useState({}),[_,x]=n.useState({}),[A,b]=n.useState({});n.useEffect(()=>{B.forEach(async i=>{await et(i.id)?(l(t=>({...t,[i.id]:"installed"})),b(t=>({...t,[i.id]:!0}))):l(t=>({...t,[i.id]:"not_installed"}))})},[]);const k=(i,g)=>{const t=B[i];if(!t)return;const{url:s,id:f}=t;switch(g){case"install":h(i,s,f);break;case"stop":R(f);break;case"uninstall":X(f);break;case"toggleEnable":T(f);break}},h=(i,g,t)=>{let f=!1;l(S=>({...S,[t]:"downloading"})),x(S=>({...S,[t]:0}));const y=Date.now();tt(g,t,S=>{if(S>=0&&x(M=>({...M,[t]:S})),S===100){const M=Date.now()-y;M<2500?setTimeout(()=>{f||(me(m("t-lab-install-success"),2e3,{kind:"success"}),l(w=>({...w,[t]:"installed"})),b(w=>({...w,[t]:!0})))},2500-M):f||(me(m("t-lab-install-success"),2e3,{kind:"success"}),l(w=>({...w,[t]:"installed"})),b(w=>({...w,[t]:!0})))}});const z=()=>{f=!0,R(t)};d[t]=z},d={},R=i=>{d[i]&&(d[i](),delete d[i]),l(g=>({...g,[i]:"not_installed"})),x(g=>({...g,[i]:0}))},X=async i=>{const g=await nt("cache_DB");at(g,"data",i),l(t=>({...t,[i]:"not_installed"}))},T=i=>{b(g=>({...g,[i]:!g[i]}))},B=[{title:m("t-lab-card-spelling-association-title"),description:m("t-lab-card-spelling-association-desc"),url:`https://${window._cdn.cdn[0]}/npm/an-array-of-english-words@2.0.0/index.json`,id:"spelling_data_json"},{title:m("t-lab-card-spelling-check-title"),description:m("t-lab-card-spelling-check-desc"),url:"https://jsonplaceholder.typicode.com/todos/2",id:"check_spell"}];return e.createElement(e.Fragment,null,e.createElement(U,{className:"transparent-scrollbar",hideBackdrop:!1,fullScreen:!1,maxWidth:!1,open:a.open,onClose:p,sx:{height:"100svh",width:"100svw",display:"flex",justifyContent:"center",alignItems:"center"}},e.createElement(o,{className:"transparent-scrollbar",sx:{overflowX:"hidden",height:"50svh",width:"50svw",display:"flex",flexDirection:"column",background:C==="light"?"#F8FAFB":"#2B2B2B",padding:"24px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",alignItems:"center"}},e.createElement(r,{fontSize:30,fontWeight:"bold",textAlign:"center"},m("t-lab-title")),e.createElement(j,{sx:{width:"100%",my:2}}),e.createElement(o,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"24px",width:"100%"}},B.map((i,g)=>{const t=E[i.id]||"not_installed",s=A[i.id]??!0;return e.createElement(Oe,{key:g,sx:{width:"250px",height:"220px",borderRadius:"12px",boxShadow:3,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:2}},e.createElement(o,{sx:{flex:1}},e.createElement(r,{variant:"h6",sx:{fontWeight:"bold"}},i.title),e.createElement(r,{variant:"body2",color:"textSecondary"},i.description)),e.createElement(o,{sx:{display:"flex",justifyContent:"space-between",gap:1}},t==="not_installed"&&e.createElement(O,{variant:"contained",color:"primary",sx:{flex:1,minWidth:"64px",height:"42px"},onClick:()=>k(g,"install")},m("t-lab-button-install")),t==="downloading"&&e.createElement(O,{variant:"contained",color:"error",sx:{flex:1,display:"flex",minWidth:"64px",height:"42px",alignItems:"center",justifyContent:"center"},onClick:()=>k(g,"stop")},e.createElement(Xe,{size:20,sx:{color:"white",marginRight:1}})),t==="installed"&&e.createElement(e.Fragment,null,e.createElement(O,{variant:"contained",color:"secondary",sx:{flex:1},onClick:()=>k(g,"uninstall")},m("t-lab-button-uninstall")),e.createElement(O,{variant:"contained",color:s?"success":"warning",sx:{flex:1},onClick:()=>k(g,"toggleEnable")},m(s?"t-lab-button-disable":"t-lab-button-enable")))))})))),e.createElement($e,null),e.createElement(r,null,m("t-lab-title")))}const ua=xe(()=>{const{t:a}=N(),m=st(),[C,p]=n.useState(null),[E,l]=n.useState(null),[_,x]=n.useState(null),[A,b]=n.useState(null),[k,h]=n.useState(null),[d,R]=n.useState(null),[X,T]=n.useState(!1),B=!!C,i=!!E,g=!!_,t=!!A,s=!!k,f=!!d,y=c=>{p(c.currentTarget)},z=c=>{l(c.currentTarget),c.stopPropagation()},S=async c=>{await rt()?(x(c.target),c.stopPropagation()):(c.stopPropagation(),W(),T(!0))},M=c=>{b(c.currentTarget)},w=c=>{h(c.currentTarget)},D=c=>{R(c.currentTarget)},W=()=>{p(null)},$=c=>{l(null),c.stopPropagation()},Y=c=>{x(null),c.stopPropagation()},J=c=>{b(null),c.stopPropagation()},q=c=>{h(null),c.stopPropagation()},V=c=>{R(null),c.stopPropagation()},be=()=>{m.display(),W()},ve=()=>{it(!0),W()};return n.createElement("div",null,n.createElement(U,{open:X,onClose:()=>{T(!1)}},n.createElement(Q,null,n.createElement(r,{variant:"h6",gutterBottom:!0},"确定导出吗，你还没有保存呢！")),n.createElement(Z,null,n.createElement(he,null,n.createElement(r,{variant:"body1",gutterBottom:!0},'Once you have clicked the "yes" button, your text will be saved.'))),n.createElement(ee,null,n.createElement(O,{onClick:()=>{T(!1),lt(),Ee()}},"是嘟"),n.createElement(O,{onClick:()=>{T(!1)},autoFocus:!0},"达咩"))),n.createElement(ot,{open:B,endIcon:n.createElement(Ye,null),onClick:y},a("t-more")),n.createElement(te,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:C,open:B,onClose:W},n.createElement(u,{onClick:be,disableRipple:!0},n.createElement(He,null),a("t-image-manager")),n.createElement(u,{onClick:ve,disableRipple:!0},n.createElement(Ne,null),a("t-file-manager")),n.createElement(u,{onClick:c=>{S(c)},disableRipple:!0},n.createElement(ut,{anchorEl:_,open:g,closeMenu:W,closeExportMenu:Y})),n.createElement(j,{sx:{my:.5}}),n.createElement(u,{onClick:c=>{z(c)},disableRipple:!0},n.createElement(mt,{closeAll:W,anchorEl:E,open:i,onClick:$})),n.createElement(u,{onClick:c=>{w(c)},disableRipple:!0},n.createElement(xt,{closeAll:W,anchorEl:k,closeMenu:W,open:s,onClick:q})),n.createElement(u,{onClick:c=>{D(c)},disableRipple:!0},n.createElement(bt,{closeAll:W,anchorEl:d,closeMenu:V,open:f,onClick:V})),n.createElement(u,{onClick:c=>{M(c)},disableRipple:!0},n.createElement(Et,{closeAll:W,anchorEl:A,open:t,onClick:J})),n.createElement(u,{onClick:()=>{W()},disableRipple:!0},n.createElement(je,null),a("t-more-coming-soon"))))});export{ua as default};
