import{s as ve,aj as _e,D as Q,a as oe,b as ie,T as Le,ak as te,e as re,B as N,al as me,am as p,an as de,ao as Ae,d as Se,ap as Ce,v as o,aq as Ie,ar as G,M as Be,E as Fe,as as De,at as Pe,au as Te,av as ue,ab as $e,aw as Oe,w as i,ax as Xe,S as je,G as ke,j as K,ay as Ye,az as he,aA as ge,V as Ne,I as pe,aB as He,aC as Ue,aD as Ve,aE as qe,ai as Ge,aF as Je,a5 as Ke,W as Qe,N as Ze,aG as et}from"./@mui-cfd00ee0.js";import{g as ye,i as se,m as ze,e as tt,n as nt,a as S,b as I,I as fe,s as at,c as lt,d as ot,f as X,h as Ee,j as it,k as rt,S as st,l as ct,o as mt,p as dt,q as ut,r as xe,t as ht,C as gt,u as pt,v as ft,w as Et}from"./index-3caef052.js";import{o as Me}from"./mobx-react-1c6baff6.js";import{u as J}from"./react-i18next-0e366d71.js";import"./react-2b221fbb.js";import"./clsx-0839fdbe.js";import"./@emotion-22635a5b.js";import"./hoist-non-react-statics-23d96a9a.js";import"./react-is-e8e5dbb3.js";import"./@babel-bc930cec.js";import"./stylis-79144faa.js";import"./react-transition-group-45d74422.js";import"./@popperjs-61ffd834.js";import"./prop-types-4dcdfe56.js";import"./react-dom-d3bdc6a0.js";import"./monaco-editor-5cf1114e.js";/* empty css                      */import"./fast-diff-1f91240c.js";import"./i18next-c75e253c.js";import"./@monaco-editor-863e66c9.js";import"./state-local-dd516420.js";import"./react-resizable-95d32b79.js";import"./react-draggable-e660ef73.js";import"./i18next-browser-languagedetector-ac00b891.js";import"./mobx-3741033e.js";import"./mobx-react-lite-1ad052b5.js";import"./use-sync-external-store-b84fba6b.js";const xt=window.React,ce=ve(n=>xt.createElement(_e,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...n}))(({theme:n})=>({"& .MuiPaper-root":{borderRadius:6,marginTop:n.spacing(1),color:n.palette.mode==="light"?"rgb(55, 65, 81)":n.palette.grey[300],"& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:20,color:n.palette.mode==="light"?"rgb(55, 65, 81)":n.palette.grey[300],marginRight:n.spacing(1.5)}}}})),b=window.React;function wt(n){const{t:C}=J();b.useRef();let[M,f]=b.useState(!1);const[u,h]=b.useState("https://bigonion.cn"),[R,k]=b.useState(!1);let B=g=>{f(()=>!1),n.onClick(g)},w=async g=>{ye()};const F=g=>P=>{P.stopPropagation(),window.location.href=g},m=()=>{navigator.clipboard.writeText(u).then(()=>{k(!0),setTimeout(()=>k(!1),2e3)}).catch(g=>{console.error("Failed to copy URL:",g)})};return b.createElement(b.Fragment,null,b.createElement(Q,{fullWidth:!0,maxWidth:"sm",open:M,onClose:B},b.createElement(oe,null,"真·分享"),b.createElement(ie,null,b.createElement(Le,{title:R?"已复制!":"点击复制"},b.createElement(te,{value:u,variant:"outlined",fullWidth:!0,InputProps:{readOnly:!0},onClick:m}))),b.createElement(re,null,b.createElement(N,{onClick:w},"创建分享链接"))),b.createElement(me,null),C("t-share"),b.createElement(ce,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:n.anchorEl,open:n.open,onClick:n.onClick},b.createElement(p,{onClick:g=>{g.stopPropagation(),f(!0)},disabled:!0,disableRipple:!0},b.createElement(me,null),"真·分享"),b.createElement(p,{onClick:F("weixin://dl/scan"),disableRipple:!0},b.createElement(de,null),"WeChat"),b.createElement(p,{onClick:F("tg://"),disableRipple:!0},b.createElement(de,null),"Telegram"),b.createElement(p,{onClick:F("mailto:bigonion@bigonion.cn?subject=你的主题&body=你的邮件内容"),disableRipple:!0},b.createElement(Ae,null),"Email")))}const bt=(await se("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default;function vt(){let n=ye()??"";bt.sleep(250).then(()=>{var C=document.createElement("a");C.href="data:text/plain;charset=utf-8,"+encodeURIComponent(n),C.download="text.md",C.click()})}const c=window.React;function St(n){const{t:C}=J();let M=n.closeExportMenu,[f,u]=c.useState(!1),h=m=>{console.log(m),M(m),u(()=>!1)},R=c.useRef();const[k,B]=c.useState(3),w=m=>{m.stopPropagation(),B(m.target.value)};let F=m=>{h(m);let g=R.current.value;tt(k??4,g??"md_snapshot.png"),n.closeMenu(m),nt("导出成功！","Beta版本",{kind:"info",position:"topRight"})};return c.createElement(c.Fragment,null,c.createElement(Q,{className:"avoid",onClose:h,open:f,fullWidth:!0,maxWidth:"sm"},c.createElement("div",{onClick:m=>{m.stopPropagation()}},c.createElement(oe,null,"导出设置"),c.createElement(ie,null,c.createElement(Se,null,"请选择图片清晰度"),c.createElement("br",null),c.createElement(Ce,{fullWidth:!0},c.createElement(o,null,c.createElement(Ie,{id:"demo-simple-select-label"},"图片清晰度"),c.createElement(G,{label:"图片清晰度",defaultValue:"4",defaultChecked:!0,fullWidth:!0,onChange:w},c.createElement(p,{value:"1"},"1 (比较模糊,体积轻巧)"),c.createElement(p,{value:"2"},"2 (有些模糊)"),c.createElement(p,{value:"4"},"3 (默认,适中,推荐)"),c.createElement(p,{value:"6"},"4 (比较清晰,体积稍大)"),c.createElement(p,{value:"10"},"5 (超鸡无敌霹雳霸清晰,体积较大)"))),c.createElement(o,{marginX:"8px"},c.createElement(te,{inputRef:R,margin:"dense",id:"export_img_name",defaultValue:"md_snapshot.png",label:"导出的文件名",type:"text",fullWidth:!0,variant:"standard",placeholder:"md_snapshot.png"})))),c.createElement(re,null,c.createElement(N,{onClick:h},"取消"),c.createElement(N,{onClick:F},"确认导出")))),c.createElement(Be,null),C("t-export"),c.createElement(ce,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:n.anchorEl,open:n.open,onClick:m=>{M(m)}},c.createElement(p,{onClick:()=>{ze()},disableRipple:!0},c.createElement(Fe,null),C("t-export-pdf")),c.createElement(p,{onClick:m=>{u(!0),M(m)},disableRipple:!0},c.createElement(De,null),C("t-export-image")),c.createElement(p,{onClick:()=>{vt()},disableRipple:!0},c.createElement(Pe,null),C("t-export-markdown"))))}const U=window.React;function Ct(n){n.preventDefault()}function kt(){return U.createElement(o,{sx:{marginBottom:"5px"},role:"presentation",onClick:Ct},U.createElement(Te,{"aria-label":"breadcrumb"},U.createElement(ue,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/"},U.createElement($e,{sx:{mr:.5},fontSize:"inherit"}),"MUI"),U.createElement(ue,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/material-ui/getting-started/installation/"},U.createElement(Oe,{sx:{mr:.5},fontSize:"inherit"}),"Basic"),U.createElement(i,{sx:{display:"flex",alignItems:"center"},color:"text.primary"},U.createElement(Xe,{sx:{mr:.5},fontSize:"inherit"}),"Theme")))}let yt=ve(je)(({theme:n})=>({width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:n.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:n.palette.mode==="dark"?"#003892":"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:n.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:20/2}}));const e=window.React,zt=(await se("https://cdn.jsdmirror.com/npm/mermaid@10/dist/mermaid.esm.min.mjs")).default,we=(await se("https://cdn.jsdmirror.com/npm/bigonion-kit@0.12.6/esm/kit.min.js")).default,j={transition:"background-color 0.4s ease, box-shadow 0.4s ease",position:"relative",padding:"5px",borderRadius:"3px",display:"flex",flexDirection:"column",mt:"10px",mb:"5px",ml:"0px",pl:"25px",willChange:"background-color, box-shadow","&::before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:4,backgroundColor:"transparent",transition:"background-color 0.2s cubic-bezier(0.5, 0.05, 1, 0.5)"}},D=n=>({"&:hover::before":{backgroundColor:S()==="light"?"#840084":"#d2d2d2"},"&:hover":{backgroundColor:S()==="light"?"#EAEAEA":"#393939",boxShadow:"0px 4px 12px rgba(20, 15, 15, 0.1)"}}),Mt=Me(function(){const{t:C,i18n:M}=J();S();const f=ke(),u={...j,transition:"background-color 2s ease, box-shadow 0.4s ease","&::before":{...j["&::before"],transition:"background-color 0.24s ease 0.1s"}},h={color:f.palette.info.contrastText??"#8B8A8A",fontSize:"0.79rem",fontWeight:500,mb:"5px"},[R,k]=e.useState(!1),B=t=>{X({advanced:{imageSettings:{...I().advanced.imageSettings,modePrefer:t.target.value==="folder"?"folder":"vf"}}})},w=t=>{X({advanced:{imageSettings:{...I().advanced.imageSettings,basicStyle:t.target.value}}})},F=t=>{X({advanced:{imageSettings:{...I().advanced.imageSettings,imgStorePath:t.target.value}}})};function m(t,a){const W=document.querySelector(".markdown-body");a?(Ee("dark"),k(t.target.checked),W.style.cssText=""):(Ee("light"),k(t.target.checked))}function g(t,a){a?X({basic:{syncScroll:!0}}):X({basic:{syncScroll:!1}})}function P(t){X({basic:{speechLanguage:t.target.value}})}function H(t){X({basic:{fontSize:t.target.value}}),document.getElementsByClassName("fontSizeStyle")&&(we.removeAddedStyle("fontSizeStyle"),we.addStyle(`
      .markdown-body p,
      .markdown-body ol,
      .markdown-body li,
      .markdown-body div {
          font-size: ${I().basic.fontSize}px;
      }
        `,"fontSizeStyle"))}function O(t){X({basic:{editorAutoWrap:t.target.value===1}}),window.editor.updateOptions({wordWrap:I().basic.editorAutoWrap?"on":"off"})}function r(t){X({basic:{fontFamily:t.target.value===1?"Times New Roman":'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"'}})}function E(t){let a=t.target.value;M.changeLanguage(t.target.value),document.documentElement.lang=t.target.value,it({memorable:{languageChanged:!0}}),X({basic:{language:a}})}function d(t){X({advanced:{mermaidTheme:t.target.value}}),zt.init({theme:t.target.value}),rt()}return e.useEffect(()=>{k(S()==="dark")},[S()]),e.createElement(e.Fragment,null,e.createElement(o,{className:"transparent-scrollbar",sx:{width:"100%",padding:"1rem",display:"flex",flexDirection:"column",fontSize:"0.89rem",maxHight:"200px",overflowY:"scroll"}},e.createElement(i,{id:"settings_1_x",sx:{fontSize:"30px",fontWeight:"700"}},"基础设置"),e.createElement(K,null),e.createElement(o,{id:"settings_1_1",sx:{...j,...D(S())}},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Theme"),e.createElement(i,{sx:h},"更改编辑器的主题"),e.createElement(yt,{checked:R,size:"small",inputProps:{"aria-label":"controlled"},onChange:m})),e.createElement(o,{id:"settings_1_2",sx:{...j,...D(S())}},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Language"),e.createElement(i,{sx:h},"更改编辑器的语言"),e.createElement(G,{value:I().basic.language??"zh",defaultChecked:!0,size:"small",color:"primary",onChange:E},e.createElement(p,{value:"zh"},"中文"),e.createElement(p,{value:"en"},"English"))),e.createElement(be,{id:"settings_1_3",content:"编辑器设置"}),e.createElement(o,{sx:{...j,...D(S())},id:"settings_1_2"},e.createElement(o,{sx:{...u,...D(S())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Font Size")),e.createElement(i,{sx:h},"更改渲染后文字字体大小"),e.createElement(G,{value:I().basic.fontSize,defaultChecked:!0,fullWidth:!0,size:"small",onChange:H},[...Array(10).keys()].map(t=>{const a=8+t*2;return e.createElement(p,{key:a,value:a},a," px")}))),e.createElement(o,{sx:{...u,...D(S())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Font Family")),e.createElement(i,{sx:h},"更改渲染后文字字体"),e.createElement(G,{value:I().basic.fontFamily==="Times New Roman"?1:0,defaultChecked:!0,fullWidth:!0,size:"small",onChange:r},e.createElement(p,{value:0},"Defualt"),e.createElement(p,{value:1},"Times New Roman"))),e.createElement(o,{sx:{...j,...D(S())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Synchronous Scrolling")),e.createElement(i,{sx:h},"同步滚动左边编辑区和预览区域。"),e.createElement(fe,{checked:I().basic.syncScroll,size:"small",inputProps:{"aria-label":"controlled"},onChange:g})),e.createElement(o,{sx:{...j,...D(S())}},e.createElement(o,{className:"FLEX ROW"},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Editor Auto Wrap")),e.createElement(i,{sx:h},"是否开启编辑器自动换行"),e.createElement(G,{value:I().basic.editorAutoWrap?1:0,defaultChecked:!0,fullWidth:!0,size:"small",onChange:O},e.createElement(p,{value:1},"On"),e.createElement(p,{value:0},"OFF")))),e.createElement(o,{id:"settings_1_4",sx:{...j,...D(S())}},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Speech To Text"),e.createElement(i,{sx:h},"选择语音转文字的识别语言"),e.createElement(G,{value:I().basic.speechLanguage??"zh-CN",defaultChecked:!0,fullWidth:!0,size:"small",onChange:P},at.map((t,a)=>e.createElement(p,{key:a,value:t[0]},t[1])))),e.createElement(i,{id:"settings_2_x",sx:{mt:"20px",fontSize:"30px",fontWeight:"700"}},"高级设置（施工中）"),e.createElement(K,null),e.createElement(o,{id:"settings_2_1",sx:{...j,...D(S())}},e.createElement(i,{sx:{fontSize:"0.89rem",fontWeight:500}},"Export Settings"),e.createElement(i,{sx:h},"更改导出设置(施工中)"),e.createElement(fe,{disabled:!0,size:"small",inputProps:{"aria-label":"controlled"}})),e.createElement(o,{sx:{...j,...D(S())}},e.createElement(i,{id:"settings_2_2",sx:{fontSize:"0.89rem",fontWeight:500}},"Mermaid Theme Configs"),e.createElement(i,{sx:h},"Mermaid流程图主题"),e.createElement(G,{value:I().advanced.mermaidTheme??"default",defaultChecked:!0,fullWidth:!0,size:"small",color:"primary",onChange:d},lt.map((t,a)=>e.createElement(p,{key:a,value:t},ot[a])))),e.createElement(be,{id:"settings_2_3",content:"图片设置"}),e.createElement(o,{sx:{...j,...D(S())}},e.createElement(o,{sx:{...u,...D(S())}},e.createElement(i,{id:"settings_2_3",sx:{fontSize:"0.89rem",fontWeight:500}},"Image Storage Mode Preference (Pasting)"),e.createElement(i,{sx:h},"选择粘贴图片优先存储在浏览器/文件夹"),e.createElement(Ce,{sx:{transition:"inherit"}},e.createElement(Ye,{value:I().advanced.imageSettings.modePrefer,onChange:B},e.createElement(he,{value:"folder",control:e.createElement(ge,{sx:{"& .MuiSvgIcon-root":{fontSize:22,color:"#65C466"}}}),label:"本地文件夹 (Prefer In Local Folder)"}),e.createElement(he,{value:"vf",control:e.createElement(ge,{sx:{"& .MuiSvgIcon-root":{fontSize:22,color:"#65C466"}}}),label:"浏览器 (Prefer In Browser)"})))),e.createElement(o,{sx:{...u,...D(S())}},e.createElement(i,{id:"settings_2_4",sx:{fontSize:"0.89rem",fontWeight:500}},"Default Image Style"),e.createElement(i,{sx:h},"默认填充的图片样式，大小，位置等,w表示大小, c表示center, s表示shadow"),e.createElement(te,{fullWidth:!0,margin:"normal",name:"basicStyle",label:"基本样式",value:I().advanced.imageSettings.basicStyle,onChange:w})),e.createElement(o,{sx:{...u,...D(S())}},e.createElement(i,{id:"settings_2_5",sx:{fontSize:"0.89rem",fontWeight:500}},"Default Stored Path"),e.createElement(i,{sx:h},'默认粘贴图片上传的路径，如设置为"images"，则图片会上传到名根目录的一个为"images"的文件夹下，如该项为空，则保持默认的"images"文件夹'),e.createElement(te,{disabled:I().advanced.imageSettings.modePrefer==="vf",fullWidth:!0,margin:"none",name:"imgStorePath",label:"图片存储路径",value:I().advanced.imageSettings.imgStorePath,onChange:F})))))}),be=({content:n,id:C})=>e.createElement(e.Fragment,null,e.createElement(i,{id:C,sx:{mt:"5px",fontSize:"22px",fontWeight:700}},n),e.createElement(K,null)),$=window.React;function Rt(n){const{t:C}=J();ke().palette;const M=S();$.useRef();let[f,u]=$.useState(!1);$.useState("");let h=R=>{u(()=>!1),n.onClick(R),n.closeAll()};return $.createElement($.Fragment,null,$.createElement(Q,{fullScreen:!1,maxWidth:!1,open:n.open,onClose:h,sx:{height:"100vh"}},$.createElement(o,{sx:{background:M==="light"?"#F8FAFB":"",padding:"1rem",height:"68vh",width:"70vw"}},$.createElement(kt,null),$.createElement(K,{sx:{my:.5}}),$.createElement(o,{sx:{height:"58vh",display:"flex",background:M==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRradius:"50px",borderRadius:"5px"}},$.createElement(st,null),$.createElement(Mt,null)))),$.createElement(Ne,null),C("t-settings"))}const v=window.React,Z=window.React.useState,Wt=window.React.useRef;function _t(n){const{t:C}=J(),M=S(),[f,u]=Z({width:400,height:700}),[h,R]=Z({x:200,y:50}),[k,B]=Z(!1),[w,F]=Z(!1),[m,g]=Z(!1),P=Wt({offsetX:0,offsetY:0}),H=t=>{n.onClick(t),n.closeAll()},O=t=>{F(!0),P.current={offsetX:t.clientX-h.x,offsetY:t.clientY-h.y}},r=t=>{if(!w)return;const a=window.innerWidth-f.width,W=window.innerHeight-f.height,_=Math.max(0,Math.min(a,t.clientX-P.current.offsetX)),x=Math.max(0,Math.min(W,t.clientY-P.current.offsetY));R({x:_,y:x})},E=()=>{F(!1)};v.useEffect(()=>{if(w)return document.addEventListener("mousemove",r),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",E)}},[w,f]);const d=()=>{B(!k)};return v.createElement(v.Fragment,null,v.createElement(Q,{hideBackdrop:!0,fullScreen:!1,maxWidth:!1,open:n.open,onClose:H,PaperProps:{style:{position:"fixed",left:k?0:h.x,top:k?0:h.y,width:k?"100vw":f.width,height:k?"100vh":f.height,margin:0,maxWidth:"none",maxHeight:"none",background:"transparent",boxShadow:"none",overflow:"visible",transition:w||m?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}}},v.createElement(o,{onMouseDown:O,sx:{height:"40px",background:M==="light"?"#F8FAFB":"#2B2B2B",borderRadius:"8px 8px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between",px:2,cursor:w?"grabbing":"grab",borderBottom:`1px solid ${M==="light"?"#e0e0e0":"#404040"}`,userSelect:"none",transition:w||m?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}},v.createElement(i,{variant:"body2",sx:{color:M==="light"?"#666":"#ccc"}},"LetShare - 协作分享"),v.createElement(o,{sx:{display:"flex",gap:.5}},v.createElement(pe,{size:"small",onClick:d},v.createElement(He,{fontSize:"small"})),v.createElement(pe,{size:"small",onClick:H},v.createElement(Ue,{fontSize:"small"})))),v.createElement(o,{sx:{height:k?"calc(100vh - 40px)":f.height-40,width:"100%",background:"#F8FAFB",borderRadius:"0 0 8px 8px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",overflow:"hidden",position:"relative",transition:w||m?"none":"all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)"}},v.createElement("iframe",{src:"https://letshare.fun",style:{width:"100%",height:"100%",border:"none",borderRadius:"0 0 8px 8px",background:"transparent"},title:"Let's Share",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation"}),(w||m)&&v.createElement(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:999,cursor:w?"grabbing":"default",background:"transparent"}}),!k&&v.createElement(v.Fragment,null,v.createElement(o,{sx:{position:"absolute",left:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:t=>{t.preventDefault(),g(!0);const a=t.clientX,W=f.width,_=h.x,x=y=>{const T=y.clientX-a,Y=Math.max(300,Math.min(window.innerWidth,W-T)),A=W-Y,V=Math.max(0,Math.min(window.innerWidth-Y,_+A));u(q=>({...q,width:Y})),R(q=>({...q,x:V}))},L=()=>{g(!1),document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",L)}}),v.createElement(o,{sx:{position:"absolute",right:-8,top:0,width:16,height:"100%",cursor:"ew-resize",zIndex:1e3},onMouseDown:t=>{t.preventDefault(),g(!0);const a=t.clientX,W=f.width,_=L=>{const y=Math.max(300,Math.min(window.innerWidth,W+(L.clientX-a)));u(T=>({...T,width:y}))},x=()=>{g(!1),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",x)}}),v.createElement(o,{sx:{position:"absolute",bottom:-8,left:0,width:"100%",height:16,cursor:"ns-resize",zIndex:1e3},onMouseDown:t=>{t.preventDefault(),g(!0);const a=t.clientY,W=f.height,_=L=>{const y=Math.max(600,Math.min(window.innerHeight,W+(L.clientY-a)));u(T=>({...T,height:y}))},x=()=>{g(!1),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",x)}}),v.createElement(o,{sx:{position:"absolute",bottom:-8,left:-8,width:20,height:20,cursor:"ne-resize",zIndex:1001},onMouseDown:t=>{t.preventDefault(),g(!0);const a=t.clientX,W=t.clientY,_=f.width,x=f.height,L=h.x,y=Y=>{const A=Y.clientX-a,V=Math.max(300,Math.min(window.innerWidth,_-A)),q=Math.max(600,Math.min(window.innerHeight,x+(Y.clientY-W))),ne=_-V,ae=Math.max(0,Math.min(window.innerWidth-V,L+ne));u({width:V,height:q}),R(ee=>({...ee,x:ae}))},T=()=>{g(!1),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",T)}}),v.createElement(o,{sx:{position:"absolute",bottom:-8,right:-8,width:20,height:20,cursor:"nw-resize",zIndex:1001},onMouseDown:t=>{t.preventDefault(),g(!0);const a=t.clientX,W=t.clientY,_=f.width,x=f.height,L=T=>{const Y=Math.max(300,Math.min(window.innerWidth,_+(T.clientX-a))),A=Math.max(600,Math.min(window.innerHeight,x+(T.clientY-W)));u({width:Y,height:A})},y=()=>{g(!1),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",y)}})))),v.createElement(Ve,null),v.createElement(i,null,C("t-collaborative-office")))}const z=window.React,le=window.React.useState,Lt=window.React.useEffect;function At(n){J();const C=S(),M=r=>{n.onClick(r),n.closeAll()},[f,u]=le({}),[h,R]=le({}),[k,B]=le({});Lt(()=>{O.forEach(async r=>{await ct(r.id)?(u(d=>({...d,[r.id]:"installed"})),B(d=>({...d,[r.id]:!0}))):u(d=>({...d,[r.id]:"not_installed"}))})},[]);const w=(r,E)=>{const d=O[r];if(!d)return;const{url:t,id:a}=d;switch(E){case"install":F(r,t,a);break;case"stop":g(a);break;case"uninstall":P(a);break;case"toggleEnable":H(a);break}},F=(r,E,d)=>{let a=!1;u(x=>({...x,[d]:"downloading"})),R(x=>({...x,[d]:0}));const W=Date.now();mt(E,d,x=>{if(x>=0&&R(L=>({...L,[d]:x})),x===100){const L=Date.now()-W;L<2500?setTimeout(()=>{a||(xe("成功安装字典！",2e3,{kind:"success"}),u(y=>({...y,[d]:"installed"})),B(y=>({...y,[d]:!0})))},2500-L):a||(xe("成功安装字典！",2e3,{kind:"success"}),u(y=>({...y,[d]:"installed"})),B(y=>({...y,[d]:!0})))}});const _=()=>{a=!0,g(d)};m[d]=_},m={},g=r=>{m[r]&&(m[r](),delete m[r]),u(E=>({...E,[r]:"not_installed"})),R(E=>({...E,[r]:0}))},P=async r=>{const E=await dt("cache_DB");ut(E,"data",r),u(d=>({...d,[r]:"not_installed"}))},H=r=>{B(E=>({...E,[r]:!E[r]}))},O=[{title:"Spelling Association",description:"拼写补全(只支持英文),安装会在本地下载词典",url:`https://${window._cdn.cdn[0]}/npm/an-array-of-english-words@2.0.0/index.json`,id:"spelling_data_json"},{title:"Spelling Check",description:"拼写检查,经费不足,咱不用了！",url:"https://jsonplaceholder.typicode.com/todos/2",id:"check_spell"}];return z.createElement(z.Fragment,null,z.createElement(Q,{className:"transparent-scrollbar",hideBackdrop:!1,fullScreen:!1,maxWidth:!1,open:n.open,onClose:M,sx:{height:"100svh",width:"100svw",display:"flex",justifyContent:"center",alignItems:"center"}},z.createElement(o,{className:"transparent-scrollbar",sx:{overflowX:"hidden",height:"50svh",width:"50svw",display:"flex",flexDirection:"column",background:C==="light"?"#F8FAFB":"#2B2B2B",padding:"24px",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",alignItems:"center"}},z.createElement(i,{fontSize:30,fontWeight:"bold",textAlign:"center"},"前端实验室"),z.createElement(K,{sx:{width:"100%",my:2}}),z.createElement(o,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"24px",width:"100%"}},O.map((r,E)=>{const d=f[r.id]||"not_installed",t=k[r.id]??!0;return z.createElement(qe,{key:E,sx:{width:"250px",height:"220px",borderRadius:"12px",boxShadow:3,display:"flex",flexDirection:"column",justifyContent:"space-between",padding:2}},z.createElement(o,{sx:{flex:1}},z.createElement(i,{variant:"h6",sx:{fontWeight:"bold"}},r.title),z.createElement(i,{variant:"body2",color:"textSecondary"},r.description)),z.createElement(o,{sx:{display:"flex",justifyContent:"space-between",gap:1}},d==="not_installed"&&z.createElement(N,{variant:"contained",color:"primary",sx:{flex:1,minWidth:"64px",height:"42px"},onClick:()=>w(E,"install")},"安装"),d==="downloading"&&z.createElement(N,{variant:"contained",color:"error",sx:{flex:1,display:"flex",minWidth:"64px",height:"42px",alignItems:"center",justifyContent:"center"},onClick:()=>w(E,"stop")},z.createElement(Ge,{size:20,sx:{color:"white",marginRight:1}})),d==="installed"&&z.createElement(z.Fragment,null,z.createElement(N,{variant:"contained",color:"secondary",sx:{flex:1},onClick:()=>w(E,"uninstall")},"卸载"),z.createElement(N,{variant:"contained",color:t?"success":"warning",sx:{flex:1},onClick:()=>w(E,"toggleEnable")},t?"禁用":"启用"))))})))),z.createElement(Je,null),z.createElement(i,null,"前端实验室"))}const l=window.React,rn=Me(()=>{const{t:n}=J(),C=Et(),[M,f]=l.useState(null),[u,h]=l.useState(null),[R,k]=l.useState(null),[B,w]=l.useState(null),[F,m]=l.useState(null),[g,P]=l.useState(null),[H,O]=l.useState(!1),r=!!M,E=!!u,d=!!R,t=!!B,a=!!F,W=!!g,_=s=>{f(s.currentTarget)},x=s=>{h(s.currentTarget),s.stopPropagation()},L=async s=>{await pt()?(k(s.target),s.stopPropagation()):(s.stopPropagation(),A(),O(!0))},y=s=>{w(s.currentTarget)},T=s=>{m(s.currentTarget)},Y=s=>{P(s.currentTarget)},A=()=>{f(null)},V=s=>{h(null),s.stopPropagation()},q=s=>{k(null),s.stopPropagation()},ne=s=>{w(null),s.stopPropagation()},ae=s=>{m(null),s.stopPropagation()},ee=s=>{P(null),s.stopPropagation()},Re=()=>{C.display(),A()},We=()=>{ft(!0),A()};return l.createElement("div",null,l.createElement(Q,{open:H,onClose:()=>{O(!1)}},l.createElement(oe,null,l.createElement(i,{variant:"h6",gutterBottom:!0},"确定导出吗，你还没有保存呢！")),l.createElement(ie,null,l.createElement(Se,null,l.createElement(i,{variant:"body1",gutterBottom:!0},'Once you have clicked the "yes" button, your text will be saved.'))),l.createElement(re,null,l.createElement(N,{onClick:()=>{O(!1),ht(),ze()}},"是嘟"),l.createElement(N,{onClick:()=>{O(!1)},autoFocus:!0},"达咩"))),l.createElement(gt,{open:r,endIcon:l.createElement(Ke,null),onClick:_},n("t-more")),l.createElement(ce,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:M,open:r,onClose:A},l.createElement(p,{onClick:Re,disableRipple:!0},l.createElement(Qe,null),n("t-image-manager")),l.createElement(p,{onClick:We,disableRipple:!0},l.createElement(Ze,null),n("t-file-manager")),l.createElement(p,{onClick:s=>{L(s)},disableRipple:!0},l.createElement(St,{anchorEl:R,open:d,closeMenu:A,closeExportMenu:q})),l.createElement(K,{sx:{my:.5}}),l.createElement(p,{onClick:s=>{x(s)},disableRipple:!0},l.createElement(wt,{closeAll:A,anchorEl:u,open:E,onClick:V})),l.createElement(p,{onClick:s=>{T(s)},disableRipple:!0},l.createElement(_t,{closeAll:A,anchorEl:F,closeMenu:A,open:a,onClick:ae})),l.createElement(p,{onClick:s=>{Y(s)},disableRipple:!0},l.createElement(At,{closeAll:A,anchorEl:g,closeMenu:ee,open:W,onClick:ee})),l.createElement(p,{onClick:s=>{y(s)},disableRipple:!0},l.createElement(Rt,{closeAll:A,anchorEl:B,open:t,onClick:ne})),l.createElement(p,{onClick:()=>{A()},disableRipple:!0},l.createElement(et,null),n("t-more-coming-soon"))))});export{rn as default};
