var v=Object.defineProperty;var I=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $=(e,t,n)=>(I(e,typeof t!="symbol"?t+"":t,n),n);import{c as client}from"./react-dom-d3bdc6a0.js";import{s as styled,B as Button,g as grey,M as Menu,D as Dialog,a as DialogTitle,b as DialogContent,c as DialogContentText,T as TextField,d as DialogActions,e as default_1$1,f as MenuItem,h as default_1$2,F as FormControl,i as Box$1,I as InputLabel,S as Select,j as default_1$3,k as default_1$4,l as default_1$5,m as default_1$6,n as TreeItem,t as treeItemClasses,o as alpha,C as Collapse,p as SimpleTreeView,q as default_1$7,r as default_1$8,u as default_1$9,v as Breadcrumbs,L as Link,w as default_1$a,x as default_1$b,y as Typography,z as default_1$c,A as Switch,E as useTheme,G as Divider,H as default_1$d,J as default_1$e,K as default_1$f,N as Tooltip,Z as Zoom,O as createTheme,P as purple,Q as Drawer,R as ThemeProvider,U as IconButton,V as default_1$g,W as default_1$h,X as Grid,Y as CssBaseline,_ as AppBar,$ as Toolbar,a0 as default_1$i,a1 as default_1$j,a2 as default_1$k,a3 as List,a4 as ListItem,a5 as ListItemButton,a6 as ListItemAvatar,a7 as Avatar,a8 as ListItemText,a9 as default_1$l,aa as default_1$m,ab as default_1$n,ac as debounce,ad as Backdrop,ae as CircularProgress,af as blue,ag as green}from"./@mui-c69c44d3.js";import{openDB,updateDB,cursorGetData,cursorGetDataByIndex}from"https://jsd.onmicrosoft.cn/gh/LiWeny16/MarkdownOnline@V2.1.1/@cdn/functions/App/db.min.js";import hljs from"https://npm.elemecdn.com/@highlightjs/cdn-assets@11.6.0/es/highlight.min.js";import{marked}from"https://npm.elemecdn.com/marked/lib/marked.esm.js";import mermaid from"https://jsd.onmicrosoft.cn/npm/mermaid@10/dist/mermaid.esm.min.mjs";import*as IncrementalDOM from"https://jsd.onmicrosoft.cn/npm/incremental-dom@0.7.0/+esm";import"https://npm.elemecdn.com/katex@0.16.7/dist/katex.min.js";import"https://jsd.onmicrosoft.cn/npm/string-replace-async@3.0.2/index.min.js";import kit from"https://jsd.onmicrosoft.cn/npm/bigonion-kit@0.12.3/esm/kit.min.js";import markdownIt from"https://jsd.onmicrosoft.cn/npm/markdown-it@14.1.0/+esm";import{d as default_1}from"./markdown-it-incremental-dom-c4f66209.js";import mdItMultimdTable from"https://jsd.onmicrosoft.cn/npm/markdown-it-multimd-table@4.2.3/+esm";import markdownItGithubToc from"https://jsd.onmicrosoft.cn/npm/markdown-it-github-toc@3.2.4/src/index.js/+esm";import markdownItTaskLists from"https://jsd.onmicrosoft.cn/npm/@hackmd/markdown-it-task-lists@2.1.4/+esm";import{full}from"https://jsd.onmicrosoft.cn/npm/markdown-it-emoji@3.0.0/+esm";import{has,emojify}from"https://jsd.onmicrosoft.cn/npm/node-emoji@2.1.3/+esm";import vconsole from"https://jsd.onmicrosoft.cn/npm/vconsole@3.15.1/+esm";import{makeAutoObservable,observable,toJS}from"https://jsd.onmicrosoft.cn/npm/mobx@6.12.0/+esm";import markdownitFootNote from"https://jsd.onmicrosoft.cn/npm/markdown-it-footnote@4.0.0/+esm";import{Notification,Message}from"https://jsd.onmicrosoft.cn/npm/@arco-design/web-react@2.62.0/+esm";import{o as observer}from"./mobx-react-ed2466fd.js";import axios from"https://jsd.onmicrosoft.cn/npm/axios@1.6.5/+esm";import html2canvas from"https://jsd.onmicrosoft.cn/npm/html2canvas@1.4.1/+esm";import{PhotoProvider,PhotoView}from"https://jsd.onmicrosoft.cn/gh/LiWeny16/MarkdownOnline@V2.1.3/@cdn/lib/react-photo-view/react-photo-view.module.js";import{l as loader,F as Ft}from"./@monaco-editor-38e7c7a5.js";import{R as ResizableBox}from"./react-resizable-8f73e4ed.js";import{delimiters0,delimeterSizing0,greekLetters0,otherLetters0,spacing0,verticalLayout0,logicAndSetTheory0,macros0,bigOperators0,binaryOperators0,binomialCoefficients0,fractions0,mathOperators0,relations0,negatedRelations0,arrows0,font0,size0,style0,symbolsAndPunctuation0,debugging0,accents1,annotation1,verticalLayout1,overlap1,spacing1,logicAndSetTheory1,mathOperators1,sqrt1,extensibleArrows1,font1,braketNotation1,classAssignment1,verticalLayout2,binomialCoefficients2,fractions2,color2,envs}from"https://jsd.onmicrosoft.cn/gh/LiWeny16/MarkdownOnline@main/@cdn/functions/Monaco/snippets/latexRules.min.js";import prettier from"https://jsd.onmicrosoft.cn/npm/prettier@3.2.4/+esm";import parseMd from"https://jsd.onmicrosoft.cn/npm/prettier@3.2.4/plugins/markdown.js/+esm";import data from"https://jsd.onmicrosoft.cn/npm/@emoji-mart/data@1.1.2/+esm";import{$ as $e5534fc185f7111e$export$2e2bcd8739ae039}from"./@emoji-mart-a8b676b0.js";import{gsap}from"https://jsd.onmicrosoft.cn/npm/gsap@3.12.5/+esm";import"./react-2b221fbb.js";import"./@babel-f8d566ba.js";import"./clsx-0839fdbe.js";import"./@emotion-d13e5fae.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./stylis-79144faa.js";import"./react-is-e5978b8b.js";import"./react-transition-group-bc100b23.js";import"./@popperjs-f3391c26.js";import"./prop-types-7395632d.js";import"./htmlparser2-b305cd15.js";import"./inherits-2c87d58f.js";import"./mobx-react-lite-290ab4f8.js";import"./use-sync-external-store-b84fba6b.js";import"./state-local-dd516420.js";import"./react-draggable-b033082a.js";import"https://jsd.onmicrosoft.cn/npm/emoji-mart@5.6.0/+esm";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const React$l=window.React,ColorButton=styled(Button)(({theme:e})=>({color:e.palette.mode==="light"?"rgb(55, 65, 81)":"#FFFFFF",marginLeft:10,fontFamily:["electronicFont"].join(","),backgroundColor:e.palette.mode==="light"?"#FFFFFF":"","&:hover":{backgroundColor:e.palette.mode==="light"?grey[300]:""}}));function CustomizedButtons(e){return React$l.createElement(ColorButton,{id:"demo-customized-button",href:e.href?e.href:void 0,"aria-controls":e.open?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":e.open?"true":void 0,disableElevation:!0,onClick:e.onClick,onMouseOver:e.onHover,endIcon:e.endIcon,startIcon:e.startIcon?e.startIcon:void 0,variant:"contained"},e.children)}function getMdTextFromMonaco(){var e;if((e=window.editor)!=null&&e.getValue){let t=window.editor.getValue();return t=t.replace(/\r\n/g,`
`),t}else return"null"}function getRenderHTML(e="view-area"){let t=document.getElementById(e);if(t)return t.innerHTML}function fillInMemoryText(e){openDB("md_content",2).then(t=>{updateDB(t,"users_md",{uuid:1,contentText:e})})}async function readMemoryText(){return new Promise(e=>{openDB("md_content",2).then(t=>{cursorGetData(t,"users_md").then(n=>{e(n)})})})}function fillInMemoryImgs(e,t){openDB("md_content",2).then(n=>{for(let a=0;a<=e.length-1;a++){let r={uuid:t+a,imgBase64:e[a]};updateDB(n,"users_img",r)}})}async function readMemoryImg(e,t){return new Promise(n=>{openDB("md_content",2).then(a=>{cursorGetDataByIndex(a,"users_img",e,t).then(r=>{n(r)})})})}async function readAllMemoryImg(){return new Promise(e=>{openDB("md_content",2).then(t=>{cursorGetData(t,"users_img").then(n=>{e(n)})})})}const supportFileTypes=[".md",".py",".js",".ts"];class FileManager{constructor(t){$(this,"fileHandle",null);t?this.fileHandle=t:this.fileHandle=window._fileHandle??window._fileHandle}async openSingleFile(){try{return[this.fileHandle]=await window.showOpenFilePicker({multiple:!1,types:[{description:"Text Files",accept:{"text/plain":supportFileTypes}}]}),window._fileHandle=this.fileHandle,this.fileHandle}catch(t){return console.error("Error opening file:",t),null}}async readFile(){return this.fileHandle?await(await this.fileHandle.getFile()).text():void 0}async saveFileSilently(t){if(!this.fileHandle)return;const n=await this.fileHandle.createWritable(),a=t;return await n.write(a),await n.close(),!0}async saveAsFile(t){try{const a=await(await window.showSaveFilePicker({suggestedName:"text",types:[{description:"Text Files",accept:{"text/plain":supportFileTypes}}]})).createWritable();await a.write(t??"Sth.."),await a.close(),console.log("File saved successfully as new file.")}catch(n){console.error("Save As operation cancelled or failed:",n)}}}class OperateLocalStorage{constructor(){$(this,"version","0.2")}setItem(t,n){localStorage.setItem(t,n)}getItem(t){return localStorage.getItem(t)?localStorage.getItem(t):""}removeItem(t){localStorage.removeItem(t)}}let welcomeText;function blankTextInit(){return new Promise(e=>{readMemoryText().then(t=>{t.length&&t[0].contentText?(window.editor.setValue(t[0].contentText),e()):(fetch("https://jsd.onmicrosoft.cn/gh/LiWeny16/MarkdownOnline@main/source/assets/welcome.md").then(n=>n.text()).then(n=>{welcomeText=n,window.editor.setValue(welcomeText)}).catch(n=>{console.error("Error fetching markdown:",n)}),e())})})}function PageBreaker(e){let t=/\|---\|/g;return e=e.replace(t,()=>'<div style="page-break-after: always;"></div>'),e}const index="";async function prepareParser(e){async function t(d){let s=d.attrGet("src");if(s.startsWith("/vf/")){let u=s.match(/\d+/)[0];return await readMemoryImg("uuid",parseInt(u)).then(m=>m[0].imgBase64)}}async function n(d){let s=d.content,u;try{return await mermaid.parse(s,{suppressErrors:!1}),await mermaid.parse(s,{suppressErrors:!0})&&(u=await mermaid.render(`_mermaidSvg_${kit.getUUID().slice(0,5)}`,s)),u.svg}catch(m){return`<pre class="ERR">${m}</pre>`}}let a=[],r=[],i=[],o=[],l=markdownParser();l.renderer.rules.image=function(d,s){var u;return(u=d[s].attrGet("src"))!=null&&u.startsWith("/vf/")&&a.push(d[s]),""},l.renderer.rules.fence=function(d,s,u,m,h){return d[s].info==="mermaid"&&r.push(d[s]),""},l.render(e,{});for(const d of a){let s=await t(d);i.push(s)}for(const d of r){let s=await n(d);o.push(s)}return{vfImgSrcArr:i,vfImgSeq:0,mermaidParsedArr:o,mermaidSeq:0}}async function mdConverter(e=!1){let t=getMdTextFromMonaco();t=PageBreaker(t);let n=await prepareParser(t);e?document.getElementById("view-area").innerHTML=markdownParser().render(t,n):IncrementalDOM.patch(document.getElementById("view-area"),markdownParser().renderToIncrementalDOM(t,n)),hljs.highlightAll()}const regs={markHighlight:/@@(.*?)@@/,emoji:/^:([a-zA-Z0-9_\+\-]+):/},newTokenizer={heading(e){return e.match(/^#{1,6}\s.*/),!1},codespan(e){return e.match(/^\&+([^\&\n]+?)\&+/),!1}},newRenderer={paragraph(e){return`<p class="line-hilight">${e}</p>`},heading(e,t){return`
            <h${t}  class="line-hilight">
              <a href="#">
                <span class="header-link"></span>
              </a>
              ${e}
            </h${t}>`},code(code,lang,_escaped){let finalCodeBlock;return lang=="js-run"?(new vconsole,`${eval(code)}`):(hljs.getLanguage(lang)?finalCodeBlock=`<pre><code class="language-${lang} ">${code}</code></pre>`:lang=="mermaid"?finalCodeBlock=`<div class="language-mermaid language-plaintext">${code}</div>`:finalCodeBlock=`<pre><code class="language-plaintext">${code}</code></pre>`,finalCodeBlock)},image(e,t,n){const a="#";let r=Math.random(),i="auto",o="",l="L",c=n.split(a);if(c.length>1)for(let d=0;d<c.length;d++){let s=c[d];s==="s"&&(o+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),s==="s1"&&(o+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),s==="s2"&&(o+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(s==="C"||s=="c")&&(l="C"),(s==="R"||s=="r")&&(l="R"),s.startsWith("w")&&(i=c[d].substring(1),i.endsWith("%")||(i+="px"))}return`<div class="imgBox-r FLEX ${r} ${l=="C"?" JUS-CENTER":l=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${i}" style="${o}" src="${e}" alt="${n}"></div>`}},importUrlExtension={extensions:[{name:"importUrl",level:"block",start(e){return e.indexOf(`
:`)},tokenizer(e){const n=/^:(https?:\/\/.+?):/.exec(e);if(n)return{type:"importUrl",raw:n[0],url:n[1],html:""}},renderer(e){return`<iframe style="border:none" src="${e.url}" width="100%" height="100%"></iframe>`}}]},markItExtension={extensions:[{name:"markIt",level:"inline",start(e){var t;return(t=e.match(/@@/))==null?void 0:t.index},tokenizer(e,t){const n=e.match(regs.markHighlight),a=n?n[1]:"";if(n)return{type:"markIt",raw:e,text:a}},renderer(e){return`${e.raw.replace(regs.markHighlight,`<mark>${e.text}</mark>`)}`}}]},imgExtension={name:"newRenderer",level:"block",tokenizer:newTokenizer,renderer:newRenderer,async:!0,async walkTokens(e){if(e.type,e.type==="image"){const t=e.href;if(t!=null&&t.match(/vf/)){let n=(t.match(/vf\/(\d+)/)?t.match(/vf\/(\d+)/)[1]:0).toString(),a=await readMemoryImg("uuid",parseInt(n)).then(r=>r[0]?r[0].imgBase64:0);e.href=a}}else e.type==="code"||e.type}},emojiExtension={extensions:[{name:"emoji",level:"inline",start(e){var t;return(t=e.match(/:/))==null?void 0:t.index},tokenizer(e,t){const n=e.match(regs.emoji);return n?{type:"emoji",raw:n[0],text:n[1]}:!1},renderer(e){return has(e.raw)?emojify(e.raw):e.raw}}]};class ConfigStore{constructor({themeState:t,fileManagerState:n,emojiPickerState:a,contextMenuClickPosition:r,settingsConfig:i}){$(this,"themeState");$(this,"fileManagerState");$(this,"emojiPickerState");$(this,"contextMenuClickPosition");$(this,"settingsConfig");makeAutoObservable(this,{themeState:observable,fileManagerState:observable,emojiPickerState:observable,contextMenuClickPosition:observable,settingsConfig:observable}),this.themeState=t,this.fileManagerState=n,this.emojiPickerState=a,this.contextMenuClickPosition=r,this.settingsConfig=i}getAllConfig(){let t={};return Object.getOwnPropertyNames(this).forEach((n,a)=>{t[n]=this[n]}),t}}function markdownitLineNumber(e,t){const n=function(a,r,i,o,l){let c;return a[r].map&&a[r].level===0&&(c=a[r].map[0],a[r].attrSet("data-line",String(c))),l.renderToken(a,r,i)};e.renderer.rules.paragraph_open=e.renderer.rules.heading_open=e.renderer.rules.table_open=e.renderer.rules.bullet_list_open=n}let myPlugin=function(e){e.core.ruler.before("inline","myrule",function(t){var n=t.tokens;for(let a=0;a<n.length;a++)n[a].content&&n[a].content.indexOf("MYRULE")})},imagePlugin=function(e){e.renderer.rules.image,e.renderer.rules.image=function(t,n,a,r,i){var R;const o=t[n],l="#";let c=o.attrs[o.attrIndex("src")][1],d=o.content;o&&((R=o.attrGet("src"))!=null&&R.startsWith("/vf/"))&&r.vfImgSrcArr&&(c=r.vfImgSrcArr[r.vfImgSeq++]);let s="auto",u="",m="L",h=d.split(l);if(h.length>1)for(let y=0;y<h.length;y++){let x=h[y];x==="s"&&(u+="box-shadow: rgb(199 199 199) 1vh 2vh 21px"),x==="s1"&&(u+="box-shadow: rgb(146 146 146) 1vh 2vh 21px;"),x==="s2"&&(u+="box-shadow: rgb(32 32 32 / 86%) 1vh 2vh 21px"),(x==="C"||x=="c")&&(m="C"),(x==="R"||x=="r")&&(m="R"),x.startsWith("w")&&(s=h[y].substring(1),s.endsWith("%")||(s+="px"))}return`<div class="imgBox-r FLEX  ${m=="C"?" JUS-CENTER":m=="R"?"JUS-RIGHT":""}" ><img class="img_resize_transition" width="${s}" style="${u}" src="${c}" alt="${d}">
    </div>`}},codePlugin=function(e){const t=e.renderer.rules.code_block;e.renderer.rules.fence=function(n,a,r,i,o){let l;n[a].map&&n[a].level===0&&(l=n[a].map[0],n[a].attrSet("data-line",String(l)));let c=n[a].info,d=n[a].content;if(c==="mermaid"){if(i.mermaidParsedArr)return`<div data-line="${l}" class="language-mermaid language-plaintext">
        ${i.mermaidParsedArr[i.mermaidSeq++]}
        </div>`}else return hljs.getLanguage(c)?`<pre class="language-code" data-line="${l}"><code class="language-${c} ${getTheme()==="light"?"":"hljs-dark"}">${d}</code></pre>`:`<div class="code-container" data-line="${l}">
      <pre><code class="language-plaintext">${d}</code></pre>
    </div>`;return t(n,a,r,i,o)}},cluePlugin=function(e){function t(n){const a=n.tokens;for(let r=0;r<a.length;r++)if(a[r].type==="inline"){let i=a[r].children;for(let o=0;o<i.length;o++){const l=i[o];if(l.type==="text"&&l.content){const d=l.content.match(/\^(.*?)\^(.*?)\#$/);if(d){const s=new n.Token("html_block","",0);s.content=`<div class="${d[2]}">${e.render(d[1])}</div>`,i[o]=s,o++}}}}}e.core.ruler.push("my_rule1",t),e.inline.ruler.before("emphasis","mark",(n,a)=>!1)};function customAlignPlugin(e){e.core.ruler.push("custom_align",function(t){let n=null;t.tokens.forEach((a,r)=>{if(a.type==="paragraph_open"){let i=t.tokens[r+1];i&&i.type==="inline"&&i.children.forEach(o=>{if(o.type==="text"){const l=o.content;switch(l.slice(-2)){case"||":o.content=l.slice(0,-2),n="C";break;case">>":o.content=l.slice(0,-2),n="R";break}}})}n&&a.type==="paragraph_open"&&(a.attrPush(["class",n]),n=null)})})}function customAlignPluginHeading(e){e.core.ruler.push("custom_align_heading",function(t){let n=null;t.tokens.forEach((a,r)=>{if(a.type==="heading_open"){let i=t.tokens[r+1];i&&i.type==="inline"&&i.children.forEach(o=>{if(o.type==="text"){const l=o.content;switch(l.slice(-2)){case"||":o.content=l.slice(0,-2),n="C";break;case">>":o.content=l.slice(0,-2),n="R";break}}})}n&&a.type==="heading_open"&&(a.attrPush(["class",n]),n=null)})})}function preViewClickEvent(e,t,n=e.createDecorationsCollection()){document.getElementById("view-area").addEventListener("dblclick",function(a){let r=a.target,i=0;if(r!==this){for(;r;){if(r.hasAttribute("data-line")){i=parseInt(r.getAttribute("data-line"));break}r=r.parentElement}i&&(e.setPosition({lineNumber:i+1,column:1}),e.revealLineInCenter(i+1,1),n.clear(),n.set([{range:new t.Range(i+1,1,i+1,1),options:{isWholeLine:!0,className:"HILIGHT-MONACO",zIndex:0}}]))}})}const katex=window.katex;function isValidDelim(e,t){var n,a,r=e.posMax,i=!0,o=!0;return n=t>0?e.src.charCodeAt(t-1):-1,a=t+1<=r?e.src.charCodeAt(t+1):-1,(n===32||n===9||a>=48&&a<=57)&&(o=!1),(a===32||a===9)&&(i=!1),{can_open:i,can_close:o}}function math_inline(e,t){var n,a,r,i,o;if(e.src[e.pos]!=="$")return!1;if(i=isValidDelim(e,e.pos),!i.can_open)return t||(e.pending+="$"),e.pos+=1,!0;for(n=e.pos+1,a=n;(a=e.src.indexOf("$",a))!==-1;){for(o=a-1;e.src[o]==="\\";)o-=1;if((a-o)%2==1)break;a+=1}return a===-1?(t||(e.pending+="$"),e.pos=n,!0):a-n===0||a-n===2?(t||(e.pending+="$$"),e.pos=n+1,!0):(i=isValidDelim(e,a),i.can_close?(t||(r=e.push("math_inline","math",0),r.markup="$",r.content=e.src.slice(n,a)),e.pos=a+1,!0):(t||(e.pending+="$"),e.pos=n,!0))}function math_block(e,t,n,a){var r,i,o,l,c=!1,d,s=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(s+2>u||e.src.slice(s,s+2)!=="$$")return!1;if(s+=2,r=e.src.slice(s,u),a)return!0;for(r.trim().slice(-2)==="$$"&&(r=r.trim().slice(0,-2),c=!0),o=t;!c&&(o++,!(o>=n||(s=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],s<u&&e.tShift[o]<e.blkIndent)));)e.src.slice(s,u).trim().slice(-2)==="$$"&&(l=e.src.slice(0,u).lastIndexOf("$$"),i=e.src.slice(s,l),c=!0);return e.line=o+1,d=e.push("math_block","math",0),d.block=!0,d.content=(r&&r.trim()?r+`
`:"")+e.getLines(t+1,o,e.tShift[t],!0)+(i&&i.trim()?i:""),d.map=[t,e.line],d.markup="$$",!0}function markdownItLatex(e,t){t=t||{throwOnError:!1,strict:!1};var n=function(o){if(t.displayMode=!1,o)try{return katex.renderToString(o,t)}catch{return o}else return"Latex Missing"},a=function(o,l){return n(o[l].content)},r=function(o,l){t.displayMode=!0;let c;if(l.map&&l.level===0&&(c=l.map[0]),o)try{return`<p data-line=${String(c)}>`+katex.renderToString(o,t)+"</p>"}catch{return o}else return"LATEX MISSING"},i=function(o,l){return r(o[l].content,o[l])+`
`};e.inline.ruler.after("escape","math_inline",math_inline),e.block.ruler.after("blockquote","math_block",math_block,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=a,e.renderer.rules.math_block=i}const noteUseArco=(e,t,n)=>{const a=(n==null?void 0:n.kind)??"success",r=(n==null?void 0:n.position)??"bottomRight";Notification[a]({title:e,content:t,position:r})};function markdownParser(){return markdownIt({html:!0,linkify:!0,typographer:!0,breaks:!0}).use(markdownitLineNumber).use(markdownItGithubToc,{anchorLinkSymbol:"",anchorLinkBefore:!1}).use(myPlugin).use(imagePlugin).use(mdItMultimdTable,{multiline:!0,rowspan:!0,headerless:!0,multibody:!0,aotolabel:!0}).use(codePlugin).use(cluePlugin).use(markdownitFootNote).use(customAlignPlugin).use(customAlignPluginHeading).use(full).use(markdownItLatex).use(markdownItTaskLists).use(default_1,IncrementalDOM)}class settingsClass{constructor(){}markedInit(){marked.use({mangle:!1,headerIds:!1,strict:!1,extensions:[],async:!0,lineNumber:!0},importUrlExtension,imgExtension,markItExtension,emojiExtension)}mermaidInit(){const t={securityLevel:"loose",logLevel:4,startOnLoad:!1,gantt:{fontSize:19,sectionFontSize:"16",numberSectionStyles:10,useMaxWidth:!0},theme:getSettings().advanced.mermaidTheme};mermaid.parseError=n=>{},mermaid.initialize(t),mermaid.mermaidAPI.initialize(t)}hljsInit(){hljs.configure({ignoreUnescapedHTML:!0})}settingsAllInit(){this.markedInit(),this.mermaidInit(),this.hljsInit()}static newSettings(){return new this}}function allInit(e=window.editor,t=window.monaco,n){new settingsClass().settingsAllInit(),blankTextInit().then(async()=>{await mdConverter(),n&&n(),await kit.sleep(110),noteUseArco("å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬","å½“å‰ç‰ˆæœ¬:v2.2.0"),await kit.sleep(780),noteUseArco("ç‰ˆæœ¬æ–°å¢žç‰¹æ€§","æ–‡ä»¶ç®¡ç†å™¨",{kind:"info"})}),window.deco=e.createDecorationsCollection(),window._speechData={processing:!1,speechResult:"",speech:null},preViewClickEvent(e,t,window.deco)}const defaultConfig={themeState:"light",fileManagerState:!1,emojiPickerState:"off",contextMenuClickPosition:{posx:20,posy:20},settingsConfig:{basic:{syncScroll:!1,speechLanguage:"zh-CN",fileEditLocal:!0},advanced:{mermaidTheme:"default"}}},normalSettingsKey=[...Object.keys(defaultConfig.settingsConfig.basic),...Object.keys(defaultConfig.settingsConfig.advanced)];Object.keys(defaultConfig.settingsConfig.advanced);const normalMermaidTheme=["default","forest","dark","neutral"],normalMermaidThemeMap=["default (é»˜è®¤ï¼Œæ‰æ˜¯æœ€ç¾Žçš„ï¼)","forest (è¯´çœŸçš„ï¼Œå¾ˆç»¿)","dark (è¯´çœŸçš„ï¼Œå¾ˆé»‘)","neutral (æ¸…å¿ƒå¯¡æ¬²ï¼Œå‡ºå®¶å¿…é€‰)"];function configInit(e){function t(r){typeof n[r]=="object"?a.setItem(r,JSON.stringify(n[r])):a.setItem(r,n[r])}let n=e,a=new OperateLocalStorage;for(let r in n)if(a.getItem(r))if(r=="themeState"||r=="emojiPickerState"||r=="settingsConfig")try{if(typeof n[r]=="object"){const i=JSON.parse(a.getItem(r).toString());for(let o in i)Object.keys(i[o]).forEach(l=>{if(!normalSettingsKey.includes(l))return t(r),n});n[r]=JSON.parse(a.getItem(r).toString())}else n[r]=a.getItem(r).toString()}catch(i){console.log(i),t(r)}else t(r);else t(r);return n}const configStore=new ConfigStore(configInit(defaultConfig)),useConfig=()=>configStore;let opLocalStorage=new OperateLocalStorage;function changeTheme(e){e=="light"?(useConfig().themeState="light",opLocalStorage.setItem("themeState","light")):(useConfig().themeState="dark",opLocalStorage.setItem("themeState","dark"))}function getTheme(){return useConfig().themeState}function changeEmojiPickerState(e){e=="on"?(useConfig().emojiPickerState="on",opLocalStorage.setItem("emojiPickerState","on")):(useConfig().emojiPickerState="off",opLocalStorage.setItem("emojiPickerState","off"))}function getEmojiPickerState(){return useConfig().emojiPickerState}function setContextMenuClickPosition(e){if(e.posx&&e.posy)useConfig().contextMenuClickPosition=e;else return!1}function getContextMenuClickPosition(){return useConfig().contextMenuClickPosition}function changeSettings(e){const t=getSettings(),n=updateSettingsConfig(t,e);useConfig().settingsConfig=n,opLocalStorage.setItem("settingsConfig",JSON.stringify(n))}function getSettings(){return toJS(useConfig().settingsConfig)}function updateSettingsConfig(e,t){for(const n in t)n in e?Object.assign(e[n],t[n]):e[n]=t[n];return e}function changeFileManagerState(e){useConfig().fileManagerState=e}function getFileManagerState(){return useConfig().fileManagerState}const alertUseArco=(e,t,n)=>{const a=(n==null?void 0:n.zIndex)??9999,r=(n==null?void 0:n.kind)??"success";let i=document.getElementsByClassName("arco-message-wrapper arco-message-wrapper-top")[0];i?i.style.zIndex=String(a)??a:kit.addStyle(`.arco-message-wrapper .arco-message-wrapper-top{z-index:${a}}`),Message[r]({style:{position:"relative",zIndex:a},content:e,closable:!0,duration:t??2500,position:"top",...n==null?void 0:n.extraConfig})};async function save(e=null,t=!0){let n=getMdTextFromMonaco(),a="";if(t&&n!="null")try{fillInMemoryText(n),getSettings().basic.fileEditLocal?await new FileManager(window._fileHandle).saveFileSilently(n)?a="æˆåŠŸä¿å­˜åˆ°æœ¬åœ°ï¼ðŸŽ‰":a="æˆåŠŸä¿å­˜åˆ°æµè§ˆå™¨ï¼ðŸŽ‰(æœªæ‰“å¼€æœ¬åœ°æ–‡ä»¶)":a="æˆåŠŸä¿å­˜åˆ°æµè§ˆå™¨ï¼ðŸŽ‰",alertUseArco(a)}catch{alertUseArco("ä½ ç«Ÿæ•¢æ‹’ç»æˆ‘ã€‚",2500,{kind:"error"})}else save()}async function isSaved(){return await readMemoryText().then(e=>{var t;return e?((t=e[0])==null?void 0:t.contentText)===getMdTextFromMonaco():!1})}class ImageStore{constructor(t){$(this,"displayState",!1);makeAutoObservable(this,{displayState:observable}),this.displayState=t}display(){this.displayState=!0}hidden(){this.displayState=!1}}const imageStore=new ImageStore(!1),useImage=()=>imageStore,React$k=window.React,StyledMenu=styled(e=>React$k.createElement(Menu,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e}))(({theme:e})=>({"& .MuiPaper-root":{borderRadius:6,marginTop:e.spacing(1),color:e.palette.mode==="light"?"rgb(55, 65, 81)":e.palette.grey[300],"& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:20,color:e.palette.mode==="light"?"rgb(55, 65, 81)":e.palette.grey[300],marginRight:e.spacing(1.5)}}}}));function CloudMail(e,t,n){for(var a=document.getElementById("view-area"),r=window.getComputedStyle(a),i=0;i<r.length;i++){var o=r[i];r.getPropertyValue(o)}axios({url:e,method:t,data:n,headers:{"Content-Type":"application/json"}}).then(c=>{console.log(c)})}const React$j=window.React;function Share(e){let t=React$j.useRef(),[n,a]=React$j.useState(!1),r=o=>{a(()=>!1),e.onClick(o)},i=o=>{let l=t.current.value;CloudMail("https://service-g12i7wh1-1321514649.sh.apigw.tencentcs.com/release/mail","post",{to:l,subject:"Mailed from Markdown Online+",html:`<div class="markdown-body">${getRenderHTML()}</div>`,raw:0}),r(o),Notification.success({title:"é‚®ä»¶å‘é€æˆåŠŸï¼",content:"Betaç‰ˆæœ¬,è¯·å‹¿é‡å¤å°è¯•",position:"topRight"}),Notification.info({title:"è¯·æ³¨æ„,é‚®ä»¶å‘é€æš‚æ—¶ä¸èƒ½å®Œå…¨æ”¯æŒmermaidå’ŒLatex",content:"Betaç‰ˆæœ¬,è¯·å‹¿é‡å¤å°è¯•",position:"topRight"}),e.closAll()};return React$j.createElement(React$j.Fragment,null,React$j.createElement(Dialog,{fullWidth:!0,maxWidth:"sm",open:n,onClose:r},React$j.createElement(DialogTitle,null,"ç¥žå¥‡é‚®ç®±"),React$j.createElement(DialogContent,null,React$j.createElement(DialogContentText,null,"è¯·è¾“å…¥ä½ è¦å‘é€åˆ°çš„é‚®ç®±",React$j.createElement("br",null)),React$j.createElement(TextField,{inputRef:t,autoFocus:!0,margin:"dense",id:"name",label:"Email Address",type:"email",fullWidth:!0,variant:"standard"})),React$j.createElement(DialogActions,null,React$j.createElement(Button,{onClick:r},"å–æ¶ˆ"),React$j.createElement(Button,{onClick:i},"å‘é€"))),React$j.createElement(default_1$1,null),"åˆ†äº«(å¼€å‘ä¸­)",React$j.createElement(StyledMenu,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:e.anchorEl,open:e.open,onClick:e.onClick},React$j.createElement(MenuItem,{onClick:o=>{o.stopPropagation(),a(!0)},disabled:!0,disableRipple:!0},React$j.createElement(default_1$2,null),"é‚®ç®±åˆ†äº«")))}function exportAsImage(e=3,t="markdown.jpeg"){let n=document.getElementById("view-area").innerHTML;window.document.body.innerHTML=`<div id="exportBox" style="width:64vw" class="markdown-body markdown-body-${getTheme()==="light"?"light":"dark"}">${n}</div>`,kit.sleep(250).then(()=>{html2canvas(document.getElementById("exportBox"),{scale:e}).then(a=>{let r=a.toDataURL("image/png",.6);var i=document.createElement("a");i.download=t,i.href=r,i.click()}),kit.sleep(2e3).then(()=>{window.location.reload()})})}function exportAsMd(){let e=getMdTextFromMonaco()??"";kit.sleep(250).then(()=>{var t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),t.download="text.md",t.click()})}function myPrint(){kit.sleep(400).then(()=>{window.print()})}const React$i=window.React;function Export(e){let t=e.closeExportMenu;e.closeMenu;let[n,a]=React$i.useState(!1),r=s=>{console.log(s),t(s),a(()=>!1)},i=React$i.useRef();const[o,l]=React$i.useState(3),c=s=>{s.stopPropagation(),l(s.target.value)};let d=s=>{r(s);let u=i.current.value;exportAsImage(o??4,u??"md_snapshot.png"),e.closeMenu(s),noteUseArco("å¯¼å‡ºæˆåŠŸï¼","Betaç‰ˆæœ¬",{kind:"info",position:"topRight"})};return React$i.createElement(React$i.Fragment,null,React$i.createElement(Dialog,{className:"avoid",onClose:r,open:n,fullWidth:!0,maxWidth:"sm"},React$i.createElement("div",{onClick:s=>{s.stopPropagation()}},React$i.createElement(DialogTitle,null,"å¯¼å‡ºè®¾ç½®"),React$i.createElement(DialogContent,null,React$i.createElement(DialogContentText,null,"è¯·é€‰æ‹©å›¾ç‰‡æ¸…æ™°åº¦"),React$i.createElement("br",null),React$i.createElement(FormControl,{fullWidth:!0},React$i.createElement(Box$1,null,React$i.createElement(InputLabel,{id:"demo-simple-select-label"},"å›¾ç‰‡æ¸…æ™°åº¦"),React$i.createElement(Select,{label:"å›¾ç‰‡æ¸…æ™°åº¦",defaultValue:"4",defaultChecked:!0,fullWidth:!0,onChange:c},React$i.createElement(MenuItem,{value:"1"},"1 (æ¯”è¾ƒæ¨¡ç³Š,ä½“ç§¯è½»å·§)"),React$i.createElement(MenuItem,{value:"2"},"2 (æœ‰äº›æ¨¡ç³Š)"),React$i.createElement(MenuItem,{value:"4"},"3 (é»˜è®¤,é€‚ä¸­,æŽ¨è)"),React$i.createElement(MenuItem,{value:"6"},"4 (æ¯”è¾ƒæ¸…æ™°,ä½“ç§¯ç¨å¤§)"),React$i.createElement(MenuItem,{value:"10"},"5 (è¶…é¸¡æ— æ•Œéœ¹é›³éœ¸æ¸…æ™°,ä½“ç§¯è¾ƒå¤§)"))),React$i.createElement(Box$1,{marginX:"8px"},React$i.createElement(TextField,{inputRef:i,margin:"dense",id:"export_img_name",defaultValue:"md_snapshot.png",label:"å¯¼å‡ºçš„æ–‡ä»¶å",type:"text",fullWidth:!0,variant:"standard",placeholder:"md_snapshot.png"})))),React$i.createElement(DialogActions,null,React$i.createElement(Button,{onClick:r},"å–æ¶ˆ"),React$i.createElement(Button,{onClick:d},"ç¡®è®¤å¯¼å‡º")))),React$i.createElement(default_1$3,null),"å¯¼å‡º",React$i.createElement(StyledMenu,{style:{width:"fitContent"},anchorOrigin:{vertical:-5,horizontal:12},id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:e.anchorEl,open:e.open,onClick:s=>{t(s)}},React$i.createElement(MenuItem,{onClick:()=>{myPrint()},disableRipple:!0},React$i.createElement(default_1$4,null),"å¯¼å‡ºä¸ºPDF"),React$i.createElement(MenuItem,{onClick:s=>{a(!0),t(s)},disableRipple:!0},React$i.createElement(default_1$5,null),"å¯¼å‡ºä¸ºå›¾ç‰‡(Beta1.0)"),React$i.createElement(MenuItem,{onClick:()=>{exportAsMd()},disableRipple:!0},React$i.createElement(default_1$6,null),"å¯¼å‡ºä¸ºMarkdown")))}const React$h=window.React;function TransitionComponent(e){return React$h.createElement(Collapse,{...e})}const StyledTreeItem=styled(TreeItem)(({theme:e})=>({color:e.palette.mode==="light"?e.palette.grey[800]:e.palette.grey[200],[`& .${treeItemClasses.content}`]:{borderRadius:e.spacing(.5),padding:e.spacing(.5,1),margin:e.spacing(.2,0),[`& .${treeItemClasses.label}`]:{fontSize:"0.89rem",fontWeight:500}},[`& .${treeItemClasses.iconContainer}`]:{borderRadius:"80%",backgroundColor:e.palette.mode==="light"?alpha(e.palette.primary.main,.45):e.palette.primary.dark,color:e.palette.mode==="dark"&&e.palette.primary.contrastText,padding:e.spacing(0,1.2)}})),CustomTreeItem=React$h.forwardRef((e,t)=>React$h.createElement(StyledTreeItem,{...e,slots:{groupTransition:TransitionComponent,...e.slots},ref:t}));function SettingsRoute(){return React$h.createElement(React$h.Fragment,null,React$h.createElement(Box$1,{className:"transparent-scrollbar",sx:{overflow:"scroll",flex:"0 0 30%",minHeight:20,overflowX:"hidden",borderRight:"solid rgba(0, 0, 0, 0.12)"}},React$h.createElement(SimpleTreeView,{"aria-label":"customized",defaultExpandedItems:["1_x"],slots:{endIcon:default_1$7},sx:{userSelect:"none",minHeight:270,maxWidth:300}},React$h.createElement(CustomTreeItem,{slots:{endIcon:default_1$8},onClick:()=>{document.getElementById("settings_1_x").scrollIntoView()},itemId:"1_x",label:"åŸºç¡€è®¾ç½®"},React$h.createElement(CustomTreeItem,{slots:{endIcon:default_1$9},onClick:()=>{document.getElementById("settings_1_1").scrollIntoView()},itemId:"1_2",label:"ä¸»é¢˜è®¾ç½®"}),React$h.createElement(CustomTreeItem,{slots:{endIcon:default_1$8},onClick:()=>{document.getElementById("settings_1_2").scrollIntoView()},itemId:"1_3",label:"ç¼–è¾‘å™¨è®¾ç½®"})),React$h.createElement(CustomTreeItem,{itemId:"2_x",label:"é«˜çº§è®¾ç½®"},React$h.createElement(CustomTreeItem,{itemId:"2_2",label:"å¯¼å‡ºè®¾ç½®"}),React$h.createElement(CustomTreeItem,{itemId:"2_3",label:"Mermaidè®¾ç½®"})))))}const React$g=window.React;function handleClick(e){e.preventDefault()}function IconBreadcrumbs(){return React$g.createElement(Box$1,{sx:{marginBottom:"5px"},role:"presentation",onClick:handleClick},React$g.createElement(Breadcrumbs,{"aria-label":"breadcrumb"},React$g.createElement(Link,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/"},React$g.createElement(default_1$a,{sx:{mr:.5},fontSize:"inherit"}),"MUI"),React$g.createElement(Link,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/material-ui/getting-started/installation/"},React$g.createElement(default_1$b,{sx:{mr:.5},fontSize:"inherit"}),"Basic"),React$g.createElement(Typography,{sx:{display:"flex",alignItems:"center"},color:"text.primary"},React$g.createElement(default_1$c,{sx:{mr:.5},fontSize:"inherit"}),"Theme")))}let MaterialUISwitch=styled(Switch)(({theme:e})=>({width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:e.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:e.palette.mode==="dark"?"#003892":"#001e3c",width:32,height:32,"&::before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:e.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:20/2}}));const React$f=window.React,IOSSwitch=styled(e=>React$f.createElement(Switch,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...e}))(({theme:e})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:e.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:e.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:e.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:e.transitions.create(["background-color"],{duration:500})}}));let speechRecognition=(e,t=!0,n)=>{const a=new webkitSpeechRecognition||new SpeechRecognition;let r=!1;return a.lang=e,a.continuous=!0,a.interimResults=!1,t&&a.start(),a.onstart=()=>{r=!0},a.onresult=i=>{let o=i.results[i.results.length-1][0].transcript;o=o.replace(/Â /g,""),window._speechData.speechResult=o,n(o.length),r===!1&&a.stopRecognition()},a.onerror=function(i){i.error=="not-allowed"?alertUseArco("è¯­éŸ³æƒé™è¢«æ‹’ç»ï¼Œä¸–ç•Œï¼Œæ‹’ç»äº†æˆ‘...",4500):console.log("è¯­éŸ³è¯†åˆ«é”™è¯¯:",i.error)},a.onend=()=>{console.log(r),r&&a.start()},a.stopRecognition=()=>{a.stop(),r=!1},{recognition:a,recognizing:r}};const speechLanguageMap=[["zh-CN","æ™®é€šè¯"],["en-US","English"],["ja-JP","æ—¥æœ¬èªž"],["fr-ch","æ³•è¯­ï¼ˆç‘žå£«ï¼‰"],["ko","éŸ©è¯­"]],React$e=window.React,SettingsBody=observer(function e(){const t=getTheme(),n=useTheme(),a={transition:"0.3s",position:"relative",padding:"5px",borderRadius:"3px",display:"flex",flexDirection:"column",mt:"10px",mb:"5px",ml:"0px",pl:"25px","&::before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:4,backgroundColor:"transparent",transition:"background-color 0.3s"},"&:hover::before":{backgroundColor:t==="light"?"#840084":"#d2d2d2"},"&:hover":{backgroundColor:t==="light"?"#E7E6E5":""}},r={color:n.palette.info.contrastText??"#8B8A8A",fontSize:"0.79rem",fontWeight:500,mb:"5px"},[i,o]=React$e.useState(!1);function l(u,m){const h=document.querySelector(".markdown-body");m?(changeTheme("dark"),o(u.target.checked),console.log(h.style.cssText),h.style.cssText=""):(changeTheme("light"),o(u.target.checked),console.log(h.style.cssText))}function c(u,m){changeSettings(m?{basic:{syncScroll:!0}}:{basic:{syncScroll:!1}})}function d(u){changeSettings({basic:{speechLanguage:u.target.value}})}function s(u){changeSettings({advanced:{mermaidTheme:u.target.value}}),mermaid.init({theme:u.target.value}),mdConverter()}return React$e.useEffect(()=>{o(getTheme()==="dark")},[getTheme()]),React$e.createElement(React$e.Fragment,null,React$e.createElement(Box$1,{className:"transparent-scrollbar",sx:{width:"100%",padding:"1rem",display:"flex",flexDirection:"column",fontSize:"0.89rem",maxHight:"200px",overflowY:"scroll"}},React$e.createElement(Typography,{id:"settings_1_x",sx:{fontSize:"30px",fontWeight:"700"}},"åŸºç¡€è®¾ç½®"),React$e.createElement(Divider,null),React$e.createElement(Box$1,{sx:a},React$e.createElement(Typography,{id:"settings_1_1",sx:{fontSize:"0.89rem",fontWeight:500}},"Theme"),React$e.createElement(Typography,{sx:r},"æ›´æ”¹ç¼–è¾‘å™¨çš„ä¸»é¢˜"),React$e.createElement(MaterialUISwitch,{checked:i,size:"small",inputProps:{"aria-label":"controlled"},onChange:l})),React$e.createElement(Box$1,{sx:a},React$e.createElement(Box$1,{className:"FLEX ROW"},React$e.createElement(Typography,{id:"settings_1_2",sx:{fontSize:"0.89rem",fontWeight:500}},"Synchronous Scrolling")),React$e.createElement(Typography,{sx:r},"åŒæ­¥æ»šåŠ¨å·¦è¾¹ç¼–è¾‘åŒºå’Œé¢„è§ˆåŒºåŸŸã€‚(å¼€å‘ä¸­)"),React$e.createElement(IOSSwitch,{checked:getSettings().basic.syncScroll,size:"small",inputProps:{"aria-label":"controlled"},onChange:c})),React$e.createElement(Box$1,{sx:a},React$e.createElement(Typography,{sx:{fontSize:"0.89rem",fontWeight:500}},"Speech To Text"),React$e.createElement(Typography,{sx:r},"é€‰æ‹©è¯­éŸ³è½¬æ–‡å­—çš„è¯†åˆ«è¯­è¨€"),React$e.createElement(Select,{value:getSettings().basic.speechLanguage??"zh-CN",defaultChecked:!0,fullWidth:!0,size:"small",onChange:d},speechLanguageMap.map((u,m)=>React$e.createElement(MenuItem,{key:m,value:u[0]},u[1])))),React$e.createElement(Typography,{id:"settings_1_x",sx:{mt:"20px",fontSize:"30px",fontWeight:"700"}},"é«˜çº§è®¾ç½®ï¼ˆæ–½å·¥ä¸­ï¼‰"),React$e.createElement(Divider,null),React$e.createElement(Box$1,{sx:a},React$e.createElement(Typography,{id:"settings_1_1",sx:{fontSize:"0.89rem",fontWeight:500}},"Export Settings"),React$e.createElement(Typography,{sx:r},"æ›´æ”¹å¯¼å‡ºè®¾ç½®(æ–½å·¥ä¸­)"),React$e.createElement(IOSSwitch,{disabled:!0,size:"small",inputProps:{"aria-label":"controlled"}})),React$e.createElement(Box$1,{sx:a},React$e.createElement(Typography,{id:"settings_1_1",sx:{fontSize:"0.89rem",fontWeight:500}},"Mermaid Theme Configs"),React$e.createElement(Typography,{sx:r},"Mermaidæµç¨‹å›¾ä¸»é¢˜"),React$e.createElement(Select,{value:getSettings().advanced.mermaidTheme??"default",defaultChecked:!0,fullWidth:!0,size:"small",color:"primary",onChange:s},normalMermaidTheme.map((u,m)=>React$e.createElement(MenuItem,{key:m,value:u},normalMermaidThemeMap[m]))))))}),React$d=window.React;function Settings(e){useTheme().palette;const t=getTheme();React$d.useRef();let[n,a]=React$d.useState(!1);React$d.useState("");let r=i=>{a(()=>!1),e.onClick(i),e.closeAll()};return React$d.useEffect(()=>{}),React$d.createElement(React$d.Fragment,null,React$d.createElement(Dialog,{fullScreen:!1,maxWidth:!1,open:e.open,onClose:r,sx:{height:"100vh"}},React$d.createElement(Box$1,{sx:{background:t==="light"?"#F8FAFB":"",padding:"1rem",height:"58vh",width:"60vw"}},React$d.createElement(IconBreadcrumbs,null),React$d.createElement(Divider,{sx:{my:.5}}),React$d.createElement(Box$1,{sx:{height:"48vh",display:"flex",background:t==="light"?"#F8FAFB":"",padding:"5px",flexDirection:"row",borderRradius:"50px",borderRadius:"5px"}},React$d.createElement(SettingsRoute,null),React$d.createElement(SettingsBody,null)))),React$d.createElement(default_1$7,null),"è®¾ç½®")}const React$c=window.React,CustomizedMenus=observer(()=>{const e=useImage(),[t,n]=React$c.useState(null),[a,r]=React$c.useState(null),[i,o]=React$c.useState(null),[l,c]=React$c.useState(null),[d,s]=React$c.useState(!1),u=!!t,m=!!a,h=!!i,R=!!l,y=f=>{n(f.currentTarget)},x=f=>{r(f.currentTarget),f.stopPropagation()},b=async f=>{await isSaved()?(o(f.target),f.stopPropagation()):(f.stopPropagation(),g(),s(!0))},w=f=>{c(f.currentTarget)},g=()=>{n(null)},p=f=>{r(null),f.stopPropagation()},E=f=>{o(null),f.stopPropagation()},k=f=>{c(null),f.stopPropagation()},C=()=>{e.display(),g()},S=()=>{changeFileManagerState(!0),g()};return React$c.createElement("div",null,React$c.createElement(Dialog,{open:d,onClose:()=>{s(!1)}},React$c.createElement(DialogTitle,null,React$c.createElement(Typography,{variant:"h6",gutterBottom:!0},"ç¡®å®šå¯¼å‡ºå—ï¼Œä½ è¿˜æ²¡æœ‰ä¿å­˜å‘¢ï¼")),React$c.createElement(DialogContent,null,React$c.createElement(DialogContentText,null,React$c.createElement(Typography,{variant:"body1",gutterBottom:!0},'Once you have clicked the "yes" button, your text will be saved.'))),React$c.createElement(DialogActions,null,React$c.createElement(Button,{onClick:()=>{s(!1),save(),myPrint()}},"æ˜¯å˜Ÿ"),React$c.createElement(Button,{onClick:()=>{s(!1)},autoFocus:!0},"è¾¾å’©"))),React$c.createElement(CustomizedButtons,{open:u,endIcon:React$c.createElement(default_1$d,null),onClick:y},"æ›´å¤š"),React$c.createElement(StyledMenu,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},elevation:24,anchorEl:t,open:u,onClose:g},React$c.createElement(MenuItem,{onClick:C,disableRipple:!0},React$c.createElement(default_1$8,null),"å›¾ç‰‡ç®¡ç†å™¨"),React$c.createElement(MenuItem,{onClick:S,disableRipple:!0},React$c.createElement(default_1$e,null),"æ–‡ä»¶ç®¡ç†å™¨(å®žéªŒæ€§)"),React$c.createElement(MenuItem,{onClick:f=>{b(f)},disableRipple:!0},React$c.createElement(Export,{anchorEl:i,open:h,closeMenu:g,closeExportMenu:E})),React$c.createElement(Divider,{sx:{my:.5}}),React$c.createElement(MenuItem,{onClick:f=>{x(f)},disableRipple:!0},React$c.createElement(Share,{closAll:g,anchorEl:a,open:m,onClick:p})),React$c.createElement(MenuItem,{onClick:f=>{w(f)},disableRipple:!0},React$c.createElement(Settings,{closeAll:g,anchorEl:l,open:R,onClick:k})),React$c.createElement(MenuItem,{onClick:()=>{g()},disableRipple:!0},React$c.createElement(default_1$f,null),"æ›´å¤š(æ•¬è¯·æœŸå¾…)Â Â ")))});function insertTextMonacoAtCursor(e,t,n=window.editor,a=window.monaco){const r=window.editor,i=e,o=window.editor.getSelections()[0];r.executeEdits("img-insert",[{range:new window.monaco.Range(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn),text:i,forceMoveMarkers:t}])}function writeClipboard(e){navigator.clipboard.writeText(e).catch(t=>{console.error("Failed to copy text: ",t)})}const React$b=window.React,_MagicImg=React$b.forwardRef(MagicImg);function MagicImg(e,t){let n="FLEX JUS-CENTER ",a={width:"fitContent"};const[r,i]=React$b.useState(!1);function o(d){d.altKey&&writeClipboard(`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${e.uuid})`),d.ctrlKey&&insertTextMonacoAtCursor(`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${e.uuid})`,!0)}let[l,c]=React$b.useState({src:e.src,uuid:e.uuid,magic:e.magic!=0,className:n+(e.className??""),style:e.style?{...e.style,...a}:a});return React$b.createElement(React$b.Fragment,null,React$b.createElement("div",{...l,...e,ref:t,className:l.className,style:l.style},React$b.createElement(PhotoProvider,null,React$b.createElement(PhotoView,{triggers:["onDoubleClick"],src:l.src},React$b.createElement(Tooltip,{placement:"right",TransitionComponent:Zoom,arrow:!0,title:"æŒ‰ä½Ctrlç‚¹å‡»æ’å…¥"},React$b.createElement("img",{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},onClick:d=>{o(d)},style:{width:"70%",transition:" 0.2s ease-in-out",borderRadius:"5px",transform:r?"translate(0px, -2px)":"",boxShadow:r?"1vh 2vh 21px rgb(79 79 79)":"rgb(216 216 216) 1vh 2vh 21px"},src:l.src,alt:"error"}))))))}const React$a=window.React;function LR(e){const t=React$a.Children.toArray(e.children).length;let n="LR ",a={display:"flex",flexDirection:"row",justifyContent:e.jus??"center",alignItems:e.ali??"center",width:"100%",height:"100%"},[r,i]=React$a.useState({style:e.style?{...e.style,...a}:a,className:n+(e.className??""),space:e.space??void 0,order:[]}),[o,l]=React$a.useState({marginRight:"5px",width:"100%",height:"100%"});return React$a.createElement(React$a.Fragment,null,React$a.createElement("div",{...r,...e,className:r.className,style:r.style},React$a.Children.map(e.children,(c,d)=>d==t-1?React$a.createElement("div",{style:{...o,flex:r.space?"auto":void 0}},c):React$a.createElement("div",{style:{...o,order:`${r.order[d]}`,flex:`0 0 ${r.space?r.space[d]:void 0}%`}},c))))}const React$9=window.React;function Box(e){var i,o;let t="Box ",n={display:"flex",flexDirection:e.dir??"row",justifyContent:e.jus??"center",alignItems:e.ali??"center",width:e.min==1?"fitContent":"100%",height:e.min==1?"fitContent":"100%",transform:e.move?`translate(${((i=e.move)==null?void 0:i.x)??0}, ${((o=e.move)==null?void 0:o.y)??0})`:void 0},[a,r]=React$9.useState({style:e.style?{...e.style,...n}:n,className:t+(e.className??""),space:e.space??void 0,order:[]});return React$9.createElement(React$9.Fragment,null,React$9.createElement("div",{...a,...e,className:a.className,style:a.style},e.children))}function deleteDBAll(e){let t=window.indexedDB.deleteDatabase(e);t.onerror=function(n){console.log("åˆ é™¤å¤±è´¥")},t.onsuccess=function(n){console.log("åˆ é™¤æˆåŠŸ")}}const React$8=window.React,theme=createTheme({palette:{primary:{main:"#1976d2"},secondary:purple}}),TemporaryDrawer=observer(e=>{const t=useImage(),[n,a]=React$8.useState(!1),[r,i]=React$8.useState([]),[o,l]=React$8.useState(!1);function c(){l(!0)}return React$8.useEffect(()=>{readAllMemoryImg().then(d=>{i(d)})}),React$8.useEffect(()=>{a(t.displayState)},[t.displayState]),React$8.createElement(React$8.Fragment,null,React$8.createElement(Dialog,{open:o,onClose:()=>{l(!1)}},React$8.createElement(DialogTitle,{id:"alert-dialog-title"},"Ready to delete all the images?"),React$8.createElement(DialogContent,null,React$8.createElement(DialogContentText,{id:"alert-dialog-description"},'Once you have clicked the "yes" button, your pictures and your text will be deleted!')),React$8.createElement(DialogActions,null,React$8.createElement(Button,{onClick:()=>{l(!1),deleteDBAll("md_content"),window.location.reload()}},"YES"),React$8.createElement(Button,{onClick:()=>{l(!1)},autoFocus:!0},"NO"))),React$8.createElement(Drawer,{anchor:"bottom",open:n,elevation:16,onClose:()=>{t.hidden()}},React$8.createElement("div",{style:{height:"60svh"}},React$8.createElement("div",null,React$8.createElement(ThemeProvider,{theme},React$8.createElement(Box,null,React$8.createElement(LR,{space:[90]},React$8.createElement(Box,{min:1,move:{x:"5svw"}},React$8.createElement("p",null,"å›¾ç‰‡ç®¡ç†å™¨"),React$8.createElement(Tooltip,{title:React$8.createElement("div",null,"ç®¡ç†ç²˜è´´ä¸Šä¼ çš„å›¾ç‰‡",React$8.createElement("ul",{style:{margin:"2px"}},React$8.createElement("li",null,"æŒ‰ä½Ctrlç‚¹å‡»å›¾ç‰‡æ’å…¥"),React$8.createElement("li",null,"åŒå‡»å›¾ç‰‡æ”¾å¤§é¢„è§ˆ"),React$8.createElement("li",null,"æŒ‰ä½Altç‚¹å‡»å›¾ç‰‡å¤åˆ¶å›¾ç‰‡")))},React$8.createElement(IconButton,null,React$8.createElement(default_1$g,{color:"primary"})))),React$8.createElement(Box,null,React$8.createElement(Tooltip,{title:"åˆ é™¤å…¨éƒ¨å›¾ç‰‡å’Œå‚¨å­˜çš„æ–‡å­—"},React$8.createElement(IconButton,{onClick:c},React$8.createElement(default_1$h,{color:"primary"})))))))),React$8.createElement(Divider,{style:{marginBottom:"1.3svh"}}),React$8.createElement(Grid,{container:!0,rowSpacing:5,columns:16},r?r.map((d,s)=>React$8.createElement(Grid,{id:d.uuid,key:d.uuid,xs:8},React$8.createElement(_MagicImg,{magic:0,src:d.imgBase64,uuid:d.uuid}))):void 0))))}),svg_1=""+new URL("../2904f250.aboutBoxå…³é—­.svg",import.meta.url).href;let aboutMd;const aboutBox=async()=>{let e=`
<div class="closeBox" id="closeAbout">
<img id="closeAboutSvg" class="closeSvg" src=${svg_1} alt="">
</div>
`;await fetch("https://jsd.onmicrosoft.cn/gh/LiWeny16/MarkdownOnline@main/source/assets/about.md").then(async n=>{aboutMd=n.text(),document.getElementById("aboutMd")&&(document.getElementById("aboutMd").innerHTML=e+t(await aboutMd))}).catch(n=>{console.error("Error fetching markdown:",n)});function t(n){return markdownParser().render(n)}document.getElementById("closeAboutSvg").addEventListener("click",()=>{document.getElementById("aboutBox").style.display="none"}),document.getElementById("aboutBox").addEventListener("click",n=>{n.target==document.getElementById("markdownParser")&&(document.getElementById("aboutBox").style.display="none")}),document.getElementById("aboutBox").style.display="block"};function replaceMonacoAll(e,t,n=""){const a=t??window.editor,r=e.editor.getEditors()[0].getModel().getFullModelRange();a.executeEdits("my-replace2",[{range:r,text:n,forceMoveMarkers:!0}])}const React$7=window.React,fileManager=new FileManager,FileDrawer=observer(function e(){const[t,n]=React$7.useState(""),a=useTheme(),r=o=>()=>{changeFileManagerState(o)},i=(o,l)=>{changeSettings({basic:{fileEditLocal:l}})};return React$7.createElement(React$7.Fragment,null,React$7.createElement(Drawer,{sx:{"& .MuiBackdrop-root":{backgroundColor:"transparent"}},anchor:"right",open:getFileManagerState(),onClose:r(!1)},React$7.createElement(Box$1,{sx:{padding:"20px",width:"26svw",display:"flex",alignItems:"center",justifyContent:"center",height:"100svh",flexDirection:"column"}},React$7.createElement(Box$1,{className:"FLEX COL"},React$7.createElement(Typography,null,getSettings().basic.fileEditLocal?t:""),React$7.createElement(Button,{sx:{mb:"10px"},onClick:async()=>{try{const o=await fileManager.openSingleFile();if(n((o==null?void 0:o.name)??""),o){alertUseArco("æ­£åœ¨æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œåˆ«æ€¥ï¼Œä½ ç»™æˆ‘ç­‰ä¼šðŸ˜…");const l=await fileManager.readFile();l&&(replaceMonacoAll(window.monaco,window.editor,l),alertUseArco(`æ‰“å¼€${o==null?void 0:o.name}æˆåŠŸï¼ðŸ˜€`))}else alertUseArco("å·¦é¡¾å³ç›¼ï¼Œæ´»åœ¨æ¢¦å¹»?",2500,{kind:"warning"})}catch{alertUseArco("å°¼çŽ›çš„æŠ¥é”™ä¹ðŸ¤£",2e3,{kind:"error"})}},variant:"contained",color:"primary"},"æ‰“å¼€æ–‡ä»¶"),React$7.createElement(Button,{sx:{mb:"10px"},variant:"contained",onClick:()=>{fileManager.saveAsFile(getMdTextFromMonaco())}},"å¦å­˜ä¸º"),React$7.createElement(Box$1,{className:"FLEX COW ALI-CEN"},React$7.createElement(Typography,{sx:{mr:"10px",fontSize:"17px"},color:a.palette.info.contrastText},"åŒæ­¥æœ¬åœ°ç¼–è¾‘"),React$7.createElement(IOSSwitch,{checked:getSettings().basic.fileEditLocal,size:"small",inputProps:{"aria-label":"controlled"},onChange:i}))))))}),React$6=window.React,runTo=(e,t)=>{kit.sleep(t).then(()=>{window.location.href=e})},handleHomeClick=()=>{runTo("https://bigonion.cn",300)},boxShadow="0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12);",drawerWidth=240,DrawerAppBar=observer(e=>{const t=useTheme(),{window:n}=e,[a,r]=React$6.useState(!1),i=()=>{r(d=>!d)},o=n!==void 0?()=>n().document.body:void 0;React$6.useState(!1);const l=()=>{Message.info({content:"æ­¤åŠŸèƒ½ä»ç„¶åœ¨å¼€å‘ä¸­",closable:!0,duration:3e3,position:"bottom"})},c=React$6.createElement(Box$1,{onClick:i,sx:{textAlign:"center",height:"100%",bgcolor:"black"}},React$6.createElement(Typography,{variant:"h1",sx:{fontSize:"20px",my:2,color:"wheat",textAlign:"center",boxShadow}},"Markdown+ Online View"),React$6.createElement(List,{sx:{height:"100%",bgcolor:"background.paper"}},React$6.createElement(ListItem,null,React$6.createElement(ListItemButton,{onClick:handleHomeClick},React$6.createElement(ListItemAvatar,null,React$6.createElement(Avatar,null,React$6.createElement(default_1$a,null))),React$6.createElement(ListItemText,{primary:"Home",secondary:""}))),React$6.createElement(ListItem,null,React$6.createElement(ListItemButton,{onClick:l},React$6.createElement(ListItemAvatar,null,React$6.createElement(Avatar,null,React$6.createElement(default_1$l,null))),React$6.createElement(ListItemText,{primary:"Photos",secondary:""}))),React$6.createElement(ListItem,null,React$6.createElement(ListItemButton,{onClick:myPrint},React$6.createElement(ListItemAvatar,null,React$6.createElement(Avatar,null,React$6.createElement(default_1$m,null))),React$6.createElement(ListItemText,{primary:"Export",secondary:""}))),React$6.createElement(ListItem,null,React$6.createElement(ListItemButton,{onClick:()=>{aboutBox()}},React$6.createElement(ListItemAvatar,null,React$6.createElement(Avatar,null,React$6.createElement(default_1$n,null))),React$6.createElement(ListItemText,{primary:"About",secondary:""})))));return React$6.createElement(React$6.Fragment,null,React$6.createElement("div",{className:"FLEX header-app-bar",style:{flex:"0 0 8.7vh"}},React$6.createElement(CssBaseline,null),React$6.createElement(AppBar,{component:"nav",sx:{position:"inherit",justifyContent:"center",zIndex:100,height:"8.7vh",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},React$6.createElement(Toolbar,null,React$6.createElement(IconButton,{color:"inherit",onClick:i,sx:{mr:200,display:{sm:"none"}}},React$6.createElement(default_1$i,null)),React$6.createElement(default_1$j,{sx:{color:t.palette.mode=="light"?"black":"white",display:{xs:"none",md:"flex"},transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",mr:1}}),React$6.createElement(Typography,{variant:"h1",component:"a",fontFamily:"monospace",href:"/",sx:{flexGrow:1,display:{xs:"none",sm:"block"},color:t.palette.mode==="light"?t.palette.primary.contrastText:t.palette.secondary.contrastText,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",textDecoration:"none"}},React$6.createElement("h1",{style:{fontSize:"28px"}},"Markdown+ Online View")),React$6.createElement(Box$1,{sx:{display:{xs:"none",sm:"flex",flexDirection:"row"}}},React$6.createElement(CustomizedButtons,{href:"https://bigonion.cn",startIcon:React$6.createElement(default_1$k,null)},"é¦–é¡µ"),React$6.createElement(CustomizedButtons,{onClick:()=>{aboutBox()},startIcon:React$6.createElement(default_1$g,null)},"å…³äºŽ"),React$6.createElement(CustomizedMenus,null),React$6.createElement(TemporaryDrawer,null),React$6.createElement(FileDrawer,null)))),React$6.createElement(Box$1,{sx:{display:{xs:"flex",sm:"none"}},component:"nav"},React$6.createElement(Drawer,{container:o,variant:"temporary",open:a,onClose:i,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:drawerWidth}}},c))))});function exeSyncScrollAction(e,t){if(getSettings().basic.syncScroll)alertUseArco("åŒæ­¥æ»šåŠ¨å·²å…³é—­ ðŸ§ ",2e3),changeSettings({basic:{syncScroll:!1}});else{alertUseArco("åŒæ­¥æ»šåŠ¨å·²å¼€å¯ ðŸ˜ ",2e3);const n=e.getScrollTop();e.setScrollTop(n+.3),e.setScrollTop(n-.3);const a=e.getVisibleRanges();if(a.length>0){const i=a[0].startLineNumber,o=document.getElementById("view-area");i==1&&o.scrollTo({top:0,behavior:"smooth"})}changeSettings({basic:{syncScroll:!0}})}}function exeFileManagerAction(e,t){getFileManagerState()?changeFileManagerState(!1):changeFileManagerState(!0)}function enableFastKeyEvent(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.key=="q"&&(e.stopPropagation(),e.preventDefault(),exeSyncScrollAction(window.editor)),e.ctrlKey&&(e.altKey||e.shiftKey)&&e.key=="f"&&(e.stopPropagation(),e.preventDefault(),exeFileManagerAction()),e.ctrlKey&&e.key=="s"&&(e.stopPropagation(),e.preventDefault(),save()),e.ctrlKey&&e.key=="b"},!0)}function monacoPasteEvent(e,t){e.getContainerDomNode().addEventListener("paste",n=>{handlePasteEvent(n).then(a=>{if(a){let r="",i=new Date().getTime();console.log(a);for(let o=0;o<=a.length-1;o++)console.log(o),r+=`![æˆ‘æ˜¯å›¾ç‰‡](/vf/${i+o})`;fillInMemoryImgs(a,i),insertTextMonacoAtCursor(r,!0)}})},!0)}function handlePasteEvent(e){return new Promise(t=>{let a=(e.clipboardData||window.clipboardData).items;const r=a.length;let i=[];for(let o=0;o<a.length;o++){let l=a[o];if(l.kind=="file"){e.preventDefault(),e.stopPropagation();let c=l.getAsFile(),d=new FileReader;d.onload=function(u){i.push(u.target.result),o===r-1&&t(i)};const s=c.type.split("/")[1];(s==="png"||s==="jpg"||s==="jpeg"||s==="webp"||s==="svg")&&d.readAsDataURL(c)}else t([])}})}let lock=!1,triggerTime=0;function triggerConverterEvent(e=2){let t,n;triggerTime++,lock?(clearTimeout(t),t=setTimeout(function(){mdConverter(),triggerTime=0},300)):(clearTimeout(n),triggerTime>=e?(lock=!0,mdConverter(),n=setTimeout(()=>{lock=!1,triggerTime=0},200)):mdConverter())}function getCommandPaletteText(){return document.getElementsByClassName("ibwrapper")[0]?document.getElementsByClassName("ibwrapper")[0].children[0].value:""}function exeTableAction(){console.log(getCommandPaletteText().split("#"));const e=getCommandPaletteText().split("#")[1],t=getCommandPaletteText().split("#")[2];insertTextMonacoAtCursor(generateMarkdownTable(e,t),!0)}function generateMarkdownTable(e,t){if(!e||!t)return"";let n="| ";for(let a=0;a<t;a++)n+=`Header  ${a+1} | `;n+=`
|`;for(let a=0;a<t;a++)n+="--- | ";for(let a=0;a<e;a++){n+=`
| `;for(let r=0;r<t;r++)n+=` Cell ${a+1}-${r+1} | `}return n}function exeInsertPageBreakerAction(){insertTextMonacoAtCursor(`|---|
`,!0)}function exeLatexBlockAction(e,t){const n=e.getPosition();n.column==1&&(insertTextMonacoAtCursor(`$$

$$`,!0),e.setPosition({column:1,lineNumber:n.lineNumber+1}))}function exeEmojiPickerAction(e,t){getEmojiPickerState()==="on"?changeEmojiPickerState("off"):changeEmojiPickerState("on")}function exeSpeechPanelAction(e,t){const n=getSettings().basic.speechLanguage??"zh-CN";let a=r=>{insertTextMonacoAtCursor(window._speechData.speechResult,!0)};if(window._speechData.processing)alertUseArco("è¯­éŸ³è¯†åˆ«å·²å…³é—­ï¼Œå—¯ä½ é—­å˜´å§ï¼Œæˆ‘ä¸å¬...",2e3),window._speechData.processing=!1,window._speechData.speech.stopRecognition(),window._speechData.speech=null,window._speechData.speechResult="";else{alertUseArco("è¯­éŸ³è¯†åˆ«å·²å¼€å¯ï¼Œå—¯ä½ è¯´ï¼Œæˆ‘åœ¨å¬...",3e3),window._speechData.processing=!0;let{recognition:r}=speechRecognition(n,!0,a);window._speechData.speech=r}}function exeBoldAction(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),i;r.startsWith("**")&&r.endsWith("**")?i=r.slice(2,-2):i=`**${r}**`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==r){const c=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(c)}}function exeAlignRightAction(e,t){const n=e.getSelection(),a=e.getModel(),r=n.startLineNumber,i=a.getLineContent(r),o=i.length;let l="",c=o+1,d=o+1;const s=i.slice(-2);s===">>"?(l="",c=o-1):s==="||"?(l=">>",c=o-1):l=">>";const u=new t.Range(r,c,r,d);e.executeEdits("my-source",[{range:u,text:l,forceMoveMarkers:!0}]);const m=new t.Selection(r,c+l.length,r,c+l.length);e.setSelection(m)}function exeAlignCenterAction(e,t){const n=e.getSelection(),a=e.getModel(),r=n.startLineNumber,i=a.getLineContent(r),o=i.length;let l="",c=o+1,d=o+1;const s=i.slice(-2);s==="||"?(l="",c=o-1):s===">>"?(l="||",c=o-1):l="||";const u=new t.Range(r,c,r,d);e.executeEdits("my-source",[{range:u,text:l,forceMoveMarkers:!0}]);const m=new t.Selection(r,c+l.length,r,c+l.length);e.setSelection(m)}function exeItalicsAction(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),i;r.startsWith("*")&&r.endsWith("*")?i=r.slice(1,-1):i=`*${r}*`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==r){const c=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(c)}}function exeUnderlineAction(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),i;r.startsWith("<u>")&&r.endsWith("</u>")?i=r.slice(3,-4):i=`<u>${r}</u>`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==r){const c=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(c)}}function exeDeleteLinection(e,t){const n=e.getSelection();let r=e.getModel().getValueInRange(n),i;r.startsWith("~~")&&r.endsWith("~~")?i=r.slice(2,-2):i=`~~${r}~~`;var l=new t.Range(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn);if(e.executeEdits("my-source",[{range:l,text:i,forceMoveMarkers:!1}]),i!==r){const c=new t.Selection(n.startLineNumber,n.startColumn,n.endLineNumber,n.startColumn+i.length);e.setSelection(c)}}function exeHeadingAction(e,t,n){const a=e.getSelection(),r=new t.Range(a.startLineNumber,1,a.startLineNumber,1),i=e.getModel().getLineContent(a.startLineNumber),o=/^(#+) /,l=i.match(o);if(!(["$"].includes(i[0])||i.match("```")))if(l&&l[1].length===n){console.log(i);const c=i.slice(l[0].length);e.executeEdits("",[{range:new t.Range(a.startLineNumber,1,a.startLineNumber,i.length+1),text:c}])}else{const c="#".repeat(n)+" ",d=l?new t.Range(a.startLineNumber,1,a.startLineNumber,l[0].length+1):r;e.executeEdits("",[{range:d,text:c}])}}function monacoKeyEvent(e,t){const n={save:t.KeyMod.CtrlCmd|t.KeyCode.KeyS,quotation:t.KeyMod.Shift|t.KeyCode.Quote,format:t.KeyMod.Shift|t.KeyCode.KeyF,pageBreaker:t.KeyMod.CtrlCmd|t.KeyMod.Alt|t.KeyCode.Enter,latexBlock:t.KeyMod.CtrlCmd|t.KeyCode.KeyM,voice2Words:t.KeyMod.CtrlCmd|t.KeyMod.Alt|t.KeyCode.KeyV,syncScroll:t.KeyMod.CtrlCmd|t.KeyCode.KeyQ,fileManager:t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyF,markdownTextEditFastKey:{bold:t.KeyMod.CtrlCmd|t.KeyCode.KeyB,italics:t.KeyMod.CtrlCmd|t.KeyCode.KeyI,underline:t.KeyMod.CtrlCmd|t.KeyCode.KeyU,alignCenter:t.KeyMod.CtrlCmd|t.KeyCode.KeyE,alignRight:t.KeyMod.CtrlCmd|t.KeyCode.KeyR,deleteLine:t.KeyMod.CtrlCmd|t.KeyCode.Backquote,h1:t.KeyMod.CtrlCmd|t.KeyCode.Digit1,h2:t.KeyMod.CtrlCmd|t.KeyCode.Digit2,h3:t.KeyMod.CtrlCmd|t.KeyCode.Digit3,h4:t.KeyMod.CtrlCmd|t.KeyCode.Digit4}};e.addAction({id:"show.emojiPicker",label:"æ‰“å¼€è¡¨æƒ…åŒ…è¶…å¸‚ ðŸ¤ª",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:-100,run:()=>{exeEmojiPickerAction()}}),e.addAction({id:"insert.tableAny",label:"æ’å…¥ä»»æ„è¡Œå’Œåˆ—,æ ¼å¼: table#x#x",keybindings:[],run:()=>{exeTableAction()}}),e.addAction({id:"reload-no-cache",label:"å¼ºåˆ¶åˆ·æ–°Markdownåœ¨çº¿",keybindings:[],run:()=>{window.location.reload(!0)}}),e.addAction({id:"export.asPDF",label:"ä¿å­˜å¹¶å¯¼å‡ºä¸ºPDF",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:async()=>{await isSaved()?myPrint():(save(),kit.sleep(800).then(()=>{myPrint()}))}}),e.addAction({id:"export.asImg",label:"ä½œä¸ºPNGæ ¼å¼çš„å›¾ç‰‡å¯¼å‡º",keybindings:[],run:()=>{exportAsImage()}}),e.addAction({id:"insert.pageBreaker",label:"æ’å…¥ä¸€ä¸ªåˆ†é¡µç¬¦",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{exeInsertPageBreakerAction()}}),e.addAction({id:"insert.latexBlock",label:"æ’å…¥ä¸€ä¸ªLaTexè¯­æ³•å—",keybindings:[n.latexBlock],contextMenuGroupId:"navigation",contextMenuOrder:0,run:()=>{exeLatexBlockAction(e)}}),e.addAction({id:"insert.voice2words",label:"è¯­éŸ³è½¬æ–‡å­—...å˜Ÿ...å–‚...å¬å¾—è§å—....",keybindings:[n.voice2Words],contextMenuGroupId:"navigation",contextMenuOrder:1,run:()=>{exeSpeechPanelAction()}}),e.addAction({id:"command.syncScroll",label:"åŒæ­¥æ»šåŠ¨ (å¼€å¯/å…³é—­)",keybindings:[n.syncScroll],contextMenuGroupId:"navigation",run:()=>{exeSyncScrollAction(e)}}),e.addAction({id:"command.fileManagerState",label:"æ–‡ä»¶ç®¡ç†å™¨ (å¼€å¯/å…³é—­)",keybindings:[n.fileManager],contextMenuGroupId:"navigation",run:()=>{exeFileManagerAction()}}),e.addAction({id:"insert.bold",label:"åŠ ç²—æ–‡æœ¬",keybindings:[n.markdownTextEditFastKey.bold],contextMenuGroupId:"navigation",run:()=>{exeBoldAction(e,t)}}),e.addAction({id:"insert.alignRight",label:"æ–‡æœ¬å±…å³",keybindings:[n.markdownTextEditFastKey.alignRight],contextMenuGroupId:"navigation",run:()=>{exeAlignRightAction(e,t)}}),e.addAction({id:"insert.alignCenter",label:"æ–‡æœ¬å±…ä¸­",keybindings:[n.markdownTextEditFastKey.alignCenter],contextMenuGroupId:"navigation",run:()=>{exeAlignCenterAction(e,t)}}),e.addAction({id:"insert.italics",label:"æ–œä½“",keybindings:[n.markdownTextEditFastKey.italics],run:()=>{exeItalicsAction(e,t)}}),e.addAction({id:"insert.underline",label:"ä¸‹åˆ’çº¿",keybindings:[n.markdownTextEditFastKey.underline],run:()=>{exeUnderlineAction(e,t)}}),e.addAction({id:"insert.deleteLine",label:"åˆ é™¤çº¿",keybindings:[n.markdownTextEditFastKey.deleteLine],run:()=>{exeDeleteLinection(e,t)}}),e.addAction({id:"insert.h1",label:"æ ‡é¢˜1",keybindings:[n.markdownTextEditFastKey.h1],run:()=>{exeHeadingAction(e,t,1)}}),e.addAction({id:"insert.h2",label:"æ ‡é¢˜2",keybindings:[n.markdownTextEditFastKey.h2],run:()=>{exeHeadingAction(e,t,2)}}),e.addAction({id:"insert.h3",label:"æ ‡é¢˜3",keybindings:[n.markdownTextEditFastKey.h3],run:()=>{exeHeadingAction(e,t,3)}}),e.addAction({id:"insert.h4",label:"æ ‡é¢˜4",keybindings:[n.markdownTextEditFastKey.h4],run:()=>{exeHeadingAction(e,t,4)}}),e.addAction({id:"reload",label:"é‡æ–°åŠ è½½çª—å£(Reload Window)",keybindings:[],contextMenuGroupId:"navigation",contextMenuOrder:100,run:()=>{window.location.reload()}})}function monacoSnippets(e,t){t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["/"],provideCompletionItems:(n,a,r)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column}),o={startLineNumber:a.lineNumber,startColumn:a.column-1,endLineNumber:a.lineNumber,endColumn:a.column};if(!isInLatexBlock(i)&&a.column===2)return{suggestions:[{label:"/code (ä»£ç å—)",detail:"æ’å…¥ä¸€æ®µä»£ç å—",kind:t.languages.CompletionItemKind.Function,insertText:"\n```${1:js}\n${2:}\n```\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"0",range:o},{label:"/image (å›¾ç‰‡)",detail:"æ’å…¥å›¾ç‰‡",kind:t.languages.CompletionItemKind.Function,insertText:"![${1:}](${2:})",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"1",range:o},{label:"/table-2x2 (è¡¨æ ¼)",detail:"æ’å…¥ä¸€ä¸ª2è¡Œ2åˆ—çš„è¡¨æ ¼",kind:t.languages.CompletionItemKind.Function,insertText:"\n|${1:}    |${1:}     |\n|--- |---  |\n|${1:}    |${1:}     |\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"2",range:o},{label:"/table-2x4 (è¡¨æ ¼)",detail:"æ’å…¥ä¸€ä¸ª2è¡Œ4åˆ—çš„è¡¨æ ¼",kind:t.languages.CompletionItemKind.Function,insertText:"\n|${1:}    |${1:}    |${1:}    |${1:}    |\n|--- |--- |--- |--- |\n|${1:}    |${1:}    |${1:}    |${1:}    |\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:"3",range:o},{label:"/latex-block (å…¬å¼å—)",detail:"åˆ›å»ºä¸€ä¸ªLaTexå…¬å¼å—",kind:t.languages.CompletionItemKind.Field,sortText:"4",range:o,insertText:`$$
\${1:}
$$
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/list-in-order (æœ‰åºåˆ—è¡¨)",detail:"åˆ›å»ºæœ‰åºåˆ—è¡¨",kind:t.languages.CompletionItemKind.Function,sortText:"5",range:o,insertText:`
1. \${1:}
2. \${2:}
3. \${3:}
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/page-breaker (åˆ†é¡µç¬¦)",detail:"æ’å…¥ä¸€ä¸ªåˆ†é¡µç¬¦",kind:t.languages.CompletionItemKind.Function,sortText:"6",range:o,insertText:`
|---|
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-flowChart (æµç¨‹å›¾)",detail:"æ’å…¥mermaidæµç¨‹å›¾",kind:t.languages.CompletionItemKind.Function,sortText:"7",range:o,insertText:"\n```mermaid\nflowchart TB\nStart --> Stop\n```\n",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-pie-chart (é¥¼å›¾)",detail:"æ’å…¥mermaidé¥¼å›¾",kind:t.languages.CompletionItemKind.Function,sortText:"8",range:o,insertText:'\n```mermaid\npie title ${1:Pets adopted by volunteers}\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n```\n',insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-mind-map (æ€ç»´å¯¼å›¾)",detail:"æ’å…¥mermaidæ€ç»´å¯¼å›¾",kind:t.languages.CompletionItemKind.Function,sortText:"9",range:o,insertText:`
\`\`\`mermaid
mindmap
Root
    A
      B
      C
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-time-line (æ—¶é—´çº¿å›¾)",detail:"æ’å…¥mermaidæ—¶é—´çº¿å›¾",kind:t.languages.CompletionItemKind.Function,sortText:"a1",range:o,insertText:`
\`\`\`mermaid
timeline
    title History of Social Media Platform
    2002 : LinkedIn
    2004 : Facebook
         : Google
    2005 : Youtube
    2006 : Twitter
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/mermaid-sequence (åºåˆ—å›¾)",detail:"æ’å…¥mermaidåºåˆ—å›¾",kind:t.languages.CompletionItemKind.Function,sortText:"a2",range:o,insertText:`
\`\`\`mermaid
sequenceDiagram
    Alice->>+John: Hello John, how are you?
    Alice->>+John: John, can you hear me?
    John-->>-Alice: Hi Alice, I can hear you!
    John-->>-Alice: I feel great!
\`\`\`
`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"/prettier-ignore (å¿½ç•¥æ ¼å¼åŒ–è¡Œ)",detail:"ä¸‹ä¸€è¡Œä¸è¿›è¡Œprettieræ ¼å¼åŒ–",kind:t.languages.CompletionItemKind.Function,insertText:"<!-- prettier-ignore -->",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o,sortText:"b1"},{label:"/prettier-ignore-block (å¿½ç•¥æ ¼å¼åŒ–å—)",detail:"å¿½ç•¥prettieræ ¼å¼åŒ–å—",kind:t.languages.CompletionItemKind.Function,insertText:`<!-- prettier-ignore-start -->
\${1:}
<!-- prettier-ignore-end -->`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:o,sortText:"b2"}]}}}),t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["\\"],provideCompletionItems:(n,a,r)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column});if(isNeedToUseLatexIntellisense(i)){const o=Array.from([...delimiters0,...delimeterSizing0,...greekLetters0,...otherLetters0,...spacing0,...verticalLayout0,...logicAndSetTheory0,...macros0,...bigOperators0,...binaryOperators0,...binomialCoefficients0,...fractions0,...mathOperators0,...relations0,...negatedRelations0,...arrows0,...font0,...size0,...style0,...symbolsAndPunctuation0,...debugging0],(s,u)=>({label:`\\${s}`,kind:t.languages.CompletionItemKind.Function,insertText:s,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(s[0])?"1":"0"})),l=Array.from([...accents1,...annotation1,...verticalLayout1,...overlap1,...spacing1,...logicAndSetTheory1,...mathOperators1,...sqrt1,...extensibleArrows1,...font1,...braketNotation1,...classAssignment1],(s,u)=>({label:`\\${s}`,kind:t.languages.CompletionItemKind.Function,insertText:`${s}{$1}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(s[0])?"1":"0"})),c=Array.from([...verticalLayout2,...binomialCoefficients2,...fractions2,...color2],(s,u)=>({label:`\\${s}`,kind:t.languages.CompletionItemKind.Function,insertText:`${s}{$1}{$2}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,sortText:/[A-Z]/.test(s[0])?"1":"0"})),d=[{label:"\\begin",kind:t.languages.CompletionItemKind.Function,insertText:"begin{${1|"+envs.join(",")+`|}}
	$2
\\end{$1}`,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet}];return{suggestions:[...o,...l,...c,...d]}}}}),t.languages.registerCompletionItemProvider("markdown",{triggerCharacters:["^"],provideCompletionItems:(n,a,r)=>{const i=n.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column});if(isNeedToUseClueIntellisense(i))return{suggestions:[{label:"RED",kind:t.languages.CompletionItemKind.Function,insertText:"RED",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"RED..."},{label:"PINK",kind:t.languages.CompletionItemKind.Function,insertText:"PINK",insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,detail:"PINK..."}]}}})}function isNeedToUseLatexIntellisense(e){return!!(e[e.length-1]==="\\"&&isInLatexBlock(e))}function isInLatexBlock(e){return(e.match(/\$\$/g)?e.match(/\$\$/g).length%2===1:!1)||(e.match(/\$/g)?e.match(/\$/g).length%2===1:!1)}function isNeedToUseClueIntellisense(e){return e[e.length-1]==="^"}function monacoFormat(e,t){t.languages.registerDocumentFormattingEditProvider("markdown",{provideDocumentFormattingEdits(n){let a=n.getValue();var r=e.getPosition();return prettier.format(a,{parser:"markdown",plugins:[parseMd]}).then(i=>{replaceMonacoAll(window.monaco,e,i),e.setPosition(r)}),[]}})}function getDeviceTyByProportion(){const e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return e/t>=1?"PC":"mobile"}function monacoMouseEvent(e,t){e.onContextMenu(n=>{setContextMenuClickPosition({posx:n.event.posx,posy:n.event.posy})})}function monacoClickEvent(e,t){e.onDidFocusEditorWidget(()=>{window.deco.clear()})}function monacoResizeHeightEvent(e){const t=()=>{e(Math.floor(window.innerHeight*.9))};window.addEventListener("resize",t)}function monacoScrollEvent(e,t){const n=debounce(()=>{syncScrollOnce(e)},20);e.onDidScrollChange(n)}function syncScrollOnce(e,t){if(getSettings().basic.syncScroll){const n=e.getVisibleRanges();if(n.length>0){const r=n[0].startLineNumber;syncScroll(r-1)}}}function syncScroll(e){const t=document.getElementById("view-area");if(!t)return;if(e===0){t.scrollTo({top:0,behavior:"smooth"});return}const n=document.querySelectorAll("#view-area [data-line]");let a=null,r=null,i=1/0,o=1/0,l=null;if(n.forEach(c=>{const s=parseInt(c.getAttribute("data-line")||"0",10)-e;s==0?l=c:(s<0&&Math.abs(s)<i&&(i=Math.abs(s),a=c),s>0&&s<o&&(o=s,r=c))}),l){t.scrollTo({top:l.offsetTop,behavior:"smooth"});return}if(!r){t.scrollTo({top:a.offsetTop,behavior:"smooth"});return}if(a&&r){const c=a.offsetTop,d=r.offsetTop,s=(e-(e-i))/(o+i),u=(d-c)*s+c;t.scrollTo({top:u,behavior:"smooth"})}}const React$5=window.React,useState=window.React.useState,version="0.45.0",cdnDomain={unpkg:["npm.onmicrosoft.cn","unpkg.com"],jsDelivr:["jsd.onmicrosoft.cn","www.jsdelivr.com","jsd.haorwen.tk"]},cdnLinks={unpkg:{cdn:`https://${cdnDomain.unpkg[0]}/monaco-editor@${version}/dev/vs`},jsDelivr:{cdn:`https://${cdnDomain.jsDelivr[0]}/npm/monaco-editor@${version}/dev/vs`}};try{loader.config({paths:{vs:cdnLinks.unpkg.cdn}})}catch(e){loader.config({paths:{vs:cdnLinks.jsDelivr.cdn}})}const files={"index.js":{name:"index.js",language:"javascript",value:"nihao"},"style.css":{name:"style.css",language:"css",value:"nihao"},"index.md":{name:"index.md",language:"markdown",value:""}},MonacoEditor=observer(function e(){const t=React$5.useRef(null),[n,a]=React$5.useState(!0),r=()=>{a(!1)},[i,o]=React$5.useState(640),[l,c]=React$5.useState(800),d=()=>{mdConverter(!0),setTimeout(()=>{u(g=>({...g,minimap:{enabled:!0}}))},300)},[s,u]=useState({fontSize:16,wordWrap:"on",formatOnType:!0,formatOnPaste:!1,fontLigatures:!0,autoSurround:"quotes",autoClosingQuotes:"always",smoothScrolling:!0,codeLens:!1,pasteAs:{enabled:!1,showPasteSelector:"never"},peekWidgetDefaultFocus:"tree",cursorSmoothCaretAnimation:"explicit",colorDecorators:!0,minimap:{enabled:!0},unicodeHighlight:{nonBasicASCII:!1,ambiguousCharacters:!1}}),[m,h]=useState("index.md"),R=files[m];function y(g){triggerConverterEvent(4)}function x(g,p){getDeviceTyByProportion()=="PC"&&o(document.getElementById("editor").clientWidth/2),c(document.getElementById("editor").clientHeight),p.languages.setLanguageConfiguration("markdown",{autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/*",close:"*/",notIn:["string"]},{open:"ï¼Ÿ",close:"ï¼Ÿ",notIn:["string","comment"]}]}),p.languages.setMonarchTokensProvider("markdown",{tokenizer:{root:[[/\b(function|return|var)\b/,"keyword"],[/\|\|/,"string"],[/>>/,"string"],[/[{}]/,"delimiter"],[/[a-z_$][\w$]*/,"identifier"],[/"[^"]*"/,"string"],[/\d+/,"number"],[/[$$$$]/,"keyword"]]}})}function b(){}function w(g,p){window.editor=g,window.monaco=p,allInit(g,p,r),x(g,p),monacoPasteEvent(g),monacoKeyEvent(g,p),monacoSnippets(g,p),monacoFormat(g,p),monacoMouseEvent(g),monacoClickEvent(g),monacoScrollEvent(g),monacoResizeHeightEvent(c)}return React$5.createElement(React$5.Fragment,null,React$5.createElement("div",{ref:t,id:"monaco-editor",style:{width:i,height:"100%"}},React$5.createElement(ResizableBox,{className:"custom-resizable",width:i,height:l,draggableOpts:{grid:[5,15]},minConstraints:[100,l],onResizeStop:d,onResize:g=>{u(p=>({...p,minimap:{enabled:!1}})),o(g.x)},axis:"x"},React$5.createElement(Ft,{className:"monaco-editor-inner",height:"100%",width:i,theme:getTheme()==="light"?"vs-light":"vs-dark",path:R.name,defaultLanguage:R.language,defaultValue:R.value,onMount:w,onChange:y,options:s,beforeMount:b})),React$5.createElement(Backdrop,{sx:{color:"#fff",zIndex:g=>g.zIndex.drawer+1},open:n,onClick:r},React$5.createElement(CircularProgress,{color:"inherit"}))))}),React$4=window.React;function MdArea(){return React$4.createElement(React$4.Fragment,null,React$4.createElement(MonacoEditor,null))}const React$3=window.React,EmojiPicker=observer(function e(t){const a=d(),r=React$3.useRef(),[i,o]=React$3.useState(!1),[l,c]=React$3.useState(!1);function d(){let u=getContextMenuClickPosition();return u.posy+435>window.document.body.clientHeight&&(u.posy=window.document.body.clientHeight-435),u}function s(u){insertTextMonacoAtCursor(u.native,!0)}return React$3.useEffect(()=>{o(t.open),t.open?(c(t.open),gsap.fromTo(".emojiPicker",{x:0},{x:20,opacity:1,duration:.6})):gsap.to(".emojiPicker",{opacity:0,duration:.4,onComplete:function(){c(i)}})},[t.open]),React$3.createElement(React$3.Fragment,null,React$3.createElement(Backdrop,{invisible:!0,ref:r,transitionDuration:{appear:500,enter:500,exit:1e3},sx:{zIndex:u=>u.zIndex.drawer+1,pointerEvents:i?"":"none"},open:i,onContextMenu:u=>{u.target.tagName!="EM-EMOJI-PICKER"&&(changeEmojiPickerState("off"),u.preventDefault())},onMouseUp:u=>{u.button==2||u.button==0&&u.target.tagName!="EM-EMOJI-PICKER"&&changeEmojiPickerState("off")}},React$3.createElement(Box$1,{sx:{position:"absolute",top:a.posy-window.document.body.clientHeight*.1,left:a.posx+window.document.body.clientWidth*.02},className:"MIN emojiPicker"},React$3.createElement($e5534fc185f7111e$export$2e2bcd8739ae039,{data,onEmojiSelect:s}))))}),React$2=window.React;function enEvents(e){e&&enableFastKeyEvent()}const Body=observer(function e(){React$2.useState("");const t=React$2.useRef(null);return React$2.useEffect(()=>{enEvents(!0)},[]),React$2.createElement(React$2.Fragment,null,React$2.createElement("div",{style:{marginTop:"1.3vh"},id:"bodyTopBox"},React$2.createElement("div",{id:"editor",className:`${getTheme()=="light"?"theme-light":"theme-dark"} FLEX ROW`},React$2.createElement(MdArea,null),React$2.createElement("article",{id:"view-area-hidden",className:"hidden-pre"}),React$2.createElement("article",{ref:t,id:"view-area",className:`markdown-body ${getTheme()==="light"?"markdown-body-light":"markdown-body-dark"}`})),React$2.createElement("div",{id:"aboutBox"},React$2.createElement("div",{id:"markdownParser"},React$2.createElement("div",{id:"aboutMd",className:`aboutViewArea markdown-body ${getTheme()==="light"?"markdown-body-light":"markdown-body-dark"}`}))),React$2.createElement(EmojiPicker,{open:getEmojiPickerState()==="on"})))}),React$1=window.React,bothStyle={zIndex:{drawer:1300,modal:1200,appBar:1200}},lightTheme=createTheme({...bothStyle,palette:{primary:{main:blue[200],contrastText:"#fff378"},secondary:{main:green[500],contrastText:"pink"},info:{main:blue[200],contrastText:"#8B8A8A"},mode:"light"}}),darkTheme=createTheme({...bothStyle,palette:{primary:{main:blue[400],contrastText:"wheat"},secondary:{main:green[700],contrastText:"wheat"},info:{main:green[600],contrastText:"#8B8A8A"},mode:"dark"}}),App=observer(()=>(React$1.useEffect(()=>{kit.addStyle(`
    ::selection {
      border-radius: 5px;
      background-color: ${getTheme()==="light"?"#add6ff":"#636363"};
    }
    `)},[]),React$1.createElement(React$1.Fragment,null,React$1.createElement(ThemeProvider,{theme:getTheme()==="light"?lightTheme:darkTheme},React$1.createElement(CssBaseline,null),React$1.createElement(Box$1,{className:"FLEX COL App-top"},React$1.createElement(DrawerAppBar,null),React$1.createElement(Body,null)))))),React=window.React;client.createRoot(document.getElementById("root")).render(React.createElement(App,null));
